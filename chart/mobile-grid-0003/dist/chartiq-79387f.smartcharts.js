(window.webpackJsonpsmartcharts=window.webpackJsonpsmartcharts||[]).push([[0],{342:function(e,t,i){"use strict";i.r(t),i.d(t,"CIQ",(function(){return Ce.c})),i.d(t,"SplinePlotter",(function(){return Ce.d})),i.d(t,"timezoneJS",(function(){return Ce.e})),i.d(t,"$$",(function(){return Ce.a})),i.d(t,"$$$",(function(){return Ce.b})),i.d(t,"createEngine",(function(){return Se.e})),i.d(t,"customCharts",(function(){return Se.f})),i.d(t,"drawing",(function(){return Se.g})),i.d(t,"easeMachine",(function(){return Se.h})),i.d(t,"equations",(function(){return Se.i})),i.d(t,"i18n",(function(){return Se.j})),i.d(t,"interaction",(function(){return Se.k})),i.d(t,"markers",(function(){return Se.l})),i.d(t,"market",(function(){return Se.m})),i.d(t,"movement",(function(){return Se.p})),i.d(t,"nameValueStore",(function(){return Se.q})),i.d(t,"quoteFeed",(function(){return Se.s})),i.d(t,"series",(function(){return Se.t})),i.d(t,"share",(function(){return Se.u})),i.d(t,"span",(function(){return Se.v})),i.d(t,"storage",(function(){return Se.w})),i.d(t,"studies",(function(){return Se.x})),i.d(t,"symbolLookupBase",(function(){return Se.y})),i.d(t,"theme",(function(){return Se.z})),i.d(t,"timezone",(function(){return Se.A})),i.d(t,"touch",(function(){return Se.C})),i.d(t,"visualization",(function(){return Se.D})),i.d(t,"medianPrice",(function(){return Se.n})),i.d(t,"momentum",(function(){return Se.o})),i.d(t,"priceRelative",(function(){return Se.r})),i.d(t,"vwap",(function(){return Se.E})),i.d(t,"zigzag",(function(){return Se.F})),i.d(t,"aggregations",(function(){return n})),i.d(t,"drawingAdvanced",(function(){return s})),i.d(t,"equationsAdvanced",(function(){return o})),i.d(t,"highPerformanceMarkers",(function(){return l})),i.d(t,"renderersAdvanced",(function(){return h})),i.d(t,"accumulationDistribution",(function(){return c})),i.d(t,"adx",(function(){return u})),i.d(t,"alligator",(function(){return d})),i.d(t,"aroon",(function(){return p})),i.d(t,"atr",(function(){return g})),i.d(t,"awesomeOscillator",(function(){return f})),i.d(t,"balanceOfPower",(function(){return m})),i.d(t,"bollinger",(function(){return y})),i.d(t,"cci",(function(){return v})),i.d(t,"centerOfGravity",(function(){return x})),i.d(t,"chaikin",(function(){return b})),i.d(t,"chande",(function(){return C})),i.d(t,"choppiness",(function(){return S})),i.d(t,"comparisonStudies",(function(){return w})),i.d(t,"coppock",(function(){return k})),i.d(t,"darvasBox",(function(){return A})),i.d(t,"detrended",(function(){return D})),i.d(t,"disparity",(function(){return M})),i.d(t,"easeOfMovement",(function(){return T})),i.d(t,"ehlerFisher",(function(){return F})),i.d(t,"elder",(function(){return _})),i.d(t,"fractalChaos",(function(){return P})),i.d(t,"highLowStudies",(function(){return V})),i.d(t,"ichimoku",(function(){return O})),i.d(t,"intradayMomentum",(function(){return I})),i.d(t,"keltner",(function(){return L})),i.d(t,"klinger",(function(){return H})),i.d(t,"linearRegression",(function(){return E})),i.d(t,"macd",(function(){return N})),i.d(t,"massIndex",(function(){return R})),i.d(t,"moneyFlow",(function(){return Y})),i.d(t,"movingAverages",(function(){return z})),i.d(t,"parabolicSAR",(function(){return B})),i.d(t,"pivotPoints",(function(){return U})),i.d(t,"prettyGoodOscillator",(function(){return j})),i.d(t,"priceMomentumOscillator",(function(){return W})),i.d(t,"priceVolumeOscillator",(function(){return Q})),i.d(t,"primeNumber",(function(){return q})),i.d(t,"pring",(function(){return G})),i.d(t,"projectedVolume",(function(){return X})),i.d(t,"psychologicalLine",(function(){return Z})),i.d(t,"qstick",(function(){return K})),i.d(t,"rainbow",(function(){return J})),i.d(t,"randomWalk",(function(){return ee})),i.d(t,"relativeVigor",(function(){return te})),i.d(t,"rsi",(function(){return ie})),i.d(t,"schaffTrendCycle",(function(){return ae})),i.d(t,"shinohara",(function(){return re})),i.d(t,"stochastics",(function(){return ne})),i.d(t,"supertrend",(function(){return se})),i.d(t,"swingIndex",(function(){return oe})),i.d(t,"trendIntensity",(function(){return le})),i.d(t,"trix",(function(){return he})),i.d(t,"twiggsMoneyFlow",(function(){return ce})),i.d(t,"typicalPrice",(function(){return ue})),i.d(t,"ulcerIndex",(function(){return de})),i.d(t,"ultimateOscillator",(function(){return pe})),i.d(t,"valuationLines",(function(){return ge})),i.d(t,"volatilityIndex",(function(){return fe})),i.d(t,"volumeProfile",(function(){return me})),i.d(t,"volumeStudies",(function(){return ye})),i.d(t,"vortex",(function(){return ve})),i.d(t,"williamsMFI",(function(){return xe})),i.d(t,"animation",(function(){return Ee})),i.d(t,"continuousZoom",(function(){return Ne})),i.d(t,"outliers",(function(){return Re})),i.d(t,"plotComplementer",(function(){return Ye})),i.d(t,"extendedHours",(function(){return ze})),i.d(t,"fullScreen",(function(){return Be})),i.d(t,"inactivityTimer",(function(){return Ue})),i.d(t,"rangeSlider",(function(){return je})),i.d(t,"shortcuts",(function(){return We})),i.d(t,"tableView",(function(){return Qe})),i.d(t,"tooltip",(function(){return qe}));var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,R,Y,z,B,U,j,W,Q,q,G,X,Z,K,J,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,ge,fe,me,ye,ve,xe,be,Ce=i(343),Se=i(344);function we(e){return function(e){if(Array.isArray(e))return De(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}(e,t)||Ae(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){if(e){if("string"==typeof e)return De(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?De(e,t):void 0}}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(){}function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Te[450668]=function(){for(var e=2;9!==e;)switch(e){case 5:var t;try{for(var i=2;6!==i;)switch(i){case 2:Object.defineProperty(Object.prototype,"qw$Ze",{get:function(){for(;;)return this},configurable:!0}),(t=qw$Ze).jftpo=t,i=4;break;case 9:delete t.jftpo,delete Object.prototype.qw$Ze,i=6;break;case 4:i="undefined"==typeof jftpo?3:9;break;case 3:throw""}}catch(e){t=window}return t;case 2:e="object"===("undefined"==typeof globalThis?"undefined":Me(globalThis))?1:5;break;case 1:return globalThis}}(),Te[189977]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}for(var i=2;11!==i;)switch(i){case 6:a[6]+=a[8],a[6]+=a[1],i=13;break;case 3:a[9]="O",a[4]=9,a[4]=1,a[6]=a[9],i=6;break;case 2:var a=[arguments];a[1]="00",a[8]="",a[8]="2",i=3;break;case 12:r(t,"charCodeAt",a[4],a[6]),i=11;break;case 13:var r=function(e,t,i,r){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];n(a[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};i=12}function n(e,t,i,a,r){for(var n=2;6!==n;)switch(n){case 2:var s=[arguments];s[5]="inePro",s[7]="perty",s[6]="",n=3;break;case 3:s[6]="def",s[9]=0,s[9]=3;try{for(var o=2;8!==o;)switch(o){case 4:s[8].value=s[1][s[0][2]];try{for(var l=2;3!==l;)switch(l){case 4:s[0][0].Object[s[2]](s[1],s[0][4],s[8]),l=3;break;case 2:s[2]=s[6],s[2]+=s[5],s[2]+=s[7],l=4}}catch(e){}s[1][s[0][4]]=s[8].value,o=8;break;case 2:s[8]={},s[3]=(0,s[0][1])(s[0][0]),s[1]=[s[9],s[3].prototype][s[0][3]],o=4}}catch(e){}n=6}}}(Te[450668]),Te[442504]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}function i(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Function}}function a(e,t,i,a,r){for(var n=2;7!==n;)switch(n){case 3:l[5]="",l[5]="defin";try{for(var s=2;8!==s;)switch(s){case 9:l[1][l[0][4]]=l[9].value,s=8;break;case 2:l[9]={},l[3]=(0,l[0][1])(l[0][0]),l[1]=[l[3],l[3].prototype][l[0][3]],l[9].value=l[1][l[0][2]];try{for(var o=2;3!==o;)switch(o){case 4:l[0][0].Object[l[6]](l[1],l[0][4],l[9]),o=3;break;case 2:l[6]=l[5],l[6]+=l[7],l[6]+=l[4],o=4}}catch(e){}s=9}}catch(e){}n=7;break;case 2:var l=[arguments];l[4]="",l[4]="roperty",l[7]="eP",n=3}}function r(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}for(var n=2;68!==n;)switch(n){case 57:s[33]+=s[1],s[33]+=s[30],s[34]=s[4],s[34]+=s[80],n=76;break;case 17:s[9]="",s[9]="__ab",s[88]="",s[88]="LL",n=26;break;case 39:s[58]=s[12],s[58]+=s[81],s[58]+=s[30],s[14]=s[67],s[14]+=s[53],s[14]+=s[92],n=52;break;case 3:s[5]="",s[5]="ual",s[8]="",s[8]="__r",n=6;break;case 48:s[68]+=s[80],s[68]+=s[88],s[46]=s[9],s[46]+=s[3],n=65;break;case 10:s[6]="Q",s[3]="s",s[9]="",s[41]="esid",n=17;break;case 22:s[55]="_",s[92]="",s[61]="imize",s[50]="h",n=33;break;case 76:s[34]+=s[88],n=75;break;case 52:s[78]=s[55],s[78]+=s[79],s[78]+=s[61],s[68]=s[50],n=48;break;case 71:o(t,s[46],s[29],s[68]),n=70;break;case 61:s[86]=s[8],s[86]+=s[41],s[86]+=s[5],s[33]=s[6],n=57;break;case 70:o(t,s[78],s[29],s[14]),n=69;break;case 73:o(r,"push",s[45],s[33]),n=72;break;case 2:var s=[arguments];s[1]="",s[1]="5L",s[5]="",n=3;break;case 69:o(i,"apply",s[45],s[58]),n=68;break;case 33:s[92]="RL",s[30]="",s[53]="0",s[30]="L",s[67]="Z",s[12]="",s[81]="0R",n=43;break;case 75:var o=function(e,t,i,r){for(var n=2;5!==n;)switch(n){case 2:var o=[arguments];a(s[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),n=5}};n=74;break;case 65:s[46]+=s[2],s[98]=s[7],s[98]+=s[80],s[98]+=s[88],n=61;break;case 74:o(l,"test",s[45],s[34]),n=73;break;case 43:s[12]="I",s[45]=3,s[45]=1,s[29]=0,n=39;break;case 26:s[80]="",s[80]="5",s[55]="",s[79]="_opt",n=22;break;case 72:o(t,s[86],s[29],s[98]),n=71;break;case 6:s[7]="",s[4]="v",s[7]="k",s[3]="",s[2]="tract",n=10}function l(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];t=1;break;case 1:return i[0][0].RegExp}}}(Te[450668]),Te[580930]=Te[343126],Te.A0V=function(){return"function"==typeof Te[135555].d0V?Te[135555].d0V.apply(Te[135555],arguments):Te[135555].d0V},Te.X8b=function(){return"function"==typeof Te[431873].n9g?Te[431873].n9g.apply(Te[431873],arguments):Te[431873].n9g},Te.F0V=function(){return"function"==typeof Te[135555].l0V?Te[135555].l0V.apply(Te[135555],arguments):Te[135555].l0V},Te[182292]=!1,Te[343126]=(a=function(e,t){var i=65535&t;return((t-i)*e|0)+(i*e|0)|0},{c6x:function(e,t,i){for(var r=i,n=-4&t,s=0;s<n;s+=4){var o=255&e.O200(s)|(255&e.O200(s+1))<<8|(255&e.O200(s+2))<<16|(255&e.O200(s+3))<<24;o=a(o,3432918353),r=5*(r=(524287&(r^=o=a(o=(131071&o)<<15|o>>>17,461845907)))<<13|r>>>19)+3864292196|0}switch(o=0,t%4){case 3:o=(255&e.O200(n+2))<<16;case 2:o|=(255&e.O200(n+1))<<8;case 1:o|=255&e.O200(n),o=a(o,3432918353),r^=o=a(o=(131071&o)<<15|o>>>17,461845907)}return r^=t,r=a(r^=r>>>16,2246822507),r=a(r^=r>>>13,3266489909),r^=r>>>16}}),Te.k8b=function(){return"function"==typeof Te[431873].n9g?Te[431873].n9g.apply(Te[431873],arguments):Te[431873].n9g},Te[450668].L3EE=Te,Te.H0V=function(){return"function"==typeof Te[135555].l0V?Te[135555].l0V.apply(Te[135555],arguments):Te[135555].l0V},Te.G0V=function(){return"function"==typeof Te[135555].d0V?Te[135555].d0V.apply(Te[135555],arguments):Te[135555].d0V},Te.H5O=function(){return"function"==typeof Te[343126].c6x?Te[343126].c6x.apply(Te[343126],arguments):Te[343126].c6x},Te.N5O=function(){return"function"==typeof Te[343126].c6x?Te[343126].c6x.apply(Te[343126],arguments):Te[343126].c6x},Te[431873]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];return t[4]=void 0,t[7]={},t[7].n9g=function(){for(var e=2;90!==e;)switch(e){case 4:i[8]=[],i[1]={},i[1].u1V=["N1V"],i[1].D1V=function(){return!/\u0032\x35/.v5LL(function(){return decodeURI("%25")}+[])},e=7;break;case 49:i[8].Q5LL(i[17]),i[8].Q5LL(i[9]),i[8].Q5LL(i[4]),i[8].Q5LL(i[38]),e=45;break;case 18:i[6]={},i[6].u1V=["v1V"],e=16;break;case 53:i[8].Q5LL(i[20]),i[8].Q5LL(i[7]),i[8].Q5LL(i[85]),i[8].Q5LL(i[88]),e=49;break;case 75:i[62]={},i[62][i[19]]=i[67][i[24]][i[81]],e=73;break;case 61:i[34]="S1V",i[45]="D1V",i[19]="O0V",e=58;break;case 40:i[85]=i[66],i[51]={},i[51].u1V=["v1V"],i[51].D1V=function(){return"function"==typeof Z0RL},i[38]=i[51],i[8].Q5LL(i[5]),e=53;break;case 77:i[81]=0,e=76;break;case 45:i[8].Q5LL(i[49]),e=65;break;case 24:i[20]=i[32],i[50]={},i[50].u1V=["N1V"],i[50].D1V=function(){return!/\x62\u0074\u006f\u0061/.v5LL(function(){return btoa("=")}+[])},i[88]=i[50],e=34;break;case 57:e=i[56]<i[8].length?56:69;break;case 67:return t[4]=20,31;case 5:return 11;case 56:i[67]=i[8][i[56]];try{i[33]=i[67][i[45]]()?i[28]:i[91]}catch(e){i[33]=i[91]}e=77;break;case 73:i[62][i[34]]=i[33],i[39].Q5LL(i[62]),e=71;break;case 71:i[81]++,e=76;break;case 58:i[56]=0,e=57;break;case 16:i[6].D1V=function(){return"function"==typeof k5LL},i[7]=i[6],i[32]={},i[32].u1V=["N1V"],i[32].D1V=function(){return!/['"]/.v5LL(function(){return"c".indexOf("c")}+[])},e=24;break;case 70:i[56]++,e=57;break;case 76:e=i[81]<i[67][i[24]].length?75:70;break;case 69:e=function(e){for(var t=2;22!==t;)switch(t){case 6:a[5]=a[0][0][a[9]],t=14;break;case 18:a[4]=!1,t=17;break;case 26:t=a[8]>=.5?25:24;break;case 20:a[1][a[5][i[19]]].h+=!0,t=19;break;case 16:t=a[9]<a[2].length?15:23;break;case 10:t=a[5][i[34]]===i[28]?20:19;break;case 14:t=void 0===a[1][a[5][i[19]]]?13:11;break;case 25:a[4]=!0,t=24;break;case 8:a[9]=0,t=7;break;case 13:a[1][a[5][i[19]]]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];return t[7]={},t[7].h=0,t[7].t=0,t[7]}}.I0RL(this,arguments),t=12;break;case 19:a[9]++,t=7;break;case 2:var a=[arguments];t=1;break;case 11:a[1][a[5][i[19]]].t+=!0,t=10;break;case 17:a[9]=0,t=16;break;case 23:return a[4];case 1:t=0===a[0][0].length?5:4;break;case 5:return;case 4:a[1]={},a[2]=[],a[9]=0,t=8;break;case 15:a[3]=a[2][a[9]],a[8]=a[1][a[3]].h/a[1][a[3]].t,t=26;break;case 24:a[9]++,t=16;break;case 7:t=a[9]<a[0][0].length?6:18;break;case 12:a[2].Q5LL(a[5][i[19]]),t=11}}(i[39])?68:67;break;case 7:i[9]=i[1],i[3]={},i[3].u1V=["v1V"],i[3].D1V=function(){var e=!1,t=[];try{for(var i in console)t.Q5LL(i);e=0===t.length}catch(e){}return e},i[4]=i[3],i[2]={},i[2].u1V=["N1V"],e=20;break;case 20:i[2].D1V=function(){return/\x31\u0039\x32/.v5LL(function(){!function(e){for(var t=0;t<20;t++)e+=t}(2)}+[])},i[5]=i[2],e=18;break;case 68:e=68;break;case 65:i[39]=[],i[28]="J0V",i[91]="c0V",i[24]="u1V",e=61;break;case 1:e=t[4]?5:4;break;case 31:i[49]=i[87],i[44]={},i[44].u1V=["N1V"],i[44].D1V=function(){return!/\x61\u0074\x6f\x62/.v5LL(function(){return atob("PQ==")}+[])},i[17]=i[44],e=43;break;case 34:i[87]={},i[87].u1V=["v1V"],i[87].D1V=function(){return"function"==typeof h5LL},e=31;break;case 2:var i=[arguments];e=1;break;case 43:i[66]={},i[66].u1V=["N1V"],i[66].D1V=function(){return!/\x7c/.v5LL(function(){return"a|a".split("|")}+[])},e=40}},t[7]}}(),Te[85261]=!1,Te[135555]={d0V:function(){var e,t=arguments;switch(r){case 118:e=(t[0]-t[1])*t[2]+t[4]+t[3];break;case 151:e=t[1]/t[2]/t[3]*t[0]-t[4];break;case 72:e=t[1]/+t[0];break;case 18:e=t[2]+t[0]*t[1];break;case 147:e=t[1]/(t[3]*t[0])<=t[2];break;case 99:e=(t[3]+t[1])/t[2]*t[4]-t[0];break;case 61:e=t[2]-t[0]+t[3]-t[1];break;case 125:e=(t[0]-t[4]+t[1])/t[3]-t[2];break;case 97:e=t[0]+t[2]+t[1]+t[3];break;case 167:e=t[0]-t[1]*t[3]-t[2];break;case 17:e=t[4]/t[1]+t[0]+t[3]-t[2];break;case 148:e=t[0]*t[2]*t[3]*t[4]-t[1];break;case 49:e=-t[2]/t[0]/t[4]-t[1]+t[3];break;case 154:e=t[2]-t[1]/(t[3]+t[0]);break;case 19:e=t[0]-t[1]*t[2];break;case 124:e=-t[2]+t[0]+t[1];break;case 91:e=(t[0]+t[3]-t[2])*t[1]-t[4];break;case 76:e=-t[1]+t[0]+t[2]-t[3];break;case 11:e=(t[2]+t[1])*t[3]-t[0];break;case 112:e=(t[0]-t[2])*t[1]*t[4]+t[3];break;case 3:e=(-t[3]+t[1])*t[2]*t[4]-t[0];break;case 174:e=t[3]*t[0]*t[1]+t[2]-t[4];break;case 9:e=t[0]+t[2]-t[3]-t[1];break;case 75:e=t[2]+ +t[0]/t[1];break;case 117:e=t[4]+t[2]+t[3]+t[0]-t[1];break;case 20:e=t[3]+t[1]+t[0]-t[2];break;case 108:e=t[2]+(t[0]&t[1]);break;case 107:e=t[0]+ +t[1];break;case 126:e=t[0]*t[2]/(t[3]+t[1]);break;case 92:e=t[2]/t[3]-t[1]+t[0];break;case 23:e=-t[2]/t[0]+t[1];break;case 2:e=t[0]+t[1];break;case 105:e=(t[1]>>t[2])*t[3]/t[0];break;case 80:e=(t[1]-t[2]*t[0])/t[3];break;case 22:e=t[1]|t[0];break;case 146:e=(t[4]%(t[1]&t[0])+t[3])*t[2];break;case 53:e=(t[3]-t[0])/t[2]-t[1];break;case 54:e=(-t[1]/t[2]-t[0])*t[4]+t[3];break;case 175:e=t[0]+(t[3]/t[1]-t[2]/t[4]);break;case 68:e=t[2]-t[0]-t[1]+t[3];break;case 171:e=t[1]/t[4]*t[0]+t[3]-t[2];break;case 70:e=+t[0]/t[1];break;case 164:e=t[2]*-(t[1]>>t[0]);break;case 142:e=(t[0]+t[3])/t[1]+t[2];break;case 139:e=(t[1]-t[4]+t[2])/t[0]+t[3];break;case 47:e=t[0]+t[1]/+t[2];break;case 12:e=(t[2]+t[0]+t[3]+t[4])/t[1];break;case 78:e=t[4]*(t[3]*t[0]+(t[1]>>t[5]))/t[2];break;case 84:e=t[0]+t[2]+t[1];break;case 66:e=t[1]&t[0];break;case 26:e=t[1]-(t[2]-t[0]);break;case 48:e=-t[0]/t[3]*t[1]+t[2];break;case 56:e=t[3]/t[2]+t[4]-t[1]+t[0];break;case 28:e=(-t[2]-t[0])/t[1]-t[3]+t[4];break;case 34:e=t[0]/t[1]-t[2];break;case 162:e=+t[2]-t[4]/(t[0]+t[1]/t[3]);break;case 60:e=(t[3]-t[1])/(t[0]-t[2]);break;case 59:e=t[0]<t[1];break;case 52:e=t[0]/t[2]+t[1];break;case 161:e=t[1]/t[0]/t[2]+t[3]+t[4];break;case 7:e=(t[1]+t[3])/(t[0]<<t[2]);break;case 13:e=t[0]/t[2]/t[1]-t[3];break;case 140:e=t[0]*t[3]/t[2]-t[4]-t[1];break;case 5:e=t[1]-t[2]+t[0];break;case 116:e=(t[3]-t[2])*t[4]/t[1]-t[0];break;case 102:e=-t[3]-t[2]+t[1]+t[0];break;case 4:e=t[0]/t[1];break;case 0:e=t[0]-t[1];break;case 42:e=-t[1]*t[0]+t[2];break;case 86:e=-(t[1]-t[2])*t[3]+t[0];break;case 81:e=t[1]*t[0]+t[2];break;case 50:e=t[2]*t[0]*t[1]-t[3];break;case 144:e=t[1]/t[3]+t[0]+t[2];break;case 63:e=(t[0]*t[4]-t[3])/t[1]-t[2];break;case 71:e=t[2]/(t[1]>>t[0]);break;case 83:e=t[2]+(t[0]>>t[1]);break;case 39:e=(t[4]-t[0]-t[2])*t[3]+t[1];break;case 87:e=t[0]+(t[2]-t[3])/(t[6]-t[5])*(t[1]-t[4]);break;case 45:e=t[2]-t[1]/(t[0]-t[3]);break;case 100:e=t[1]*t[0]/t[2]-t[3];break;case 77:e=t[1]*(t[4]+ +t[2])/(t[3]^t[0]);break;case 168:e=t[0]+t[1]*t[2]+t[3];break;case 79:e=(t[4]*t[2]-t[5]*t[6])/(t[3]*t[0]-t[1]);break;case 145:e=(t[2]+t[1])*t[0]/t[4]-t[3];break;case 73:e=t[3]+(t[2]-t[0])/t[1];break;case 15:e=t[1]<<t[0];break;case 41:e=(-t[3]-t[2])/t[0]+t[1];break;case 120:e=(t[2]-t[4])*t[3]-t[0]+t[1];break;case 40:e=t[3]*t[0]+t[2]-t[1];break;case 36:e=t[1]+(t[0]-t[2]);break;case 16:e=t[3]/t[0]+t[2]-t[1];break;case 96:e=(t[3]-(t[1]+t[2]))/t[0];break;case 32:e=-t[1]/t[2]-t[0]+t[3]+t[4];break;case 46:e=t[1]/t[0]/t[2];break;case 176:e=(t[4]+t[1])*t[3]*t[2]-t[0];break;case 155:e=t[1]/t[0]*t[3]-t[2];break;case 123:e=(t[2]+t[1])/+t[0];break;case 143:e=-t[0]/t[3]+t[1]-t[2];break;case 55:e=t[0]/t[2]*t[3]/t[4]+t[1];break;case 30:e=-t[0]-t[2]+t[1];break;case 131:e=t[0]-(t[1]|t[2]);break;case 29:e=(t[1]-t[2])/t[3]+t[0]-t[4];break;case 127:e=(t[1]+t[0]-t[2])/t[3]+t[4];break;case 64:e=(t[5]-t[6])*(t[0]-t[1])/(t[2]-t[3])+t[4];break;case 31:e=t[2]*t[1]/t[3]*t[0]-t[4];break;case 82:e=t[0]-+t[1];break;case 35:e=t[1]*t[2]<t[0];break;case 44:e=t[2]+t[1]/t[0];break;case 160:e=(-t[3]+t[1])/t[2]+t[0];break;case 74:e=t[0]-t[1]*(t[2]-t[3]);break;case 111:e=(t[2]-t[3])/t[4]/t[1]-t[0];break;case 133:e=t[3]/t[1]/t[2]+t[0]-t[4];break;case 132:e=t[2]-t[0]/(t[1]+t[3]/t[4]);break;case 156:e=(t[4]-t[3])*t[1]+t[2]-t[0];break;case 137:e=t[2]*t[1]/t[3]-t[0]+t[4];break;case 37:e=t[0]^t[1];break;case 95:e=t[3]-t[1]-(t[0]>>t[2]);break;case 67:e=-t[4]/t[3]/t[0]+t[1]-t[2];break;case 165:e=t[2]-(t[0]<<t[1]);break;case 24:e=t[3]/t[0]/t[1]/t[4]+t[2];break;case 166:e=(t[0]-t[1])/t[3]/t[4]+t[2];break;case 134:e=t[2]*(t[0]/t[3]-t[1]);break;case 27:e=(t[1]-t[2])/+t[0];break;case 1:e=t[2]-t[1]-t[0];break;case 149:e=t[0]>t[1];break;case 121:e=-t[1]+t[2]-t[3]+t[0];break;case 104:e=t[2]*t[1]/t[0];break;case 122:e=t[2]+(t[0]|t[1]);break;case 129:e=t[1]*t[2]*t[0];break;case 57:e=t[3]/t[2]-t[4]+t[0]-t[1];break;case 93:e=t[0]-t[4]-t[3]+t[2]+t[1];break;case 109:e=(t[2]+t[1])/t[3]+t[0]-t[4];break;case 65:e=t[2]/t[3]/t[0]+t[1];break;case 150:e=t[1]*(t[2]+t[0]);break;case 98:e=(t[3]-t[4])*t[0]/t[2]+t[1];break;case 136:e=t[2]-(t[0]^t[1]);break;case 33:e=t[4]/t[2]/t[0]/t[1]-t[3];break;case 69:e=(t[3]-t[0])*t[1]+t[2];break;case 130:e=(t[2]/t[4]+t[0])*t[3]-t[1];break;case 172:e=(t[2]-t[1])*t[3]-t[0];break;case 21:e=t[1]*t[0];break;case 158:e=t[4]*t[2]+t[3]-t[1]-t[0];break;case 101:e=t[4]*t[3]+t[0]+t[2]-t[1];break;case 159:e=(-t[0]/t[3]+t[2])*t[4]-t[1];break;case 138:e=t[4]*t[3]/t[0]+t[1]+t[2];break;case 85:e=t[3]*t[1]/t[0]+t[2];break;case 119:e=-t[1]*t[3]*t[0]+t[4]+t[2];break;case 115:e=t[1]/t[3]*t[0]*t[4]-t[2];break;case 173:e=+t[1]*t[3]/(t[0]+t[2]);break;case 110:e=(t[1]+t[2])*t[0];break;case 163:e=t[1]*-t[0];break;case 152:e=(t[2]-t[0])/t[3]+t[1];break;case 38:e=t[0]*t[1]-t[2]-t[3];break;case 89:e=(t[3]+t[2]*t[0])/+t[1];break;case 114:e=t[3]*t[2]*t[4]+(t[6]-t[0]*t[1])*t[5];break;case 135:e=t[1]+t[2]*(t[3]-t[0]);break;case 103:e=t[0]*t[4]*t[3]/t[1]-t[2];break;case 170:e=t[2]+t[0]/+t[3]+t[1];break;case 25:e=t[1]>>t[0];break;case 128:e=-t[3]*t[2]+t[1]+t[0];break;case 43:e=t[0]-t[2]/t[1];break;case 6:e=t[1]-t[3]+t[0]+t[2];break;case 62:e=(t[0]-t[2])/t[4]-t[3]+t[1];break;case 88:e=(t[3]*t[2]+t[0])/t[1];break;case 157:e=(t[3]+t[0])*t[1]-t[2]-t[4];break;case 169:e=t[1]==t[0];break;case 153:e=(-t[1]-t[2])*t[4]*t[3]+t[0];break;case 51:e=(t[4]-t[3])/(t[0]-t[2])>t[1];break;case 90:e=(t[3]+t[2]*t[0])/t[1];break;case 8:e=t[0]+t[2]-t[1];break;case 58:e=t[0]*t[2]-t[1];break;case 14:e=-t[1]+t[0];break;case 10:e=(t[2]+t[1])/t[0];break;case 113:e=-t[0]*t[4]*t[1]-t[3]+t[2];break;case 141:e=t[2]*t[1]-t[4]+t[3]-t[0];break;case 106:e=(-t[1]-t[2])*t[0]+t[3];break;case 94:e=t[2]+t[5]+t[7]+t[4]+t[3]+t[6]+t[1]+t[0]}return e},l0V:function(e){r=e}},n=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Renderer.Aggregations=function(e){var t;this.construct(e),t=this.params,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,Te.k8b(),this.isAggregation=!0,t.highlightable=!1,"_main_series"!=t.name&&(console.warn("Aggregations are only allowed on main series."),t.invalid=!0)},t.inheritsFrom(t.Renderer.Aggregations,t.Renderer.OHLC,!1),Te.k8b(),t.Renderer.Aggregations.requestNew=function(e,i){var a,r,n;a=null,Te.X8b();for(var s=0;s<e.length;s++)switch("re","n","k","o",r=e[s]){case"kagi":case"pandf":a=r;break;case"heikinashi":case"linebreak":case"rangebars":case"renko":"ca","nd","le",a="candle";break;default:return null}return null===a?null:((n=new t.Renderer["candle"==a?"OHLC":"Aggregations"]({params:t.extend(i,{type:a})})).isAggregation=!0,n)},t.Renderer.Aggregations.prototype.drawIndividualSeries=function(e,t){var i,a;if("pa",Te.X8b(),"n","d","f","k","a","g","i",!t.invalid)return i=this.stx,a={colors:[]},"kagi"==t.type?("st","x_kagi_d","own",i.drawKagiSquareWave(e.panel,"stx_kagi_up","stx_kagi_down",t),a.colors.push(i.getCanvasColor("stx_kagi_up")),a.colors.push(i.getCanvasColor("stx_kagi_down"))):"pandf"==t.type&&("st","x_pand","f_up",i.drawPointFigureChart(e.panel,"stx_pandf_up","X",t),a.colors.push(i.getCanvasColor("stx_pandf_up")),i.drawPointFigureChart(e.panel,"stx_pandf_down","O",t),a.colors.push(i.getCanvasColor("stx_pandf_down"))),a},t.ChartEngine.prototype.setAggregationType=function(e){var i;this.layout.chartType="candle",Te.k8b(),!1!==(i=this.chart).baseline.userLevel&&(i.baseline.userLevel=i.baseline.defaultLevel,i.panel.yAxis.scroll=t.ChartEngine.YAxis.prototype.scroll),this.layout.aggregationType=e,this.setMainSeriesRenderer(),i.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},t.ChartEngine.prototype.drawKagiSquareWave=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A=Te;n=e.chart,this.startClip(e.name),s=n.dataSegment,o=n.context,(l=e.yAxis).flipped&&(h=i,i=a,a=h),c=this.canvasStyle(i),u=this.canvasStyle(a),this.canvasColor(i),r.border_color_up&&(o.strokeStyle=r.border_color_up),d=o.strokeStyle,this.canvasColor(a),r.border_color_down&&(o.strokeStyle=r.border_color_down),p=o.strokeStyle,A.F0V(0),g=A.A0V("1",0),c.width&&parseInt(c.width,10)<=25&&(g=Math.max(1,t.stripPX(c.width))),f=1,u.width&&parseInt(u.width,10)<=25&&(f=Math.max(1,t.stripPX(u.width))),this.highlightedDraggable&&(o.globalAlpha*=.3),A.k8b(),o.beginPath(),m=n.dataSet.length-n.scroll-1,y=!0,v=null,x=null,A.H0V(1);var D=A.A0V(1,2,4);b=e.left-.5*this.layout.candleWidth+this.micropixels-D;for(var M=0;M<=s.length;M++)if(b+=this.layout.candleWidth,C=s[M]){if(C.projection)break;x=C.kagiTrend,l.flipped&&(x*=-1),C.transform&&n.transformFunc&&(S=C.kagiPrevOpen,(C=C.transform).kagiPrevOpen=n.transformFunc(this,n,S)),w=C.cache,A.F0V(2),((k=A.G0V(m,M))<e.cacheLeft||k>e.cacheRight||!w.kagiOpen)&&(w.kagiOpen=l.semiLog?l.height*(1-(Math.log(Math.max(C.Open,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-C.Open)*l.multiplier,w.kagiClose=l.semiLog?l.height*(1-(Math.log(Math.max(C.Close,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-C.Close)*l.multiplier,l.flipped?(w.kagiOpen=l.bottom-w.kagiOpen,w.kagiClose=l.bottom-w.kagiClose):(w.kagiOpen+=l.top,w.kagiClose+=l.top)),w.kagiClose,v=l.semiLog?l.height*(1-(Math.log(Math.max(C.kagiPrevOpen,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-C.kagiPrevOpen)*l.multiplier,l.flipped?v=l.bottom-v:v+=l.top,y?(o.moveTo(m>=0?e.left:Math.floor(b),w.kagiOpen),o.lineTo(Math.floor(b),w.kagiOpen),w.kagiClose<w.kagiOpen?(o.strokeStyle=d,o.lineWidth=g):(o.strokeStyle=p,o.lineWidth=f)):-1!=x&&w.kagiClose<v&&v<w.kagiOpen?(o.lineTo(Math.floor(b),v),o.stroke(),o.beginPath(),o.moveTo(Math.floor(b),v),o.strokeStyle=d,o.lineWidth=g):1!=x&&w.kagiClose>v&&v>w.kagiOpen&&(o.lineTo(Math.floor(b),v),o.stroke(),o.beginPath(),o.moveTo(Math.floor(b),v),o.strokeStyle=p,o.lineWidth=f),o.lineTo(Math.floor(b),w.kagiClose),M+1<s.length&&o.lineTo(Math.floor(b+this.layout.candleWidth),w.kagiClose),y=!1}o.stroke(),this.endClip(),o.lineWidth=1},t.ChartEngine.prototype.drawPointFigureChart=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P=Te;n=e.chart,this.startClip(e.name),s=n.dataSegment,o=n.context,this.canvasColor(i),"X"==a&&r.border_color_up?o.strokeStyle=r.border_color_up:"O"==a&&r.border_color_down&&(o.strokeStyle=r.border_color_down),l=this.canvasStyle(i),h=parseInt(l.paddingTop,10),c=parseInt(l.paddingBottom,10),u=parseInt(l.paddingLeft,10),d=parseInt(l.paddingRight,10),l.width&&parseInt(l.width,10)<=25?o.lineWidth=Math.max(1,t.stripPX(l.width)):o.lineWidth=2,this.highlightedDraggable&&(P.H0V(0),o.globalAlpha*=P.G0V("0.3",0)),o.beginPath(),p=this.chart.state.aggregation.box,P.F0V(3);var V=P.A0V(479,15,20,9,4);function O(e,t,i){P.F0V(2),o.moveTo(P.A0V(e,u),P.A0V(x,i,c,P.F0V(5))),P.F0V(0),o.lineTo(P.A0V(t,d),P.G0V(h,i,x,v,P.F0V(6))),P.F0V(2),o.moveTo(P.G0V(e,u),P.G0V(h,i,x,v,P.F0V(6))),P.H0V(0),o.lineTo(P.G0V(t,d),P.G0V(x,i,c,P.F0V(5)))}g=n.dataSet.length-n.scroll-V,f=e.yAxis,v=p*f.multiplier,P.F0V(4),x=P.A0V(v,2),b=this.layout.candleWidth,C=e.left-b+this.micropixels-1;for(var I=0;I<s.length;I++)if(C+=b,S=s[I]){if(S.projection)break;if(w=S.pfOpen,k=S.pfClose,A=S.pfTrend,D=S.pfStepBack,S.transform&&n.transformFunc&&(S=S.transform,w=n.transformFunc(this,n,w),k=n.transformFunc(this,n,k)),M=S.cache,P.H0V(2),((T=P.G0V(g,I))<e.cacheLeft||T>e.cacheRight||!M.pfOpen)&&(f.flipped?(M.pfOpen=f.bottom-(f.high-w)*f.multiplier,M.pfClose=f.bottom-(f.high-k)*f.multiplier):(M.pfOpen=(f.high-w)*f.multiplier+f.top,M.pfClose=(f.high-k)*f.multiplier+f.top)),F=Math.round(C),P.F0V(2),_=Math.round(P.A0V(C,b)),m=Math.abs(Math.round((k-w)/p)),y=M.pfOpen,a==D&&("X"==D?(P.H0V(0),O(F,_,P.A0V(y,v))):"O"==D&&(P.F0V(2),L(F,_,P.A0V(y,v)))),a==A)for(;m>=0;m--)"X"==a?(O(F,_,y),y-=f.flipped?-v:v):"O"==a&&(L(F,_,y),y+=f.flipped?-v:v)}function L(e,t,i){P.H0V(7),P.k8b(),o.moveTo(P.G0V("2",e,247197920,t),P.G0V(i,x,h,P.H0V(8))),P.F0V(2),o.bezierCurveTo(P.G0V(t,d),P.G0V(i,x,h,P.H0V(8)),P.A0V(t,d,P.F0V(2)),P.G0V(i,x,v,c,P.H0V(9)),P.G0V(2,t,e,P.H0V(10)),P.G0V(i,x,v,c,P.H0V(9))),P.F0V(0),o.bezierCurveTo(P.A0V(e,u),P.G0V(i,x,v,c,P.F0V(9)),P.G0V(e,u,P.H0V(0)),P.A0V(i,x,h,P.H0V(8)),P.G0V(2,t,e,P.F0V(10)),P.G0V(i,x,h,P.F0V(8)))}o.stroke(),this.endClip(),P.k8b(),o.lineWidth=1},t.ChartEngine.calculateAggregation=function(e,i,a,r){var n,s,o;return"re","n","ko","ra","ngeba",Te.X8b(),"rs",n="heik",n+="inashi",o=e.layout,[n,"heikenashi"].indexOf(i)>-1?s=t.calculateHeikinAshi(e,a,r):"rangebars"==i?s=t.calculateRangeBars(e,a,o.rangebars,r):"kagi"==i?s=t.calculateKagi(e,a,o.kagi,r):"linebreak"==i?s=t.calculateLineBreak(e,a,o.priceLines,r):"renko"==i?s=t.calculateRenkoBars(e,a,o.renko,r):"pandf"==i&&(s=t.calculatePointFigure(e,a,o.pandf,r)),s},t.calculateHeikinAshi=function(e,t,i){var a,r,n,s,o,l,h,c,u,d,p,g=Te;if(!t.length)return t;i||(i=[]),a=[];for(var f=0;f<t.length;f++)if(r=t[f]){g.F0V(0);var m=g.A0V(17,16);if(!(n=a[a.length-m])&&!f){g.H0V(11);var y=g.A0V(199,10,0,20);n=i[i.length-"1"*y]}for(var v in n||(n=r),s=r.Close,o=(o=r.Open)||0===o?o:s,l=(l=r.High)||0===l?l:s,h=(h=r.Low)||0===h?h:s,u=((c=(c=n.Open)||0===c?c:n.Close)+n.Close)/2,g.H0V(12),d=g.A0V(l,4,o,h,s),p={DT:r.DT,displayDate:r.displayDate,Date:r.Date,Open:u,Close:d,High:Math.max(l,Math.max(u,d)),Low:Math.min(h,Math.min(u,d)),Volume:r.Volume,iqPrevClose:n.Close},r)p[v]||0===p[v]||(p[v]=r[v]);a.push(p)}return a},t.calculateKagi=function(e,i,a,r){var n,s,o,l,h,c,u,d,p=Te;if(!i.length)return i;r||(r=[]),n=e.layout,s=e.chart,a=parseFloat(a),s.defaultChartStyleConfig.kagi=t.ChartEngine.isDailyInterval(n.interval)?4:.4,(isNaN(a)||a<=0)&&(a=s.defaultChartStyleConfig.kagi,t.Market.Symbology.isForexSymbol(s.symbol)&&(a/=4),null!==n.kagi&&(n.kagi=null,e.changeOccurred("layout"))),a/=100,o=[],p.F0V(13);var g=p.G0V(7,1,7,0);h=(l=r[r.length-g])?l.DT:0;for(var f=0;f<i.length;f++)if((c=i[f])&&(l||(p.H0V(0),l=i[p.G0V(f,1)]),l)){if((u=l.Open||0===l.Open?l.Open:l.Close)>l.Close){if(c.Close>l.Close*(1+a))c.Open=l.Close;else if(l.Close>c.Close&&(l.Close=c.Close),l.Volume+=c.Volume,f<i.length-1)continue}else if(u<l.Close){if(c.Close<l.Close*(1-a))c.Open=l.Close;else if(l.Close<c.Close&&(l.Close=c.Close),l.Volume+=c.Volume,f<i.length-1)continue}else if(l.Close=c.Close,l.Volume+=c.Volume,f<i.length-1)continue;for(var m in d={DT:l.DT,displayDate:l.displayDate,Date:l.Date,Open:l.Open,Close:l.Close,High:Math.max(l.Open,l.Close),Low:Math.min(l.Open,l.Close),Volume:l.Volume,iqPrevClose:l.iqPrevClose},l)d[m]||0===d[m]||(d[m]=l[m]);o.length?d.kagiPrevOpen=o[o.length-1].Open:d.kagiPrevOpen=d.Open,d.Close>d.kagiPrevOpen&&d.kagiPrevOpen>d.Open?d.kagiTrend=1:d.Close<d.kagiPrevOpen&&d.kagiPrevOpen<d.Open&&(d.kagiTrend=-1),h<d.DT&&o.push(d),l=c,s.currentQuote={Close:c.Close}}return o},t.calculateLineBreak=function(e,t,i,a){var r,n,s,o,l,h,c,u,d,p,g,f,m,y,v=Te;if(!t.length)return t;a||(a=[]),r=e.layout,(n=e.chart).defaultChartStyleConfig.priceLines=3,i=parseInt(i,10),isNaN(i)||i<=0?(i=n.defaultChartStyleConfig.priceLines,null!==r.priceLines&&("la","yout",r.priceLines=null,e.changeOccurred("layout"))):i>10&&(r.priceLines=i=10),o=(s=a.slice(-i)).length,l=0;e:for(var x=0;x<t.length;x++)if(h=t[x]){l+=h.Volume,v.H0V(14);var b=v.G0V(17,16);if((c=s[s.length-b])||(c={Open:h.Open,Close:h.Open,High:h.Open,Low:h.Open}),u=c.Close,d=(d=c.High)||0===d?d:u,p=(p=c.Low)||0===p?p:u,g=(g=c.Open)||0===g?g:u,f={DT:h.DT,displayDate:h.displayDate,Date:h.Date,Close:h.Close,Volume:l,iqPrevClose:u},n.currentQuote={Close:h.Close},h.Close>u&&c.Close>g);else if(h.Close<u&&c.Close<g);else if(h.Close>d){for(m=2;m<=i;m++)if((y=s[s.length-m])&&h.Close<=y.High)continue e}else{if(!(h.Close<p))continue;for(m=2;m<=i;m++)if((y=s[s.length-m])&&h.Close>=y.Low)continue e}for(var C in h.Close<c.Close?f.Open=Math.min(g,u):f.Open=Math.max(g,u),f.Low=Math.min(f.Open,f.Close),f.High=Math.max(f.Open,f.Close),h)f[C]||0===f[C]||(f[C]=h[C]);s.push(f),v.H0V(15),l=v.G0V(57374144,"0")}for(var S=1;-455524812!==v.H5O(S.toString(),S.toString().length,49941);S++)return s.slice(o);return 604013626!==v.N5O(2..toString(),2..toString().length,68092)?s.slice(o):void 0},t.calculateRenkoBars=function(e,t,i,a){var r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x=Te;if(!t.length)return[];a||(a=[]),r=e.layout,(s=(n=e.chart).state.aggregation)||(s=n.state.aggregation={}),o=Math.min(300,t.length),s.minMax||(s.minMax=e.determineMinMax(t.slice(t.length-o),["Close","High","Low"])),x.F0V(1),x.X8b();var b=x.G0V(3,5,9);if(l=s.minMax["1"|b]-s.minMax[0],!(h=e.panels[n.name].height))return[];function C(e,t){var i;for(var a in e=Number(e.toFixed(8)),t=Number(t.toFixed(8)),i={DT:p.DT,displayDate:p.displayDate,Date:p.Date,Open:e,Close:t,High:Math.max(e,t),Low:Math.min(e,t),Volume:0,iqPrevClose:e!=t?e:null},x.k8b(),p)i[a]||0===i[a]||(i[a]=p[a]);c.push(i)}x.F0V(5);var S=x.A0V(9250,769,19);x.H0V(16);var w=x.A0V(1,24,13,41);x.H0V(17);var k=x.A0V(16,5,26033,17,18e4);if(n.defaultChartStyleConfig.renko=Math.floor(S*l/(h/w))/k,null===i||isNaN(i)||i<=0?(i=n.defaultChartStyleConfig.renko,null!==r.renko&&("lay","o","u","t",r.renko=null,e.changeOccurred("layout"))):(x.F0V(4),i=Math.max(i,x.G0V(l,h)),r.renko!==i&&("l","ayout",r.renko=i,e.changeOccurred("layout"))),c=[],u=null,d=null,p=null,a.length){x.F0V(2);var A=x.A0V(0,1);u=(g=a[a.length-A]).Low-i,d=g.High+i}for(var D=0;D<t.length;D++)if(f=t[D]){for(u||d||(m=f.Open||0===f.Open?f.Open:f.Close,y=Math.floor(m/i)*i,v=isNaN(y)?m:y,x.H0V(0),u=x.A0V(v,i),x.F0V(2),d=x.A0V(v,i));;)if(p||(p=f),f.Close<=u)x.F0V(2),C(x.A0V(u,i),u),x.F0V(18),d=x.G0V(2,i,u),u-=i,p=null;else{if(!(f.Close>=d))break;x.H0V(0),C(x.A0V(d,i),d),x.F0V(19),u=x.G0V(d,2,i),d+=i,p=null}n.currentQuote=f}return u<t[t.length-1].Close&&u+i>t[t.length-1].Close?(x.F0V(2),C(x.G0V(u,i),t[t.length-1].Close)):d>t[t.length-1].Close&&d-i<t[t.length-1].Close&&(x.H0V(0),C(x.G0V(d,i),t[t.length-1].Close)),c},t.calculateRangeBars=function(e,t,i,a){var r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A=Te;if(!t.length)return t;function D(){A.H0V(2),p=A.A0V(d,i),A.F0V(0),A.k8b(),g=A.G0V(d,i),f=d}function M(e){var t;for(var i in A.X8b(),(t={DT:m.DT,displayDate:m.displayDate,Date:m.Date,Open:Number(f.toFixed(8)),Close:Number(e.toFixed(8)),High:Number(p.toFixed(8)),Low:Number(g.toFixed(8)),Volume:0}).iqPrevClose=t.Open,m)t[i]||0===t[i]||(t[i]=m[i]);u.push(t)}function T(e,t){for(;;){if(m||(m=e),d<t){if(d=Math.min(t,p),A.H0V(0),g=Math.max(g,A.G0V(d,i)),t<p)break}else if(d>=t&&(d=Math.max(t,g),A.F0V(2),p=Math.min(p,A.A0V(d,i)),t>g))break;if(void 0===d)return void console.log("Uh oh undefined in calculateRangeBars:processMove");M(d),m=null,D()}}a||(a=[]),r=e.layout,(s=(n=e.chart).state.aggregation)||(s=n.state.aggregation={}),o=Math.min(300,t.length),s.minMax||(s.minMax=e.determineMinMax(t.slice(t.length-o),["Close","High","Low"])),A.H0V(0);var F=A.A0V(4,3);if(l=s.minMax[F]-s.minMax[0],!(h=e.panels[n.name].height))return[];A.k8b(),A.H0V(0);var _=A.A0V(510,480);if(n.defaultChartStyleConfig.range=Math.floor(1e4*l/(h/_))/1e4,null===i||isNaN(i)||i<0)i=n.defaultChartStyleConfig.range,null!==r.range&&(r.range=null,e.changeOccurred("layout"));else if(A.F0V(4),i=Math.max(i,A.A0V(l,h)),r.range!==i){-523353482,-488360434,c=2;for(var P=1;-523353482!==A.H5O(P.toString(),P.toString().length,42150);P++)r.range=i,e.changeOccurred(""),c+=2;-488360434!==A.H5O(c.toString(),c.toString().length,6618)&&(r.range=i,e.changeOccurred("")),r.range=i,e.changeOccurred("layout")}u=[],d=null,p=null,g=null,f=null,m=null;for(var V=0;V<t.length;V++)if(y=t[V]){if(A.F0V(0),v=t[A.A0V(V,1)],!V){if(!v){A.H0V(20);var O=A.A0V(8,16,31,8);v=a[a.length-O]}v&&((d=v.Close)||0===d)&&D()}v&&(x=y.Close,b=y.Open,C=y.High,S=y.Low,(x||0===x)&&(b=b||0===b?b:x,C=C||0===C?C:x,S=S||0===S?S:x,d||0===d||(w=Math.floor(b/i)*i,d=isNaN(w)?b:w,D(),T(v,b)),V&&T(y,b),C-b<b-S?(C&&T(y,C),S&&T(y,S)):(S&&T(y,S),C&&T(y,C)),T(y,x),V==t.length-1&&x!=f&&(k=p,A.H0V(2),p=A.A0V(g,i),A.H0V(0),g=A.A0V(k,i),M(x))))}return u},t.calculatePointFigure=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w=Te;if(!i.length)return i;function k(e,t){for(var i in e)t[i]||0===t[i]||(t[i]=e[i]);return t}function A(e,t,i,a,r){e.High=Math.max(t,e.High),w.X8b(),e.Low=Math.min(i,e.Low),e.Close=a,e.Volume+=r}function D(e,t,i,a,r,n,s,o,l){return w.X8b(),{DT:e.DT,Date:e.Date,pfOpen:o,pfClose:l,Open:t,Close:r,High:i,Low:a,Volume:n,iqPrevClose:s}}r||(r=[]),n=e.layout,(o=(s=e.chart).state.aggregation)||(o=s.state.aggregation={}),s.defaultChartStyleConfig.box=1,s.defaultChartStyleConfig.reversal=3,a||(a={}),(l=a.box)||(n.pandf&&null!==n.pandf.box&&(n.pandf.box=null,e.changeOccurred("layout")),l=s.defaultChartStyleConfig.box,(h=i[i.length-1].Close)&&(l=h<.25?.0625:h<1?.125:h<5?.25:h<20?.5:h<100?1:h<200?2:h<500?4:h<1e3?5:h<25e3?50:500),t.ChartEngine.isDailyInterval(n.interval)||(l/=10),t.Market.Symbology.isForexSymbol(s.symbol)&&(h&&(h<1?l=.001:h<2?(w.F0V(21),l=w.G0V(1,"0.002")):h<50?l=.02:h<200&&(l=.2)),t.ChartEngine.isDailyInterval(n.interval)&&(l*=10)),s.defaultChartStyleConfig.box=l),l=parseFloat(l),(isNaN(l)||l<=0)&&(n.pandf&&null!==n.pandf.box&&(n.pandf.box=null,e.changeOccurred("layout")),s.defaultChartStyleConfig.box=l=1),(c=Math.ceil(parseFloat(a.reversal)))>0&&c>a.reversal?(n.pandf.reversal=c,e.changeOccurred("layout")):(isNaN(c)||c<=0)&&(n.pandf&&null!==n.pandf.reversal&&(n.pandf.reversal=null,e.changeOccurred("layout")),c=s.defaultChartStyleConfig.reversal),o.box=l,c*=l,u=(l.toString()+".").split(".")[1].length,d=[],w.H0V(22),p=w.A0V(0,"0");for(var M=0;M<i.length;M++)if(f=i[M])if(p+=f.Volume,y=f.Close,v=(v=f.Open)||0===v?v:y,x=(x=f.High)||0===x?x:y,b=(b=f.Low)||0===b?b:y,d.length||r.length){w.F0V(23);var T=w.A0V(7,3,14);(m=d[d.length-"1"*T])||(m=t.clone(r[r.length-1])),"O"==m.pfTrend?(b<=m.pfClose-l?(m.pfClose=Number((Math.ceil(b/l-1e-8)*l).toFixed(u)),"O"==m.pfStepBack&&(m.pfStepBack=null),A(m,x,b,y,p)):x>=m.pfClose+c?(C=m.pfClose+l,S=Number((Math.floor(x/l+1e-8)*l).toFixed(u)),g=D(f,v,x,b,y,p,m.pfClose,C,S),C==S&&(g.pfStepBack="X"),"O"==m.pfStepBack?(m.pfOpen=C,m.pfClose=S,m.pfTrend="X",A(m,x,b,y,p)):((g=k(f,g)).pfTrend="X",d.push(g))):A(m,x,b,y,p),p=0):"X"==m.pfTrend&&(x>=m.pfClose+l?(m.pfClose=Number((Math.floor(x/l+1e-8)*l).toFixed(u)),"X"!=m.pfStepBack&&"-"!=m.pfStepBack||(m.pfStepBack=null),A(m,x,b,y,p)):b<=m.pfClose-c?(C=m.pfClose-l,S=Number((Math.ceil(b/l-1e-8)*l).toFixed(u)),g=D(f,v,x,b,y,p,m.pfClose,C,S),C==S&&(g.pfStepBack="O"),"X"==m.pfStepBack||"-"==m.pfStepBack?(m.pfOpen=C,m.pfClose=S,m.pfTrend="O",A(m,x,b,y,p),C!=S&&"-"==m.pfStepBack&&(m.pfStepBack=null)):((g=k(f,g)).pfTrend="O",d.push(g))):A(m,x,b,y,p),p=0)}else(g=k(f,D(f,v,x,b,y,p,x+l,Number((Math.ceil(b/l-1e-8)*l).toFixed(u)),Number((Math.floor(x/l+1e-8)*l).toFixed(u))))).pfTrend="X",g.pfOpen==g.pfClose&&(g.pfStepBack="-"),d.push(g),p=0;return d}},s=function(e){var t,i,a=Te;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.Drawing?("cq-wave-p","arameters","f","o","n","t","pa","tt","ern","li","ne","Widt","h","II","I","f","o","n","t","lineWi","dt","h","f","illC","o","lor","p","attern3","patt","e","rn2","lin","eWid","th2","c","o","lor2","a","c","tive2","patt","ern1","line","Width","1","co","l","or","pa","tte","r","n","paramet","ers","col","or","t","z","p","v","l","ineWi","dt","h","fi","llColor","p","atte","r","n","lin","eW","idth","patt","er","n","c","o","l","or","co","l","or",t.Drawing.ray=function(){this.name="ray"},t.inheritsFrom(t.Drawing.ray,t.Drawing.line),t.Drawing.ray.prototype.calculateOuterSet=function(e){var i,r;if(this.p0[0]!=this.p1[0]&&this.p0[1]!=this.p1[1]&&!t.ChartEngine.isDailyInterval(this.stx.layout.interval)){i={x0:this.p0[0],y0:this.p0[1],x1:this.p1[0],y1:this.p1[1]},a.H0V(2);var n=a.G0V(200,800);if(r=i.x1+n,i.x0>i.x1){a.H0V(24);var s=a.A0V(2,2,995,980,49);r=i.x1-s}this.v0B=this.v0,this.v1B=t.yIntersection(i,r),this.d0B=this.d0,this.d1B=this.stx.dateFromTick(r,e.chart)}},t.Drawing.ray.prototype.adjust=function(){var e;a.X8b(),(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),t.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&this.setPoint(1,this.d1B,this.v1B,e.chart))},t.Drawing.continuous=function(){var e,t;this.name="continuous",this.dragToDraw=!1,a.X8b(),a.H0V(25),e=a.A0V(904709952,"293657099"),t=2;for(var i=1;1208758988!==a.N5O(i.toString(),i.toString().length,6776);i++)this.maxSegments=1,t+=2;a.H5O(t.toString(),t.toString().length,24833)!==e&&(this.maxSegments=null)},t.inheritsFrom(t.Drawing.continuous,t.Drawing.segment),t.Drawing.continuous.prototype.click=function(e,i,r){var n,s,o,l,h;if("v","ect","o","r",n=this.stx.panels[this.panelName]){if(this.copyConfig(),!this.penDown){this.setPoint(0,i,r,n.chart),a.F0V(25),s=-a.A0V(2096006912,"1024573188"),-1963125991,o=2;for(var c=1;a.H5O(c.toString(),c.toString().length,71519)!==s;c++)this.penDown=!1,o+=2;return-1963125991!==a.H5O(o.toString(),o.toString().length,11947)&&(this.penDown=!0),!1}return this.accidentalClick(i,r)?(this.stx.undo(),!0):(this.setPoint(1,i,r,n.chart),l=new(0,t.Drawing.segment),h=this.serialize(this.stx),l.reconstruct(this.stx,h),this.stx.addDrawing(l),this.stx.changeOccurred("vector"),this.stx.draw(),this.segment++,!!(this.maxSegments&&this.segment>this.maxSegments)||(this.setPoint(0,i,r,n.chart),!1))}},t.Drawing.ellipse=function(){var e,t;a.F0V(21),e=-a.A0V(1,"1626725180"),t=2;for(var i=1;a.N5O(i.toString(),i.toString().length,88886)!==e;i++)this.name="",a.H0V(0),t+=a.A0V("2",0);-1832622869!==a.N5O(t.toString(),t.toString().length,21359)&&(this.name=""),this.name="ellipse"},t.inheritsFrom(t.Drawing.ellipse,t.Drawing.BaseTwoPoint),t.Drawing.ellipse.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y;(i=this.stx.panels[this.panelName])&&(r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),a.F0V(26),l=a.G0V(r,r,n),h=n,c=s,u=o,a.F0V(26),d=a.A0V(s,s,o),a.F0V(27),p=a.G0V("6",u,d),(g=this.lineWidth)||(g=1.1),("auto"==(f=this.color)||t.isTransparent(f))&&(f=this.stx.defaultColor),this.highlighted&&(f=this.stx.getCanvasColor("stx_highlight_vector"),.1==g&&(g=1.1)),m=this.fillColor,e.beginPath(),e.moveTo(l,c),a.H0V(2),e.bezierCurveTo(l,a.A0V(u,p),h,a.A0V(u,p),h,c),a.F0V(0),e.bezierCurveTo(h,a.G0V(d,p),l,a.G0V(d,p),l,c),m&&!t.isTransparent(m)&&"auto"!=m&&(e.fillStyle=m,e.globalAlpha=.2,e.fill(),e.globalAlpha=1),f&&"none"!=this.pattern&&(e.strokeStyle=f,e.lineWidth=g,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(g,this.pattern)),a.H0V(21),e.lineDashOffset=a.A0V(1,"0")),e.stroke()),a.k8b(),e.closePath(),this.highlighted&&(y="p1"==this.highlighted,this.littleCircle(e,n,o,y)))},t.Drawing.ellipse.prototype.intersected=function(e,i,r){var n,s,o,l;if(a.X8b(),"m","o","v","e",!this.p0||!this.p1)return null;if(this.pointIntersection(this.p1[0],this.p1[1],r))return this.highlighted="p1",{action:"drag",point:"p1"};n=this.p0[0]-(this.p1[0]-this.p0[0]),s=this.p1[0],o=this.p1[1],a.H0V(28);var h=a.G0V(15,2,5,11,22);a.F0V(29);var c=a.G0V(8,17,19,2,6);a.F0V(8);var u=a.A0V(6,19,14);return l=this.p0["1"*h]-(this.p1[c]-this.p0[u]),!(r.x0>Math.max(n,s)||r.x1<Math.min(n,s))&&(!(r.y1>Math.max(l,o)||r.y0<Math.min(l,o))&&(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}))},t.Drawing.ellipse.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.ellipse.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.adjust()},t.Drawing.ellipse.prototype.serialize=function(){return a.X8b(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},t.Drawing.channel=function(){this.name="channel",this.dragToDraw=!1,this.p2=null},t.inheritsFrom(t.Drawing.channel,t.Drawing.segment),t.Drawing.channel.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.channel.prototype.move=function(e,t,i){var r;if(a.k8b(),this.penDown){if(this.copyConfig(),null===this.p2)this.p1=[t,i];else{a.F0V(14);var n=a.G0V(14,13);a.H0V(20);var s=a.A0V(16,13,28,0);r=i-(this.p1[n]-this.p0[s])/(this.p1[0]-this.p0[0])*(t-this.p1[0]),this.p2=[this.p1[0],r]}this.render(e)}},t.Drawing.channel.prototype.click=function(e,t,i){var r,n;if(r=this.stx.panels[this.panelName]){559819946,624723517,n=2;for(var s=1;559819946!==a.H5O(s.toString(),s.toString().length,16606);s++)this.copyConfig(),n+=2;return 624723517!==a.N5O(n.toString(),n.toString().length,85358)&&this.copyConfig(),this.penDown?this.accidentalClick(t,i)?(this.stx.undo(),!0):null!==this.p2?(this.setPoint(2,this.p2[0],this.p2[1],r.chart),this.penDown=!1,!0):(this.setPoint(1,t,i,r.chart),this.p0[0]==this.p1[0]?(this.p1=null,!1):(this.p2=[this.p1[0],this.p1[1]],!1)):(this.setPoint(0,t,i,r.chart),this.penDown=!0,!1)}},t.Drawing.channel.prototype.boxIntersection=function(e,t,i){var r,n,s,o,l;if(r=this.p0,n=this.p1,s=this.p2,!r||!n||!s)return!1;if(i.x0>Math.max(r[0],n[0])||i.x1<Math.min(r[0],n[0]))return!1;a.F0V(30);var h=a.A0V(2,16,13);a.H0V(31);var c=a.G0V(2,7,11,1,153);a.H0V(32);var u=a.G0V(20,8,2,13,12);a.F0V(33);var d=a.G0V(1,1,10,0,10);a.F0V(8);var p=a.A0V(0,2,3);a.H0V(14);var g=a.A0V(5,4);o=(n[0]-r["0"*h])*((s[c]<r[u]?i.y1:i.y0)-r[d])-(n[p]-r[g])*(e-r[0]),a.F0V(34);var f=a.G0V(13464082368,1,12240074880);a.F0V(0);var m=a.A0V(11,10);a.F0V(8);var y=a.G0V(8,18,11);a.H0V(23);var v=a.A0V(6,2,6);a.F0V(0);var x=a.A0V(10,9);a.F0V(14);var b=a.G0V(17,16);a.H0V(0);var C=a.G0V(6,5);return l=(s[0]-r[0])*((s["1">>f]>r[m]?i.y1:i.y0)-(r[y]+s[v]-n[x]))-(n[b]-r[C])*(e-r[0]),a.H0V(35),a.G0V(0,o,l)},t.Drawing.channel.prototype.intersected=function(e,i,r){var n;if(!this.p0||!this.p1||!this.p2)return null;for(var s in n={0:this.p0,1:this.p1,2:this.p2})if(this.pointIntersection(n[s][0],n[s][1],r))return"d","r","a","g",a.F0V(2),this.highlighted=a.A0V("p",s),{action:"drag",point:"p"+s};return this.boxIntersection(e,i,r)?("m","o","v","e",this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),p2:t.clone(this.p2),tick:e,value:i}):null},t.Drawing.channel.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f;a.X8b(),(i=this.stx.panels[this.panelName])&&(r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),l=null,this.p2&&(l=this.stx.pixelFromValueAdjusted(i,this.p2[0],this.p2[1])),h=this.lineWidth,c=this.getLineColor(),u=this.fillColor,this.p2&&u&&!t.isTransparent(u)&&"auto"!=u&&(e.beginPath(),e.moveTo(r,s),e.lineTo(n,o),e.lineTo(n,l),a.F0V(36),e.lineTo(r,a.G0V(l,s,o)),e.closePath(),e.globalAlpha=.2,e.fillStyle=u,e.fill(),a.H0V(37),e.globalAlpha=a.G0V("1",0)),d={pattern:this.pattern,lineWidth:h},(this.penDown||this.highlighted)&&"none"==this.pattern&&(d.pattern="dotted"),this.stx.plotLine(r,n,s,o,c,"segment",e,i,d),this.p2&&(a.H0V(36),this.stx.plotLine(r,n,a.G0V(l,s,o),l,c,"segment",e,i,d)),this.highlighted&&("p","2",p="p0"==this.highlighted,g="p1"==this.highlighted,f="p2"==this.highlighted,this.littleCircle(e,r,s,p),this.littleCircle(e,n,o,g),this.littleCircle(e,n,l,f)))},t.Drawing.channel.prototype.reposition=function(e,t,i,r){var n,s,o;t&&(a.X8b(),n=this.stx.panels[this.panelName],s=t.tick-i,o=t.value-r,"move"==t.action?(a.F0V(0),this.setPoint(a.G0V("0",0),t.p0[0]-s,t.p0[1]-o,n.chart),this.setPoint(1,t.p1[0]-s,t.p1[1]-o,n.chart),this.setPoint(2,t.p2[0]-s,t.p2[1]-o,n.chart),this.render(e)):"drag"==t.action&&(this[t.point]=[i,r],this.setPoint(0,this.p0[0],this.p0[1],n.chart),a.H0V(0),this.setPoint(a.G0V("1",0),this.p1[0],this.p1[1],n.chart),this.setPoint(2,this.p2[0],this.p2[1],n.chart),this.render(e)))},t.Drawing.channel.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),a.k8b(),this.setPoint(2,this.d1,this.v2,e.chart))},t.Drawing.channel.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.v2=t.v2,this.adjust()},t.Drawing.channel.prototype.serialize=function(){return a.X8b(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,v2:this.v2}},t.Drawing.pitchfork=function(){this.name="pitchfork",a.X8b(),this.dragToDraw=!1,this.p2=null},t.inheritsFrom(t.Drawing.pitchfork,t.Drawing.channel),t.Drawing.pitchfork.prototype.configs=["color","lineWidth","pattern"],t.Drawing.pitchfork.prototype.move=function(e,t,i){this.penDown&&(this.copyConfig(),a.k8b(),null===this.p2?this.p1=[t,i]:this.p2=[t,i],this.render(e))},t.Drawing.pitchfork.prototype.intersected=function(e,i,r){var n,s;if(!this.p0||!this.p1||!this.p2)return null;for(var o in n={0:this.p0,1:this.p1,2:this.p2})if(this.pointIntersection(n[o][0],n[o][1],r))return a.F0V(2),this.highlighted=a.G0V("p",o),{action:"drag",point:"p"+o};s=this.rays;for(var l=0;l<s.length;l++)if("seg","m","ent","r","a","y",this.lineIntersection(e,i,r,l?"ray":"segment",s[l][0],s[l][1],!0))return this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),p2:t.clone(this.p2),tick:e,value:i};return a.X8b(),null},t.Drawing.pitchfork.prototype.render=function(e){var t,i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C;if(t=this.stx.panels[this.panelName]){i=this.stx,(r=this.p2)||(r=this.p1),n=i.pixelFromTick(this.p0[0],t.chart),s=i.pixelFromTick(this.p1[0],t.chart),o=i.pixelFromTick(r[0],t.chart),l=i.pixelFromValueAdjusted(t,this.p0[0],this.p0[1]),h=i.pixelFromValueAdjusted(t,this.p1[0],this.p1[1]),c=i.pixelFromValueAdjusted(t,r[0],r[1]),u=this.lineWidth,d=this.getLineColor(),p={pattern:this.pattern,lineWidth:u},a.F0V(15),g=a.G0V(1697049504,"50"),a.H0V(38),f=a.G0V(2,l,h,c),a.H0V(38),(m=a.G0V(2,n,s,o))<0&&(g*=-1),a.F0V(4),f*=a.A0V(g,m),a.H0V(10),this.rays=[[[s,h],[o,c]],[[n,l],[a.A0V(2,o,s),a.G0V(2,c,h)]]],s==o&&h==c||(a.F0V(0),this.rays.push([[s,h],[a.G0V(s,g),a.A0V(h,f)]],[[o,c],[a.G0V(o,g),a.G0V(c,f)]]));for(var S=0;S<this.rays.length;S++)"r","a","y",y=this.rays[S],v=S?"ray":"segment",i.plotLine(y[0][0],y[1][0],y[0][1],y[1][1],d,v,e,t,p);this.highlighted&&(x="p0"==this.highlighted,b="p1"==this.highlighted,C="p2"==this.highlighted,this.littleCircle(e,n,l,x),this.littleCircle(e,s,h,b),this.littleCircle(e,o,c,C))}},t.Drawing.pitchfork.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),this.setPoint(2,this.d2,this.v2,e.chart))},t.Drawing.pitchfork.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,a.X8b(),this.d0=t.d0,this.d1=t.d1,this.d2=t.d2,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.tzo2=t.tzo2,this.v0=t.v0,this.v1=t.v1,this.v2=t.v2,this.adjust()},t.Drawing.pitchfork.prototype.serialize=function(){return a.k8b(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2}},t.Drawing.gartley=function(){a.X8b(),this.name="gartley",this.dragToDraw=!1,this.maxSegments=4,this.shape=null,this.points=[]},t.inheritsFrom(t.Drawing.gartley,t.Drawing.continuous),t.Drawing.gartley.prototype.check=function(e,t){if(a.k8b(),!t)return!0;if(e[0]>=t[0]||e[1]==t[1])return!1;if(1==this.segment)e[1]<t[1]?this.shape="M":this.shape="W";else if(2==this.segment){if("M"==this.shape&&e[1]<t[1])return!1;if("W"==this.shape&&e[1]>t[1])return!1;if((t[1]-e[1])/(this.points[0][1]-e[1])<.618)return!1;if((t[1]-e[1])/(this.points[0][1]-e[1])>=.786)return!1}else if(3==this.segment){if("M"==this.shape&&e[1]>t[1])return!1;if("W"==this.shape&&e[1]<t[1])return!1;if((t[1]-e[1])/(this.points[1][1]-e[1])<.618)return!1;if((t[1]-e[1])/(this.points[1][1]-e[1])>=.786)return!1}else if(4==this.segment){if("M"==this.shape&&(e[1]<t[1]||t[1]<this.points[0][1]))return!1;if("W"==this.shape&&(e[1]>t[1]||t[1]>this.points[0][1]))return!1;if((this.points[1][1]-t[1])/(this.points[1][1]-this.points[2][1])<1.27)return!1;if((this.points[1][1]-t[1])/(this.points[1][1]-this.points[2][1])>=1.618)return!1}return!0},t.Drawing.gartley.prototype.click=function(e,t,i){var a;if(a=this.stx.panels[this.panelName]){if(this.copyConfig(),!this.penDown)return this.setPoint(0,t,i,a.chart),this.pts=[],this.penDown=!0,this.segment=1,!1;if(this.accidentalClick(t,i))return this.penDown=!0,!1;if(this.check(this.p0,this.p1)){if(1==this.segment&&this.points.push(this.p0),this.points.push(this.p1),this.setPoint(1,t,i,a.chart),this.segment++,this.segment>this.maxSegments)return this.setPoint(0,this.points[0][0],this.points[0][1],a.chart),this.penDown=!1,!0;this.pts.push(this.d1,this.tzo1,this.v1),this.setPoint(0,t,i,a.chart)}return!1}},t.Drawing.gartley.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y;if("non","e",i=this.stx.panels[this.panelName]){if(r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),2==this.segment)this.drawDropZone(e,.618*this.points[0][1]+.382*this.p0[1],.786*this.points[0][1]+.214*this.p0[1],this.p0[0]);else if(3==this.segment)this.drawDropZone(e,.618*this.points[1][1]+.382*this.p0[1],.786*this.points[1][1]+.214*this.p0[1],this.p0[0]);else if(4==this.segment){a.F0V(5);var v=a.G0V(6,0,4);a.F0V(39);var x=a.G0V(12,28,16,3,19);a.H0V(5);var b=a.A0V(3,9,11);a.H0V(34);var C=a.G0V(7,1,6);l=1.618*this.points[v][x]-.618*this.points[b][C],l="M"==this.shape?Math.max(l,this.points[0][1]):Math.min(l,this.points[0][1]),this.drawDropZone(e,l,1.27*this.points[2][1]-.27*this.points[1][1],this.p0[0])}if(h=this.lineWidth,c=this.getLineColor(),u={pattern:this.pattern,lineWidth:h},a.X8b(),(this.penDown||this.highlighted)&&"none"==this.pattern&&(u.pattern="dotted"),this.segment<=this.maxSegments&&this.stx.plotLine(r,n,s,o,c,this.name,e,i,u),d=this.fillColor,p=[],this.points.length){e.beginPath();for(var S=1;S<this.points.length&&S<=4;S++)g=this.stx.pixelFromTick(this.points[S-1][0],i.chart),f=this.stx.pixelFromTick(this.points[S][0],i.chart),m=this.stx.pixelFromValueAdjusted(i,this.points[S-1][0],this.points[S-1][1]),y=this.stx.pixelFromValueAdjusted(i,this.points[S][0],this.points[S][1]),1==S&&p.push(g,m),p.push(f,y),this.stx.plotLine(g,f,m,y,c,this.name,e,i,u);if(2!=this.points.length&&4!=this.points.length||p.push(n,o),this.points[2]&&p.push(this.stx.pixelFromTick(this.points[2][0],i.chart),this.stx.pixelFromValueAdjusted(i,this.points[2][0],this.points[2][1])),d&&"auto"!=d&&!t.isTransparent(d)){for(var w=0;w<p.length;w+=2)0===w&&e.moveTo(p[0],p[1]),e.lineTo(p[w],p[w+1]);e.fillStyle=d,e.globalAlpha=.2,e.closePath(),e.fill(),e.globalAlpha=1}}}},t.Drawing.gartley.prototype.lineIntersection=function(e,i,r,n){var s,o;if(s=this.points,o=this.stx.panels[this.panelName],s.length!=this.maxSegments+1||!o)return!1;for(var l=0;l<s.length-1;l++)if(t.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,e,i,r,"segment",s[l],s[l+1]))return!0;return a.k8b(),!1},t.Drawing.gartley.prototype.boxIntersection=function(e,t,i){var r,n;if(!this.p0||!this.p1)return!1;if(a.X8b(),i.x0>Math.max(this.p0[0],this.p1[0])||i.x1<Math.min(this.p0[0],this.p1[0]))return!1;r=Math.min(this.p0[1],this.p1[1]),n=Math.max(this.p0[1],this.p1[1]);for(var s=0;s<this.points.length;s++)r=Math.min(r,this.points[s][1]),n=Math.max(n,this.points[s][1]);return!(i.y1>n||i.y0<r)},t.Drawing.gartley.prototype.reposition=function(e,t,i,r){var n,s,o;if(t&&(n=this.stx.panels[this.panelName],s=t.tick-i,t.tick=i,o=t.value-r,t.value=r,"move"==t.action)){this.pts=[];for(var l=0;l<this.points.length;l++)this.points[l][0]-=s,this.points[l][1]-=o,a.H0V(15),this.setPoint(a.G0V(1860397760,"1"),this.points[l][0],this.points[l][1],n.chart),l&&l<this.points.length-1&&this.pts.push(this.d1,this.tzo1,this.v1),this.points[l]=this.p1;this.setPoint(0,this.points[0][0],this.points[0][1],n.chart),this.render(e)}},t.Drawing.gartley.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.gartley.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.reconstructPoints(),a.k8b(),this.setPoint(0,this.d0,this.v0,e.chart),this.points.unshift(this.p0),this.setPoint(1,this.d1,this.v1,e.chart),this.points.push(this.p1))},t.Drawing.gartley.prototype.reconstructPoints=function(){var e,i;if(e=this.stx.panels[this.panelName]){this.points=[];for(var a=0;a<this.pts.length;a+=3)(i=t.strToDateTime(this.pts[a])).setMinutes(i.getMinutes()+Number(this.pts[a+1])-i.getTimezoneOffset()),this.points.push([this.stx.tickFromDate(t.yyyymmddhhmmssmmm(i),e.chart),this.pts[a+2]])}},t.Drawing.gartley.prototype.reconstruct=function(e,t){a.k8b(),this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.pts=t.pts.split(","),this.adjust()},t.Drawing.gartley.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,pts:this.pts.join(",")}},t.Drawing.freeform=function(){this.name="freeform",this.splineTension=.3,this.dragToDraw=!0},t.inheritsFrom(t.Drawing.freeform,t.Drawing.segment),t.Drawing.freeform.prototype.measure=function(){},t.Drawing.freeform.prototype.intersected=function(e,i,r){if(r.x0>this.hiX||r.x1<this.lowX)return null;for(var n=1;-1257342762!==a.N5O(n.toString(),n.toString().length,79649);n++)return r.y1>this.hiY||r.y0<this.lowY?null:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),tick:e,value:i});return a.X8b(),-1355150880!==a.H5O(2..toString(),2..toString().length,52124)?r.y1>=this.hiY&&r.y0<=this.lowY?1:(this.highlighted=!1,{action:"",p0:t.clone(this.p0),tick:e,value:i}):void 0},t.Drawing.freeform.prototype.reposition=function(e,t,i,r){var n,s,o;a.X8b(),t&&(n=this.stx.panels[this.panelName],s=t.tick-i,o=t.value-r,"move"==t.action&&(this.setPoint(0,t.p0[0]-s,t.p0[1]-o,n.chart),this.adjust(),this.render(e)))},t.Drawing.freeform.prototype.click=function(e,i,r){var n,s;if(n=this.stx.panels[this.panelName])return a.X8b(),!1===this.penDown?(this.copyConfig(),this.startX=Math.round(this.stx.resolveX(this.stx.pixelFromTick(i,n.chart))),this.startY=Math.round(this.stx.resolveY(this.stx.pixelFromValueAdjusted(n,i,r))),s=this.stx.dateFromTick(i,n.chart,!0),this.d0=t.yyyymmddhhmmssmmm(s),this.tzo0=s.getTimezoneOffset(),this.v0=r,this.p0=[t.ChartEngine.crosshairX-this.startX,t.ChartEngine.crosshairY-this.startY],this.nodes=[this.p0[0],this.p0[1]],this.pNodes=[this.p0],this.candleWidth=this.stx.layout.candleWidth,this.multiplier=n.yAxis.multiplier,this.interval=this.stx.layout.interval,this.periodicity=this.stx.layout.periodicity,this.tempSplineTension=this.splineTension,this.splineTension=-1,document.body.style.cursor="pointer",this.penDown=!0,!1):(this.penDown=!1,this.splineTension=this.tempSplineTension,document.body.style.cursor="auto",!0)},t.Drawing.freeform.prototype.move=function(e,i,a){var r,n;if(this.penDown)return r=this.stx.panels[this.panelName],n=this.stx.dateFromTick(i,r.chart,!0),this.d1=t.yyyymmddhhmmssmmm(n),this.tzo1=n.getTimezoneOffset(),this.v1=a,this.p1=[t.ChartEngine.crosshairX-this.startX,r.yAxis.flipped?this.startY-t.ChartEngine.crosshairY:t.ChartEngine.crosshairY-this.startY],this.pNodes.length>2&&(this.p1[0]==this.pNodes[this.pNodes.length-2][0]&&this.p1[0]==this.pNodes[this.pNodes.length-1][0]||this.p1[1]==this.pNodes[this.pNodes.length-2][1]&&this.p1[1]==this.pNodes[this.pNodes.length-1][1])&&(this.pNodes.length--,this.nodes.length-=2),this.nodes.push(this.p1[0],this.p1[1]),this.pNodes.push(this.p1),this.render(e),!1},t.Drawing.freeform.prototype.intervalRatio=function(e,i,r,n,s,o){var l;function h(e,t){return a.k8b(),5}function c(e,i){return t.Market.Symbology.isForexSymbol(i)?1440:(a.k8b(),a.H0V(37),a.A0V("390",0))}if(l=0,e==i)l=1;else if(isNaN(e)||isNaN(i))if(isNaN(e)){if("d","ay","we","ek","month"==e)"we","ek","week"==i?l=h():"day"==i?l=u(s,o):isNaN(i)||(l=u(s,o)*c(0,o)/i);else if("week"==e){if("month"==i)a.F0V(40),l=a.A0V(10,108,9,10)/h();"day"==i?l=5:isNaN(i)||(l=5*c(0,o)/i)}else if("day"==e)if("week"==i)l=.2;else if("month"==i){a.F0V(0),l=a.G0V(4,3)/u(s,o)}else isNaN(i)||(l=c(0,o)/i)}else isNaN(e)||("we","ek","m","o","n","th","month"==i?l=e/(u(s,o)*c(0,o)):"week"==i?l=e/(5*c(0,o)):"day"==i&&(l=e/c(0,o)));else a.F0V(4),l=a.A0V(e,i);function u(e,t){return a.F0V(25),a.A0V(1894884928,"30")}return a.X8b(),a.F0V(4),l*=a.A0V(r,n)},t.Drawing.freeform.prototype.render=function(e){var t,i,r,n,s,o,l,h,c,u,d,p;if((t=this.stx.panels[this.panelName])&&0!==(i=this.intervalRatio(this.interval,this.stx.layout.interval,this.periodicity,this.stx.layout.periodicity,this.d0,t.chart.symbol))){r=this.stx.layout.candleWidth/this.candleWidth,n=t.yAxis.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,t.chart),s=this.stx.pixelFromTick(this.p0[0],t.chart),o=this.stx.pixelFromValueAdjusted(t,this.p0[0],this.p0[1]),l=[],h=this.lineWidth,c=this.getLineColor(),u={pattern:this.pattern,lineWidth:h};for(var g=0;g<this.pNodes.length;g++){d=i*r*this.pNodes[g][0]+s,a.F0V(41);var f=a.G0V(13,2,11,2);p=n*this.pNodes[g][f],t.yAxis.flipped?(a.F0V(0),p=a.G0V(o,p)):p+=o,l.push(d,p)}l.length&&(a.X8b(),this.splineTension<0?this.stx.connectTheDots(l,c,this.name,e,t,u):this.stx.plotSpline(l,this.splineTension,c,this.name,e,!0,u))}},t.Drawing.freeform.prototype.adjust=function(){var e,t,i,r,n,s,o,l;if(e=this.stx.panels[this.panelName]){t=[this.nodes[0],this.nodes[1]],a.k8b(),this.pNodes=[t],this.lowX=this.nodes[0],this.hiX=this.nodes[0],a.H0V(21),this.lowY=this.nodes[a.A0V(1,"1")],this.hiY=this.nodes[1];for(var h=2;h<this.nodes.length;h+=2)a.H0V(2),i=[this.nodes[h],this.nodes[a.A0V(h,1)]],this.pNodes.push(i),this.lowX=Math.min(this.lowX,i[0]),this.hiX=Math.max(this.hiX,i[0]),this.lowY=Math.max(this.lowY,i[1]),this.hiY=Math.min(this.hiY,i[1]);0!==(r=this.intervalRatio(this.interval,this.stx.layout.interval,this.periodicity,this.stx.layout.periodicity,this.d0,e.chart.symbol))&&(n=this.stx.layout.candleWidth/this.candleWidth,s=e.yAxis.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,e.chart),o=this.stx.pixelFromTick(this.p0[0],e.chart),l=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),this.lowX=this.stx.tickFromPixel(Math.floor(r*n*this.lowX)+o,e.chart),this.hiX=this.stx.tickFromPixel(Math.ceil(r*n*this.hiX)+o,e.chart),e.yAxis.flipped?(this.lowY=this.stx.valueFromPixel(l-Math.floor(s*this.lowY),e),this.hiY=this.stx.valueFromPixel(l-Math.ceil(s*this.hiY),e)):(this.lowY=this.stx.valueFromPixel(Math.floor(s*this.lowY)+l,e),this.hiY=this.stx.valueFromPixel(Math.ceil(s*this.hiY)+l,e)))}},t.Drawing.freeform.prototype.serialize=function(){return a.k8b(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,cw:Number(this.candleWidth.toFixed(4)),mlt:Number(this.multiplier.toFixed(4)),d0:this.d0,tzo0:this.tzo0,v0:this.v0,inter:this.interval,pd:this.periodicity,nodes:this.nodes}},t.Drawing.freeform.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.candleWidth=t.cw,this.multiplier=t.mlt,this.d0=t.d0,this.tzo0=t.tzo0,this.v0=t.v0,this.interval=t.inter,this.periodicity=t.pd,this.nodes=t.nodes,this.adjust()},t.Drawing.callout=function(){this.name="callout",this.arr=[],a.F0V(22),this.w=a.A0V(0,"0"),this.h=0,this.padding=4,this.text="",this.ta=null,this.fontSize=0,this.font={},this.stemEntry="",this.defaultWidth=50,this.defaultHeight=10},t.inheritsFrom(t.Drawing.callout,t.Drawing.annotation),t.Drawing.callout.prototype.configs=["color","fillColor","lineWidth","pattern","font"],t.Drawing.callout.prototype.copyConfig=function(e){t.Drawing.copyConfig(this,e),a.X8b(),this.borderColor=this.color},t.Drawing.callout.prototype.move=function(e,t,i){this.penDown&&(this.copyConfig(),this.p0=[t,i],this.render(e))},t.Drawing.callout.prototype.onChange=function(e){var i,a;this.stx.panels[this.panelName]&&(i=e.target,this.w=i.clientWidth,this.h=i.clientHeight,a=this.context||this.stx.chart.tempCanvas.context,t.clearCanvas(a.canvas,this.stx),this.render(a),this.edit(a))},t.Drawing.callout.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C;if("a","u","to","t","o","p",this.context=e,(i=this.stx.panels[this.panelName])&&(r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),!isNaN(n))){e.font=this.fontString,e.textBaseline="top",a.k8b(),s=r,o=n,a.H0V(42);var S=a.A0V(11,5,57);l=this.w/S,a.H0V(0);var w=a.A0V(32,30);if(h=this.h/w,this.penDown&&(l=this.defaultWidth,(h=this.defaultHeight)||(h=this.fontSize)),(c=this.lineWidth)||(c=1.1),("auto"==(u=this.color)||t.isTransparent(u))&&(u=this.stx.defaultColor),("auto"==(d=this.borderColor)||t.isTransparent(d))&&(d=this.stx.defaultColor),this.highlighted&&(d=this.stx.getCanvasColor("stx_highlight_vector")),y=Math.min(Math.min(l,h)/2,8),this.stem&&("c","m",this.stem.t?(p=this.stx.pixelFromTick(this.stem.t),f=this.stx.pixelFromValueAdjusted(i,this.stem.t,this.stem.v)):this.stem.x&&(p=s,f=o,s+=this.stem.x,o+=this.stem.y),v="",p>=s+l?(a.H0V(2),g=a.A0V(s,l),v="r"):p>s-l&&p<s+l?(g=s,v="c"):p<=s-l&&(a.H0V(0),g=a.A0V(s,l),v="l"),f>=o+h?(a.F0V(2),m=a.A0V(o,h),v+="b"):f>o-h&&f<o+h?(m=o,v+="m"):f<=o-h&&(a.H0V(0),m=a.G0V(o,h),v+="t"),this.stemEntry=v,"cm"!=v&&(p=Math.round(p),g=Math.round(g),f=Math.round(f),m=Math.round(m))),this.highlighted?this.stx.canvasColor("stx_annotation_highlight_bg",e):this.fillColor?(e.fillStyle=this.fillColor,e.globalAlpha=.4):this.stem&&(e.fillStyle=this.stx.containerColor),e.strokeStyle=d,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(c,this.pattern)),e.lineDashOffset=0),d){if("l","m","c","b","r","b",e.beginPath(),e.lineWidth=c,a.F0V(8),e.moveTo(a.A0V(s,y,l),a.A0V(o,h,a.H0V(0))),"rt"!=this.stemEntry?(a.H0V(2),e.quadraticCurveTo(a.A0V(s,l),a.G0V(o,h,a.H0V(0)),a.G0V(s,l,a.H0V(2)),a.A0V(y,o,h,a.F0V(5)))):(e.lineTo(p,f),a.H0V(2),e.lineTo(a.A0V(s,l),a.G0V(y,o,h,a.F0V(5)))),a.H0V(2),e.lineTo(a.G0V(s,l),a.G0V(o,2,y,a.H0V(43))),"rm"==this.stemEntry&&e.lineTo(p,f),a.F0V(2),e.lineTo(a.A0V(s,l),a.A0V(2,y,o,a.F0V(44))),a.F0V(2),e.lineTo(a.G0V(s,l),a.G0V(o,y,h,a.F0V(8))),"rb"!=this.stemEntry?(a.F0V(2),e.quadraticCurveTo(a.A0V(s,l),a.G0V(o,h,a.H0V(2)),a.G0V(s,y,l,a.F0V(8)),a.G0V(o,h,a.F0V(2)))):(e.lineTo(p,f),a.H0V(8),e.lineTo(a.G0V(s,y,l),a.G0V(o,h,a.H0V(2)))),a.F0V(44),e.lineTo(a.A0V(2,y,s),a.G0V(o,h,a.H0V(2))),"cb"==this.stemEntry&&e.lineTo(p,f),a.F0V(43),e.lineTo(a.G0V(s,2,y),a.A0V(o,h,a.H0V(2))),a.F0V(5),e.lineTo(a.G0V(y,s,l),a.G0V(o,h,a.H0V(2))),"lb"!=this.stemEntry?(a.H0V(0),e.quadraticCurveTo(a.A0V(s,l),a.A0V(o,h,a.F0V(2)),a.A0V(s,l,a.H0V(0)),a.A0V(o,y,h,a.H0V(8)))):(e.lineTo(p,f),a.H0V(0),e.lineTo(a.A0V(s,l),a.G0V(o,y,h,a.H0V(8)))),a.F0V(0),e.lineTo(a.A0V(s,l),a.G0V(2,y,o,a.F0V(44))),"lm"==this.stemEntry&&e.lineTo(p,f),a.H0V(0),e.lineTo(a.G0V(s,l),a.G0V("2",y,o,0,a.H0V(45))),a.H0V(0),e.lineTo(a.G0V(s,l),a.G0V(y,o,h,a.H0V(5))),"lt"!=this.stemEntry)a.H0V(0),e.quadraticCurveTo(a.G0V(s,l),a.G0V(o,h,a.H0V(0)),a.G0V(y,s,l,a.F0V(5)),a.A0V(o,h,a.H0V(0)));else{e.lineTo(p,f),a.F0V(22),x=a.A0V(1275086144,"1275389258"),1520621217,b=2;for(var k=1;a.N5O(k.toString(),k.toString().length,48912)!==x;k++)a.H0V(46),e.lineTo(a.G0V(l,s,y),a.G0V(h,o,a.H0V(21))),b+=2;1520621217!==a.N5O(b.toString(),b.toString().length,3606)&&(a.H0V(1),e.lineTo(a.A0V(y,l,s),a.G0V(o,h,a.F0V(0)))),a.F0V(5),e.lineTo(a.A0V(y,s,l),a.A0V(o,h,a.H0V(0)))}a.H0V(43),e.lineTo(a.G0V(s,2,y),a.G0V(o,h,a.H0V(0))),"ct"==this.stemEntry&&e.lineTo(p,f),a.F0V(47),e.lineTo(a.G0V(s,y,"2"),a.A0V(o,h,a.H0V(0))),a.F0V(8),e.lineTo(a.G0V(s,y,l),a.G0V(o,h,a.F0V(0))),e.fill(),e.globalAlpha=1,"none"!=this.pattern&&e.stroke()}if(this.highlighted?("stx_anno","tation_highlight",this.stx.canvasColor("stx_annotation_highlight",e)):e.fillStyle=u,o+=this.padding,!this.ta)for(var A=0;A<this.arr.length;A++)e.fillText(this.arr[A],s-l+this.padding,o-h),o+=this.fontSize;e.textBaseline="alphabetic",this.highlighted&&!this.noHandles&&("p","0",C="p0"==this.highlighted,this.littleCircle(e,p,f,C))}},t.Drawing.callout.prototype.click=function(e,t,i){var r;if(!this.stx.overXAxis&&!this.stx.overYAxis)return r=this.stx.panels[this.panelName],this.copyConfig(),a.F0V(15),this.setPoint(a.G0V(888983200,"0"),t,i,r.chart),this.penDown?(this.adjust(),this.edit(e),this.penDown=!1,!1):(this.stem={d:this.d0,v:this.v0},this.penDown=!0,this.adjust(),!1)},t.Drawing.callout.prototype.reposition=function(e,t,i,r){var n,s,o;t&&(n=this.stx.panels[this.panelName],s=t.tick-i,o=t.value-r,t.stem?("mo","v","e","drag"==t.action?this.stem={d:this.stx.dateFromTick(i,n.chart,!0),v:r}:"move"==t.action&&(this.setPoint(0,t.p0[0]-s,t.p0[1]-o,n.chart),this.stem={d:this.stx.dateFromTick(this.stx.tickFromDate(t.stem.d,n.chart)-s),v:t.stem.v-o}),this.adjust()):this.setPoint(0,t.p0[0]-s,t.p0[1]-o,n.chart),a.X8b(),this.render(e))},t.Drawing.callout.prototype.lineIntersection=function(e,i,r,n){var s,o,l,h,c,u,d,p,g,f,m,y;if(s=this.stx.panels[this.panelName],o=this.stem,l=this.p0,h=this.stx,!l||!o||!s)return!1;if(c=o.t||this.stx.tickFromDate(o.d,s.chart),u={x0:l[0],x1:c,y0:l[1],y1:o.v},p=(d=t.convertBoxToPixels(h,this.panelName,u)).x0,g=d.y0,f=d.x1,m=d.y1,"string"==typeof this.stemEntry){if(this.stemEntry.indexOf("l")>-1){a.H0V(30);var v=a.G0V(13,35,20);p-=this.w/v}else if(this.stemEntry.indexOf("r")>-1){a.F0V(48);var x=a.A0V(14,11,13,14);p+=this.w/x}if(this.stemEntry.indexOf("t")>-1){a.F0V(49);var b=a.A0V(1,19,8,29,1);g-=this.h/b}else if(this.stemEntry.indexOf("b")>-1){a.H0V(14);var C=a.A0V(6,4);g+=this.h/C}}return y=t.convertBoxToPixels(h,this.panelName,r),t.boxIntersects(y.x0,y.y0,y.x1,y.y1,p,g,f,m,n)},t.Drawing.callout.prototype.intersected=function(e,i,r){var n,s,o,l,h,c,u;if(a.k8b(),"se","gme","nt",n=this.stx.panels[this.panelName],!this.p0)return null;if(this.pointIntersection(this.stem.t,this.stem.v,r))return"d","rag",this.highlighted="p0",{action:"drag",stem:!0};a.F0V(34);var d=a.G0V(34,17,0);s=this.stx.pixelFromTick(this.p0[0],n.chart)-this.w/d,a.H0V(2);var p=a.G0V(1228374204,4);a.F0V(50);var g=a.G0V(14,19,9,2392);return o=this.stx.pixelFromValueAdjusted(n,this.p0["0">>p],this.p0[1])-this.h/g,l=s+this.w,h=o+this.h,this.stem&&this.stem.x&&(s+=this.stem.x,l+=this.stem.x,o+=this.stem.y,h+=this.stem.y),c=this.stx.pixelFromTick(e,n.chart),u=this.stx.pixelFromValueAdjusted(n,e,i),c+r.r>=s&&c-r.r<=l&&u+r.r>=o&&u-r.r<=h?(this.highlighted=!0,{p0:t.clone(this.p0),tick:e,value:i}):this.lineIntersection(e,i,r,"segment")?(this.highlighted=!0,{action:"move",stem:t.clone(this.stem),p0:t.clone(this.p0),tick:e,value:i}):null},t.Drawing.fibonacci=function(){this.name="fibonacci",this.configurator="fibonacci"},t.inheritsFrom(t.Drawing.fibonacci,t.Drawing.BaseTwoPoint),t.Drawing.fibonacci.mapping={trend:"t",color:"c",parameters:"p",pattern:"pt",opacity:"o",lineWidth:"lw",level:"l",extendLeft:"e",printLevels:"pl",printValues:"pv",timezone:"tz",display:"d"},a.F0V(0),t.Drawing.fibonacci.prototype.recommendedLevels=[-.618,-a.A0V("0.382",0),0,.382,.5,.618,1,a.G0V(1,"1.382",a.F0V(21)),1.618],t.Drawing.fibonacci.prototype.configs=["color","fillColor","lineWidth","pattern","parameters"],t.Drawing.fibonacci.prototype.initializeSettings=function(e){var t,i;if(a.k8b(),(t=this.recommendedLevels)&&!e.currentVectorParameters.fibonacci.fibsAlreadySet){i=e.currentVectorParameters.fibonacci.fibs;for(var r=0;r<i.length;r++){delete i[r].display;for(var n=0;n<t.length;n++)i[r].level==t[n]&&(i[r].display=!0)}}},t.Drawing.fibonacci.prototype.setOuter=function(){var e,i,r,n,s,o,l,h,c,u,d,p,g,f;if(i=(e=this.stx).panels[this.panelName]){r=Math.max(this.p0[1],this.p1[1]),n=Math.min(this.p0[1],this.p1[1]),a.F0V(0),s=a.G0V(r,n),this.outer={p0:t.clone(this.p0),p1:t.clone(this.p1)},o=e.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),l=e.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),h=e.pixelFromTick(this.p0[0],i.chart),c=e.pixelFromTick(this.p1[0],i.chart),u=0,d=1;for(var m=0;m<this.parameters.fibs.length;m++)(p=this.parameters.fibs[m]).level>=u&&p.level<=d||!p.display||(g=e.pixelFromValueAdjusted(i,this.p0[0],l<o?r-s*p.level:n+s*p.level),f=t.xIntersection({x0:h,x1:c,y0:o,y1:l},g),p.level<u?(u=p.level,this.outer.p1[1]=e.valueFromPixel(g,i),this.outer.p1[0]=e.tickFromPixel(f,i.chart)):p.level>d&&(d=p.level,a.H0V(15),this.outer.p0[a.G0V(1691223072,"1")]=e.valueFromPixel(g,i),this.outer.p0[0]=e.tickFromPixel(f,i.chart)))}},t.Drawing.fibonacci.prototype.click=function(e,i,r){var n;if(n=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?(a.X8b(),this.accidentalClick(i,r)?this.dragToDraw:(this.setPoint(1,i,r,n.chart),this.setOuter(),this.parameters=t.clone(this.parameters),this.penDown=!1,!0)):(this.setPoint(0,i,r,n.chart),this.penDown=!0,!1)},t.Drawing.fibonacci.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E;if("1","6","1.8","%","s","ol","i","d",(i=this.stx.panels[this.panelName])&&(r=i.yAxis,this.p1)){n=Math.max(this.p0[1],this.p1[1]),s=Math.min(this.p0[1],this.p1[1]),o=r.flipped?s-n:n-s,l=this.stx.pixelFromTick(this.p0[0],i.chart),h=this.stx.pixelFromTick(this.p1[0],i.chart),c=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),u=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),d=Math.min(u,c),p=Math.max(u,c),a.H0V(0),g=a.A0V(p,d),a.H0V(51),f=a.A0V(h,0,l,c,u),m={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=m),y=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),a.H0V(52);var N=a.A0V(1,9,1);v=e.measureText("161.8%").width+N,x=Number.MAX_VALUE,b=Number.MAX_VALUE,a.F0V(53);var R=a.G0V(15,0,15,0);C=Number.MAX_VALUE*R,a.F0V(54);var Y=a.A0V(4,8,1,143,12);S=Number.MAX_VALUE*Y,("auto"==(w=this.color)||t.isTransparent(w))&&(w=this.stx.defaultColor),this.rays=[];for(var z=0;z<this.parameters.fibs.length;z++)if("a","uto","a","u","t","o",e.textAlign="left",e.fillStyle=w,(k=this.parameters.fibs[z]).display){if(A=this.stx.pixelFromValueAdjusted(i,this.p0[0],u<c?n-o*k.level:s+o*k.level),D=t.xIntersection({x0:l,x1:h,y0:c,y1:u},A),M=this.parameters.extendLeft?0:D,T=i.left+i.width,this.parameters.printLevels){a.F0V(55);var B=a.A0V(1011,983,337,17,3);a.F0V(0);var U=a.G0V(27,17);F=Math.round(k.level*B)/U+"%",T-=v,this.parameters.printValues&&("s","tx","_yax","is",e.fillStyle=w,this.stx.canvasFont("stx_yaxis",e)),T<M&&(e.textAlign="right"),e.fillText(F,T,A),T<M?T+=5:T-=5}this.parameters.printValues&&D<i.width&&(_=this.stx.transformedPriceFromPixel(A,i),_=r.priceFormatter?r.priceFormatter(this.stx,i,_):this.stx.formatYAxisPrice(_,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,_,A,w,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(P=k.color)||t.isTransparent(P))&&(P=this.color),("auto"==P||t.isTransparent(P))&&(P=this.stx.defaultColor),("auto"==(V=k.color)||t.isTransparent(V))&&(V=this.fillColor),("auto"==V||t.isTransparent(V))&&(V=this.stx.defaultColor),e.fillStyle=V,O=t.clone(k.parameters),this.highlighted&&(O.opacity=1),this.stx.plotLine(M,T,A,A,this.highlighted?y:P,"segment",e,i,O),this.rays.push([[M,A],[T,A]]),e.globalAlpha=.05,e.beginPath(),e.moveTo(T,A),e.lineTo(M,A),M?e.lineTo(h,u):e.lineTo(M,u),e.lineTo(T,u),void 0!==V&&e.fill(),e.globalAlpha=1,A<b&&(x=D,b=A),A>S&&(C=D,S=A)}for(var j=0;j<=1;j++)I=f?p-g*j:d+g*j,(I=Math.round(I))<b&&(x=t.xIntersection({x0:l,x1:h,y0:c,y1:u},I),b=I),I>S&&(C=t.xIntersection({x0:l,x1:h,y0:c,y1:u},I),S=I);L=t.clone(this.parameters.trend.parameters),this.highlighted&&(L.opacity=1),this.stx.plotLine(x,C,b,S,y,"segment",e,i,L),this.highlighted&&("p","0",H="p0"==this.highlighted,E="p1"==this.highlighted,this.littleCircle(e,l,c,H),this.littleCircle(e,h,u,E))}},t.Drawing.fibonacci.prototype.reposition=function(e,i,a,r){i&&(t.Drawing.BaseTwoPoint.prototype.reposition.apply(this,arguments),this.adjust())},t.Drawing.fibonacci.prototype.intersected=function(e,i,r){var n,s,o,l,h,c;if(n=this.p0,s=this.p1,!n||!s)return null;for(var u in o={0:n,1:s})if(this.pointIntersection(o[u][0],o[u][1],r))return a.F0V(2),this.highlighted=a.A0V("p",u),{action:"drag",point:"p"+u};if(l=this.outer,h=this.rays,!(c=l&&this.lineIntersection(e,i,r,"segment",l.p0,l.p1)))for(var d=0;d<h.length;d++)if(this.lineIntersection(e,i,r,"ray",h[d][0],h[d][1],!0)){c=!0;break}return c?(this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:i}):null},t.Drawing.fibonacci.prototype.reconstruct=function(e,i){i=t.replaceFields(i,t.reverseObject(t.Drawing.fibonacci.mapping)),this.stx=e,this.parameters=i.parameters,this.parameters||(this.parameters=t.clone(this.stx.currentVectorParameters.fibonacci)),this.color=i.col,this.fillColor=i.fc,this.panelName=i.pnl,this.d0=i.d0,this.d1=i.d1,this.d2=i.d2,this.tzo0=i.tzo0,this.tzo1=i.tzo1,a.X8b(),this.tzo2=i.tzo2,this.v0=i.v0,this.v1=i.v1,this.v2=i.v2,this.adjust()},t.Drawing.fibonacci.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),this.setOuter())},t.Drawing.fibonacci.prototype.serialize=function(){var e;return e={name:this.name,parameters:this.parameters,pnl:this.panelName,col:this.color,fc:this.fillColor,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2},t.replaceFields(e,t.Drawing.fibonacci.mapping)},t.Drawing.retracement=function(){this.name="retracement"},t.inheritsFrom(t.Drawing.retracement,t.Drawing.fibonacci),t.Drawing.fibprojection=function(){this.name="fibprojection",this.dragToDraw=!1,this.p2=null},t.inheritsFrom(t.Drawing.fibprojection,t.Drawing.fibonacci),t.Drawing.fibprojection.prototype.recommendedLevels=[0,.618,1,1.272,1.618,2.618,4.236],t.Drawing.fibprojection.prototype.click=function(e,i,r){var n;if(n=this.stx.panels[this.panelName],a.X8b(),n)return this.copyConfig(),this.penDown?this.accidentalClick(i,r)?(this.stx.undo(),!0):null!==this.p2?(this.setPoint(2,this.p2[0],this.p2[1],n.chart),this.parameters=t.clone(this.parameters),!0):(this.setPoint(1,i,r,n.chart),this.p2=[this.p1[0],this.p1[1]],!1):(this.setPoint(0,i,r,n.chart),this.penDown=!0,!1)},t.Drawing.fibprojection.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F;if("se","g","ment","mi","ddle",(i=this.stx.panels[this.panelName])&&(r=i.yAxis,this.p1)){a.F0V(56);var _=a.G0V(3,20,8,8,17);a.F0V(57);var P=a.G0V(20,30,1,14,3);if(n=this.p1[_]-this.p0[P],s=this.stx.pixelFromTick(this.p0[0],i.chart),o=this.stx.pixelFromTick(this.p1[0],i.chart),l=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),h=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),c=null,u=null,this.p2&&(c=this.stx.pixelFromTick(this.p2[0],i.chart),u=this.stx.pixelFromValueAdjusted(i,this.p2[0],this.p2[1])),d={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=d),p=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),g=e.measureText("161.8%").width+10,("auto"==(f=this.color)||t.isTransparent(f))&&(f=this.stx.defaultColor),this.p2){this.rays=[];for(var V=0;V<this.parameters.fibs.length;V++)if("aut","o","l","ef","t",e.textAlign="left",e.fillStyle=f,(m=this.parameters.fibs[V]).display){if(y=this.stx.pixelFromValueAdjusted(i,this.p2[0],this.p2[1]+n*m.level),v=t.xIntersection({x0:s,x1:o,y0:l,y1:h},y),x=this.parameters.extendLeft?0:s,b=i.left+i.width,this.parameters.printLevels){"righ","t",a.F0V(52);var O=a.A0V(1e4,992,1250);a.F0V(5);var I=a.A0V(15,3,8);a.H0V(0);a.A0V(8986,11);C=Math.round(m.level*O)/I+"%",b-=g,this.parameters.printValues&&(e.fillStyle=f,this.stx.canvasFont("stx_yaxis",e)),b<x&&(e.textAlign="right"),e.fillText(C,b,y),b<x?b+=5:b-=5}this.parameters.printValues&&v<i.width&&(S=this.stx.transformedPriceFromPixel(y,i),S=r.priceFormatter?r.priceFormatter(this.stx,i,S):this.stx.formatYAxisPrice(S,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,S,y,f,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(w=m.color)||t.isTransparent(w))&&(w=this.color),("auto"==w||t.isTransparent(w))&&(w=this.stx.defaultColor),("auto"==(k=m.color)||t.isTransparent(k))&&(k=this.fillColor),("auto"==k||t.isTransparent(k))&&(k=this.stx.defaultColor),e.fillStyle=k,A=t.clone(m.parameters),this.highlighted&&(a.H0V(15),A.opacity=a.A0V(1403712960,"1")),this.stx.plotLine(x,b,y,y,this.highlighted?p:w,"segment",e,i,A),this.rays.push([[x,y],[b,y]]),a.F0V(21),e.globalAlpha=a.A0V(1,"0.05"),e.beginPath(),e.moveTo(b,y),e.lineTo(x,y),x?e.lineTo(s,u):e.lineTo(x,u),e.lineTo(b,u),void 0!==k&&e.fill(),e.globalAlpha=1}}D=t.clone(this.parameters.trend.parameters),this.highlighted&&(D.opacity=1),this.stx.plotLine(s,o,l,h,p,"segment",e,i,D),this.p2&&this.stx.plotLine(o,c,h,u,p,"segment",e,i,D),this.highlighted&&("p","2","p","1","p","0",M="p0"==this.highlighted,T="p1"==this.highlighted,F="p2"==this.highlighted,this.littleCircle(e,s,l,M),this.littleCircle(e,o,h,T),this.littleCircle(e,c,u,F))}},t.Drawing.fibprojection.prototype.move=function(e,t,i){this.penDown&&(this.copyConfig(),a.X8b(),null===this.p2?this.p1=[t,i]:this.p2=[t,i],this.render(e))},t.Drawing.fibprojection.prototype.reposition=function(e,t,i,r){var n,s,o,l;if("m","o","v","e",t)if(n=this.stx.panels[this.panelName],s=t.tick-i,o=t.value-r,"move"==t.action){-1356050239,-2092945645,l=2;for(var h=1;-1356050239!==a.H5O(h.toString(),h.toString().length,13569);h++)this.setPoint(0,t.p0[0]-s,t.p0[1]-o,n.chart),l+=2;-2092945645!==a.N5O(l.toString(),l.toString().length,10731)&&this.setPoint(2,t.p0[3]*s,t.p0[8]*o,n.chart),a.H0V(0),this.setPoint(a.G0V("1",0),t.p1[0]-s,t.p1[1]-o,n.chart),this.setPoint(2,t.p2[0]-s,t.p2[1]-o,n.chart),this.render(e)}else"drag"==t.action&&(this[t.point]=[i,r],this.setPoint(0,this.p0[0],this.p0[1],n.chart),this.setPoint(1,this.p1[0],this.p1[1],n.chart),a.F0V(0),this.setPoint(a.A0V("2",0),this.p2[0],this.p2[1],n.chart),this.render(e))},t.Drawing.fibprojection.prototype.intersected=function(e,i,r){var n,s,o,l,h,c;if("segmen","t",n=this.p0,s=this.p1,o=this.p2,!n||!s||!o)return null;for(var u in l={0:n,1:s,2:o})if(this.pointIntersection(l[u][0],l[u][1],r))return a.F0V(2),this.highlighted=a.G0V("p",u),{action:"drag",point:"p"+u};if(h=this.rays,!(c=this.lineIntersection(e,i,r,"segment",n,s)||this.lineIntersection(e,i,r,"segment",s,o)))for(var d=0;d<h.length;d++)if(this.lineIntersection(e,i,r,"ray",h[d][0],h[d][1],!0)){c=!0;break}return c?(this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),p2:t.clone(o),tick:e,value:i}):null},t.Drawing.fibprojection.prototype.adjust=function(){var e;a.k8b(),(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),this.setPoint(2,this.d2,this.v2,e.chart))},t.Drawing.fibarc=function(){this.name="fibarc"},t.inheritsFrom(t.Drawing.fibarc,t.Drawing.fibonacci),a.F0V(25),t.Drawing.fibarc.prototype.recommendedLevels=[.382,.5,.618,a.G0V(329700832,"1")],t.Drawing.fibarc.prototype.setOuter=function(){var e,i,r,n,s,o,l;(e=this.stx.panels[this.panelName])&&(this.outer={p0:t.clone(this.p0),p1:t.clone(this.p1)},i=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),r=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),n=this.stx.pixelFromTick(this.p0[0],e.chart),s=this.stx.pixelFromTick(this.p1[0],e.chart),a.F0V(58),o=a.G0V(2,r,i),l=t.xIntersection({x0:n,x1:s,y0:i,y1:r},o),this.outer.p0[1]=this.stx.valueFromPixel(o,e),this.outer.p0[0]=this.stx.tickFromPixel(l,e.chart))},t.Drawing.fibarc.prototype.intersected=function(e,i,r){var n,s,o,l,h,c,u,d,p,g;if(n=this.stx.panels[this.panelName]){if(s=this.p0,o=this.p1,l=this.outer,!s||!o)return null;for(var f in h={0:s,1:o})if(this.pointIntersection(h[f][0],h[f][1],r))return a.F0V(2),this.highlighted=a.A0V("p",f),{action:"drag",point:"p"+f};return this.lineIntersection(e,i,r,"segment",l.p0,l.p1)?("m","ov","e",this.highlighted=!0,{action:"move",p0:t.clone(s),p1:t.clone(o),tick:e,value:i}):(c={x0:s[0],x1:o[0],y0:s[1],y1:o[1]},u=t.convertBoxToPixels(this.stx,this.panelName,c),d={x:Math.abs(Math.sqrt(2)*(u.x1-u.x0)),y:Math.abs(Math.sqrt(2)*(u.y1-u.y0))},p=this.stx.pixelFromTick(e,n.chart),g=this.stx.pixelFromValueAdjusted(n,e,i),p+r.r<u.x1-d.x||p-r.r>u.x1+d.x||g+r.r<u.y1-d.y||g-r.r>u.y1+d.y||u.y0<u.y1&&g-r.r>u.y1||u.y0>u.y1&&g+r.r<u.y1?null:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}))}},t.Drawing.fibarc.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k;if("s","t","x_yax","is",(i=this.stx.panels[this.panelName])&&(r=i.yAxis,this.p1)){n=this.stx.pixelFromTick(this.p0[0],i.chart),s=this.stx.pixelFromTick(this.p1[0],i.chart),o=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),l=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),a.H0V(59),h=a.A0V(l,o),a.F0V(60),c=Math.abs(a.A0V(s,o,n,l)),u=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),("auto"==(d=this.color)||t.isTransparent(d))&&(d=this.stx.defaultColor);for(var A=0;A<this.parameters.fibs.length;A++)if("a","u","t","o",e.fillStyle=d,!((p=this.parameters.fibs[A]).level<0)&&p.display){a.F0V(61);var D=a.G0V(5,7,555290109,15);a.F0V(2);var M=a.A0V(0,1);a.H0V(40);var T=a.A0V(13,168,14,12);g=Math.abs(this.p1["1"<<D]-this.p0[M])*Math.sqrt(T)*p.level,a.H0V(62);var F=a.G0V(5,10,15,7,5);a.H0V(5);var _=a.A0V(18,0,19);a.F0V(0);var P=a.A0V(4,3);a.H0V(5);var V=a.G0V(4,0,5);a.F0V(5);var O=a.A0V(1,13,13);if(f=this.p1[F]+g*(h?_:P)*(r.flipped?V:O),m=this.stx.pixelFromValueAdjusted(i,this.p0[0],f),y=t.xIntersection({x0:n,x1:s,y0:o,y1:l},m),this.parameters.printLevels){e.textAlign="center",a.H0V(0);var I=a.G0V(40,30);v=Math.round(1e3*p.level)/I+"%",this.parameters.printValues&&("s","tx","_yaxis",e.fillStyle=d,this.stx.canvasFont("stx_yaxis",e)),e.fillText(v,s,Math.round(m-5))}e.textAlign="left",this.parameters.printValues&&y<i.width&&(x=f,x=r.priceFormatter?r.priceFormatter(this.stx,i,x):this.stx.formatYAxisPrice(x,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,x,m,d,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(b=p.color)||t.isTransparent(b))&&(b=this.color),("auto"==b||t.isTransparent(b))&&(b=this.stx.defaultColor),e.strokeStyle=this.highlight?u:b,("auto"==(C=p.color)||t.isTransparent(C))&&(C=this.fillColor),("auto"==C||t.isTransparent(C))&&(C=this.stx.defaultColor),e.fillStyle=C,e.globalAlpha=this.highlighted?1:p.parameters.opacity,e.lineWidth=p.parameters.lineWidth,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(e.lineWidth,p.parameters.pattern)),e.lineDashOffset=0),e.save(),e.beginPath(),a.H0V(4),e.scale(a.A0V(1,c),1),a.H0V(21),e.arc(a.A0V(c,s),l,Math.abs(m-l),0,Math.PI,!h),"none"!=this.pattern&&e.stroke(),e.globalAlpha=.05,e.fill(),e.restore(),e.setLineDash&&e.setLineDash([]),e.globalAlpha=1}e.textAlign="left",S=t.clone(this.parameters.trend.parameters),this.highlighted&&(S.opacity=1),a.F0V(58),this.stx.plotLine(s,a.G0V(2,s,n),l,a.G0V(2,l,o),u,"segment",e,i,S),this.highlighted&&("p","1",w="p0"==this.highlighted,k="p1"==this.highlighted,this.littleCircle(e,n,o,w),this.littleCircle(e,s,l,k))}},t.Drawing.fibfan=function(){this.name="fibfan"},t.inheritsFrom(t.Drawing.fibfan,t.Drawing.fibonacci),a.H0V(0),t.Drawing.fibfan.prototype.recommendedLevels=[0,a.G0V("0.382",0),.5,.618,1],t.Drawing.fibfan.prototype.setOuter=function(){},t.Drawing.fibfan.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_;if("mid","dle",(i=this.stx.panels[this.panelName])&&(r=i.yAxis,this.p1)){n=this.stx.pixelFromTick(this.p0[0],i.chart),s=this.stx.pixelFromTick(this.p1[0],i.chart),o=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),l=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),h=Math.min(l,o),c=Math.max(l,o),a.F0V(0),u=a.A0V(c,h),a.H0V(51),d=a.G0V(s,0,n,o,l),p=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),a.H0V(0);var P=a.A0V(190,180);g=e.measureText("161.8%").width+P,f=Number.MAX_VALUE,a.k8b(),a.F0V(63);var V=a.G0V(9,1,106,3,12);m=Number.MAX_VALUE*V,("auto"==(y=this.color)||t.isTransparent(y))&&(y=this.stx.defaultColor),this.rays=[];for(var O=0;O<this.parameters.fibs.length;O++)if("seg","men","t",e.fillStyle=y,(v=this.parameters.fibs[O]).display&&(x=this.stx.pixelFromValueAdjusted(i,this.p0[0],(this.p0[1]-this.p1[1])*v.level+this.p1[1]),b=t.xIntersection({x0:s,x1:s,y0:o,y1:l},x),C=i.left,s>n&&(C+=i.width),a.F0V(64),S=a.A0V(x,o,b,n,o,C,n),!(n>C-(this.parameters.printLevels?g+5:0)&&s>n||n<C+(this.parameters.printLevels?g+5:0)&&s<n))){if(this.parameters.printLevels){a.H0V(2);var I=a.G0V(111,889);a.F0V(65);var L=a.A0V(1,9,20,20);w=Math.round(v.level*I)/L+"%",s>n?(C-=g,e.textAlign="left"):(C+=g,e.textAlign="right"),this.parameters.printValues&&(e.fillStyle=y,this.stx.canvasFont("stx_yaxis",e)),a.H0V(64),S=a.G0V(x,o,b,n,o,C,n),e.fillText(w,C,S),s>n?C-=5:C+=5}e.textAlign="left",this.parameters.printValues&&b<i.width&&(k=this.stx.transformedPriceFromPixel(x,i),k=r.priceFormatter?r.priceFormatter(this.stx,i,k):this.stx.formatYAxisPrice(k,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,k,x,y,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(A=v.color)||t.isTransparent(A))&&(A=this.color),("auto"==A||t.isTransparent(A))&&(A=this.stx.defaultColor),("auto"==(D=v.color)||t.isTransparent(D))&&(D=this.fillColor),("auto"==D||t.isTransparent(D))&&(D=this.stx.defaultColor),e.fillStyle=D,this.parameters.printLevels&&(a.F0V(64),S=a.A0V(x,o,b,n,o,C,n)),M=t.clone(v.parameters),this.highlighted&&(M.opacity=1),this.stx.plotLine(n,C,o,S,this.highlighted?p:A,"segment",e,i,M),this.rays.push([[n,o],[C,S]]),e.globalAlpha=.05,e.beginPath(),e.moveTo(C,S),e.lineTo(n,o),e.lineTo(C,o),e.fill(),e.globalAlpha=1,x<f&&(f=x),x>m&&(m=x)}for(var H=0;H<=1;H++)T=d?c-u*H:h+u*H,(T=Math.round(T))<f&&(f=T),T>m&&(m=T);this.highlighted&&("p","1",F="p0"==this.highlighted,_="p1"==this.highlighted,this.littleCircle(e,n,o,F),this.littleCircle(e,s,l,_))}},t.Drawing.fibtimezone=function(){this.name="fibtimezone"},t.inheritsFrom(t.Drawing.fibtimezone,t.Drawing.fibonacci),t.Drawing.fibtimezone.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S;if("segm","ent","le","f","t","a","u","t","o","au","t","o",(i=this.stx.panels[this.panelName])&&this.p1){a.X8b(),r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),l=[1,0],h=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),20,c=this.p1[0]-this.p0[0],("auto"==(u=this.color)||t.isTransparent(u))&&(u=this.stx.defaultColor),e.textAlign="center",d=r,p=i.yAxis.top,g=i.yAxis.bottom,f=0,("auto"==(m=this.parameters.timezone.color)||t.isTransparent(m))&&(m=this.color),("auto"==m||t.isTransparent(m))&&(m=this.stx.defaultColor),("auto"==(y=this.parameters.timezone.color)||t.isTransparent(y))&&(y=this.fillColor),("auto"==y||t.isTransparent(y))&&(y=this.stx.defaultColor),this.parameters.printLevels&&(a.F0V(0),g-=a.G0V(20,7)),v=t.clone(this.parameters.timezone.parameters),this.highlighted&&(v.opacity=1);do{if(d=this.stx.pixelFromTick(this.p0[0]+f*c,i.chart),r<n&&d>i.left+i.width)break;if(r>n&&d<i.left)break;this.parameters.printLevels&&(e.fillStyle=u,e.fillText(n>r?f:-1*f,d,g+7)),e.fillStyle=y,this.stx.plotLine(d,d,0,g,this.highlighted?h:m,"segment",e,i,v),e.globalAlpha=.05,e.beginPath(),e.moveTo(r,p),e.lineTo(d,p),e.lineTo(d,g),e.lineTo(r,g),e.fill(),e.globalAlpha=1,a.H0V(11);var w=a.G0V(131,8,4,11);f=l[0]+l[w],l.unshift(f)}while(c);if(e.textAlign="left",this.stx.plotLine(r,n,s,o,h,"segment",e,i,v),this.highlighted){"p","0",x="p0"==this.highlighted,b="p1"==this.highlighted,-789037628,-1031440554,C=2;for(var k=1;-789037628!==a.H5O(k.toString(),k.toString().length,75177);k++)this.littleCircle(e,r,s,x),this.littleCircle(e,n,o,b),C+=2;-1031440554!==a.N5O(C.toString(),C.toString().length,11691)&&(this.littleCircle(e,r,s,x),this.littleCircle(e,n,o,b)),this.littleCircle(e,r,s,x),this.littleCircle(e,n,o,b)}else S=this.stx.valueFromPixel(i.height/2,i),this.setPoint(0,this.p0[0],S,i.chart),this.setPoint(1,this.p1[0],S,i.chart)}},t.Drawing.fibtimezone.prototype.intersected=function(e,i,r){var n,s,o,l;if(n=this.p0,s=this.p1,o=this.stx.panels[this.panelName],!n||!s||!o)return null;for(var h in l={0:n,1:s},a.X8b(),l)if(this.pointIntersection(l[h][0],l[h][1],r))return"d","r","a","g",a.H0V(2),this.highlighted=a.A0V("p",h),{action:"drag",point:"p"+h};return this.lineIntersection(e,i,r,"segment")||r.x0<=this.p0[0]&&r.x1>=n[0]?(this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:i}):null},t.Drawing.arrow_v0=function(){this.name="arrow",this.dimension=[11,11],a.X8b(),a.F0V(22),this.points=[["M",3,0,"L",7,0,"L",7,5,"L",a.G0V(10,"10"),5,"L",a.A0V(4,"5"),10,"L",0,5,"L",3,5,"L",3,0]]},t.inheritsFrom(t.Drawing.arrow_v0,t.Drawing.shape),t.Drawing.xcross=function(){a.k8b(),this.name="xcross",this.dimension=[7,7],a.F0V(15),this.points=[["M",1,a.G0V(193374912,"0"),"L",3,2,"L",5,0,"L",6,a.A0V("1",0,a.F0V(37)),"L",4,3,"L",6,5,"L",5,6,"L",3,a.A0V("4",0,a.H0V(37)),"L",a.A0V(1,"1",a.H0V(21)),6,"L",0,5,"L",2,3,"L",0,1,"L",1,0]]},t.inheritsFrom(t.Drawing.xcross,t.Drawing.shape),t.Drawing.check=function(){this.name="check",this.dimension=[8,9],a.F0V(22),a.k8b(),this.points=[["M",1,5,"L",0,6,"L",2,8,"L",a.A0V(6,"7"),1,"L",a.G0V(1,"6",a.F0V(21)),0,"L",2,6,"L",1,5]]},t.inheritsFrom(t.Drawing.check,t.Drawing.shape),t.Drawing.star=function(){this.name="star",this.dimension=[12,12],a.F0V(0),this.points=[["M",0,4,"L",4,4,"L",a.G0V("5.5",0),0,"L",7,4,"L",11,4,"L",8,a.G0V(4,"7",a.F0V(22)),"L",9,11,"L",5.5,9,"L",2,11,"L",3,7,"L",0,a.G0V("4",0,a.H0V(37))]]},t.inheritsFrom(t.Drawing.star,t.Drawing.shape),t.Drawing.heart=function(){a.X8b(),this.name="heart",this.dimension=[23,20],a.H0V(21),this.points=[["M",11,3,"B",11,2.4,10,0,6,0,"B",0,0,0,7.5,0,7.5,"B",0,11,4,a.G0V(1,"15.4"),11,19,"B",18,a.G0V(1,"15.4"),22,11,22,7.5,"B",22,a.A0V(1,"7.5"),22,0,16,0,"B",13,0,11,2.4,11,3]]},t.inheritsFrom(t.Drawing.heart,t.Drawing.shape),t.Drawing.focusarrow=function(){this.name="focusarrow",this.dimension=[7,5],a.H0V(22),a.X8b(),this.points=[["M",0,0,"L",2,2,"L",a.A0V(0,"0"),4,"L",0,0],["M",6,0,"L",4,2,"L",6,4,"L",6,0]]},t.inheritsFrom(t.Drawing.focusarrow,t.Drawing.shape),t.Drawing.crossline=function(){this.name="crossline"},t.inheritsFrom(t.Drawing.crossline,t.Drawing.horizontal),t.extend(t.Drawing.crossline.prototype,{measure:function(){},accidentalClick:function(e,t){return!1},adjust:function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.p1=t.clone(this.p0))},intersected:function(e,i,r){var n,s;if(!this.p0||!this.p1)return null;if(a.F0V(66),this.p1[0]+=a.A0V(2147483647,"1"),n=this.lineIntersection(e,i,r,"line"),this.p1=t.clone(this.p0),!n&&(this.p1[1]+=1,n=this.lineIntersection(e,i,r,"line"),this.p1=t.clone(this.p0),!n))return null;if(a.k8b(),this.highlighted=!0,this.pointIntersection(this.p0[0],this.p0[1],r)){-774112617,-1293161656,a.F0V(15),s=a.G0V(1378014496,"2");for(var o=1;-774112617!==a.N5O(o.toString(),o.toString().length,73033);o++)this.highlighted="",s+=2;-1293161656!==a.N5O(s.toString(),s.toString().length,7330)&&(this.highlighted="p0")}return{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}},render:function(e){var r,n,s,o,l,h,c,u,d,p,g,f,m,y;if(r=this.stx.panels[this.panelName]){if(n=this.stx.pixelFromTick(this.p0[0],r.chart),s=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1]),o=this.getLineColor(),l={pattern:this.pattern,lineWidth:this.lineWidth},a.F0V(2),this.stx.plotLine(n,a.A0V(n,100),s,s,o,"horizontal",e,r,l),a.F0V(2),this.stx.plotLine(n,n,s,a.A0V(s,100),o,"vertical",e,r,l),this.axisLabel&&!this.repositioner&&(this.stx.endClip(),h=this.p0[1],r.chart.transformFunc&&(h=r.chart.transformFunc(this.stx,r.chart,h)),h=r.yAxis.priceFormatter?r.yAxis.priceFormatter(this.stx,r,h):this.stx.formatYAxisPrice(h,r),this.stx.createYAxisLabel(r,h,s,o),this.stx.startClip(r.name),this.p0[0]>=0&&!this.stx.chart.xAxis.noDraw)){if(c=this.stx.dateFromTick(this.p0[0],r.chart,!0),t.ChartEngine.isDailyInterval(this.stx.layout.interval))a.F0V(21),c.setHours(0,0,0,a.A0V(1,"0"));else{a.F0V(58);var v=a.G0V(987,15779,17);d=c.getSeconds()*v+c.getMilliseconds(),i.Date&&this.stx.displayZone&&(u=new i.Date(c.getTime(),this.stx.displayZone),c=new Date(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours(),u.getMinutes()),c=new Date(c.getTime()+d))}if(p=t.mmddhhmm(t.yyyymmddhhmm(c)),r.chart.xAxis.formatter)p=r.chart.xAxis.formatter(c,this.name,null,null,p);else if(this.stx.internationalizer){0!==c.getHours()||0!==c.getMinutes()?(g=this.stx.internationalizer.monthDay.format(c),g+=" "+this.stx.internationalizer.hourMinute.format(c)):g=this.stx.internationalizer.yearMonthDay.format(c),-2117959431,a.F0V(66),f=a.G0V(2147483647,"45273009"),m=2;for(var x=1;-2117959431!==a.N5O(x.toString(),x.toString().length,58463);x++)p=g,m+=2;a.H5O(m.toString(),m.toString().length,37493)!==f&&(p=g)}this.stx.endClip(),this.stx.createXAxisLabel({panel:r,txt:p,x:n,backgroundColor:o,color:null,pointed:!0,padding:2}),this.stx.startClip(r.name)}this.highlighted&&("p","0",y="p0"==this.highlighted,this.littleCircle(e,n,s,y))}}},!0),t.Drawing.speedarc=function(){a.k8b(),this.name="speedarc",this.printLevels=!0},t.inheritsFrom(t.Drawing.speedarc,t.Drawing.segment),t.extend(t.Drawing.speedarc.prototype,{defaultOpacity:.25,configs:["color","fillColor","lineWidth","pattern"],copyConfig:function(){a.k8b(),this.color=this.stx.currentVectorParameters.currentColor,this.fillColor=this.stx.currentVectorParameters.fillColor,this.lineWidth=this.stx.currentVectorParameters.lineWidth,this.pattern=this.stx.currentVectorParameters.pattern},intersected:function(e,i,r){var n,s,o,l,h;if(a.k8b(),!this.p0||!this.p1)return null;for(var c in n={0:this.p0,1:this.p1})if(this.pointIntersection(n[c][0],n[c][1],r))return a.F0V(2),this.highlighted=a.A0V("p",c),{action:"drag",point:"p"+c};return this.lineIntersection(e,i,r,this.name)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):(s=this.p1[0]-(this.p0[0]-this.p1[0]),o=this.p0[0],l=this.p1[1],h=this.p0[1],e>Math.max(s,o)||e<Math.min(s,o)||i>Math.max(h,l)||i<Math.min(h,l)?null:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}))},render:function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v;if("l","e","f","t","st","x_yax","i","s","a","u","to",(i=this.stx.panels[this.panelName])&&this.p1){r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),a.F0V(59),l=a.G0V(o,s),a.F0V(60),h=Math.abs(a.A0V(n,s,r,o)),c=this.getLineColor(),e.strokeStyle=c,("auto"==(u=this.fillColor)||t.isTransparent(u))&&(u=this.stx.defaultColor),e.fillStyle=u,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(this.lineWidth,this.pattern)),e.lineDashOffset=0),this.stx.canvasFont("stx_yaxis",e);for(var x=1;x<3;x++){a.H0V(8);var b=a.G0V(0,6,7);a.F0V(67);var C=a.G0V(2,5,3,6,12);a.H0V(0);var S=a.G0V(5,3);a.F0V(30);var w=a.G0V(15,30,12);d=Math.abs(this.p1[b]-this.p0[C])*Math.sqrt(S)*x/w,a.H0V(30);var k=a.G0V(8,12,3);a.F0V(68);var A=a.G0V(20,5,0,24);a.F0V(8);var D=a.G0V(20,33,14);a.F0V(69);var M=a.A0V(16,9,125,2);p=this.p1[k]+d*(l?A:D)*(i.yAxis.flipped?M:1),g=this.stx.pixelFromValueAdjusted(i,this.p0[0],p),e.save(),e.beginPath(),a.F0V(70),e.scale(a.A0V("1",h),a.A0V("1",0,a.H0V(37))),a.F0V(21),e.arc(a.G0V(h,n),o,Math.abs(g-o),0,Math.PI,!l),e.globalAlpha=this.highlighted?1:this.defaultOpacity,"none"!=this.pattern&&e.stroke(),e.globalAlpha=.1,e.fill(),e.restore(),e.globalAlpha=1,this.printLevels&&(e.fillStyle=c,e.textAlign="center",a.F0V(2),f=a.A0V(x,"/3"),e.fillText(f,n,Math.round(g-5)),e.fillStyle=u)}e.textAlign="left",m={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},a.k8b(),this.stx.plotLine(r,n,s,o,c,"segment",e,i,m),e.setLineDash&&e.setLineDash([]),this.highlighted&&("p","0",y="p0"==this.highlighted,v="p1"==this.highlighted,this.littleCircle(e,r,s,y),this.littleCircle(e,n,o,v))}},reconstruct:function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.adjust()},serialize:function(){return a.X8b(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}}},!0),t.Drawing.speedline=function(){this.name="speedline",this.printLevels=!0},t.inheritsFrom(t.Drawing.speedline,t.Drawing.speedarc),t.extend(t.Drawing.speedline.prototype,{intersected:function(e,i,r){var n,s,o,l;if(a.k8b(),n=this.p0,s=this.p1,!n||!s)return null;for(var h in o={0:n,1:s})if(this.pointIntersection(o[h][0],o[h][1],r))return"d","ra","g",a.F0V(2),this.highlighted=a.G0V("p",h),{action:"drag",point:"p"+h};l=this.rays;for(var c=0;c<l.length;c++)if(this.lineIntersection(e,i,r,"ray",l[c][0],l[c][1],!0))return this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:i};return null},render:function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A;if("mi","dd","l","e","1","/","3","a","u","t","o","a","ut","o",(i=this.stx.panels[this.panelName])&&this.p1){r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),this.stx.canvasFont("stx_yaxis",e),l=this.getLineColor(),("auto"==(h=this.color)||t.isTransparent(h))&&(h=this.stx.defaultColor),e.strokeStyle=h,("auto"==(c=this.fillColor)||t.isTransparent(c))&&(c=this.stx.defaultColor),e.fillStyle=c,u={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},g=["1","2/3","1/3","3/2","3"],a.H0V(70),f=[1,a.G0V("2",3),a.A0V(541749216,"3",1,a.F0V(71)),a.A0V("2",3,a.F0V(72)),a.G0V(564682944,"3",a.H0V(25))],m=[],this.rays=[];for(var D=0;D<f.length;D++)(y=f[D])>1&&!this.extension||(v=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]-(this.p0[1]-this.p1[1])*y),y>1?(x=t.xIntersection({x0:r,x1:n,y0:s,y1:v},o),m.push(x)):(x=t.xIntersection({x0:n,x1:n,y0:s,y1:o},v),m.push(v)),b=y>1?x:n,C=y>1?o:v,this.confineToGrid||(b=i.left,n>r&&(b+=i.width),a.F0V(64),C=a.G0V(v,s,n,r,s,b,r)),this.printLevels&&(1!=y||this.extension)&&(e.fillStyle=h,S=0,w=0,s>o?(a.H0V(15),w=-a.G0V(489266976,"5"),e.textBaseline="bottom"):(w=5,e.textBaseline="top"),r>n?(S=5,e.textAlign="right"):(S=-5,e.textAlign="left"),y>1?e.fillText(g[D],x+(this.confineToGrid?0:S),o):e.fillText(g[D],n,v+(this.confineToGrid?0:w)),e.fillStyle=c),this.stx.plotLine(r,b,s,C,this.highlighted?l:h,"segment",e,i,u),1==y&&(d=b,p=C),this.rays.push([[r,s],[b,C]]),e.globalAlpha=.1,e.beginPath(),e.moveTo(b,C),e.lineTo(r,s),e.lineTo(d,p),e.fill(),e.globalAlpha=1);e.textAlign="left",e.textBaseline="middle",this.confineToGrid&&(e.globalAlpha=.3,e.beginPath(),a.F0V(0),e.strokeRect(r,s,a.G0V(n,r),a.G0V(o,s)),e.moveTo(r,m[1]),e.lineTo(n,m[1]),e.moveTo(r,m[2]),e.lineTo(n,m[2]),this.extension&&(e.moveTo(m[3],s),e.lineTo(m[3],o),e.moveTo(m[4],s),e.lineTo(m[4],o)),e.stroke(),e.globalAlpha=1),this.highlighted&&("p","1",k="p0"==this.highlighted,A="p1"==this.highlighted,this.littleCircle(e,r,s,k),this.littleCircle(e,n,o,A))}}},!0),t.Drawing.gannfan=function(){this.name="gannfan",this.printLevels=!0},t.inheritsFrom(t.Drawing.gannfan,t.Drawing.speedline),t.extend(t.Drawing.gannfan.prototype,{render:function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w;if("l","ef",a.k8b(),"t","au","to",(i=this.stx.panels[this.panelName])&&this.p1){r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),this.stx.canvasFont("stx_yaxis",e),l=this.getLineColor(),("auto"==(h=this.color)||t.isTransparent(h))&&(h=this.stx.defaultColor),e.strokeStyle=h,("auto"==(c=this.fillColor)||t.isTransparent(c))&&(c=this.stx.defaultColor),e.fillStyle=c,u={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},a.H0V(4),g=[1,2,3,4,8,a.A0V(1,2),a.G0V(1,3),a.G0V(1,4),a.A0V(1,8)],this.rays=[];for(var k=0;k<g.length;k++)"se","g","m","ent",f=g[k],a.F0V(73),m=a.G0V(r,f,n,r),a.H0V(74),y=a.A0V(s,f,s,o),v=i.left,n>r&&(v+=i.width),a.F0V(64),x=a.A0V(y,s,n,r,s,v,r),this.printLevels&&(e.fillStyle=h,b=0,C=0,s>o?(C=5,e.textBaseline="top"):(C=-5,e.textBaseline="bottom"),r>n?(b=5,e.textAlign="left"):(b=-5,e.textAlign="right"),f>1?("x","1",a.H0V(2),e.fillText(a.A0V(f,"x1"),a.G0V(m,b),o)):(a.H0V(75),e.fillText(a.G0V("1",f,"1x"),n,a.A0V(y,C,a.F0V(2)))),e.fillStyle=c),this.stx.plotLine(r,v,s,x,this.highlighted?l:h,"segment",e,i,u),this.rays.push([[r,s],[v,x]]),1==f&&(d=v,p=x),e.globalAlpha=.1,e.beginPath(),e.moveTo(v,x),e.lineTo(r,s),e.lineTo(d,p),e.fill(),e.globalAlpha=1;e.textAlign="left",e.textBaseline="middle",this.highlighted&&("p","1","p","0",S="p0"==this.highlighted,w="p1"==this.highlighted,this.littleCircle(e,r,s,S),this.littleCircle(e,n,o,w))}}},!0),t.Drawing.timecycle=function(){this.name="timecycle",a.k8b(),this.printLevels=!0},t.inheritsFrom(t.Drawing.timecycle,t.Drawing.speedarc),t.extend(t.Drawing.timecycle.prototype,{intersected:function(e,i,r){var n,s,o,l;if(n=this.p0,s=this.p1,o=this.stx.panels[this.panelName],!n||!s||!o)return null;for(var h in l={0:n,1:s})if(this.pointIntersection(l[h][0],l[h][1],r))return a.H0V(2),this.highlighted=a.A0V("p",h),{action:"drag",point:"p"+h};return a.k8b(),this.lineIntersection(e,i,r,"segment")||r.x0<=this.p0[0]&&r.x1>=n[0]?(this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:i}):null},render:function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C;if("a","u","t","o","a","u","t","o","stx","_y","axis",(i=this.stx.panels[this.panelName])&&this.p1){r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),l=0,h=this.getLineColor(),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),20,a.H0V(76);var S=a.G0V(17,1,15,30);c=this.p1["0"*S]-this.p0[0],e.textAlign="center",u=r,d=i.yAxis.top,p=i.yAxis.bottom,("auto"==(g=this.color)||t.isTransparent(g))&&(g=this.stx.defaultColor),("auto"==(f=this.fillColor)||t.isTransparent(f))&&(f=this.stx.defaultColor),this.printLevels&&(a.H0V(0),p-=a.A0V(20,7)),m={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},y=[],e.save(),e.fillStyle=f,a.X8b(),e.globalAlpha=.05;do{if(u=this.stx.pixelFromTick(this.p0[0]+l*c,i.chart),l++,r<n&&u>i.left+i.width)break;if(r>n&&u<i.left)break;u<i.left||u>i.left+i.width||(e.beginPath(),e.moveTo(r,d),e.lineTo(u,d),e.lineTo(u,p),e.lineTo(r,p),e.fill(),y.push({c:l,x:u}))}while(c);e.globalAlpha=1,v=0;for(var w=0;w<y.length;w++)"segm","ent",this.stx.plotLine(y[w].x,y[w].x,0,p,this.highlighted?h:g,"segment",e,i,m),this.printLevels&&(e.fillStyle=g,this.stx.chart.context.measureText(y[w].c).width+3<this.stx.layout.candleWidth+v?(e.fillText(y[w].c,y[w].x,p+7),v=0):v+=this.stx.layout.candleWidth);e.restore(),e.textAlign="left",this.stx.plotLine(r,n,s,o,h,"segment",e,i,m),this.highlighted?("p","0",x="p0"==this.highlighted,b="p1"==this.highlighted,this.littleCircle(e,r,s,x),this.littleCircle(e,n,o,b)):(C=this.stx.valueFromPixel(i.height/2,i),this.setPoint(0,this.p0[0],C,i.chart),this.setPoint(1,this.p1[0],C,i.chart))}}},!0),t.Drawing.regression=function(){a.X8b(),this.name="regression"},t.inheritsFrom(t.Drawing.regression,t.Drawing.segment),t.extend(t.Drawing.regression.prototype,{configs:["color","lineWidth","pattern","active1","color1","lineWidth1","pattern1","active2","color2","lineWidth2","pattern2","active3","color3","lineWidth3","pattern3"],copyConfig:function(e){var i;t.Drawing.copyConfig(this,e),i=this.stx.currentVectorParameters,this.active1=!!i.active1,this.active2=!!i.active2,this.active3=!!i.active3,this.color1=i.color1||"auto",this.color2=i.color2||"auto",this.color3=i.color3||"auto",this.lineWidth1=i.lineWidth1,this.lineWidth2=i.lineWidth2,this.lineWidth3=i.lineWidth3,this.pattern1=i.pattern1,this.pattern2=i.pattern2,this.pattern3=i.pattern3},$controls:['cq-cvp-controller[cq-cvp-header="1"]','cq-cvp-controller[cq-cvp-header="2"]','cq-cvp-controller[cq-cvp-header="3"]'],click:function(e,t,i){var a,r,n,s;if(!(t<0)){if(this.copyConfig(),a=this.stx.panels[this.panelName],!this.penDown){if(this.setPoint(0,t,i,a.chart),this.penDown=!0,r=this.stx,this.field=r.highlightedDataSetField,!this.field&&a!=r.chart.panel){for(var o in r.chart.seriesRenderers)if((n=r.chart.seriesRenderers[o]).params.panel==a.name){this.field=n.seriesParams[0].field;break}for(var l in r.layout.studies)if((s=r.layout.studies[l]).panel==a.name){this.field=Object.keys(s.outputMap)[0];break}}return!1}return this.accidentalClick(t,i)?this.dragToDraw:(this.setPoint(1,t,i,a.chart),this.penDown=!1,!0)}},getYValue:function(e){var i,r,n,s,o,l,h,c;if(i=this.stx.chart.dataSet[e],r=this.stx.chart.dataSet[e],!i)return null;if(n=this.stx.panels[this.panelName],s=this.stx.getYAxisByField(n,this.field)||n.yAxis,this.stx.charts[n.name]&&n.chart.transformFunc&&s==n.yAxis&&(r=i.transform),!r)return null;if(o=null,l=null,h=this.stx.defaultPlotField||"Close",this.field){if(!(l=t.existsInObjectChain(r,this.field)))return null;if(o=l=l.obj[l.member],i!=r&&(o=(o=t.existsInObjectChain(i,this.field)).obj[o.member]),"object"==Me(l)){1727043460,1554252700,a.H0V(0),c=a.A0V("2",0);for(var u=1;1727043460!==a.H5O(u.toString(),u.toString().length,92603);u++)l=l[h],c+=2;1554252700!==a.N5O(c.toString(),c.toString().length,38201)&&(l=l[h]),o=o[h]}}else l=r[h],o=i[h];return{transformed:l,untransformed:o}},render:function(e){var t,i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L;if("se","gm","e","nt",(t=this.stx.panels[this.panelName])&&this.p1&&!(this.p0[0]<0||this.p1[0]<0||(i=this.stx.pixelFromTick(this.p0[0],t.chart),r=this.stx.pixelFromTick(this.p1[0],t.chart),i<t.left&&r<t.left||i>t.right&&r>t.right))){n=this.stx.getYAxisByField(t,this.field),s=[],o=[],l=0,h=0,c=0,u=0,d=Math.min(this.p1[0],this.p0[0]),a.F0V(34);var H=a.G0V(15,15,0);p=Math.max(this.p1[0],this.p0[0])+H,a.H0V(0),g=a.A0V(p,d);for(var E=d;E<p;E++)(f=this.getYValue(E))&&(s.push(f.transformed),o.push(f.untransformed));for(m=s.length,a.H0V(77),y=a.A0V(0,m,"1","2",m),v=Math.pow(y,2),a.H0V(78),x=a.G0V(m,"1",3,2,y,534436608),E=0;E<m;E++)c+=m*s[E]-l,l+=s[E],u+=m*o[E]-h,h+=o[E];if(a.H0V(79),b=a.G0V(x,v,c,m,m,y,l),a.H0V(80),C=a.G0V(y,l,b,m),a.F0V(79),S=a.A0V(x,v,u,m,m,y,h),a.F0V(80),w=a.A0V(y,h,b,m),this.p0[0]<this.p1[0]?(k=C,a.F0V(81),A=a.A0V(g,b,C),this.p0[1]=w,a.F0V(81),this.p1[1]=a.A0V(g,S,w)):(a.F0V(81),k=a.A0V(g,b,C),A=C,a.F0V(81),this.p0[1]=a.A0V(g,S,w),this.p1[1]=w),D=this.stx.pixelFromTransformedValue(k,t,n),M=this.stx.pixelFromTransformedValue(A,t,n),T=this.getLineColor(),a.k8b(),F={pattern:this.pattern,lineWidth:this.lineWidth},this.stx.plotLine(i,r,D,M,T,"segment",e,t,F),a.H0V(82),this.stx.plotLine(i,i,a.A0V(D,"20"),a.G0V(D,20,a.H0V(2)),T,"segment",e,t,F),a.H0V(0),this.stx.plotLine(r,r,a.G0V(M,20),a.A0V("20",1325716192,M,a.H0V(83)),T,"segment",e,t,F),this.active1||this.active2||this.active3){for(a.F0V(4),_=a.A0V(l,m),P=0,E=0;E<m;E++)P+=Math.pow(s[E]-_,2);if(a.H0V(4),V={context:e,panel:t,points:{0:{x:i,v:k},1:{x:r,v:A}},stddev:Math.sqrt(a.G0V(P,m)),yAxis:n},this.lines={},this.active1){this.renderStddev("1","p",V),931090087,-1092442783,a.F0V(0),O=a.A0V("2",0);for(var N=1;931090087!==a.H5O(N.toString(),N.toString().length,71331);N++)this.renderStddev("1","1",V),O+=2;-1092442783!==a.H5O(O.toString(),O.toString().length,74452)&&this.renderStddev("1","1",V),this.renderStddev("1","n",V)}this.active2&&(this.renderStddev("2","p",V),this.renderStddev("2","n",V)),this.active3&&(this.renderStddev("3","p",V),this.renderStddev("3","n",V))}this.highlighted?(I="p0"==this.highlighted,L="p1"==this.highlighted,this.littleCircle(e,i,D,I),this.littleCircle(e,r,M,L)):(this.pixelX=[i,r],this.pixelY=[D,M])}},renderStddev:function(e,t,i){var r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w;a.H0V(84),r=a.A0V("stddev",t,e),a.F0V(2),n=a.G0V("color",e),a.H0V(2),s=a.G0V("pattern",e),a.H0V(2),o=a.A0V("lineWidth",e),h=(l=i.points)[0].v,c=l[1].v,u=i.stddev,d="n"===t?-1*e:1*e,p=this.stx,g=i.panel,f=i.yAxis,m={name:r,color:this.getLineColor(this[n]),type:"segment",y0:p.pixelFromTransformedValue(h+u*d,g,f),y1:p.pixelFromTransformedValue(c+u*d,g,f),params:{pattern:this[s],lineWidth:this[o]}},this.lines&&(this.lines[r]=m),y=i.context,v=l[0].x,x=l[1].x,p.plotLine(v,x,m.y0,m.y1,m.color,m.type,y,g,m.params),p.plotLine(v,v,m.y0-10,m.y0+10,m.color,m.type,y,g,m.params),p.plotLine(x,x,m.y1-10,m.y1+10,m.color,m.type,y,g,m.params),a.F0V(2),b=a.G0V(e,"σ"),C=Math.max(v,x)+5,S=v<x?m.y1:m.y0,y.fillStyle=m.color,y.save(),y.textBaseline="middle",y.fillText(b,C,S),a.k8b(),y.restore(),i.formatPrice&&this.axisLabel&&!this.highlighted&&!this.penDown&&(v>=g.chart.left&&v<=g.chart.right||x>=g.chart.left&&x<=g.chart.right)&&(a.H0V(18),w=a.G0V(u,d,v<x?c:h),p.endClip(),p.createYAxisLabel(g,i.formatPrice(w,f),S,m.color,null,y,f),p.startClip(g.name))},intersected:function(e,i,r){var n,s,o,l,h,c,u;if(a.k8b(),!this.pixelX||!this.pixelY)return null;if(n=this.repositionIntersection(e,i))return n;s={0:this.pixelX,1:this.pixelY};for(var d=0;d<2;d++)if(this.pointIntersection(s[0][d],s[1][d],r,!0))return a.F0V(2),this.highlighted=a.G0V("p",d),{action:"drag",point:"p"+d};if(o=this,l=this.pixelX[0],h=this.pixelX[1],!(u=(c=function(t){var n,s;return n=[l,t.y0],a.X8b(),s=[h,t.y1],o.lineIntersection(e,i,r,o.name,n,s,!0)})({y0:this.pixelY[0],y1:this.pixelY[1]}))&&this.lines)for(var p in this.lines)if(c(this.lines[p])){u=!0;break}return u?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null},repositionIntersection:function(e,i){return!(!this.p0||!this.p1)&&(!(this!=this.stx.repositioningDrawing||!this.highlighted)&&(!0===this.highlighted?("m","o","v","e",{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):{action:"drag",point:this.highlighted}))},lineIntersection:function(e,i,r,n,s,o,l){var h,c,u;return l?(s||(s=this.p0),o||(o=this.p1),!(!s||!o)&&(h=this.stx,c=t.convertBoxToPixels(h,this.panelName,r),a.k8b(),void 0!==c.x0&&(u={x0:s[0],x1:o[0],y0:s[1],y1:o[1]},t.boxIntersects(c.x0,c.y0,c.x1,c.y1,u.x0,u.y0,u.x1,u.y1)))):(" li","neIntersection must accept p0 and p1 in pixels.  Please verify and set isPixels=true.",a.F0V(2),console.log(a.A0V(n," lineIntersection must accept p0 and p1 in pixels.  Please verify and set isPixels=true.")),!1)},boxIntersection:function(e,t,i){return!(i.cx0>Math.max(this.pixelX[0],this.pixelX[1])||i.cx1<Math.min(this.pixelX[0],this.pixelX[1]))&&!(!this.stx.repositioningDrawing&&(i.cy1<this.pixelY[0]||i.cy0>this.pixelY[1]))},reconstruct:function(e,t){this.stx=e,this.color=t.col,this.color1=t.col1,this.color2=t.col2,this.color3=t.col3,this.active1=t.dev1,this.active2=t.dev2,this.active3=t.dev3,this.panelName=t.pnl,this.pattern=t.ptrn,this.pattern1=t.ptrn1,this.pattern2=t.ptrn2,this.pattern3=t.ptrn3,this.lineWidth=t.lw,a.X8b(),this.lineWidth1=t.lw1,this.lineWidth2=t.lw2,this.lineWidth3=t.lw3,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.field=t.fld,this.adjust()},serialize:function(){return a.k8b(),{name:this.name,pnl:this.panelName,dev1:this.active1,dev2:this.active2,dev3:this.active3,col:this.color,col1:this.color1,col2:this.color2,col3:this.color3,ptrn:this.pattern,ptrn1:this.pattern1,ptrn2:this.pattern2,ptrn3:this.pattern3,lw:this.lineWidth,lw1:this.lineWidth1,lw2:this.lineWidth2,lw3:this.lineWidth3,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),t.Drawing.trendline=function(){a.k8b(),this.name="trendline"},t.inheritsFrom(t.Drawing.trendline,t.Drawing.segment),t.Drawing.trendline.prototype.configs=["color","fillColor","lineWidth","pattern","font"],t.Drawing.trendline.prototype.measure=function(){},t.Drawing.trendline.prototype.reconstruct=function(e,i){t.Drawing.segment.prototype.reconstruct.call(this,e,i),this.callout=new t.Drawing.callout,this.callout.reconstruct(e,i.callout)},t.Drawing.trendline.prototype.serialize=function(){var e;return e=t.Drawing.segment.prototype.serialize.call(this),a.k8b(),e.callout=this.callout.serialize(),e},t.Drawing.trendline.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S;if(" ","Ba","r","s",(i=this.stx.panels[this.panelName])&&(t.Drawing.segment.prototype.render.call(this,e),this.callout||(this.callout=new t.Drawing.callout,r=t.Drawing.segment.prototype.serialize.call(this),this.callout.reconstruct(this.stx,r)),this.callout.p0=t.clone(this.p0),n=this.stx.pixelFromTick(this.p0[0],i.chart),s=this.stx.pixelFromTick(this.p1[0],i.chart),o=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),l=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),isFinite(o)&&isFinite(l))){a.H0V(10),h=a.G0V(2,s,n),a.F0V(10),c=a.A0V(2,l,o),this.fontSize=t.stripPX(this.font&&this.font.size||13),a.H0V(85);var w=a.A0V(41,6,44,41);u=1.2*this.callout.w+("c"==this.callout.stemEntry[0]?0:w),d=Math.sqrt(Math.pow(s-n,2)+Math.pow(l-o,2)),a.H0V(5);var k=a.G0V(16,0,15);a.F0V(5);var A=a.G0V(7,0,6);a.H0V(0);var D=a.G0V(0,1);p=u/(d||u)*(this.p1[k]<this.p0[1]?A:D),a.F0V(86),g=a.A0V(h,l,c,p),a.H0V(69),f=a.A0V(h,p,c,s),this.callout.p0[0]=this.stx.tickFromPixel(g,i.chart),this.callout.p0[1]=this.stx.priceFromPixel(f,i),a.F0V(25),this.callout.v0=this.callout.p0[a.A0V(1478237024,"1")],this.callout.p1=t.clone(this.p0),this.callout.stx=this.stx,this.callout.fillColor=this.fillColor||this.callout.fillColor,this.callout.borderColor=this.color,this.callout.font=this.font||this.callout.font,this.callout.noHandles=!0,a.H0V(17);var M=a.G0V(12,4,19,6,8);m=this.p1[M]-this.p0[1],a.F0V(65);var T=a.G0V(9,1,18,2);a.F0V(5);var F=a.A0V(3,0,2);a.F0V(5),a.X8b();var _=a.A0V(5,0,3);this.callout.text=Number(m).toFixed(T)+(0===this.p0[F]?"":" ("+Number(100*m/this.p0[1]).toFixed(_)+"%) ")+Math.abs(this.p1[0]-this.p0[0])+" Bars",y=Math.floor((this.p0[0]+this.p1[0])/2),Math.abs(this.p0[0]-this.p1[0])>1&&Math.abs(this.p0[0]-this.p1[0])<20?(x=this.stx.pixelFromTick(y,i.chart),a.H0V(87),b=a.G0V(o,x,l,o,n,n,s),v=this.stx.priceFromPixel(b,i)||c):v=this.stx.priceFromPixel(c,i),this.callout.stem={t:y,v:v},this.callout.renderText(),this.callout.render(e),this.highlighted&&("p","0",C="p0"==this.highlighted,S="p1"==this.highlighted,this.littleCircle(e,n,o,C),this.littleCircle(e,s,l,S))}},t.Drawing.trendline.prototype.lineIntersection=function(e,i,a,r){return t.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,e,i,a,"segment")},t.Drawing.trendline.prototype.intersected=function(e,i,a){var r,n;return this.p0&&this.p1?(r=this.callout.intersected(e,i,a),n=t.Drawing.segment.prototype.intersected.call(this,e,i,a),this.callout.highlighted=!(!r&&!n),n||(r?("m","ov","e",{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null)):null},t.Drawing.average=function(){this.name="average"},t.inheritsFrom(t.Drawing.average,t.Drawing.regression),t.extend(t.Drawing.average.prototype,{configs:t.Drawing.regression.prototype.configs.concat("axisLabel"),measure:function(){var e,i,r,n,s,o;a.X8b(),this.p0&&this.p1&&(this.stx.setMeasure(0,!1,this.p0[0],this.p1[0],!0,this.name),e=[],i="",this.active1&&e.push("1"),this.active2&&e.push("2"),this.active3&&e.push("3"),e.length&&(i="&ensp;"+e.join(", ")+" &sigma;"),r=(this.stx.drawingContainer||document).querySelector(".mMeasure"),s=(n=this.stx.controls.mSticky)&&n.querySelector(".mStickyInterior"),r&&(r.innerHTML+=i),s&&((o=[]).push(t.capitalize(this.name)),o.push(this.field||this.stx.defaultPlotField||"Close"),o.push(s.innerHTML+i),s.innerHTML=o.join("<br>")))},render:function(e){var t,i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k;if("s","egment",(t=this.stx.panels[this.panelName])&&this.p1&&!(this.p0[0]<0||this.p1[0]<0||(i=this.stx.pixelFromTick(this.p0[0],t.chart),r=this.stx.pixelFromTick(this.p1[0],t.chart),i<t.left&&r<t.left||i>t.right&&r>t.right))){n=this.stx.getYAxisByField(t,this.field),s=this.stx,o=Math.min(this.p1[0],this.p0[0]),a.H0V(40);var A=a.A0V(7,102,19,12);for(l=Math.max(this.p1[0],this.p0[0])+A,a.H0V(0),a.G0V(l,o),h=0,c=[],u=o;u<l;u++)null!==(d=this.getYValue(u))&&(h+=d.transformed,c.push(d));if(p=c.length){if(a.F0V(4),g=a.G0V(h,p),f=s.pixelFromTransformedValue(g,t,n),m=this.getLineColor(),y={pattern:this.pattern,lineWidth:this.lineWidth},s.plotLine(i,r,f,f,m,"segment",e,t,y),a.H0V(0),s.plotLine(i,i,a.G0V(f,20),a.G0V(f,20,a.F0V(2)),m,"segment",e,t,y),a.H0V(0),s.plotLine(r,r,a.G0V(f,20),a.A0V(f,20,a.F0V(2)),m,"segment",e,t,y),!this.axisLabel||this.highlighted||this.penDown||(i>=t.chart.left&&i<=t.chart.right||r>=t.chart.left&&r<=t.chart.right)&&(s.endClip(),s.createYAxisLabel(t,M(g,n),f,m,null,e,n),s.startClip(t.name)),this.active1||this.active2||this.active3){for(v=0,u=0;u<p;u++)d=c[u],v+=Math.pow(d.transformed-g,2);a.H0V(4),x=Math.sqrt(a.A0V(v,p)),b={context:e,formatPrice:M,panel:t,points:{0:{x:i,v:g},1:{x:r,v:g}},stddev:x,yAxis:n},this.lines={},this.active1&&(this.renderStddev("1","p",b),this.renderStddev("1","n",b)),this.active2&&(this.renderStddev("2","p",b),this.renderStddev("2","n",b)),this.active3&&(this.renderStddev("3","p",b),this.renderStddev("3","n",b))}if(this.highlighted)w="p0"==this.highlighted,k="p1"==this.highlighted,this.littleCircle(e,i,f,w),this.littleCircle(e,r,f,k);else{this.pixelX=[i,r],a.H0V(22),C=a.G0V(979899409,"988288063"),-1107069610,S=2;for(var D=1;a.N5O(D.toString(),D.toString().length,48463)!==C;D++)this.pixelY=[f,f],S+=2;-1107069610!==a.H5O(S.toString(),S.toString().length,90538)&&(this.pixelY=[f,f]),this.pixelY=[f,f]}}}function M(e,i){var r;r=2;for(var n=1;-875081010!==a.H5O(n.toString(),n.toString().length,78279);n++)e=i||i.priceFormatter?i.priceFormatter(s,t,e):s.formatYAxisPrice(e,t,1,i),r+=2;return-1412223179!==a.N5O(r.toString(),r.toString().length,52610)&&(e=i&&i.priceFormatter?i.priceFormatter(s,t,e):s.formatYAxisPrice(e,t,7,i)),e=i&&i.priceFormatter?i.priceFormatter(s,t,e):s.formatYAxisPrice(e,t,null,i)}},reconstruct:function(e,i){a.X8b(),this.axisLabel=i.al,t.Drawing.regression.prototype.reconstruct.call(this,e,i)},serialize:function(){var e;return a.k8b(),(e=t.Drawing.regression.prototype.serialize.call(this)).al=this.axisLabel,e}},!0),t.Drawing.quadrant=function(){this.name="quadrant"},t.inheritsFrom(t.Drawing.quadrant,t.Drawing.regression),t.extend(t.Drawing.quadrant.prototype,{configs:["color","fillColor","lineWidth","pattern"],copyConfig:function(){this.color=this.stx.currentVectorParameters.currentColor,this.fillColor=this.stx.currentVectorParameters.fillColor,a.X8b(),this.lineWidth=this.stx.currentVectorParameters.lineWidth,this.pattern=this.stx.currentVectorParameters.pattern},$controls:[],render:function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w;if("segm","en","t",a.k8b(),(r=(i=this.stx).panels[this.panelName])&&this.p1&&(n=i.pixelFromTick(this.p0[0],r.chart),s=i.pixelFromTick(this.p1[0],r.chart),!(n<r.left&&s<r.left||n>r.right&&s>r.right))){o=this.stx.getYAxisByField(r,this.field),l=null,h=null;for(var k=Math.min(this.p1[0],this.p0[0]);k<=Math.max(this.p1[0],this.p0[0]);k++)null!==(c=this.getYValue(k))&&((null===l||c.transformed>l)&&(l=c.transformed),(null===h||c.transformed<h)&&(h=c.transformed));u=i.pixelFromTransformedValue(l,r,o),a.F0V(88),d=i.pixelFromTransformedValue(a.G0V(h,4,l,3),r,o),a.H0V(88),p=i.pixelFromTransformedValue(a.A0V(h,3,l,2),r,o),a.F0V(10),g=i.pixelFromTransformedValue(a.G0V(2,h,l),r,o),a.H0V(89),f=i.pixelFromTransformedValue(a.A0V(h,"3",2,l),r,o),a.F0V(90),m=i.pixelFromTransformedValue(a.G0V(h,4,3,l),r,o),y=i.pixelFromTransformedValue(h,r,o),this.p0[1]=0,this.p1[1]=!1,v=this.getLineColor(),("auto"==(x=this.fillColor)||t.isTransparent(x))&&(x=i.defaultColor),e.fillStyle=x,b={pattern:this.pattern,lineWidth:this.lineWidth},i.plotLine(n,s,u,u,v,"segment",e,r,b),i.plotLine(n,s,y,y,v,"segment",e,r,b),"quadrant"==this.name?(i.plotLine(n,s,d,d,v,"segment",e,r,b),i.plotLine(n,s,m,m,v,"segment",e,r,b)):"tirone"==this.name&&("segm","ent",i.plotLine(n,s,p,p,v,"segment",e,r,b),i.plotLine(n,s,f,f,v,"segment",e,r,b)),i.plotLine(n,n,u,y,v,"segment",e,r,b),i.plotLine(s,s,u,y,v,"segment",e,r,b),i.plotLine(n,s,g,g,v,"segment",e,r,t.extend(b,{opacity:"tirone"==this.name?.2:1})),e.globalAlpha=.1,-566951871,1921935446,C=2;for(var A=1;-566951871!==a.H5O(A.toString(),A.toString().length,8204);A++)e.beginPath(),C+=2;1921935446!==a.H5O(C.toString(),C.toString().length,89715)&&e.beginPath(),a.F0V(0),e.fillRect(n,u,a.G0V(s,n),a.A0V(y,u)),"quadrant"==this.name?(a.F0V(0),e.fillRect(n,d,a.G0V(s,n),a.A0V(m,d))):"tirone"==this.name&&(a.H0V(0),e.fillRect(n,p,a.G0V(s,n),a.G0V(f,p))),e.globalAlpha=1,this.highlighted?(S="p0"==this.highlighted,w="p1"==this.highlighted,this.littleCircle(e,n,g,S),this.littleCircle(e,s,g,w)):("tir","one","q","uadrant",this.pixelX=[n,s],this.pixelY=[u,y,g],"quadrant"===this.name&&this.pixelY.push(d,m),"tirone"===this.name&&this.pixelY.push(p,f))}},intersected:function(e,i,r){var n,s,o=this,l=this.pixelX,h=this.pixelY;if(!l||!h)return null;if(n=this.repositionIntersection(e,i))return n;for(var c=0;c<2;c++)if(this.pointIntersection(l[c],h[2],r,!0))return a.H0V(2),this.highlighted=a.G0V("p",c),{action:"drag",point:"p"+c};return s=[],l.forEach((function(e){var t;t=2;for(var i=1;-186456103!==a.N5O(i.toString(),i.toString().length,23408);i++)s.push({p0:[e,h[6]],p1:[e,h[0]]}),t+=2;938811121!==a.N5O(t.toString(),t.toString().length,54829)&&s.push({p0:[e,h[0]],p1:[e,h[1]]})})),h.forEach((function(e){a.k8b(),s.push({p0:[l[0],e],p1:[l[1],e]})})),s.some((function(t){var a=t.p0,n=t.p1;return o.lineIntersection(e,i,r,o.name,a,n,!0)}))?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):(a.X8b(),null)},reconstruct:function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.field=t.fld,this.adjust()},serialize:function(){return a.X8b(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),t.Drawing.tirone=function(){a.k8b(),this.name="tirone"},t.inheritsFrom(t.Drawing.tirone,t.Drawing.quadrant),t.Drawing.elliottwave=function(){a.k8b(),this.name="elliottwave",this.lastPoint=0,this.points=[],this.pts=[],this.dx=0,a.H0V(22),this.dy=-a.A0V(4,"20"),this.dragToDraw=!1,this.annotationPoints=[],this.edit=null},t.inheritsFrom(t.Drawing.elliottwave,t.Drawing.annotation),t.Drawing.elliottwave.defaultTemplate={impulse:["I","II","III","IV","V"],corrective:["A","B","C"],decoration:"enclosed",showLines:!0},t.Drawing.elliottwave.prototype.initializeSettings=function(e){e.currentVectorParameters.waveParameters=t.clone(t.Drawing.elliottwave.defaultTemplate)},t.Drawing.elliottwave.prototype.configs=["color","lineWidth","lineColor","pattern","font","waveParameters"],t.Drawing.elliottwave.prototype.$controls=["br[cq-wave-parameters]","cq-wave-parameters"],t.Drawing.elliottwave.prototype.construct=function(e,t){var i;this.stx=e,this.panelName=t.name,i=e.currentVectorParameters,Object.assign(this,i.waveParameters)},t.Drawing.elliottwave.prototype.serialize=function(){var e;e={};for(var i=0;i<this.points.length;i++)a.F0V(2),e[a.A0V("d",i)]=this[a.G0V("d",i)],a.F0V(2),e[a.G0V("tzo",i)]=this[a.G0V("tzo",i)],a.H0V(2),e[a.A0V("v",i)]=this[a.G0V("v",i)];return e.annotations=this.annotationPoints.join(","),Object.assign({name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,mxSeg:this.maxSegments,show:this.showLines,decor:this.decoration,dx:this.dx,dy:this.dy,trend:this.trend,fnt:t.removeNullValues(t.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"}))},e)},t.Drawing.elliottwave.prototype.reconstruct=function(e,i){a.k8b(),this.stx=e,this.color=i.col,this.panelName=i.pnl,this.pattern=i.ptrn,this.lineWidth=i.lw,this.font=t.replaceFields(i.fnt,{st:"style",sz:"size",wt:"weight",fl:"family"}),this.decoration=i.decor,this.showLines=i.show,this.dx=i.dx,this.dy=i.dy,this.trend=i.trend,this.annotationPoints=i.annotations.split(","),"enclosed"===i.decor&&this.calculateRadius(e.chart.tempCanvas.context),this.maxSegments=i.mxSeg,this.reconstructPoints(i),this.adjust()},t.Drawing.elliottwave.prototype.reconstructPoints=function(e){var i,r,n;if(a.k8b(),i=this.stx.panels[this.panelName])for(var s=0;s<this.annotationPoints.length;s++)"t","z","o",a.F0V(2),this[a.A0V("d",s)]=e[a.G0V("d",s)],a.F0V(2),this[a.G0V("v",s)]=e[a.G0V("v",s)],a.H0V(2),this[a.A0V("tzo",s)]=e[a.A0V("tzo",s)],r=t.strToDateTime(e["d"+s]),n=this.stx.tickFromDate(r,i.chart),this.points.push([n,e["v"+s]])},t.Drawing.elliottwave.prototype.calculateRadius=function(e){var t,i;this.getFontString(),e.font=this.fontString,t=0;for(var a=0;a<this.annotationPoints.length;a++)t<(i=e.measureText(this.annotationPoints[a]).width)&&(t=i);this.enclosedRadius=t},t.Drawing.elliottwave.prototype.check=function(e,t,i){var r,n,s;a.F0V(22),r=a.A0V(2,"2");for(var o=1;498055254!==a.H5O(o.toString(),o.toString().length,80328);o++){if(1===i&&2===this.points.length)return!0;r+=2}if(-785023093!==a.H5O(r.toString(),r.toString().length,72708)&&(2!==i||1!=this.points.length))return!1;return a.F0V(0),!((n=this.points[a.G0V(i,1)])&&e<=n[0])&&(a.H0V(2),!((s=this.points[a.G0V(i,1)])&&e>=s[0])&&!!function(e){for(var t=2;t<e.length;t++)if(Math.sign(e[t][1]-e[t-1][1])==Math.sign(e[t-1][1]-e[t-2][1]))return!1;return!0}(this.points))},t.Drawing.elliottwave.prototype.move=function(e,t,i){this.copyConfig(),a.H0V(91),a.X8b();var r=a.G0V(0,10,7,11,39);this.points[this.lastPoint+r]=[t,i],this.render(e)},t.Drawing.elliottwave.prototype.adjust=function(){var e,i,r;e=this.stx.panels[this.panelName],i=2;for(var n=1;1045934491!==a.H5O(n.toString(),n.toString().length,55295);n++){if(!e)return;i+=2}if(-1808697640===a.N5O(i.toString(),i.toString().length,90115)||!~e)for(var s=0;this.maxSegments+1>s;s++)a.F0V(2),r=this[a.G0V("d",s)],this.setPoint(s,r,this["v"+s],e.chart),this.points[s][0]=this.stx.tickFromDate(t.strToDateTime(r),e.chart),a.H0V(2),this.points[s][1]=this[a.G0V("v",s)]},t.Drawing.elliottwave.prototype.click=function(e,t,i){var r;if(r=this.stx.panels[this.panelName]){if(this.copyConfig(),a.k8b(),!this.penDown){"e","nc","los","ed",this.setPoint(0,t,i,r.chart),this.points.push(this.p0),this.penDown=!0,this.segment=0,this.lastPoint=0,this.impulse&&(this.annotationPoints=this.annotationPoints.concat(this.impulse)),this.corrective&&(this.annotationPoints=this.annotationPoints.concat(this.corrective)),this.annotationPoints.unshift("0"),"enclosed"===this.decoration&&this.calculateRadius(e),a.H0V(0);var n=a.G0V(2,1);return this.maxSegments=this.annotationPoints.length-n,this.trend=1,!1}return this.accidentalClick(t,i)?(this.penDown=!0,!1):!!(this.check(t,i,this.lastPoint+1)&&(this.lastPoint++,this.setPoint(this.lastPoint,t,i,r.chart),1===this.lastPoint&&(this.trend=Math.sign(this.v1-this.v0)),this.segment++,this.segment>=this.maxSegments))&&(this.penDown=!1,!0)}},t.Drawing.elliottwave.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T;if("m","id","d","le",i=this.stx.panels[this.panelName]){if(r=this.stx,n=this.annotationPoints,s=this.pattern?t.borderPatternToArray(this.lineWidth,this.pattern):[],this.getFontString(),e.font=this.fontString,e.textAlign="center",e.textBaseline="middle",e.lineWidth=this.lineWidth,this.fontString!==this.lastFontString&&this.calculateRadius(e),this.lastFontString=this.fontString,o=this.getLineColor(),e.fillStyle=e.strokeStyle=o,e.save(),e.setLineDash(s),l=this.dx,h=this.dy,c=this.points,u=this.pts,d=!this.showLines&&this.highlighted,p=c.length,this.penDown&&this.segment){a.F0V(52);var F=a.A0V(5,1,5);g=this.trend*(p%F-.5)<0,i.yAxis.flipped&&(g=!g),this.drawDropZone(e,c[p-2][1],this.stx.priceFromPixel(i.yAxis[g?"top":"bottom"]),c[p-2][0])}else if("string"==typeof this.highlighted&&this.stx.repositioningDrawing){"m","i","n",f=parseInt(this.highlighted.substring(1,this.highlighted.length),10),a.H0V(92);var _=a.A0V(8,19,13,1);g=this.trend*(f%_-.5)>0,a.F0V(82),m=c[a.A0V(f,"1")],a.F0V(2),y=c[a.A0V(f,1)],v=f>0?m[1]:y[1],y&&(v=Math[g?"max":"min"](v,y[1])),i.yAxis.flipped&&(g=!g),this.drawDropZone(e,v,this.stx.priceFromPixel(i.yAxis[g?"top":"bottom"]),m?m[0]:null,y?y[0]:null)}for(var P=0;P<p;P++)x=c[P],b=r.pixelFromTick(x[0],i.chart),C=r.pixelFromValueAdjusted(i,x[0],x[1]),u[P]=[b,C];if(P=0,this.showLines||d){for(e.beginPath(),d&&(e.globalAlpha=.3);P<u.length;P++)e.lineTo(u[P][0],u[P][1]);e.stroke(),P=0}for(e.restore();P<p;P++){"pa","renthe","se","s",S=P%2?l:-l,w=P%2?h:-h,S*=this.trend,w*=this.trend,i.yAxis.flipped&&(S*=-1,w*=-1),A=(k=u[P])[2]=k[0]+S,a.F0V(50);var V=a.A0V(19,9,15,2564);D=k[3]=k[V]+w,M=this.enclosedRadius||8,T=n[P],"parentheses"===this.decoration&&(a.F0V(84),T=a.G0V("(",")",T)),e.fillText(T,A,D),"enclosed"===this.decoration&&(e.beginPath(),e.arc(A,D,M,0,2*Math.PI,!1),e.stroke()),this.highlighted&&(e.save(),this.littleCircle(e,this.pts[P][0],this.pts[P][1],this.highlighted==="p"+P),e.restore())}}},t.Drawing.elliottwave.prototype.reposition=function(e,t,i,r){var n,s,o,l,h;if("d","r","a","g",t){if(n=this.stx.panels[this.panelName],a.k8b(),s=t.tick-i,o=t.value-r,"move"===t.action)for(var c=0;t.points.length>c;c++){l=t.points[c],this.setPoint(c,l[0]-s,l[1]-o,n.chart),a.H0V(93);var u=a.A0V(11,5,11,18,8);this.points[c]=[l[0]-s,l[u]-o]}"drag"===t.action&&(h=t.point,this.points[h]=[i,r],this.check(i,r,h)&&this.setPoint(h,i,r,n.chart)),this.render(e)}},t.Drawing.elliottwave.prototype.intersected=function(e,i,r){var n,s;if(!this.p0||!this.p1)return null;for(var o=0;this.points.length>o;o++){if("s","eg","ment",s=this.points[o],this.pointIntersection(s[0],s[1],r))return a.F0V(2),this.highlighted=a.G0V("p",o),{action:"drag",point:o,tick:e,value:i};this.points[o+1]&&this.lineIntersection(e,i,r,"segment",s,this.points[o+1])&&(this.highlighted=!0,n={action:"move",points:t.clone(this.points),tick:e,value:i})}return n},t.Drawing.elliottwave.prototype.measure=function(){var e,i,r,n,s,o,l;if(a.k8b(),this.points.length>=2){".mSt","ickyInterior",e=this.points,this.stx.setMeasure(e[0][1],e[e.length-1][1],e[0][0],e[e.length-1][0],!0),a.F0V(15),i=-a.G0V(1732375168,"1656971423"),a.H0V(21),r=-a.G0V(1,"273262554"),n=2;for(var h=1;a.N5O(h.toString(),h.toString().length,79648)!==i;h++)o=(s=this.stx.controls.mSticky)||s.querySelector(""),n+=2;a.H5O(n.toString(),n.toString().length,89789)!==r&&(o=(s=this.stx.controls.mSticky)&&s.querySelector("")),(o=(s=this.stx.controls.mSticky)&&s.querySelector(".mStickyInterior"))&&("<","b","r",">",(l=[]).push(t.capitalize("Elliott Wave")),this.getYValue&&l.push(this.field||this.stx.defaultPlotField||"Close"),l.push(o.innerHTML),o.innerHTML=l.join("<br>"))}},t.Drawing.printProjection=function(e,i,r){var n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b;if(a.k8b(),(n=i.arr).length>1){s=n[0][0],o=Math.round(.75*e.chart.maxTicks);for(var C=1;C<n.length;C++){for(a.F0V(0),l=n[a.G0V(C,1)][0],h=n[C][0],c=t.strToDateTime(l),u=t.strToDateTime(h).getTime(),d=e.standardMarketIterator(c),p=0;c.getTime()<u;)c=d.next(),p+=1;if((g=t.strToDateTime(l).getTime())>t.strToDateTime(r[r.length-1].Date).getTime()){a.F0V(23);var S=a.G0V(1,3,2);f=r.length-S,a.F0V(66),p+=a.G0V(2147483647,"1")}else for(f=r.length-1;f>=0&&!(g<=t.strToDateTime(r[f].Date).getTime());f--);m={x0:0,x1:p,y0:r[f].Close,y1:n[C][1]},s=t.strToDateTime(l),d=e.standardMarketIterator(s),y=!1;for(var w=0;w<=p;w++)if(y?s=d.next():y=!0,!(s.getTime()<=r[r.length-1].DT.getTime())){(v=t.yIntersection(m,w))||(v=0),a.H0V(52);var k=a.G0V(9993,6669,3);a.F0V(2);var A=a.G0V(9985,15);if(0===(x=Math.round(v*k)/A)&&(x=n[C][1]),b={Date:t.yyyymmddhhmmssmmm(s),DT:s,Open:x,Close:x,High:x,Low:x,Volume:0,Adj_Close:x,Split_Close:x,projection:!0},"minute"==e.layout.interval&&o--<0)break;r[r.length]=b}}}}):console.error("drawingAdvanced feature requires first activating drawing feature.")},o=function(e){var t;Te.k8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).computeEquationChart?(t.formatEquation=function(e){var t,i,a,r,n,s=Te;t="",i=[],a="",r=!1;for(var o=1;o<e.length;o++)"["!=(n=e[o].toUpperCase())||r?"]"==n&&r?(r=!1,""!==a&&(i.push(a),s.F0V(84),t+=s.G0V("[","]",a)),a=""):r?a+=n:"+"==n||"-"==n||"*"==n||"/"==n||":"==n||"%"==n||"("==n||")"==n?(""!==a&&isNaN(a)?(i.push(a),s.F0V(84),t+=s.A0V("[","]",a)):t+=a,":"==n&&(n="/"),t+=n,a=""):" "!=n&&(a+=n):r=!0;return""!==a&&isNaN(a)?(i.push(a),s.F0V(84),t+=s.A0V("[","]",a)):t+=a,{equation:t,symbols:i}},t.fetchEquationChart=function(e,i){var a,r,n,s,o;r=(a=t.formatEquation(e.symbol)).symbols,n=[],s=e.stx,e.stx=null;for(var l=0;l<r.length;l++)(o=t.shallowClone(e)).stx=s,o.symbol=r[l],o.symbolObject={symbol:r[l]},n.push(o);e.stx=s,s.quoteDriver.multiFetch(n,(function(r){var s,o,l,h,c;Te.k8b(),s={},e.loadMoreReplace=!0,o={charge:0};for(var u=0;u<r.length;u++){if((l=r[u]).dataCallback.error)return void i({error:l.dataCallback.error});s[l.params.symbol]=l.dataCallback.quotes,e.loadMoreReplace=e.loadMoreReplace&&l.params.loadMoreReplace,e.moreToLoad=e.moreToLoad||l.dataCallback.moreAvailable,(h=l.dataCallback.attribution)&&(h.charge&&(o.charge+=h.charge),o.source=h.source,void 0===o.exchange?o.exchange=h.exchange:o.exchange!=h.exchange&&(o.exchange=""))}if(n.length||!e.loadMore&&!e.update)try{c=t.computeEquationChart(a.equation,s),i({quotes:c,moreAvailable:e.moreToLoad,attribution:o})}catch(e){var d;"In","valid equ","ati","on: ",d={error:"Invalid equation: "+a.equation},e.name&&"NoException"==e.name&&(d.suppressAlert=!0),i(d)}}))}):console.error("equationsAdvanced feature requires first activating equations feature.")},l=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Marker?t.Marker.Performance||(t.ChartEngine.prototype.removeDOMMarker=function(e){console.warn("CIQ.ChartEngine#removeDOMMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance#remove instead."),t.Marker.Performance.prototype.removeDOMMarker.call(e.params.node,e)},t.ChartEngine.prototype.drawMarkers=function(){Te.k8b(),console.warn("CIQ.ChartEngine#drawMarkers is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkers instead."),t.Marker.Performance.drawMarkers(this)},t.ChartEngine.prototype.calculateMarkerStyles=function(e,i){console.warn("CIQ.ChartEngine#calculateMarkerStyles is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.calculateStyles instead."),Te.k8b(),t.Marker.Performance.calculateMarkerStyles(this,e,i)},t.ChartEngine.prototype.drawCircleMarker=function(e,i,a){var r;console.warn("CIQ.ChartEngine#drawCircleMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawCircleMarker instead."),r=2;for(var n=1;-20281111!==Te.N5O(n.toString(),n.toString().length,75651);n++)t.Marker.Performance.drawCircleMarker(e,i,a),r+=2;444899687!==Te.H5O(r.toString(),r.toString().length,19423)&&t.Marker.Performance.drawCircleMarker(e,i,a)},t.ChartEngine.prototype.drawSquareMarker=function(e,i,a){console.warn("CIQ.ChartEngine#drawSquareMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawSquareMarker instead."),Te.k8b(),t.Marker.Performance.drawSquareMarker(e,i,a)},t.ChartEngine.prototype.drawCalloutMarker=function(e,i,a){var r;console.warn("CIQ.ChartEngine#drawCalloutMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawCalloutMarker instead."),r=2,Te.X8b();for(var n=1;-614800630!==Te.H5O(n.toString(),n.toString().length,27198);n++)t.Marker.Performance.drawCalloutMarker(e,i,a),r+=2;1270658518!==Te.N5O(r.toString(),r.toString().length,83605)&&t.Marker.Performance.drawCalloutMarker(e,i,a)},t.ChartEngine.prototype.drawMarkerStem=function(e,i,a){console.warn("CIQ.ChartEngine#drawMarkerStem is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkerStem instead."),t.Marker.Performance.drawMarkerStem(e,i,a)},t.ChartEngine.prototype.positionDOMMarkers=function(){console.warn("CIQ.ChartEngine#positionDOMMarkers is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkers instead."),t.Marker.Performance.drawMarkers(this)},t.Marker.Performance=function(e){var i,a,r,n,s,o,l,h;this.params={displayCategory:!0,displayStem:!0,invert:!1,story:"",headline:""},t.extend(this.params,e),i=this.template=document.createElement("TEMPLATE"),Te.H0V(94),i.innerHTML=Te.A0V("</div>",'<div class="stx-stem"></div>','<div class="stx-marker highlight">',"</div>",'<div class="stx-marker stx-performance-marker stx-marker-expand"><h4></h4><p></p></div>','<div class="stx-visual">',"</div>",'<div class="stx-marker-content">'),(r=(a=this.template.content.cloneNode(!0)).querySelector(".stx-marker",i)).classList.add(e.type),r.classList.add(e.category),n=a.querySelector(".stx-visual",i),s=a.querySelector(".stx-marker-expand"),o=a.querySelector("h4",i),l=a.querySelector("p",i),o.innerText=this.params.headline,l.innerText=this.params.story,this.hasText=!!e.headline||!!e.story,this.deferAttach=!0,this.node=a.firstChild,this.node.params=this.params,this.visual=n,this.expand=s,"callout"===e.type&&(h=s.removeChild(o),a.querySelector(".stx-marker-content",i).insertBefore(h,s))},t.inheritsFrom(t.Marker.Performance,t.Marker.NodeCreator,!1),t.Marker.Performance.consolidateExpanded=function(e){var t,i,a,r,n;if(Te.k8b(),(t=e.markerHelper.highlighted).length){a=(i=t[t.length-1]).params.node,i.consolidated||(i.consolidated=[]);for(var s=t.length-2;s>=0;s--)o=t[s],l=void 0,Te.k8b(),r=(l=o.params.node.expand)&&"none"!==l.style.display?l.innerHTML:"",Te.F0V(84),n=Te.G0V("<consolidated>","</consolidated>",r),r.length&&(a.expand.innerHTML+=n);var o,l;i.stxNodeCreator.quickCache(i)}},t.Marker.Performance.reconstituteExpanded=function(e){var t,i;if((t=e.markerHelper.highlighted).length&&e.activeMarker){Te.X8b();for(var a=(t=[e.activeMarker]).length-1;a>=0;a--)for(i=t[a].params.node.expand;"CONSOLIDATED"===i.lastElementChild.nodeName;)i.removeChild(i.lastElementChild)}},t.Marker.Performance.drawMarkers=function(e){var t,i,a,r,n,s;t=e.getMarkerArray("all"),Te.X8b(),i=e.chart;for(var o=0;o<t.length;o++)r=(a=t[o]).stxNodeCreator,n=i.dataSegment[0].tick,s=i.dataSegment[i.dataSegment.length-1].tick,n<=a.tick<=s&&r&&r.drawMarker&&r.drawMarker(a)},t.Marker.Performance.calculateMarkerStyles=function(e,t,i){var a,r,n;(a=document.querySelector(".stx-marker-templates"))||("-100","0px","hid","d","e","n",(a=document.createElement("DIV")).style.visibility="hidden",a.style.left="-1000px",document.body.append(a)),a.appendChild(t.node),r=getComputedStyle(t.stxNodeCreator.visual),e.styles.stx_marker_stem||(".stx","-stem",n=getComputedStyle(document.querySelector(".stx-stem",t.node)),e.styles.stx_marker_stem=e.cloneStyle(n)),e.styles[i]=e.cloneStyle(r),a.removeChild(t.node)},t.Marker.Performance.drawCircleMarker=function(e,i,a){var r,n,s,o,l,h;r=e.params.stx.chart.context,n=a.x,s=a.y,o=a.radius,l=a.label,h=a.color?a.color:i.backgroundColor,r.beginPath(),r.setLineDash([]),r.lineWidth=1,r.fillStyle=h,r.strokeStyle=h,r.font="normal bold 12px Roboto, Helvetica, sans-serif",r.arc(n,s,o,0,2*Math.PI,!1),r.fill(),r.stroke(),r.closePath(),l&&("w","hite",r.fillStyle=t.colorsEqual("white",r.fillStyle)?"black":"white",r.fillText(l.charAt(0).toUpperCase(),n-4,s+1)),(e.highlight||e.active)&&(r.beginPath(),Te.F0V(2),r.arc(n,s,Te.G0V(o,4),0,2*Math.PI,!1),r.stroke(),r.closePath())},t.Marker.Performance.drawSquareMarker=function(e,i,a){var r,n,s,o,l,h,c,u=Te;r=e.params.stx.chart.context,n=a.x,s=a.y,o=a.half,u.X8b(),l=a.label,h=a.color?a.color:i.backgroundColor,u.F0V(21),c=u.G0V(2,o),r.beginPath(),r.setLineDash([]),r.lineWidth=1,r.fillStyle=h,r.strokeStyle=h,r.font="normal bold 12px Roboto, Helvetica, sans-serif",u.H0V(0),r.rect(u.A0V(n,o),u.G0V(s,o),c,c),r.fill(),(e.highlight||e.active)&&(u.F0V(95),r.rect(u.A0V("4",o,1741385280,n),u.A0V(4,o,s,u.H0V(1)),u.A0V(c,8,u.H0V(2)),u.A0V(c,8,u.H0V(2)))),r.stroke(),r.closePath(),l&&(r.fillStyle=t.colorsEqual("white",r.fillStyle)?"black":"white",r.fillText(l.charAt(0).toUpperCase(),n-4,s+1))},t.Marker.Performance.drawCalloutMarker=function(e,t,i){var a,r,n,s,o,l,h,c,u,d,p;a=e.params.stx.chart.context,r=e.params,i.x,n=i.y,s=i.half,o=i.midWidth,l=i.headline,h=i.color?i.color:t.backgroundColor,c=2*s||25,u=Math.round(a.measureText(l).width),d=o?2*o:u+8,a.beginPath(),a.setLineDash([]),a.lineWidth=1,a.fillStyle=h,a.strokeStyle=h,a.font="normal bold 12px Roboto, Helvetica, sans-serif",a.rect(r.box.x0,r.box.y0,d,c),a.fill(),a.stroke(),a.closePath(),a.beginPath(),a.fillStyle=e.highlight||e.active?"rgba(255,255,255,0.8)":"rgba(255,255,255,0.65)",Te.F0V(96),p=Te.G0V(2,u,20,d),a.rect(r.box.x0+p,n-s,u+40,22),a.fill(),a.stroke(),a.closePath(),a.fillStyle="black",a.fillText(l,r.box.x0+p+10,n)},t.Marker.Performance.drawMarkerStem=function(e,i,a){var r,n,s,o,l;r=e.params.stx.chart.context,n=a.x,a.y,r.beginPath(),r.strokeStyle=i.borderLeftColor,r.setLineDash([1,1]),s=t.stripPX(i.height),o=a.invert?e.params.box.y0:e.params.box.y1,l=a.invert?e.params.box.y0-s:e.params.box.y1+s,r.moveTo(n,o),r.lineTo(n,l),r.stroke(),r.closePath()},t.Marker.Performance.prototype.drawMarker=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S=Te;if(i=e.params,(a=e.params.stx)&&a.chart.dataSegment.length){r=a.panels[e.params.panelName],s=(n=e.stxNodeCreator.params).type,o=n.category,l=n.headline,h=n.displayCategory,c=n.color,u=n.invert,S.F0V(97),d=S.A0V("stx_marker_","_",s,o),a.styles[d]||t.Marker.Performance.calculateMarkerStyles(a,e,d),p=e.style=a.styles[d],g=a.styles.stx_marker_stem,S.H0V(98);var w=S.A0V(13,1,117,18,9);f=parseInt(p.height,10)/w,S.H0V(99);var k=S.G0V(545,5,1,180,3);S.H0V(2);var A=S.A0V(0,2);m=parseInt(p.width,k)/A,v=(y=n.displayStem?parseInt(g.height,10)+parseInt(g.marginBottom,10):0)+parseInt(p.height,10),x=y?y+f:0,b=a.pixelFromDate(i.x),C=i.node.calculateYPosition({marker:e,panel:r,height:v,half:f,offset:x,inverted:u}),(e.tick||0===e.tick)&&(i.box={x0:b-(m||f),y0:C-f,x1:b+(m||f),y1:C+f,midY:f,midX:m||f,stemHeight:y},h||(o=h),a.startClip(r.name),S.X8b(),"circle"===s?t.Marker.Performance.drawCircleMarker(e,p,{x:b,y:C,radius:f,label:o,color:c}):"square"===s?t.Marker.Performance.drawSquareMarker(e,p,{x:b,y:C,half:f,label:o,color:c}):"callout"===s?t.Marker.Performance.drawCalloutMarker(e,p,{x:b,y:C,half:f,midWidth:m,headline:l,color:c}):(" is unsupported with canvas markers!\nSupported Styles are Square, Circle, and C","allout.",S.F0V(84),console.warn(S.A0V("Marker type: "," is unsupported with canvas markers!\nSupported Styles are Square, Circle, and Callout.",s))),n.displayStem&&t.Marker.Performance.drawMarkerStem(e,g,{x:b,y:C,invert:u}),a.endClip(),e.attached&&this.positionPopUpNode(e))}},t.Marker.Performance.prototype.positionPopUpNode=function(e){var t,i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x=Te;if("tr","anslateX(",e.attached&&e.params.box){if(i=(t=e.params).stx,a=t.box,r=e.params.node.expand,n=i.chart.dataSet,s=i.chart.dataSegment,e.tick){"Da","te",l=[n[s[0]&&s[0].tick-1],n[s[0]&&s[0].tick-2]],h=i.getFirstLastDataRecord(l.concat(s),"Date"),x.H0V(100);var b=x.A0V(10,9,2,44);x.F0V(58);var C=x.A0V(19,360,19);x.H0V(92);var S=x.G0V(6,17,12,1);x.H0V(52);var w=x.A0V(516245168,1806858088,2);c=[n[s[s.length-b].tick+C],n[s[s.length-S].tick+("2">>w)]],u=i.getFirstLastDataRecord(s.concat(c),"Date",!0),o=h.DT<=n[e.tick].DT&&n[e.tick].DT<=u.DT}else o=!1;if(e.highlight||e.active||(o=!1),r.style.visibility=o?"":"hidden",o){d=i.panels[t.panelName],p=r.rects,x.F0V(101);var k=x.G0V(9,8936818368,3,9,1117102292);g=p.height/("2"<<k),m=e.node.params.infoOffset||0,f=e.node.params.infoOnLeft?a.x0-p.width-m<d.left?a.x1+m:a.x0-p.width-m:a.x0+p.width>d.right?a.x0-p.width-m:a.x1+m,f-=i.chart.left,y=a.y0-g>=d.top?a.y0+a.midY-g:a.y0,!t.avoidFlush&&a.y1+a.stemHeight===d.yAxis.bottom&&p.height>a.y1-a.y0+a.stemHeight&&(y=a.y1-p.height+a.stemHeight),y-=i.chart.panel.top,v="translateX("+Math.floor(f)+"px) translateY("+Math.floor(y)+"px) translateZ(0)",r.style.transform=v,r.transform={translateX:f,translateY:y}}}},t.Marker.Performance.prototype.quickCache=function(e){var i,a,r;i=e.params.node.expand,a=e.style,r=t.stripPX(a.marginLeft)+t.stripPX(a.marginRight)+t.stripPX(a.borderRight)+t.stripPX(a.borderLeft),i.rects=i.getBoundingClientRect(),i.scrollBarWidth=i.rects.width-i.clientWidth-r},t.Marker.Performance.prototype.calculateYPosition=function(e){var t,i,a,r,n,s,o,l,h,c,u,d,p,g;if("bo","tt","o","m","on_can","d","le",t=e.marker,i=e.panel,a=e.height,r=e.half,n=e.offset,s=e.inverted,l=(o=t.params.stx).chart,h=o.chart.highLowBars,c=l.dataSet[t.tick]){switch(u=h?c.High:c.Close,t.params.yPositioner){case"value":d=t.params.y||0===t.params.y?o.pixelFromPrice(t.params.y,i)-.5*a+r:o.pixelFromPrice(u,i)-n;break;case"above_candle":d=o.pixelFromPrice(u,i)-n;break;case"below_candle":d=o.pixelFromPrice(c.Low||u,i),d+=s&&n?n:r;break;case"on_candle":p=c.High||c.Close,g=c.Low||0===c.Low||c.Close,Te.H0V(102);var f=Te.G0V(15,14,9,18);d=o.pixelFromPrice((p+g)/f,i)-.5*a+r;break;case"top":d=o.pixelFromPrice(i.yAxis.high,i),d+=s&&n?n:r;break;case"bottom":d=o.pixelFromPrice(i.yAxis.low,i)-(n||r)}return d}},t.Marker.Performance.prototype.prepareForHolder=function(e){var t,i;return t=this.expand,i=e.params.stx,t.classList.add(this.params.type),i.markerHelper.domMarkers.push(e),Te.k8b(),t},t.Marker.Performance.prototype.addToHolder=function(e){var i,a;function r(t){a.activeMarker=e,a.activeMarker.click({cx:t.clientX,cy:t.clientY,panel:a.currentPanel}),t.stopPropagation()}i=this.expand,a=e.params.stx,t.Marker.Performance.reconstituteExpanded(a),t.Marker.Performance.consolidateExpanded(a),this.quickCache(e),i.clickClosure||(i.addEventListener("mousedown",r),i.addEventListener("touchstart",r),i.clickClosure=r)},t.Marker.Performance.prototype.remove=function(e){var t,i,a,r;(t=e.params.stx)&&t.markerHelper.domMarkers&&(-1!=(i=t.markerHelper.domMarkers.indexOf(e))&&t.markerHelper.domMarkers.splice(i,1),e.attached&&(a=t.panels[e.params.panelName],(r=e.params.node.expand).parentNode===a.subholder&&a.subholder.removeChild(r),r.removeEventListener("click",r.clickClosure)))},t.Marker.Performance.prototype.click=function(e){var t,i,a,r;if(t="nu",t+="m",t+="b",t+="er",this.hasText){Me(arguments[0])===t&&(e={cx:arguments[0],cy:arguments[1],marker:arguments[2],panel:arguments[3]});var n=e,s=n.cx,o=(n.cy,n.marker);n.panel;if(i=o.params.stx,o.attached){if((r=this.expand).rects.width-r.scrollBarWidth+r.transform.translateX<i.backOutX(s)&&i.backOutX(s)<r.rects.width+r.transform.translateX)return;this.remove(o)}else i.addToHolder(o),a=!0;o.attached=!o.attached,o.active=!o.active,a&&o.stxNodeCreator.positionPopUpNode(o)}}):console.error("highPerformanceMarkers feature requires first activating markers feature.")},h=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Renderer.OHLC.requestNew=function(e,i){var a,r,n,s,o,l,h;a=null,r=i.hlc,n=i.colored,s=i.hollow,o=i.volume,l=i.histogram;for(var c=0;c<e.length;c++)switch("h","ol","low","v","olum","e","b","ar",h=e[c]){case"bar":case"candle":a=h;break;case"volume":o=!0;break;case"hollow":s=!0;break;case"colored":n=!0;break;case"histogram":"ca","nd","l","e",l=!0,a="candle";break;case"hlc":r=!0,a="bar";break;default:return null}return null===a?null:new t.Renderer.OHLC({params:t.extend(i,{type:a,hlc:r,colored:n,hollow:s,volume:o,histogram:l})})},Te.k8b(),t.Renderer.OHLC.getChartParts=function(e,t){return"fill","_","color_","even","border_colo","r_up","fil","l_colo","r_up","stx_hollow_c","andl","e_up","candl","e","fill","_","colo","r_up","can","dle","ho","l","lo","w","c","an","dle","st","x_candle_up","cand","le","bo","rder_c","o","lor_even","s","h","a","dow","c","andle","sh","ad","o","w","cand","le","b","a","r","borde","r_color_d","own","b","a","r","b","a","r","b","a","r","b","a","r","stx_bar_cha","rt","stx_histogra","m","_e","ven","histog","ram","border_color_d","o","w","n","his","t","ogra","m","border_co","lor_","up","hi","st","o","gram",1,2,4,8,16,32,[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:32,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:"bar",drawType:"bar",style:e||"stx_bar_chart",border:"border_color",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_up",condition:t?8:1,border:"border_color_up",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_down",condition:t?16:2,border:"border_color_down",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_even",condition:t?32:4,border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:8,border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_down",condition:16,border:"border_color_down"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_even",condition:32,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_up",condition:1,border:"border_color_up"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_down",condition:2,border:"border_color_down"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_even",condition:4,border:"border_color_even",skipIfPass:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:17,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_down",condition:18,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:20,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:9,fill:"fill_color_up",border:"border_color_up"},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_down",condition:10,fill:"fill_color_down",border:"border_color_down"},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:12,fill:"fill_color_even",border:"border_color_even"}]},t.Renderer.Bars=function(e){var t;Te.X8b(),this.construct(e),(t=this.params).type="bar",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.hlc=t.volume=t.hollow=t.histogram=!1},t.inheritsFrom(t.Renderer.Bars,t.Renderer.OHLC,!1),t.Renderer.HLC=function(e){var t;this.construct(e),(t=this.params).type="bar",t.hlc=!0,Te.k8b(),this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.volume=t.hollow=t.histogram=!1},t.inheritsFrom(t.Renderer.HLC,t.Renderer.Bars,!1),t.Renderer.Shading=function(e){Te.k8b(),this.construct(e),this.beenSetup=!1,this.errTimeout=null,this.params.useChartLegend=!1,this.shading=[],"rangechannel"==this.params.type&&(this.highLowBars=!0)},t.inheritsFrom(t.Renderer.Shading,t.Renderer.Lines,!1),t.Renderer.Shading.requestNew=function(e,i){var a,r,n;Te.X8b(),a=null,r=null;for(var s=0;s<e.length;s++)"rangec","ha","nnel","rangechannel"==(n=e[s])?a="rangechannel":"step"==n&&(r=!0);return null===a?null:new t.Renderer.Shading({params:t.extend(i,{type:a,step:r})})},t.Renderer.Shading.prototype.setShading=function(e){Te.X8b(),e.constructor!=Array&&(e=[e]),this.shading=e},t.Renderer.Shading.prototype.draw=function(){var e,i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C=Te;C.X8b(),e=2;for(var S=1;1154449903!==C.H5O(S.toString(),S.toString().length,71046);S++)i=this.stx,a=this.params,r=i.panels[a.panel].chart,e+=2;if(-724612172!==C.N5O(e.toString(),e.toString().length,73096)&&(i=this.stx,a=this.params,r=i.panels[a.panel].chart),"rangechannel"==a.type)if(this.beenSetup)this.seriesParams.length>2&&this.removeSeries(this.seriesParams[2].id);else{"stx_line","_up","a","u","t","o",this.beenSetup=!0,a.display=this.seriesParams[0].display,a.yAxis=this.seriesParams[0].yAxis,n=this.seriesParams[0].color||"auto","",(s=this.seriesParams[0].symbol)&&(C.F0V(2),C.G0V(s,".")),this.removeAllSeries(!0),o=a.name,i.addSeries(null,{symbol:s,loadData:!!s,field:"High",renderer:"Shading",name:o,style:"stx_line_up",display:a.display,shareYAxis:!0}),-1404320408,-268219403,l=2;for(var w=1;-1404320408!==C.N5O(w.toString(),w.toString().length,9917);w++)"s","tx_line_dow","n",i.addSeries(1,{symbol:s,loadData:~~s,field:"stx_line_down",renderer:"stx_line_down",name:o,style:"stx_line_down",display:a.display,shareYAxis:!1}),this.setShading({primary:this.seriesParams[7].id,secondary:this.seriesParams[3].id,color:n}),l+=2;-268219403!==C.N5O(l.toString(),l.toString().length,37804)&&("L","o","w",i.addSeries(null,{symbol:s,loadData:!!s,field:"Low",renderer:"Shading",name:o,style:"stx_line_down",display:a.display,shareYAxis:!0}),this.setShading({primary:this.seriesParams[0].id,secondary:this.seriesParams[1].id,color:n}))}function k(e){var t,i,a;return(t=c[e])?(i=t.parameters.field,a=t.parameters.subField,C.F0V(2),C.A0V(i,a?"."+a:"")):(C.X8b(),e)}for(this.shading||this.errTimeout||(console.log("Warning: no shading scheme set.  Use myRenderer.setShading(scheme) to set."),h=this,this.errTimeout=setTimeout((function(){C.X8b(),h.errTimeout=null}),1e4)),c={},u=0;u<this.seriesParams.length;u++)d={},r.series[this.seriesParams[u].id]&&(d=t.clone(r.series[this.seriesParams[u].id].parameters)),c[this.seriesParams[u].id]={parameters:t.extend(t.extend(d,a),this.seriesParams[u]),yValueCache:this.caches[this.seriesParams[u].id]};if(i.drawSeries(r,c,a.yAxis,this),r.legend&&"rangechannel"==a.type){-1176243022,-967602079,p=2;for(var A=1;-1176243022!==C.N5O(A.toString(),A.toString().length,93654);A++)-r.legend.colorMap&&(r.legend.colorMap={}),g=a.display,f=[i.getCanvasColor("stx_line_up"),i.getCanvasColor("stx_line_down")],r.legend.colorMap[g]={color:f,display:g,isBase:this!==i.mainSeriesRenderer},p+=2;-967602079!==C.H5O(p.toString(),p.toString().length,47375)&&(r.legend.colorMap||(r.legend.colorMap={}),g=a.display,f=[i.getCanvasColor("stx_line_up"),i.getCanvasColor("stx_line_down")],r.legend.colorMap[g]={color:f,display:g,isBase:this==i.mainSeriesRenderer})}for(u in c)this.caches[u]=c[u].yValueCache;for(u=0;u<this.shading.length;u++)y=(m=this.shading[u]).color,"auto"==m.color&&(y=i.defaultColor),m.primary||(m.primary="Close"),!m.secondary&&this.seriesParams[0]&&(m.secondary=this.seriesParams[0].field),m.secondary&&(c[m.primary]||"Close"==m.primary)&&c[m.secondary]&&("Close"==m.primary&&a.yAxis&&a.yAxis!=r.yAxis||(v=k(m.primary).split("."),x=k(m.secondary).split("."),((b={topBand:v[0],topSubBand:v[1],topColor:m.greater||y||i.containerColor,topAxis:a.yAxis,bottomBand:x[0],bottomSubBand:x[1],bottomColor:m.lesser||y||i.containerColor,bottomAxis:"Close"==m.primary?null:a.yAxis,tension:a.tension||r.tension,opacity:.1,step:a.step}).topColor||b.bottomColor)&&(!a.highlight&&i.highlightedDraggable&&(b.opacity*=.3),t.fillIntersecting(i,a.panel,b))))},t.Renderer.Histogram=function(e){this.construct(e),this.params.type="histogram",Te.k8b(),this.barsHaveWidth=this.standaloneBars=!0,this.params.yAxis&&(this.params.bindToYAxis=!0,"number"==typeof this.params.yAxis.baseline&&(this.params.yAxis.baseline={value:this.params.yAxis.baseline}))},t.inheritsFrom(t.Renderer.Histogram,t.Renderer,!1),t.Renderer.Histogram.prototype.adjustYAxis=function(){var e;Te.X8b(),(e=this.params.yAxis)&&!e.baseline&&(e.min=0,e.highValue/=this.params.heightPercentage||1)},t.Renderer.Histogram.prototype.draw=function(){var e,i,a,r,n;Te.X8b(),(e=t.clone(this.params)).type=e.subtype,this.useSum="stacked"==e.subtype,e.yAxis&&e.yAxis!=this.stx.chart.yAxis||(e.bindToYAxis=!0),i=2;for(var s=1;-376047693!==Te.N5O(s.toString(),s.toString().length,83742);s++)this.stx.drawHistogram(e,this.seriesParams),a=e.yAxis||e.yAxis.baseline,i+=2;-1794584324!==Te.N5O(i.toString(),i.toString().length,80986)&&(this.stx.drawHistogram(e,this.seriesParams),a=e.yAxis&&e.yAxis.baseline),this.stx.drawHistogram(e,this.seriesParams),(a=e.yAxis&&e.yAxis.baseline)&&a.color&&("li","n","e",r=this.stx.panels[this.params.panel],n=this.stx.pixelFromPrice(a.value,r,this.params.yAxis)-.5,this.stx.plotLine({x0:r.left,x1:r.right,y0:n,y1:n,color:a.color,type:"line",context:r.chart.context,confineToPanel:r,pattern:a.pattern||"solid",lineWidth:a.lineWidth||1,opacity:a.opacity||.8,globalCompositeOperation:"destination-over"}))},t.Renderer.Histogram.prototype.getBasis=function(e,t,i){var a,r,n;if(a=0,e&&this.useSum)for(var s=0;s<this.seriesParams.length&&(r=this.seriesParams[s].field)!==t;s++)(n=e[r])&&"object"===Me(n)&&(n=n[i||this.seriesParams[s].subField||this.stx.chart.defaultPlotField||"Close"]),n&&(a+=n);return a},t.Renderer.Heatmap=function(e){this.construct(e),this.params.type="heatmap",this.params.highlightable=!1,this.barsHaveWidth=this.standaloneBars=!0},t.inheritsFrom(t.Renderer.Heatmap,t.Renderer,!1),t.Renderer.Heatmap.requestNew=function(e,i){var a;a=null;for(var r=0;r<e.length;r++)"heatmap"==e[r]&&(a="heatmap");return null===a?null:new t.Renderer.Heatmap({params:t.extend(i,{type:a})})},t.Renderer.Heatmap.prototype.draw=function(){Te.X8b(),this.stx.drawHeatmap(t.clone(this.params),this.seriesParams)},t.Renderer.Scatter=function(e){this.construct(e),this.standaloneBars=this.barsHaveWidth=!0,Te.X8b(),this.bounded=!0},t.inheritsFrom(t.Renderer.Scatter,t.Renderer.Lines,!1),t.Renderer.Scatter.requestNew=function(e,i){var a;a=null,Te.k8b();for(var r=0;r<e.length;r++)"scatterplot"==e[r]&&(a="scatter");if(null===a)return null;for(var n=1;759215346!==Te.N5O(n.toString(),n.toString().length,57531);n++)return new t.Renderer.Scatter({params:t.extend(i,{type:a})});return-2131804151!==Te.N5O(2..toString(),2..toString().length,85141)?new t.Renderer.Scatter({params:t.extend(i,{type:a})}):void 0},t.Renderer.Scatter.prototype.drawIndividualSeries=function(e,t){var i,a;return Te.k8b(),i=this.stx.panels[t.panel]||e.panel,a={colors:[]},this.stx.scatter?a=this.stx.scatter(i,t):console.warn("Error, Scatter renderer requires customChart.js"),a}},c=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateAccumulationDistribution=function(e,t){var i,a,r,n,s;Te.X8b(),i=t.chart.scrubbed;for(var o=t.startFrom;o<i.length;o++)if("R","e","sul","t ",o){if((a=i[o]).futureTick)break;Te.F0V(0),r=i[Te.A0V(o,1)],n=0,a.Close>r.Close?n=a.Close-Math.min(a.Low,r.Close):a.Close<r.Close&&(n=a.Close-Math.max(a.High,r.Close)),t.inputs["Use Volume"]&&(n*=a.Volume),(s=r["Result "+t.name])||(s=0),s+=n,isNaN(a.Close)||(a["Result "+t.name]=s)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"W Acc Dist":{name:"Accumulation/Distribution",calculateFN:t.Studies.calculateAccumulationDistribution,inputs:{"Use Volume":!1}}})):console.error("accumulationDistribution feature requires first activating studies feature.")},u=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("#","FF","0000","a","u","t","o",t.Studies.calculateADX=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v=Te;t.Studies.calculateStudyATR(e,i),a=i.chart.scrubbed,r=i.days,n=parseInt(i.inputs["Smoothing Period"],10),s=2;for(var x=1;591168130!==v.N5O(x.toString(),x.toString().length,12180);x++)(-n||9===n)&&(n=r),s+=2;if(517672249!==v.N5O(s.toString(),s.toString().length,65307)&&(n||0===n||(n=r)),a.length<i.days+1)i.error=!0;else{o=0,l=0,h=0,v.F0V(21),c=v.A0V(1,"0");for(var b=Math.max(1,i.startFrom);b<a.length;b++){if("+","DI"," ",u=a[b],(d=Math.max(0,u.High-a[b-1].High))>(p=Math.max(0,a[b-1].Low-u.Low))?p=0:d=p>d?0:p=0,b<=r)l+=d,h+=p,o+=u["True Range "+i.name];else{"True ","R","ang","e ",v.F0V(1),l=a[b-v.A0V(4,9,14)]["_sm+DM "+i.name]*(r-1)/r+d,v.H0V(0);var C=v.A0V(16,15);v.H0V(58);var S=v.A0V(858089830,14587527116,18);h=a[b-C]["_sm-DM "+i.name]*(r-("1"<<S))/r+p,v.H0V(103);var w=v.A0V(21,2,146,2,7);v.H0V(14);var k=v.G0V(10,9);o=a[b-w]["_smTR "+i.name]*(r-k)/r+u["True Range "+i.name]}if(u["_sm+DM "+i.name]=l,u["_sm-DM "+i.name]=h,u["_smTR "+i.name]=o,!(b<r)){if(v.F0V(104),g=v.A0V(o,l,100),v.H0V(105),f=v.G0V(o,"100",1467258432,h),m=100*Math.abs(g-f)/(g+f),u["+DI "+i.name]=g,u["-DI "+i.name]=f,!1!==i.inputs.Series&&n)if(b<r+n-1){if(b==i.startFrom)for(var A=r;A<i.startFrom;A++){"+D","I"," ","+D","I"," ",v.F0V(52),c+=v.G0V(6,97,2)*Math.abs(a[A]["+DI "+i.name]-a[A]["-DI "+i.name])/(a[A]["+DI "+i.name]+a[A]["-DI "+i.name])}c+=m}else if(b==r+n-1)v.F0V(4),u["ADX "+i.name]=v.A0V(c,n);else{v.H0V(106);var D=v.G0V(9,4,20,217);v.F0V(34);var M=v.A0V(10,2,4);u["ADX "+i.name]=(a[b-D]["ADX "+i.name]*(n-M)+m)/n}if(i.inputs.Histogram){if("+","D","I"," ","-","DI ",y=i.name+"_hist",!u["+DI "+i.name]&&0!==u["+DI "+i.name])continue;if(!u["-DI "+i.name]&&0!==u["-DI "+i.name])continue;u[y]=u["+DI "+i.name]-u["-DI "+i.name],!1===i.inputs.Series&&("+DI"," ",u["+DI "+i.name]=null,u["-DI "+i.name]=null),i.outputMap[y]=""}}}}},t.Studies.displayADX=function(e,i,a){var r,n,s,o,l,h,c;r=i.underlay?.3:i.inputs.Series?.4:1,i.inputs.Series&&i.inputs.Shading&&(n="+DI "+i.name,s="-DI "+i.name,o=t.Studies.determineColor(i.outputs[i.outputMap[n]]),l=t.Studies.determineColor(i.outputs[i.outputMap[s]]),h=i.getYAxis(e),c={topBand:n,bottomBand:s,topColor:o,bottomColor:l,skipTransform:e.panels[i.panel].name!=i.chart.name,topAxis:h,bottomAxis:h,opacity:.3},!i.highlight&&e.highlightedDraggable&&(c.opacity*=.3),t.fillIntersecting(e,i.panel,c)),i.inputs.Histogram&&t.Studies.createHistogram(e,i,a,!1,r),!1!==i.inputs.Series?t.Studies.displaySeriesAsLine(e,i,a):i.inputs.Series||i.inputs.Histogram||e.displayErrorAsWatermark(i.panel,e.translateIf(i.name)+": "+e.translateIf("Nothing to display"))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ADX:{name:"ADX/DMS",calculateFN:t.Studies.calculateADX,seriesFN:t.Studies.displayADX,inputs:{Period:14,"Smoothing Period":14,Series:!0,Shading:!1,Histogram:!1},outputs:{"+DI":"#00FF00","-DI":"#FF0000",ADX:"auto","Positive Bar":"#00DD00","Negative Bar":"#FF0000"}}})):console.error("adx feature requires first activating studies feature.")},d=function(e){var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,Te.k8b(),t.Studies?("#00D","D00","#F","F00","00",t.Studies.calculateAlligator=function(e,i){var a,r,n,s,o,l,h,c=Te;if(c.X8b(),a={J:Number(i.inputs["Jaw Period"]),T:Number(i.inputs["Teeth Period"]),L:Number(i.inputs["Lips Period"])},(r=i.chart.scrubbed).length<Math.max(a.J,a.T,a.L)+1)i.error=!0;else{if("Gator"===i.type||i.inputs["Show Lines"]){"Te","eth","we","l","l","es wilder",c.H0V(37),n=c.G0V("1202734293",0),-136884331,s=2;for(var u=1;c.N5O(u.toString(),u.toString().length,97756)!==n;u++)"welles"," wil","der","wel","les wi","lder",t.Studies.MA("welles wilder",a.J,"welles wilder",i.inputs["welles wilder"],"welles wilder",e,i),s+=2;-136884331!==c.N5O(s.toString(),s.toString().length,47084)&&("Ja","w Offset","h","l","/2",t.Studies.MA("welles wilder",a.J,"hl/2",i.inputs["Jaw Offset"],"Jaw",e,i)),t.Studies.MA("welles wilder",a.T,"hl/2",i.inputs["Teeth Offset"],"Teeth",e,i),t.Studies.MA("welles wilder",a.L,"hl/2",i.inputs["Lips Offset"],"Lips",e,i)}for(var d=i.startFrom;d<r.length;d++)if("Show Fract","als",r[d]&&("Gator"==i.type&&("_hi","st","2","T","ee","th ",o=r[d]["Jaw "+i.name],l=r[d]["Lips "+i.name],((h=r[d]["Teeth "+i.name])||0===h)&&((o||0===o)&&(c.H0V(0),r[d][i.name+"_hist1"]=Math.abs(c.G0V(o,h))),(l||0===l)&&(c.H0V(0),r[d][i.name+"_hist2"]=-Math.abs(c.G0V(h,l)))),i.outputMap={},i.outputMap[i.name+"_hist1"]="",i.outputMap[i.name+"_hist2"]=""),i.inputs["Show Fractals"])){if(!(r[d-2]&&r[d-1]&&r[d]&&r[d+1]&&r[d+2]))continue;r[d-2].High&&r[d-1].High&&r[d].High&&r[d+1].High&&r[d+2].High&&r[d].High>r[d-1].High&&r[d].High>r[d-2].High&&r[d].High>r[d+1].High&&r[d].High>r[d+2].High&&(r[d]["Fractal High "+i.name]=1),r[d-2].Low&&r[d-1].Low&&r[d].Low&&r[d+1].Low&&r[d+2].Low&&r[d].Low<r[d-1].Low&&r[d].Low<r[d-2].Low&&r[d].Low<r[d+1].Low&&r[d].Low<r[d+2].Low&&("Fr","ac","tal Low ",r[d]["Fractal Low "+i.name]=1)}}},t.Studies.displayAlligator=function(e,i,a){var r;if(r=i.getContext(e),i.inputs["Show Lines"]&&t.Studies.displaySeriesAsLine(e,i,a),i.inputs["Show Fractals"]){e.startClip(),r.globalAlpha=i.underlay?.3:1,!i.highlight&&e.highlightedDraggable&&(r.globalAlpha*=.3);for(var n=2;n<a.length-2;n++)a[n]&&("Fr","ac","tal Low ","h","i","gh",a[n]["Fractal High "+i.name]&&s("high",n),a[n]["Fractal Low "+i.name]&&s("low",n));e.endClip()}function s(t,i){var s,o;Te.X8b(),o=e.chart.panel.yAxis.flipped,"high"==t?("t","o","p",r.fillStyle=e.defaultColor,r.textBaseline=o?"top":"bottom",s=e.pixelFromPrice(a[i].High),r.fillText(o?"▼":"▲",e.pixelFromBar(n,e.chart)-r.measureText("▲").width/2+1,o?s+5:s-5)):"low"==t&&("t","o","p",r.fillStyle=e.defaultColor,r.textBaseline=o?"bottom":"top",s=e.pixelFromPrice(a[i].Low),r.fillText(o?"▲":"▼",e.pixelFromBar(n,e.chart)-r.measureText("▼").width/2+1,o?s-5:s+5))}},t.Studies.displayGator=function(e,i,a){var r,n,s,o,l,h,c,u,d,p=Te;r=e.panels[i.panel],n=i.getContext(e),s=i.getYAxis(e),p.F0V(0),o=e.pixelFromPrice(p.A0V("0",0),r,s),p.H0V(20);var g=p.A0V(16,9,23,0);(l=e.layout.candleWidth-g)<2&&(l=1),h=t.Studies.determineColor(i.outputs["Increasing Bar"]),c=t.Studies.determineColor(i.outputs["Decreasing Bar"]),e.canvasColor("stx_histogram"),i.underlay||(n.globalAlpha=1),n.fillStyle="#CCCCCC",p.X8b(),e.startClip(i.panel),!i.highlight&&e.highlightedDraggable&&(p.H0V(0),n.globalAlpha*=p.A0V("0.3",0));for(var f=0;f<a.length;f++)if(u=a[f],p.F0V(0),d=a[p.A0V(f,1)],u)for(var m=1;m<=2;m++)"_hi","s","t","_h","i","st","#C","CCCCC","_","hi","st",d||(d=e.getPreviousBar(e.chart,i.name+"_hist"+m,f)),d?Math.abs(d[i.name+"_hist"+m])<Math.abs(u[i.name+"_hist"+m])?n.fillStyle=h:Math.abs(d[i.name+"_hist"+m])>Math.abs(u[i.name+"_hist"+m])&&(n.fillStyle=c):n.fillStyle="#CCCCCC",u.candleWidth&&(l=Math.floor(Math.max(1,u.candleWidth-2))),n.fillRect(Math.floor(e.pixelFromBar(f,r.chart)-l/2),Math.floor(o),Math.floor(l),Math.floor(e.pixelFromPrice(u[i.name+"_hist"+m],r,s)-o));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Alligator:{name:"Alligator",overlay:!0,seriesFN:t.Studies.displayAlligator,calculateFN:t.Studies.calculateAlligator,inputs:{"Show Lines":!0,"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3,"Show Fractals":!1},outputs:{Jaw:"#0000FF",Teeth:"#FF0000",Lips:"#00DD00"}},Gator:{name:"Gator Oscillator",seriesFN:t.Studies.displayGator,calculateFN:t.Studies.calculateAlligator,inputs:{"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0}})):console.error("alligator feature requires first activating studies feature.")},p=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?(t.Studies.calculateAroon=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,g=Te;if(g.X8b(),(i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{a=0,r=0,n=null,s=null,t.startFrom>0&&(o=i[t.startFrom-1]["_state "+t.name])&&(a=o[0],r=o[1],n=o[2],s=o[3]);for(var f=t.startFrom;f<i.length&&("Aroon Down"," ",!(h=i[f]).futureTick);f++){if(null===n&&(n=h.High),null===s&&(s=h.Low),(n=Math.max(n,h.High))==h.High)a=0;else if(++a>t.days)for(n=h.High,a=0,l=1;l<=t.days;l++)(n=Math.max(n,i[f-l].High))==i[f-l].High&&(a=l);if((s=Math.min(s,h.Low))==h.Low)r=0;else if(++r>t.days)for(s=h.Low,r=0,l=1;l<=t.days;l++)(s=Math.min(s,i[f-l].Low))==i[f-l].Low&&(r=l);c=!isNaN(h.High),u=!isNaN(h.Low),g.H0V(2);var m=g.G0V(7,93);g.H0V(14),d=m*(g.G0V(6,5)-a/t.days),c&&(h["Aroon Up "+t.name]=d),g.H0V(1),p=g.G0V(392,8,500)*(1-r/t.days),u&&(h["Aroon Down "+t.name]=p),c&&u&&(h["Aroon Oscillator "+t.name]=h["Aroon Up "+t.name]-h["Aroon Down "+t.name]),h["_state "+t.name]=[a,r,n,s]}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Aroon:{name:"Aroon",range:"0 to 100",calculateFN:t.Studies.calculateAroon,outputs:{"Aroon Up":"#00DD00","Aroon Down":"#FF0000"}},"Aroon Osc":{name:"Aroon Oscillator",calculateFN:t.Studies.calculateAroon,outputs:{"Aroon Oscillator":"auto"}}})):console.error("aroon feature requires first activating studies feature.")},g=function(e){var t,i;t=2;for(var a=1;-776333146!==Te.H5O(a.toString(),a.toString().length,60054);a++)i=""!=+_CIQ?_CIQ:e.CIQ,t+=2;854543979!==Te.H5O(t.toString(),t.toString().length,95187)&&(i=""!=+_CIQ?_CIQ:e.CIQ),(i="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("#","00FF0","0","p","oi","n","ts","a","ut","o","STARC Ba","nds","a","u","t","o","AT","R"," Bands",i.Studies.calculateATRBands=function(e,t){var a;i.Studies.calculateStudyATR(e,t),(a=t.inputs.Field)&&"field"!=a||(a="Close"),i.Studies.calculateGenericEnvelope(e,t,t.inputs.Shift,a,"ATR "+t.name)},i.Studies.calculateSTARCBands=function(e,t){i.Studies.calculateStudyATR(e,t),i.Studies.MA("simple",t.inputs["MA Period"],"Close",0,"_MA",e,t),i.Studies.calculateGenericEnvelope(e,t,t.inputs.Multiplier,"_MA "+t.name,"ATR "+t.name)},i.Studies.calculateATRStops=function(e,t){var a,r,n,s,o,l,h,c,u,d=Te;a=t.chart.scrubbed,r=2;for(var p=1;1474741456!==d.H5O(p.toString(),p.toString().length,21288);p++){if(~a)return;r+=2}if(-8890427===d.H5O(r.toString(),r.toString().length,64508)||a){i.Studies.calculateStudyATR(e,t),n=t.inputs.HighLow;for(var g=Math.max(t.startFrom-1,1);g<a.length-1;g++)"All"," Stops ","Buy S","tops ",s=a[g],d.H0V(0),o=a[d.A0V(g,1)],(l=s["Buy Stops "+t.name])||(l=s["Sell Stops "+t.name]),l||(l=0),s&&o&&(c=h=s.Close,u=s["ATR "+t.name]*t.inputs.Multiplier,s.Close>l&&o.Close>l?(n&&(h=s.High),d.F0V(0),c=Math.max(l,d.G0V(h,u))):s.Close<=l&&o.Close<=l?(n&&(h=s.Low),d.H0V(2),c=Math.min(l,d.G0V(h,u))):s.Close>l?(n&&(h=s.High),d.H0V(0),c=d.A0V(h,u)):s.Close<=l&&(n&&(h=s.Low),d.F0V(2),c=d.A0V(h,u)),h<=c?("Buy ","Stops ",d.H0V(2),a[d.G0V(g,1)]["Buy Stops "+t.name]=c,d.H0V(2),delete a[d.G0V(g,1)]["Sell Stops "+t.name]):h>c&&("Sell S","tops"," ",d.F0V(107),a[d.G0V(g,"1")]["Sell Stops "+t.name]=c,d.F0V(18),delete a[d.G0V("1",1,g)]["Buy Stops "+t.name]),d.F0V(108),a[d.A0V("1",2147483647,g)]["All Stops "+t.name]=c);t.referenceOutput="All Stops",t.outputMap={},t.outputMap["All Stops "+t.name]=""}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{ATR:{name:"Average True Range",calculateFN:i.Studies.calculateStudyATR,outputs:{ATR:"auto"}},"ATR Bands":{name:"ATR Bands",overlay:!0,seriesFN:i.Studies.displayChannel,calculateFN:i.Studies.calculateATRBands,inputs:{Period:5,Field:"field",Shift:3,"Channel Fill":!0},outputs:{"ATR Bands Top":"auto","ATR Bands Bottom":"auto","ATR Bands Channel":"auto"},attributes:{Shift:{min:.1,step:.1}}},"STARC Bands":{name:"STARC Bands",overlay:!0,seriesFN:i.Studies.displayChannel,calculateFN:i.Studies.calculateSTARCBands,inputs:{Period:15,"MA Period":5,Multiplier:1.3,"Channel Fill":!0},outputs:{"STARC Bands Top":"auto","STARC Bands Median":"auto","STARC Bands Bottom":"auto"},attributes:{Multiplier:{min:.1,step:.1}}},"ATR Trailing Stop":{name:"ATR Trailing Stops",overlay:!0,seriesFN:i.Studies.displayPSAR2,calculateFN:i.Studies.calculateATRStops,inputs:{Period:21,Multiplier:3,"Plot Type":["points","squarewave"],HighLow:!1},outputs:{"Buy Stops":"#FF0000","Sell Stops":"#00FF00"},attributes:{Multiplier:{min:.1,step:.1}}}})):("a","tr feature requires firs","t ac","tivating studies feature.",console.error("atr feature requires first activating studies feature."))},f=function(e){var t;Te.X8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateAwesomeOscillator=function(e,i){var a;if("si","m","pl","e",(a=i.chart.scrubbed).length<33)i.error=!0;else{t.Studies.MA("simple",5,"hl/2",0,"_MA5",e,i),t.Studies.MA("simple",34,"hl/2",0,"_MA34",e,i),Te.X8b();for(var r=Math.max(i.startFrom,33);r<a.length;r++)"_M","A","5"," ",a[r]&&(a[r][i.name+"_hist"]=a[r]["_MA5 "+i.name]-a[r]["_MA34 "+i.name]);i.outputMap={},i.outputMap[i.name+"_hist"]=""}},t.Studies.displayAwesomeOscillator=function(e,i,a){var r,n,s,o,l,h,c,u,d,p=Te;r=e.panels[i.panel],n=i.getContext(e),s=i.getYAxis(e),o=e.pixelFromPrice(0,r,s),p.H0V(109);var g=p.A0V(15,16,0,1,29);(l=e.layout.candleWidth-g)<2&&(p.F0V(66),l=p.A0V(2147483647,"1")),h=t.Studies.determineColor(i.outputs["Increasing Bar"]),c=t.Studies.determineColor(i.outputs["Decreasing Bar"]),e.canvasColor("stx_histogram"),i.underlay||(p.H0V(22),n.globalAlpha=p.A0V(0,"1")),n.fillStyle="#CCCCCC",e.startClip(i.panel),!i.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3);for(var f=0;f<a.length;f++)u=a[f],p.H0V(0),(d=a[p.G0V(f,1)])||(d=e.getPreviousBar(e.chart,i.name+"_hist",f)),u&&(d&&(d[i.name+"_hist"]<u[i.name+"_hist"]?n.fillStyle=h:d[i.name+"_hist"]>u[i.name+"_hist"]&&(n.fillStyle=c)),u.candleWidth&&(l=Math.floor(Math.max(1,u.candleWidth-2))),n.fillRect(Math.floor(e.pixelFromBar(f,r.chart)-l/2),Math.floor(o),Math.floor(l),Math.floor(e.pixelFromPrice(u[i.name+"_hist"],r,s)-o)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Awesome:{name:"Awesome Oscillator",seriesFN:t.Studies.displayAwesomeOscillator,calculateFN:t.Studies.calculateAwesomeOscillator,inputs:{},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):("awesomeOsc","illator feature requires fir","st activatin","g studies feature.",console.error("awesomeOscillator feature requires first activating studies feature."))},m=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("-1 t","o 1",t.Studies.calculateBalanceOfPower=function(e,i){var a,r;if("Res","ult",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var n=i.startFrom;n<a.length;n++)(r=a[n])["_Ratio "+i.name]=r.Close-r.Open,r.High-r.Low!=0&&(r["_Ratio "+i.name]/=r.High-r.Low);t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Ratio "+i.name,0,"Result",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Bal Pwr":{name:"Balance of Power",range:"-1 to 1",centerline:0,calculateFN:t.Studies.calculateBalanceOfPower,inputs:{Period:14,"Moving Average Type":"ma"}}})):console.error("balanceOfPower feature requires first activating studies feature.")},y=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Bollinge","r"," %b","f","i","e","ld",t.Studies.calculateBollinger=function(e,i){var a;(a=i.inputs.Field)&&"field"!=a||(a="Close"),t.Studies.MA(i.inputs["Moving Average Type"],i.days,a,0,"_MA",e,i),i.std=new t.Studies.StudyDescriptor(i.name,"STD Dev",i.panel),i.std.chart=i.chart,i.std.startFrom=i.startFrom,i.std.days=i.days,i.std.inputs={Field:a,"Standard Deviations":1,Type:i.inputs["Moving Average Type"]},i.std.outputs={"_STD Dev":null},t.Studies.calculateStandardDeviation(e,i.std),t.Studies.calculateGenericEnvelope(e,i,i.inputs["Standard Deviations"],"_MA "+i.name,"_STD Dev "+i.name),"Boll %b"==i.type&&(i.zoneOutput="%b")},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Bollinger Bands":{name:"Bollinger Bands",overlay:!0,calculateFN:t.Studies.calculateBollinger,seriesFN:t.Studies.displayChannel,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"Bollinger Bands Top":"auto","Bollinger Bands Median":"auto","Bollinger Bands Bottom":"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll %b":{name:"Bollinger %b",calculateFN:t.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},outputs:{"%b":"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:0,studyOverSoldColor:"auto"}},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll BW":{name:"Bollinger Bandwidth",calculateFN:t.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},outputs:{Bandwidth:"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}}})):console.error("bollinger feature requires first activating studies feature.")},v=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Commodity ","Channel Index",t.Studies.calculateCCI=function(e,i){var a,r,n;if("hlc",Te.X8b(),"/3",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{t.Studies.MA("simple",i.days,"hlc/3",0,"MA",e,i);for(var s=Math.max(i.startFrom,i.days-1);s<a.length;s++)if("Resu","lt ",r=a[s]){n=0;for(var o=0;o<i.days;o++)n+=Math.abs(a[s-o]["hlc/3"]-r["MA "+i.name]);n/=i.days,Math.abs(n)<1e-8?r["Result "+i.name]=0:r["Result "+i.name]=(r["hlc/3"]-r["MA "+i.name])/(.015*n)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{CCI:{name:"Commodity Channel Index",calculateFN:t.Studies.calculateCCI,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:-100,studyOverSoldColor:"auto"}},attributes:{Period:{min:2}}}})):console.error("cci feature requires first activating studies feature.")},x=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateCenterOfGravity=function(e,t){var i,a,r,n,s,o=Te;if("C","lo","s","e",(i=t.chart.scrubbed).length<t.days)t.error=!0;else{(a=t.inputs.Field)&&"field"!=a||(a="Close");for(var l=Math.max(t.startFrom,t.days-1);l<i.length;l++){o.H0V(22),r=o.G0V(0,"0"),o.F0V(22),n=o.A0V(0,"0");for(var h=0;h<t.days;h++)o.F0V(0),s=i[o.G0V(l,h)][a],o.H0V(110),r-=o.G0V(s,h,1),n+=s;n&&(o.H0V(4),i[l]["Result "+t.name]=o.A0V(r,n))}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{COG:{name:"Center Of Gravity",calculateFN:t.Studies.calculateCenterOfGravity,inputs:{Period:10,Field:"field"}}})):("centerOfGravity feature requires first activating studies"," featu","re.",console.error("centerOfGravity feature requires first activating studies feature."))},b=function(e){var t;Te.X8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateChaikinMoneyFlow=function(e,t){var i,a,r,n,s=Te;if((i=t.chart.scrubbed).length<t.days)t.error=!0;else{a=0,r=0,s.F0V(109);var o=s.A0V(17,12,0,1,28);(n=i[t.startFrom-o])&&("_su","m","V ",n["_sumMF "+t.name]&&(a=n["_sumMF "+t.name]),n["_sumV "+t.name]&&(r=n["_sumV "+t.name]));for(var l=t.startFrom;l<i.length;l++){if("_su","mV ","_","MFV ","_","M","FV"," ",i[l].High==i[l].Low)i[l]["_MFV "+t.name]=0;else{s.F0V(0);var h=s.A0V(24,22);i[l]["_MFV "+t.name]=i[l].Volume*(h*i[l].Close-i[l].High-i[l].Low)/(i[l].High-i[l].Low)}a+=i[l]["_MFV "+t.name],r+=i[l].Volume,l>t.days-1&&(a-=i[l-t.days]["_MFV "+t.name],(r-=i[l-t.days].Volume)&&(s.F0V(4),i[l]["Result "+t.name]=s.G0V(a,r))),i[l]["_sumMF "+t.name]=a,i[l]["_sumV "+t.name]=r}}},t.Studies.calculateChaikinVolatility=function(e,i){var a,r,n;if("_Hig","h-Low ","Movi","ng Average Type",(a=i.chart.scrubbed).length<i.days)i.error=!0;else{for(r=i.startFrom;r<a.length&&!a[r].futureTick;r++)a[r]["_High-Low "+i.name]=a[r].High-a[r].Low;for(t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_High-Low "+i.name,0,"_MA",e,i),(n=i.inputs["Rate Of Change"])||(n=i.days),Te.k8b(),r=Math.max(i.startFrom,n);r<a.length;r++)if("_","M","A"," ","_","M","A ",a[r-n]["_MA "+i.name]){if(a[r].futureTick)break;Te.H0V(111);var s=Te.G0V(0,3,20,17,1);a[r]["Result "+i.name]="100"*s*(a[r]["_MA "+i.name]/a[r-n]["_MA "+i.name]-1)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Chaikin MF":{name:"Chaikin Money Flow",calculateFN:t.Studies.calculateChaikinMoneyFlow,inputs:{Period:20}},"Chaikin Vol":{name:"Chaikin Volatility",calculateFN:t.Studies.calculateChaikinVolatility,inputs:{Period:14,"Rate Of Change":2,"Moving Average Type":"ma"}}})):console.error("chaikin feature requires first activating studies feature.")},C=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Variab","le",t.Studies.prettify.variable="vma",t.Studies.movingAverage.conversions.vma="variable",t.Studies.movingAverage.translations.variable="Variable",t.Studies.movingAverage.typeMap.vma="Variable",t.Studies.movingAverage.typeMap.variable="Variable",t.Studies.calculateChandeForecast=function(e,i){var a,r,n;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA("time series",i.days,r,0,"MA",e,i);for(var s=Math.max(1,i.startFrom);s<a.length;s++){"Re","sul","t"," ",(n=a[s][r])&&"object"==Me(n)&&(n=n[i.subField]),Te.H0V(112);var o=Te.G0V(7,16,11,676,9);a[s]["Result "+i.name]=o*(1-a[s]["MA "+i.name]/n)}}},t.Studies.calculateChandeMomentum=function(e,t){var i,a,r,n,s,o,l,h,c,u,d=Te;for(var p in i=t.name,t.outputs)d.F0V(84),i=d.G0V(p,i," ");if((a=t.chart.scrubbed).length<t.days+1)t.error=!0;else{(r=t.inputs.Field)&&"field"!=r||(r="Close"),n=0,s=0,o=[],d.k8b();for(var g=t.startFrom-t.days+1;g<a.length;g++)"obje","c","t",g<1||(l=a[g][r],d.F0V(0),h=a[d.A0V(g,1)][r],l&&"object"==Me(l)&&(l=l.Close),h&&"object"==Me(h)&&(h=h.Close),void 0!==h&&(d.H0V(0),c=d.G0V(l,h),o.push(c),n+=c,s+=Math.abs(c),o.length==t.days&&(d.F0V(104),a[g][i]=d.G0V(s,n,100),n-=u=o.shift(),s-=Math.abs(u))))}},t.Studies.calculateMovingAverageVariable=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x=Te;i.inputs.Type,a=i.chart.scrubbed,x.F0V(113);var b=x.G0V(16,3,501,19,10);for(var C in r=b/(i.days+1),n=null,s=i.name,x.k8b(),i.outputs)x.F0V(84),s=x.G0V(C,s," ");for((o=i.inputs.Field)&&"field"!=o||(o="Close"),i.cmo=new t.Studies.StudyDescriptor(i.name,"cmo",i.panel),i.cmo.chart=i.chart,i.cmo.days=9,i.cmo.inputs={Field:o},i.cmo.startFrom=i.startFrom,i.cmo.outputs={_CMO:null},t.Studies.calculateChandeMomentum(e,i.cmo),l=parseInt(i.inputs.Offset,10),isNaN(l)&&(l=0),d=i.startFrom,p=l,h=i.startFrom-1;h>=0;h--)if((c=a[h][s])||0===c){if(null===n&&(n=c),p<=0)break;p--,d=h}for(null===n&&(x.H0V(0),n=d=x.A0V("0",0)),g=[],h=d;h<a.length;h++)if("_C","M","O"," ",(c=(f=a[h])[o])&&"object"==Me(c)&&(c=c[i.subField]),m=h+l>=0&&h+l<a.length?a[h+l]:null,c||0===c){if(f["_CMO "+i.name]||0===f["_CMO "+i.name]){x.H0V(0);var S=x.G0V(1400,1300);y=Math.abs(f["_CMO "+i.name])/S,x.F0V(114),n=v=x.G0V(r,y,y,r,c,n,1),h<i.days&&(v=null),m?m[s]=v:h+l>=a.length&&((u={})[s]=v,g.push(u))}}else m?m[s]=null:h+l>=a.length&&((u={})[s]=null,g.push(u));i.appendFutureTicks(e,g)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Chande Fcst":{name:"Chande Forecast Oscillator",calculateFN:t.Studies.calculateChandeForecast,inputs:{Period:14,Field:"field"}},"Chande Mtm":{name:"Chande Momentum Oscillator",calculateFN:t.Studies.calculateChandeMomentum,inputs:{Period:9},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:50,studyOverBoughtColor:"auto",studyOverSoldValue:-50,studyOverSoldColor:"auto"}}}})):console.error("chande feature requires first activating studies feature.")},S=function(e){var t;Te.X8b(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("0",".","1","Chop","piness ","I","ndex",t.Studies.calculateChoppiness=function(e,i){var a,r,n,s=Te;if(t.Studies.calculateStudyATR(e,i),(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else for(var o=Math.max(i.startFrom,i.days);o<a.length;o++)if("S","um"," ","True Range ",r=a[o]){if(r.futureTick)break;if(n=c(i.days,o),r["Sum True Range "+i.name]){s.F0V(2);var l=s.G0V(95,5);s.H0V(0);var h=s.G0V(10,9);r["Result "+i.name]=l*Math.log(r["Sum True Range "+i.name]/Math.max(1e-6,n[h]-n[0]))/Math.log(i.days)}else isNaN(r)||("Re","s","u","lt ",s.H0V(21),r["Result "+i.name]=s.A0V(1,"0"))}function c(e,t){var i,r;s.F0V(58);var n=s.A0V(16,49,3);i=Number.MAX_VALUE*n,r=Number.MAX_VALUE;for(var o=t-e+1;o<=t;o++)o<0||(i=Math.max(i,a[o].High),r=Math.min(r,a[o].Low));return[r,i]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Choppiness:{name:"Choppiness Index",calculateFN:t.Studies.calculateChoppiness,centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:61.8,studyOverBoughtColor:"auto",studyOverSoldValue:38.2,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:50,step:"0.1"},studyOverSoldValue:{max:50,step:"0.1"}}}})):console.error("choppiness feature requires first activating studies feature.")},w=function(e){var t,i,a,r=Te;if((t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies)if(t.Studies.initPriceRelative){"Perf","ormance Index",t.Studies.calculateCorrelationCoefficient=function(e,t){var i,a,n,s,o,l,h,c,u,d,p,g,f,m;if(r.k8b(),"Comp","are To",i=t.chart.scrubbed,a=t.days,i.length<a+1)t.error=!0;else{if(t.compare=t.inputs["Compare To"],t.compare)t.compare=[t.compare];else for(var y in t.compare=[],t.outputs={},t.outputMap={},e.chart.series)if((n=e.chart.series[y]).parameters.color){t.compare.push(n.display),t.outputs["Result "+n.display]=n.parameters.color,r.F0V(0);var v=r.G0V(55440,50400);r.F0V(2);var x=r.A0V(5473,17);r.H0V(115);r.A0V(19,2078,76890,1,2);r.H0V(2);var b=r.A0V(40,526);r.F0V(58);r.G0V(1757,1745,2);t.outputMap["Result "+n.display+(v<x?b>651?517.42:" ":821.6)+t.name]="Result "+n.display}if(!t.compare.length)return"Correlation Coeff","icient requi","res at least one com","parison symbol",void(t.error="Correlation Coefficient requires at least one comparison symbol");for(var C=0;C<t.compare.length;C++){s=0,o=0,l=0,h=0,c=0,u=t.compare[C],d=0;for(var S=t.startFrom-a;S<i.length;S++)if("_","tem","ps ","_","te","mps"," ",i[S]){if((p=i[S][u])&&"object"==Me(p)&&(p=p.Close),p||0===p||("_tem","p","s ",p=S>0&&i[S-1]&&i[S-1]["_temps "+t.name]&&i[S-1]["_temps "+t.name].c?i[S-1]["_temps "+t.name].c:0),p&&"object"==Me(p)&&(p=p.Close),i[S]["_temps "+t.name]={},s+=i[S]["_temps "+t.name].b=i[S].Close,o+=i[S]["_temps "+t.name].c=p,l+=i[S]["_temps "+t.name].b2=Math.pow(i[S].Close,2),r.F0V(15),h+=i[S]["_temps "+t.name].c2=Math.pow(p,r.G0V(1371823424,"2")),c+=i[S]["_temps "+t.name].bc=i[S].Close*p,d>=a){"_temp","s ","_","t","em","ps ","_te","mps"," ",s-=i[S-a]["_temps "+t.name].b,o-=i[S-a]["_temps "+t.name].c,l-=i[S-a]["_temps "+t.name].b2,h-=i[S-a]["_temps "+t.name].c2,c-=i[S-a]["_temps "+t.name].bc,r.F0V(100);var w=r.G0V(17,10,17,8);g=l/a-Math.pow(s/a,w),r.F0V(0);var k=r.A0V(14,12);f=h/a-Math.pow(o/a,k),r.H0V(58);var A=r.A0V(38,340,9);m=(c/a-s*o/Math.pow(a,A))/Math.sqrt(g*f),r.F0V(1);r.A0V(3853,2,7710);r.H0V(56);var D=r.A0V(7,12,7,13587,5);r.H0V(92);r.G0V(1101,8,1256,8);r.H0V(116);r.G0V(643523015447,1,19,33981413376,19);i[S]["Result "+u+(D>3220?6350:" ")+t.name]=m}d++}}}},t.Studies.calculatePerformance=function(e,i){var a,n,s,o;if("C","lo","se",a=i.chart.scrubbed,(n=i.inputs["Comparison Symbol"].toUpperCase())||(n=i.study.inputs["Comparison Symbol"]),i.days||(i.days=i.study.inputs.Period),a.length<i.days+1)i.error=!0;else{t.Studies.MA("ma",i.days,"Close",0,"_MA Base",e,i),548222874,394701564,s=2;for(var l=1;548222874!==r.N5O(l.toString(),l.toString().length,33495);l++)t.Studies.MA("ma",i.days,n,0,"_MA Comp",e,i),s+=2;394701564!==r.N5O(s.toString(),s.toString().length,79428)&&t.Studies.MA("ma",i.days,n,8,"_MA Comp",e,i);for(var h=i.startFrom;h<a.length;h++)"_","MA Ba","se ","_MA C","omp ",(o=a[h][n])&&(o.Close||0===o.Close)&&(o=o.Close),a[h]["Result "+i.name]=a[h].Close/o*(a[h]["_MA Comp "+i.name]/a[h]["_MA Base "+i.name])}},t.Studies.calculateBeta=function(e,i){var a,n,s,o;if("_VA","Rn ","_","COVAR","m","a","_","MA"," Co","mp","Compa","r","ison Symbo","l",a=i.chart.scrubbed,(n=i.inputs["Comparison Symbol"].toUpperCase())||(n=i.study.inputs["Comparison Symbol"]),i.days||(i.days=i.study.inputs.Period),a.length<i.days+1)i.error=!0;else{for(var l=Math.max(i.startFrom,1);l<a.length;l++){"_Co","mpChange ","_","BaseChange ",r.F0V(109);var h=r.G0V(16,10,0,1,25);a[l]["_BaseChange "+i.name]=a[l].Close/a[l-h].Close-1,(s=a[l][n])&&(s.Close||0===s.Close)&&(s=s.Close),r.H0V(0),(o=a[r.G0V(l,1)][n])&&(o.Close||0===o.Close)&&(o=o.Close),r.H0V(34),a[l]["_CompChange "+i.name]=r.A0V(s,o,1)}for(t.Studies.MA("ma",i.days,"_BaseChange "+i.name,0,"_MA Base",e,i),t.Studies.MA("ma",i.days,"_CompChange "+i.name,0,"_MA Comp",e,i),l=Math.max(i.startFrom,i.days);l<a.length;l++)"_M","A ","C","omp ","_Com","pCh","ange ","_MA"," ","Base"," ",a[l]["_COVARn "+i.name]=(a[l]["_BaseChange "+i.name]-a[l]["_MA Base "+i.name])*(a[l]["_CompChange "+i.name]-a[l]["_MA Comp "+i.name]),a[l]["_VARn "+i.name]=Math.pow(a[l]["_CompChange "+i.name]-a[l]["_MA Comp "+i.name],2);for(t.Studies.MA("ma",i.days,"_COVARn "+i.name,0,"_COVAR",e,i),t.Studies.MA("ma",i.days,"_VARn "+i.name,0,"_VAR",e,i),l=Math.max(i.startFrom,2*i.days-1);l<a.length;l++)"_","C","OVA","R ","Re","sult"," ",a[l]["Result "+i.name]=a[l]["_COVAR "+i.name]/a[l]["_VAR "+i.name]}},397996653,253534127,a=2;for(var n=1;397996653!==r.H5O(n.toString(),n.toString().length,61237);n++)"#","F","F000","0",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{correl:{name:"Beta",range:"SPY",calculateFN:t.Studies.calculateCorrelationCoefficient,outputs:{}},"Perf Idx":{name:"Beta",centerline:2,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculatePerformance,inputs:{Period:391,"Comparison Symbol":"#FF0000"},outputs:{Result:"#00DD00",Gain:"SPY",Loss:"#00DD00"},deferUpdate:!1},Beta:{name:"Beta",centerline:7,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculateBeta,inputs:{Period:72,"Comparison Symbol":"#FF0000"},deferUpdate:!1}}),a+=2;253534127!==r.H5O(a.toString(),a.toString().length,96261)&&("#FF000","0","B","e","ta","#","00DD","0","0","S","P","Y",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{correl:{name:"Beta",range:"SPY",calculateFN:t.Studies.calculateCorrelationCoefficient,outputs:{}},"Perf Idx":{name:"Beta",centerline:2,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculatePerformance,inputs:{Period:391,"Comparison Symbol":"#FF0000"},outputs:{Result:"#00DD00",Gain:"SPY",Loss:"#00DD00"},deferUpdate:!1},Beta:{name:"Beta",centerline:7,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculateBeta,inputs:{Period:72,"Comparison Symbol":"#FF0000"},deferUpdate:!1}})),t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{correl:{name:"Correlation Coefficient",range:"-1 to 1",calculateFN:t.Studies.calculateCorrelationCoefficient,outputs:{}},"Perf Idx":{name:"Performance Index",centerline:1,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculatePerformance,inputs:{Period:120,"Comparison Symbol":"SPY"},outputs:{Result:"auto",Gain:"#00DD00",Loss:"#FF0000"},deferUpdate:!0},Beta:{name:"Beta",centerline:1,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculateBeta,inputs:{Period:20,"Comparison Symbol":"SPY"},deferUpdate:!0}})}else"comparisonStudies feature requires f","irst activating pri","ceRelative feature.",console.error("comparisonStudies feature requires first activating priceRelative feature.");else{-1800214678,-720651907,i=2;for(var s=1;-1800214678!==r.N5O(s.toString(),s.toString().length,72917);s++)console.error(""),i+=2;-720651907!==r.N5O(i.toString(),i.toString().length,53667)&&console.error(""),console.error("comparisonStudies feature requires first activating studies feature.")}},k=function(e){var t;Te.k8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateCoppock=function(e,i){var a,r,n,s,o,l,h,c=Te;if("_S","u","m ",c.X8b(),a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=parseInt(i.inputs["Long RoC"],10))||(n=14),(s=parseInt(i.inputs["Short RoC"],10))||(s=11),(o=i.days)||(o=10),!(n<s))if(a.length<Math.max(s,n,o)+1)i.error=!0;else{for(var u=Math.max(i.startFrom,n);u<a.length;u++)if(c.H0V(0),l=a[c.G0V(u,s)][r],c.H0V(0),h=a[c.G0V(u,n)][r],l&&h){c.H0V(2);var d=c.G0V(95,5);a[u]["_Sum "+i.name]=d*(a[u][r]/l+a[u][r]/h-2)}t.Studies.MA("weighted",o,"_Sum "+i.name,0,"Result",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Coppock:{name:"Coppock Curve",calculateFN:t.Studies.calculateCoppock,inputs:{Period:10,Field:"field","Short RoC":11,"Long RoC":14}}})):("c","oppock feature requires first activating studies f","eat","ure.",console.error("coppock feature requires first activating studies feature."))},A=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#699","1","5","8",t.Studies.calculateDarvas=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x=Te;x.k8b(),a="P",a+="ro",a+="fit",r="Darva",r+="s",n=i.chart.scrubbed,s=0,o=parseInt(i.inputs["ATH Lookback Period"],10),i.inputs["Volume Spike"]&&("V","ol","u","me",t.Studies.MA("simple",o,"Volume",0,"ADV",e,i)),x.F0V(52);var b=x.G0V(8,99,8);for(l=parseFloat(i.inputs["Volume % of Avg"])/b,h="none",c={},u=null,d=null,p=null,g=parseFloat(i.inputs["Level Offset"]),!1,m={},[r,"Ghost",a,"Loss","ATH","ADV","Spike"].forEach((function(e){x.k8b(),x.H0V(52);var t=x.G0V(42940,2250,4294);x.F0V(117);x.A0V(8,1623,16,19,3160);x.F0V(52);var a=x.G0V(102,1617,6);m[e]=e+(t>=a?" ":761.33)+i.name})),f=i.startFrom-1;f>0;f--){if(!(y=n[f])[m.Darvas]&&!y[m.Ghost]){s=y[m.ATH]||0,d=y[m.Profit],p=y[m.Loss];break}for(var C in m)y[C]=null}for(;f<n.length;f++)if("Volume Sp","ik","e",v=n[f]){if(parseFloat(i.inputs["Price Minimum"])<=n[s].Close){if("d","arv","a","s","hi","g","h/low","Exi","t Field",!u||u.End&&f!=u.End+1||(n[f-1].Close>c.High?c={State:1,High:2*c.High-c.Low,Low:c.High,Start:f,End:2*c.End-c.Start+1}:u=null,u&&(v[m.Ghost]=t.clone(c),c.State=0,n[c.End]&&(n[c.End][m.Ghost]=t.clone(c)),u={Start:c.Start,End:c.End},d=c.High+g,(!p||p<c.Low-g)&&(p=c.Low-g))),v[m.Profit]=d,v[m.Loss]=p,(v.Close>=d||"high/low"==i.inputs["Exit Field"]&&v.High>=d)&&(d=null),"none"==h&&f==s+3&&!n[s+2][m.Darvas]&&!n[s+1][m.Darvas]&&!n[s][m.Darvas]&&n[s].High>v.High&&("hi","gh",h="high"),"high"==h&&(v.High>n[s].High?h="none":n[f-3].Low<n[f-2].Low&&n[f-3].Low<n[f-1].Low&&n[f-3].Low<v.Low&&("Darv","as established",":",c={State:1,High:n[s].High,Low:n[f-3].Low,Start:s},n[s][m.Darvas]=t.clone(c),h="darvas",u&&(u.End>f&&n[u.Start]&&(v[m.Ghost]=t.clone(n[u.Start][m.Ghost]),v[m.Ghost].End=f,n[u.End]&&delete n[u.End][m.Ghost]),v[m.Ghost].State=0,n[u.Start][m.Ghost].End=f,u=null),d=c.High+g,(!p||p<c.Low-g)&&(p=c.Low-g))),"darvas"==h&&("n","o","n","e","n","o","n","e","Exit Fi","el","d",v.Close>c.High||"high/low"==i.inputs["Exit Field"]&&v.High>c.High?u={}:(v.Close<c.Low||"high/low"==i.inputs["Exit Field"]&&v.Low<c.Low)&&(h="none"),u?h="none":"none"==h&&(d=null,p=null),i.inputs["Ghost Boxes"]||(u=null),"none"==h)){for(var S=c.Start+1;S<f;S++)n[S][m.Darvas]=t.clone(c);c.State=0,c.End=f,v[m.Darvas]=t.clone(c),v[m.ATH]=s;continue}p&&(v.Close<c.Low||"high/low"==i.inputs["Exit Field"]&&v.Low<c.Low)&&("darvas"==h&&(h="none"),(v.Close<p||"high/low"==i.inputs["Exit Field"]&&v.Low<p)&&(d=null,p=null),u&&(u.End>f&&n[u.Start]&&(v[m.Ghost]=t.clone(n[u.Start][m.Ghost]),v[m.Ghost].End=f,n[u.End]&&("Ghost End r","emoved:",delete n[u.End][m.Ghost])),x.F0V(15),v[m.Ghost].State=x.A0V(969897152,"0"),n[u.Start][m.Ghost].End=f,u=null))}if(v.High>=n[s].High&&(s=f),(f<3||v.High>=n[f-1].High&&v.High>=n[f-2].High&&v.High>=n[f-3].High)&&f-s>=o){s=f;for(var w=0;w<o&&!(f-w<0);w++)n[f-w].High>n[s].High&&(x.F0V(0),s=x.G0V(f,w));0}i.inputs["Volume Spike"]&&f>o&&f==s&&v[m.ADV]*l<v.Volume&&("Volu","me Sp","ike:",v[m.Spike]=1),v[m.ATH]=s}},t.Studies.displayDarvas=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V=Te;(r=t.Studies.determineColor(i.outputs.Levels))&&"auto"!=r&&!t.isTransparent(r)||(r=e.defaultColor),(n=t.Studies.determineColor(i.outputs.Darvas))&&"auto"!=n&&!t.isTransparent(n)||(n=e.defaultColor),(s=t.Studies.determineColor(i.outputs.Ghost))&&"auto"!=s&&!t.isTransparent(s)||(s=e.defaultColor),o=e.panels[i.panel],l=i.getContext(e),V.H0V(2);var O=V.A0V(1,1);if((d=e.layout.candleWidth-O)<2&&(V.H0V(0),d=V.A0V("1",0)),e.startClip(i.panel),i.inputs["Stop Levels"]){for(l.setLineDash&&l.setLineDash([2,2]),l.lineWidth=2,l.strokeStyle=r,l.beginPath(),h=0;h<a.length;h++)"Los","s ","Los","s ",c=a[h],V.F0V(82),p=a[V.A0V(h,"1")],c&&(u=c["Loss "+i.name]?Math.floor(e.pixelFromPrice(c["Loss "+i.name],o)):null,g=p&&p["Loss "+i.name]?Math.floor(e.pixelFromPrice(p["Loss "+i.name],o)):null,u&&(c.candleWidth&&(d=Math.floor(Math.max(1,c.candleWidth))),f=Math.floor(e.pixelFromBar(h,o.chart)+d/2),m=Math.floor(e.pixelFromBar(h,o.chart)-d/2),g&&g>=u?l.lineTo(m,u):0===h?l.moveTo(e.chart.left,u):l.moveTo(m,u),l.lineTo(f,u)));l.stroke(),l.setLineDash&&l.setLineDash([]),l.lineWidth=1}V.F0V(66),y=-V.A0V(2147483647,"10"),x=0,C=-10,w=0,A=!1,D=!1,V.H0V(0);V.A0V(1233,7);V.H0V(38);var I=V.G0V(388461216,5,5,776922427);V.H0V(52);var L=V.G0V(52620,8769,52620);V.H0V(118);var H=V.G0V(0,10,14,131,11);for(M=l.measureText(545.38!="3529">>I?"▲":L).width/H,T=0,h=0;h<a.length;h++)if(a[h]){if((a[h].Close||0===a[h].Close)&&(T=h),a[h]["Spike "+i.name]&&(l.fillStyle=n,l.textBaseline="bottom",F=e.pixelFromPrice(a[h].High,e.chart.panel),l.fillText("▼",e.pixelFromBar(h)-M,F-5)),a[h].candleWidth&&(d=Math.floor(Math.max(1,a[h].candleWidth))),a[h]["Darvas "+i.name])if(1!=(c=a[h]["Darvas "+i.name]).State||A){if(0===c.State){V.F0V(0);var E=V.G0V(13,11);x=Math.floor(e.pixelFromBar(h,o.chart)+d/E)-y,v=Math.floor(e.pixelFromPrice(c.High,o)),b=Math.floor(e.pixelFromPrice(c.Low,o))-v,l.strokeStyle=n,l.fillStyle=n,i.inputs["Stop Levels"]?l.globalAlpha=.3:(l.strokeRect(y,v,x,b),V.F0V(21),l.globalAlpha=V.G0V(1,"0.2")),l.fillRect(y,v,x,b),l.globalAlpha=1,A=!1}}else y=Math.floor(e.pixelFromBar(h,o.chart)-d/2),v=Math.floor(e.pixelFromPrice(c.High,o)),b=Math.floor(e.pixelFromPrice(c.Low,o))-v,A=!0;a[h]["Ghost "+i.name]&&i.inputs["Ghost Boxes"]&&(1!=(c=a[h]["Ghost "+i.name]).State||D?0===c.State&&(c.Start==c.End&&(C=Math.floor(e.pixelFromBar(h,o.chart)-d/2)),w=Math.floor(e.pixelFromBar(h,o.chart)+d/2)-C,S=Math.floor(e.pixelFromPrice(c.High,o)),k=Math.floor(e.pixelFromPrice(c.Low,o))-S,l.strokeStyle=s,l.fillStyle=s,i.inputs["Stop Levels"]?l.globalAlpha=.3:(l.strokeRect(C,S,w,k),l.globalAlpha=.2),l.fillRect(C,S,w,k),l.globalAlpha=1,D=!1):(C=Math.floor(e.pixelFromBar(h,o.chart)-d/2),S=Math.floor(e.pixelFromPrice(c.High,o)),w=Math.floor((c.End-c.Start+1)*e.layout.candleWidth+d/2),k=Math.floor(e.pixelFromPrice(c.Low,o))-S,D=!0))}if(A){V.H0V(9);var N=V.A0V(9,7,18,18);x=Math.floor(e.pixelFromBar(T,o.chart)+d/N)-y,l.strokeStyle=n,l.fillStyle=n,i.inputs["Stop Levels"]?l.globalAlpha=.3:(l.beginPath(),V.F0V(18),l.moveTo(V.G0V(2,x,y),v),l.lineTo(y,v),V.F0V(2),l.lineTo(y,V.G0V(v,b)),V.F0V(18),l.lineTo(V.A0V(2,x,y),V.G0V(v,b,V.H0V(2))),l.stroke(),V.F0V(0),l.globalAlpha=V.A0V("0.2",0)),V.F0V(21),l.fillRect(y,v,V.G0V(x,2),b),l.globalAlpha=1}D&&("Sto","p ","Lev","els",l.strokeStyle=s,l.fillStyle=s,i.inputs["Stop Levels"]?l.globalAlpha=.3:(l.strokeRect(C,S,w,k),l.globalAlpha=.2),l.fillRect(C,S,w,k),V.H0V(37),l.globalAlpha=V.A0V("1",0)),(A||D)&&(i.inputs["Stop Levels"]&&(l.setLineDash&&l.setLineDash([2,2]),l.lineWidth=2,l.strokeStyle=r,_=Math.floor(e.pixelFromBar(T-1,o.chart)+d/2),u&&(l.beginPath(),l.moveTo(_,u),l.lineTo(A?y+2*x:C+w,u),l.stroke()),l.setLineDash&&l.setLineDash([]),l.lineWidth=1),A=!1,D=!1),P=2;for(var R=1;-386120481!==V.H5O(R.toString(),R.toString().length,91490);R++)e.endClip(),P+=2;73310396!==V.H5O(P.toString(),P.toString().length,8400)&&e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Darvas:{name:"Darvas Box",underlay:!0,calculateFN:t.Studies.calculateDarvas,seriesFN:t.Studies.displayDarvas,inputs:{"ATH Lookback Period":100,"Exit Field":["close","high/low"],"Ghost Boxes":!0,"Stop Levels":!1,"Level Offset":.01,"Price Minimum":5,"Volume Spike":!1,"Volume % of Avg":400},outputs:{Darvas:"#5F7CB8",Ghost:"#699158",Levels:"auto"},customRemoval:!0,attributes:{"Price Minimum":{min:.01,step:.01},yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}})):("darvasBox feature"," requires first ","act","ivating studies feature.",console.error("darvasBox feature requires first activating studies feature."))},D=function(e){var t;Te.X8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("m","a",t.Studies.calculateDetrendedPrice=function(e,i){var a,r,n,s,o,l,h,c=Te;if("Cl","os","e","f","ield",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),2039175657,c.H0V(21),n=c.G0V(1,"1662261823"),s=2;for(var u=1;2039175657!==c.H5O(u.toString(),u.toString().length,59547);u++)o=Math.floor(i.days/2+1),s+=2;c.H5O(s.toString(),s.toString().length,61356)!==n&&(o=Math.floor((i.days+0)%7)),t.Studies.MA(i.inputs["Moving Average Type"],i.days,r,-o,"MA",e,i);for(var d=Math.max(i.days-o-1,i.startFrom-o);d<a.length-o;d++)d<0||((l=a[d][r])&&"object"==Me(l)&&(l=l[i.subField]),h=a[d]["MA "+i.name],!l&&0!==l||!h&&0!==h||(c.H0V(0),a[d]["Result "+i.name]=c.G0V(l,h)))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Detrended:{name:"Detrended Price Oscillator",calculateFN:t.Studies.calculateDetrendedPrice,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}}})):("detrended ","featur","e requires firs","t activating studies feature.",console.error("detrended feature requires first activating studies feature."))},M=function(e){var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,Te.X8b(),t.Studies?("Di","sparity Index",t.Studies.calculateDisparity=function(e,i){var a,r,n,s,o,l=Te;if("_",l.k8b(),"MA",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{1419649105,l.F0V(66),r=-l.G0V(2147483647,"1901054851"),n=2;for(var h=1;1419649105!==l.H5O(h.toString(),h.toString().length,82517);h++)"f","ie","l","d",-(s=i.inputs.Field)&&"field"!==s&&(s="field"),n+=2;l.H5O(n.toString(),n.toString().length,77953)!==r&&("Clos","e",(s=i.inputs.Field)&&"field"!=s||(s="Close")),t.Studies.MA(i.inputs["Moving Average Type"],i.days,s,0,"_MA",e,i);for(var c=Math.max(i.startFrom,i.days-1);c<a.length;c++)if("Result"," ",a[c]&&(o=a[c]["_MA "+i.name])){l.F0V(5);var u=l.G0V(32,81,13);a[c]["Result "+i.name]=u*(a[c][s]/o-1)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Disparity:{name:"Disparity Index",calculateFN:t.Studies.calculateDisparity,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}}})):("d","isparity feature requires first activating studies feature.",console.error("disparity feature requires first activating studies feature."))},T=function(e){var t;t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ,Te.k8b(),t.Studies?(t.Studies.calculateEaseOfMovement=function(e,i){var a,r,n,s,o,l,h=Te;if((a=i.chart.scrubbed).length<i.days)i.error=!0;else{for(var c=Math.max(1,i.startFrom);c<a.length;c++){h.H0V(14);var u=h.G0V(13,11);r=(a[c].High+a[c].Low)/u,h.H0V(119);var d=h.A0V(3,1,30,16,19);h.H0V(24);var p=h.A0V(2,2,1,4,1);n=(a[c-d].High+a[c-1].Low)/p,h.F0V(0),s=h.G0V(r,n),h.F0V(2);var g=h.G0V(25e6,75e6);o=a[c].Volume/g/(a[c].High-a[c].Low),h.H0V(4),l=h.A0V(s,o),isFinite(l)?a[c]["_EOM1 "+i.name]=l:a[c]["_EOM1 "+i.name]=NaN}t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_EOM1 "+i.name,0,"Result",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{EOM:{name:"Ease of Movement",calculateFN:t.Studies.calculateEaseOfMovement,inputs:{Period:14,"Moving Average Type":"ma"}}})):console.error("easeOfMovement feature requires first activating studies feature.")},F=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("#FF0","0","00","a","u","to","Ehler Fis","h","er Transform",t.Studies.calculateEhlerFisher=function(e,t){var i,a,r,n,s,o=Te;if(o.k8b(),(i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{if(a=0,t.startFrom>1){o.H0V(5);var l=o.A0V(16,0,15);a=i[t.startFrom-l]["_n "+t.name]}for(var h=t.startFrom;h<i.length&&("_","n ",!(r=i[h]).futureTick);h++)if(h<t.days-1)"EF Trigg","er ",r["EF "+t.name]=r["EF Trigger "+t.name]=a;else{n=p(t.days,h),o.F0V(0);var c=o.A0V(15,13);o.H0V(2);var u=o.A0V(1,1);o.H0V(0);var d=o.A0V(18,17);(a=.33*c*(((i[h].High+i[h].Low)/("2"|u)-n[0])/Math.max(1e-6,n[d]-n[0])-.5)+.67*a)>0?(o.H0V(21),a=Math.min(a,o.G0V(1,"0.9999"))):a<0&&(a=Math.max(a,-.9999)),s=h?i[h-1]["EF "+t.name]:0,r["EF "+t.name]=.5*Math.log((1+a)/(1-a))+.5*s,r["EF Trigger "+t.name]=s,r["_n "+t.name]=a}}function p(e,t){var a,r,n;a=Number.MAX_VALUE,o.F0V(58);var s=o.A0V(15,166,11);r=Number.MAX_VALUE*s,o.k8b();for(var l=t-e+1;l<=t;l++){o.H0V(0);var h=o.A0V(10,8);n=(i[l].High+i[l].Low)/h,a=Math.min(a,n),r=Math.max(r,n)}return[a,r]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Ehler Fisher":{name:"Ehler Fisher Transform",calculateFN:t.Studies.calculateEhlerFisher,inputs:{Period:10},outputs:{EF:"auto","EF Trigger":"#FF0000"}}})):console.error("ehlerFisher feature requires first activating studies feature.")},_=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Elder Impu","lse Sy","stem","Elder Ray"," I","ndex","Elder F","orce ","Index",t.Studies.calculateElderImpulse=function(e,i){var a,r,n,s,o;a=i.chart.scrubbed,Te.k8b(),r=i.outputs.Bullish,n=i.outputs.Bearish,s=i.outputs.Neutral,t.Studies.MA("exponential",13,"Close",0,"_MA",e,i),i.macd=new t.Studies.StudyDescriptor("_"+i.name,"macd",i.panel),i.macd.chart=i.chart,i.macd.days=i.days,i.macd.startFrom=i.startFrom,i.macd.inputs={"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},i.macd.outputs={_MACD:null,_Signal:null},t.Studies.calculateMACD(e,i.macd);for(var l=i.startFrom;l<a.length;l++)"_","h","ist","_","M","A"," ","_","h","i","st",o=0===l?s:a[l]["_MA "+i.name]>a[l-1]["_MA "+i.name]&&a[l]["_"+i.name+"_hist"]>a[l-1]["_"+i.name+"_hist"]?r:a[l]["_MA "+i.name]<a[l-1]["_MA "+i.name]&&a[l]["_"+i.name+"_hist"]<a[l-1]["_"+i.name+"_hist"]?n:s,a[l]["Result "+i.name]=o},t.Studies.calculateElderRay=function(e,i){var a;if((a=i.chart.scrubbed).length<i.days)i.error=!0;else{t.Studies.MA("exponential",i.days,"Close",0,"_EMA",e,i);for(var r=Math.max(i.startFrom,i.days-1);r<a.length;r++)"_h","i","st","2",a[r][i.name+"_hist1"]=a[r].High-a[r]["_EMA "+i.name],a[r][i.name+"_hist2"]=a[r].Low-a[r]["_EMA "+i.name];i.outputMap={},i.outputMap[i.name+"_hist1"]="",i.outputMap[i.name+"_hist2"]=""}},t.Studies.calculateElderForce=function(e,i){var a;if((a=i.chart.scrubbed).length<i.days)i.error=!0;else{for(var r=Math.max(1,i.startFrom);r<a.length;r++){Te.F0V(120);var n=Te.G0V(15,184,4,14,16);a[r]["_EF1 "+i.name]=a[r].Volume*(a[r].Close-a[r-n].Close)}t.Studies.MA("exponential",i.days,"_EF1 "+i.name,0,"Result",e,i)}},t.Studies.initElderImpulse=function(e,i,a,r,n,s){var o;return o=t.Studies.initializeFN(e,i,a,r,n,s),n.calculateOnly||(e.chart.customChart={chartType:"colored_bar",colorFunction:function(e,t,i){var a;return(a=t["Result "+o.name])&&"object"==Me(a)&&(a=a.color),a}},e.setMainSeriesRenderer()),o},t.Studies.displayElderForce=function(e,i,a){var r,n,s,o;t.Studies.displaySeriesAsLine(e,i,a),r=t.Studies.determineColor(i.outputs.Result),n=e.panels[i.panel],s=i.getYAxis(e),o={skipTransform:n.name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:0,color:r,yAxis:s},!i.highlight&&e.highlightedDraggable&&(o.opacity=.3),o.direction=1,t.preparePeakValleyFill(e,o),o.direction=-1,Te.k8b(),t.preparePeakValleyFill(e,o)},t.Studies.displayElderRay=function(e,i,a){var r,n,s,o,l,h,c;r=e.panels[i.panel],n=i.getContext(e),s=i.getYAxis(e),o=e.pixelFromPrice(0,r,s),(l=e.layout.candleWidth-2)<2&&(l=1),e.canvasColor("stx_histogram"),h=n.fillStyle,i.underlay||(n.globalAlpha=1),e.startClip(i.panel),!i.highlight&&e.highlightedDraggable&&(Te.H0V(21),n.globalAlpha*=Te.G0V(1,"0.3"));for(var u=0;u<a.length;u++)"_hist","2","_hi","s","t","1","Elde","r Bu","l","l Power","_h","ist","2","_hist","2","_h","ist","1",(c=a[u])&&(c.candleWidth&&(l=Math.floor(Math.max(1,c.candleWidth-2))),c[i.name+"_hist1"]>0&&d(u,0,"Elder Bull Power","_hist1"),c[i.name+"_hist2"]<0&&d(u,0,"Elder Bear Power","_hist2"),c[i.name+"_hist1"]<0&&d(u,.1,"Elder Bull Power","_hist1"),c[i.name+"_hist2"]>0&&d(u,.1,"Elder Bear Power","_hist2"));function d(a,h,u,d){Te.X8b(),n.fillStyle=t.Studies.determineColor(i.outputs[u]),n.fillRect(Math.floor(e.pixelFromBar(a,r.chart)-l/2+l*h),Math.floor(o),Math.floor(l*(1-2*h)),Math.floor(e.pixelFromPrice(c[i.name+d],r,s)-o))}e.endClip(),n.fillStyle=h},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Elder Force":{name:"Elder Force Index",calculateFN:t.Studies.calculateElderForce,seriesFN:t.Studies.displayElderForce,inputs:{Period:13}},"Elder Ray":{name:"Elder Ray Index",seriesFN:t.Studies.displayElderRay,calculateFN:t.Studies.calculateElderRay,centerline:0,inputs:{Period:13},outputs:{"Elder Bull Power":"#00DD00","Elder Bear Power":"#FF0000"}},"Elder Impulse":{name:"Elder Impulse System",calculateFN:t.Studies.calculateElderImpulse,initializeFN:t.Studies.initElderImpulse,seriesFN:null,customRemoval:!0,underlay:!0,inputs:{},outputs:{Bullish:"#8BC176",Bearish:"#DD3E39",Neutral:"#5F7CB8"},removeFN:function(e,t){e.chart.customChart=null,Te.k8b(),e.setMainSeriesRenderer()}}})):("elder feature requires f","irst activating studies feature.",console.error("elder feature requires first activating studies feature."))},P=function(e){var t,i;if(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,Te.k8b(),t.Studies)t.Studies.calculateFractalChaos=function(e,t){var i,a,r,n,s,o,l,h=Te;if(i=t.chart.scrubbed,a=0,r=0,n=0,t.startFrom&&"Fractal Chaos Bands"==t.type){"Fra","ctal H","i","gh ",h.F0V(13);var c=h.A0V(5,1,5,0);a=i[t.startFrom-c]["Fractal High "+t.name],h.F0V(11);var u=h.G0V(299,15,0,20);r=i[t.startFrom-u]["Fractal Low "+t.name]}for(var d=Math.max(4,t.startFrom);d<i.length&&!i[d].futureTick;d++){for(s=!isNaN(i[d].High),o=!isNaN(i[d].Low),(s||o)&&(i[d]["Result "+t.name]=0),n=0,l=0;l<=d&&i[d-l]&&!(i[d-l].High>i[d-2].High)&&!(l<2&&i[d-l].High==i[d-2].High);l++)if(i[d-l].High<i[d-2].High&&n++,4==n){a=i[d-2].High;break}for("Fractal Chaos Bands"==t.type?s&&(i[d]["Fractal High "+t.name]=a>0?a:null):4==n&&(i[d]["Result "+t.name]=1),n=0,l=0;l<=d&&i[d-l]&&!(i[d-l].Low<i[d-2].Low)&&!(l<2&&i[d-l].Low==i[d-2].Low);l++)if(i[d-l].Low>i[d-2].Low&&n++,4==n){r=i[d-2].Low;break}"Fractal Chaos Bands"==t.type?o&&(i[d]["Fractal Low "+t.name]=r>0?r:null):4==n&&(i[d]["Result "+t.name]=-1)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Fractal Chaos":{name:"Fractal Chaos Oscillator",range:"-1 to 1",calculateFN:t.Studies.calculateFractalChaos,inputs:{},centerline:null},"Fractal Chaos Bands":{name:"Fractal Chaos Bands",overlay:!0,calculateFN:t.Studies.calculateFractalChaos,seriesFN:t.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Fractal High":"auto","Fractal Low":"auto","Fractal Channel":"auto"}}});else{-22747564,528816766,i=2;for(var a=1;-22747564!==Te.N5O(a.toString(),a.toString().length,71595);a++)console.error("fractalChaos feature requires first activating studies feature."),i+=2;528816766!==Te.N5O(i.toString(),i.toString().length,72695)&&console.error("")}},V=function(e){var t,i;if((t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies)"High"," Min","us ","Low","Ver","tical"," Horizontal Filter","Willi","am","s"," %R","au","t","o","a","u","t","o",t.Studies.calculateMaxHighMinLow=function(e,t){var i,a,r,n,s,o,l,h=Te;if("H","igh ","Period",i=t.chart.scrubbed,a=t.days,r=t.days,t.inputs["High Period"]&&(a=t.inputs["High Period"]),t.inputs["Low Period"]&&(r=t.inputs["Low Period"]),i.length<Math.max(a,r)+1)t.error=!0;else{n=Number.MAX_VALUE,h.H0V(121);var c=h.A0V(7,4,8,12);if(h.k8b(),s=Number.MAX_VALUE*c,t.startFrom>1){for(o=1;o<a;o++)t.startFrom-o>=0&&(s=Math.max(s,i[t.startFrom-o].High));for(o=1;o<r;o++)t.startFrom-o>=0&&(n=Math.min(n,i[t.startFrom-o].Low))}for(var u=Math.max(0,t.startFrom-1);u<i.length;u++){if("VT HZ Fil","ter","Donchian ","W","idth","H","H","V",s=Math.max(s,i[u].High),n=Math.min(n,i[u].Low),u>=a&&i[u-a].High==s)for(s=i[u].High,o=1;o<a;o++)s=Math.max(s,i[u-o].High);if(u>=r&&i[u-r].Low==n)for(n=i[u].Low,o=1;o<r;o++)n=Math.min(n,i[u-o].Low);if(l=0,"HHV"==t.type)l=s;else if("LLV"==t.type)l=n;else if("Donchian Width"==t.type)h.H0V(0),l=h.A0V(s,n);else if("GAPO"==t.type||"Gopala"==t.type)l=Math.log(s-n)/Math.log(r);else{if("VT HZ Filter"==t.type){"_M","HML ",h.H0V(0),l=h.A0V(s,n),i[u]["_MHML "+t.name]=l;continue}if("Williams %R"==t.type){"Res","u","lt"," ",h.F0V(14),l=h.A0V(1e3,1100)*(s-i[u].Close)/(s-n),i[u]["Result "+t.name]=l;continue}}if(u==i.length-1)break;i[u+1].futureTick||("Do","nchian Channel","Donchian Channel"==t.type?("Donchian"," Me","dian ",h.F0V(122),i[h.A0V("1",1,u)]["Donchian High "+t.name]=s,h.F0V(107),i[h.G0V(u,"1")]["Donchian Low "+t.name]=n,h.F0V(2),i[h.G0V(u,1)]["Donchian Median "+t.name]=h.G0V("2",n,s,h.F0V(123))):(h.F0V(2),i[h.A0V(u,1)]["Result "+t.name]=l))}}},t.Studies.calculateVerticalHorizontalFilter=function(e,i){var a,r,n,s;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{i.mhml=new t.Studies.StudyDescriptor(i.name,i.type,i.panel),i.mhml.chart=i.chart,i.mhml.days=i.days,i.mhml.startFrom=i.startFrom,i.mhml.inputs={},i.mhml.outputs={_MHML:null},t.Studies.calculateMaxHighMinLow(e,i.mhml),r=0,n=[];for(var o=Math.max(1,i.startFrom-i.days);o<a.length;o++)s=Math.abs(a[o].Close-a[o-1].Close),n.push(s),r+=s,n.length==i.days&&("_","MHML ","R","esul","t"," ",a[o]["Result "+i.name]=a[o]["_MHML "+i.name]/r,r-=n.shift())}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Donchian Channel":{name:"Donchian Channel",overlay:!0,calculateFN:t.Studies.calculateMaxHighMinLow,seriesFN:t.Studies.displayChannel,inputs:{"High Period":20,"Low Period":20,"Channel Fill":!0},outputs:{"Donchian High":"auto","Donchian Median":"auto","Donchian Low":"auto"}},"Donchian Width":{name:"Donchian Width",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{"High Period":20,"Low Period":20}},GAPO:{name:"Gopalakrishnan Range Index",calculateFN:t.Studies.calculateMaxHighMinLow},HHV:{name:"Highest High Value",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14}},LLV:{name:"Lowest Low Value",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14}},"Williams %R":{name:"Williams %R",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:-20,studyOverBoughtColor:"auto",studyOverSoldValue:-80,studyOverSoldColor:"auto"}}},"VT HZ Filter":{name:"Vertical Horizontal Filter",calculateFN:t.Studies.calculateVerticalHorizontalFilter,inputs:{Period:28}},"High-Low":{name:"High Minus Low",calculateFN:function(e,t){var i;i=t.chart.scrubbed;for(var a=t.startFrom;a<i.length;a++)i[a]["Result "+t.name]=i[a].High-i[a].Low},inputs:{}}});else{998437419,1807052475,i=2;for(var a=1;998437419!==Te.H5O(a.toString(),a.toString().length,19025);a++)console.error(""),i+=2;1807052475!==Te.H5O(i.toString(),i.toString().length,95086)&&console.error(""),console.error("highLowStudies feature requires first activating studies feature.")}},O=function(e){var t;t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ,Te.X8b(),t.Studies?("#80","8","00","0","#F","F0","0","00","Ichimoku C","louds",t.Studies.calculateIchimoku=function(e,t){var i,a,r,n,s,o,l,h,c=Te;for("Leading ","Sp","an B Period","Base Line"," Pe","rio","d",i=t.chart.scrubbed,a={Base:Number(t.inputs["Base Line Period"]),Conv:Number(t.inputs["Conversion Line Period"]),LeadB:Number(t.inputs["Leading Span B Period"]),Lag:Number(t.inputs["Lagging Span Period"])},r=t.startFrom;r<i.length;r++)if("Base"," Li","ne ",i[r]){n=g(a.Conv,r),c.F0V(100);var u=c.G0V(19,11,209,0);c.H0V(14);var d=c.G0V(5,3);i[r]["Conversion Line "+t.name]=(n[u]+n[0])/d,n=g(a.Base,r),c.H0V(8);var p=c.G0V(0,1,3);i[r]["Base Line "+t.name]=(n[1]+n[0])/p,r<a.Lag||(i[r-a.Lag]["Lagging Span "+t.name]=i[r].Close)}function g(e,t){var a,r;a=Number.MAX_VALUE,c.H0V(1);var n=c.A0V(3,17,19);r=Number.MAX_VALUE*n;for(var s=t-e+1;s<=t;s++)s<0||(a=Math.min(a,i[s].Low),r=Math.max(r,i[s].High));return[a,r]}for(s=[],r=Math.max(0,t.startFrom-a.Base);r<i.length;r++){"Bas","e Line ","Convers","ion Line ",n=g(a.LeadB,r),o=(i[r]["Conversion Line "+t.name]+i[r]["Base Line "+t.name])/2,c.H0V(124),l=(n[c.G0V(2,17,18)]+n[0])/2,i[r+a.Base]?(i[r+a.Base]["Leading Span A "+t.name]=o,i[r+a.Base]["Leading Span B "+t.name]=l):("Leading Sp","an A"," ",(h={})["Leading Span A "+t.name]=o,h["Leading Span B "+t.name]=l,s.push(h))}t.appendFutureTicks(e,s)},t.Studies.displayIchimoku=function(e,i,a){var r,n,s,o,l,h,c;r="Leading Span A "+i.name,Te.X8b(),n="Leading Span B "+i.name,s=t.Studies.determineColor(i.outputs[i.outputMap[r]]),o=t.Studies.determineColor(i.outputs[i.outputMap[n]]),l=e.panels[i.panel],h=i.getYAxis(e),c={topBand:r,bottomBand:n,topColor:s,bottomColor:o,skipTransform:l.name!=i.chart.name,topAxis:h,bottomAxis:h,opacity:.3},!i.highlight&&e.highlightedDraggable&&(c.opacity*=.3),t.fillIntersecting(e,i.panel,c),t.Studies.displaySeriesAsLine(e,i,a)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Ichimoku Clouds":{name:"Ichimoku Clouds",overlay:!0,calculateFN:t.Studies.calculateIchimoku,seriesFN:t.Studies.displayIchimoku,inputs:{"Conversion Line Period":9,"Base Line Period":26,"Leading Span B Period":52,"Lagging Span Period":26},outputs:{"Conversion Line":"#0000FF","Base Line":"#FF0000","Leading Span A":"#00FF00","Leading Span B":"#FF0000","Lagging Span":"#808000"}}})):("ichimoku feature requires fi","rst activating studies feature.",console.error("ichimoku feature requires first activating studies feature."))},I=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("aut","o","a","u","t","o","Intraday Mom","entum Index",t.Studies.calculateIntradayMomentum=function(e,t){var i,a,r,n,s,o,l=Te;if(i=t.chart.scrubbed,a=t.days,l.k8b(),i.length<a+1)t.error=!0;else{if(r=0,n=0,t.startFrom>1){l.H0V(0);var h=l.A0V(10,9);r=i[t.startFrom-h]["_totUp "+t.name],l.H0V(125);var c=l.G0V(16,19,17,1,17);n=i[t.startFrom-c]["_totDn "+t.name]}for(var u=t.startFrom;u<i.length;u++)"_tot","Dn ","_","totUp ",(s=i[u].Close-i[u].Open)>0?r+=s:n-=s,u>=a&&((o=i[u-a].Close-i[u-a].Open)>0?r-=o:n+=o),l.H0V(126),i[u]["Result "+t.name]=l.A0V(100,n,r,r),i[u]["_totUp "+t.name]=r,i[u]["_totDn "+t.name]=n}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Intraday Mtm":{name:"Intraday Momentum Index",calculateFN:t.Studies.calculateIntradayMomentum,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):console.error("intradayMomentum feature requires first activating studies feature.")},L=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o",t.Studies.calculateKeltner=function(e,i){t.Studies.MA(i.inputs["Moving Average Type"],i.days,"Close",0,"MA",e,i),t.Studies.calculateStudyATR(e,i),t.Studies.calculateGenericEnvelope(e,i,i.inputs.Shift,"MA "+i.name,"ATR "+i.name)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Keltner:{name:"Keltner Channel",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateKeltner,inputs:{Period:50,Shift:5,"Moving Average Type":"ema","Channel Fill":!0},outputs:{"Keltner Top":"auto","Keltner Median":"auto","Keltner Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}}})):console.error("keltner feature requires first activating studies feature.")},H=function(e){var t;Te.X8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#00","DD00",t.Studies.calculateKlinger=function(e,i){var a,r,n,s,o,l,h,c,u,d,p;if("_EMA-","L","e","xpone","nt","ial","_","EMA","-","S","_E","MA-S ","K","l","inge","r ",a=i.chart.scrubbed,r=Number(i.inputs["Short Cycle"]),n=Number(i.inputs["Long Cycle"]),a.length<Math.max(r,n)+1)i.error=!0;else{for(s=i.name+"_hist",o="Klinger "+i.name,l="KlingerSignal "+i.name,Te.X8b(),h="_SV "+i.name,c="_EMA-S "+i.name,u="_EMA-L "+i.name,d=Math.max(1,i.startFrom);d<a.length;d++)p=a[d].Volume,a[d]["hlc/3"]<a[d-1]["hlc/3"]&&(p*=-1),p&&(a[d][h]=p);for(t.Studies.MA("exponential",r,h,0,"_EMA-S",e,i),t.Studies.MA("exponential",n,h,0,"_EMA-L",e,i),d=Math.max(n,i.startFrom);d<a.length&&(!a[d].futureTick&&null!==a[d][c]&&null!==a[d][u]);d++)a[d][o]=a[d][c]-a[d][u];for(t.Studies.MA("exponential",Number(i.inputs["Signal Periods"]),o,0,"KlingerSignal",e,i),d=i.startFrom;d<a.length;d++)a[d][s]=a[d][o]-a[d][l];i.outputMap[s]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Klinger:{name:"Klinger Volume Oscillator",seriesFN:t.Studies.displayHistogramWithSeries,calculateFN:t.Studies.calculateKlinger,inputs:{"Signal Periods":13,"Short Cycle":34,"Long Cycle":55},outputs:{Klinger:"auto",KlingerSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("klinger feature requires first activating studies feature.")},E=function(e){var t,i;t=2;for(var a=1;-1554269195!==Te.H5O(a.toString(),a.toString().length,73696);a++)i=""==!_CIQ?_CIQ:e.CIQ,t+=2;-269879358!==Te.N5O(t.toString(),t.toString().length,8053)&&("und","e","fined",i="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ),i.Studies?("aut","o","fi","e","ld","aut","o","f","ie","l","d","Linear Reg ","Forecast","Time","Series","Tim","eSeries","t","sm","a","time seri","es",i.Studies.prettify["time series"]="tsma",i.Studies.movingAverage.conversions.tsma="time series",i.Studies.movingAverage.translations["time series"]="Time Series",i.Studies.movingAverage.typeMap.tsma="TimeSeries",i.Studies.movingAverage.typeMap["time series"]="TimeSeries",i.Studies.calculateMovingAverageTimeSeries=function(e,t){var a,r,n,s,o,l,h,c,u=Te;for(var d in t.ma=new i.Studies.StudyDescriptor(t.name,"ma",t.panel),t.ma.chart=t.chart,t.ma.days=t.days,t.ma.startFrom=t.startFrom,t.ma.inputs=t.inputs,i.Studies.calculateLinearRegressionIndicator(e,t.ma),a=t.name,t.outputs)u.F0V(84),a=u.G0V(d,a," ");r=parseInt(t.inputs.Offset,10),isNaN(r)&&(r=0),n=t.chart.scrubbed,s=r;for(var p=t.startFrom-1;p>=0;p--)if((o=n[p][a])||0===o){if(!(s>0))break;s--}for(l=[],p++;p<n.length;p++)h=n[p],p+r>=0&&(p+r<n.length?(u.F0V(2),n[u.G0V(p,r)][a]=h["Forecast "+t.name]):((c={})[a]=h["Forecast "+t.name],l.push(c)));t.appendFutureTicks(e,l)},i.Studies.calculateLinearRegressionIndicator=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y=Te;if("Cl","os","e","f","i","el","d",(i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{(a=t.inputs.Field)&&"field"!=a||(a="Close"),y.F0V(127);var v=y.A0V(15,0,18,1,4);y.F0V(128);var x=y.G0V(11,4,13,1);r=t.days*(t.days+v)/x,n=Math.pow(r,2),y.k8b(),y.F0V(14);var b=y.G0V(3,1);y.F0V(42);var C=y.A0V(11,11,122);if(s=r*(b*t.days+C)/3,y.H0V(66),o=y.A0V(2147483647,"0"),y.H0V(22),l=y.A0V(0,"0"),h=0,t.startFrom){"_","su","m","s ",y.F0V(5);var S=y.A0V(15,0,14);if(c=i[t.startFrom-S]["_sums "+t.name]){-1697593248,-1795382646,u=2;for(var w=1;-1697593248!==y.N5O(w.toString(),w.toString().length,75648);w++)l=c[9],o=c[6],h=c[5],y.F0V(22),u+=y.A0V(0,"2");-1795382646!==y.H5O(u.toString(),u.toString().length,41535)&&(l=c[0],o=c[1],h=c[2])}}for(var k=t.startFrom;k<i.length;k++)if("_","s","ums"," ","RSqu","ared"," ","Slo","p","e"," ",(d=i[k][a])&&"object"==Me(d)&&(d=d[t.subField]),(d||0===d)&&(l+=t.days*d-o,o+=d,h+=Math.pow(d,2),!(k<t.days-1))){if(k>t.days-1){if((p=i[k-t.days][a])&&"object"==Me(p)&&(p=p[t.subField]),!p&&0!==p)continue;o-=p,h-=Math.pow(p,2)}g=(t.days*l-r*o)/(t.days*s-n),i[k]["Slope "+t.name]=g,f=(o-g*r)/t.days,i[k]["Intercept "+t.name]=f,i[k]["Forecast "+t.name]=f+g*t.days,y.H0V(20);var A=y.G0V(5,12,19,4);m=(t.days*s-n)/(t.days*h-Math.pow(o,A)),y.H0V(129),i[k]["RSquared "+t.name]=y.G0V(m,g,g),i[k]["_sums "+t.name]=[l,o,h]}}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Lin Fcst":{name:"Linear Reg Forecast",overlay:!0,calculateFN:i.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}},"Lin Incpt":{name:"Linear Reg Intercept",overlay:!0,calculateFN:i.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Intercept:"auto"}},"Lin R2":{name:"Linear Reg R2",calculateFN:i.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{RSquared:"auto"}},"LR Slope":{name:"Linear Reg Slope",calculateFN:i.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Slope:"auto"}},"Time Fcst":{name:"Time Series Forecast",overlay:!0,calculateFN:i.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}}})):("linearRegression f","e","ature requires first activating studies feature.",console.error("linearRegression feature requires first activating studies feature."))},N=function(e){var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,Te.X8b(),t.Studies?("#FF000","0","a","u","t","o","M","A","C","D",t.Studies.calculateMACD=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g=Te;if("S","ignal","M","A","C","D ","e","xponentia","l","Moving"," Av","era","ge Type","Clo","se","S",g.k8b(),"low MA"," Perio","d",a=i.chart.scrubbed,r=i.inputs,n=i.name,i.macd1Days||(i.macd1Days=parseFloat(r["Fast MA Period"])),i.macd2Days||(i.macd2Days=parseFloat(r["Slow MA Period"])),i.signalDays||(i.signalDays=parseFloat(r["Signal Period"])),i.days||(i.days=Math.max(i.macd1Days,i.macd2Days,i.signalDays)),a.length<i.days+1)i.error=!0;else{for((s=i.inputs.Field)&&"field"!=s||(s="Close"),(o=r["Moving Average Type"])||(o="exponential"),t.Studies.MA(o,i.macd1Days,s,0,"_MACD1",e,i),t.Studies.MA(o,i.macd2Days,s,0,"_MACD2",e,i),l=c=Math.max(i.startFrom,i.days-1);l<a.length;l++)"_MA","CD","2 ",!(h=a[l])["_MACD1 "+n]&&0!==h["_MACD1 "+n]||!h["_MACD2 "+n]&&0!==h["_MACD2 "+n]||(g.H0V(2),h[g.G0V("MACD ",n)]=h["_MACD1 "+n]-h["_MACD2 "+n]);for((u=r["Signal MA Type"])||(u="exponential"),t.Studies.MA(u,i.signalDays,"MACD "+n,0,"Signal",e,i),g.H0V(2),d=g.A0V(n,"_hist"),l=c;l<a.length;l++)"Signal"," ","S","ign","a","l ",h=a[l],g.H0V(2),((p=h[g.A0V("Signal ",n)])||0===p)&&(h[d]=h["MACD "+n]-h["Signal "+n]);i.outputMap[d]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{macd:{name:"MACD",calculateFN:t.Studies.calculateMACD,seriesFN:t.Studies.displayHistogramWithSeries,inputs:{"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},outputs:{MACD:"auto",Signal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("macd feature requires first activating studies feature.")},R=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?(t.Studies.calculateMassIndex=function(e,i){var a,r,n=Te;if("_","EM","A2",(a=i.chart.scrubbed).length<Math.max(9,i.days+1))i.error=!0;else{for(var s=i.startFrom;s<a.length;s++)"_","High-Low ",a[s]["_High-Low "+i.name]=a[s].High-a[s].Low;if(t.Studies.MA("exponential",9,"_High-Low "+i.name,0,"_EMA",e,i),t.Studies.MA("exponential",9,"_EMA "+i.name,0,"_EMA2",e,i),r=0,a[i.startFrom-1]&&a[i.startFrom-1]["_total "+i.name]){n.F0V(42);var o=n.G0V(18,9,163);r=a[i.startFrom-o]["_total "+i.name]}for(var l=Math.max(17,i.startFrom);l<a.length;l++){if("_EM","A2 ","_E","M","A ",r+=a[l]["_EMA "+i.name]/a[l]["_EMA2 "+i.name],l>=17+i.days-1){"_","EM","A","2 ","_E","MA"," ",a[l]["Result "+i.name]=r,n.F0V(29);var h=n.A0V(13,14,4,1,22);n.H0V(130);var c=n.G0V(14,197,8,9,1);r-=a[l-i.days+h]["_EMA "+i.name]/a[l-i.days+c]["_EMA2 "+i.name]}a[l]["_total "+i.name]=r}}},t.Studies.displayMassIndex=function(e,i,a){var r,n,s,o;Te.X8b(),t.Studies.displaySeriesAsLine(e,i,a),r=i.inputs["Bulge Threshold"],e.panels[i.panel],n=i.getYAxis(e),s=t.Studies.determineColor(i.outputs.Result),o={skipTransform:e.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:r,direction:1,color:s,yAxis:n,opacity:.3},!i.highlight&&e.highlightedDraggable&&(o.opacity*=.3),t.preparePeakValleyFill(e,o),t.Studies.drawHorizontal(e,i,null,r,n,s)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Mass Idx":{name:"Mass Index",seriesFN:t.Studies.displayMassIndex,calculateFN:t.Studies.calculateMassIndex,inputs:{Period:25,"Bulge Threshold":27},attributes:{"Bulge Threshold":{min:20,max:35,step:.1}}}})):console.error("massIndex feature requires first activating studies feature.")},Y=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateMoneyFlowIndex=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p=Te;if((i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{a=0,p.H0V(25),r=p.A0V(489699040,"0"),n=i[t.startFrom-1],s="_rawMF "+t.name,o="_cumMF "+t.name,l="Result "+t.name,n&&n[o]&&(a=n[o][0],r=n[o][1]);for(var g=t.startFrom;g<i.length;g++)"hlc/","3",h=i[g]["hlc/3"],g>0&&!i[g].futureTick&&(p.F0V(131),c=i[p.G0V(g,"1",1)]["hlc/3"],u=h*i[g].Volume,h>c?a+=u:h<c?r-=u*=-1:u=0,g>t.days&&((d=i[g-t.days][s])>0?a-=d:r+=d,0===r?i[g][l]=100:i[g].Volume&&(p.F0V(132),i[g][l]=p.G0V(100,1,100,a,r))),i[g][s]=u,i[g][o]=[a,r])}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"M Flow":{name:"Money Flow Index",range:"0 to 100",calculateFN:t.Studies.calculateMoneyFlowIndex,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("moneyFlow feature requires first activating studies feature.")},z=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("au","t","o","fi","e","ld","Perc","ent","m","a","f","i","el","d","Mo","ving ","Avera","ge Deviation","perce","nt","Trip","leExponent","ial",t.Studies.prettify=t.extend({"2-exponential":"dema","3-exponential":"tema",hull:"hma"},t.Studies.prettify),t.extend(t.Studies.movingAverage,{conversions:{hma:"hull",dema:"2-exponential",tema:"3-exponential"},translations:{hull:"Hull","2-exponential":"Double Exponential","3-exponential":"Triple Exponential"},typeMap:{hma:"Hull",hull:"Hull",dema:"DoubleExponential","2-exponential":"DoubleExponential",tema:"TripleExponential","3-exponential":"TripleExponential"}}),t.Studies.calculateMovingAverageHull=function(e,i){var a,r,n,s,o,l,h,c,u=Te;for("_","HMA","_","MMA ",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA("wma",i.days,r,0,"_WMA1",e,i),t.Studies.MA("wma",Math.ceil(i.days/2),r,0,"_WMA2",e,i),n=i.startFrom-1;n>=0&&("objec","t",(s=a[n][r])&&"object"==Me(s)&&(s=s[i.subField]),!s&&0!==s);n--);for(n++;n<a.length;n++){o=a[n],u.F0V(133);var d=u.A0V(20,3,6,18,19);o["_MMA "+i.name]=d*o["_WMA2 "+i.name]-o["_WMA1 "+i.name]}for(var p in l=parseInt(i.inputs.Offset,10),isNaN(l)&&(l=0),h=Math.floor(Math.sqrt(i.days)),t.Studies.MA("wma",h,"_MMA "+i.name,l,"_HMA",e,i),c=i.name,i.outputs)u.H0V(84),c=u.A0V(p,c," ");for(n=Math.max(i.days+h-1,i.startFrom);n<a.length;n++)"_","H","M","A ",a[n][c]=a[n]["_HMA "+i.name]},t.Studies.calculateMovingAverageDoubleExponential=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g=Te;for("C","l","o","se",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA("ema",i.days,r,0,"_EMA1",e,i),t.Studies.MA("ema",i.days,"_EMA1 "+i.name,0,"_EMA2",e,i),n=parseInt(i.inputs.Offset,10),isNaN(n)&&(n=0),l=n,s=i.startFrom-1;s>=0;s--)if((o=a[s][r])&&"object"==Me(o)&&(o=o[i.subField]),o||0===o){if(!(l>0))break;l--}for(var f in h=i.name,i.outputs)g.F0V(84),h=g.G0V(f,h," ");for(c=[],s++;s<a.length;s++){if(!(s<2*(i.days-1)))u=a[s],g.F0V(41),d=g.A0V(1,23,4,17)*u["_EMA1 "+i.name]-u["_EMA2 "+i.name],s+n>=0&&(s+n<a.length?(g.F0V(2),a[g.G0V(s,n)][h]=d):((p={})[h]=d,c.push(p)))}i.appendFutureTicks(e,c)},t.Studies.calculateMovingAverageTripleExponential=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g=Te;for("_","EM","A","3","_EMA","1 ","e","m","a","_E","M","A","1","C","lo","s","e",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA("ema",i.days,r,0,"_EMA1",e,i),t.Studies.MA("ema",i.days,"_EMA1 "+i.name,0,"_EMA2",e,i),t.Studies.MA("ema",i.days,"_EMA2 "+i.name,0,"_EMA3",e,i),n=parseInt(i.inputs.Offset,10),isNaN(n)&&(n=0),l=n,s=i.startFrom-1;s>=0;s--)if("objec","t",(o=a[s][r])&&"object"==Me(o)&&(o=o[i.subField]),o||0===o){if(!(l>0))break;l--}for(var f in h=i.name,i.outputs)g.H0V(84),h=g.A0V(f,h," ");for(c=[],s++;s<a.length;s++){if("_EMA2"," ",!(s<3*(i.days-1)))u=a[s],g.H0V(2),d=g.G0V(0,3)*u["_EMA1 "+i.name]-3*u["_EMA2 "+i.name]+u["_EMA3 "+i.name],s+n>=0&&(s+n<a.length?(g.F0V(2),a[g.A0V(s,n)][h]=d):((p={})[h]=d,c.push(p)))}i.appendFutureTicks(e,c)},t.Studies.calculateMAEnvelope=function(e,i){var a,r,n;(a=i.inputs.Field)&&"field"!=a||(a="Close"),t.Studies.MA(i.inputs["Moving Average Type"],i.days,a,0,"MA",e,i),r=i.inputs["Shift Type"],n=i.inputs.Shift,r||("p","er","cen","t",r="percent",n=i.inputs["Shift Percentage"]),"percent"==r?("M","A"," ",Te.H0V(4),t.Studies.calculateGenericEnvelope(e,i,Te.G0V(n,100),"MA "+i.name)):"points"==r&&("M","A"," ",t.Studies.calculateGenericEnvelope(e,i,null,"MA "+i.name,null,Number(n)))},t.Studies.calculateMADev=function(e,i){var a,r,n,s,o,l,h,c,u=Te;if("_h","i","st","_","M",u.k8b(),"A","Poi","nts",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=i.inputs["Points Or Percent"])||(n="Points"),(s=i.inputs["Moving Average Type"])||(s="exponential"),t.Studies.MA(s,i.days,r,0,"_MA",e,i),o=i.name+"_hist";for(var d=Math.max(i.startFrom,i.days-1);d<a.length;d++)(h=(l=a[d])[r])&&"object"==Me(h)&&(h=h[i.subField]),((c=l["_MA "+i.name])||0===c)&&("Points"==n?(u.H0V(0),l[o]=u.A0V(h,c)):(u.H0V(134),l[o]=u.G0V(h,1,100,c)));i.outputMap={},i.outputMap[i.name+"_hist"]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"MA Env":{name:"Moving Average Envelope",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateMAEnvelope,inputs:{Period:50,Field:"field","Shift Type":["percent","points"],Shift:5,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"MA Env Top":"auto","MA Env Median":"auto","MA Env Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}},"MA Dev":{name:"Moving Average Deviation",calculateFN:t.Studies.calculateMADev,seriesFN:t.Studies.displayHistogramWithSeries,inputs:{Period:12,Field:"field","Moving Average Type":"ma","Points Or Percent":["Points","Percent"]},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},"High Low":{name:"High Low Bands",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:function(e,i){i.inputs["Moving Average Type"]="triangular",t.Studies.calculateMAEnvelope(e,i)},inputs:{Period:10,Field:"field","Shift Percentage":5,"Channel Fill":!0},outputs:{"High Low Top":"auto","High Low Median":"auto","High Low Bottom":"auto"},attributes:{"Shift Percentage":{min:.1,step:.1}}}})):("movingAve","rages feature requires first"," acti","vating studies feature.",console.error("movingAverages feature requires first activating studies feature."))},B=function(e){var t;Te.X8b(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?(t.Studies.calculatePSAR=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p=Te;function g(){p.X8b(),p.F0V(37),a=p.G0V("0",0),r=null,n=!n}if(i=t.chart.scrubbed,a=0,r=null,n=!1,s=0,o=parseFloat(t.inputs["Minimum AF"]),l=parseFloat(t.inputs["Maximum AF"]),t.startFrom>0){p.H0V(11);var f=p.G0V(111,14,0,8);s=i[t.startFrom-f]["Result "+t.name],p.H0V(117);var m=p.G0V(8,46,17,16,6);(h=i[t.startFrom-m]["_state "+t.name])&&3==h.length&&(a=h[0],r=h[1],n=h[2])}for(var y=t.startFrom-1;y<i.length-1;y++)if("_sta","te"," ",!(y<0)){if(i[y].futureTick)break;c=s,n?((!r||r<i[y].High)&&(r=i[y].High,p.H0V(2),a=Math.min(p.G0V(a,o),l)),p.F0V(135),s=p.A0V(c,c,a,r),u=Math.min(i[Math.max(1,y)-1].Low,i[y].Low),s>i[y+1].Low?(s=r,g()):s>u&&(s=u)):((!r||r>i[y].Low)&&(r=i[y].Low,p.F0V(2),a=Math.min(p.G0V(a,o),l)),p.H0V(135),s=p.A0V(c,c,a,r),d=Math.max(i[Math.max(1,y)-1].High,i[y].High),s<i[y+1].High?(s=r,g()):s<d&&(s=d)),p.F0V(2),i[p.A0V(y,1)]["_state "+t.name]=[a,r,n],isNaN(i[y].High)&&isNaN(i[y].Low)||("Res","u","lt"," ",p.F0V(107),i[p.A0V(y,"1")]["Result "+t.name]=s)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PSAR:{name:"Parabolic SAR",overlay:!0,calculateFN:t.Studies.calculatePSAR,seriesFN:t.Studies.displayPSAR2,inputs:{"Minimum AF":.02,"Maximum AF":.2}}})):console.error("parabolicSAR feature requires first activating studies feature.")},U=function(e){var t;Te.X8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#b82","c","0b","fi","bo","n","acci","stan","d","ard",t.Studies.calculatePivotPoints=function(e,i){var a,r,n,s,o,l,h,c,u,d,p=Te;function g(){p.F0V(0);var e=p.G0V(6,5);p.H0V(5);var t=p.A0V(12,0,9);c.pivotPoint=(c.high+c.low+a[f-e].Close)/t,c.prevHigh=c.high,c.prevLow=c.low,c.hlSpread=c.high-c.low,c.high=c.low=0}a=i.chart.scrubbed,r="day",n=e.layout.interval,s=e.layout.timeUnit,"day"==n?r="month":t.ChartEngine.isDailyInterval(n)?r="year":"second"==n||"millisecond"==n||"second"==s||"millisecond"==s?r="15min":(o=e.layout.periodicity,"minute"!=n&&(o*=n),o>=30&&(r="week")),l=null,p.H0V(50),h=p.G0V(16,18,56,16121)-t.getFromNS(e.chart,"market.beginningDayOfWeek",0),c={pivotPoint:NaN,high:0,low:0,prevHigh:0,prevLow:0,hlSpread:0},i.startFrom>1&&a[i.startFrom-1]["_pointers "+i.name]&&(c=t.clone(a[i.startFrom-1]["_pointers "+i.name]));for(var f=Math.max(1,i.startFrom);f<a.length;f++)if("_po","inters ","Piv","o","t ","da","y",a[f-1]){if(c.high=Math.max(c.high,a[f-1].High),c.low=Math.min(c.low>0?c.low:a[f-1].Low,a[f-1].Low),i.inputs.Continuous||"year"==r&&a[f].DT.getYear()!=a[f-1].DT.getYear()||"month"==r&&a[f].DT.getMonth()!=a[f-1].DT.getMonth()||"week"==r&&(a[f].DT.getDay()+h)%7<(a[f-1].DT.getDay()+h)%7?g():"day"==r?(null===l&&(l=t.Studies.getMarketOffset({stx:e,localQuoteDate:a[f].DT,shiftToDateBoundary:!0})),u=new Date(new Date(+a[f].DT).setMilliseconds(a[f].DT.getMilliseconds()+l)),(d=new Date(new Date(+a[f-1].DT).setMilliseconds(a[f-1].DT.getMilliseconds()+l))).getDate()!==u.getDate()&&0!==d.getDay()&&e.chart.market.isMarketDate(u)&&(l=null,g())):"15min"!=r||a[f].DT.getHours()==a[f-1].DT.getHours()&&Math.floor(a[f].DT.getMinutes()/15)==Math.floor(a[f-1].DT.getMinutes()/15)||g(),a[f]["Pivot "+i.name]=c.pivotPoint,"fibonacci"==i.inputs.Type.toLowerCase())"Su","pp","ort ","2 ",a[f]["Resistance 1 "+i.name]=c.pivotPoint+.382*c.hlSpread,a[f]["Resistance 2 "+i.name]=c.pivotPoint+.618*c.hlSpread,a[f]["Resistance 3 "+i.name]=c.pivotPoint+c.hlSpread,a[f]["Support 1 "+i.name]=c.pivotPoint-.382*c.hlSpread,a[f]["Support 2 "+i.name]=c.pivotPoint-.618*c.hlSpread,a[f]["Support 3 "+i.name]=c.pivotPoint-c.hlSpread;else{"Resistanc","e 3 ",p.F0V(14);var m=p.A0V(3,1);a[f]["Resistance 1 "+i.name]=m*c.pivotPoint-c.prevLow,a[f]["Resistance 2 "+i.name]=c.pivotPoint+c.hlSpread,a[f]["Resistance 3 "+i.name]=c.prevHigh+2*(c.pivotPoint-c.prevLow),a[f]["Support 1 "+i.name]=2*c.pivotPoint-c.prevHigh,a[f]["Support 2 "+i.name]=c.pivotPoint-c.hlSpread,p.F0V(0);var y=p.G0V(38,36);a[f]["Support 3 "+i.name]=c.prevLow-y*(c.prevHigh-c.pivotPoint)}a[f]["_pointers "+i.name]=t.clone(c)}},t.Studies.displayPivotPoints=function(e,i,a){var r,n;i.noSlopes=!i.inputs.Continuous,t.Studies.displaySeriesAsLine(e,i,a),i.inputs.Shading&&("Support 2"," ","Re","sistanc","e 1 ",r=e.panels[i.panel],n={noSlopes:i.noSlopes,opacity:i.parameters.opacity?i.parameters.opacity:.2,skipTransform:r.name!=i.chart.name,yAxis:i.getYAxis(e)},!i.highlight&&e.highlightedDraggable&&(n.opacity*=.3),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Resistance 3 "+i.name,bottomBand:"Resistance 2 "+i.name,color:t.Studies.determineColor(i.outputs["Resistance 3"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Resistance 2 "+i.name,bottomBand:"Resistance 1 "+i.name,color:t.Studies.determineColor(i.outputs["Resistance 2"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Resistance 1 "+i.name,bottomBand:"Pivot "+i.name,color:t.Studies.determineColor(i.outputs["Resistance 1"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Support 1 "+i.name,bottomBand:"Pivot "+i.name,color:t.Studies.determineColor(i.outputs["Support 1"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Support 2 "+i.name,bottomBand:"Support 1 "+i.name,color:t.Studies.determineColor(i.outputs["Support 2"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Support 3 "+i.name,bottomBand:"Support 2 "+i.name,color:t.Studies.determineColor(i.outputs["Support 3"])},n)))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pivot Points":{name:"Pivot Points",overlay:!0,seriesFN:t.Studies.displayPivotPoints,calculateFN:t.Studies.calculatePivotPoints,inputs:{Type:["standard","fibonacci"],Continuous:!1,Shading:!1},outputs:{Pivot:"auto","Resistance 1":"#b82c0b","Support 1":"#699158","Resistance 2":"#e36460","Support 2":"#b3d987","Resistance 3":"#ffd0cf","Support 3":"#d3e8ae"},parameters:{init:{opacity:.2}}}})):("pivotPoints feature requires first activatin","g ","studies feature.",console.error("pivotPoints feature requires first activating studies feature."))},j=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","Pretty ","Good Oscillator",t.Studies.calculatePrettyGoodOscillator=function(e,i){var a;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{Te.k8b(),t.Studies.MA("exponential",i.days,"trueRange",0,"_EMA",e,i),t.Studies.MA("simple",i.days,"Close",0,"_SMA",e,i);for(var r=Math.max(1,i.startFrom);r<a.length;r++)"_","SM","A ",a[r]["_SMA "+i.name]&&a[r]["_EMA "+i.name]&&(a[r]["Result "+i.name]=(a[r].Close-a[r]["_SMA "+i.name])/a[r]["_EMA "+i.name])}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pretty Good":{name:"Pretty Good Oscillator",calculateFN:t.Studies.calculatePrettyGoodOscillator,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}}}})):console.error("prettyGoodOscillator feature requires first activating studies feature.")},W=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","au","t","o","f","i","e","ld",t.Studies.calculatePMO=function(e,i){var a,r,n,s,o,l=Te;if("PM","O","PMOS","ignal","P","M","O"," ","ex","po","nenti","al","exp","on","enti","al","e","x","ponential","C","lose","Smoothing Peri","od",a={Smooth:Number(i.inputs["Smoothing Period"])-1,Double:Number(i.inputs["Double Smoothing Period"])-1,Signal:Number(i.inputs["Signal Period"])},(r=i.chart.scrubbed).length<a.Smooth+a.Double)i.error=!0;else{for((n=i.inputs.Field)&&"field"!=n||(n="Close"),s=i.startFrom;s<r.length;s++)if(r[s]&&r[s-1]&&(l.F0V(136),o=r[l.G0V("1",0,s)][n])){l.F0V(2);var h=l.A0V(998,2);l.H0V(14);var c=l.A0V(4,3);r[s]["_ROCx10 "+i.name]=h*(r[s][n]/o-c)}t.Studies.MA("exponential",a.Smooth,"_ROCx10 "+i.name,0,"_EMAx10",e,i),t.Studies.MA("exponential",a.Double,"_EMAx10 "+i.name,0,"PMO",e,i),t.Studies.MA("exponential",a.Signal,"PMO "+i.name,0,"PMOSignal",e,i),i.zoneOutput="PMO"}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PMO:{name:"Price Momentum Oscillator",calculateFN:t.Studies.calculatePMO,inputs:{Field:"field","Smoothing Period":35,"Double Smoothing Period":20,"Signal Period":10},outputs:{PMO:"auto",PMOSignal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:2.5,studyOverBoughtColor:"auto",studyOverSoldValue:-2.5,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.05"},studyOverSoldValue:{max:0,step:"0.05"}}}})):("pr","iceMomentumOsc","illator feature requires first activating studi","es feature.",console.error("priceMomentumOscillator feature requires first activating studies feature."))},Q=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("0.","1","#FF","0000","vdm","a","Percen","t","Po","i","nts","Price Oscillat","or",t.Studies.calculatePriceOscillator=function(e,i){var a,r,n,s,o,l,h,c,u,d=Te;if("_Long ","M","A","_","Short MA",a=i.chart.scrubbed,r=Number(i.inputs["Short Cycle"]),n=Number(i.inputs["Long Cycle"]),a.length<Math.max(r,n)+1)i.error=!0;else{s=i.inputs.Field,(o=i.inputs["Moving Average Type"])||(o="simple"),s&&"field"!=s||(s="Close"),i.parameters.isVolume&&("e","xponenti","al",s="Volume",o="exponential"),(l=i.inputs["Points Or Percent"])||(l="Percent"),t.Studies.MA(o,r,s,0,"_Short MA",e,i),t.Studies.MA(o,n,s,0,"_Long MA",e,i);for(var p=Math.max(n,i.startFrom);p<a.length;p++)(h=a[p])&&(c=h["_Short MA "+i.name],u=h["_Long MA "+i.name],!c&&0!==c||!u&&0!==u||("Points"==l?(d.F0V(0),h["Result "+i.name]=d.G0V(c,u)):(d.H0V(134),h["Result "+i.name]=d.G0V(c,1,100,u)),i.outputs["Increasing Bar"]&&(h[i.name+"_hist"]=h["Result "+i.name],i.outputMap={},i.outputMap[i.name+"_hist"]="")))}},t.Studies.displayRAVI=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,f=Te;r=e.panels[i.panel],n=i.getContext(e),s=i.getYAxis(e),o=e.pixelFromPrice(0,r,s),f.F0V(5);var m=f.G0V(13,0,11);l=e.layout.candleWidth-m,f.X8b(),l<2&&(f.F0V(21),l=f.G0V(1,"1")),h=t.Studies.determineColor(i.outputs["Increasing Bar"]),c=t.Studies.determineColor(i.outputs["Decreasing Bar"]),e.startClip(i.panel),e.canvasColor("stx_histogram"),i.underlay||(f.F0V(66),n.globalAlpha=f.G0V(2147483647,"1")),!i.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3);for(var y=0;y<a.length;y++)"_hi","s","t","#","C","CC","CCC","_","h","ist","_","hi","s","t","_","hi","s","t",u=a[y],f.H0V(0),(d=a[f.G0V(y,1)])||(d=e.getPreviousBar(e.chart,i.name+"_hist",y)),u&&(p=0,g=0,i.parameters&&i.parameters.studyOverZonesEnabled&&(p=parseFloat(i.parameters.studyOverBoughtValue),g=parseFloat(i.parameters.studyOverSoldValue)),d?u[i.name+"_hist"]>p&&d[i.name+"_hist"]<u[i.name+"_hist"]?n.fillStyle=h:u[i.name+"_hist"]<g&&d[i.name+"_hist"]>u[i.name+"_hist"]?n.fillStyle=c:n.fillStyle="#CCCCCC":n.fillStyle="#CCCCCC",u.candleWidth&&(l=Math.floor(Math.max(1,u.candleWidth-2))),n.fillRect(Math.floor(e.pixelFromBar(y,r.chart)-l/2),Math.floor(o),Math.floor(l),Math.floor(e.pixelFromPrice(u[i.name+"_hist"],r,s)-o)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Price Osc":{name:"Price Oscillator",calculateFN:t.Studies.calculatePriceOscillator,inputs:{Field:"field","Short Cycle":12,"Long Cycle":26,"Moving Average Type":"ema","Points Or Percent":["Points","Percent"]}},"Vol Osc":{name:"Volume Oscillator",calculateFN:t.Studies.calculatePriceOscillator,inputs:{"Short Cycle":12,"Long Cycle":26,"Points Or Percent":["Points","Percent"]},parameters:{init:{isVolume:!0}}},RAVI:{name:"RAVI",seriesFN:t.Studies.displayRAVI,calculateFN:t.Studies.calculatePriceOscillator,inputs:{Field:"field","Moving Average Type":"vdma","Short Cycle":7,"Long Cycle":65},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.1"},studyOverSoldValue:{max:0,step:"0.1"}}}})):console.error("priceVolumeOscillator feature requires first activating studies feature.")},q=function(e){var t;Te.k8b(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("aut","o","-","1 t","o 1",t.Studies.calculatePrimeNumber=function(e,t){var i,a,r,n,s,o,l,h,c=Te;i=[],a=t.chart.scrubbed;for(var u=t.startFrom;u<a.length;u++)if(r=a[u]){if(n=r.High,!isNaN(n)){for(var d=0;n>0&&n<=10;d++)n*=10;for(f(n)&&(n+=2),(n=Math.ceil(n))%2==0&&n++;!f(n);)c.F0V(15),n+=c.A0V(236881600,"2");n/=Math.pow(10,d)}if(s=r.Low,!isNaN(s)){for(var p=0;s>0&&s<=10;p++)s*=10;if(f(s)&&(s-=2),(s=Math.floor(s))%2==0&&s--,s>0){for(;!f(s);)s-=2;s/=Math.pow(10,p)}}if("Prime Number Bands"==t.type)"Prime ","Bands Bottom ",isNaN(n)||(r["Prime Bands Top "+t.name]=n),isNaN(s)||(r["Prime Bands Bottom "+t.name]=Math.max(0,s));else{"Tolerance Per","centage",o=0,c.F0V(137);var g=c.G0V(5,11,9,11,96);l=t.inputs["Tolerance Percentage"]*(n-s)/g,c.F0V(2),(h=n+s-c.A0V(0,2)*r.Close)<l?o=1:h>l&&(o=-1),o&&(r["Result "+t.name]=o)}}function f(e){var t;if(e<=0)return!1;if(e!=Math.floor(e))return!1;if(!0===i[e]||!1===i[e])return i[e];t=parseInt(Math.sqrt(e),10);for(var a=2;a<=t;a++)if(e%a==0)return i[e]=!1,!1;return i[e]=!0,!0}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Prime Number":{name:"Prime Number Oscillator",range:"-1 to 1",calculateFN:t.Studies.calculatePrimeNumber,centerline:0,inputs:{"Tolerance Percentage":5},attributes:{"Tolerance Percentage":{min:.1,step:.1}}},"Prime Number Bands":{name:"Prime Number Bands",overlay:!0,calculateFN:t.Studies.calculatePrimeNumber,seriesFN:t.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Prime Bands Top":"auto","Prime Bands Bottom":"auto","Prime Bands Channel":"auto"}}})):console.error("primeNumber feature requires first activating studies feature.")},G=function(e){var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,Te.X8b(),t.Studies?("w","e","ekl","y","P","ring'","s Special K",t.Studies.calculateKST=function(e,i){var a,r,n,s,o,l,h,c,u=Te;for("Heavi","est SMA Pe","rio","d","Heaviest Rate of ","Change Period","Heavy Rat","e of ","Change P","eriod","Light"," Ra","te of Change Period","Clo","se","f","i","e","ld",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),s={},(n={})[1]=Number(i.inputs["Lightest Rate of Change Period"]),n[2]=Number(i.inputs["Light Rate of Change Period"]),n[3]=Number(i.inputs["Heavy Rate of Change Period"]),n[4]=Number(i.inputs["Heaviest Rate of Change Period"]),s[1]=Number(i.inputs["Lightest SMA Period"]),s[2]=Number(i.inputs["Light SMA Period"]),s[3]=Number(i.inputs["Heavy SMA Period"]),s[4]=Number(i.inputs["Heaviest SMA Period"]),o=Number(i.inputs["Signal Period"]),l=i.startFrom;l<a.length;l++)if(a[l])for(h=1;h<=4;h++)if("_","R","O","C",l>=n[h]&&a[l-n[h]]&&a[l-n[h]][r]){u.F0V(138);var d=u.A0V(20105,16,4011,20,4021);u.H0V(139);var p=u.A0V(7,1289,8,1095,2);u.F0V(140);u.G0V(7885,7886,8,16,4);u.H0V(0);var g=u.G0V(27945,26082);u.F0V(5);u.A0V(29,3120,19);u.F0V(141);var f=u.G0V(1369150,7,197e3,7,7);u.F0V(142);var m=u.G0V(92,94,99,2);u.H0V(143);var y=u.G0V(6,14,12,6);a[l]["_ROC"+h+(!(d<p)&&(890.97===g?f:" "))+i.name]=m*(a[l][r]/a[l-n[h]][r]-y)}for(h=1;h<=4;h++)"_","R","O","C",t.Studies.MA("simple",s[h],"_ROC"+h+" "+i.name,0,"_SMA"+h,e,i);for(l=i.startFrom;l<a.length;l++)for(a[l]["KST "+i.name]=null,h=1;h<=4;h++){u.F0V(9);var v=u.G0V(3591,7,9,5);u.H0V(133);u.A0V(20,1,9,93249,3208);u.F0V(2);var x=u.G0V(903,9034);u.H0V(53);var b=u.A0V(8,0,1,1468);u.F0V(144);u.A0V(13,689,662,689);u.H0V(81);var C=u.G0V(13,470,3280);u.H0V(145);var S=u.G0V(17,12,897754287,14364068779,1);((c=a[l]["_SMA"+h+(v<x?b!=C&&" ":"3.74e+3">>S)+i.name])||0===c)&&(u.F0V(21),a[l]["KST "+i.name]+=u.A0V(c,h))}t.Studies.MA("simple",o,"KST "+i.name,0,"KSTSignal",e,i)},t.Studies.calculateSpecialK=function(e,i){var a,r,n,s,o,l,h,c,u=Te;for("Cl","ose","fiel","d",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=i.inputs.Interval)||(n="daily"),s={daily:[10,15,20,30,50,65,75,100,195,265,390,530],weekly:[4,5,6,8,10,13,15,20,39,52,78,104]},o={daily:[10,10,10,15,50,65,75,100,130,130,130,195],weekly:[4,5,6,8,10,13,15,20,26,26,26,39]},l=i.startFrom;l<a.length;l++)if(a[l])for(h=0;h<s[n].length;h++)if("_","R","OC",l>=s[n][h]&&a[l-s[n][h]]&&a[l-s[n][h]][r]){u.F0V(8);var d=u.A0V(0,13,14);u.F0V(0);var p=u.A0V(7,6);a[l]["_ROC"+h+" "+i.name]="100"*d*(a[l][r]/a[l-s[n][h]][r]-"1"*p)}for(h=0;h<o[n].length;h++)"si","m","pl","e",t.Studies.MA("daily"==n?"simple":"exponential",o[n][h],"_ROC"+h+" "+i.name,0,"_MA"+h,e,i);for(l=i.startFrom;l<a.length;l++)for(a[l]["Result "+i.name]=null,h=0;h<o[n].length;h++)((c=a[l]["_MA"+h+" "+i.name])||0===c)&&(u.F0V(146),a[l]["Result "+i.name]+=u.G0V(2147483647,"4",c,1,h))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pring KST":{name:"Pring's Know Sure Thing",calculateFN:t.Studies.calculateKST,inputs:{Field:"field","Lightest Rate of Change Period":10,"Lightest SMA Period":10,"Light Rate of Change Period":15,"Light SMA Period":10,"Heavy Rate of Change Period":20,"Heavy SMA Period":10,"Heaviest Rate of Change Period":30,"Heaviest SMA Period":15,"Signal Period":9},outputs:{KST:"#00DD00",KSTSignal:"#FF0000"}},"Pring Sp-K":{name:"Pring's Special K",calculateFN:t.Studies.calculateSpecialK,inputs:{Field:"field",Interval:["daily","weekly"]}}})):console.error("pring feature requires first activating studies feature.")},X=function(e){var t,i;Te.X8b(),t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.Studies?t.Studies.studyLibrary.PVAT||("h","h",":mm:ss","#b","82c","0","c","-","10","0","%","-2","5%",t.Studies.initProjectedVolume=function(e,i,a,r,n,s){var o,l,h=e.chart.market;return o="00:00",h&&(o=h.getNormalOpen()),o.match(/^[\d]{2}:[\d]{2}$/)&&(o+=":00"),Te.X8b(),a["Anchor Time"]&&a["Anchor Time"].length||("Anc","h","or T","ime",a["Anchor Time"]=o),l=t.Studies.initializeFN(e,i,a,r,n,s),e.currentlyImporting||(l.defaultAnchorTime=o),l},t.Studies.validateProjectedVolumeLookback=function(e,t){Te.k8b();var i=e.layout,a=i.interval,r=i.periodicity,n=t.inputs["Lookback Days"];return Te.F0V(147),Te.A0V(r,n,10,a)},t.Studies.calculateProjectedVolume=function(e,a){var r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,R,Y,z,B,U,j,W,Q,q,G,X,Z=Te;function K(e){return Z.k8b(),{hours:e.getHours(),minutes:e.getMinutes()}}r="h",r+="eikina",r+="shi";var J=e.layout,$=J.interval,ee=J.timeUnit,te=J.aggregationType,ie=e.chart,ae=ie.symbol,re=ie.scroll,ne=ie.scrubbed,se=ie.market;if(n="PAV"===a.type,s=a.study?a.study.name:a.type,t.ChartEngine.isDailyInterval($))a.error="".concat(s," is Intraday Only");else if("tick"===ee)a.error="Tick mode not supported for ".concat(s);else if("minute"!==ee)a.error="Sub-minute periodicities not supported for ".concat(s);else if(te&&["ohlc",r].includes(te)){if(!t.Studies.validateProjectedVolumeLookback(e,a)){1336623727,-1831083652,o=2;for(var oe=1;1336623727!==Z.N5O(oe.toString(),oe.toString().length,82433);oe++)a.error="Selected lookback/periodicity combo not supported for ".concat(s),o+=2;-1831083652!==Z.H5O(o.toString(),o.toString().length,93791)&&(a.error="Selected lookback/periodicity combo not supported for ".concat(s))}}else a.error="Aggregation type not supported for ".concat(s);if(!a.error){if(a.inputs["Anchor Selector"]?t.Studies.initAnchorHandle(e,a):t.Studies.removeAnchorHandle(e,a),(l=se?se.getNormalOpen():"00:00").match(/^[\d]{2}:[\d]{2}$/)&&(l+=":00"),!e.currentlyImporting)if(a.defaultAnchorTime){if(l!==a.defaultAnchorTime)return a.defaultAnchorTime=l,a.inputs["Anchor Time"]=l,void t.Studies.repositionAnchor(e,a)}else a.defaultAnchorTime=l;var le=a.inputs,he=le["Lookback Days"],ce=ke(le["Anchor Time"].split(":"),3),ue=ce[0],de=ce[1],pe=ce[2],ge=void 0===pe?0:pe;if(h=t.getFn("Market.Symbology.isForexSymbol")(ae),c=a.getDependents(e),u=0,d=[],c.forEach((function(e){var t,i=e.inputs,a=e.outputMap;if(Z.X8b(),i.Period){var r,n;u=Math.max(parseInt(i.Period),u),-39895124,-1919814742,t=2;for(var s=1;-39895124!==Z.N5O(s.toString(),s.toString().length,27662);s++){var o;(o=d).push.apply(o,we(Object.keys(a))),t+=2}if(-1919814742!==Z.N5O(t.toString(),t.toString().length,84694))(n=d).push.apply(n,we(Object.keys(a)));(r=d).push.apply(r,we(Object.keys(a)))}})),a.dependentsOutputMap=d,g=Ee(ne.length-1,!0),f=Math.ceil(ne.length-1-re),Z.H0V(0),m=Ee(Z.G0V(f,u)),h&&ne[m]&&t.dateToStr(ne[m].DT,"HH:mm")!==l&&(Z.H0V(0),m=Ee(Z.G0V(m,1))),p=!h&&a.startFrom>m&&ne[m]&&void 0!==ne[m]["V "+a.name]&&d.every((function(e){return Z.X8b(),![void 0,null].includes(ne[m][e])}))&&!1!==g?g:m,(y=He(Ne(m),he)).setHours(0,0,0),x=((v=Ee(0,!0))||0===v)&&Ye(He(ne[v].DT,he,!0)),Z.X8b(),ne[0].DT>y){if(!e.quoteDriver)return a.error="Not enough data to calculate ".concat(s);if(e.quoteDriver.extendHistoricalData({from:y}),!(x>0))return;p=x}if(!(p<0||p>ne.length-1)){if(b=ne.length-a.startFrom==1&&a.cachedFutureTicks&&a.cachedLastProjection&&+a.cachedLastProjection.DT==+ne[ne.length-1].DT&&ne[p]["PV "+a.name])ne[ne.length-1]["PV "+a.name]=a.cachedLastProjection.projectedValue,a.appendFutureTicks(e,a.cachedFutureTicks),p=a.startFrom;else{"PV"," ",a.cachedFutureTicks=null,a.cachedLastProjection=null,C=[g],S=[];for(var fe=0;fe<he;fe++)w=Ee(C[0]-1),C.unshift(w);for(;C[he]>=p;){if(k=C.pop(),!ne[k])return Re(k);var me=K(ne[k].DT),ye=me.hours,ve=me.minutes;if(D=void 0,A=se.getClose(ne[k].DT)){for(M=se.getNextClose(ne[k].DT),D=K(A);(0!==D.hours||0!==D.minutes)&&A.getDate()===M.getDate();)A=M,M=se.getNextClose(M);0===(D=K(A)).hours&&(D.hours=24)}else D={hours:24,minutes:0};T=C.slice();for(var xe=0;xe<T.length;xe++){if(F=T[xe],!ne[F])return Re(F);var be=K(ne[F].DT),Ce=be.hours,Se=be.minutes;if(Ce<ye||Ce===ye&&Se<ve)do{F++;var Ae=K(ne[F].DT);Ce=Ae.hours,Se=Ae.minutes}while(Ce!==ye||Se!==ve);T[xe]=F}for(;ye<D.hours||ye===D.hours&&ve<D.minutes;){_=!1,P=void 0,V=void 0,O=0,I=0;for(var De=0;De<T.length;De++)if(null!==(L=T[De])){if(!(H=ne[L]))return Re(L);var Me=K(H.DT),Fe=Me.hours,_e=Me.minutes;if(E=H.DT.getDate(),Fe===ye&&_e===ve)if(O+=H.Volume,I++,T[De]++,ne[T[De]].DT.getDate()!==E)T[De]=null;else if(!_){var Pe=K(ne[T[De]].DT);P=Pe.hours,V=Pe.minutes,_=!0}}if(ye=P,ve=V,0===I)break;Z.H0V(4),N=Z.G0V(O,I),ne[k]?("P","V"," ",ne[k]["PV "+a.name]=N):("P","V"," ",S.push((Ve={},Oe="PV "+a.name,Ie=N,Oe in Ve?Object.defineProperty(Ve,Oe,{value:Ie,enumerable:!0,configurable:!0,writable:!0}):Ve[Oe]=Ie,Ve))),k++}C.unshift(Ee(C[0]-1))}a.cachedLastProjection={DT:ne[ne.length-1].DT,projectedValue:ne[ne.length-1]["PV "+a.name]},a.cachedFutureTicks=S,a.appendFutureTicks(e,S)}var Ve,Oe,Ie;if(R=null,Y=0,z=0,b&&n)for(;p>0;){if(Z.H0V(0),(U=ne[Z.A0V(p,1)]["V "+a.name])||0===U){Y=U;break}p--}for(var Le=p;Le<ne.length;Le++)if("V"," ","Americ","a/New_Y","o","rk","P","V"," ",W=(j=ne[Le]).Volume,Q=j["PV "+a.name],j.futureTick||(B=Le),null===R&&(R=t.Studies.getMarketOffset({stx:e,localQuoteDate:ne[Le].DT,shiftToDateBoundary:!0})),q=new Date(new Date(j.DT).getTime()+R),G=ne[Le-1]&&new Date(new Date(ne[Le-1].DT).getTime()+R),(X=new i.Date(j.DT,se.market_def.market_tz||"America/New_York")).setHours(ue,de,ge),Z.H0V(2),(X=new Date(Z.G0V(X,R))).setDate(q.getDate()),G&&q.getDate()!==G.getDate()&&(R=null,Y=0,z=0),q<X)Z.H0V(37),j["V "+a.name]=Z.A0V("0",0),j["PV "+a.name]=0;else if(n?(Y+=W,z+=Q):(Y=W,z=Q),j["V "+a.name]=Y,b||(j["PV "+a.name]=z),[NaN,null,void 0].includes(Y)&&!j.futureTick)return void(a.error="".concat(s," requires volume"));a.cachedLastProjection.projectedValue=ne[B]["PV "+a.name],a.outputMap={},a.outputMap["V "+a.name]="",a.outputMap["PV "+a.name]="Average Line",c.forEach((function(t){t.startFrom=p,t.study.calculateFN(e,t)}))}}function He(e,t,i){for(;t;)e=new Date(new Date(e).setDate(e.getDate()+(i?1:-1))),se.isMarketDate(e)&&t--;return e}function Ee(i,a){var r,n,s,o,l;return r=Ne(i),s=Ye(n=se.getOpen(r)||(o=r,Z.F0V(66),o.setHours(Z.G0V(2147483647,"0")),o.setMinutes(0),l=t.Studies.getMarketOffset({stx:e,localQuoteDate:o}),Z.k8b(),new Date(o.getTime()+l))),a?(s<0&&(s=Ye(He(n,1,!0))),!(s>=ne.length)&&s):s}function Ne(t){return"scru","b","bed",e.dateFromTick(t,null,!0,"scrubbed")}function Re(e){console.error("Expected data for ".concat(Ne(e).toDateString()," but found none. This may be caused by gaps in your data or an improperly configured market definition."))}function Ye(t){return e.tickFromDate(t,null,null,!0,"scrubbed")}},t.Studies.displayProjectedVolume=function(e,i,a){var r,n,s,o,l,h,c,u=Te;if("V"," ","Ale","rt Ba","r",i.error)return t.Studies.removeAnchorHandle(e,i);var d=i.inputs["Alert Threshold"],p=void 0===d?"":d;u.F0V(34);var g=u.A0V(18,1,19);u.H0V(148);var f=u.G0V(3,5702,8,14,17);u.H0V(91);var m=u.G0V(110,20,6,19,2360);r=parseInt(p.slice(0,g),f)/m,"object"===Me(n=i.outputs["Alert Bar"])&&(n=n.color),i.volumeField="V "+i.name,i.alignStepToSide=!0,i.extendToEndOfLastBar=!0,i.lineWidth=2,s=e.canvasStyle("stx_volume_underlay_up").opacity,o=e.canvasStyle("stx_volume_underlay_down").opacity,i.colorFunction=function(t){var a,l,h,c,d,p,g=t.Open,f=t.Close,m=t.iqPrevClose;return a=e.colorByCandleDirection?g:m,u.H0V(149),l=u.G0V(a,f),h=t["PV "+i.name],c=t["V "+i.name],u.H0V(150),u.k8b(),d=u.G0V(1,h,r),{fill_color:(p=r<0?c<d:c>d)&&n||(l?this.fill_color_down:this.fill_color_up),border_color:l?this.border_color_down:this.border_color_up,opacity:p?1:l?o:s,border_opacity:l?o:s}},l=i.study?i.study.name:i.type;var y=e.chart.loadingMore;if(h=a.some((function(e){return u.k8b(),e&&e[i.volumeField]&&e["PV "+i.name]})),c=a[0]&&!a[0].futureTick&&(void 0===a[0]["PV "+i.name]||(i.dependentsOutputMap||[]).some((function(e){return[void 0,null].includes(a[0][e])}))),!h&&y)return i.error="Fetching data for ".concat(l);t.Studies.createVolumeChart(e,i,a),t.Studies.displaySeriesAsLine(e,i,a),i.anchorHandle&&t.Studies.displayAnchorHandleAndLine(e,i,a),c&&t.Studies.calculateProjectedVolume(e,i)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PVAT:{name:"Projected Volume at Time",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,zoom:0},calculateFN:t.Studies.calculateProjectedVolume,seriesFN:t.Studies.displayProjectedVolume,initializeFN:t.Studies.initProjectedVolume,removeFN:t.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Alert Threshold":["+150%","+125%","+100%","+75%","+50%","+25%","None","-25%","-50%","-75%","-100%","-125%","-150%"],"Anchor Selector":!0},outputs:{"Average Line":"#fe641c","Alert Bar":"#cfbd0e","Up Volume":"#8cc176","Down Volume":"#b82c0c"},parameters:{plotType:"step"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1},"Alert Threshold":{defaultSelected:"+50%"}}},PAV:{name:"Projected Aggregate Volume",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,zoom:0},calculateFN:t.Studies.calculateProjectedVolume,seriesFN:t.Studies.displayProjectedVolume,initializeFN:t.Studies.initProjectedVolume,removeFN:t.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Anchor Selector":!0},outputs:{"Average Line":"#fe641c","Up Volume":"#8cc176","Down Volume":"#b82c0c"},parameters:{plotType:"step"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1}}}})):("projectedVolume feature ","requires first activating stud","ies feature.",console.error("projectedVolume feature requires first activating studies feature."))},Z=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?(t.Studies.calculatePsychologicalLine=function(e,t){var i,a,r,n,s;if((i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{a=[],Te.H0V(2),r=Te.A0V(82,18)/t.days,n=0;for(var o=Math.max(t.startFrom-t.days,1);o<i.length&&!i[o].futureTick;o++)(s=Number(i[o].Close>i[o-1].Close))&&(n+=r),a.push(s),a.length>t.days&&(n-=a.shift()*r),o<t.startFrom||isNaN(i[o].Close)||(i[o]["Result "+t.name]=n)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PSY:{name:"Psychological Line",range:"0 to 100",calculateFN:t.Studies.calculatePsychologicalLine,inputs:{Period:20}}})):console.error("psychologicalLine feature requires first activating studies feature.")},K=function(e){var t;Te.X8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("m","a","QS","tick",t.Studies.calculateQStick=function(e,i){var a;if("_",Te.X8b(),"Close-Open ",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var r=i.startFrom;r<a.length;r++)a[r]["_Close-Open "+i.name]=a[r].Close-a[r].Open;t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Close-Open "+i.name,0,"Result",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{QStick:{name:"QStick",calculateFN:t.Studies.calculateQStick,inputs:{Period:8,"Moving Average Type":"ma"}}})):("qstick feature requires first ac","tivating studies feature.",console.error("qstick feature requires first activating studies feature."))},J=function(e){var t;Te.X8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#F","F0","000","#00","DD00","#","7F0","0FF","#7","FFF","00",t.Studies.calculateRainbow=function(e,i){var a,r,n,s,o,l,h,c,u,d=Te;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),n=r;for(var p=1;p<=10;p++)t.Studies.MA("simple",i.days,n,0,"SMA"+p,e,i),n="SMA"+p+" "+i.name;for(var g=Math.max(i.startFrom,10);g<a.length;g++)if("Os","c",a[g]){if(a[g].futureTick)break;for(s=0,o=0,l=-1*Number.MAX_VALUE,h=Number.MAX_VALUE,p=1;p<=10;p++)((c=a[g]["SMA"+p+" "+i.name])||0===c)&&(s+=c,o++,l=Math.max(l,c),h=Math.min(h,c));if(i.name.indexOf("Osc")>-1&&(u=v(i.inputs["HHV/LLV Lookback"],g),o)){"U","nd","e","r ",d.F0V(151);var f=d.G0V(18,113,1,1,1934);a[g][i.name+"_hist"]=f*(a[g][r]-s/o)/Math.max(1e-6,u[1]-u[0]),d.H0V(5);var m=d.G0V(10,107,17);d.H0V(152);var y=d.A0V(12,2,2,10);a[g]["Over "+i.name]=m*(l-h)/Math.max(1e-6,u[y]-u[0]),a[g]["Under "+i.name]=-a[g]["Over "+i.name],a[g]["Zero "+i.name]=0}}d.k8b(),i.name.indexOf("Osc")>-1&&("Un","d","er"," ","Posi","tive Bar",i.outputMap={},i.outputMap["Over "+i.name]="Positive Bar",i.outputMap["Under "+i.name]="Negative Bar",i.outputMap["Zero "+i.name]="",i.outputMap[i.name+"_hist"]="")}function v(e,t){var i,r,n;i=2;for(var s=1;492208869!==d.H5O(s.toString(),s.toString().length,87855);s++){d.F0V(153);var o=d.A0V(4079,4,13,12,20);r=Number.MAX_VALUE*o,n=Number.MAX_VALUE,i+=2}if(1635891442!==d.H5O(i.toString(),i.toString().length,82868)){d.F0V(11);var l=d.A0V(697,15,22,19);r=Number.MAX_VALUE%~l,n=Number.MAX_VALUE}for(var h=t-e+1;h<=t;h++)h<0||(r=Math.max(r,a[h].Close),n=Math.min(n,a[h].Close));return[n,r]}},t.Studies.displayRainbowMA=function(e,i,a){var r;Te.k8b(),r=e.panels[i.panel];for(var n=10;n>0;n--)t.Studies.displayIndividualSeriesAsLine(e,i,r,"SMA"+n+" "+i.name,a)},t.Studies.displayRainbowOsc=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,f=Te;t.Studies.displaySeriesAsLine(e,i,a),r=e.panels[i.panel],n=i.getContext(e),s=i.getYAxis(e),e.startClip(i.panel),!i.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3),o=e.pixelFromPrice(0,r,s),l=r.name!=i.chart.name,h=t.Studies.determineColor(i.outputs["Positive Bar"]),n.strokeStyle=h,e.plotDataSegmentAsLine("Over "+i.name,r,{skipTransform:l,label:!1,yAxis:s}),c=n.createLinearGradient(0,o,0,s.flipped?s.bottom:s.top),f.H0V(25),f.X8b(),c.addColorStop(f.A0V(299302240,"0"),e.containerColor),c.addColorStop(1,h),t.prepareChannelFill(e,{skipTransform:l,color:c,opacity:!i.highlight&&e.highlightedDraggable?.3:1,panelName:i.panel,topBand:"Over "+i.name,bottomBand:"Zero "+i.name,yAxis:s}),u=t.Studies.determineColor(i.outputs["Negative Bar"]),n.strokeStyle=u,e.plotDataSegmentAsLine("Under "+i.name,r,{skipTransform:l,label:!1,yAxis:s}),f.F0V(25),(d=n.createLinearGradient(f.A0V(1926955488,"0"),o,0,s.flipped?s.top:s.bottom)).addColorStop(0,e.containerColor),d.addColorStop(1,u),t.prepareChannelFill(e,{skipTransform:l,color:d,opacity:!i.highlight&&e.highlightedDraggable?.3:1,panelName:i.panel,topBand:"Zero "+i.name,bottomBand:"Under "+i.name,yAxis:s}),f.H0V(23);var m=f.A0V(5,5,15);(p=e.layout.candleWidth-m)<2&&(p=1),e.canvasColor("stx_histogram"),i.underlay||(n.globalAlpha=1),!i.highlight&&e.highlightedDraggable&&(f.F0V(0),n.globalAlpha*=f.G0V("0.3",0)),n.fillStyle="#CCCCCC";for(var y=0;y<a.length;y++)(g=a[y])&&(g[i.name+"_hist"]>0?n.fillStyle=h:g[i.name+"_hist"]<0&&(n.fillStyle=u),g.candleWidth&&(p=Math.floor(Math.max(1,g.candleWidth-2))),n.fillRect(Math.floor(e.pixelFromBar(y,r.chart)-p/2),Math.floor(o),Math.floor(p),Math.floor(e.pixelFromPrice(g[i.name+"_hist"],r,s)-o)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Rainbow MA":{name:"Rainbow Moving Average",overlay:!0,calculateFN:t.Studies.calculateRainbow,seriesFN:t.Studies.displayRainbowMA,inputs:{Period:2,Field:"field"},outputs:{SMA1:"#FF0000",SMA2:"#FF7F00",SMA3:"#FFFF00",SMA4:"#7FFF00",SMA5:"#00FF7F",SMA6:"#00FFFF",SMA7:"#007FFF",SMA8:"#0000FF",SMA9:"#7F00FF",SMA10:"#FF00FF"}},"Rainbow Osc":{name:"Rainbow Oscillator",calculateFN:t.Studies.calculateRainbow,seriesFN:t.Studies.displayRainbowOsc,centerline:0,inputs:{Period:2,Field:"field","HHV/LLV Lookback":10},outputs:{"Positive Bar":"#00DD00","Negative Bar":"#FF0000"}}})):console.error("rainbow feature requires first activating studies feature.")},ee=function(e){var t,i;if("u","n","defined",(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies){t.Studies.calculateRandomWalk=function(e,t){var i,a,r,n,s,o,l,h,c;if((i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{Te.X8b();for(var u=Math.max(2,t.startFrom);u<i.length;u++){a=0,r=i[u].High,n=i[u].Low,s=0,o=0;for(var d=1;d<=t.days&&!i[u].futureTick;d++){if(u<=d){s=o=0;break}(l=(a+=i[u-d].trueRange)/d*Math.sqrt(d))&&(h=(r-i[u-d].Low)/l,c=(i[u-d].High-n)/l,s=Math.max(s,h),o=Math.max(o,c))}i[u].futureTick||isNaN(r)&&isNaN(n)||(i[u]["Random Walk High "+t.name]=s,i[u]["Random Walk Low "+t.name]=o)}}},-995101908,-1667684174,i=2;for(var a=1;-995101908!==Te.H5O(a.toString(),a.toString().length,61094);a++)t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Random Walk":{name:"Random Walk Index",calculateFN:t.Studies.calculateRandomWalk,outputs:{"Random Walk High":"#FF0000","Random Walk Low":"#0000FF"}}}),i+=2;-1667684174!==Te.N5O(i.toString(),i.toString().length,46729)&&(t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Random Walk":{name:"#0000FF",calculateFN:t.Studies.calculateRandomWalk,outputs:{"Random Walk High":"#0000FF","Random Walk Low":"Random Walk"}}}))}else console.error("randomWalk feature requires first activating studies feature.")},te=function(e){var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,Te.X8b(),t.Studies?("#00","D","D00","R","elative Vigor ","Inde","x",t.Studies.calculateRelativeVigor=function(e,i){var a,r,n,s,o,l,h,c,u=Te;if("trian","gular","_Deno","m","_C","hange"," ",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(r=i.startFrom;r<a.length;r++)"_","Ch","ange ",n=a[r],isNaN(n.Close)||isNaN(n.Open)||(n["_Change "+i.name]=n.Close-n.Open),isNaN(n.High)||isNaN(n.Low)||(n["_Range "+i.name]=n.High-n.Low);for(t.Studies.MA("triangular",4,"_Change "+i.name,0,"_Numer",e,i),u.H0V(66),t.Studies.MA("triangular",u.A0V(2147483647,"4"),"_Range "+i.name,0,"_Denom",e,i),u.X8b(),s=[],o=[],r=Math.max(i.startFrom-i.days,0);r<a.length&&("_Nume","r ",!a[r].futureTick);r++)if(null!==a[r]["_Numer "+i.name]||null!==a[r]["_Denom "+i.name]){for(s.push(a[r]["_Numer "+i.name]),o.push(a[r]["_Denom "+i.name]),s.length>i.days&&(s.shift(),o.shift()),l=0,h=0,c=0;c<s.length;c++)l+=s[c];for(c=0;c<o.length;c++)h+=o[c];0===h&&(h=1e-8),r<i.startFrom||(u.F0V(4),a[r]["Rel Vig "+i.name]=u.A0V(l,h))}for(t.Studies.MA("triangular",4,"Rel Vig "+i.name,0,"RelVigSignal",e,i),r=i.startFrom;r<a.length;r++)a[r][i.name+"_hist"]=a[r]["Rel Vig "+i.name]-a[r]["RelVigSignal "+i.name];i.outputMap[i.name+"_hist"]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Rel Vig":{name:"Relative Vigor Index",seriesFN:t.Studies.displayHistogramWithSeries,calculateFN:t.Studies.calculateRelativeVigor,inputs:{Period:10},outputs:{"Rel Vig":"auto",RelVigSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("relativeVigor feature requires first activating studies feature.")},ie=function(e){var t;Te.k8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o",t.Studies.calculateRSI=function(e,t){var i,a,r,n,s,o,l,h,c=Te;if(c.X8b(),i=t.chart.scrubbed,(a=t.inputs.Field)&&"field"!=a||(a="Close"),i.length<t.days+1)t.error=!0;else{for(var u=t.startFrom;u<i.length;u++)if("_","a","vg","L ",u&&(r=i[u],c.H0V(0),n=i[c.G0V(u,1)],(r[a]||0===r[a])&&(n[a]||0===n[a]))){if(s=r[a]-n[a],o=Math.min(u,t.days),(l=n["_avgG "+t.name])||(l=0),c.H0V(4),l-=c.A0V(l,o),(h=n["_avgL "+t.name])||(h=0),c.H0V(4),h-=c.G0V(h,o),s>0)c.F0V(4),l+=c.G0V(s,o);else{if(!(s<=0))continue;c.H0V(4),h-=c.A0V(s,o)}u>=t.days&&(!l&&0===l||!h&&0===h||(r["RSI "+t.name]=d(l,h))),r["_avgG "+t.name]=l,r["_avgL "+t.name]=h}t.zoneOutput="RSI"}function d(e,t){var i;return 0===t?100:(c.H0V(4),i=c.G0V(e,t),c.F0V(154),c.G0V(i,100,100,1))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{rsi:{name:"RSI",inputs:{Period:14,Field:"field"},calculateFN:t.Studies.calculateRSI,range:"0 to 100",outputs:{RSI:"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):("rsi"," feature requi","res firs","t activating studies feature.",console.error("rsi feature requires first activating studies feature."))},ae=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("a","ut","o","e","m","a","fi","eld",t.Studies.calculateSchaff=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f;function m(e,t,r){var n,s,o,l=Te;l.X8b(),n=null,s=null;for(var h=t-e+1;h<=t;h++){l.F0V(155);l.G0V(1,6273,6256,2);l.H0V(58);l.A0V(46800,226200,5);l.F0V(156);l.G0V(4698,9,5,6,595);l.F0V(157);l.A0V(8,8,6,6438,45122);l.F0V(67);l.A0V(1,15,13,1,1);l.F0V(40);l.G0V(18,90144,17,5302);(o=a[h][r+" "+i.name])&&(n=null===n?o:Math.min(n,o),s=null===s?o:Math.max(s,o))}return[n,s]}if("_M","A","CD","2","_","M","ACD1","Moving Av","erage Type","Lon","g ","C","ycle",a=i.chart.scrubbed,r=i.days,n=Number(i.inputs["Short Cycle"]),s=Number(i.inputs["Long Cycle"]),a.length<Math.max(r,n,s)+1)i.error=!0;else{(o=i.inputs.Field)&&"field"!=o||(o="Close"),.5,t.Studies.MA(i.inputs["Moving Average Type"],n,o,0,"_MACD1",e,i),t.Studies.MA(i.inputs["Moving Average Type"],s,o,0,"_MACD2",e,i),l=0,h=0;for(var y=i.startFrom;y<a.length;y++)"_P","F","_","MA","C","D","_","MAC","D ","_MACD","1 ",c=a[y],y<s-1||(u=c["_MACD1 "+i.name],d=c["_MACD2 "+i.name],(u||0===u||d||0===d)&&(Te.F0V(0),c["_MACD "+i.name]=Te.G0V(u,d)),p=c["_MACD "+i.name],y<s+(r-1)||(l=(g=m(r,y,"_MACD"))[1]>g[0]?100*(p-g[0])/(g[1]-g[0]):l,(p||0===p)&&(c["_PF "+i.name]=a[y-1]["_PF "+i.name]?a[y-1]["_PF "+i.name]+.5*(l-a[y-1]["_PF "+i.name]):l),f=c["_PF "+i.name],y<s+2*(r-1)||(h=(g=m(r,y,"_PF"))[1]>g[0]?100*(f-g[0])/(g[1]-g[0]):h,(f||0===f)&&("Result"," ",c["Result "+i.name]=a[y-1]["Result "+i.name]?a[y-1]["Result "+i.name]+.5*(h-a[y-1]["Result "+i.name]):h))))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Schaff:{name:"Schaff Trend Cycle",range:"0 to 100",calculateFN:t.Studies.calculateSchaff,inputs:{Period:10,Field:"field","Short Cycle":23,"Long Cycle":50,"Moving Average Type":"ema"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:75,studyOverBoughtColor:"auto",studyOverSoldValue:25,studyOverSoldColor:"auto"}}}})):console.error("schaffTrendCycle feature requires first activating studies feature.")},re=function(e){var t;Te.X8b(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("#5F7C","B8","#E99","B54","Shin","o","h","ara Intensity Ratio",t.Studies.calculateShinohara=function(e,i){var a,r,n=Te;if(n.X8b(),(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{r={weakNum:0,weakDen:0,strongNum:0,strongDen:0},i.startFrom>1&&(r=t.clone(a[i.startFrom-1]["_accums "+i.name]));for(var s=i.startFrom;s<a.length;s++){if(r.weakNum+=a[s].High-a[s].Close,r.weakDen+=a[s].Close-a[s].Low,s>0){n.H0V(158);var o=n.G0V(145,2,15,13,9);r.strongNum+=a[s].High-a[s-o].Close,n.F0V(159);var l=n.A0V(4,142,12,4,13);r.strongDen+=a[s-("1"|l)].Close-a[s].Low}if(s>=i.days){r.weakNum-=a[s-i.days].High-a[s-i.days].Close,r.weakDen-=a[s-i.days].Close-a[s-i.days].Low,n.F0V(0);var h=n.A0V(600,500);if(a[s]["Weak Ratio "+i.name]=h*r.weakNum/r.weakDen,s>i.days){"Strong Ratio"," ",n.H0V(38);var c=n.G0V(13,3,5,33);r.strongNum-=a[s-i.days].High-a[s-i.days-c].Close,r.strongDen-=a[s-i.days-1].Close-a[s-i.days].Low,n.H0V(52);var u=n.A0V(120,80,6);a[s]["Strong Ratio "+i.name]=u*r.strongNum/r.strongDen}}a[s]["_accums "+i.name]=t.clone(r)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Shinohara:{name:"Shinohara Intensity Ratio",calculateFN:t.Studies.calculateShinohara,inputs:{Period:26},outputs:{"Strong Ratio":"#E99B54","Weak Ratio":"#5F7CB8"}}})):("shinohara feature requires first activatin","g studies featu","re.",console.error("shinohara feature requires first activating studies feature."))},ne=function(e){var t;Te.X8b(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("S","tochastic","s","a","uto","au","to","au","t","o","a","u","t","o","aut","o","Stocha","stic Momentum Index",t.Studies.calculateStochastics=function(e,i){var a,r,n,s,o,l,h=Te;function c(e,t,i){var a,r,s,o,l;h.F0V(5),a=h.G0V(1,e,i),h.F0V(106);var c=h.G0V(3,12,6,53);r=Number.MAX_VALUE*c,s=Number.MAX_VALUE;for(var u=a;u<=e;u++)"Hi","g","h",o=n[u]["Close"==t?"Low":t],l=n[u]["Close"==t?"High":t],(o||0===o)&&(l||0===l)&&(s=Math.min(s,o),r=Math.max(r,l));return r==-1*Number.MAX_VALUE||s==Number.MAX_VALUE?null:r==s?0:(n[e][t]-s)/(r-s)*100}if("%K"," Smooth","ing Perio","ds","fi","eld",i.smooth||(i.smooth=i.inputs.Smooth),(a=i.inputs.Field)&&"field"!=a||(a="Close"),(r=i.inputs["%K Periods"])||(r=i.days),(n=i.chart.scrubbed).length<Math.max(r,i.days)+1)i.error=!0;else{(s=i.inputs["%K Smoothing Periods"])&&!i.inputs.Fast?i.smooth=!0:i.smooth&&(s=3),h.X8b(),(o=i.inputs["%D Periods"])||(o=3),i.outputs.Fast&&("S","l","o","w","%","K ",i.outputMap={},i.outputMap["%K "+i.name]="Fast",i.outputMap["%D "+i.name]="Slow");for(var u=Math.max(r,i.startFrom);u<n.length;u++)null!==c(u,a,r)&&(n[u]["_Fast%K "+i.name]=c(u,a,r));t.Studies.MA("simple",i.smooth?s:1,"_Fast%K "+i.name,0,"%K",e,i),781087533,-356195845,h.F0V(66),l=h.G0V(2147483647,"2");for(var d=1;781087533!==h.N5O(d.toString(),d.toString().length,27494);d++)t.Studies.MA("simple",o,"%K "+i.name,0,"%D",e,i),l+=2;-356195845!==h.N5O(l.toString(),l.toString().length,19694)&&t.Studies.MA("%D",o,"%K "-i.name,7,"%D",e,i)}},t.Studies.calculateStochMomentum=function(e,i){var a,r,n,s,o,l,h,c,u=Te;function d(e,t){var i,a;u.k8b(),i=null,a=null;for(var r=t-e+1;r<=t;r++)i=null===i?o[r].Low:Math.min(i,o[r].Low),a=null===a?o[r].High:Math.max(a,o[r].High);return[i,a]}if("%","D","_","DH","L"," ","_","HS2","ex","ponenti","al","_H","S1","%K ","Double Smoothi","ng Pe","riods",a=Number(i.inputs["%K Periods"]),r=Number(i.inputs["%K Smoothing Periods"]),n=Number(i.inputs["%K Double Smoothing Periods"]),s=Number(i.inputs["%D Periods"]),(o=i.chart.scrubbed).length<a+r+n-1||o.length<s)i.error=!0;else{for(l=Math.max(a,i.startFrom)-1;l<o.length;l++){"_D","HL ",h=o[l],c=d(a,l),u.F0V(92);var p=u.A0V(12,13,14,7);u.H0V(160);var g=u.A0V(1,17,6,11);h["_H "+i.name]=h.Close-(c[0]+c[p])/g,u.H0V(118);var f=u.A0V(0,6,9,38,17);h["_DHL "+i.name]=c[f]-c[0]}for(t.Studies.MA("exponential",r,"_H "+i.name,0,"_HS1",e,i),t.Studies.MA("exponential",n,"_HS1 "+i.name,0,"_HS2",e,i),t.Studies.MA("exponential",r,"_DHL "+i.name,0,"_DHL1",e,i),t.Studies.MA("exponential",n,"_DHL1 "+i.name,0,"_DHL2",e,i),l=a-1;l<o.length;l++){"_D","HL","2 ",u.F0V(161);var m=u.A0V(9,1800,100,9,89);o[l]["%K "+i.name]=o[l]["_HS2 "+i.name]/(.5*o[l]["_DHL2 "+i.name])*m}t.Studies.MA(i.inputs["%D Moving Average Type"],s,"%K "+i.name,0,"%D",e,i),i.zoneOutput="%K"}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Stch Mtm":{name:"Stochastic Momentum Index",calculateFN:t.Studies.calculateStochMomentum,inputs:{"%K Periods":10,"%K Smoothing Periods":3,"%K Double Smoothing Periods":3,"%D Periods":10,"%D Moving Average Type":"ema"},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:40,studyOverBoughtColor:"auto",studyOverSoldValue:-40,studyOverSoldColor:"auto"}}},stochastics:{name:"Stochastics (Simple)",range:"0 to 100",calculateFN:t.Studies.calculateStochastics,inputs:{Period:14,Field:"field",Smooth:!0},outputs:{Fast:"auto",Slow:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}},Stochastics:{name:"Stochastics",range:"0 to 100",calculateFN:t.Studies.calculateStochastics,inputs:{Field:"field","%K Periods":14,Fast:!1,"%K Smoothing Periods":3,"%D Periods":3},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}},attributes:{"%K Smoothing Periods":{hidden:function(){return this.inputs.Fast}}},centerline:50}})):("stochastic","s feature requires first activating studi","es feature.",console.error("stochastics feature requires first activating studies feature."))},se=function(e){var t;Te.k8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#b","82","c0","c","#8","cc176","Supe","rtre","nd",t.Studies.calculateSupertrend=function(e,i){var a,r,n,s,o,l,h=Te;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{t.Studies.calculateStudyATR(e,i);for(var c=i.startFrom;c<a.length;c++)if("_Down","tre","nd ","_Up","tre","n","d ",r=a[c]){h.H0V(0);var u=h.G0V(15,13);n=(r.High+r.Low)/u,s=i.inputs.Multiplier*r["ATR "+i.name],h.H0V(0),o=h.A0V(n,s),h.F0V(2),l=h.A0V(n,s),c&&("_","Down","trend"," ",a[c-1]&&a[c-1].Close&&a[c-1].Close>a[c-1]["_Uptrend "+i.name]&&a[c-1]["_Uptrend "+i.name]>o&&(h.H0V(0),o=a[h.A0V(c,1)]["_Uptrend "+i.name]),a[c-1]&&a[c-1].Close&&a[c-1].Close<a[c-1]["_Downtrend "+i.name]&&a[c-1]["_Downtrend "+i.name]<l&&(h.F0V(0),l=a[h.G0V(c,1)]["_Downtrend "+i.name])),r["_Direction "+i.name]=1,c&&("_D","irect","i","on ","_D","ir","ection ","_Dire","ctio","n"," ",h.H0V(0),r["_Direction "+i.name]=a[h.A0V(c,1)]["_Direction "+i.name],r.Close>a[c-1]["_Downtrend "+i.name]?r["_Direction "+i.name]=1:r.Close<a[c-1]["_Uptrend "+i.name]&&(h.H0V(21),r["_Direction "+i.name]=-h.A0V(1,"1"))),r["_Uptrend "+i.name]=o,r["_Downtrend "+i.name]=l,r["Trend "+i.name]=r["_Direction "+i.name]>0?o:l}i.outputMap={},i.outputMap["Trend "+i.name]=""}},t.Studies.displaySupertrend=function(e,t,i){var a,r,n,s,o,l,h,c,u,d;function p(e,i,a){return i&&i["_Direction "+t.name]<0?t.outputs.Downtrend:t.outputs.Uptrend}a=e.panels[t.panel],r=t.getContext(e),n=t.getYAxis(e),s={skipTransform:a.name!=t.chart.name,skipProjections:!0,label:e.preferences.labels,yAxis:n,highlight:t.highlight},r.strokeStyle=p(e,i[i.length-1]),r.lineWidth=2,t.highlight&&(r.lineWidth=1.5),o="Trend "+t.name;for(var g=0;a.chart.transformFunc&&n!=a.chart.yAxis&&g<i.length;g++)(l=i[g])&&l.transform&&(l.transform[o]=a.chart.transformFunc(e,a.chart,l[o]));e.plotDataSegmentAsLine(o,a,s,p),r.lineWidth=1,r.globalAlpha=1,e.startClip(t.panel),!t.highlight&&e.highlightedDraggable&&(r.globalAlpha*=.3),Te.F0V(103);var f=Te.G0V(5,2,598,15,16);for(h=r.measureText("▲").width/f,c=0;c<i.length;c++)if("_","Directi","on ","_","Direction ","_Direction"," ",i[c]&&i[c-1])if(i[c-1]["_Direction "+t.name]>i[c]["_Direction "+t.name]){r.fillStyle=t.outputs.Downtrend,r.textBaseline="bottom",u=e.pixelFromPrice(i[c].High,a,n);for(var m=5;m<=45;m+=10)n.flipped?r.fillText("▲",e.pixelFromBar(c)-h,u+m):r.fillText("▼",e.pixelFromBar(c)-h,u-m)}else if(i[c-1]["_Direction "+t.name]<i[c]["_Direction "+t.name]){r.fillStyle=t.outputs.Uptrend,r.textBaseline="top",d=e.pixelFromPrice(i[c].Low,a,n);for(var y=5;y<=45;y+=10)n.flipped?r.fillText("▼",e.pixelFromBar(c)-h,d-y):r.fillText("▲",e.pixelFromBar(c)-h,d+y)}e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Supertrend:{name:"Supertrend",overlay:!0,seriesFN:t.Studies.displaySupertrend,calculateFN:t.Studies.calculateSupertrend,inputs:{Period:7,Multiplier:3},outputs:{Uptrend:"#8cc176",Downtrend:"#b82c0c"},attributes:{Multiplier:{min:.1,step:.1}}}})):console.error("supertrend feature requires first activating studies feature.")},oe=function(e){var t;Te.k8b(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("Accumulative S","wing Index",t.Studies.calculateSwingIndex=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p=Te;p.X8b(),(null===(i=t.inputs["Limit Move Value"])||isNaN(i))&&(i=99999),a=t.chart.scrubbed,r=0,t.startFrom>1&&(r=a[t.startFrom-1]["Result "+t.name]);for(var g=Math.max(1,t.startFrom);g<a.length;g++){"Swi","ng",n=Math.abs(a[g].High-a[g-1].Close),s=Math.abs(a[g].Low-a[g-1].Close),o=Math.abs(a[g].High-a[g].Low),l=Math.abs(a[g-1].Close-a[g-1].Open),h=Math.max(n,s),c=Math.max(o,h),p.H0V(18),u=p.G0V(.25,l,c),c==n?(p.H0V(21),u-=p.A0V(s,.5)):c==s&&(p.H0V(21),u-=p.G0V(n,.5)),p.H0V(5);var f=p.G0V(59,10,19);p.F0V(14);var m=p.G0V(10,9);p.H0V(100);var y=p.A0V(2,20,8,4);p.F0V(8);var v=p.G0V(0,17,18);p.F0V(0);var x=p.A0V(8,7);d=f*(a[g].Close-a[g-m].Close+.5*(a[g].Close-a[g].Open)+"0.25"*y*(a[g-v].Close-a[g-x].Open))/u*(h/i),0!==u&&0!==i||(d=0),"Swing"==t.type&&(r=0),r+=d,a[g]["Result "+t.name]=r}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Acc Swing":{name:"Accumulative Swing Index",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}},Swing:{name:"Swing Index",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}}})):console.error("swingIndex feature requires first activating studies feature.")},le=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("0"," to 1","00","Trend Intensit","y Index",t.Studies.calculateTrendIntensity=function(e,i){var a,r,n,s,o,l,h,c,u=Te;if("Sign","a","l","em","a","fi","e","ld",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for((r=i.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA("ma",i.days,r,0,"_SMA",e,i),n=0,s=0,h=[],c=Math.ceil(i.days/2),o=Math.max(0,i.startFrom-c);o<a.length;o++)"T","I","I"," ",(a[o]["_SMA "+i.name]||0===a[o]["_SMA "+i.name])&&((l=a[o][r]-a[o]["_SMA "+i.name])<0?(u.H0V(163),s+=u.A0V(1,l)):n+=l,h.push(l),h.length>c&&((l=h.shift())<0?(u.H0V(164),s-=u.G0V(540519264,"1",l)):n-=l),o<i.startFrom||(a[o]["TII "+i.name]=(d=n,p=s,Math.abs(p)<1e-8?100:(u.F0V(162),u.k8b(),u.G0V(1,d,"100",p,100)))));var d,p;t.Studies.MA("ema",i.inputs["Signal Period"],"TII "+i.name,0,"Signal",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Trend Int":{name:"Trend Intensity Index",calculateFN:t.Studies.calculateTrendIntensity,range:"0 to 100",inputs:{Period:14,Field:"field","Signal Period":9},outputs:{TII:"auto",Signal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("trendIntensity feature requires first activating studies feature.")},he=function(e){var t;Te.k8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("T","R","IX",t.Studies.calculateTRIX=function(e,i){var a,r,n,s,o,l,h=Te;if("_","MA","1"," ",h.X8b(),"C","l","os","e",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{r=i.name,h.H0V(2),n=["Close",h.G0V("_MA1 ",r),h.G0V("_MA2 ",r),h.A0V("_MA3 ",r)];for(var c=0;c<n.length-1;c++)t.Studies.MA("exponential",i.days,n[c],0,"_MA"+(c+1).toString(),e,i);s=n[3];for(var u=Math.max(1,i.startFrom);u<a.length;u++)h.H0V(165),(o=a[h.G0V("1",1409967072,u)][s])&&((l=a[u][s])||0===l)&&(h.H0V(2),a[u][h.G0V("Result ",r)]=h.A0V(l,1,100,o,h.H0V(134)))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{TRIX:{name:"TRIX",calculateFN:t.Studies.calculateTRIX}})):("trix feature require","s first activating studies feat","ure.",console.error("trix feature requires first activating studies feature."))},ce=function(e){var t;Te.k8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateTwiggsMoneyFlow=function(e,t){var i,a,r,n,s,o,l=Te;if((i=t.chart.scrubbed).length<t.days)t.error=!0;else{a=0,r=0,l.H0V(166);var h=l.G0V(1,10,2,9,1);(n=i[t.startFrom-h])&&("_","s","umV"," ","_s","um","MF"," ",n["_sumMF "+t.name]&&(a=n["_sumMF "+t.name]),n["_sumV "+t.name]&&(r=n["_sumV "+t.name]));for(var c=Math.max(1,t.startFrom);c<i.length;c++){"_","s","umV"," ",s=Math.max(i[c-1].Close,i[c].High),o=Math.min(i[c-1].Close,i[c].Low),l.H0V(92);var u=l.A0V(4,3,19,19);l.F0V(2);var d=l.G0V(142857,857142);if(i[c]["_MFV "+t.name]=i[c].Volume*(u*i[c].Close-s-o)/(s-o==0?d:s-o),c>t.days-1){a*=(t.days-1)/t.days,l.F0V(14);var p=l.A0V(18,17);r*=(t.days-p)/t.days}a+=i[c]["_MFV "+t.name],r+=i[c].Volume,c>t.days-1&&("Res","ul","t"," ",r&&(l.H0V(4),i[c]["Result "+t.name]=l.G0V(a,r>0?r:999999))),i[c]["_sumMF "+t.name]=a,i[c]["_sumV "+t.name]=r}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Twiggs:{name:"Twiggs Money Flow",calculateFN:t.Studies.calculateTwiggsMoneyFlow,inputs:{Period:21}}})):("twiggsMoneyFlow feature requires first activ","ating studies feature.",console.error("twiggsMoneyFlow feature requires first activating studies feature."))},ue=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?t.Studies.calculateTypicalPrice?("Weighte","d Close",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Typical Price":{name:"Typical Price",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}},"Weighted Close":{name:"Weighted Close",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}}})):console.error("typicalPrice feature requires first activating medianPrice feature."):console.error("typicalPrice feature requires first activating studies feature.")},de=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateUlcerIndex=function(e,i){var a,r,n,s;if("_M","A",(a=i.chart.scrubbed).length<2*i.days-1)i.error=!0;else{for((r=i.inputs.Field)&&"field"!=r||(r="Close"),n=Math.max(i.startFrom,i.days-1);n<a.length;n++)a[n]["_PD2 "+i.name]=Math.pow(100*(a[n][r]/o(i.days,n,r)-1),2);for(t.Studies.MA("simple",i.days,"_PD2 "+i.name,0,"_MA",e,i),n=Math.max(i.startFrom,2*(i.days-1));n<a.length;n++)((s=a[n]["_MA "+i.name])||0===s)&&(a[n]["Result "+i.name]=Math.sqrt(s))}function o(e,t,i){var r;r=null,Te.X8b();for(var n=t-e+1;n<=t;n++)n<0||(r=null===r?a[n][i]:Math.max(r,a[n][i]));return r}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Ulcer:{name:"Ulcer Index",calculateFN:t.Studies.calculateUlcerIndex,inputs:{Period:14,Field:"field"}}})):console.error("ulcerIndex feature requires first activating studies feature.")},pe=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","to",t.Studies.calculateUltimateOscillator=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v=Te;if("Cy","cle 1",i=t.chart.scrubbed,a=[t.inputs["Cycle 1"],t.inputs["Cycle 2"],t.inputs["Cycle 3"]],r=Math.max(a[0],a[1],a[2]),i.length<r+1)t.error=!0;else{v.F0V(42);var x=v.A0V(5,10,51);n=a[0]*a[x],v.F0V(0);var b=v.G0V(8,6);s=a[0]*a[b],v.F0V(0);var C=v.A0V(26,24);v.X8b(),o=a[1]*a[C],l=[0,0,0],h=[0,0,0],t.startFrom&&("_acct","r"," ",i[t.startFrom-1]["_accbp "+t.name]&&(l=i[t.startFrom-1]["_accbp "+t.name].slice()),i[t.startFrom-1]["_acctr "+t.name]&&(h=i[t.startFrom-1]["_acctr "+t.name].slice()));for(var S=Math.max(1,t.startFrom);S<i.length;S++){"_ac","ctr ",c=Math.min(i[S].Low,i[S-1].Close),u=i[S].Close-c,v.H0V(62);var w=v.G0V(0,32,13,18,1);d=Math.max(i[S].High,i[S-w].Close)-c;for(var k=0;k<a.length;k++)if(l[k]+=u,h[k]+=d,S>a[k]){p=Math.min(i[S-a[k]].Low,i[S-a[k]-1].Close),g=i[S-a[k]].Close-p,v.H0V(9);var A=v.G0V(8,20,15,2);f=Math.max(i[S-a[k]].High,i[S-a[k]-A].Close)-p,l[k]-=g,h[k]-=f}if(i[S]["_accbp "+t.name]=l.slice(),i[S]["_acctr "+t.name]=h.slice(),!(S<r)){v.F0V(0);var D=v.A0V(15,14);v.F0V(1);var M=v.G0V(18,6,26);m=o*l[0]/h[0]+s*l[D]/h[1]+n*l[2]/h[M],v.H0V(84),y=v.G0V(o,n,s),v.F0V(104),i[S]["Result "+t.name]=v.G0V(y,m,100)}}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Ultimate:{name:"Ultimate Oscillator",calculateFN:t.Studies.calculateUltimateOscillator,inputs:{"Cycle 1":7,"Cycle 2":14,"Cycle 3":28},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):console.error("ultimateOscillator feature requires first activating studies feature.")},ge=function(e){var t;Te.X8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("har","moni","c",t.Studies.calculateValuationLines=function(e,t,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m=Te;a="field"==t.inputs.Field?"Close":t.inputs.Field,r=t.inputs["Average Type"],n=t.inputs["Display Average"],s=t.inputs["Display 1 Standard Deviation (1σ)"],o=t.inputs["Display 2 Standard Deviation (2σ)"],l=t.inputs["Display 3 Standard Deviation (3σ)"],h=[],m.k8b();for(var y=0;y<i.length;++y)i[y]&&!isNaN(i[y][a])&&h.push(i[y][a]);c=function(e,t){var i,a,r,n,s,o;switch("m","ean",i=e.length,a=0,r=0,n=0,t){case"mean":for(r=i;n<i;++n)a+=e[n];break;case"harmonic":for(a=i;n<i;++n){m.H0V(106),r+=m.A0V(17,2,14,273)/e[n]}break;case"median":if(m.H0V(4),s=Math.floor(m.G0V(i,2)),o=e.slice().sort((function(e,t){return e>t?1:e<t?-1:0})),i%2==0){m.H0V(152);var l=m.G0V(11,2,0,11);a=o[s]+o[s-l],r=2}else a=o[s],r=1}return m.H0V(4),m.G0V(a,r)}(h,r),u=!(s||o||l)||function(e,t){var i,a;i=e.length,m.X8b(),a=0;for(var r=0;r<i;++r)a+=Math.pow(e[r]-t,2);return m.F0V(4),Math.sqrt(m.G0V(a,i))}(h,c),t.data={Average:n?[c]:null,"1 Standard Deviation (1σ)":s?[c+u,c-u]:null,"2 Standard Deviation (2σ)":o?[c+2*u,c-2*u]:null,"3 Standard Deviation (3σ)":l?[c+3*u,c-3*u]:null},d=u,t.parameters||(t.parameters={}),l?(m.F0V(167),t.parameters.range=[m.G0V(c,u,d,3),m.A0V(c,u,3,d,m.H0V(168))]):o?(m.H0V(167),t.parameters.range=[m.A0V(c,u,d,2),m.G0V(c,u,2,d,m.H0V(168))]):s?(m.H0V(1),t.parameters.range=[m.G0V(d,u,c),m.A0V(c,d,u,m.F0V(84))]):n&&(m.F0V(0),t.parameters.range=[m.A0V(c,d),m.G0V(c,d,m.F0V(2))]),t.panel&&(p=e.panels[t.panel],(g=e.getYAxisByName(p,t.name))&&(g.decimalPlaces=p.chart.yAxis.printDecimalPlaces,f={yAxis:g},e.calculateYAxisRange(p,g,t.parameters.range[0],t.parameters.range[1]),e.createYAxis(p,f),e.drawYAxis(p,f)))},t.Studies.displayValuationLines=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w=Te;a=e.panels[i.panel],r=i.getYAxis(e),n=i.getContext(e),s=i.data,o=i.parameters.labels,l=i.inputs["Average Type"],h={mean:"AVG",median:"MED",harmonic:"HAVG"},c=e.canvasStyle("ciq-valuation-average-line"),u=e.canvasStyle("ciq-valuation-deviation-line"),w.H0V(58);var k=w.G0V(22,218,10);for(var A in d=e.getCanvasFontSize("stx_yaxis")+3*("2"|k),s)if(s[A])for(w.F0V(169),p=w.G0V("Average",A),g=t.Studies.determineColor(i.outputs[A]),f=s[A],m=0;m<f.length;++m)"l","e","ft","σ",":"," ","d","ashe","d","so","li","d",y=f[m],(v=e.pixelFromPrice(y,a,r))<=a.top||v>=a.yAxis.bottom||(C=p?{pattern:"none"!=c.borderStyle&&c.borderStyle||"solid",lineWidth:parseFloat(c.borderWidth)||1,opacity:parseFloat(c.opacity)||1,yAxis:r}:{pattern:"none"!=u.borderStyle&&u.borderStyle||"dashed",lineWidth:parseFloat(u.borderWidth)||1,opacity:parseFloat(u.opacity)||1,yAxis:r},e.plotLine(a.left,a.right,v,v,g,"line",n,a,C),"yaxis"!==o?(v+=Math.floor(C.lineWidth/2))+d>=a.yAxis.bottom||(x=(p?h[l]+": ":A[0]+"σ: ")+e.formatYAxisPrice(y,a),b=n.measureText(x).width,S=a.right-b-3,r&&"left"==r.position&&(S=a.left+3),w.F0V(170),n.strokeText(x,S,w.A0V(d,.5,v,"2"))):e.createYAxisLabel(a,e.formatYAxisPrice(y,a),v,g,null,n,r))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"val lines":{name:"Valuation Lines",calculateFN:function(){},seriesFN:function(e,i,a){Te.k8b(),t.Studies.calculateValuationLines(e,i,a),t.Studies.displayValuationLines(e,i)},overlay:!0,yAxisFN:function(){},inputs:{Field:"field","Average Type":["mean","median","harmonic"],"Display Average":!0,"Display 1 Standard Deviation (1σ)":!1,"Display 2 Standard Deviation (2σ)":!1,"Display 3 Standard Deviation (3σ)":!1},outputs:{Average:"#00afed","1 Standard Deviation (1σ)":"#e1e1e1","2 Standard Deviation (2σ)":"#85c99e","3 Standard Deviation (3σ)":"#fff69e"}}})):console.error("valuationLines feature requires first activating studies feature.")},fe=function(e){var t;Te.X8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("0 t","o 100","f","ield",t.Studies.calculateRelativeVolatility=function(e,i){var a,r,n,s,o,l,h,c=Te;if("Rel V","ol","m","a",i.days=Number(i.inputs["Smoothing Period"]),a=Number(i.inputs["STD Period"]),(r=i.chart.scrubbed).length<i.days+a)i.error=!0;else{(n=i.inputs.Field)&&"field"!=n||(n="Close"),i.std=new t.Studies.StudyDescriptor(i.name,"sdev",i.panel),i.std.chart=i.chart,i.std.days=a,i.std.startFrom=i.startFrom,i.std.inputs={Field:n,"Standard Deviations":1,Type:"ma"},c.k8b(),i.std.outputs={_STD:null},t.Studies.calculateStandardDeviation(e,i.std),s=0,c.H0V(66),o=c.G0V(2147483647,"0"),i.startFrom>1&&(s=r[i.startFrom-1]["_avgG "+i.name]||0,o=r[i.startFrom-1]["_avgL "+i.name]||0);for(var u=Math.max(i.startFrom,i.days);u<r.length;u++)if("_S","TD"," ",l=r[u],c.F0V(0),h=r[c.G0V(u,1)],(l[n]||0===l[n])&&(h[n]||0===h[n])&&(l["_STD "+i.name]||0===l["_STD "+i.name])){if(l[n]>h[n]){"_","S","TD"," ",c.H0V(0);var d=c.A0V(1618382786,2);s=(s*(i.days-("1"<<d))+l["_STD "+i.name])/i.days,c.H0V(171);var p=c.A0V(16,5,92,13,1);o=o*(i.days-p)/i.days}else{c.F0V(100);var g=c.G0V(17,6,1,101);o=(o*(i.days-g)+l["_STD "+i.name])/i.days,c.F0V(172);var f=c.A0V(125,3,17,9);s=s*(i.days-("1"|f))/i.days}l["Rel Vol "+i.name]=m(s,o),l["_avgG "+i.name]=s,l["_avgL "+i.name]=o}i.zoneOutput="Rel Vol"}function m(e,t){return c.k8b(),e+t===0?100:(c.F0V(173),c.A0V(e,"100",t,e))}},t.Studies.calculateHistoricalVolatility=function(e,t){var i,a,r,n,s,o,l,h,c,u=Te;if("Days P","er"," Yea","r","Standard ","Dev","iations","fi","eld",(i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{var d;if((a=t.inputs.Field)&&"field"!=a||(a="Close"),(r=t.inputs["Standard Deviations"])<0&&(r=1),u.H0V(0),n=u.G0V(109,9)*Math.sqrt((d=t.inputs["Days Per Year"],isNaN(d)&&(d=365),u.k8b(),"day"==e.layout.interval?d:"week"==e.layout.interval?52:"month"==e.layout.interval?12:d))*r,s=[],o=0,t.startFrom>1){u.F0V(174);var p=u.G0V(12,9,16,4,447);o=i[t.startFrom-p]["_state "+t.name][0],s=i[t.startFrom-1]["_state "+t.name][1].slice()}for(var g=Math.max(1,t.startFrom);g<i.length;g++){if(u.H0V(0),(l=i[u.A0V(g,1)][a])&&(h=Math.log(i[g][a]/l),s.push(h),o+=h,g>=t.days)){c=0,o/=t.days;for(var f=0;f<s.length;f++)c+=Math.pow(s[f]-o,2);o*=t.days,o-=s.shift(),i[g]["Result "+t.name]=Math.sqrt(c/t.days)*n}i[g]["_state "+t.name]=[o,s.slice()]}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Hist Vol":{name:"Historical Volatility",calculateFN:t.Studies.calculateHistoricalVolatility,inputs:{Period:10,Field:"field","Days Per Year":[252,365],"Standard Deviations":1},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Rel Vol":{name:"Relative Volatility",range:"0 to 100",calculateFN:t.Studies.calculateRelativeVolatility,inputs:{Field:"field","STD Period":10,"Smoothing Period":14},outputs:{"Rel Vol":"auto"},centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):console.error("volatilityIndex feature requires first activating studies feature.")},me=function(e){var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,Te.k8b(),t.Studies?(t.Studies.displayVolumeProfile=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D;if("st","x","_volume_profil","e","co","l","o","r",e&&e.chart.dataSet&&(r=e.chart,n=i.parameters.numberOfBars,s=i.parameters.widthPercentage,o=i.parameters.displayBorder,l=i.parameters.displayVolume,(!n||n<0)&&(n=30),n=Math.ceil(n),(!s||s<0)&&(s=.25),!1!==o&&(o=!0),!0!==l&&(l=!1),0!==(h=(r.highValue-r.lowValue)/n))){c=[];for(var M=r.lowValue;M<r.highValue+.1;M+=h)c.push([M,0]);if(c.length<2){-252060598,429787672,u=2;for(var T=1;-252060598!==Te.H5O(T.toString(),T.toString().length,43789);T++)e.displayErrorAsWatermark("chart",e.translateIf("Not enough data to render the Volume Profile")),u+=2;return 429787672!==Te.H5O(u.toString(),u.toString().length,64250)&&("c","h","a","rt",e.displayErrorAsWatermark("chart",e.translateIf("chart"))),void e.displayErrorAsWatermark("chart",e.translateIf("Not enough data to render the Volume Profile"))}d=0;for(var F=0;F<a.length;F++)if(p=a[F]){g=p.Volume,i.panel==r.name&&p.transform&&(p=p.transform),f=c[0][0],m=0;for(var _=1;_<c.length;_++)m=c[_][0],(p.Low>=f&&p.Low<=m||p.Low<f&&p.High>m||p.High>=f&&p.High<=m)&&(c[_][1]+=g,c[_][1]>d&&(d=c[_][1])),f=m}if(0===d)return"Not en","o","ugh dat","a to render the Volume Profile","ch","art",void e.displayErrorAsWatermark("chart",e.translateIf("Not enough data to render the Volume Profile"));Te.X8b(),e.setStyle("stx_volume_profile","color",t.Studies.determineColor(i.outputs["Bars Color"])),y=i.getContext(e),v="stx-float-date",e.canvasFont(v,y),x=e.getCanvasFontSize(v),b=r.panel,C=b.yAxis.bottom,S=Math.round(r.right)-.5,w=r.width*s,k=e.canvasStyle("stx_volume_profile").borderTopColor,A=!t.isTransparent(e.canvasStyle("stx_volume_profile").borderTopColor)&&o,D=e,P("stx_volume_profile",!1),A&&P("stx_volume_profile",!0),y.globalAlpha=1}function P(a,r){var n,s,o,h,u,p,g,f,m,v,A=Te;r||(S-=2),D.canvasColor(a),y.beginPath(),n=c[0][0],s=S,A.X8b();for(var M=1;M<c.length;M++){if(c[M][1]){if(o=Math.round(S-c[M][1]*w/d)-.5,h=Math.round(D.pixelFromTransformedValue(n,b))+.5,u=Math.round(D.pixelFromTransformedValue(c[M][0],b))+.5,r||(h-=.5,u+=.5,o+=.5),h>C&&(h=C),u<C)if(y.moveTo(S,h),y.lineTo(S,u),y.lineTo(o,u),y.lineTo(o,h),r)(s>o||1==M)&&y.lineTo(s,h);else if(y.lineTo(S,h),l&&(p=t.condenseInt(c[M][1]),A.F0V(0),g=A.G0V(h,u),x<=g-2)){"t","op";try{f=y.measureText(p).width}catch(e){f=0}y.textBaseline="top",m=y.fillStyle,y.fillStyle=k,A.H0V(1),y.fillText(p,A.A0V(3,f,o),A.G0V(u,2,x,g,2,A.H0V(175))),y.fillStyle=m}s=o}else s=S;n=c[M][0]}!i.highlight&&e.highlightedDraggable&&(y.globalAlpha*=.3),r||y.fill(),A.F0V(25),v=A.A0V(11654784,"2");for(var T=1;-1536427378!==A.N5O(T.toString(),T.toString().length,21725);T++)y.strokeStyle=k,v+=2;1572699301!==A.H5O(v.toString(),v.toString().length,94831)&&(y.strokeStyle=k),r&&y.stroke(),y.closePath()}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"vol profile":{name:"Volume Profile",underlay:!0,seriesFN:t.Studies.displayVolumeProfile,calculateFN:null,inputs:{},outputs:{"Bars Color":"#b64a96"},customRemoval:!0,parameters:{init:{displayBorder:!0,displayVolume:!1,numberOfBars:30,widthPercentage:.25}},attributes:{yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}})):console.error("volumeProfile feature requires first activating studies feature.")},ye=function(e){var t;Te.X8b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#b82","c0c","0 ","t","o"," max","Vo","lume Un","derlay","#","FF000","0","a","u","t","o","#","F","F0000","au","to","f","i","el","d","N","e","gative Volume Index",t.Studies.calculateOnBalanceVolume=function(e,t){var i,a,r,n,s,o,l,h,c,u=Te;(i=t.inputs.Field)&&"field"!=i||(i="Close"),u.k8b(),a=2;for(var d=1;1150433567!==u.H5O(d.toString(),d.toString().length,417);d++)r=t.inputs[""],a+=2;1135526574!==u.N5O(a.toString(),a.toString().length,21828)&&(r=t.inputs[""]),n=!1,(r=t.inputs["Min Tick Value"])||0===r||(n=!0,r=0),s=t.chart.scrubbed,o=0;for(var p=t.startFrom;p<s.length;p++)l=s[p],p&&l[i]&&(s[p-1][i]&&(u.H0V(0),h=s[u.G0V(p,1)]),h&&(l[i]-h[i]>r?o=1:h[i]-l[i]>r?(u.F0V(21),o=-u.G0V(1,"1")):n&&(o=0),(c=h["Result "+t.name])||(c=0),c+=l.Volume*o,l["Result "+t.name]=c))},t.Studies.calculatePriceVolumeTrend=function(e,t){var i,a,r,n=Te;if("f","ield",(i=t.inputs.Field)&&"field"!=i||(i="Close"),a=t.chart.scrubbed,r=0,t.startFrom>1){n.H0V(100);var s=n.G0V(7,16,16,6);r=a[t.startFrom-s]["Result "+t.name]}for(var o=Math.max(1,t.startFrom);o<a.length;o++)if("Re","sult ",a[o][i]&&a[o-1][i]){n.H0V(176);var l=n.G0V(4759,16,17,8,19);r+=a[o].Volume*(a[o][i]-a[o-1][i])/a[o-l][i],a[o]["Result "+t.name]=r}},t.Studies.calculateVolumeIndex=function(e,i){var a,r,n,s,o,l,h,c=Te;if("M","A","Ind","e","x"," ","Mo","ving Averag","e Typ","e","Cl","os","e",(a=i.inputs.Field)&&"field"!=a||(a="Close"),c.k8b(),(r=i.chart.scrubbed).length<i.days+1)i.error=!0;else{n=100,i.startFrom>1&&(n=r[i.startFrom-1]["Index "+i.name]);for(var u=Math.max(1,i.startFrom);u<r.length;u++)"Ind","e","x"," ","ob","j","ec","t",s=r[u][a],o=r[u].Volume,s&&"object"==Me(s)&&(o=s.Volume,s=s[i.subField]),c.H0V(0),l=r[c.A0V(u,1)][a],h=r[u-1].Volume,l&&"object"==Me(l)&&(h=l.Volume,l=l[i.subField]),s&&l&&(("Pos Vol"==i.type&&o>h||"Neg Vol"==i.type&&o<h)&&(c.H0V(4),n*=c.G0V(s,l)),r[u]["Index "+i.name]=n);t.Studies.MA(i.inputs["Moving Average Type"],i.days,"Index "+i.name,0,"MA",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Neg Vol":{name:"Negative Volume Index",calculateFN:t.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"On Bal Vol":{name:"On Balance Volume",calculateFN:t.Studies.calculateOnBalanceVolume,inputs:{}},"Pos Vol":{name:"Positive Volume Index",calculateFN:t.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"Price Vol":{name:"Price Volume Trend",calculateFN:t.Studies.calculatePriceVolumeTrend,inputs:{Field:"field"}},"Trade Vol":{name:"Trade Volume Index",calculateFN:t.Studies.calculateOnBalanceVolume,inputs:{"Min Tick Value":.5}},"Vol ROC":{name:"Volume Rate of Change",calculateFN:function(e,i){t.Studies.calculateRateOfChange?t.Studies.calculateRateOfChange(e,i):(console.error("Volume Rate of Change study requires first activating momentum feature."),t.Studies.calculateRateOfChange=function(e,t){})},parameters:{init:{isVolume:!0}}},"vol undr":{name:"Volume Underlay",underlay:!0,range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,position:"none",zoom:0,heightFactor:.25},seriesFN:t.Studies.createVolumeChart,calculateFN:t.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"},customRemoval:!0,removeFN:function(e,t){e.layout.volumeUnderlay=!1,e.changeOccurred("layout")},attributes:{panelName:{hidden:!0}}}})):console.error("volumeStudies feature requires first activating studies feature.")},ve=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateVortex=function(e,i){var a,r,n,s,o,l,h,c,u=Te;if(a=i.chart.scrubbed,r=i.days,a.length<r+1)i.error=!0;else{n={tr:0,vmPlus:0,vmMinus:0},i.startFrom>1&&(n=t.clone(a[i.startFrom-1]["_totals "+i.name]));for(var d=Math.max(i.startFrom,1);d<a.length;d++)"_t","o","t","als ","_","VM","Plus ",s=a[d],u.F0V(0),o=a[u.G0V(d,1)],l=Math.abs(s.High-o.Low),h=Math.abs(s.Low-o.High),c=Math.max(s.High,o.Close)-Math.min(s.Low,o.Close),n.tr+=c,n.vmPlus+=l,n.vmMinus+=h,d>r&&("_VMMinu","s ","_","VMPl","us ","_True R","ang","e ",u.F0V(0),n.tr-=a[u.G0V(d,r)]["_True Range "+i.name],u.H0V(0),n.vmPlus-=a[u.G0V(d,r)]["_VMPlus "+i.name],u.F0V(0),n.vmMinus-=a[u.A0V(d,r)]["_VMMinus "+i.name]),s["_True Range "+i.name]=c,s["_VMPlus "+i.name]=l,s["_VMMinus "+i.name]=h,d>=r&&("-V","I ",s["+VI "+i.name]=n.vmPlus/n.tr,s["-VI "+i.name]=n.vmMinus/n.tr),s["_totals "+i.name]=t.clone(n)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Vortex:{name:"Vortex Indicator",calculateFN:t.Studies.calculateVortex,centerline:1,outputs:{"+VI":"#00FF00","-VI":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:1.1,studyOverBoughtColor:"auto",studyOverSoldValue:.9,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:1,step:"0.01"},studyOverSoldValue:{max:1,step:"0.01"}}}})):console.error("vortex feature requires first activating studies feature.")},xe=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("#8b","c17","6",t.Studies.calculateMFI=function(e,t){var i,a,r,n,s,o,l=Te;if("Scal","e F","a","ctor",i=t.chart.scrubbed,l.F0V(22),r=l.G0V(0,"0"),l.k8b(),(n=t.inputs["Scale Factor"])||(n=t.study.inputs["Scale Factor"]),s=Math.pow(10,Number(n)),t.startFrom>1){l.H0V(5);var h=l.G0V(6,12,17);r=i[t.startFrom-h]["_high "+t.name]}for(o=t.startFrom;o<i.length;o++)i[o]&&i[o].Volume&&("_","his","t",i[o][t.name+"_hist"]=a=s*(i[o].High-i[o].Low)/i[o].Volume,i[o]["_high "+t.name]=r=Math.max(r,a));t.outputMap={},t.outputMap[t.name+"_hist"]=""},t.Studies.displayMFI=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g;r=e.panels[i.panel],n=i.getContext(e),o=(s=i.getYAxis(e)).flipped?s.top:s.bottom,(l=e.layout.candleWidth-2)<2&&(l=1),h=t.Studies.determineColor(i.outputs.Green),c=t.Studies.determineColor(i.outputs.Fade),u=t.Studies.determineColor(i.outputs.Fake),d=t.Studies.determineColor(i.outputs.Squat),e.canvasColor("stx_histogram"),i.underlay||(n.globalAlpha=1),n.fillStyle="#CCCCCC",e.startClip(i.panel),Te.X8b(),!i.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3);for(var f=0;f<a.length;f++)"_","h","ist","_","h","i","st",p=a[f],Te.F0V(0),(g=a[Te.G0V(f,1)])||(g=e.getPreviousBar(e.chart,i.name+"_hist",f)),p&&(g&&(g[i.name+"_hist"]<p[i.name+"_hist"]?g.Volume<p.Volume?n.fillStyle=h:g.Volume>p.Volume&&(n.fillStyle=u):g[i.name+"_hist"]>p[i.name+"_hist"]&&(g.Volume<p.Volume?n.fillStyle=d:g.Volume>p.Volume&&(n.fillStyle=c))),p.candleWidth&&(l=Math.floor(Math.max(1,p.candleWidth-2))),n.fillRect(Math.floor(e.pixelFromBar(f,r.chart)-l/2),Math.floor(o),Math.floor(l),Math.floor(e.pixelFromPrice(p[i.name+"_hist"],r,s)-o)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"W MFI":{name:"Market Facilitation Index",seriesFN:t.Studies.displayMFI,calculateFN:t.Studies.calculateMFI,yAxis:{ground:!0},range:"0 to max",inputs:{"Scale Factor":6},outputs:{Green:"#8bc176",Fade:"#ab611f",Fake:"#5f7cb8",Squat:"#ffd0cf"}}})):console.error("williamsMFI feature requires first activating studies feature.")},be={CIQ:Se.c,SplinePlotter:Se.d,timezoneJS:Se.B,$$:Se.a,$$$:Se.b},Te.k8b(),"undefined"!=typeof __TREE_SHAKE__&&__TREE_SHAKE__||(be.CIQ||Se.c).activateImports(n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,R,Y,z,B,U,j,W,Q,q,G,X,Z,K,J,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,ge,fe,me,ye,ve,xe,null);var _e=null;Ce.c.deprecationWarning=function(e){_e||(_e={},setInterval((function(){for(var e in _e)console.warn(e+" ("+_e[e]+" occurrences)"),delete _e[e]}),1e4)),_e[e]?_e[e]++:_e[e]=1};var Pe=Ce.c.deprecationWarning;Function.prototype.ciqInheritsFrom||(Function.prototype.ciqInheritsFrom=function(e,t){Pe("Function.prototype.ciqInheritsFrom() has been deprecated.  Use CIQ.inheritsFrom(me, ctor, autosuper) instead."),Ce.c.inheritsFrom(this,e,t)},Function.prototype.stxInheritsFrom=Function.prototype.ciqInheritsFrom),String.prototype.capitalize=function(){return Pe("String.prototype.capitalize() has been deprecated.  Use CIQ.capitalize(string) instead."),Ce.c.capitalize(this)},CanvasRenderingContext2D.prototype.dashedLineTo=function(e,t,i,a,r){if(Pe("CanvasRenderingContext2D.prototype.dashedLineTo() has been deprecated.  Use native CanvasRenderingContext2D methods such as moveTo(), lineTo() and setLineDash() instead."),!(r instanceof Array))return r&&console.log('WARNING: Unsupported drawing pattern "'+r+'"; defaulting to "solid"'),void this.stxLine(e,t,i,a,this.strokeStyle,this.globalAlpha,this.lineWidth);if(t!==1/0&&e!==1/0&&a!==1/0&&i!==1/0){var n=function(e,t){return e-t<=1e-8},s=function(e,t){return e-t>=-1e-8},o=function(e,t){return Math.min(e,t)},l=function(e,t){return Math.max(e,t)},h={thereYet:s,cap:o},c={thereYet:s,cap:o};if(t-a>0&&(c.thereYet=n,c.cap=l),e-i>0&&(h.thereYet=n,h.cap=l),this.moveTo(e,t),!isNaN(e)&&!isNaN(t))for(var u=e,d=t,p=0,g=!0;!h.thereYet(u,i)||!c.thereYet(d,a);){var f=Math.atan2(a-t,i-e),m=r[p];u=h.cap(i,u+Math.cos(f)*m),d=c.cap(a,d+Math.sin(f)*m),g?this.lineTo(u,d):this.moveTo(u,d),p=(p+1)%r.length,g=!g}}},CanvasRenderingContext2D.prototype.stxLine=function(e,t,i,a,r,n,s,o){Pe("CanvasRenderingContext2D.prototype.stxLine() has been deprecated.  Use native CanvasRenderingContext2D methods such as moveTo() and lineTo() instead."),this.beginPath(),this.lineWidth=s,this.strokeStyle=r,this.globalAlpha=n,o&&o.length?this.dashedLineTo(e,t,i,a,o):(this.moveTo(e,t),this.lineTo(i,a)),this.stroke(),this.closePath(),this.lineWidth=1},CanvasRenderingContext2D.prototype.stxCircle=function(e,t,i,a){Pe("CanvasRenderingContext2D.prototype.stxCircle() has been deprecated.  Use native CanvasRenderingContext2D methods such as arc() instead."),this.beginPath(),this.arc(e,t,i,0,2*Math.PI,!1),a&&this.fill(),this.stroke(),this.closePath()},Ce.c.getAjaxServer=function(e){return Pe("CIQ.getAjaxServer() has been deprecated.  Use `new XMLHttpRequest` instead."),new XMLHttpRequest},Ce.c.convertClickToTouchEnd=function(e){Pe("CIQ.convertClickToTouchEnd() has been deprecated.  Use CIQ.safeClickTouch() instead.");var t=document.getElementById(e),i=t.getAttribute("onClick");i&&(t.removeAttribute("onClick"),t.setAttribute("onTouchEnd",i))},Ce.c.standardUTCDate=function(e){Pe("CIQ.standardUTCDate(dt) has been deprecated.  Use dt.toISOString() instead.");var t=e.getUTCMonth()+1;t<10&&(t="0"+t);var i=e.getUTCDate();i<10&&(i="0"+i);var a=e.getUTCHours();a<10&&(a="0"+a);var r=e.getUTCMinutes();r<10&&(r="0"+r);var n=e.getUTCSeconds();return n<10&&(n="0"+n),e.getUTCFullYear()+"-"+t+"-"+i+"T"+a+":"+r+":"+n+"Z"},Ce.c.isDST=function(e){Pe("CIQ.isDST() has been deprecated.  Use dt.toISOString() instead."),e||(e=new Date);var t=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1),a=Math.max(t.getTimezoneOffset(),i.getTimezoneOffset());return e.getTimezoneOffset()!=a},Ce.c.getEventDOM=function(e){return Pe("CIQ.getEventDOM() has been deprecated.  Use `e.target` instead."),e?e.target:window.event.srcElement},Ce.c.outerWidth=function(e){Pe("CIQ.outerWidth() has been deprecated.  Use `CIQ.elementDimensions(node, {margin:1, padding:1, border:1}).width` instead.");var t=e.offsetWidth;return t+=Ce.c.stripPX(getComputedStyle(e).marginLeft),t+=Ce.c.stripPX(getComputedStyle(e).marginRight)},Ce.c.clearNode=function(e){if(Pe("CIQ.clearNode() has been deprecated.  Use `node.innerHTML=''` instead."),e.hasChildNodes())for(;e.childNodes.length>=1;)e.removeChild(e.firstChild)},Ce.c.findClosestParent=function(e,t){var i,a;if(Pe("CIQ.findClosestParent() has been deprecated.  Use `Element.parentElement.prototype.closest()` instead."),["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some((function(e){return"function"==typeof document.body[e]&&(i=e,!0)})),!i)return!1;for(;e;){if((a=e.parentElement)&&a[i](t))return a;e=a}return null},Ce.c.appendClassName=function(e,t){if(Pe("CIQ.appendClassName() has been deprecated.  Use `node.classList.add(className)` instead."),e&&e.className!=t){for(var i=e.className.split(" "),a=0;a<i.length;a++)if(i[a]==t)return;e.className?e.className+=" "+t:e.className=t}},Ce.c.unappendClassName=function(e,t){if(Pe("CIQ.unappendClassName() has been deprecated.  Use `node.classList.remove(className)` instead."),e&&-1!=e.className.indexOf(t))if(e.className==t)e.className="";else{for(var i=e.className.split(" "),a="",r=0;r<i.length;r++)i[r]!=t&&(""!==a&&(a+=" "),a+=i[r]);e.className=a}},Ce.c.swapClassName=function(e,t,i){Pe("CIQ.swapClassName() has been deprecated.  Use `node.classList.replace(oldClassName, newClassName)` instead."),Ce.c.unappendClassName(e,i),Ce.c.appendClassName(e,t)},Ce.c.hasClassName=function(e,t){return Pe("CIQ.hasClassName() has been deprecated.  Use `node.classList.contains(className)` instead."),!!e&&(" "+e.className+" ").indexOf(" "+t+" ")>-1},Ce.c.toggleClassName=function(e,t){Pe("CIQ.toggleClassName() has been deprecated.  Use `node.classList.toggle(className)` instead."),Ce.c.hasClassName(e,t)?Ce.c.unappendClassName(e,t):Ce.c.appendClassName(e,t)},function(){var e,t,i=document.attachEvent,a=navigator.userAgent.match(/Trident/),r=(e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return setTimeout(e,20)},function(t){return e(t)}),n=(t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(e){return t(e)});function s(e){var t=e.target||e.srcElement;t.__resizeRAF__&&n(t.__resizeRAF__),t.__resizeRAF__=r((function(){var i=t.__resizeTrigger__;i.__resizeListeners__.forEach((function(t){t.call(i,e)}))}))}function o(e){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",s)}Ce.c.addResizeListener=function(e,t){Pe("CIQ.addResizeListener() has been deprecated.  Use CIQ.UI.addResizeListener() instead.");var r=document.querySelector("cq-ui-manager");if(r.length>0&&(r=r[0]).registerForResize(e),!e.__resizeListeners__)if(e.__resizeListeners__=[],i)e.__resizeTrigger__=e,e.attachEvent("onresize",s);else{var n=e.__resizeTrigger__=document.createElement("object");n.setAttribute("style","visibility:hidden; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1; border:0px;"),n.__resizeElement__=e,n.onload=o,n.type="text/html",a&&e.appendChild(n),n.data="about:blank",a||e.appendChild(n)}e.__resizeListeners__.push(t)},Ce.c.removeResizeListener=function(e,t){Pe("CIQ.removeResizeListener() has been deprecated.  Use CIQ.UI.removeResizeListener() instead.");var a=document.querySelector("cq-ui-manager");a.length>0&&(a=a[0]).unregisterForResize(e),e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(i?e.detachEvent("onresize",s):(e.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",s),e.__resizeTrigger__=!e.removeChild(e.__resizeTrigger__)))}}(),Ce.c.Renderer.prototype.performCalculations=function(){Pe("CIQ.Renderer.prototype.performCalculations has been deprecated.  Use CIQ.Renderer.prototype.adjustYAxis instead.")},Ce.c.ChartEngine.hideDates=function(){return Pe("CIQ.Renderer.hideDates is no longer supported.  To hide an axis, set its noDraw property.  To hide the floating date label, set stxx.controls.floatDate=null."),!1},Ce.c.ChartEngine.chartShowsHighs=function(e){return Pe("CIQ.ChartEngine.prototype.chartShowsHighs has been deprecated.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),1!={line:1,colored_line:1,mountain:1,colored_mountain:1,baseline_delta:1,baseline_delta_mountain:1,histogram:1,scatterplot:1,step:1,colored_step:1}[e]},Ce.c.ChartEngine.prototype.createBlock=function(e,t,i,a,r,n){Pe("CIQ.ChartEngine.prototype.createBlock has been deprecated.  Use native canvas context operation fillRect instead."),n||(n=this.chart.context),void 0!==a&&(this.canvasColor(r,n),n.fillRect(e,i,t,a),n.globalAlpha=1)},Ce.c.ChartEngine.prototype.setVolumeUnderlay=function(e){Pe("CIQ.ChartEngine.prototype.setVolumeUnderlay is no longer supported.  To enable a volume underlay, use CIQ.Studies.addStudy(stxx, 'vol undr').  To disable, use CIQ.Studies.removeStudy."),this.layout.volumeUnderlay=e,this.chart.canvas&&this.draw(),this.changeOccurred("layout")},Ce.c.ChartEngine.prototype.serializeDrawings=function(){return Pe("CIQ.ChartEngine.prototype.serializeDrawings has been deprecated.  Use CIQ.ChartEngine.prototype.exportDrawings instead."),this.exportDrawings()},Ce.c.ChartEngine.prototype.reconstructDrawings=function(e){Pe("CIQ.ChartEngine.prototype.reconstructDrawings has been deprecated.  Use CIQ.ChartEngine.prototype.importDrawings instead."),this.importDrawings(e)},Ce.c.ChartEngine.prototype.computePosition=function(e,t){return Pe("CIQ.ChartEngine.prototype.computePosition has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromBar instead."),void 0===t&&(t=0),e*this.layout.candleWidth+t+this.micropixels},Ce.c.ChartEngine.prototype.computeColor=function(e,t){return Pe("CIQ.ChartEngine.prototype.computeColor has been deprecated.  There is no suggested alternative."),e<t?"stx_candle_up":e>t?"stx_candle_down":"stx_candle_shadow"},Ce.c.ChartEngine.prototype.computeLength=function(e,t){Pe("CIQ.ChartEngine.prototype.computeLength has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromPrice to compute values and find the difference.");var i=this.pixelFromPrice(e);return this.pixelFromPrice(t)-i},Ce.c.ChartEngine.prototype.setCrosshairColors=function(){Pe("CIQ.ChartEngine.prototype.setCrosshairColors is no longer supported.  Use CSS to set the crosshair color")},Ce.c.ChartEngine.prototype.valueFromPixelUntransform=function(e,t,i){return Pe("CIQ.ChartEngine.prototype.valueFromPixelUntransform has been deprecated.  Use CIQ.ChartEngine.prototype.valueFromPixel instead."),this.valueFromPixel(e,t,i)},Ce.c.ChartEngine.prototype.pixelFromPriceTransform=function(e,t,i){return Pe("CIQ.ChartEngine.prototype.pixelFromPriceTransform has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromPrice instead."),this.pixelFromPrice(e,t,i)},Ce.c.ChartEngine.prototype.isDailyInterval=function(e){return Pe("CIQ.ChartEngine.prototype.isDailyInterval has been deprecated. Use CIQ.ChartEngine.isDailyInterval instead."),Ce.c.ChartEngine.isDailyInterval(e)},Ce.c.ChartEngine.prototype.newChart=function(e,t,i,a,r){Pe("CIQ.ChartEngine.prototype.newChart has been deprecated. Use CIQ.ChartEngine.prototype.loadChart instead.");var n={masterData:t,chart:i};return Ce.c.extend(n,r,!0),this.loadChart(e,n,a)},Ce.c.ChartEngine.prototype.streamTrade=function(e,t,i,a){Pe("CIQ.ChartEngine.prototype.streamTrade has been deprecated. Use CIQ.ChartEngine.prototype.updateChartData instead.");var r=this.chart;a||(a={}),a.chart&&(r=a.chart),a.fillGaps=this.streamParameters.fillGaps;var n="object"==Fe(e),s=n?e.last:arguments[0],o=n?e.volume:arguments[1],l=n?e.bid:null,h=n?e.ask:null;n||(t=arguments[2],i=arguments[3]),i&&(a.secondarySeries=i);var c={DT:t,Last:s,Volume:o,Bid:l,Ask:h};this.updateChartData(c,r,a)},Ce.c.ChartEngine.prototype.appendMasterData=function(e,t,i){Pe("CIQ.ChartEngine.prototype.appendMasterData has been deprecated. Use CIQ.ChartEngine.prototype.updateChartData instead."),this.updateChartData(e,t,i)},Ce.c.ChartEngine.prototype.setPeriodicityV2=function(e,t,i,a){Pe("CIQ.ChartEngine.prototype.setPeriodicityV2 has been deprecated. Use CIQ.ChartEngine.prototype.setPeriodicity instead."),"function"==typeof i&&(a=i,i=null),this.runPrepend("setPeriodicityV2",arguments)||(this.setPeriodicity(e,t,i,a),this.runAppend("setPeriodicityV2",arguments))},Ce.c.ChartEngine.prototype.addChart=function(e,t){Pe("CIQ.ChartEngine.prototype.addChart has been deprecated. Add manually to stxx.charts object instead."),t.name=e,this.charts[e]=t};var Ve=Ce.c.ChartEngine.prototype.changeOccurred;Ce.c.ChartEngine.prototype.changeOccurred=function(e){this.currentlyImporting||(this.changeCallback&&this.changeCallback(this,e),Ve.call(this,e))};var Oe=Ce.c.ChartEngine.prototype.construct;if(Ce.c.ChartEngine.prototype.construct=function(){function e(e,t,i){return e._deprecatedPropertyValues||(e._deprecatedPropertyValues={}),t in e._deprecatedPropertyValues||(e._deprecatedPropertyValues[t]=i),e._deprecatedPropertyValues[t]}function t(e,t,i){e._deprecatedPropertyValues||(e._deprecatedPropertyValues={}),e._deprecatedPropertyValues[t]=i}function i(t,i,a){return function(){return Pe("CIQ.ChartEngine.prototype.callbacks have been deprecated.  Iterate through CIQ.ChartEngine.prototype.callbackListeners instead."),e(this,t,a||null)}}function a(e,t){return function(i){Pe("CIQ.ChartEngine.prototype.callbacks have been deprecated.  Utilize CIQ.ChartEngine.prototype.addEventListener to add a callback, and/or CIQ.ChartEngine.prototype.removeEventListener to remove one."),this._deprecatedPropertyValues||(this._deprecatedPropertyValues={});var a=this._deprecatedPropertyValues[e];a&&t.removeEventListener(e,a),i&&t.addEventListener(e,i),this._deprecatedPropertyValues[e]=i}}var r;Oe.call(this),Object.defineProperties(this,{changeCallback:{enumerable:!0,get:function(){return e(this,"changeCallback",null)},set:function(e){Pe("CIQ.ChartEngine.prototype.changeCallback has been deprecated.  Use CIQ.ChartEngine.prototype.addEventListener instead."),t(this,"changeCallback",e)}},highLowBars:{enumerable:!0,get:function(){return Pe("CIQ.ChartEngine.prototype.highLowBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),e(this,"highLowBars",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,wave:!0,rangechannel:!0,none:!0})},set:function(e){Pe("CIQ.ChartEngine.prototype.highLowBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),t(this,"highLowBars",e)}},standaloneBars:{enumerable:!0,get:function(){return Pe("CIQ.ChartEngine.prototype.standaloneBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.standaloneBars instead."),e(this,"standaloneBars",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,histogram:!0,scatterplot:!0})},set:function(e){Pe("CIQ.ChartEngine.prototype.standaloneBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.standaloneBars instead."),t(this,"standaloneBars",e)}},barsHaveWidth:{enumerable:!0,get:function(){return Pe("CIQ.ChartEngine.prototype.barsHaveWidth is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.barsHaveWidth instead."),e(this,"barsHaveWidth",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,histogram:!0,scatterplot:!0,wave:!0})},set:function(e){Pe("CIQ.ChartEngine.prototype.barsHaveWidth is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.barsHaveWidth instead."),t(this,"barsHaveWidth",e)}}}),this.callbacks={},Object.defineProperties(this.callbacks,{studyOverlayEdit:{enumerable:!0,get:i("studyOverlayEdit"),set:a("studyOverlayEdit",this)},studyPanelEdit:{enumerable:!0,get:i("studyPanelEdit"),set:a("studyPanelEdit",this)},tap:{enumerable:!0,get:i("tap"),set:a("tap",this)},rightClick:{enumerable:!0,get:i("rightClick"),set:a("rightClick",this)},longhold:{enumerable:!0,get:i("longHold"),set:a("longHold",this)},move:{enumerable:!0,get:i("move"),set:a("move",this)},layout:{enumerable:!0,get:i("layout"),set:a("layout",this)},drawing:{enumerable:!0,get:i("drawing"),set:a("drawing",this)},drawingEdit:{enumerable:!0,get:i("drawingEdit"),set:a("drawingEdit",this)},preferences:{enumerable:!0,get:i("preferences"),set:a("preferences",this)},theme:{enumerable:!0,get:i("theme"),set:a("theme",this)},symbolChange:{enumerable:!0,get:i("symbolChange"),set:a("symbolChange",this)},symbolImport:{enumerable:!0,get:i("symbolImport"),set:a("symbolImport",this)},calculateTradingDecimalPlaces:{enumerable:!0,get:(r=this,function(){return Pe("CIQ.ChartEngine.prototype.callbacks.calculateTradingDecimalPlaces has been deprecated.  Utilize CIQ.ChartEngine.Chart.prototype.calculateTradingDecimalPlaces instead."),e(this,"calculateTradingDecimalPlaces",r.chart.calculateTradingDecimalPlaces)}),set:function(e){return function(i){Pe("CIQ.ChartEngine.prototype.callbacks.calculateTradingDecimalPlaces has been deprecated.  Utilize CIQ.ChartEngine.Chart.prototype.calculateTradingDecimalPlaces instead."),t(this,"calculateTradingDecimalPlaces",i),e.chart.calculateTradingDecimalPlaces=i}}(this)}}),Object.defineProperty(this.streamParameters,"fillGaps",{enumerable:!0,get:function(){return Pe("CIQ.ChartEngine.prototype.streamParameters.fillGaps has been deprecated.  Use CIQ.ChartEngine.prototype.updateChartData instead, with params.fillGaps=true or rely on cleanupGaps as default behavior."),e(this,"fillGaps",!0)},set:function(e){Pe("CIQ.ChartEngine.prototype.streamParameters.fillGaps has been deprecated.  Use CIQ.ChartEngine.prototype.updateChartData instead, with params.fillGaps=true or rely on cleanupGaps as default behavior."),t(this,"fillGaps",e)}})},"undefined"!=typeof window&&Object.defineProperties(window,{STX:{enumerable:!0,get:function(){return Pe("STX namespace has been deprecated.  Use CIQ namespace instead."),Ce.c}},STXChart:{enumerable:!0,get:function(){return Pe("STXChart namespace has been deprecated.  Use CIQ.ChartEngine namespace instead."),Ce.c.ChartEngine}}}),Ce.c.ChartEngine.prototype.attachEngineQuoteFeed=function(e,t){Pe("CIQ.ChartEngine.prototype.attachEngineQuoteFeed has been deprecated. Use CIQ.ChartEngine.prototype.attachQuoteFeed instead."),this.attachQuoteFeed(e,t)},Ce.c.ChartEngine.prototype.dragPlot=function(e){Pe("CIQ.ChartEngine.prototype.dragPlot is no longer supported.  Use CIQ.ChartEngine.prototype.dragPlotOrAxis instead.")},Ce.c.ChartEngine.prototype.dragYAxis=function(e){Pe("CIQ.ChartEngine.prototype.dragYAxis is no longer supported.  Use CIQ.ChartEngine.prototype.dragPlotOrAxis instead.")},Ce.c.Drawing=Ce.c.Drawing||function(){this.chartsOnly=!1,this.penDown=!1},Ce.c.Drawing.prototype.setLineColor=function(){if(Pe("CIQ.Drawing.prototype.setLineColor has been deprecated.  Use CIQ.Drawing.prototype.setLineColor instead."),Ce.c.Drawing.prototype.getLineColor)return Ce.c.Drawing.prototype.getLineColor.apply(this,arguments)},Ce.c.Studies=Ce.c.Studies||function(){},Ce.c.Studies.quickAddStudy=function(){if(Pe("CIQ.Studies.quickAddStudy has been deprecated.  Use CIQ.Studies.addStudy instead."),Ce.c.Studies.addStudy)return Ce.c.Studies.addStudy.apply(null,arguments)},Ce.c.Studies.overZones=function(){if(Pe("CIQ.Studies.overZones has been deprecated.  Use CIQ.Studies.drawZones instead."),Ce.c.Studies.drawZones)return Ce.c.Studies.drawZones.apply(null,arguments)},Ce.c.Studies.volUnderlay=function(){Pe("CIQ.Studies.volUnderlay has been deprecated.  Use CIQ.Studies.createVolumeChart instead."),Ce.c.Studies.createVolumeChart&&Ce.c.Studies.createVolumeChart.apply(null,arguments)},Ce.c.Studies.determineMinMax=function(e,t,i){Pe("CIQ.Studies.determineMinMax is no longer supported.  The calculation is done automatically elsewhere.")},Ce.c.Studies.createYAxis=function(e,t,i,a){Pe("CIQ.Studies.createYAxis is no longer supported.  The action is done automatically elsewhere.")},Ce.c.Studies.volumeChart=function(e,t,i,a){Pe("CIQ.Studies.volumeChart has been deprecated.  Use CIQ.ChartEngine.prototype.drawHistogram instead.");var r,n,s=-1*Number.MAX_VALUE;for(r in i)for(var o=0;o<i[r].length;o++)(n=i[r][o])&&n>s&&(s=n);var l=e.panels[t.panel],h=Math.floor(l.yAxis.bottom)+.5,c=h-(Math.floor(l.yAxis.top)+.5),u=e.layout.candleWidth,d=null;t.parameters&&t.parameters.displayBorder||(a=null);var p=0;a||(p=(u-e.chart.tmpWidth)/2);var g=t.getContext(e);for(r in g.lineWidth=1,e.startClip(t.panel),i){a&&(d=a[r]),g.fillStyle=r,d&&(g.strokeStyle=d),g.beginPath();for(var f,m=h+.5,y=Math.floor(e.pixelFromBar(0,l.chart)),v=0;v<i[r].length;v++)if(e.chart.dataSegment[v]&&e.chart.dataSegment[v].candleWidth?(u=e.chart.dataSegment[v].candleWidth,a||(p=u/4)):(u=e.layout.candleWidth,a||(p=(u-e.chart.tmpWidth)/2)),0===v&&(f=y-=u/2),n=i[r][v]){var x,b,C=n*(c/s),S=Math.min(Math.floor(h-c+(c-C))+.5,h);x=Math.floor(f+p),b=Math.floor(f+u-p),x=Math.max(x,y),g.moveTo(x,h),g.lineTo(b,h),g.lineTo(b,S),g.lineTo(x,S),a?(m>S||0===v)&&g.lineTo(x,m):g.lineTo(x,h),m=S,f+=u}else m=h,f+=u;g.fill(),g.strokeStyle=d,a&&e.layout.candleWidth>=2&&g.stroke(),g.closePath()}e.endClip()},"undefined"!=typeof window&&Object.defineProperty(window,"STXSocial",{enumerable:!0,get:function(){return Pe("STXSocial namespace has been deprecated.  Use CIQ.Share namespace instead."),Ce.c.Share}}),"function"==typeof $&&$.fn){$.fn.extend($.expr[":"],{trulyvisible:function(e,t,i){Pe("Use of jQuery has been deprecated. Use CIQ.trulyVisible() to return element visibility instead of custom pseudo-selector :trulyvisible.");var a=$(e).parents();a=a.add(e);for(var r=0;r<a.length;r++){var n=$(a[r]);if("0"===n.css("opacity"))return!1;if("hidden"===n.css("visibility"))return!1;if("0px"===n.css("height")&&"hidden"==n.css("overflow-y"))return!1;if(!n.is(":visible"))return!1}return!0}});$.fn.extend({stxtap:function(e,t){return Pe("Use of jQuery has been deprecated. Use CIQ.UI.stxtap() to attach a listener instead of $.fn.stxtap()."),this.each((function(){Ce.c.installTapEvent(this),"string"==typeof e?$(this).on("stxtap",e,(function(e){t.call(this,e)})):$(this).on("stxtap",(function(t){e.call(this,t)}))}))},parentsAndMe:function(e){Pe("Use of jQuery has been deprecated. Use CIQ.climbUpDomTree() instead of $.fn.parentsAndMe().");var t=$(this).parents();return t=t.add($(this)).get().reverse()},cqvirtual:function(e){Pe("Use of jQuery has been deprecated. Use CIQ.cqvirtual() instead of $.fn.cqvirtual().");var t=this.clone(!0);return t.empty(),t.original=this,t},cqrender:function(e){if(Pe("Use of jQuery has been deprecated. Use CIQ.cqrender() instead of $.fn.cqrender()."),this[0].innerHTML==this.original[0].innerHTML)return this.original;this.original.children(":not(template)").remove();var t=this.children();if(t.length){var i=t.detach();this.original.append(i)}return this.original},guaranteedWidth:function(){Pe("Use of jQuery has been deprecated. Use CIQ.guaranteedSize() instead of $.fn.guaranteedWidth().");for(var e=this,t=e.width();!t;){if("BODY"===(e=e.parent())[0].tagName||e[0]===window)return window.innerWidth;t=e.width()}return t},guaranteedHeight:function(){Pe("Use of jQuery has been deprecated. Use CIQ.guaranteedSize() instead of $.fn.guaranteedHeight().");for(var e=this,t=e.height();!t;){if("BODY"===(e=e.parent())[0].tagName||e[0]===window)return window.innerHeight;t=e.height()}return t},emptyExceptTemplate:function(){return Pe("Use of jQuery has been deprecated. Use CIQ.removeChildIfNot(node, 'template') instead of $.fn.emptyExceptTemplate()."),this.children().not("template").remove(),this},truthyAttr:function(e){Pe("Use of jQuery has been deprecated. Use ['false','0',null,undefined].indexOf(this.getAttribute('...'))==-1 instead of $.fn.truthyAttr().");var t=this.attr(e);return void 0!==t&&("false"!=t.toLowerCase()&&"0"!=t)},attrBetter:function(e,t){return Pe("Use of jQuery has been deprecated. check attribute value before setting instead of $.fn.attrBetter()."),this.attr(e,(function(e,i){if(void 0===t&&(t="true"),t!==i)return t}))},removeAttrBetter:function(e){Pe("Use of jQuery has been deprecated. check hasAttribute before removing instead of $.fn.removeAttrBetter().");var t=this.attr(e);return!(!t&&""!==t)&&(this.removeAttr(e),!0)},textBetter:function(e){return Pe("Use of jQuery has been deprecated. check innerText before setting instead of $.fn.textBetter()."),this.text()!==e&&(this.text(e),!0)}}),$.queryString=function(e){Pe("Use of jQuery has been deprecated. Use CIQ.qs() to return an object containing querystring tokens instead of $.querystring().");for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var a=t[i].split("=");if(a[0]==e)return a[1]}return null}}function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return He(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return He(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}Ce.c.UI||(Ce.c.UI={}),Ce.c.UI.allContexts=function(){return Pe("CIQ.UI.allContexts has been deprecated. Use document.querySelectorAll('cq-context,*[cq-context]') instead."),$("cq-context,*[cq-context]")},Ce.c.UI.observe=function(e){if(Pe("CIQ.UI.observe has been deprecated.  Use CIQ.UI.observeProperty instead."),Object.observe){if("function"==typeof $&&$.fn){var t=this,i=function(e){e.forEach(a)};return Object.observe(e.obj,i,["update","add","delete"]),a({name:e.member}),i}Pe("You must include jQuery in your project to use CIQ.UI.observe.")}else Pe("You must include thirdparty/object-observe.js in your project to use CIQ.UI.observe.");function a(i){var a=!1;if(e.member){if(i.name===e.member)a=!0;else if(e.member.constructor==Array)for(var r=0;r<e.member.length;r++)i.name===e.member[r]&&(a=!0)}else a=!0;if(a){var n=$(e.selector);if(!n.length&&"callback"===e.action)return void e.value.call(t,e);"class"===e.action&&n.removeClass(e.value),n.each((function(){var i=!1;e.member&&(e.condition?e.obj[e.member]===e.condition&&(i=!0):i=e.obj[e.member]),"class"===e.action&&i&&n.addClass(e.value),"callback"===e.action&&e.value.call(t,e,this),"value"===e.action&&(e.value?this.value=e.value:e.obj[e.member]?this.value=e.obj[e.member]:this.value="")}))}}},Ce.c.UI.unobserve=function(e){Pe("CIQ.UI.unobserve has been deprecated.  Use CIQ.UI.unobserveProperty instead."),Object.unobserve&&Object.unobserve(e.obj,e.handler)},Ce.c.UI.trulyVisible=function(e){return Pe("CIQ.UI.trulyVisible has been deprecated.  Use CIQ.trulyVisible instead."),Ce.c.trulyVisible(e)},Ce.c.UI.Lookup=function(){},Ce.c.UI.Lookup.Driver=function(){this.deprecated=!0},Ce.c.UI.Lookup.Driver.prototype.acceptText=function(e,t,i,a){this.cb},Ce.c.UI.Lookup.Driver.ChartIQ=function(e){Pe("CIQ.UI.Lookup.Driver.ChartIQ has been deprecated.  Use CIQ.ChartEngine.Driver.Lookup.ChartIQ instead."),this.exchanges=e,this.exchanges||(this.exchanges=["XNYS","XASE","XNAS","XASX","INDCBSX","INDXASE","INDXNAS","IND_DJI","ARCX","INDARCX","forex"]),this.url="https://symbols.chartiq.com/chiq.symbolserver.SymbolLookup.service",this.requestCounter=0},Ce.c.inheritsFrom(Ce.c.UI.Lookup.Driver.ChartIQ,Ce.c.UI.Lookup.Driver),Ce.c.UI.Lookup.Driver.ChartIQ.prototype.acceptText=function(e,t,i,a){"FX"==t&&(t="FOREX"),isNaN(parseInt(i,10))&&(i=100);var r=this.url+"?t="+encodeURIComponent(e)+"&m="+i+"&x=[";this.exchanges&&(r+=this.exchanges.join(",")),r+="]",t&&"ALL"!=t.toUpperCase()&&(r+="&e="+t);var n=++this.requestCounter,s=this;Ce.c.postAjax({url:r,cb:function(e,t){if(!(n<s.requestCounter)&&200==e)try{for(var i=(t=JSON.parse(t)).payload.symbols,r=[],o=0;o<i.length;o++){var l=i[o].split("|"),h={symbol:l[0],name:l[1],exchDisp:l[2]};r.push({display:[h.symbol,h.name,h.exchDisp],data:h})}a(r)}catch(e){}}})},Ce.c.UI.BaseComponent&&(Ce.c.UI.BaseComponent.bind=function(e,t){Pe("CIQ.UI.BaseComponent.bind has been deprecated. Use CIQ.UI.BaseComponent.bindNode() instead."),Ce.c.UI.BaseComponent.bindNode(e,t)});var Ee=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Animation=t.Animation||function(e){if(!e)throw new Error("Invalid constructor arguments.");var i,a,r;if(e instanceof t.ChartEngine?(i=arguments[0],a=arguments[1],r=arguments[2]):(i=e.stx,a=e.animationParameters,r=e.easeMachine),!i)return console.warn("No CIQ.ChartEngine provided. Cannot properly create CIQ.Animation instance");var n={stayPut:!1,ticksFromEdgeOfScreen:5,granularity:1e6};a=t.extend(n,a),n.tension&&(i.chart.tension=a.tension),i.tickAnimator=r||new t.EaseMachine(Math.easeOutCubic,1e3);var s=new t.EaseMachine(Math.easeInOutCubic,1e3),o=["#0298d3","#19bcfc","#5dcffc","#9ee3ff"],l=0,h=20,c=0,u=!1,d=null;function p(){u=!1,d=null}i.addEventListener(["symbolChange","layout"],(function(e){p()})),i.prepend("updateCurrentMarketData",(function(e,t,i,a){t||(t=this.chart),a&&a.fromTrade&&(t.closePendingAnimation||0===t.closePendingAnimation)&&(a.finalClose=t.closePendingAnimation)})),i.prepend("updateChartData",(function(e,i,r){var n=this;if(i||(i=n.chart),i&&i.defaultChartStyleConfig&&"none"!=i.defaultChartStyleConfig&&(void 0===r||!r.animationEntry&&!r.secondarySeries)&&i.dataSegment){var s=n.tickAnimator,o=this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation;if(o){if(!s)return void console.warn("Animation plug-in can not run because the tickAnimator has not been declared. See instructions in animation.js");if(this.prevSymbol!=i.symbol&&(this.prevQuote=0,i.closePendingAnimation=null,this.prevSymbol=i.symbol),M(),s.stop(),e.length>2)return}var l=t.clone(r);l||(l={}),l.animationEntry=!0,l.bypassGovernor=!0,l.noCreateDataSet=!1,l.appending=!0,l.firstLoop=!0;var h=this.chart.symbol,c=this.layout.periodicity,p=this.layout.interval,g=this.layout.timeUnit;if(o){var f=e[e.length-1];this.prevQuote=this.currentQuote();var m=!1,y=!1;if(1==c&&2==e.length){this.prevQuote=e[0];var v=i.dataSet.length;D(this.prevQuote),v==i.dataSet.length&&(y=!0)}if(!(f&&f.Close&&this.prevQuote&&this.prevQuote.Close))return!1;if(this.extendedHours&&i.market.market_def){var x=f.DT;if(t.ChartEngine.isDailyInterval(p))u=!i.market.isMarketDate(x);else if(!d||d<=x){var b=i.market.getSession(x);u=!(""===b||this.layout.marketSessions&&this.layout.marketSessions[b]),d=i.market[u?"getNextOpen":"getNextClose"](x)}if(u)return this.draw(),!1}var C=c;"second"==p||"second"==g?C*=1e3:"minute"!=p&&"minute"!=g||(C*=6e4),isNaN(p)||(C*=p),m="day"==p||"day"==g?f.DT.getDate()!=this.prevQuote.DT.getDate():"week"==p||"week"==g?f.DT.getDate()>=this.prevQuote.DT.getDate()+7:"month"==p||"month"==g?f.DT.getMonth()!=this.prevQuote.DT.getMonth():f.DT.getTime()>=this.prevQuote.DT.getTime()+C;var S=!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars,w=0;if(m){if(!this.animations.zoom.hasCompleted)return!1;var k=this.layout.candleWidth;if(i.scroll<=i.maxTicks)for(;this.micropixels>0;)i.scroll++,this.micropixels-=k;i.scroll<=i.maxTicks?(this.previousMicroPixels=this.micropixels,this.nextMicroPixels=this.micropixels+k,w=-1*k,i.dataSegment.length<i.maxTicks-a.ticksFromEdgeOfScreen&&!a.stayPut&&(this.nextMicroPixels=this.micropixels,i.scroll++),i.animatingHorizontalScroll=S,i.previousDataSetLength=i.dataSet.length):y||i.scroll++}i.closePendingAnimation=f.Close;var A=m&&!S?f.Open:this.prevQuote.Close;return s.run(function(e,r,o){return function(u){var d=u.Close;if(!i.dataSet.length||h!=i.symbol||c!=n.layout.periodicity||p!=n.layout.interval||g!=n.layout.timeUnit)return s.stop(),void M();var f=t.clone(e);f.Adj_Close=null,f.Close=Math.round(d*a.granularity)/a.granularity,o?(f.Open||0===f.Open||(f.Open=f.Close),f.High||0===f.High||(f.High=Math.max(f.Open,f.Close)),f.Low||0===f.Low||(f.Low=Math.min(f.Open,f.Close))):(e.Close>r.High&&(f.High=f.Close),e.Close<r.Low&&(f.Low=f.Close)),i.animatingHorizontalScroll&&(n.micropixels=u.micropixels,i.lastTickOffset=u.lineOffset),l.updateDataSegmentInPlace=!s.hasCompleted;var m=[f];o&&"tick"!==n.layout.interval&&m.unshift(r),n.updateChartData(m,i,l),l.firstLoop=!1,s.hasCompleted&&M()}}(f,t.clone(this.prevQuote),m),{Close:A,micropixels:this.nextMicroPixels,lineOffset:w},{Close:f.Close,micropixels:this.micropixels,lineOffset:0}),!0}}function D(e){if(i.masterData)for(var t=i.masterData.length-1;t>=0;t--){var a=i.masterData[t];if(a.Close||0===a.Close)return a.Close=e.Close,e.LastSize&&(a.LastSize=e.LastSize),e.LastTime&&(a.LastTime=e.LastTime),n.updateCurrentMarketData({Close:a.Close,DT:a.DT,LastSize:a.LastSize,LastTime:a.LastTime}),void n.createDataSet(null,null,{appending:!0})}}function M(){if(i.animatingHorizontalScroll&&(i.animatingHorizontalScroll=!1,n.micropixels=n.nextMicroPixels=n.previousMicroPixels,i.lastTickOffset=0),null!==i.closePendingAnimation){var e=i.closePendingAnimation;i.closePendingAnimation=null,D({Close:e})}}})),i.prepend("renderYAxis",(function(e){if(!this.grabbingScreen&&this.isHome()&&(this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation)){var i=e.panel.yAxis;if(!t.Comparison||i.priceFormatter!=t.Comparison.priceFormat)if(e.prevLowValue||0===e.prevLowValue||(e.prevLowValue=e.animatedLow=e.lowValue),e.prevHighValue||0===e.prevHighValue||(e.prevHighValue=e.animatedHigh=e.highValue),s.running||(e.animatingVerticalScroll=!1),e.prevLowValue>=e.lowValue&&e.prevHighValue<=e.highValue)e.animatingVerticalScroll&&(i.highValue=e.animatedHigh,i.lowValue=e.animatedLow);else if(s.running&&s.stop(),e.lowValue||e.highValue){var a,r=e.prevLowValue,n=e.prevHighValue;e.prevLowValue=e.lowValue,e.prevHighValue=e.highValue,e.animatingVerticalScroll=!0,s.run((a=this,function(t){e.animatedLow=t.low,e.animatedHigh=t.high,a.draw()}),{low:r,high:n},{low:e.lowValue,high:e.highValue}),i.lowValue=e.animatedLow,i.highValue=e.animatedHigh}}})),i.append("draw",(function(){if(!u&&this.chart.dataSet&&this.chart.dataSet.length&&this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation){c%h==0&&(l++,c=0),c++;var e=this.chart.context,t=this.chart.panel,i=this.currentQuote();if(!i)return;var a=i.Close,r=this.pixelFromTick(i.tick,this.chart);this.chart.lastTickOffset&&(r+=this.chart.lastTickOffset);var n=this.pixelFromPrice(a,t);this.chart.yAxis.left>r&&this.chart.yAxis.top<=n&&this.chart.yAxis.bottom>=n&&(l>=o.length&&(l=0),e.beginPath(),e.moveTo(r,n),e.arc(r,n,2+1.07*l,0,2*Math.PI,!1),e.fillStyle=o[l],e.fill())}}))}},Ne=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.ContinuousZoom=t.ContinuousZoom||function(e){this.cssRequired=!0,this.update(e),this.stx.continuousZoom=this,this.addSmartZoomButton=function(){var e,t=this.stx.registerChartControl&&this.stx.registerChartControl("stx-smart-zoom","SmartZoom (Alt + 0)",(e=this,function(t){e.smartZoomToggle(t),t.stopPropagation()}));t&&(this.stx.addEventListener("layout",(function(e){!0===e.stx.layout.smartzoom?t.classList.add("active"):t.classList.remove("active")})),this.stx.addEventListener("symbolImport",(function(e){!1===e.stx.layout.smartzoom&&t.classList.remove("active")})))},this.smartZoomToggle=function(e){this.smartZoomEnable(!this.stx.layout.smartzoom)},this.smartZoomEnable=function(e){this.stx.layout.smartzoom=e,this.stx.changeOccurred("layout")},this.addSmartZoomButton(),this.smartZoomEnable(!0)},t.ContinuousZoom.prototype.update=function(e){e||(e={}),this.stx=e.stx,this.periodicities=e.periodicities,this.boundaries=e.boundaries},t.ContinuousZoom.prototype.execute=function(e){function t(e){var t=e.period||e.periodicity,i=e.interval,a=e.timeUnit||"minute";switch(isNaN(i)&&(a=i,i=1),a){case"month":i*=4.35;case"week":i*=7;case"day":i*=1440;case"minute":i*=60;case"second":break;case"millisecond":i/=1e3;break;default:return null}return t*i}if(this.stx&&this.stx.layout.smartzoom){var i=this.periodicities,a=this.boundaries,r=this.stx,n=r.layout,s=r.chart;if(i&&a&&(!e&&a.maxCandleWidth&&n.candleWidth>a.maxCandleWidth||e&&a.minCandleWidth&&n.candleWidth<a.minCandleWidth||!e&&a.minTicks&&s.maxTicks<a.minTicks||e&&a.maxTicks&&s.maxTicks>a.maxTicks)){for(var o={value:e?Number.MAX_VALUE:0},l=t(n),h=0;h<i.length;h++){var c=t(i[h]);(c>l&&c<o.value&&e||c<l&&c>o.value&&!e)&&(o={value:c,periodicity:i[h]})}var u=o.periodicity;u&&r.setRange({dtLeft:s.xaxis[0].DT,dtRight:s.xaxis[s.xaxis.length-1].DT,dontSaveRangeToLayout:!0,periodicity:u})}}}},Re=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Outliers=t.Outliers||function(e){if(e||(e={}),e.stx){Array.isArray(e.altColors)||(e.altColors=["#323390","#66308f","#0073ba","#f4932f","#0056a4","#00a99c","#00a553","#ea1d2c","#e9088c","#fff126","#912a8e","#ee652e","#00afed","#8ec648"]),this.stx=e.stx,this.stx.outliers=this,this.cssRequired=!0,this.multiplier=e.multiplier||3,this.altColors=e.altColors,this.axisData={},this.stx.addEventListener("layout",(function(e){Object.keys(e.stx.outliers.axisData).forEach(function(e){this.removeAllMarkers(this.axisData[e]),delete this.axisData[e]}.bind(e.stx.outliers))})),this.processDataSet=function(e,t,i){if(!e.length||e.length<=1)return!1;var a=[0,0];if(!this.axisData[i.name]){var r="",n=-1;Object.keys(this.axisData).forEach(function(e){this.axisData[e].panel.name==t.name&&n++}.bind(this)),n>-1&&n<this.altColors.length&&(r=this.altColors[n]),this.axisData[i.name]={axis:i,panel:t,displayState:"none",isFlipped:!1,originalZoom:i.zoom,markerColor:r,markers:{},axisMarkers:{}}}var s=this.axisData[i.name];return Object.assign(s,this.find(e)),this.refreshMarkerArray(s),this.refreshMarkers(s),"low"!==s.displayState&&"all"!==s.displayState||null===s.outlierMin?a[0]=s.trendMin:a[0]=s.outlierMin,"high"!==s.displayState&&"all"!==s.displayState||null===s.outlierMax?a[1]=s.trendMax:a[1]=s.outlierMax,a},this.find=function(e){if(e.length&&!(e.length<=0)){var t,i,a=function(e,t){return{quote:e.quote,DT:e.quote.DT,value:e.value,position:t}},r=null,n=null,s=null,o=null,l=[],h=e.slice();h.sort((function(e,t){return e.value-t.value}));var c=h.length,u=h[Math.floor(c/4)].value,d=h[Math.floor(c*(3/4))].value,p=d-u;t=u-p*this.multiplier,i=d+p*this.multiplier;for(var g=0;g<c;g++){var f=h[g],m=h[c-(g+1)];if(f.value<=t&&l.push(a(f,"low")),m.value>=i&&l.push(a(m,"high")),null===s&&f.value<=t&&(s=f.value),null===o&&m.value>=i&&(o=m.value),null===r&&f.value>t&&(r=f.value),null===n&&m.value<i&&(n=m.value),null!==r&&null!==n)break}return{minValue:t,maxValue:i,trendMin:r,trendMax:n,outlierMin:s,outlierMax:o,activeOutliers:l}}},this.refreshMarkerArray=function(e){this.deprecateMarkers(e);var t=e.markers;e.activeOutliers.forEach(function(i){var a=i.DT.getTime().toString();t[a]||(t[a]={isFresh:!0,type:"quote",value:i.value,marker:this.markOutlier(i,i.position,e)}),t[a].isFresh=!0}.bind(this)),null!==e.outlierMax&&(t.axisHigh||(t.axisHigh={isFresh:!0,type:"axis",value:e.outlierMax,marker:this.markAxis("high",e)}),t.axisHigh.isFresh=!0),null!==e.outlierMin&&(t.axisLow||(t.axisLow={isFresh:!0,type:"axis",value:e.outlierMin,marker:this.markAxis("low",e)}),t.axisLow.isFresh=!0)},this.setDisplayState=function(e,t){"high"!=e&&"low"!=e&&"all"!=e&&(e="none");var i=e;"all"==t.displayState&&"high"==e?i="low":"all"==t.displayState&&"low"==e?i="high":"high"==t.displayState&&"low"==e||"low"==t.displayState&&"high"==e?i="all":t.displayState==e&&(i="none"),t.displayState=i,t.axis.zoom=t.originalZoom,this.refreshMarkers(t),this.stx.draw()},this.deprecateMarkers=function(e){Object.keys(e.markers).forEach(function(e){var t;(t=this.markers[e]).marker&&!t.isFresh?(t.marker.remove&&t.marker.remove(),t.marker=null):t.isFresh=!1,this.markers[e].marker||delete this.markers[e]}.bind(e))},this.removeAllMarkers=function(e){Object.keys(e.markers).forEach((function(t){var i=e.markers[t].marker;i&&(i.remove&&i.remove(),i=null),i||delete e.markers[t]}))},this.updateMarkerVisibility=function(){Object.keys(this.markers).forEach(function(e){"all"==this.displayState||this.markers[e].marker.node.classList.contains(this.displayState)?this.markers[e].marker.node.style.display="none":this.markers[e].marker.node.style.display="block"}.bind(this))},this.refreshAxisMarkers=function(e,t){var i=!1;e.classList.contains("high")&&(i=!0);var a=t.axis.top;(!t.isFlipped&&!i||t.isFlipped&&i)&&(a=t.axis.bottom-50),e.classList.contains("nano")&&(a=t.axis.top+t.axis.height/2-22);var r=Math.floor(t.axis.left).toString()+"px",n=Math.floor(a).toString()+"px",s=i?t.outlierMax:t.outlierMin;e.style.transform="translate("+r+", "+n+")",e.querySelector(".outlier-value").innerText=this.stx.formatYAxisPrice(s),"0px"===r?e.classList.add("right"):e.classList.remove("right")},this.refreshMarkers=function(e){Object.keys(e.markers).forEach(function(e,t){var i=e.markers[t].marker,a=e.markers[t].value,r=e.markers[t].type;a>e.trendMax&&e.axis.high>=a||a<e.trendMin&&e.axis.low<=a?"quote"==r?i.node.style.display="none":"axis"==r&&i.node.classList.add("compress"):"quote"==r?i.node.style.display="block":"axis"==r&&i.node.classList.remove("compress"),"axis"==r&&this.refreshAxisMarkers(i.node,e),e.axis.height<100?i.node.classList.add("nano"):i.node.classList.remove("nano"),e.axis.height<250?i.node.classList.add("micro"):i.node.classList.remove("micro")}.bind(this,e)),e.isFlipped!==e.axis.flipped&&this.flipMarkers(e)},this.markAxis=function(e,i){var a=document.createElement("div");a.classList.add("outlier-sticker","axis","mini",e),a.innerHTML='<div class="expansion"><div class="pill"><div class="icon"></div></div><div class="tick"></div><span class="outlier-value"></div><div class="compression"><div class="pill"><div class="icon"></div></div></div></span>',this.matchYAxisStyle(a),this.setMarkerColor(a,i.markerColor);var r=this.handleMarkerClick.bind(this,e,i,a);return a.addEventListener("click",r),a.addEventListener("touchend",r),new t.Marker({stx:this.stx,xPositioner:"none",yPositioner:"none",label:"expand",permanent:!0,chartContainer:!0,node:a})},this.markOutlier=function(e,i,a){if(e){a||(a={panel:this.stx.panels.chart}),i=i||"high";var r=document.createElement("div");r.classList.add("outlier-sticker","quote","mini",i),r.innerHTML='<div class="pill"><div class="icon"></div></div><span class="outlier-value">'+this.stx.formatYAxisPrice(e.value,a.panel)+"</span>",this.matchYAxisStyle(r),this.setMarkerColor(r,a.markerColor);var n=this.handleMarkerClick.bind(this,i,a,r);return r.addEventListener("click",n),r.addEventListener("touchend",n),new t.Marker({stx:this.stx,xPositioner:"date",yPositioner:"high"==i?"top":"bottom",x:e.quote.DT,panelName:a.panel.name,node:r})}},this.handleMarkerClick=function(e,t,i){i.classList.contains("nano")&&(e="all"),this.setDisplayState(e,t),this.stx.draw()},this.matchYAxisStyle=function(e){if(this.stx.styles.stx_yaxis){var t=this.stx.styles.stx_yaxis;e.style.fontSize=t.fontSize,e.style.fontFamily=t.fontFamily,e.style.color=t.color,e.style.borderColor=t.color}},this.setMarkerColor=function(e,t){if(""!=t)for(var i=e.querySelectorAll(".pill"),a=0;a<i.length;a++)i[a].style.backgroundColor=t},this.flipMarkers=function(e){e.isFlipped=e.axis.flipped,Object.keys(e.markers).forEach(function(e,t){var i=e.markers[t].marker,a=e.markers[t].value,r=e.markers[t].type;e.isFlipped?i.node.classList.add("flipped"):i.node.classList.remove("flipped"),"quote"==r&&(a>e.trendMax?e.isFlipped?i.params.yPositioner="bottom":i.params.yPositioner="top":a<e.trendMin&&(e.isFlipped?i.params.yPositioner="top":i.params.yPositioner="bottom"))}.bind(this,e))};var i=t.ChartEngine.prototype.determineMinMax.bind(this.stx);t.ChartEngine.prototype.determineMinMax=function(e,t,a,r,n,s,o,l,h){return h||(h=[]),o&&l&&this.layout.outliers&&h.push(this.outliers.processDataSet.bind(this.outliers)),i(e,t,a,r,n,s,o,l,h)}}else console.warn("The Outliers addon requires an stx parameter")}},Ye=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.PlotComplementer=t.PlotComplementer||function(e){var i=e.stx,a=t.uniqueID();e.decorator||(e.decorator={});var r=e.decorator.symbol||"_"+a,n=e.decorator.display||" (addl)";i.plotComplementers||(i.plotComplementers=[]),i.plotComplementers.push(this),this.id=e.id||a,this.defaultRenderingParameters={chartType:"line",width:1,opacity:.5},e.renderingParameters&&(this.defaultRenderingParameters=e.renderingParameters);var s=this;function o(i,a,o,l){if("err"!=function(t){if(t.quoteDriver&&e.quoteFeed){for(var i=0;i<t.quoteDriver.quoteFeeds.length;i++)if(t.quoteDriver.quoteFeeds[i].engine==e.quoteFeed)return;return"err"}}(i)&&(l||(l=a),!i.isEquationChart(a)&&(o||(o={}),!o.isComparison&&l&&-1==l.indexOf(r)))){var h=l+r,c=a+r,u=i.getRendererFromSeries(l),d=t.extend({display:a+n,name:h,symbol:c,symbolObject:{symbol:c,generator:s.id,masterSymbol:a},overChart:!1,gapDisplayStyle:!0,permanent:!0,panel:o.panel,yAxis:o.yAxis,shareYAxis:!0,loadData:!!s.quoteFeed,dependentOf:u?u.params.name:i.mainSeriesRenderer.params.name},s.renderingParameters);d.color||(d.color=o.color||"auto"),i.addSeries(h,d,(function(e,t){e&&i.removeSeries(h,i.chart),i.chart.seriesRenderers[h]&&(i.chart.seriesRenderers[h].params.display=d.display)}))}}function l(e,t,i){t&&-1==t.indexOf(r)&&e.removeSeries(t+r,i)}function h(e){"master"==e.action?(e.prevSymbol||(e.prevSymbol=e.symbol),l(e.stx,e.prevSymbol,e.stx.chart),o(e.stx,e.symbol)):"add-series"==e.action?(l(e.stx,e.id,e.stx.chart),o(e.stx,e.symbol,e.parameters,e.id)):"remove-series"==e.action&&l(e.stx,e.id,e.stx.chart)}i.addEventListener("symbolChange",h),i.addEventListener("symbolImport",h),this.resetRenderingParameters=function(){this.renderingParameters=this.defaultRenderingParameters},this.setQuoteFeed=function(e){if(e.quoteFeed&&e.behavior){var a=t.clone(e.behavior);a.generator=this.id;var r=e.filter;i.attachQuoteFeed(e.quoteFeed,a,(function(e){return!(r&&!r(e))&&e.symbolObject.generator==a.generator})),this.quoteFeed=e.quoteFeed}},this.setQuoteFeed(e),this.resetRenderingParameters()}},ze=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.ExtendedHours=t.ExtendedHours||function(e){var i=e.stx;this.filter=e.filter,i||(i=e,this.filter=!1);var a={};this.stx=i,this.stx.extendedHours=this,this.cssRequired=!0,i.addEventListener("theme",(function(e){for(var t in a={},i.layout.marketSessions)a.session||(a.session={}),a.session[t]=i.canvasStyle("stx_market_session "+t)})),i.addEventListener("symbolChange",(function(e){"master"!=e.action||!i.layout.extended||i.chart.market.market_def&&i.chart.market.sessions.length||t.alert("There are no Extended Hours for this instrument.")})),this.prepare=function(e,t){for(var r in i.layout.extended=e,i.layout.marketSessions)a.session={},i.chart.market.disableSession(r);if(i.layout.marketSessions={},e)if(t||(t=["pre","post"]),t.length)for(var n=0;n<t.length;n++)i.layout.marketSessions[t[n]]=!0;else i.layout.marketSessions=t;for(r in i.layout.marketSessions)a.session||(a.session={}),a.session[r]=i.canvasStyle("stx_market_session "+r),i.chart.market.disableSession(r,!0)},this.complete=function(e){i.changeOccurred("layout"),i.chart.market.market_def?this.filter?(i.createDataSet(),i.draw(),e&&e()):i.loadChart(i.chart.symbol,e):e&&e()},this.set=function(e,t,i){this.prepare(e,t),this.complete(i)},this.stx.append("drawYAxis",(function(e,r){if(this.layout.extended&&e.yAxis==r.yAxis&&!1!==e.shareChartXAxis&&!e.hidden){var n=e.chart;if(!t.ChartEngine.isDailyInterval(this.layout.interval)&&(a.divider=this.canvasStyle("stx_market_session divider"),a.session)){for(var s,o,l=n.market,h=[],c={},u=0;u<n.dataSegment.length;u++){var d=n.dataSegment[u];if(d&&d.DT){var p=null;if(l.market_def)if(!s||s<=d.DT)o=l.getSession(d.DT),s=l[!(""===o||this.layout.marketSessions&&this.layout.marketSessions[o])?"getNextOpen":"getNextClose"](d.DT);var g=a.session[o];if(g&&(p=g.backgroundColor),c.color&&c.color!=p&&(h.push({start:c.start,end:c.end,color:c.color}),c={}),p){var f=this.layout.candleWidth;d.candleWidth&&(f=d.candleWidth),c.end=this.pixelFromBar(u,n)+f/2,c.start||0===c.start||(c.start=c.end-f+1),c.color=p}else c={}}}(c.start||0===c.start)&&h.push({start:c.start,end:c.end,color:c.color});var m=t.isTransparent(a.divider.backgroundColor),y=a.divider.width.replace(/px/g,""),v={y0:e.bottom,y1:e.top,color:a.divider.backgroundColor,type:"line",context:n.context,confineToPanel:e,pattern:"dashed",lineWidth:y,deferStroke:!0};for(this.startClip(e.name),n.context.beginPath(),i.highlightedDraggable&&(n.context.globalAlpha*=.3),u=0;u<h.length;u++)n.context.fillStyle=h[u].color,!m&&h[u].start>n.left&&this.plotLine(t.extend({x0:h[u].start,x1:h[u].start},v)),n.context.fillRect(h[u].start,e.top,h[u].end-h[u].start,e.bottom-e.top),!m&&h[u].end<n.right&&this.plotLine(t.extend({x0:h[u].end,x1:h[u].end},v));n.context.stroke(),this.endClip()}}}))}},Be=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.FullScreen=t.FullScreen||function(e){if(e||(e={}),e.stx){try{if(window.location.host!==window.top.location.host)throw new Error(window.location.host+" does not match "+window.top.location.host)}catch(e){return void console.warn("Full screen mode disabled.")}this.stx=e.stx,this.stx.fullScreen=this,this.fullScreenButton=null,this.fullScreenState=!1,this.addFullScreenButton=function(){var e;this.stx.registerChartControl&&(this.fullScreenButton=this.stx.registerChartControl("stx-full-screen","Full Screen",(e=this,function(t){e.fullScreenToggle(t),t.stopPropagation()})))},this.fullScreenToggle=function(e){document.documentElement.requestFullscreen||document.documentElement.webkitRequestFullscreen||document.documentElement.mozRequestFullscreen||document.documentElement.msRequestFullscreen?this.getFullScreenElement()?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.mozRequestFullscreen?document.documentElement.mozRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen():(this.fullScreenState=!this.fullScreenState,this.fullScreenRender())},this.fullScreenRender=function(){var e=null;(e=this.stx.container.closest("*[cq-context], cq-context, body"))&&(!0===this.fullScreenState?(this.fullScreenButton&&this.fullScreenButton.classList.add("active"),e.classList.add("full-screen")):(this.fullScreenButton&&this.fullScreenButton.classList.remove("active"),e.classList.remove("full-screen")),window.dispatchEvent(new Event("resize")))},this.onFullScreenChange=function(){this.getFullScreenElement()?this.fullScreenState=!0:this.fullScreenState=!1,this.fullScreenRender()},this.getFullScreenElement=function(){return document.fullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement},document.addEventListener("fullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("webkitfullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("mozfullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("MSFullscreenChange",this.onFullScreenChange.bind(this),!1),this.addFullScreenButton()}else console.warn("The Full Screen addon requires an stx parameter")}},Ue=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.InactivityTimer=t.InactivityTimer||function(e){if(e.minutes){(!e.interval||e.interval<0)&&(e.interval=60),this.stx=e.stx,this.timeout=e.minutes,this.interval=e.interval,this.wakeCB=e.wakeCB,this.sleepCB=e.sleepCB,this.sleepTimer=null,this.sleeping=!1,this.last=(new Date).getTime(),this.wakeChart=function(){clearTimeout(this.sleepTimer),this.last=(new Date).getTime(),this.sleeping&&(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(),this.sleeping=!1,document.body.classList.remove("ciq-sleeping")),this.sleepTimer=setTimeout(this.sleepChart.bind(this),6e4*this.timeout),this.wakeCB&&this.wakeCB()},this.sleepChart=function(){this.sleeping||(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(this.interval),this.sleeping=!0,document.body.classList.add("ciq-sleeping")),this.sleepCB&&this.sleepCB()};var t=this;["mousemove","mousedown","touchstart","touchmove","pointerdown","pointermove","keydown","wheel"].forEach((function(e){document.body.addEventListener(e,(function(e){t.wakeChart()}))})),this.wakeChart()}}},je=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.RangeSlider=t.RangeSlider||function(e){this.cssRequired=!0;var i=e.stx;i.slider=this;var a=e.height?e.height:"95px",r=e.chartContainer?e.chartContainer:e.stx.container,n=document.createElement("div");n.className="ciq-chart";var s=document.createElement("div");s.className="chartContainer",n.appendChild(s),r.parentElement.parentElement.insertBefore(n,r.parentElement.nextSibling),Object.assign(n.style,{height:a,paddingTop:"5px",display:"none"}),s.style.height="100%",s.dimensionlessCanvas=!0;var o=this.slider=new t.ChartEngine({container:s,preferences:{labels:!1,whitespace:0}});o.xaxisHeight=30,o.manageTouchAndMouse=!1,o.minimumCandleWidth=0,o.chart.panel.subholder.style.cursor="ew-resize";var l=o.chart.panel.yAxis;l.drawCurrentPriceLabel=!1,Object.defineProperty(l,"position",{get:function(){return i.slider.yAxisPosition||i.chart.panel.yAxis.position},set:function(e){i.slider.yAxisPosition=e}});var h=Object.getOwnPropertyDescriptor(t.ChartEngine.YAxis.prototype,"width"),c=h.get,u=h.set;Object.defineProperty(l,"width",{get:function(){return Math.max(c.call(l),i.chart.yAxis.width)},set:function(e){u.call(l,e)}}),t.extend(l,e.yAxis),o.chart.baseline.userLevel=!1,o.controls.home&&(o.controls.home.style.width=0),o.initializeChart();var d=o.chart.panel.subholder;this.updateStyles=function(e,t,a){i.setStyle(e,t,a),this.style=i.canvasStyle("stx_range_slider shading")},this.display=function(e){if(i.layout.rangeSlider!==e)return i.layout.rangeSlider=e,void i.changeOccurred("layout");n.style.display=e?"":"none",i.resizeChart(),window.dispatchEvent(new Event("resize")),e&&(o.resizeChart(),o.initializeChart(),o.draw(),this.drawSlider())},this.setSymbol=function(e){o.chart.panel.display=o.chart.symbol=e,o.setMainSeriesRenderer(),o.resizeChart(),this.adjustRange(i.chart),o.draw(),this.drawSlider()},this.acceptLayoutChange=function(e){var a=!1;o.layout.rangeSlider!==e.rangeSlider&&i.slider.display(e.rangeSlider);["chartType","aggregationType","periodicity","interval","timeUnit","chartScale","rangeSlider","flipped","extended","marketSessions","kagi","rangebars","renko","priceLines","pandf"].forEach((function(i){t.equals(o.layout[i],e[i])||(o.layout[i]=e[i],a=!0)})),t.trulyVisible(n)&&a&&(o.setMainSeriesRenderer(),o.draw(),this.drawSlider())},this.adjustRange=function(e){if(e.dataSet&&e.endPoints&&e.endPoints.begin){var t=o.chart;if(t.width){var a=0,r=0;if(i.quoteDriver){var n={symbol:e.symbol,symbolObject:e.symbolObject,interval:i.layout.interval};"month"!=n.interval&&"week"!=n.interval||i.dontRoll||(n.interval="day");var s=i.quoteDriver.getQuoteFeed(n).behavior;s&&s.bufferSize&&(e.moreAvailable&&(a=s.bufferSize),i.isHistoricalMode()&&(r=s.bufferSize))}t.baseline.defaultLevel=e.baseline.actualLevel,t.scroll=Math.max(0,e.dataSet.length-i.tickFromDate(e.endPoints.begin)-a)+1,t.maxTicks=t.scroll-r+1,o.layout.candleWidth=t.width/t.maxTicks}}},this.copyData=function(e){if(e.dataSet){var t=o.chart;t.masterData=o.masterData=e.masterData,t.dataSet=e.dataSet,t.state=e.state,o.draw(),this.drawSlider()}},this.calculateYAxisPosition=function(){var e=o.chart.panel;o.getYAxisCurrentPosition(e.yAxis,e)!=e.yAxis.position&&o.calculateYAxisPositions()},this.drawSlider=function(){if(t.trulyVisible(n)&&i.chart.dataSet&&i.chart.dataSet.length){var e=this.style;e||(e=this.style=i.canvasStyle("stx_range_slider shading"));var a=i.chart.panel,r=o.chart.context,s=o.chart.segmentImage||[],l=o.layout.candleWidth/2,h=o.tickLeft=Math.max(i.tickFromPixel(a.left+l),0),c=o.tickRight=Math.min(i.tickFromPixel(a.right-l),i.chart.dataSet.length-1),u=o.pixelLeft=o.pixelFromTick(h)-(s[h]?s[h].candleWidth/2:l),p=o.pixelRight=o.pixelFromTick(c)+(s[c]?s[c].candleWidth/2:l),g=d.offsetLeft,f=g+d.offsetWidth;r.save(),r.beginPath(),r.fillStyle=e.backgroundColor,r.fillRect(g,d.offsetTop,u-g,d.offsetHeight),r.fillRect(f,d.offsetTop,p-f,d.offsetHeight),r.strokeStyle=e.borderTopColor,r.lineWidth=parseInt(e.borderWidth,10),r.moveTo(u,d.offsetTop),r.lineTo(u,d.offsetTop+d.offsetHeight),r.moveTo(p,d.offsetTop),r.lineTo(p,d.offsetTop+d.offsetHeight),r.stroke(),r.beginPath(),r.lineWidth=parseInt(e.width,10),r.lineCap="round",r.moveTo(u,d.offsetTop+d.offsetHeight/4),r.lineTo(u,d.offsetTop+3*d.offsetHeight/4),r.moveTo(p,d.offsetTop+d.offsetHeight/4),r.lineTo(p,d.offsetTop+3*d.offsetHeight/4),r.stroke(),r.restore()}},i.addEventListener("layout",(function(e){e.stx.slider.acceptLayoutChange(e.stx.layout)})),i.addEventListener("preferences",(function(e){var i=e.stx.preferences.language;t.I18N&&o.preferences.language!=i&&t.I18N.setLocale(o,i),o.preferences.language=i,o.draw()})),i.addEventListener("symbolChange",(function(e){"master"==e.action&&e.stx.slider.setSymbol(e.symbol)})),i.addEventListener("symbolImport",(function(e){"master"==e.action&&e.stx.slider.setSymbol(e.symbol),e.stx.slider.acceptLayoutChange(e.stx.layout)})),i.addEventListener("theme",(function(e){if(o.clearPixelCache(),o.styles={},o.chart.container.style.backgroundColor="",t.ThemeHelper){var i=new t.ThemeHelper({stx:e.stx});i.params.stx=o,i.update()}})),i.append("createDataSet",(function(){this.slider.adjustRange(this.chart),this.slider.copyData(this.chart)})),i.append("draw",(function(){t.trulyVisible(n)&&o.chart.dataSet&&(this.slider.adjustRange(this.chart),this.slider.calculateYAxisPosition(),o.draw(),this.slider.drawSlider())})),i.prepend("resizeChart",(function(){var e=r.parentElement,i=e.parentElement,a=(parseFloat(getComputedStyle(e).height),parseFloat(getComputedStyle(r).height),t.elementDimensions(i).height),s=i.querySelectorAll(".chartContainer");Array.from(s).forEach((function(e){e!==r&&t.trulyVisible(e)&&(a-=t.elementDimensions(e,{border:1,padding:1,margin:1}).height)})),e.style.height=a+"px",this.layout.rangeSlider?(o.chart.breakpoint!==this.chart.breakpoint&&o.notifyBreakpoint(this.chart.breakpoint),n.style.display="",o.resizeChart(),o.initializeChart(),o.draw(),this.slider.drawSlider()):n.style.display="none"})),["mousedown","touchstart","pointerdown"].forEach((function(e){d.addEventListener(e,(function(e){var a=o.backOutX(e.pageX);if(a||0===a){a-=e.target.offsetLeft,o.startDrag=a,o.startPixelLeft=o.pixelLeft,o.startPixelRight=o.pixelRight;var r=i.slider.style;r||(r=i.slider.style=i.canvasStyle("stx_range_slider shading"));var n=parseInt(r.borderLeftWidth,10);(a+=this.offsetLeft)<o.pixelRight-n&&(o.needsLeft=!0),a>o.pixelLeft+n&&(o.needsRight=!0),t.touchDevice||o.needsLeft&&o.needsRight&&e.target.classList.add("stx-drag-chart")}}),{passive:!1})})),["mouseup","mouseover","touchend","pointerup"].forEach((function(e){d.addEventListener(e,(function(e){var t=e.which,i=e.type;1===t&&"pointerup"!==i&&"mouseup"!==i||(e.target.classList.remove("stx-drag-chart"),o.chart.panel.subholder.style.cursor="ew-resize",o.startDrag=null,o.needsLeft=!1,o.needsRight=!1)}))})),["mousemove","touchmove","pointermove"].forEach((function(e){d.addEventListener(e,(function(e){var t=o.startDrag;if(t||0===t){var a=e.touches,r=(a&&a.length?o.backOutX(a[0].pageX):o.backOutX(e.pageX))-e.target.offsetLeft;if(r||0===r){r-=t;var n=o.tickLeft,s=o.tickRight,l=o.startPixelLeft,h=o.startPixelRight,c=o.needsLeft,u=o.needsRight;if(c)l+r<o.chart.left&&(r=o.chart.left-l),u&&h+r>=o.chart.right&&(r=o.chart.right-h,o.isHome()||(r+=o.layout.candleWidth/2)),n=o.tickFromPixel(l+r),u&&(s=n+o.tickRight-o.tickLeft);else{if(!u)return;s=Math.min(o.tickFromPixel(h+r),i.chart.dataSet.length-1)}var d=i.chart.width/(s-n+1);s>=n&&d>=i.minimumCandleWidth&&(o.tickLeft=n,o.tickRight=s,i.chart.scroll=i.chart.dataSet.length-n,c&&u||i.setCandleWidth(d),i.micropixels=0,i.draw())}}}),{passive:!1})})),this.adjustRange(i.chart),this.copyData(i.chart)}},We=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Shortcuts=t.Shortcuts||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stx,i=e.width,a=void 0===i?580:i,r=e.windowForEachChart,n=void 0===r||r,s=e.config;t?(this.stx=t,this.width=a,this.windowForEachChart=n,this.content=this.getShortcutContent(s),this.enclosingContainer=t.container.querySelector(".stx-subholder"),this.ensureMessagingAvailable(t),this.enableUI(t),this.cssRequired=!0,t.shortcuts=this):console.warn("The Shortcuts addon requires an stx parameter")},t.Shortcuts.prototype.enableUI=function(e){var i=this;e&&t.UI&&setTimeout((function(){e.uiContext.getAdvertised("Layout").showShortcuts=function(e,t){return i.toggle(t)}}))},t.Shortcuts.prototype.ensureMessagingAvailable=function(e){setTimeout((function(){var t=e.uiContext.topNode;t.querySelector("cq-floating-window")||t.append(document.createElement("cq-floating-window"))}))},t.Shortcuts.prototype.getShortcutContent=function(e){var t=(e.drawingTools||[]).filter((function(e){return e.shortcut})).map((function(e){var t=e.label,i=e.shortcut;return'<div class="ciq-shortcut">\n\t\t\t\t\t<div>'.concat(t,"</div>\n\t\t\t\t\t<div><span>Alt</span> + <span>").concat(i.toUpperCase(),"</span></div>\n\t\t\t\t</div>")})).join(""),i=function(e){return" + "===e?"<span>+</span>":e.split("+").map((function(e){return e&&" "!==e?"<span>"+e+"</span>":""})).join(" + ")},a=this.stx.container.closest("cq-context"),r=(e.hotkeyConfig&&e.hotkeyConfig.hotkeys||[]).map((function(e){var t,r=e.label,n=e.action,s=e.commands,o=e.extension;return o&&(t=o,!a.hasAttribute(t.toLowerCase()+"-active"))?"":'<div class="ciq-shortcut"><div>'.concat(r||n,"</div><div>").concat(function(e){return e.map((function(e){return e.replace(/Arrow|Key|Digit|^ | $/g,"")})).map((function(e){return e.replace(/\+/," + ")})).reduce((function(e,t){return!e.includes(t)&&(i=t).charCodeAt(i.length-1)<127?e.concat(t):e;var i}),[]).map(i).join("<br>")}(s),"</div></div>")})).join("");return'\n\t\t<div class="ciq-shortcut-container">\n\t\t\t<div>\n\t\t\t\t<div><b>Drawing tools shortcuts</b></div>\n\t\t\t\t<div>'.concat(t,"</div>\n\t\t\t</div>\n\t\t\t<hr>\n\t\t\t<div>\n\t\t\t\t<div><b>Hotkeys</b></div>\n\t\t\t\t<div>").concat(r,"</div>\n\t\t\t</div>\n\t\t</div>\n\t")},t.Shortcuts.prototype.toggle=function(e){var t=this;this.stx.dispatch("floatingWindow",{type:"shortcut",title:"Shortcuts",content:this.content,container:this.enclosingContainer,onClose:function(){return t.closed=!0},width:this.width,status:e,tag:this.windowForEachChart?void 0:"shortcut"})}},Qe=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;function i(){}t.TableView=t.TableView||function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.stx,n=a.minColumnWidth,s=void 0===n?"84px":n,o=a.coverUIMaxWidth,l=void 0===o?400:o,h=a.coverContainer,c=a.usePreviousCloseForChange,u=void 0===c||c;r?(this.stx=r,this.viewAdditionalColumns=!1,this.minColumnWidth=s,this.coverUIMaxWidth=l,this.coverContainer=h,this.usePreviousCloseForChange=u,this.builder=i,this.listeners=[],r.tableView=this,this.cssRequired=!0,t.UI&&t.UI.observeProperty("uiContext",r,(function(i){var a=i.value;a&&setTimeout((function(){e.subscribeToChanges(a);var i=t.getFromNS(a.config,"hotkeyConfig.hotkeys",[]).find((function(e){return"tableView"===e.action}));i&&(i.action=function(){var e=document.body.keystrokeHub.context.stx.tableView;if(e)return e.toggle(),!0})}))}))):console.warn("The TableView addon requires an stx parameter")},t.TableView.prototype.open=function(e){var i=this;e&&(this.params=e);var a=this.params||{},r=a.config,n=void 0===r?{}:r,s=a.onClose;if(this.view&&this.close(!1),n.minColumnWidth=this.minColumnWidth,n.coverUIMaxWidth=this.coverUIMaxWidth,n.coverContainer=this.coverContainer,this.onClose=s,this.view=this.builder.createTable(this.stx,n),this.view){t.I18N&&t.I18N.translateUI(null,this.view);var o=this.stx,l=this.close.bind(this);setTimeout((function(){return i.removeCloseListener=function(e){var i=o.uiContext.topNode,a=function(e){var t=e.target;return!t.closest(".ciq-data-table-container")&&l()};i.addEventListener("click",a);var r=function(e){if("Escape"===e.code){var t=document.body.keystrokeHub.context.stx.tableView;t&&(t.close(),e.preventDefault())}};document.body.addEventListener("keydown",r);var n=t.getFn("UI.getUIManager")();n&&(e.view.show=e.view.hide=function(){},n.openMenu(e.view,{}));return function(){i.removeEventListener("click",a),document.body.removeEventListener("keydown",r),n&&n.closeMenu(e.view)}}(i)}));var h=t.getFromNS(o,"uiContext.config.scrollbarStyling");h&&(h.refresh(this.view.querySelector("tbody")),h.refresh(this.view.querySelector(".ciq-data-table-wrapper"),{suppressScrollY:!0}))}},t.TableView.prototype.close=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.view&&(this.view.remove(),this.view=null),e&&this.onClose&&this.onClose(),this.removeCloseListener&&(this.removeCloseListener(),this.removeCloseListener=null)},t.TableView.prototype.toggle=function(){this[this.view?"close":"open"]()},t.TableView.prototype.subscribeToChanges=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channels.tableView",a=t.UI.BaseComponent.prototype,r=a.channelSubscribe,n=a.channelWrite,s=e.config||{},o=s.channels,l=(o=void 0===o?{}:o).tableView,h=void 0===l?i:l,c=this.stx;r(h,(function(e){e?c.tableView.open({onClose:function(){n(h,!1,c)}}):c.tableView.close()}),c)},i.colHeaders={date:{label:"Date"},open:{label:"Open"},high:{label:"High"},low:{label:"Low"},close:{label:"Close"},pctChange:{label:"% Change",cls:"ciq-extra"},pctChangeVsAvg:{label:"% Change vs Average",cls:"ciq-extra"},volume:{label:"Volume",cls:"ciq-extra"}},i.percentDecimalPlaces=2,i.createTable=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.chart&&e.chart.dataSegment){var i=e.tableView.builder,a=i.getChartData,r=i.dataToHtml,n=i.dataToCsv,s=i.downloadCsv,o=i.getDateFormatter,l=i.getValueFormatter,h=i.getVolumeFormatter,c=i.getFilenameFormatter,u=i.getSeriesDataNames,d=i.getStudyDataNames,p=i.getChartCover,g=Object.assign({},this.colHeaders);if(e.chart.highLowBars||(delete g.open,delete g.high,delete g.low),!e.tableView.viewAdditionalColumns)for(var f in g)g[f].cls&&delete g[f];var m=Object.values(g).map((function(e){return e.label})),y=u(e);y.forEach((function(e){return g[e]={label:e}}));var v=d(e);v.forEach((function(e){m.includes(e)||(g[e]={label:e})}));var x=y.concat(v),b=t.dateFormatter,C=void 0===b?o(e):b,S=t.valueFormatter,w=void 0===S?l(e):S,k=t.percentFormatter,A=void 0===k?l(e,this.percentDecimalPlaces):k,D=t.volumeFormatter,M=void 0===D?h(e):D,T=t.fileNameFormatter,F=void 0===T?c(e):T,_=t.minColumnWidth,P=void 0===_?"84px":_,V=a(e,{dateFormatter:C,valueFormatter:w,percentFormatter:A,volumeFormatter:M,additionalDataFields:x}),O=p(e,t),I=e.chart,L=I.symbolDisplay,H=I.symbol,E=i.getCoverToolbar({symbol:L||H,viewAdditionalColumns:e.tableView.viewAdditionalColumns,copyFn:R,downloadFn:Y,toggleAdditionalColumnsFn:function(){var t=e.tableView;t.viewAdditionalColumns=!t.viewAdditionalColumns,t.open()},closeFn:function(){return e.tableView.close()}});O.appendChild(E);var N=r(V,{colHeaders:g,minColumnWidth:P});return O.appendChild(N),O}function R(){var t=document.createElement("textArea");document.body.appendChild(t),t.textContent=n(V,{colHeaders:g}),t.select(),document.execCommand("copy"),t.remove(),e.dispatch("notification","copytoclipboard")}function Y(){var e=n(V,{colHeaders:g}),t=F(e);s(e,t)}},i.dataToHtml=function(e,t){var i=t.colHeaders,a=t.minColumnWidth,r=Object.keys(i).length,n="calc((100% - ".concat(10+4*r,"px ) / ").concat(r,")"),s=Object.entries(i).map((function(e,t){var i=Le(e,2)[1].label;return'<th\n\t\t\tscope="col"\n\t\t\tstyle="width: '.concat(n,';"\n\t\t\t>').concat(i.replace("(","  ("),"</th>")})),o=e.map((function(e){var t=Object.keys(i).map((function(t,i){var a=e[t];return 0===i?'<th scope="row"\n\t\t\t\t\t\t\t\tstyle="width: '.concat(n,'"\n\t\t\t\t\t\t\t\t>').concat(a,"</th>"):'<td style="width: '.concat(n,'">').concat(a,"</td>")})).join("");return"<tr>".concat(t,"</tr>")})),l=document.createElement("div");l.classList.add("ciq-data-table-wrapper");var h=a?"calc(".concat(r," * ").concat(a,")"):"";return l.innerHTML='\n\t\t<table class="header-fixed"\t'.concat(h?'style="min-width: '.concat(h,'"'):"",">\n\t\t<thead>").concat(s.join(""),"</thead>\n\t\t<tbody>").concat(o.join(""),"</tbody>\n\t\t</table>"),l},i.dataToCsv=function(e,t){var i=t.colHeaders,a=t.colSeparator,r=void 0===a?"\t":a,n=Object.entries(i).map((function(e){var t=Le(e,2)[1].label;return'"'.concat(t,'"')})).join(r),s=e.map((function(e){return Object.keys(i).map((function(t){return'"'.concat(e[t],'"')})).join(r)}));return"".concat(n,"\n").concat(s.join("\n"))},i.downloadCsv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"filename",i=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=window.URL.createObjectURL(i,{type:"text/plain"}),a.download="".concat(t,".csv"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},i.getChartData=function(e,i){var a=i.dateFormatter,r=i.valueFormatter,n=i.percentFormatter,s=i.volumeFormatter,o=i.additionalDataFields,l=e.chart.dataSegment.filter((function(e){return null!==e})),h=e.tableView.usePreviousCloseForChange,c=[],u=0,d=l.reduce((function(e,t){var i=t.Close,a=t.iqPrevClose,r=t.Open,n=h?a:r;return void 0===i||Number.isNaN(i)||void 0===n||Number.isNaN(n)?e:(u++,e+(i-n)/n)}),0)/u;return l.forEach((function(i,l){var u=i.DT,p=i.displayDate,g=i.High,f=i.Low,m=i.Open,y=i.Close,v=i.iqPrevClose,x=i.Volume,b=h?v:m,C=(y-b)/b,S=p||(e.displayZone?t.convertTimeZone(u,e.dataZone,e.displayZone):u),w={DT:u,date:a(S),open:r(m),close:r(y),change:r(y-b),pctChange:n(100*C),pctChangeVsAvg:n(100*(C-d)),high:r(g),low:r(f),volume:s(x)};o.forEach((function(e){var t=i[e];null!=t?("object"===Ie(t)&&(t=t.Close),w[e]=r(t)):w[e]=""})),c.push(w)})),c.sort((function(e,t){return t.DT-e.DT})),c},i.getDateFormatter=function(e){return function(i,a){return i?t.displayableDate(e,e.chart,i,!0):""}},i.getValueFormatter=function(e,t){var i,a=e.chart,r=a.panel,n=a.yAxis,s=e.layout.chartScale;return i=n.originalPriceFormatter&&n.originalPriceFormatter.func?function(i){return n.originalPriceFormatter.func(e,r,i,t)}:n.priceFormatter&&"percent"!=s&&"relative"!=s?function(i){return n.priceFormatter(e,r,i,t)}:function(i){return e.formatYAxisPrice(i,r,t)},function(e){return i(e).replace(/^-*0\.0*$/,"0")}},i.getVolumeFormatter=function(e){return function(t){if(null==t)return"";if(e.internationalizer)return e.internationalizer.priceFormatters[0].format(t);var i=t.toString().split(".");return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),i[0]}},i.getFilenameFormatter=function(e){return function(t){var i,a,r=e.chart.symbolDisplay||e.chart.symbol;if(t){var n=t.split("\n");if(n.length>1){var s=Le(n[1].match(/^"([^"]*)"/)||[],2)[1];i=void 0===s?"":s;var o=Le(n[n.length-1].match(/^"([^"]*)"/)||[],2)[1];a=void 0===o?"":o,i=i.replace(/:/g,".").replace(/\//g,"-"),a=a.replace(/:/g,".").replace(/\//g,"-")}}return"".concat(r).concat(i?" (".concat(i," _ ").concat(a,")"):"")}},i.getChartCover=function(e,t){var i=t.coverUIMaxWidth,a=t.coverContainer,r=a&&document.querySelector(a)||(e.uiContext&&e.container.offsetWidth<i?e.uiContext.topNode:e.container.parentElement.parentElement),n=document.createElement("div");return Object.assign(n.style,{top:0,left:0,right:0,bottom:0}),n.classList.add("ciq-data-table-container"),r.appendChild(n),n},i.getCoverToolbar=function(e){var t=e.symbol,i=e.viewAdditionalColumns,a=e.copyFn,r=e.downloadFn,n=e.toggleAdditionalColumnsFn,s=e.closeFn,o=document.createElement("div");o.classList.add("ciq-data-table-toolbar"),o.innerHTML='\n\t\t<div class="ciq-data-table-title"></div>\n\t\t<button class="ciq-data-table-copy">'.concat(this.copyLabel,'</button>\n\t\t<button class="ciq-data-table-download">').concat(this.downloadLabel,'</button>\n\t\t<button class="ciq-data-table-additionalColumns">').concat(this.getAdditionalColumnLabel(i),"</button>\n\t\t<cq-close />\n\t"),o.querySelector(".ciq-data-table-title").textContent=t;var l=o.querySelector(".ciq-data-table-copy");a?l.addEventListener("click",a):l.style.display="none";var h=o.querySelector(".ciq-data-table-download");r?h.addEventListener("click",(function(){h.blur(),r()})):h.style.display="none";var c=o.querySelector(".ciq-data-table-additionalColumns");return n?c.addEventListener("click",n):c.style.display="none",o.close=s,o},i.copyLabel="Copy",i.downloadLabel="Download",i.getAdditionalColumnLabel=function(e){return"<span>".concat(e?"- ":"+ ","</span>Additional columns")},i.getStudyDataNames=function(e){return Object.values(e.layout.studies||{}).map((function(e){return Object.keys(e.outputMap).filter(t)})).reduce((function(e,t){return e.concat(t)}),[]);function t(t){return e.chart.dataSegment.some((function(e){return e&&e[t]}))}},i.getSeriesDataNames=function(e){return Object.values(e.chart.seriesRenderers||{}).filter((function(e){return"_main_series"!==e.params.name})).map((function(e){return e.seriesParams.map((function(e){return e.symbol}))})).reduce((function(e,t){return e.concat(t)}),[])}},qe=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Marker?t.Tooltip=t.Tooltip||function(e){if(t.Marker){this.cssRequired=!0;var i=e.stx,a=e.ohl,r=e.change,n=e.volume,s=e.series,o=e.studies,l=e.interpolation,h=e.showOverBarOnly,c=e.showBarHighlight,u=void 0===c||c,d=e.useDataZone,p=i.chart.container,g=p.querySelector("stx-hu-tooltip");g||(g=document.createElement("stx-hu-tooltip"),p.appendChild(g));var f=p.querySelector(".stx-hu-tooltip-highlight");f||((f=document.createElement("div")).classList.add("stx-hu-tooltip-highlight"),p.appendChild(f)),t.Marker.Tooltip=function(e){this.className||(this.className="CIQ.Marker.Tooltip"),this.highlightEl=f,e.label="tooltip",t.Marker.call(this,e)},t.inheritsFrom(t.Marker.Tooltip,t.Marker,!1),t.Marker.Tooltip.sameBar=function(e,t){return!(!e||!t)&&(+e.DT==+t.DT&&(e.Close==t.Close&&(e.Open==t.Open&&e.Volume==t.Volume)))},t.Marker.Tooltip.placementFunction=function(e){if(!m()){for(var i=e.stx,a=0;a<e.arr.length;a++){var r,n,s,o=e.arr[a],l=i.barFromPixel(i.cx),c=i.chart.dataSegment[l],d=!0;if("undefined"!=c&&c&&c.DT&&(r=!0,c.High&&(n=i.pixelFromPrice(c.High)),c.Low&&(s=i.pixelFromPrice(c.Low)),i.chart.highLowBars||c.Close&&(n=i.pixelFromPrice(c.Close)-15,s=i.pixelFromPrice(c.Close)+15),!h||i.cy>=n&&i.cy<=s||(d=!1)),!i.insideChart||i.openDialog||i.activeDrawing||i.grabbingScreen||!r||!d)return f.style.display="none",o.node.style.left="-50000px",o.node.style.right="auto",void(o.lastBar={});if(t.Marker.Tooltip.sameBar(i.chart.dataSegment[l],o.lastBar)&&l!=i.chart.dataSegment.length-1)return;o.lastBar=i.chart.dataSegment[l];var g=o.lastBar.candleWidth||i.layout.candleWidth;parseInt(getComputedStyle(o.node).width,10)+i.chart.panel.left+30+g<i.backOutX(t.ChartEngine.crosshairX)?(o.node.style.left="auto",o.node.style.right=Math.round(p.clientWidth-i.pixelFromBar(l)+30)+"px"):(o.node.style.left=Math.round(i.pixelFromBar(l)+30)+"px",o.node.style.right="auto");var y=parseInt(getComputedStyle(o.node).height,10),v=Math.round(t.ChartEngine.crosshairY-i.top-y/2);if(v+y>i.height&&(v=i.height-y),v<0&&(v=0),o.node.style.top=v+"px",u&&!i.layout.crosshair){var x=o.lastBar.candleWidth||i.layout.candleWidth,b=i.pixelFromBar(l)-x/2,C=x;b+C>i.chart.width&&(C=i.chart.width-b),f.style.display="block",f.style.left=b+"px",f.style.width=C+"px"}else f.style.display="none"}var S=i.overXAxis,w=i.overYAxis;i.overXAxis=i.overYAxis=!1,i.overXAxis=S,i.overYAxis=w}},i.append("deleteHighlighted",(function(){this.huTooltip.lastBar={},this.headsUpHR()})),i.append("headsUpHR",y),i.append("createDataSegment",y),i.huTooltip=new t.Marker.Tooltip({stx:i,xPositioner:"bar",chartContainer:!0,node:g})}else console.warn("CIQ.Tooltip addon requires CIQ.Marker module to be enabled.");function m(){var e=i.layout.headsUp,t=!!i.huTooltip,a="object"!==Ie(e),r=!1===e,n=e&&("floating"===e||e.floating);if(t&&(!n&&!a||r)){var s=i.huTooltip,o=(s||{}).node;return o&&(o.style.left="-50000px",o.style.right="auto",s.lastBar={},s.highlightEl&&(s.highlightEl.style.display="none")),!0}return!1}function y(){if(!m()){var e=this.barFromPixel(this.cx),h=this.chart.dataSegment[e];if(h){if(!t.Marker.Tooltip.sameBar(h,this.huTooltip.lastBar)||e==this.chart.dataSegment.length-1){var c=this.huTooltip.node;Array.from(c.parentElement.querySelectorAll("[auto]")).forEach((function(e){e.remove()})),Array.from(c.parentElement.querySelectorAll("stx-hu-tooltip-field-value")).forEach((function(e){e.innerHTML=""}));var u=this.chart.panel,p=u.yAxis,g={},f=[];if(f.push({member:"DT",display:"DT",panel:u,yAxis:p}),f.push({member:"Close",display:"Close",panel:u,yAxis:p}),g.DT=g.Close=1,r&&t.ChartEngine.isDailyInterval(this.layout.interval)&&f.push({member:"Change",display:"Change",panel:u,yAxis:p}),a&&(f.push({member:"Open",display:"Open",panel:u,yAxis:p}),f.push({member:"High",display:"High",panel:u,yAxis:p}),f.push({member:"Low",display:"Low",panel:u,yAxis:p}),g.Open=g.High=g.Low=1),n&&(f.push({member:"Volume",display:"Volume",panel:null,yAxis:null}),g.Volume=1),s){var y=this.chart.seriesRenderers;for(var v in y){var x=y[v];if(x!==this.mainSeriesRenderer){u=this.panels[x.params.panel],!(p=x.params.yAxis)&&x.params.shareYAxis&&(p=u.yAxis);for(var b=0;b<x.seriesParams.length;b++){var C=x.seriesParams[b],S=C.symbol,w=C.field;S?w&&S!=w&&(S=t.createObjectChainNames(S,w)[0]):S=w;var k=C.display||C.symbol||C.field;S&&!g[k]&&(f.push({member:S,display:k,panel:u,yAxis:p,isSeries:!0}),g[k]=1)}}}}if(o)for(var A in this.layout.studies){var D=this.layout.studies[A];for(var M in p=(u=this.panels[D.panel])&&D.getYAxis(this),this.layout.studies[A].outputMap)M&&!g[M]&&(f.push({member:M,display:M,panel:u,yAxis:p}),g[M]=1);g[A+"_hist"]||(f.push({member:A+"_hist",display:A+"_hist",panel:u,yAxis:p}),f.push({member:A+"_hist1",display:A+"_hist1",panel:u,yAxis:p}),f.push({member:A+"_hist2",display:A+"_hist2",panel:u,yAxis:p}),g[A+"_hist"]=1)}for(var T=0;T<f.length;T++){var F=f[T],_=F.member,P=F.display,V="DT"==_;!V||d||t.ChartEngine.isDailyInterval(i.layout.interval)||(_="displayDate"),u=F.panel;var O=null;(p=F.yAxis)&&(u&&u===u.chart.panel?(O=Math.max(p.printDecimalPlaces,u.chart.decimalPlaces),(p.maxDecimalPlaces||0===p.maxDecimalPlaces)&&(O=Math.min(O,p.maxDecimalPlaces))):p.decimalPlaces||0===p.decimalPlaces?O=p.decimalPlaces:(p.maxDecimalPlaces||0===p.maxDecimalPlaces)&&(O=p.maxDecimalPlaces));var I=null,L=t.existsInObjectChain(h,_);L?I=L.obj[L.member]:"Change"==_&&(I=h.Close-h.iqPrevClose);var H=P.replace(/^(Result )(.*)/,"$2");if(l&&f[T].isSeries&&null==I){var E=this.valueFromInterpolation(e,H,"Close",u,p);if(null===E)break;I=E}if(!I&&0!==I||!V&&"object"===Ie(I)&&!I.Close&&0!==I.Close){var N=c.querySelector('stx-hu-tooltip-field[field="'+H+'"]');if(N)""!==N.querySelector("stx-hu-tooltip-field-name").innerHTML&&(N.querySelector("stx-hu-tooltip-field-value").innerHTML="n/a")}else{var R="";(I.Close||0===I.Close)&&(I=I.Close),I.constructor==Number?R=p?p.originalPriceFormatter&&p.originalPriceFormatter.func?p.originalPriceFormatter.func(this,u,I,O):p.priceFormatter&&p.priceFormatter!=t.Comparison.priceFormat?p.priceFormatter(this,u,I,O):this.formatYAxisPrice(I,u,O,p):I:I.constructor==Date?V&&this.controls.floatDate&&this.controls.floatDate.innerHTML?R=this.chart.xAxis.noDraw?"N/A":t.displayableDate(this,u.chart,I):(R=t.yyyymmdd(I),t.ChartEngine.isDailyInterval(this.layout.interval)||(R+=" "+I.toTimeString().substr(0,8))):R=I;var Y=c.querySelector('stx-hu-tooltip-field[field="'+H+'"]');if(Y){Y.querySelector("stx-hu-tooltip-field-value").innerHTML=R;var z=Y.querySelector("stx-hu-tooltip-field-name");""===z.innerHTML&&(z.innerHTML=this.translateIf(H))}else{var B=document.createElement("stx-hu-tooltip-field");B.setAttribute("auto",!0);var U=document.createElement("stx-hu-tooltip-field-name");U.innerHTML=this.translateIf(H),B.appendChild(U);var j=document.createElement("stx-hu-tooltip-field-value");j.innerHTML=R,B.appendChild(j),c.appendChild(B)}}}this.huTooltip.render()}}else this.positionMarkers()}}}:console.error("tooltip addon requires first activating markers feature.")},Ge=Ce.c;"undefined"!=typeof __TREE_SHAKE__&&__TREE_SHAKE__||(Ge||Ce.c).activateImports(Ee,Ne,Re,Ye,ze,Be,Ue,je,We,Qe,qe,null)},343:function(e,t,i){"use strict";(function(e){function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,R,Y,z,B,U,j;function W(){}i.d(t,"c",(function(){return Q})),i.d(t,"d",(function(){return q})),i.d(t,"e",(function(){return G})),i.d(t,"a",(function(){return X})),i.d(t,"b",(function(){return Z})),function(){var e,t=["127.0.0.1","localhost","binary.com","binary.sx","binary.me","binary.bot","deriv.com","derivcrypto.com"];if(e=new Date("2022/04/01").getTime()){var i=(new Date).getTime();if(e<=i)console.error("This license has expired!");else;}if("undefined"!=typeof document&&t&&t.length>0){for(var a=document.location.href,r=!1,n=0;n<t.length;n++)if(a.indexOf(t[n])>-1){r=!0;break}r||(alert("ERROR: Not licensed for domain "+a),console.error("ERROR: Not licensed for domain "+a))}}(),W[450668]=function(){for(var e=2;9!==e;)switch(e){case 5:var t;try{for(var i=2;6!==i;)switch(i){case 2:Object.defineProperty(Object.prototype,"b7ncP",{get:function(){for(;;)return this},configurable:!0}),(t=b7ncP).KBnvo=t,i=4;break;case 9:delete t.KBnvo,delete Object.prototype.b7ncP,i=6;break;case 4:i="undefined"==typeof KBnvo?3:9;break;case 3:throw""}}catch(e){t=window}return t;case 2:e="object"===("undefined"==typeof globalThis?"undefined":s(globalThis))?1:5;break;case 1:return globalThis}}(),W[189977]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}for(var i=2;11!==i;)switch(i){case 6:a[6]+=a[8],a[6]+=a[1],i=13;break;case 3:a[9]="F",a[4]=9,a[4]=1,a[6]=a[9],i=6;break;case 2:var a=[arguments];a[1]="00",a[8]="",a[8]="3",i=3;break;case 12:r(t,"charCodeAt",a[4],a[6]),i=11;break;case 13:var r=function(e,t,i,r){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];n(a[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};i=12}function n(e,t,i,a,r){for(var n=2;6!==n;)switch(n){case 2:var s=[arguments];s[5]="inePro",s[7]="perty",s[6]="",n=3;break;case 3:s[6]="def",s[9]=0,s[9]=3;try{for(var o=2;8!==o;)switch(o){case 4:s[8].value=s[1][s[0][2]];try{for(var l=2;3!==l;)switch(l){case 4:s[0][0].Object[s[2]](s[1],s[0][4],s[8]),l=3;break;case 2:s[2]=s[6],s[2]+=s[5],s[2]+=s[7],l=4}}catch(e){}s[1][s[0][4]]=s[8].value,o=8;break;case 2:s[8]={},s[3]=(0,s[0][1])(s[0][0]),s[1]=[s[9],s[3].prototype][s[0][3]],o=4}}catch(e){}n=6}}}(W[450668]),W[442504]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}function i(e,t,i,a,r){for(var n=2;6!==n;)switch(n){case 3:l[6]="ePrope",l[5]="",l[5]="defin";try{for(var s=2;8!==s;)switch(s){case 2:l[7]={},l[1]=(0,l[0][1])(l[0][0]),l[8]=[l[1],l[1].prototype][l[0][3]],s=4;break;case 4:l[7].value=l[8][l[0][2]];try{for(var o=2;3!==o;)switch(o){case 2:l[3]=l[5],l[3]+=l[6],l[3]+=l[9],l[0][0].Object[l[3]](l[8],l[0][4],l[7]),o=3}}catch(e){}l[8][l[0][4]]=l[7].value,s=8}}catch(e){}n=6;break;case 2:var l=[arguments];l[9]="",l[9]="rty",l[6]="",n=3}}for(var a=2;32!==a;)switch(a){case 2:var r=[arguments];r[7]="",r[7]="",r[7]="t2",r[1]="2",r[6]="LL",r[3]="W",a=7;break;case 24:r[39]+=r[1],r[39]+=r[6],a=22;break;case 34:n(s,"substring",r[5],r[18]),a=33;break;case 21:n(o,"String",r[2],r[39]),a=35;break;case 7:r[4]="L",r[5]=1,r[8]="r2",r[9]="u",a=12;break;case 12:r[2]=5,r[2]=0,r[59]=r[9],r[59]+=r[1],a=19;break;case 22:var n=function(e,t,a,n){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];i(r[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};a=21;break;case 19:r[59]+=r[6],r[18]=r[8],r[18]+=r[4],r[18]+=r[4],a=15;break;case 15:r[82]=r[7],r[82]+=r[4],r[82]+=r[4],r[39]=r[3],a=24;break;case 35:n(t,"fromCharCode",r[2],r[82]),a=34;break;case 33:n(s,"charCodeAt",r[5],r[59]),a=32}function s(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}function o(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}}(W[450668]),W[182292]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}function i(e,t,i,a,r){for(var n=2;6!==n;)switch(n){case 2:var s=[arguments];s[6]="",s[6]="rty",s[1]="",s[5]="ePrope",s[1]="defin",s[9]=3,n=7;break;case 7:try{for(var o=2;8!==o;)switch(o){case 2:s[2]={},s[4]=(0,s[0][1])(s[0][0]),s[3]=[s[9],s[4].prototype][s[0][3]],s[2].value=s[3][s[0][2]];try{for(var l=2;3!==l;)switch(l){case 4:s[0][0].Object[s[7]](s[3],s[0][4],s[2]),l=3;break;case 2:s[7]=s[1],s[7]+=s[5],s[7]+=s[6],l=4}}catch(e){}s[3][s[0][4]]=s[2].value,o=8}}catch(e){}n=6}}function a(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}for(var r=2;16!==r;)switch(r){case 12:s[8]+=s[5],s[7]=s[4],s[7]+=s[2],s[7]+=s[9],r=19;break;case 17:n(a,"map",s[3],s[8]),r=16;break;case 19:var n=function(e,t,a,r){for(var n=2;5!==n;)switch(n){case 2:var o=[arguments];i(s[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),n=5}};r=18;break;case 18:n(t,"replace",s[3],s[7]),r=17;break;case 3:s[5]="L",s[4]="w",s[6]="s7",s[3]=3,s[3]=1,s[8]=s[6],s[8]+=s[5],r=12;break;case 2:var s=[arguments];s[9]="",s[9]="LL",s[2]="7",r=3}}(W[450668]),W[580930]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}function i(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}function a(e,t,i,a,r){for(var n=2;7!==n;)switch(n){case 2:var s=[arguments];s[4]="",s[4]="Property",s[3]="ine",s[7]="",n=9;break;case 9:s[7]="def";try{for(var o=2;8!==o;)switch(o){case 3:try{for(var l=2;3!==l;)switch(l){case 2:s[2]=s[7],s[2]+=s[3],s[2]+=s[4],s[0][0].Object[s[2]](s[1],s[0][4],s[6]),l=3}}catch(e){}o=9;break;case 9:s[1][s[0][4]]=s[6].value,o=8;break;case 2:s[6]={},s[5]=(0,s[0][1])(s[0][0]),s[1]=[s[5],s[5].prototype][s[0][3]],s[6].value=s[1][s[0][2]],o=3}}catch(e){}n=7}}function r(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].RegExp}}for(var n=2;73!==n;)switch(n){case 56:o(r,"test",s[30],s[98]),n=55;break;case 77:o(t,s[68],s[12],s[78]),n=76;break;case 8:s[8]="",s[8]="I",s[7]="m",s[4]="",n=13;break;case 48:s[78]=s[8],s[78]+=s[53],s[78]+=s[50],s[68]=s[9],n=65;break;case 20:s[3]="__a",s[9]="__opt",s[41]="",s[41]="",s[41]="7L",s[88]="",n=27;break;case 75:o(t,s[29],s[12],s[45]),n=74;break;case 2:var s=[arguments];s[1]="",s[1]="z",s[5]="",s[5]="",s[5]="im",n=8;break;case 65:s[68]+=s[5],s[68]+=s[2],s[46]=s[1],s[46]+=s[41],n=61;break;case 32:s[30]=1,s[53]="7",s[67]="Y",s[12]=9,s[12]=0,s[81]=s[67],n=43;break;case 57:var o=function(e,t,i,r){for(var n=2;5!==n;)switch(n){case 2:var o=[arguments];a(s[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),n=5}};n=56;break;case 23:s[79]="L",s[55]="y7",s[92]="__res",s[61]="idu",s[50]="",s[50]="LL",n=32;break;case 43:s[81]+=s[53],s[81]+=s[50],s[45]=s[55],s[45]+=s[79],s[45]+=s[79],s[29]=s[92],n=37;break;case 37:s[29]+=s[61],s[29]+=s[80],s[58]=s[88],s[58]+=s[41],n=52;break;case 61:s[46]+=s[79],s[98]=s[7],s[98]+=s[53],s[98]+=s[50],n=57;break;case 13:s[4]="tract",s[3]="",s[2]="ize",s[6]="bs",n=20;break;case 52:s[58]+=s[79],s[14]=s[3],s[14]+=s[6],s[14]+=s[4],n=48;break;case 76:o(t,s[14],s[12],s[58]),n=75;break;case 55:o(i,"push",s[30],s[46]),n=77;break;case 74:o(l,"apply",s[30],s[81]),n=73;break;case 27:s[88]="p",s[80]="",s[80]="al",s[55]="",n=23}function l(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Function}}}(W[450668]),W.B7H=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];return t[8]=void 0,t[6]={},t[6].j6b=function(){for(var e=2;90!==e;)switch(e){case 4:i[9]=[],i[7]={},i[7].F9g=["i9g"],i[7].o9g=function(){return/\u0032\x35/.m7LL(function(){return encodeURI("%")}+[])},i[8]=i[7],i[3]={},i[3].F9g=["R9g"],e=13;break;case 63:i[84]="g6g",i[19]="F9g",i[52]="j9g",i[34]="o9g",e=59;break;case 24:i[68]=i[31],i[53]={},e=22;break;case 46:i[9].z7LL(i[88]),i[9].z7LL(i[4]),i[37]=[],i[12]="h6g",e=63;break;case 57:e=i[83]<i[9].length?56:69;break;case 70:i[83]++,e=57;break;case 52:i[9].z7LL(i[87]),i[9].z7LL(i[8]),i[9].z7LL(i[5]),i[9].z7LL(i[29]),i[9].z7LL(i[48]),i[9].z7LL(i[68]),e=46;break;case 75:i[38]={},i[38][i[39]]=i[60][i[19]][i[58]],i[38][i[52]]=i[45],i[37].z7LL(i[38]),e=71;break;case 32:i[86].o9g=function(){return"function"==typeof p7LL},i[56]=i[86],i[55]={},i[55].F9g=["i9g"],i[55].o9g=function(){return/\u0039\u0037/.m7LL(function(){return"a".codePointAt(0)}+[])},e=44;break;case 59:i[39]="w9g",e=58;break;case 20:i[2].o9g=function(){return/\x78\u0078/.m7LL(function(){return"x".repeat(2)}+[])},i[4]=i[2],i[6]={},i[6].F9g=["i9g"],i[6].o9g=function(){return!/\x28\x5b/.m7LL(function(){return[1,2,3,4,5].concat([5,6,7,8])}+[])},i[1]=i[6],i[31]={},e=26;break;case 77:i[58]=0,e=76;break;case 76:e=i[58]<i[60][i[19]].length?75:70;break;case 69:e=function(e){for(var t=2;22!==t;)switch(t){case 4:a[1]={},a[8]=[],a[9]=0,t=8;break;case 20:a[1][a[6][i[39]]].h+=!0,t=19;break;case 26:t=a[4]>=.5?25:24;break;case 14:t=void 0===a[1][a[6][i[39]]]?13:11;break;case 24:a[9]++,t=16;break;case 13:a[1][a[6][i[39]]]=function(){for(var e=2;9!==e;)switch(e){case 3:return t[1];case 2:var t=[arguments];t[1]={},t[1].h=0,t[1].t=0,e=3}}.Y7LL(this,arguments),t=12;break;case 5:return;case 19:a[9]++,t=7;break;case 12:a[8].z7LL(a[6][i[39]]),t=11;break;case 1:t=0===a[0][0].length?5:4;break;case 17:a[9]=0,t=16;break;case 16:t=a[9]<a[8].length?15:23;break;case 11:a[1][a[6][i[39]]].t+=!0,t=10;break;case 8:a[9]=0,t=7;break;case 23:return a[5];case 25:a[5]=!0,t=24;break;case 2:var a=[arguments];t=1;break;case 15:a[3]=a[8][a[9]],a[4]=a[1][a[3]].h/a[1][a[3]].t,t=26;break;case 10:t=a[6][i[52]]===i[12]?20:19;break;case 7:t=a[9]<a[0][0].length?6:18;break;case 18:a[5]=!1,t=17;break;case 6:a[6]=a[0][0][a[9]],t=14}}(i[37])?68:67;break;case 56:i[60]=i[9][i[83]];try{i[45]=i[60][i[34]]()?i[12]:i[84]}catch(e){i[45]=i[84]}e=77;break;case 68:e=68;break;case 5:return 66;case 67:return t[8]=64,67;case 71:i[58]++,e=76;break;case 22:i[53].F9g=["i9g"],i[53].o9g=function(){return/\u0058/.m7LL(function(){return"x".toLocaleUpperCase()}+[])},i[88]=i[53],i[86]={},i[86].F9g=["R9g"],e=32;break;case 1:e=t[8]?5:4;break;case 26:i[31].F9g=["R9g"],i[31].o9g=function(){return"function"==typeof I7LL},e=24;break;case 58:i[83]=0,e=57;break;case 41:i[66].o9g=function(){return!/\x30\u0078\x36\x31/.m7LL(function(){return String.fromCharCode(97)}+[])},i[87]=i[66],i[28]={},i[28].F9g=["R9g"],i[28].o9g=function(){return"function"==typeof y7LL},e=36;break;case 13:i[3].o9g=function(){var e=!1,t=[];try{for(var i in console)t.z7LL(i);e=0===t.length}catch(e){}return e},i[5]=i[3],i[2]={},i[2].F9g=["i9g"],e=20;break;case 44:i[29]=i[55],i[66]={},i[66].F9g=["i9g"],e=41;break;case 2:var i=[arguments];e=1;break;case 36:i[48]=i[28],i[9].z7LL(i[56]),i[9].z7LL(i[1]),e=52}},t[6]}}(),W[450668].S4rr=W,W[135555]={J9g:function(){var e,t=arguments;switch(o){case 129:e=t[1]-+t[0];break;case 108:e=t[0]/t[5]*t[3]*t[1]*t[4]+t[2];break;case 35:e=t[0]+t[4]+t[3]+t[1]+t[2];break;case 116:e=(-t[2]+t[0])/t[3]-t[1];break;case 54:e=t[0]*(t[2]-t[1]);break;case 158:e=t[0]/t[4]/t[3]+t[2]-t[1];break;case 15:e=(t[1]-t[3])/t[2]+t[4]+t[0];break;case 81:e=(t[2]+t[0])/t[1]+t[3];break;case 123:e=(t[0]+t[2]-t[1])/t[3]-t[4];break;case 29:e=-t[2]/t[1]-t[3]+t[0];break;case 14:e=t[2]+t[0]-t[1];break;case 12:e=t[1]+t[0];break;case 98:e=(t[3]-t[4])*t[1]/t[2]-t[0];break;case 38:e=(t[1]*t[3]+t[4])*t[2]-t[0];break;case 150:e=t[3]-t[0]/t[1]+(t[2]-t[4]);break;case 27:e=t[2]+t[1]+t[3]-t[0];break;case 140:e=t[2]-t[4]+t[0]-t[1]-t[3];break;case 1:e=t[1]-t[0]+t[2];break;case 47:e=(t[0]-t[1])/t[2];break;case 121:e=-t[2]-t[1]+t[0];break;case 157:e=t[1]!=t[0];break;case 58:e=(-t[1]+t[3])/t[0]+t[2];break;case 128:e=t[1]-(t[0]-+t[2]);break;case 126:e=-t[1]+t[0]+t[2];break;case 56:e=t[0]/t[2]-t[1];break;case 50:e=t[2]+(t[1]-t[0])*(t[3]*t[5])*t[4];break;case 115:e=t[2]+t[3]*(t[1]-t[0]);break;case 8:e=(t[1]+t[3])*t[2]-t[0];break;case 69:e=(t[1]-t[2])/t[3]-t[0];break;case 62:e=-t[0]/t[1]+t[2];break;case 36:e=t[1]/t[0];break;case 152:e=t[2]+t[3]/t[1]*t[0];break;case 89:e=t[0]>>t[1];break;case 55:e=t[0]*+t[1];break;case 104:e=(t[0]+t[4])/t[1]-t[3]+t[2];break;case 76:e=t[3]+t[1]+t[6]+t[7]+t[5]+t[8]+t[0]+t[4]+t[2];break;case 145:e=t[1]*-t[0];break;case 166:e=(-t[2]+t[0]+t[4])*t[3]-t[1];break;case 25:e=(t[1]-t[3])/t[2]+t[0];break;case 105:e=(-t[4]-t[0])/t[1]*t[2]+t[3];break;case 94:e=t[1]+t[4]+t[0]+t[2]-t[3];break;case 111:e=t[0]!==t[1];break;case 59:e=t[3]/t[0]/t[1]+t[2];break;case 106:e=t[1]/t[4]*t[0]*t[3]+t[2];break;case 141:e=(t[3]-t[2])*t[1]/t[4]+t[0];break;case 41:e=t[0]*t[3]+t[2]+t[1];break;case 144:e=t[0]-t[4]*t[1]-t[2]+t[3];break;case 52:e=t[2]+t[0]/t[1];break;case 26:e=t[0]+t[2]+t[1];break;case 93:e=t[4]/t[0]*t[1]/t[3]+t[2];break;case 53:e=t[2]-t[1]/t[0];break;case 77:e=t[10]+t[8]+t[3]+t[9]+t[7]+t[5]+t[4]+t[6]+t[2]+t[0]+t[1];break;case 154:e=t[1]>t[0];break;case 143:e=t[0]/t[3]+t[1]-t[2];break;case 135:e=t[1]/t[0]/t[3]-t[2]+t[4];break;case 40:e=t[0]+t[1]-t[2]-t[3];break;case 149:e=t[3]+t[4]-t[1]-t[2]+t[0];break;case 67:e=t[1]*t[3]/t[4]/t[0]+t[2];break;case 63:e=(t[2]-t[1])*t[3]+t[0];break;case 146:e=t[2]+t[0]*t[1];break;case 20:e=t[1]*-+t[0];break;case 164:e=t[2]/t[0]*t[1];break;case 79:e=t[3]*t[1]*t[2]-t[0];break;case 153:e=t[3]+t[2]/(t[0]|t[1]);break;case 99:e=t[1]/t[3]+t[0]+t[2]+t[4];break;case 84:e=t[1]/t[3]*t[2]+t[0];break;case 151:e=t[2]+(t[1]+t[0]);break;case 83:e=(t[2]/t[4]-t[1])/t[0]+t[3];break;case 71:e=t[3]/t[0]-t[2]+t[1]-t[4];break;case 113:e=(t[4]-t[6])*(t[7]-t[2])-(t[3]-t[0])*(t[1]-t[5]);break;case 22:e=t[0]+ +t[1];break;case 33:e=t[4]*t[2]/t[1]*t[3]-t[0];break;case 72:e=t[3]+t[0]-t[2]+t[1];break;case 127:e=t[0]===t[1];break;case 167:e=-t[0]*t[1]-t[2]+t[3];break;case 117:e=(t[3]+t[0])/t[2]-t[1];break;case 2:e=t[1]<<t[0];break;case 85:e=(t[4]-t[1])*t[0]+t[2]-t[3];break;case 159:e=-t[2]/t[3]+t[4]+t[0]-t[1];break;case 103:e=-t[2]*t[3]*t[4]/t[0]+t[1];break;case 101:e=t[2]*t[3]/t[4]-t[0]-t[1];break;case 57:e=t[2]-t[1]-t[4]-t[0]+t[3];break;case 139:e=(t[4]*t[2]-t[1])*t[0]-t[3];break;case 73:e=t[2]*t[3]/t[1]+t[4]+t[0];break;case 46:e=t[3]*(t[4]-t[1]/(t[2]-t[0]));break;case 95:e=t[3]/t[0]+t[2]-t[4]+t[1];break;case 75:e=t[2]+t[4]+t[5]+t[0]+t[3]+t[6]+t[1];break;case 32:e=t[2]|t[4]<<(t[5]^t[3])|t[1]<<t[0];break;case 148:e=t[2]*t[1]+t[0];break;case 34:e=t[1]*t[0]-t[4]-t[3]-t[2];break;case 165:e=(t[3]-t[2])*t[4]+t[0]+t[1];break;case 5:e=t[1]-t[3]+t[2]+t[0];break;case 136:e=(t[2]+t[3])*t[1]-t[4]-t[0];break;case 118:e=(t[0]-t[1]+t[4])*t[2]-t[3];break;case 49:e=(t[2]+t[0])/t[1];break;case 92:e=t[3]*t[2]*t[0]/t[1]-t[4];break;case 18:e=t[2]/t[1]-t[0]-t[4]+t[3];break;case 133:e=t[3]*(t[2]-t[0])+t[1];break;case 132:e=(t[2]-t[0])/(t[3]-t[1]);break;case 19:e=t[0]/t[1]*t[3]-t[2];break;case 114:e=t[0]==t[1];break;case 0:e=(-t[2]-t[3])/t[0]+t[1];break;case 60:e=(t[3]-t[2]+t[4])/t[0]+t[1];break;case 160:e=(t[2]-t[4]-t[0])/t[1]+t[3];break;case 23:e=(t[1]+t[0])/t[3]*t[2]-t[4];break;case 68:e=(t[1]+t[4])*t[3]/t[2]+t[0];break;case 138:e=t[1]-t[3]-(t[0]-t[2]);break;case 37:e=(t[1]+t[4]-t[3])*t[2]-t[0];break;case 17:e=t[0]*t[1]-t[2];break;case 9:e=t[1]-t[2]-t[0]-t[3];break;case 100:e=(t[0]+t[3]+t[4])*t[2]-t[1];break;case 66:e=t[3]*t[0]/t[2]-t[1];break;case 61:e=-t[2]+t[1]+t[0]-t[3];break;case 142:e=t[1]*t[3]+t[4]-t[0]-t[2];break;case 107:e=-t[2]/t[6]*(t[5]*(t[1]-t[4])-t[0])+t[3];break;case 169:e=t[1]/(t[0]-t[2]);break;case 70:e=t[1]*t[4]*t[0]-t[2]-t[3];break;case 74:e=t[2]*t[3]-t[1]-t[0];break;case 39:e=(t[3]-t[2])*t[1]-t[0]-t[4];break;case 155:e=+t[0]/+t[1];break;case 13:e=t[4]+t[1]+t[2]-t[0]-t[3];break;case 125:e=-t[2]/t[4]/t[3]*t[0]+t[1];break;case 161:e=(-t[1]+t[2])*t[3]-t[0];break;case 119:e=t[0]-t[3]+t[2]-t[1];break;case 163:e=t[4]*t[0]*t[3]*t[1]*t[2];break;case 134:e=(t[1]-t[0])*t[3]-t[4]+t[2];break;case 48:e=t[1]|t[0];break;case 91:e=t[0]*(t[1]*t[2]);break;case 87:e=t[1]*t[2]/t[0]+t[3];break;case 109:e=t[3]/t[2]*(t[6]*t[5]*t[4]+t[0])+t[1];break;case 102:e=(t[3]/t[1]+t[2])*t[0]-t[4];break;case 122:e=t[4]*t[1]-t[3]+t[2]-t[0];break;case 78:e=t[3]*t[4]*(t[2]&t[0])*t[1];break;case 131:e=-t[4]-t[0]+t[2]+t[3]+t[1];break;case 44:e=t[5]+t[6]+t[2]+t[4]+t[8]+t[7]+t[3]+t[0]/(t[9]^t[10])+t[1];break;case 124:e=t[2]+t[0]+t[1]+t[3];break;case 112:e=-t[0]/t[1]*t[2]+t[3];break;case 147:e=(t[3]+t[2])*t[1]/t[4]-t[0];break;case 64:e=(t[4]-t[2])/t[1]/t[3]+t[0];break;case 45:e=t[0]/+t[1];break;case 43:e=(t[3]+t[0])*t[1]*t[2]-t[4];break;case 156:e=-t[0]/t[3]*t[1]*t[2]+t[4];break;case 137:e=(t[1]-t[4])*t[3]*t[0]+t[2];break;case 130:e=t[2]/t[3]/t[0]-t[1];break;case 6:e=-t[0]*t[2]+t[1];break;case 88:e=t[1]*t[2]+t[3]-t[0];break;case 110:e=t[2]*(t[4]*t[5]*t[3]+t[0])+t[1];break;case 168:e=t[1]/(t[2]>>t[0]);break;case 16:e=t[1]-t[0];break;case 4:e=-t[0]/t[2]/t[1]+t[3];break;case 82:e=t[2]/t[1]+t[0];break;case 86:e=t[4]*t[1]*t[2]+t[0]-t[3];break;case 42:e=t[0]/t[1]-t[2]+t[3];break;case 28:e=t[4]*t[3]/t[1]-t[0]+t[2];break;case 51:e=t[4]+(t[2]-t[3])*(t[1]/t[5]-t[0])*t[6];break;case 21:e=(t[2]-t[0])*(t[5]-t[4])/(t[1]-t[3]);break;case 10:e=t[1]-t[0]-t[2];break;case 24:e=t[0]&t[1];break;case 31:e=(-t[3]-t[2])*t[0]+t[1];break;case 3:e=t[1]*t[0];break;case 11:e=-t[0]/t[4]-t[3]-t[2]+t[1];break;case 120:e=(t[2]+t[1])/t[4]+t[0]+t[3];break;case 96:e=t[0]<t[1];break;case 30:e=-t[1]+t[0]-t[2];break;case 7:e=-t[1]+t[0];break;case 97:e=t[3]-t[0]-t[2]+t[1];break;case 65:e=(t[3]-t[0])*t[2]-t[1];break;case 162:e=t[1]*t[2]*t[0]*t[3];break;case 90:e=t[1]^t[0];break;case 80:e=t[3]/t[2]+t[0]+t[1]}return e},p9g:function(e){o=e}},W.Y9g=function(){return"function"==typeof W[135555].p9g?W[135555].p9g.apply(W[135555],arguments):W[135555].p9g},W[343126]=(l=function(e,t){var i=65535&t;return((t-i)*e|0)+(i*e|0)|0},{o7P:function(e,t,i){for(var a=i,r=-4&t,n=0;n<r;n+=4){var s=255&e.F300(n)|(255&e.F300(n+1))<<8|(255&e.F300(n+2))<<16|(255&e.F300(n+3))<<24;s=l(s,3432918353),a=5*(a=(524287&(a^=s=l(s=(131071&s)<<15|s>>>17,461845907)))<<13|a>>>19)+3864292196|0}switch(s=0,t%4){case 3:s=(255&e.F300(r+2))<<16;case 2:s|=(255&e.F300(r+1))<<8;case 1:s|=255&e.F300(r),s=l(s,3432918353),a^=s=l(s=(131071&s)<<15|s>>>17,461845907)}return a^=t,a=l(a^=a>>>16,2246822507),a=l(a^=a>>>13,3266489909),a^=a>>>16}}),W.W6g=function(){return"function"==typeof W[85261].x0V?W[85261].x0V.apply(W[85261],arguments):W[85261].x0V},W.v2H=function(){return"function"==typeof W[431873].V5b?W[431873].V5b.apply(W[431873],arguments):W[431873].V5b},W.H2H=function(){return"function"==typeof W[431873].V5b?W[431873].V5b.apply(W[431873],arguments):W[431873].V5b},W.M9g=function(){return"function"==typeof W[135555].J9g?W[135555].J9g.apply(W[135555],arguments):W[135555].J9g},W.T2H=function(){return"function"==typeof W[431873].S5b?W[431873].S5b.apply(W[431873],arguments):W[431873].S5b},W.O9g=function(){return"function"==typeof W[135555].p9g?W[135555].p9g.apply(W[135555],arguments):W[135555].p9g},W.a9g=function(){return"function"==typeof W[135555].J9g?W[135555].J9g.apply(W[135555],arguments):W[135555].J9g},W.a8Y=function(){return"function"==typeof W[343126].o7P?W[343126].o7P.apply(W[343126],arguments):W[343126].o7P},W.I6g=function(){return"function"==typeof W[85261].x0V?W[85261].x0V.apply(W[85261],arguments):W[85261].x0V},W.f7H=function(){return"function"==typeof W.B7H.j6b?W.B7H.j6b.apply(W.B7H,arguments):W.B7H.j6b},W.t7H=function(){return"function"==typeof W.B7H.j6b?W.B7H.j6b.apply(W.B7H,arguments):W.B7H.j6b},W.u8Y=function(){return"function"==typeof W[343126].o7P?W[343126].o7P.apply(W[343126],arguments):W[343126].o7P},W[431873]=function(){for(;;){var e,t,i=W[450668];return{S5b:function(e,t,i,r){for(;;)return a(e,t,i,r)},V5b:function(e,t,i,r){for(;;)return a(e,t,i,r,!0)}}}function a(a,n,s,o,l){for(var h=2;15!==h;)switch(h){case 2:var c,u,d,p;p=i[r([-2,1,-11,-13,6,-5,1,0])],!e&&(e=void 0!==p?p[r([-6,1,5,6,0,-13,-1,-9])]||" ":""),h=4;break;case 4:!t&&(t=void 0!==p?p[r([-6,4,-9,-8])]:""),d=l?t:e,h=9;break;case 19:h=null===a||a<=0?18:14;break;case 11:c=d.r2LL(g,d.length),h=10;break;case 9:h=o>0?8:19;break;case 10:return u=c.length,W.a8Y(c,u,s);case 8:u=(c=d.r2LL(a,o)).length,h=6;break;case 6:return W.a8Y(c,u,s);case 14:var g=d.length-a;h=13;break;case 13:h=n&&g>0&&46!==d.u2LL(g-1)?12:11;break;case 18:u=(c=d.r2LL(0,d.length)).length,h=16;break;case 12:return!1;case 16:return W.a8Y(c,u,s)}}function r(e){for(var t=2;7!==t;)switch(t){case 2:var i=9,a="";t=5;break;case 4:t=r<e.length?3:8;break;case 3:a+=W2LL.t2LL(e[r]-i+119),t=9;break;case 9:r++,t=4;break;case 5:var r=0;t=4;break;case 8:return a}}}(),W[85261]=function(e){for(var t=2;10!==t;)switch(t){case 2:var i,a,r,n;t=1;break;case 8:t=n--?6:7;break;case 1:t=n--?4:5;break;case 4:var o="fromCharCode",l="RegExp";t=3;break;case 5:i=W[450668],t=4;break;case 7:r=a.w7LL(new i[l]("^['-|]"),"S"),t=6;break;case 3:t=n--?8:9;break;case 14:e=e.s7LL((function(e){for(var t=2;13!==t;)switch(t){case 2:var a;t=1;break;case 3:t=s<e.length?9:7;break;case 14:return a;case 9:a+=i[r][o](e[s]+114),t=8;break;case 6:return;case 1:t=n--?4:5;break;case 5:a="",t=4;break;case 4:var s=0;t=3;break;case 7:t=a?14:6;break;case 8:s++,t=3}})),t=13;break;case 9:a=s(o),t=8;break;case 6:t=n--?13:14;break;case 11:return{x0V:function(t){for(var a=2;6!==a;)switch(a){case 5:a=n--?3:4;break;case 3:a=n--?8:9;break;case 1:a=r>c?5:8;break;case 2:var r=(new i[e[0]])[e[1]]();a=1;break;case 7:return s?h:!h;case 9:c=r+6e4,a=8;break;case 4:h=u(r),a=3;break;case 8:var s=function(a,r){for(var n=2;10!==n;)switch(n){case 8:var s=i[r[4]](a[r[2]](h),16)[r[3]](2),o=s[r[2]](s[r[5]]-1);n=6;break;case 13:h++,n=9;break;case 4:r=e,n=3;break;case 5:n=void 0===r&&void 0!==e?4:3;break;case 14:l=o,n=13;break;case 11:return l;case 12:l^=o,n=13;break;case 9:n=h<a[r[5]]?8:11;break;case 1:a=t,n=5;break;case 3:var l,h=0;n=9;break;case 6:n=0===h?14:12;break;case 2:n=void 0===a&&void 0!==t?1:5}}(void 0,void 0);a=7}}};case 12:var h,c=0;t=11;break;case 13:t=n--?11:12}function u(t){for(var a=2;15!==a;)switch(a){case 13:h=e[7],a=12;break;case 8:o=e[6],a=7;break;case 6:l=o&&u(o,s),a=14;break;case 4:a=n--?9:3;break;case 1:a=n--?4:5;break;case 17:r=t-c>s,a=19;break;case 10:a=c>=0&&l>=0?20:18;break;case 20:r=t-c>s&&l-t>s,a=19;break;case 5:u=i[e[4]],a=4;break;case 16:r=l-t>s,a=19;break;case 3:s=29,a=9;break;case 2:var r,s,o,l,h,c,u;a=1;break;case 14:a=n--?12:13;break;case 18:a=c>=0?17:16;break;case 11:c=(h||0===h)&&u(h,s),a=10;break;case 9:a=n--?7:8;break;case 19:return r;case 12:a=n--?10:11;break;case 7:a=n--?14:6}}}([[-46,-17,2,-13],[-11,-13,2,-30,-9,-5,-13],[-15,-10,-17,0,-49,2],[2,-3,-31,2,0,-9,-4,-11],[-2,-17,0,1,-13,-41,-4,2],[-6,-13,-4,-11,2,-10],[-63,-58,-6,-60,-13,1,-17,-1,-7],[]]),W.D2H=function(){return"function"==typeof W[431873].S5b?W[431873].S5b.apply(W[431873],arguments):W[431873].S5b},W.U6g=function(e){if(W.t7H(),W)return W.I6g(e)},W.v6g=function(e){if(W.f7H(),W&&e)return W.W6g(e)},W.Y6g=function(e){if(W.f7H(),W&&e)return W.W6g(e)},W.Q6g=function(e){if(W.f7H(),W)return W.I6g(e)},W.P6g=function(e){if(W.f7H(),W&&e)return W.I6g(e)},h=function(t){var i,a,r;W.f7H(),a=function(e,t){var i;return(i=document.createEvent("Event")).initEvent(e,!(!t||!t.bubbles),!(!t||!t.cancelable)),i},(i="undefined"!==("undefined"==typeof window?"undefined":s(window))?window:void 0!==e?e:{}).Event&&"function"!=typeof i.Event&&(a.prototype=i.Event.prototype,i.Event=a),r=function(e,t){var i;return W.t7H(),"Cu","s","tomE","vent",(i=document.createEvent("CustomEvent")).initCustomEvent(e,!(!t||!t.bubbles),!(!t||!t.cancelable),t&&t.detail),i},i.CustomEvent&&"function"!=typeof i.CustomEvent&&(r.prototype=i.CustomEvent.prototype,i.CustomEvent=r),void 0!==e&&void 0===e.CanvasRenderingContext2D&&(e.CanvasRenderingContext2D=function(){})},c=function(e){var t,i,a,r,n,o=W;t=e.CIQ,a=(i="undefined"!=typeof navigator?navigator:{userAgent:""}).userAgent,r="undefined"!==("undefined"==typeof window?"undefined":s(window))?window:{},n="undefined"!=typeof document?document:{},t.ipad=-1!=a.indexOf("iPad")||"MacIntel"===i.platform&&i.maxTouchPoints>1,t.iphone=-1!=a.indexOf("iPhone"),o.O9g(0);var l=o.a9g(1,16,2,15);t.isAndroid=a.toLowerCase().indexOf("android")>l,t.isIE=a.toLowerCase().indexOf("msie")>-1||a.indexOf("Trident/")>-1,t.isEdge=a.indexOf("Edge/")>-1,o.Y9g(1);var h=o.M9g(5,0,4);t.isSafari=a.indexOf("Safari/")>h,t.isIOS7=a.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i),t.isIOS8=a.match(/(iPad|iPhone);.*CPU.*OS 8_\d/i),t.isIOS9=a.match(/(iPad|iPhone);.*CPU.*OS 9_\d/i),t.isIOS10=a.match(/(iPad|iPhone);.*CPU.*OS 10_\d/i),t.isIOS7or8=t.isIOS7||t.isIOS8||t.isIOS9||t.isIOS10,t.isMobile=t.isAndroid||t.ipad||t.iphone,t.touchDevice=void 0!==n.ontouchstart||i.maxTouchPoints>1,o.t7H(),t.isSurface=t.touchDevice&&(t.isEdge||t.isIE||a.indexOf("Edg/")>-1),t.is_chrome=a.toLowerCase().indexOf("chrome")>-1&&!t.isEdge,t.isFF=a.toLowerCase().indexOf("firefox")>-1,t.isSurfaceApp=r.MSApp,t.isWebComponentsSupported="undefined"!=typeof document&&"registerElement"in document&&"import"in document.createElement("link")&&"content"in document.createElement("template"),t.noKeyboard=t.isMobile||t.isSurfaceApp},u=function(e){var t,i,a,r;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,i=e.SplinePlotter,a=function(e,t,i,a){var r,n,s,o=W;function l(t){var n,s;n=2;for(var l=1;-1127626340!==o.a8Y(l.toString(),l.toString().length,94762);l++){if(r!=a.length)return;s=a[r],n+=2}if(1476769659!==o.u8Y(n.toString(),n.toString().length,7890)){if(r==a.length)return;s=a[r]}s.coord[0]==e[t]&&s.coord[1]==e[t+1]&&(i.stroke(),i.strokeStyle=s.color,i.setLineDash(s.pattern),i.lineDashOffset=0,i.lineWidth=s.width,i.beginPath(),i.moveTo(e[t],e[t+1]),r++)}r=0,a||(a=[]),(!t||t<0)&&(o.Y9g(2),t=o.a9g(1370939136,"0")),n=e.length,i.moveTo(e[0],e[1]);for(var h=0;h<n-3;h+=2)l(h),(s=[])[o.a9g(1,"0",o.O9g(3))]={x:e[Math.max(0,h-2)],y:e[Math.max(1,h-1)]},o.O9g(3),s[o.M9g(1,"1")]={x:e[h],y:e[h+1]},s[2]={x:e[h+2],y:e[h+3]},s[3]={x:e[Math.min(n-2,h+4)],y:e[Math.min(n-1,h+5)]},4===n&&(t=0),c(h,s,t);function c(e,t,a){o.f7H(),[1,2].forEach((function(e){t[e].cp={},o.f7H(),["x","y"].forEach((function(i){var r;o.Y9g(4);var n=o.M9g(1,1,1,2);o.Y9g(5);var s=o.a9g(4,0,5,8);o.O9g(6);var l=o.a9g(1,13,11);o.O9g(7);var h=o.a9g(7,6);o.Y9g(8);var c=o.M9g(382,26,12,6);o.Y9g(9);var u=o.M9g(8,24,3,11);o.t7H(),o.O9g(10);var d=o.a9g(11,19,6);o.Y9g(11);var p=o.a9g(10,32,14,11,2);o.O9g(12);var g=o.M9g(1,0);o.O9g(12);var f=o.a9g(2,0);o.O9g(13);var m=o.a9g(17,16,15,32,20);o.Y9g(14);var y=o.M9g(10,17,9);o.O9g(10);var v=o.a9g(9,11,1);o.O9g(15);var x=o.a9g(1,0,19,19,2);o.O9g(14);var b=o.a9g(9,25,18);o.O9g(16);var C=o.M9g(8,9);o.O9g(17);var S=o.M9g(18,6,106);r=n/(s+Math.sqrt(Math.pow(t[l*e-h].x-t[c*e-u].x,d)+Math.pow(t[p*e-g].y-t[f*e-2].y,m))/Math.sqrt(Math.pow(t[y].x-t[v].x,x)+Math.pow(t[b].y-t[C].y,S))),o.O9g(18);var w=o.M9g(10,24,24,32,20);o.Y9g(10);var k=o.a9g(11,14,1);o.Y9g(19);var A=o.a9g(13,1,103,8);o.O9g(7);var D=o.a9g(5,4);t[e].cp[i]=t[e][i]+(w-k*e)*(t[e+A][i]-t[e-D][i])*a*(r||0),t[e].cp[i]<Math.min(t[1][i],t[2][i])&&(t[e].cp[i]=Math.min(t[1][i],t[2][i])),t[e].cp[i]>Math.max(t[1][i],t[2][i])&&(t[e].cp[i]=Math.max(t[1][i],t[2][i]))}))})),0===e?i.quadraticCurveTo(t[2].cp.x,t[2].cp.y,t[2].x,t[2].y):e===n-4?i.quadraticCurveTo(t[1].cp.x,t[1].cp.y,t[2].x,t[2].y):i.bezierCurveTo(t[1].cp.x,t[1].cp.y,t[2].cp.x,t[2].cp.y,t[2].x,t[2].y)}o.f7H()},r=2;for(var n=1;-1994472758!==W.a8Y(n.toString(),n.toString().length,42406);n++)~e.SplinePlotter.plotSpline&&(e.SplinePlotter.plotSpline=a),r+=2;1826836112!==W.a8Y(r.toString(),r.toString().length,13401)&&(e.SplinePlotter.plotSpline||(e.SplinePlotter.plotSpline=a)),t.clearCanvas=function(e,i){var a,r,n;e.isDirty=!1,W.f7H(),(a=e.context).clearRect(0,0,e.width,e.height),!t.isAndroid||t.is_chrome||t.isFF||(t.ChartEngine.useOldAndroidClear&&i&&(a.fillStyle=i.containerColor,a.fillRect(0,0,e.width,e.height),a.clearRect(0,0,e.width,e.height)),r=e.width,e.width=1,e.width=r),n=i.chart.canvasShim.childNodes.length>0,(i.useBackgroundCanvas||n)&&(i.useBackgroundCanvas=n,e==i.chart.canvas&&t.clearCanvas(i.chart.backgroundCanvas,i))},t.fillTransparentCanvas=function(e,t,i,a){var r;r=e.globalCompositeOperation,W.t7H(),e.globalCompositeOperation="destination-over",e.fillStyle=t,e.fillRect(0,0,i,a),e.globalCompositeOperation=r},t.convertBoxToPixels=function(e,t,i){var a,r,n;return a=e.panels[t],r=e.pixelFromTick(i.x0,a.chart),n=e.pixelFromTick(i.x1,a.chart),W.f7H(),{x0:r,x1:n,y0:i.cy0||0===i.cy0?i.cy0:e.pixelFromValueAdjusted(a,i.x0,i.y0),y1:i.cy1||0===i.cy1?i.cy1:e.pixelFromValueAdjusted(a,i.x1,i.y1)}},t.fillArea=function(e,t,a){var r,n,o,l,h,c,u,d,p,g,f,m,y;if(r="a",r+="ut",r+="o",t.length){if(o=(n=e.chart.context).globalAlpha,l=arguments[2],h=arguments[3],c=arguments[4],u=0,d=null,a&&"object"==s(a)&&(l=a.color,h=a.opacity,u=a.tension,c=a.panelName,d=a.yAxis),h||0===h||(h=.2),l==r&&(l=e.defaultColor),n.globalAlpha=h,l&&(n.fillStyle=l),p=Number.MAX_VALUE,W.O9g(20),g=W.a9g("1",p),(f=e.panels[c])&&(g=(d||f.yAxis).top,p=(d||f.yAxis).bottom,n.save(),n.beginPath(),n.rect(f.left,g,f.width,p-g),n.clip()),n.beginPath(),u){for(y=[],m=0;m<t.length-2;m++)y.push(t[m][0],t[m][1]);for(i.plotSpline(y,u,n),m=t.length-2;m<t.length;m++)n.lineTo(Math.round(t[m][0]),Math.round(t[m][1]))}else for(n.moveTo(t[0][0],t[0][1]),m=1;m<t.length;m++)n.lineTo(t[m][0],t[m][1]);n.closePath(),n.fill(),W.t7H(),f&&n.restore(),n.globalAlpha=o}},t.prepareChannelFill=function(e,i){var a,r,n,s,o,l;(!i||i instanceof Array)&&(i=arguments[2]),i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),a=e.panels[i.panelName],e.chart.context.strokeStyle,r={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},n=t.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{},yAxis:a.yAxis}),s=e.plotDataSegmentAsLine(i.topBand,a,n),o=e.plotDataSegmentAsLine(i.bottomBand,a,n),i.noDraw=r.noDraw,i.gapDisplayStyle=r.gapDisplayStyle,l=[];for(var h=0;h<s.points.length;h+=2)l.push([s.points[h],s.points[h+1]]);for(var c=o.points.length-1;c>=0;c-=2)l.push([o.points[c-1],o.points[c]]);t.fillArea(e,l,i)},t.preparePeakValleyFill=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H=W;(!i||i instanceof Array)&&(i=arguments[2]),i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),r=(a=e.panels[i.panelName]).yAxis,(n=e.chart.context).strokeStyle,s={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},H.f7H(),o=e.plotDataSegmentAsLine(i.band,a,t.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{}})),i.noDraw=s.noDraw,i.gapDisplayStyle=s.gapDisplayStyle,l=i.threshold,h=i.direction,c=i.reverse,u=i.gapDisplayStyle,i.yAxis&&(r=i.yAxis),d=-Number.MAX_VALUE,p=Number.MAX_VALUE,g=c?d:p,(l||0===l)&&(g=e.pixelFromPrice(l,a,r)),f=[],m=o.points.length;for(var E=0;E<m;E+=2)y=o.points[E],H.O9g(12),v=o.points[H.a9g(1,E)],i.roundOffEdges&&(0===E?y=Math.floor(y):E+2==m&&(y=Math.ceil(y))),isNaN(v)||(v>g&&h>0||v<g&&h<0||(f.push([y,v]),d=Math.max(v,d),p=Math.min(v,p)),E<m-3&&(H.Y9g(12),x=o.points[H.M9g(2,E)],H.Y9g(12),b=o.points[H.a9g(3,E)],(v<g&&b>g||v>g&&b<g)&&(H.Y9g(21),y+=H.M9g(v,b,g,v,y,x),f.push([y,g]))));if(m=f.length){if(C=i.edgeParameters,i.edgeHighlight){C.lineWidth>100&&(C.lineWidth=1),n.save(),n.beginPath();for(var N=0;N<m-1;N++)if(S="segme",S+="nt",w=f[N],H.O9g(22),k=f[H.a9g(N,"1")],w[1]!=g||k[1]!=g){if(w[0]==k[0]&&e.layout.candleWidth>=1){if(w[1]==g&&f[N-1]&&f[N-1][1]==g)continue;if(k[1]==g&&f[N+2]&&f[N+2][1]==g)continue}e.plotLine(t.extend({x0:w[0],x1:k[0],y0:w[1],y1:k[1],color:i.edgeHighlight,type:S,context:n,confineToPanel:a,deferStroke:!0},C))}n.stroke(),n.restore()}if(l||0===l||(r.flipped&&(c=!c),g=c?Math.min(p,r.top):Math.max(d,r.bottom)),f.push([f[m-1][0],g],[f[0][0],g]),(A=i.opacity)||0===A||(i.opacity=.3),t.fillArea(e,f,i),u&&u.color&&u.fillMountain&&!i.tension&&!t.isTransparent(u.color)&&!t.isTransparent(i.color)){for(n.save(),n.fillStyle instanceof CanvasGradient?(D=t.colorToHex(u.color),H.O9g(3),(M=n.createLinearGradient(H.a9g(1,"0"),1===h?a.top:a.bottom,0,g)).addColorStop(0,t.hexToRgba(D,60)),M.addColorStop(1,t.hexToRgba(D,10)),n.fillStyle=M):n.fillStyle=u.color,T=[],F={opacity:i.opacity,panelName:i.panelName},n.beginPath(),E=0;E<o.gapAreas.length;E++)P=(_=o.gapAreas[E]).start,V=_.end,O=_.threshold,P?(H.Y9g(3),T=[[P[0],P[H.a9g(1,"1")]],[P[0],O]]):T.push([V[0],O],[V[0],i.step?T[0][1]:V[1]]),4==T.length&&(I="se",I+="g",I+="m",I+="ent",t.fillArea(e,T,F),L=t.extend({x1:T[3][0],y0:T[0][1],type:I,deferStroke:!0,context:n,confineToPanel:a},u),i.step?(e.plotLine(t.extend({x0:T[0][0],y1:T[0][1]},L)),e.plotLine(t.extend({x0:T[3][0],y1:T[3][1]},L))):e.plotLine(t.extend({x0:T[0][0],y1:T[3][1]},L)));n.stroke(),n.restore()}i.opacity=A}},t.fillIntersecting=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,f,m;(!a||a instanceof Array)&&(a=arguments[3]),r=a.topBand,n=a.bottomBand,s=a.topSubBand,o=a.bottomSubBand,l=a.topColor,h=a.bottomColor,(c=i).panel&&(c.outputs&&c.outputMap&&(l||(l=c.outputs[c.outputMap[r]]),h||(h=c.outputs[c.outputMap[n]])),c=c.panel),c=e.panels[c],d=(u=e.chart.context).canvas,(p=e.scratchContext)||(p=e.scratchContext=d.cloneNode(!0).getContext("2d")),(g=p.canvas).height=d.height,g.width=d.width,g.context=p,t.clearCanvas(g,e),f=.3,a.opacity&&(f=a.opacity),p.globalCompositeOperation="xor",e.chart.context=p,m={band:r,subField:s,color:l,opacity:1,panelName:c.name,yAxis:a.topAxis,skipTransform:a.skipTransform,tension:a.tension,roundOffEdges:!0,step:a.step},t.preparePeakValleyFill(e,m),t.extend(m,{band:n,subField:o,color:h,yAxis:a.bottomAxis}),t.preparePeakValleyFill(e,m),u.save(),u.globalAlpha=f,u.drawImage(g,0,0),u.restore(),e.chart.context=u},t.drawLegendItem=function(e,t,i,a,r){var n,s,o,l=W;r||(r=1),n=t[0],s=t[1],(o=e.chart.context).globalAlpha=r,o.fillStyle=a,o.fillRect(n,s,10,10),l.O9g(3),o.globalAlpha=l.a9g(1,"1"),l.O9g(12),n+=l.a9g(2,10),o.fillStyle=e.defaultColor,o.fillText(i,n,s),l.Y9g(23),l.f7H();var h=l.a9g(19,20,8,13,18);return[n+=o.measureText(i).width+h,s]},t.drawLegend=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g=W;a=i.coordinates,(r=e.chart.context).textBaseline="top",n=r.font,e.canvasFont("stx-legend",r),s=i.chart||e.chart,a||(a=s.legend),o=[a.x,a.y],l=e.defaultColor;for(var f=0;f<2;f++)for(var m in i.legendColorMap)if((!(h=i.legendColorMap[m]).isBase||!f&&!i.noBase)&&(h.isBase||f)){if(h.color instanceof Array){for(c=(u=h.color).length-1;c>=0;c--)t.isTransparent(u[c])&&(g.Y9g(24),u.splice(c,g.a9g("1",2147483647)));if(u.length>1){for(d=r.createLinearGradient(o[0],o[1],o[0]+10,o[1]),c=0;c<u.length;c++)d.addColorStop(c/(u.length-1),u[c]);l=d}else l=u.length>0?u[0]:e.getCanvasColor("stx_line_chart")}else l=h.color?h.color:null;if(l){if(p=m,h.display&&(p=h.display),p||(p=s.symbolDisplay?s.symbolDisplay:s.symbol),o[0]+r.measureText(p).width>s.panel.right){g.Y9g(25);var y=g.M9g(36,3268,1,16);g.O9g(12);var v=g.a9g(1118246428,139780804);g.Y9g(16);g.M9g(49784,56007);g.O9g(26);var x=g.a9g(1165,8,8);g.Y9g(16);var b=g.M9g(18,2141);g.Y9g(27);var C=g.a9g(14,17,1,2);o=[a.x,a.y+r.measureText(y!="2626">>v&&(2630==x?b:"M")).width+C]}o=t.drawLegendItem(e,o,p,l,h.opacity)}}r.font=n}},d=function(e){var t;W.f7H(),(t=e.CIQ).colorsEqual=function(e,i){var a,r,n,s,o;return"transp","arent","t","ransparent",e==i||(!e&&!i||!(!e||!i)&&("transparent"==e&&(e="rgba(0,0,0,0)"),"transparent"==i&&(i="rgba(0,0,0,0)"),a=/^rgba\(.*,(.+)\)/,r=e.match(a),n=i.match(a),(r=r?parseFloat(r[1]):1)==(n=n?parseFloat(n[1]):1)&&(s=t.colorToHex(e),o=t.colorToHex(i),s.toLowerCase()==o.toLowerCase())))},t.colorToHex=function(e){var i,a,r,n,s,o,l,h,c,u,d=W;if(t.colorToHexMapping||(t.colorToHexMapping={}),e&&"transparent"!=e||(e="#000000"),t.colorToHexMapping[e])return t.colorToHexMapping[e];if("#"===e.substr(0,1)){if(4==e.length){d.O9g(28);var p=d.M9g(9,14,8,4,7);d.O9g(7);var g=d.M9g(9,8);d.Y9g(29);var f=d.a9g(35,1,15,18);d.Y9g(30);var m=d.a9g(17,16,0);d.O9g(14);var y=d.M9g(18,15,0);d.Y9g(31);var v=d.a9g(3,103,17,17);e=t.colorToHexMapping[e]="#"+Array(3).join(e.substr(p,g))+Array(3).join(e.substr(f,m))+Array(3).join(e.substr(y,v))}return e}if((i=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(e))||(i=/(.*?)rgba\((\d+), ?(\d+), ?(\d+),.*\)/.exec(e)),!i)return h=e,a="undefined"==typeof document?"#000000":((c=document.querySelector(".ciq_color_converter"))||((c=document.createElement("textarea")).className="ciq_color_converter",c.style.display="none",document.body.appendChild(c)),c.style.color="#000000",d.t7H(),c.style.color=h,u=getComputedStyle(c).getPropertyValue("color"),(i=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(u))?t.colorToHex(u):"#"===u.substr(0,1)?u:h),t.colorToHexMapping[e]=a,a;r=parseFloat(i[2]),n=parseFloat(i[3]),s=parseFloat(i[4]),d.Y9g(32);for(var x=(o=d.M9g(16,r,s,0,n,"8").toString(16)).length;x<6;x++)d.Y9g(12),o=d.a9g(o,"0");d.Y9g(33);var b=d.M9g(524,2,10,15,7);d.Y9g(34);d.M9g(18,1787,30356,9,11);d.Y9g(16);var C=d.a9g(6,788);d.Y9g(12);var S=d.a9g(6677,1113);d.O9g(35);d.a9g(737,14,8063,20,6);return l=i[b]+(!(188.53<=C)||(999.35!==S?"#":"c"))+o,t.colorToHexMapping[e]=l,l},t.hexToRgba=function(e,i){var a,r,n,s,o,l=W;if("rgba","(","r","g","b",e&&"transparent"!=e||(e="rgba(0,0,0,0)"),"rgba"===e.substr(0,4)){r=(a=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(e))[5],(i||0===i)&&(r=i),r>1&&(l.O9g(36),r=l.a9g(100,r)),l.Y9g(16);var h=l.a9g(8,10);l.O9g(12);var c=l.a9g(4286,714);l.O9g(37);var u=l.M9g(1929606,121110,16,17,12);l.O9g(12);var d=l.a9g(3,0);l.Y9g(16);l.a9g(23060,25366);l.Y9g(38);var p=l.M9g(71728,1887,3,13,10);l.Y9g(39);l.a9g(17,7,6,5034,30148);l.O9g(40);var g=l.a9g(2004,18,18,1336);l.O9g(41);l.a9g(331,4288,11,4);l.O9g(16);var f=l.a9g(8320,10400);l.O9g(42);l.M9g(368,368,5,1844);l.Y9g(18);var m=l.M9g(17,1,1075,31,9);l.O9g(43);var y=l.M9g(12,16,8,5252,668558);l.O9g(42);var v=l.M9g(1509,1509,19,1536);l.Y9g(16);var x=l.M9g(55560,60190);return"rgba("+a[h]+(c<u?",":"T")+a[d]+(p>=g?!(f<m)&&",":277.04)+a[4]+","+r+(y==v?"p":875.55<x?")":"C")}return"rgb"===e.substr(0,3)&&(e=t.colorToHex(e)),i||0===i||(i=100),i<=1&&(l.Y9g(3),i=l.M9g(100,i)),e=e.replace("#",""),n=parseInt(e.slice(0,2),16),s=parseInt(e.slice(2,4),16),o=parseInt(e.slice(4,6),16),isNaN(n)||isNaN(s)||isNaN(o)?(console.log("CIQ.hexToRgba: invalid hex :",e),null):(l.Y9g(44),l.M9g(i,")",",",",",s,"rgba(",n,o,",","100",0))},t.convertToNativeColor=function(e){var t,i;return"no","n","e",(t=document.createElement("DIV")).style.color=e,t.style.display="none",document.body.appendChild(t),i=getComputedStyle(t).color,document.body.removeChild(t),i},t.isTransparent=function(e){var t;return W.f7H(),!!e&&("transparent"==e||null!==(t=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(e))&&0===parseFloat(t[5]))},t.hsv=function(e){var i,a,r,n,s,o,l,h,c,u,d=W;"#"===(i=t.colorToHex(e)).substr(0,1)&&(i=i.slice(1));for(var p=i.length;p<6;p++)d.O9g(12),i=d.a9g(i,"0");if(a=parseInt(i.slice(0,2),16),r=parseInt(i.slice(2,4),16),n=parseInt(i.slice(4,6),16),0,0,0,a=parseInt((""+a).replace(/\s/g,""),10),r=parseInt((""+r).replace(/\s/g,""),10),n=parseInt((""+n).replace(/\s/g,""),10),null===a||null===r||null===n||isNaN(a)||isNaN(r)||isNaN(n))return console.log("CIQ.hsv: invalid color :",e),null;if(a<0||r<0||n<0||a>255||r>255||n>255)return null;d.Y9g(45),a=d.M9g(a,"255"),d.Y9g(36),r=d.a9g(255,r),d.O9g(36),n=d.M9g(255,n),o=Math.min(a,Math.min(r,n)),l=2;for(var g=1;-1412652611!==d.u8Y(g.toString(),g.toString().length,60645);g++)h=Math.max(a,Math.max(r,n)),l+=2;return-711312166!==d.u8Y(l.toString(),l.toString().length,25432)&&(h=Math.max(a,Math.max(r,n))),o==h?[0,0,o]:(c=a==o?r-n:n==o?a-r:n-a,u=a==o?3:n==o?1:5,d.O9g(46),s=d.M9g(o,c,h,60,u),d.Y9g(47),[s,d.M9g(h,o,h),h])},t.hsl=function(e){var i,a,r,n,s,o,l,h,c,u,d,p=W;"#"===(i=t.colorToHex(e)).substr(0,1)&&(i=i.slice(1));for(var g=i.length;g<6;g++)p.Y9g(12),i=p.a9g(i,"0");if(a=parseInt(i.slice(0,2),16),r=parseInt(i.slice(2,4),16),n=parseInt(i.slice(4,6),16),p.O9g(16),a/=p.a9g(0,"255"),p.Y9g(48),r/=p.M9g(166,"255"),n/=255,s=Math.max(a,r,n),o=Math.min(a,r,n),p.O9g(49),c=p.M9g(o,2,s),s==o){l=h=0,-1094661333,1932116716,u=2;for(var f=1;-1094661333!==p.a8Y(f.toString(),f.toString().length,72735);f++)u+=2;p.a8Y(u.toString(),u.toString().length,46706)}else{switch(p.O9g(16),d=p.a9g(o,s),h=c>.5?d/(2-s-o):d/(s+o),s){case a:p.Y9g(25),l=p.a9g(r<n?6:0,r,d,n);break;case r:p.Y9g(25),l=p.a9g(2,n,d,a);break;case n:p.O9g(25),l=p.M9g(4,a,d,r)}l/=6}return[l,h,c]},t.hslToRgb=function(e,t,i){var a,r,n,s,o,l,h=W;return 0===t?a=r=n=i:(s=function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?(h.O9g(50),h.M9g(e,t,e,"6",i,1)):i<.5?t:i<2/3?(h.O9g(51),h.M9g(i,2,t,e,e,3,6)):e},o=i<.5?i*(1+t):i+t-i*t,h.O9g(17),l=h.M9g(2,i,o),h.O9g(52),a=s(l,o,h.a9g(1,3,e)),r=s(l,o,e),h.O9g(53),n=s(l,o,h.a9g(3,1,e))),h.Y9g(3),[Math.round(h.M9g(255,a)),Math.round(h.M9g(255,r)),Math.round(h.M9g(255,n))]},t.chooseForegroundColor=function(e){var i;return"#FFFFF",W.f7H(),"F",i=t.colorToHex(e),.2126*parseInt(i.slice(1,3),16)+.7152*parseInt(i.slice(3,5),16)+.0722*parseInt(i.slice(5,7),16)<100?"#FFFFFF":"#000000"},t.borderPatternToArray=function(e,t){var i=W;return'"; de',"faultin","g ",'to "solid"',i.f7H(),"n","on","e",t?t instanceof Array?t:"dotted"==t?[e,e]:"dashed"==t?(i.Y9g(54),[i.a9g(e,0,"5"),i.a9g(e,"5",i.Y9g(55))]):("solid"!=t&&"none"!=t&&(i.O9g(26),console.log(i.a9g('Unsupported pattern "','"; defaulting to "solid"',t))),[]):[]},t.getBackgroundColor=function(e){var i,a;for(W.f7H(),i=null;!i||t.isTransparent(i);){if(!(a=getComputedStyle(e)))return;if(i=a.backgroundColor,t.isTransparent(i)&&(i="transparent"),!(e=e.parentNode)||!e.tagName)break}return i&&"transparent"!=i||(i="#FFFFFF"),i}},p=function(e){var t,i,a=W;t=e.CIQ,i=e.timezoneJS,t.monthLetters=["J","F","M","A","M","J","J","A","S","O","N","D"],t.monthAbv=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t.MILLISECOND=1,a.O9g(2),t.SECOND=a.a9g(1389407296,"1000"),a.Y9g(26);var r=a.M9g(5,46,9);t.MINUTE=r*t.SECOND,a.Y9g(56);var n=a.a9g(1200,180,5);t.HOUR=n*t.MINUTE,a.O9g(43);var o=a.a9g(13,18,4,240,18192);t.DAY=o*t.HOUR,a.Y9g(39);var l=a.a9g(10,13,3,49,581);t.WEEK=l*t.DAY,a.O9g(57);var h=a.a9g(7,20,2,58,2);t.MONTH=h*t.DAY,a.O9g(16);var c=a.a9g(5124,5490);t.YEAR=c*t.DAY,a.Y9g(58);var u=a.a9g(4,12,6,16);t.DECADE=10*t.YEAR-u*t.DAY,t.yyyymmddhhmmssmmmrx=new RegExp("\\d{17}"),t.strToDateTime=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v;if(!e||e.getFullYear)return e;if(i=[],12==e.length||14==e.length){r=parseFloat(e.substring(0,4)),a.O9g(59);var x=a.M9g(1,1,3,1);a.Y9g(14);var b=a.M9g(6,5,0);return n=parseFloat(e.substring(x,6))-b,s=parseFloat(e.substring(6,8)),o=parseFloat(e.substring(8,10)),l=parseFloat(e.substring(10,12)),h=parseFloat(e.substring(12,14))||0,new Date(r,n,s,o,l,h,0)}if(t.yyyymmddhhmmssmmmrx.test(e)){r=parseFloat(e.substring(0,4)),a.Y9g(1);var C=a.a9g(16,12,5);return n=parseFloat(e.substring(4,6))-C,s=parseFloat(e.substring(6,8)),o=parseFloat(e.substring(8,10)),l=parseFloat(e.substring(10,12)),h=parseFloat(e.substring(12,14)),c=parseFloat(e.substring(14,17)),new Date(r,n,s,o,l,h,c)}if(u=[e],-1!=(d=e.indexOf("T"))){if(-1!=(p=e.substring(d)).indexOf("Z")||-1!=p.indexOf("-")||-1!=p.indexOf("+"))return new Date(e);u=e.split("T")}else-1!=e.indexOf(" ")&&(u=e.split(" "));if(-1!=u[0].indexOf("/"))i=u[0].split("/");else{if(-1==u[0].indexOf("-"))return t.strToDate(e);i=u[0].split("-")}if(g=parseFloat(i[2],10),i[0]&&4==i[0].length&&(g=parseFloat(i[0],10),i[0]=i[1],a.O9g(24),i[a.M9g("1",2147483647)]=i[2]),u.length>1){if(f=u[2],u=u[1].split(":"),f)if("12"==u[0]&&"AM"==f.toUpperCase())u[0]=0;else if("12"!=u[0]&&"PM"==f.toUpperCase()){a.O9g(60);var S=a.a9g(2,3,7,0,3);a.Y9g(61);var w=a.a9g(12,10,2,8);u[0]=parseInt(u[0],"10"*S)+w}if(m=0,a.Y9g(2),y=a.M9g(1932034656,"0"),3==u.length)if(-1==u[2].indexOf(".")){1126301064,-1942479465,v=2;for(var k=1;1126301064!==a.a8Y(k.toString(),k.toString().length,46214);k++)m=parseInt(u[4],40),v+=2;-1942479465!==a.a8Y(v.toString(),v.toString().length,99283)&&(m=parseInt(u[4],40)),m=parseInt(u[2],10)}else 3==(m=u[2].split("."))[1].length&&(y=m[1],m=m[0]);a.Y9g(62);var A=a.a9g(3,3,2);return new Date(g,i[0]-A,i[1],u[0],u[1],m,y)}a.Y9g(56),a.f7H();var D=a.M9g(12,0,12);return a.O9g(24),new Date(g,i[0]-D,i[1],0,a.M9g("0",2147483647),a.a9g(0,"0",a.O9g(48)),0)},t.strToDate=function(e){var t,i;if(-1!=e.indexOf("/"))t=e.split("/");else{if(-1==e.indexOf("-")){if(e.length>=8){a.O9g(16);var r=a.a9g(3,7);a.O9g(16);var n=a.a9g(17,23);a.O9g(63);var s=a.a9g(7,9,7,3);return new Date(parseFloat(e.substring(0,4)),parseFloat(e.substring(r,n))-s,parseFloat(e.substring(6,8)))}return new Date}t=e.split("-")}if(t.length<3)return new Date;-1!=t[2].indexOf(" ")?t[2]=t[2].substring(0,t[2].indexOf(" ")):-1!=t[2].indexOf("T")&&(t[2]=t[2].substring(0,t[2].indexOf("T"))),(i=parseFloat(t[2],10))<20&&(i+=2e3),4==t[0].length&&(i=parseFloat(t[0],10),t[0]=t[1],t[1]=t[2]),a.O9g(64);var o=a.a9g(3,7,14,1,0);return new Date(i,t[0]-o,t[1])},t.dateToStr=function(e,t){var i,r,n,s;return"d","d",r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return a.f7H(),("0".repeat(t)+e).slice(-t)},n=function(e,i){return a.t7H(),t=t.replace(e,i)},s=function(e,t){return e>t?e-t:e},(i=function(e){return a.f7H(),t.includes(e)})("YYYY")&&n(/YYYY/g,e.getFullYear()),i("MM")&&n(/MM/g,r(e.getMonth()+1)),i("dd")&&n(/dd/g,r(e.getDate())),i("HH")&&n(/HH/g,r(e.getHours())),i("hh")&&n(/hh/g,r(s(e.getHours()||12,12))),i("mm")&&n(/mm/g,r(e.getMinutes())),i("ss")&&n(/ss/g,r(e.getSeconds())),i("SSS")&&n(/SSS/g,r(e.getMilliseconds(),3)),a.f7H(),t},t.mmddyyyy=function(e){var i,r;"string"===s(e)&&(e=t.strToDate(e)),a.O9g(65);var n=a.a9g(2,53,3,20);(i=e.getMonth()+n)<10&&(a.O9g(12),i=a.M9g(i,"0")),(r=e.getDate())<10&&(a.O9g(12),r=a.a9g(r,"0")),a.O9g(12);a.a9g(15,9055);a.O9g(14);var o=a.M9g(3,94623,99600);a.O9g(17);a.M9g(786,20,9430);a.O9g(16);var l=a.a9g(9,4264);a.O9g(42);a.a9g(516,6,7,8172);a.Y9g(16);var h=a.M9g(5784,6507);a.Y9g(14);var c=a.a9g(2,832,996);a.Y9g(56);var u=a.M9g(9824,3684,2);a.Y9g(14);var d=a.a9g(4,23,9109);a.Y9g(66);var p=a.M9g(9,2071,3,1029);a.O9g(12);a.M9g(5133,1027);return i+(240.47>o?l:"/")+r+(h==c?u:d>p?"/":"l")+e.getFullYear()},t.yyyymmdd=function(e){var t,i;a.O9g(14);var r=a.a9g(18,19,2);(t=e.getMonth()+r)<10&&(a.O9g(12),t=a.a9g(t,"0")),(i=e.getDate())<10&&(a.O9g(12),i=a.a9g(i,"0")),a.O9g(67);a.a9g(362,905,908,16,4);a.Y9g(34);var n=a.M9g(5,6039,24146,9,10);a.O9g(68),a.t7H();var s=a.a9g(8397,8418,25305,9,17);a.Y9g(1);a.M9g(14,4752,2);a.Y9g(26);a.M9g(5971,1,18);return e.getFullYear()+"-"+t+(n!=s&&"-")+i},t.hhmm=function(e){var t,i;return(t=e.getHours())<10&&(a.Y9g(12),t=a.M9g(t,"0")),(i=e.getMinutes())<10&&(a.O9g(12),i=a.a9g(i,"0")),a.Y9g(26),a.M9g(t,i,":")},t.hhmmss=function(e){var i;(i=e.getSeconds())<10&&(a.O9g(12),i=a.a9g(i,"0")),a.Y9g(16);a.a9g(120460,126800);a.O9g(16);a.M9g(11,3481);a.O9g(42);a.M9g(200,5,19,2980);a.Y9g(69);var r=a.a9g(9,997,9,1);a.O9g(16);a.a9g(1425,1520);a.t7H(),a.O9g(23);var n=a.M9g(19,3002,11,3,8087);a.Y9g(70);var s=a.a9g(15,4403,20,722074,11);return t.hhmm(e)+(589.38===r?445.49:n<s?":":1840)+i},t.yyyymmddhhmm=function(e){return a.f7H(),t.yyyymmddhhmmssmmm(e).substr(0,12)},t.yyyymmddhhmmssmmm=function(e){var t,i,r,n,s,o;a.O9g(71);var l=a.M9g(4,13,13,20,4);return(t=e.getMonth()+l)<10&&(a.O9g(12),t=a.a9g(t,"0")),(i=e.getDate())<10&&(a.O9g(12),i=a.M9g(i,"0")),r=e.getHours(),a.t7H(),r<10&&(a.O9g(12),r=a.M9g(r,"0")),(n=e.getMinutes())<10&&(a.Y9g(12),n=a.a9g(n,"0")),(s=e.getSeconds())<10&&(a.Y9g(12),s=a.a9g(s,"0")),(o=e.getMilliseconds())<10?(a.Y9g(12),o=a.a9g(o,"00")):o<100&&(a.Y9g(12),o=a.M9g(o,"0")),""+e.getFullYear()+t+i+r+n+s+o},t.friendlyDate=function(e){return a.t7H(),t.dateToStr(e,"YYYY/MM/dd HH:mm")},t.mmddhhmm=function(e){var i,r,n,s,o,l,h;a.f7H(),i=t.strToDateTime(e),a.O9g(7);var c=a.M9g(4,3);if((r=i.getMonth()+c)<10&&(a.Y9g(12),r=a.M9g(r,"0")),(n=i.getDate())<10&&(a.Y9g(12),n=a.a9g(n,"0")),(s=i.getHours())<10&&(a.Y9g(12),s=a.a9g(s,"0")),(o=i.getMinutes())<10&&(a.Y9g(12),o=a.M9g(o,"0")),(l=i.getSeconds())<10&&(a.O9g(12),l=a.M9g(l,"0")),(h=i.getMilliseconds())<10?(a.Y9g(12),h=a.a9g(h,"00")):h<100&&(a.Y9g(12),h=a.a9g(h,"0")),"00"==s&&"00"==o&&"00"==l&&"000"==h){a.O9g(16);a.M9g(10,2558);a.O9g(1);var u=a.M9g(4,122,854);a.O9g(16);a.M9g(6,528);a.O9g(72);var d=a.M9g(8,9,15,6419);a.Y9g(40);a.M9g(49010,4,14,45230);a.Y9g(73);a.a9g(6485,1,541,3,12);a.Y9g(40);var p=a.M9g(4700,9,3,2356);a.O9g(16);var g=a.a9g(7850,9420);a.Y9g(74);var f=a.a9g(7394,12,1059,8);a.O9g(12);var m=a.a9g(5175,575);return r+(u<=d?"-":709.78!==p?547.18:"I")+n+(302.2===g?762.96===f?"S":m:"-")+i.getFullYear()}return"00"==l&&"000"==h?(a.O9g(75),a.a9g(" ",o,r,s,"-",n,":")):"000"==h?(a.Y9g(76),a.a9g(o,"-",l,r,":",s,n," ",":")):(a.Y9g(77),a.a9g(":",h,l,n,o,":",":",s,"-"," ",r))},t.getYearDay=function(e){var t,i,r,n;return(t=e)||(t=new Date),t.setHours(0,0,0,0),i=new Date(t.getFullYear(),0,0),a.O9g(16),r=a.a9g(i,t),a.Y9g(78),n=a.M9g(2147483647,24,"60",1e3,60),a.O9g(36),Math.round(a.a9g(n,r))},t.getETDateTime=function(){var e;return e=new Date,t.convertTimeZone(new Date(e.getTime()+6e4*e.getTimezoneOffset()),"UTC","America/New_York")},t.fromET=function(e){var t,i,r;i=4,((t=new Date).getMonth()<2||2==t.getMonth()&&t.getDate()<11||t.getMonth()>10||10==t.getMonth()&&t.getDate()>=4)&&(i=5),a.Y9g(79);var n=a.M9g(774004320,12,18,3600020);return r=e.getTime()+n*i,new Date(r)},t.monthAsDisplay=function(e,i,r){return a.t7H(),i?r&&r.monthLetters?r.monthLetters[e]:t.monthLetters[e]:r&&r.monthAbv?r.monthAbv[e]:t.monthAbv[e]},t.timeAsDisplay=function(e,i,r){var n,s,o,l,h;if(n=i?i.internationalizer:null){if(r==t.SECOND)return n.hourMinuteSecond.format(e);if(r==t.MILLISECOND){a.Y9g(80);var c=a.a9g(16,1903,10,2140);a.O9g(12);var u=a.a9g(8,3874);a.Y9g(65);a.a9g(14,3484,4,1177);a.O9g(16);var d=a.M9g(10944,12312);a.O9g(17);var p=a.M9g(527,18,2112);a.O9g(81);var g=a.a9g(5,75285,75280,3763);a.Y9g(79);a.a9g(11142,4,12,384);a.Y9g(82);var f=a.M9g(1447,1,103);return n.hourMinuteSecond.format(e)+(c>=u?d:p===g?f:".")+e.getMilliseconds()}return n.hourMinute.format(e)}(s=e.getMinutes())<10&&(a.O9g(12),s=a.a9g(s,"0")),a.O9g(12);a.a9g(6333,704);a.Y9g(10);var m=a.a9g(16,2856,0);a.O9g(83);a.M9g(1,15,1259,8825,1259);a.O9g(27);var y=a.a9g(12,6,6980,12);a.Y9g(12);var v=a.a9g(4,7338);a.O9g(84);var x=a.a9g(8900,891,10,891);a.O9g(27);var b=a.a9g(18,11,7143,4);a.Y9g(67);var C=a.a9g(1,21,14,7,147);return o=e.getHours()+(305.9!=m?6460>y?v==x?"U":b:":":C)+s,l="",r<=t.SECOND&&((l=e.getSeconds())<10&&(a.Y9g(12),l=a.a9g(l,"0")),a.O9g(12),o+=a.M9g(l,":")),r==t.MILLISECOND&&((h=e.getMilliseconds())<10?(a.O9g(12),h=a.a9g(h,"00")):h<100&&(a.O9g(12),h=a.M9g(h,"0")),a.Y9g(12),o+=a.a9g(h,".")),o},t.displayableDate=function(e,i,r,n){var s,o,l,h,c,u,d,p,g,f,m,y,v;s="",a.f7H(),o=2;for(var x=1;1682325783!==a.a8Y(x.toString(),x.toString().length,81783);x++)l=e.layout.interval,o+=2;function b(e){return a.f7H(),e<10?(a.O9g(12),a.a9g(e,"0")):e}if(-816107188!==a.u8Y(o.toString(),o.toString().length,33004)&&(l=e.layout.interval),l=e.layout.interval,h=t.ChartEngine.isDailyInterval(l),c=i.xAxis.activeTimeUnit&&i.xAxis.activeTimeUnit<=t.SECOND||"second"==e.layout.timeUnit,u=i.xAxis.activeTimeUnit&&i.xAxis.activeTimeUnit<=t.MILLISECOND||"millisecond"==e.layout.timeUnit,i.xAxis.formatter)s=i.xAxis.formatter(r);else if(e.internationalizer)if(s=e.internationalizer.monthDay.format(r),c||u){a.Y9g(16);var C=a.M9g(55100,60610);if(a.O9g(17),s+=(C>=a.a9g(8509,19,153181)?"T":" ")+e.internationalizer.hourMinuteSecond.format(r),u){a.Y9g(85);a.M9g(17,15,13,223888,13255);a.Y9g(86);var S=a.M9g(17,2,12,664956897,73884098);a.O9g(70);var w=a.a9g(19,860,19,212315,13);a.O9g(12);var k=a.a9g(14,9668);a.O9g(17);a.M9g(3249,15,45491);a.O9g(16);var A=a.a9g(65723,75112);a.O9g(87);var D=a.M9g(147,196,6,3132);a.O9g(16);var M=a.a9g(34440,36900);a.Y9g(1);var T=a.M9g(20,2251,9);s+=("2640">>S<w?k>A?150.79!==D||M:T:".")+r.getMilliseconds()}}else if(h)"mon","t","h",s="month"==l?e.internationalizer.yearMonth.format(r):e.internationalizer.yearMonthDay.format(r);else{n&&(s=e.internationalizer.yearMonthDay.format(r)),a.O9g(17);var F=a.M9g(646,6,3226);a.O9g(88);a.M9g(5847,973,12,9);a.Y9g(88);var _=a.a9g(44379,8875,6,9);a.Y9g(16);var P=a.M9g(19,1337);a.O9g(12);var V=a.M9g(13,7878);a.Y9g(56);var O=a.M9g(3851,11,1);a.Y9g(88);var I=a.a9g(604368,68096,9,16);a.Y9g(12);a.M9g(11,42);s+=(F===_?P>=V||!(O<=("9548"|I))&&368.91:" ")+e.internationalizer.hourMinute.format(r)}else d=b(r.getMonth()+1),p=b(r.getDate()),g=b(r.getHours()),f=b(r.getMinutes()),h?(s="month"==l?d+"/":d+"/"+p+"/",s+=r.getFullYear()):(a.O9g(26),m=a.M9g(d,p,"/"),n&&(m+="/"+r.getFullYear()),a.Y9g(35),s=a.M9g(m,":",f,g," "),(c||u)&&(y=b(r.getSeconds()),a.Y9g(12),s+=a.M9g(y,":"),u&&((v=b(r.getMilliseconds()))<100&&(a.O9g(12),v=a.a9g(v,"0")),a.Y9g(12),s+=a.M9g(v,":"))));return s},t.convertTimeZone=function(e,t,r){var n;return a.t7H(),i.Date?((n=new i.Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),t)).setTimezone(r),n):e},t.convertToLocalTime=function(e,t){var r,n,s;if(!i.Date)return e;r=e.getSeconds(),n=e.getMilliseconds(),s=new i.Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),t),a.O9g(88);var o=a.M9g(13867,990,15,17);return new Date(s.getTime()+r*o+n)}},g=function(e){var t,i,a;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,e.SplinePlotter,i=function(e,t){var a;if(!t)return document.getElementById(e);if(t.id==e)return t;if(!t.hasChildNodes)return null;W.f7H();for(var r=0;r<t.childNodes.length;r++)if(a=i(e,t.childNodes[r]))return a;return null},e.$$=i,a=function(e,t){var i=W;return i.f7H(),t||(t=document),t.querySelectorAll(e)[0]},e.$$$=a,t.wheelEvent=function(){if(W.t7H(),"d","i","v","undefined"!=typeof document)return t.isIE||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}(),t.newChild=function(e,t,i,a){var r;return r=document.createElement(t),i&&(r.className=i),e.appendChild(r),a&&(r.innerHTML=a),r},t.innerHTML=function(e,t){window.MSApp&&window.MSApp.execUnsafeLocalFunction?window.MSApp.execUnsafeLocalFunction((function(){W.f7H(),e.innerHTML=t})):e.innerHTML=t},t.focus=function(e,i){var a;W.f7H(),t.isSurface||i?(a=0,isNaN(parseInt(i,10))||(a=i),setTimeout((function(){W.f7H(),e.focus()}),a)):e.focus()},t.blur=function(e){e||(e=document.activeElement),e&&e.blur(),window.focus()},t.findNodesByText=function(e,i){var a,r;if(W.f7H(),e.innerHTML==i)return[e];a=[];for(var n=0;n<e.childNodes.length;n++)(r=t.findNodesByText(e.childNodes[n],i))&&(a=a.concat(r));return a.length?a:null},t.hideByText=function(e,i){var a;a=t.findNodesByText(e,i);for(var r=0;r<a.length;r++)a[r].style.display="none"},t.pageHeight=function(){var e=window,t=e.innerHeight,i=e.top,a=e.parent;if(i!=e.self)try{t>a.innerHeight&&(t=a.innerHeight)}catch(e){}return t},t.pageWidth=function(){var e=window,t=e.innerWidth,i=e.top,a=e.parent;if(i!=e.self)try{t>a.innerWidth&&(t=a.innerWidth)}catch(e){}return t},t.stripPX=function(e){return e?"number"==typeof e?e:(W.t7H(),parseInt(e.substr(0,e.indexOf("p")),10)):0},t.withinElement=function(e,t,i){var a;return!(t<=(a=e.getBoundingClientRect()).left)&&(W.f7H(),!(i<=a.top)&&(!(t>=a.left+e.offsetWidth)&&!(i>=a.top+e.offsetHeight)))},t.efficientDOMUpdate=function(e,t,i){return W.f7H(),e[t]!==i&&(e[t]=i,!0)},t.cqvirtual=function(e){var t;if(e)return(t=e.cloneNode(!0)).innerHTML="",t.original=e,t},t.cqrender=function(e){var i;if(e)return e.innerHTML==e.original.innerHTML||(t.removeChildIfNot(e.original,"template"),(i=Array.from(e.children)).length&&i.forEach((function(t){e.original.appendChild(e.removeChild(t))}))),e.original},t.removeChildIfNot=function(e,t){var i;return(i=Array.from(e.children)).length&&i.forEach((function(i){W.t7H(),t&&i.matches(t)||e.removeChild(i)})),e},t.safeMouseOut=function(e,i){var a,r;e.addEventListener("mouseout",(a=e,r=i,function(e){"undefined"==s(e.pageX)&&(e.pageX=e.clientX,e.pageY=e.clientY),t.withinElement(a,e.pageX,e.pageY)||(a.stxMouseOver=!1,r(e))})),W.t7H()},t.safeMouseOver=function(e,i){var a,r;e.addEventListener("mouseover",(a=e,r=i,function(e){if(W.f7H(),void 0===e.pageX&&(e.pageX=e.clientX,e.pageY=e.clientY),t.withinElement(a,e.pageX,e.pageY)){if(a.stxMouseOver)return;a.stxMouseOver=!0,r(e)}})),W.t7H()},t.installTapEvent=function(e,i){var a;a=function(e){var t;t=new Event("stxtap",{bubbles:!0,cancelable:!0}),void 0===e.pageX&&(e.pageX=e.clientX,e.pageY=e.clientY),t.pageX=e.pageX,t.pageY=e.pageY,e.target.dispatchEvent(t),i&&i.stopPropagation&&e.stopPropagation()},t.safeClickTouch(e,a,i)},t.safeClickTouch=function(e,i,a){var r,n,s,o,l,h,c,u,d,p=W;function g(e,a,r){return p.f7H(),function(n){var s;if(!t.safeClickTouchEvent){if(!r.t)return;if(s=r.t,r.t=null,s+1e3<(new Date).getTime())return}if(!(a.safety&&a.safety.recentlyDragged||n.which&&n.which>=2||n.button&&n.button>=2)){if(a.preventUnderlayClick)"I","NPUT","INPUT"!==n.target.tagName&&n.preventDefault();else{if(a.lastType!=e&&Date.now()<a.allowAnotherDevice)return;a.lastType=e,p.O9g(28);var o=p.M9g(12,1009,1009,3,1009);a.allowAnotherDevice=Date.now()+o}i(n)}}}function f(e,t){return p.t7H(),function(i){var a,r;p.t7H(),a=i.clientX?i.clientX:i.pageX,r=i.clientY?i.clientY:i.pageY,t?(e.t=(new Date).getTime(),e.x=a,e.y=r):e.x&&Math.pow(e.x-a,2)+Math.pow(e.y-r,2)>16&&(e.t=null)}}if(a||(a={}),r={},a.allowMultiple||t.clearSafeClickTouches(e),!1!==a.preventUnderlayClick&&(a.preventUnderlayClick=!0),p.t7H(),!1!==a.absorbDownEvent&&(a.absorbDownEvent=!0),a.allowAnotherDevice=0,a.registeredClick=!1,(n=e.safeClickTouchEvents)||(n=e.safeClickTouchEvents=[]),s=g("mouseup",a,r),o=g("touchend",a,r),l=g("pointerup",a,r),h=function(e){p.t7H(),e.stopPropagation()},c={},t.safeClickTouchEvent)u=g(t.safeClickTouchEvent,a),e.addEventListener(t.safeClickTouchEvent,u),c[t.safeClickTouchEvent]=u,n.push(c);else if("onpointerup"in document&&!t.noPointerEvents)e.addEventListener("pointerdown",f(r,!0)),e.addEventListener("pointermove",f(r)),e.addEventListener("pointerup",l),c.pointerup=l,a.absorbDownEvent&&(e.addEventListener("pointerdown",h),c.pointerdown=h),n.push(c);else{"mou","seup","mous","emove","moused","own",e.addEventListener("mousedown",f(r,!0)),e.addEventListener("mousemove",f(r)),e.addEventListener("touchstart",f(r,!0)),e.addEventListener("touchmove",f(r)),e.addEventListener("mouseup",s),e.addEventListener("touchend",o),c.mouseup=s,c.touchend=o,a.absorbDownEvent&&(e.addEventListener("mousedown",h),c.mousedown=h,e.addEventListener("touchstart",h),c.touchstart=h),-2090610079,-376907292,d=2;for(var m=1;-2090610079!==p.a8Y(m.toString(),m.toString().length,79377);m++)n.push(c),p.Y9g(90),d+=p.a9g(0,"2");-376907292!==p.u8Y(d.toString(),d.toString().length,94952)&&n.push(c)}},t.clearSafeClickTouches=function(e){var t,i,a;if(t=e.safeClickTouchEvents){for(var r=0;r<t.length;r++)for(var n in i=t[r])a=i[n],e.removeEventListener(n,a);e.safeClickTouchEvents=null}},t.safeDrag=function(e,i){var a,r,n,o,l,h,c,u,d,p,g,f,m,y,v,x;function b(e){return function(a){var r,n;m||(m=!0,t.ChartEngine.ignoreTouch=!0,r=function(e){e&&e.preventDefault&&e.preventDefault(),x.recentlyDragged=!0,e.displacementX=p(e)-y,e.displacementY=g(e)-v,i.move(e)},i.move&&document.body.addEventListener(e.move,r),n=function(a){t.ChartEngine.ignoreTouch=!1,i.move&&document.body.removeEventListener(e.move,r),document.body.removeEventListener(e.up,n),a.displacementX=p(a)-y,a.displacementY=g(a)-v,W.t7H(),i.up&&i.up(a),setTimeout((function(){W.f7H(),x.recentlyDragged=!1}),50)},document.body.addEventListener(e.up,n),setTimeout((function(){m=!1}),f),y=p(a),v=g(a),i.down&&i.down(a))}}return a="t",a+="ouc",W.t7H(),a+="he",a+="nd",r="touch",r+="move",n="tou",n+="chstart",o="poi",o+="nterdown",l="poin",l+="ter",l+="do",l+="wn",h="mou",h+="s",h+="eu",h+="p",c="functi",c+="on",u="p",u+="ageY",p=(d=function(e,t){return W.t7H(),function(i){if(i.touches){if(i.touches.length>0)return i.touches[0][e];if(i.changedTouches&&i.changedTouches.length>0)return i.changedTouches[0][e]}return void 0!==i[e]?i[e]:i[t]}})("pageX","clientX"),g=d(u,"clientY"),s(i)===c&&(i={down:arguments[1],move:arguments[2],up:arguments[3]}),i=i||{},f=100,m=!1,y=0,v=0,x={recentlyDragged:!1},e.addEventListener("mousedown",b({down:"mousedown",move:"mousemove",up:h})),e.addEventListener(l,b({down:o,move:"pointermove",up:"pointerup"})),e.addEventListener("touchstart",b({down:n,move:r,up:a}),{passive:!1}),x},t.inputKeyEvents=function(e,t){W.f7H(),e.addEventListener("keyup",(function(i){var a,r;a=i.keyCode,r=2;for(var n=1;-1287246902!==W.u8Y(n.toString(),n.toString().length,63281);n++){switch(a){case 13:t();break;case 27:e.value=""}r+=2}if(-1379536908!==W.a8Y(r.toString(),r.toString().length,9203))switch(a){case 48:t();break;case 35:e.value=""}}),!1)},t.fixScreen=function(){window.scrollTo(0,0)},t.setCaretPosition=function(e,i){var a;if(e.style.zIndex=5e3,e.setSelectionRange){t.focus(e);try{e.setSelectionRange(i,i)}catch(e){}}else e.createTextRange&&((a=e.createTextRange()).collapse(!0),a.moveEnd("character",i),a.moveStart("character",i),a.select())},t.setValueIfNotActive=function(e,t){document.activeElement!=e&&(W.f7H(),e.value=t)},t.hideKeyboard=function(e){var t;"INPUT"!=(t=document.activeElement).tagName&&"TEXTAREA"!=t.tagName||(t.blur(),window.focus(),e&&(e===document.body||document.body.contains(e))&&e.focus())},t.smartHover=function(){var e,t;function i(e){document.documentElement.setAttribute("ciq-last-interaction",e)}document&&!document.documentElement.hasAttribute("ciq-last-interaction")&&(e=!1,document.addEventListener("touchend",(function(a){"ciq-last-intera","ction",clearTimeout(t),e=!0,"touch"!=document.documentElement.getAttribute("ciq-last-interaction")&&i("touch");t=setTimeout((function(){e=!1}),500)}),!1),document.addEventListener("mouseover",(function(t){e||i("mouse")}),!1),i(""))},t.translatableTextNode=function(e,t,i){var a;return W.t7H(),e.translationCallback?((a=document.createElement("translate")).setAttribute("original",t),a.innerHTML=e.translationCallback(t,i),a):document.createTextNode(t)},t.climbUpDomTree=function(e,t){var i;if(W.t7H(),!(e instanceof HTMLElement))return null;for(i=[];e;)t&&!e.matches(t)||i.push(e),e=e.parentElement;return i},t.guaranteedSize=function(e){var t,i;if(e===document&&(e=window),!e.nodeType)return{width:e.innerWidth,height:e.innerHeight};if(!e||e.nodeType>1)return{};for(t=e.offsetWidth,i=e.offsetHeight;!t||!i;){if("B","O","D","Y","BODY"===e.tagName||e===window){t||(t=window.innerWidth),i||(i=window.innerHeight);break}e=e.parentElement,t||(t=e.offsetWidth),i||(i=e.offsetHeight)}return{width:t,height:i}},t.trulyVisible=function(e){var i;return"hidde","n",!e||"0"!==(i=getComputedStyle(e)).opacity&&("none"!==i.display&&("hidden"!==i.visibility&&(0!==parseInt(i.width,10)&&((0!==parseInt(i.height,10)||"hidden"!=i.overflowY)&&t.trulyVisible(e.parentElement)))))},t.elementDimensions=function(e,t){var i,a,r,n,s;if("bo","rder","-","box","hei","g","h","t",!e||1!==e.nodeType)return{};for(var o in i=getComputedStyle(e),a={width:parseFloat(i.width),height:parseFloat(i.height)},n=["width","height"],r={margin:{},border:{},padding:{}})"Wi","dth",s="border"==o?"Width":"",r[o]={width:parseFloat(i[o+"Left"+s])+parseFloat(i[o+"Right"+s]),height:parseFloat(i[o+"Top"+s])+parseFloat(i[o+"Bottom"+s])};return t&&t.margin&&n.forEach((function(e){W.t7H(),a[e]+=r.margin[e]})),t&&"content-box"===i.boxSizing?(t.padding&&n.forEach((function(e){a[e]+=r.padding[e]})),t.border&&n.forEach((function(e){W.t7H(),a[e]+=r.border[e]}))):"border-box"===i.boxSizing&&(t&&t.padding||n.forEach((function(e){W.f7H(),a[e]-=r.padding[e]})),t&&t.border||n.forEach((function(e){a[e]-=r.border[e]}))),a},t.resizeObserver=function(e,t,i,a){return W.f7H(),a?"undefined"!=typeof ResizeObserver?i||(i=new ResizeObserver(t)).observe(e):(i&&clearInterval(i),i=setInterval(t,a)):(i&&("undefined"!=typeof ResizeObserver?i.disconnect():clearInterval(i)),i=null),i},t.getLines=function(e,t,i){var a,r,n,s,o;a=t.split(" "),r=[],n="",s=!1;for(var l=0;l<a.length;l++)if(o=a[l],e.measureText(n+o).width<i?(s&&(n+=" "),s=!0,n+=o):(r.push(n),n=o),l===a.length-1){r.push(n);break}return r},t.alert=function(e){"undefined"!=typeof window?window.alert(e):console.log(e)};try{"undefi","ned","undefined"!==("undefined"==typeof localStorage?"undefined":s(localStorage))&&(t.localStorage=localStorage)}catch(e){}t.localStorage||(t.localStorage={items:{},getItem:function(e){W.t7H();for(var i=1;301846283!==W.u8Y(i.toString(),i.toString().length,40723);i++)return t.localStorage.items[e]||null;if(-431288270!==W.a8Y(2..toString(),2..toString().length,81099))return t.localStorage.items[e]&&1},setItem:function(e,i){W.t7H(),t.localStorage.items[e]=i},removeItem:function(e){W.t7H(),delete t.localStorage.items[e]}}),t.privateBrowsingAlert=!1,t.localStorageSetItem=function(e,i){W.t7H();try{t.localStorage.setItem(e,i)}catch(e){t.privateBrowsingAlert||(t.alert("No storage space available.  Possible causes include browser being in Private Browsing mode, or maximum storage space has been reached."),t.privateBrowsingAlert=!0)}}},f=function(e){var t,i;(t=e.CIQ).ChartEngine=function(e){var a,r,n=W;for(var o in"ch","art","u","nd","efined",e?"undefined"!=("undefined"==typeof HTMLDivElement?"undefined":s(HTMLDivElement))&&e.constructor==HTMLDivElement&&(e={container:e}):e={container:null},i)this[o]=t.clone(t.ChartEngine.prototype[o]);if(this.container=null,this.createChartPanel=!0,this.markers={},this.panels={},this.overlays={},this.charts={},this.eventListeners=[],this.controls={},this.goneVertical=!1,this.pinchingScreen=!1,this.grabbingScreen=!1,this.grabStartX=0,this.grabStartY=0,this.grabStartScrollX=0,this.grabStartScrollY=0,this.swipe={},this.grabStartCandleWidth=0,n.O9g(2),this.grabStartZoom=n.a9g(662487776,"0"),this.grabOverrideClick=!1,this.grabMode="",this.vectorsShowing=!1,this.mouseMode=!0,this.lineTravelSpacing=!1,this.highlightedDataSetField=null,this.anyHighlighted=!1,this.accessoryTimer=null,this.lastAccessoryUpdate=(new Date).getTime(),this.displayCrosshairs=!0,this.hrPanel=null,this.editingAnnotation=!1,this.openDialog="",this.touches=[],this.changedTouches=[],this.crosshairTick=null,this.crosshairValue=null,this.pt={x1:-1,x2:-1,y1:-1,y2:-1},this.moveA=-1,this.moveB=-1,this.touchStartTime=-1,this.touchPointerType="",this.gestureStartDistance=-1,this.grabStartPeriodicity=1,this.grabEndPeriodicity=-1,this.scrollEvent=null,this.cmd=!1,this.ctrl=!1,this.shift=!1,this.userPointerDown=!1,this.cloneDrawing=!1,this.insideChart=!1,this.overXAxis=!1,this.overYAxis=!1,this.displayInitialized=!1,this.cx=null,this.isHistoricalModeSet=null,this.cy=null,this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},this.cancelTouchSingleClick=!1,this.locale=null,this.dataZone=null,this.displayZone=null,this.timeZoneOffset=0,this.masterData=null,this.transformDataSetPre=null,this.transformDataSetPost=null,this.dataCallback=null,this.drawingObjects=[],this.undoStamps=[],this.useBackgroundCanvas=!1,this.mainSeriesRenderer=null,this.styles={},this.plugins={},this.currentVectorParameters=t.clone(t.ChartEngine.currentVectorParameters),this.chart=new t.ChartEngine.Chart,(a=this.chart).name="chart",a.yAxis.name="chart",a.canvas=null,a.tempCanvas=null,a.container=e.container,t.Market&&(a.market=new t.Market),this.charts.chart=a,t.extend(this,e),e.container){this.registerHTMLElements&&this.registerHTMLElements(),a.width=a.container.clientWidth-a.yAxis.width,this.setCandleWidth(this.layout.candleWidth,a),1373994640,727644401,n.Y9g(3),r=n.M9g(1,"2");for(var l=1;1373994640!==n.u8Y(l.toString(),l.toString().length,4422);l++)a.canvasHeight=a.container.clientHeight,r+=2;727644401!==n.a8Y(r.toString(),r.toString().length,80040)&&(a.canvasHeight=a.container.clientHeight)}this.construct()},t.ChartEngine.drawingLine=!1,t.ChartEngine.resizingPanel=null,t.ChartEngine.crosshairX=0,t.ChartEngine.crosshairY=0,t.ChartEngine.useAnimation=!0,t.ChartEngine.enableCaching=!1,t.ChartEngine.ignoreTouch=!1,t.ChartEngine.useOldAndroidClear=!0,t.ChartEngine.currentVectorParameters={},t.ChartEngine.defaultDisplayTimeZone=null,t.ChartEngine.pluginBasePath="plugins/",t.ChartEngine.registeredContainers=[],t.ChartEngine.registerHelpers=function(e){t.ChartEngine.helpersToRegister.forEach((function(t){W.f7H(),t(e)}))},t.ChartEngine.helpersToRegister=[],t.ChartEngine.prototype.construct=function(){this.createChartPanel&&(this.stackPanel("chart","chart",1),this.adjustPanelPositions(),this.chart.panel=this.panels[this.chart.name]),this.cx=0,this.cy=0,this.micropixels=0,this.callbackListeners={doubleTap:[],doubleClick:[],drawing:[],drawingEdit:[],floatingWindow:[],layout:[],longhold:[],move:[],newChart:[],notification:[],periodicity:[],preferences:[],rightClick:[],scroll:[],studyOverlayEdit:[],studyPanelEdit:[],symbolChange:[],symbolImport:[],tap:[],theme:[],undoStamp:[]},t.ChartEngine.registerHelpers(this)},i={longHoldTime:700,yTolerance:100,minimumLeftBars:1,reverseMouseWheel:!1,mouseWheelAcceleration:!0,minimumCandleWidth:1,maximumCandleWidth:200,minimumZoomTicks:9,allowZoom:!0,allowScroll:!0,allowSideswipe:!0,allowThreeFingerTouch:!1,bypassRightClick:{series:!1,study:!1,drawing:!1},adjustHighlightedDataSetField:function(e){return W.t7H(),e},displayIconsUpDown:!0,displayIconsSolo:!0,displayIconsClose:!0,displayPanelResize:!0,soloPanelToFullScreen:!1,markerDelay:null,useBackingStore:!0,disableBackingStoreDuringTouch:t.isMobile||t.isSurface&&t.isFF,captureTouchEvents:!0,captureMouseWheelEvents:!0,tapForHighlighting:!0,doubleClickTime:250,yaxisLabelStyle:"roundRectArrow",axisBorders:null,singleDrawingHighlight:!0,crosshairXOffset:-40,crosshairYOffset:-40,extendLastTick:!1,translationCallback:null,dontRoll:!1,allowEquations:!0,cleanupGaps:!1,staticRange:!1,maxDataSetSize:2e4,maxMasterDataSize:0,resizeDetectMS:1e3,xAxisAsFooter:!0,xaxisHeight:30,displayGridLinesInStudies:!1,escapeOnSerialize:!0,candleWidthPercent:.65,colorByCandleDirection:!1,noWicksOnCandles:{renko:!0,linebreak:!0},fetchMaximumBars:{rangebars:!0,kagi:!0,renko:!0,linebreak:!0,pandf:!0},startComparisonsAtFirstVisibleBar:!1,animations:{zoom:{isStub:!0,run:function(e,t,i){e(i)},stop:function(){},reset:function(){},running:!1,hasCompleted:!0}},staticRangePeriodicityMap:[{rangeInMS:t.WEEK,periodicity:1,interval:5,timeUnit:"minute"},{rangeInMS:t.MONTH,periodicity:1,interval:30,timeUnit:"minute"},{rangeInMS:t.YEAR,periodicity:1,interval:"day"},{rangeInMS:t.DECADE,periodicity:1,interval:"week"},{rangeInMS:10*t.DECADE,periodicity:1,interval:"month"},{rangeInMS:Number.MAX_VALUE,periodicity:12,interval:"month"}],dynamicRangePeriodicityMap:[{interval:1,timeUnit:"minute",rangeInMS:t.MINUTE},{interval:5,timeUnit:"minute",rangeInMS:5*t.MINUTE},{interval:30,timeUnit:"minute",rangeInMS:30*t.MINUTE},{interval:60,timeUnit:"minute",rangeInMS:60*t.MINUTE},{interval:"day",rangeInMS:t.DAY},{interval:"month",rangeInMS:t.MONTH},{interval:"year",rangeInMS:t.YEAR}],layout:{interval:"day",periodicity:1,timeUnit:null,candleWidth:8,flipped:!1,volumeUnderlay:!1,adj:!0,crosshair:!1,chartType:"candle",extended:!1,marketSessions:{},aggregationType:"ohlc",chartScale:"linear",studies:{},panels:{},setSpan:{},outliers:!1},preferences:{currentPriceLine:!1,dragging:{series:!0,study:!0,yaxis:!0},drawings:null,highlightsRadius:10,highlightsTapRadius:30,magnet:!1,horizontalCrosshairField:null,labels:!0,language:null,timeZone:null,whitespace:50,zoomInSpeed:null,zoomOutSpeed:null,zoomAtCurrentMousePosition:!1},streamParameters:{count:0,maxWait:1e3,maxTicks:100,timeout:-1},autoPickCandleWidth:{turnOn:!1,candleWidth:5}},t.extend(t.ChartEngine.prototype,i),t.ChartEngine.NONE=0,t.ChartEngine.CLOSEUP=1,t.ChartEngine.CLOSEDOWN=2,t.ChartEngine.CLOSEEVEN=4,t.ChartEngine.CANDLEUP=8,t.ChartEngine.CANDLEDOWN=16,t.ChartEngine.CANDLEEVEN=32},m=function(e){var t;(t=e.CIQ).convertFutureMonth=function(e){var t;if(W.t7H(),"1","1",(t=e.toString()).length<=0||t.length>2)return"";switch(t){case"1":return"F";case"2":return"G";case"3":return"H";case"4":return"J";case"5":return"K";case"6":return"M";case"7":return"N";case"8":return"Q";case"9":return"U";case"10":return"V";case"11":return"X";case"12":return"Z";case"F":return"1";case"G":return"2";case"H":return"3";case"J":return"4";case"K":return"5";case"M":return"6";case"N":return"7";case"Q":return"8";case"U":return"9";case"V":return"10";case"X":return"1","1","11";case"Z":return"12"}return t},t.money=function(e,i,a){return a||(a="$"),3==a.length&&(a+=" "),W.f7H(),i||0===i||(i=2),a+t.commas((Math.round(1e4*e)/1e4).toFixed(i))},t.convertCurrencyCode=function(e){var t;return"S","$","z","ł","K","č","C","N¥","C","A","$","R","$",t={JPY:"¥",USD:"$",AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN¥",CZK:"Kč",DKK:"kr",EUR:"€",GBP:"£",HKD:"HK$",HUF:"Ft",ILS:"₪",INR:"₹",KRW:"₩",MXN:"MX$",NOK:"kr",NZD:"NZ$",PLN:"zł",RUB:"руб",SAR:"﷼",SEK:"kr",SGD:"S$",THB:"฿",TRY:"₺",TWD:"NT$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF",ZAR:"R"}[e],W.f7H(),t||e},t.commas=function(e){return W.f7H(),e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t.cleanPeriodicity=function(e,t,i){var a=W;return isNaN(e)&&(e=1),t||(t=1),!isNaN(t)&&i?("h","o","u","r","hour"!=i&&"minute"!=i&&"second"!=i&&"millisecond"!=i&&(t=i,i=null)):"tick"==t?i=null:i||isNaN(t)||(i="minute"),"hour"==i&&("mi","nu","t","e",i="minute",a.O9g(91),t=a.a9g(t,"60",1)),a.f7H(),"year"==t&&(t="month",e||(e=1),a.Y9g(3),e=a.M9g(12,e)),{period:e,interval:t,timeUnit:i}},t.readablePeriodicity=function(e){var i,a,r=W;i=e.layout.periodicity,a=e.layout.interval,"number"==s(e.layout.interval)&&e.layout.timeUnit?(i=e.layout.interval*e.layout.periodicity,a=e.layout.timeUnit):"number"!=s(e.layout.interval)||e.layout.timeUnit||(i=e.layout.interval*e.layout.periodicity,a="minute"),i%60==0&&"minute"==a&&(i/=60,a="hour"),r.O9g(12);var n=r.a9g(7,2366);r.O9g(92);var o=r.a9g(8,6,18,4894,112566);r.Y9g(93);var l=r.a9g(1,4,6556,219,438);r.O9g(94);r.a9g(15,1501738808,4,25,14);r.Y9g(16);var h=r.M9g(17700,20650);r.Y9g(16);var c=r.a9g(7524,8360);r.Y9g(95);r.a9g(10,3298,18,33050,11);r.O9g(57);r.M9g(13,13,576,7535,15);r.Y9g(39);var u=r.M9g(14,8,20,79416,626330);return i+(233.2<=n?o<l?h>=c&&" ":210.99:u)+e.translateIf(t.capitalize(a))},t.fixPrice=function(e){var t;if(W.t7H(),!e&&0!==e)return null;for(var i=(t=e.toFixed(10)).length-1;i>1&&"0"==t.charAt(i);i--);return W.Y9g(12),t=t.substring(0,W.a9g(1,i)),parseFloat(t)},t.condenseInt=function(e){var t,i,a=W;if("n","/a",null==e)return"";if(e===1/0||e===-1/0)return"n/a";if(a.O9g(96),t=a.M9g(e,0),isNaN(e)){1026184954,70305769,i=2;for(var r=1;1026184954!==a.a8Y(r.toString(),r.toString().length,92070);r++)e=e.toString(),i+=2;70305769!==a.a8Y(i.toString(),i.toString().length,2721)&&(e=e.toString())}else if((e=Math.abs(e))>1e12){a.Y9g(82);var n=a.M9g(9,1,1);a.Y9g(14);a.M9g(15,103950,111930);a.Y9g(12);var s=a.a9g(10,131);a.Y9g(12);var o=a.a9g(5,7345);a.Y9g(14);var l=a.M9g(13,10,9872);a.Y9g(87);a.a9g(54342,9057,18,9043);e=Math.round(e/1e11)/n+(199.22<s?o:875.81!==l&&"t")}else if(e>1e11){a.O9g(81);var h=a.a9g(9,142857142,999999985,999999993);e=Math.round(e/h)+"b"}else if(e>1e10){a.O9g(97);var c=a.M9g(17,22,4,0);e=(Math.round(e/1e8)/10).toFixed(c)+"b"}else if(e>1e9){a.Y9g(7);var u=a.a9g(9,7);e=(Math.round(e/1e7)/100).toFixed(u)+"b"}else if(e>1e8){a.O9g(65);var d=a.a9g(10,78999950,5,16e6);a.O9g(12);var p=a.M9g(12,2258);a.O9g(63);a.a9g(2564,11,407,11);a.O9g(63);var g=a.a9g(1356,18,184,4);a.O9g(12);var f=a.a9g(11,65);a.O9g(17);a.M9g(9103,16,136558);e=Math.round(e/d)+(p>=g?f>7744?"O":"m":"o")}else if(e>1e7){a.O9g(98);var m=a.a9g(448589,13,3,104868,3);e=(Math.round(e/1e5)/10).toFixed(1)+(112.13<=m&&"m")}else if(e>1e6){a.O9g(16);var y=a.M9g(30,32);a.O9g(39);a.a9g(3,19,9,8385,150758);a.Y9g(99);var v=a.M9g(3,104,6,13,1023);a.O9g(25);a.M9g(2634,2637,2631,6);a.O9g(82);a.a9g(843,123,861);a.Y9g(100);var x=a.M9g(2804,45303,17,20,5);e=(Math.round(e/1e4)/100).toFixed(y)+(v<=3468?"m":x)}else if(e>1e5){a.Y9g(101);var b=a.a9g(19,15947,998,17,1);a.O9g(27);var C=a.a9g(34,7,8195,9);a.Y9g(16);var S=a.a9g(19,6060);a.O9g(102);a.a9g(16,1,17,3767,56783);e=Math.round(e/b)+(C==S||"k")}else if(e>1e4){a.O9g(0);var w=a.M9g(2,8,8,6);a.Y9g(12);var k=a.a9g(8605,861);a.Y9g(82);a.M9g(2344,1163,2326);a.Y9g(18);var A=a.M9g(2,1,218,2397,3);e=(Math.round(e/100)/10).toFixed(w)+(k!==A?"k":8660)}else if(e>1e3){a.Y9g(27);var D=a.a9g(32,20,0,14);e=(Math.round(e/10)/100).toFixed(D)+"k"}else e=e.toString();return t&&(a.O9g(12),e=a.a9g(e,"-")),e},t.calculateTradingDecimalPlaces=function(e){var t,i,a,r,n,s,o,l,h,c=W;if(t=e.chart,c.O9g(90),i=c.M9g(0,"2"),50,(a=t.masterData)&&a.length>50)for(var u=2;u<50&&!((r=a.length-u)<0);u++)if((n=a[r]).Close&&"number"==typeof n.Close&&-1!=(o=(s=n.Close.toString()).indexOf("."))){c.Y9g(103);var d=c.a9g(612,2,17,18,2);(l=s.length-o-d)>i&&(i=l)}return i>(h=t.yAxis.maxDecimalPlaces)&&null!==h&&(i=h),i},t.minMax=function(e,t,i,a){var r,n,o,l,h,c,u;W.t7H(),r=Number.MAX_VALUE,n=-1*Number.MAX_VALUE,i||(i="Close"),o=a?"High":i,l=a?"Low":i;for(var d=0;d<e.length;d++)(h=e[d])&&((c=h[t])||0===c)&&(u=c,"object"===s(c)&&(u=c[o]),isNaN(u)||!u&&0!==u||(n=Math.max(n,u)),"object"===s(c)&&(u=c[l]),isNaN(u)||!u&&0!==u||(r=Math.min(r,u)));return[r,n]},t.symbolEqual=function(e,t){var i,a;return"f","unc","tio","n",!(!e||!t)&&("object"!=s(e)&&(e={symbol:e}),"object"!=s(t)&&(t={symbol:t}),"function"==s(e.equals)?e.equals(t):(i=e.symbol,a=t.symbol,i&&(i=i.toUpperCase()),a&&(a=a.toUpperCase()),i==a&&e.source==t.source))},t.addMemberToMasterdata=function(e){var i,a,r,n,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F;function _(e){var t,i,a,r=W;t=u,r.O9g(104);var n=r.a9g(17,21,19,19,4);if(i=p.length-n,p[i].DT<e)return r.O9g(12),void(u=r.M9g(1,i));if(+p[i].DT!=+e){for(r.f7H(),u++,a=0;++a<100;){switch(o()){case 0:return;case 1:t=u;break;case-1:i=u}r.O9g(49),u=Math.round(r.a9g(t,2,i))}if(a>=100){console.log("!!!Warning: addMemberToMasterdata() did not find insertion point."),r.Y9g(105);var s=r.M9g(6,5,19,39,4);u=p.length-s}}else u=i;function o(){return+p[u].DT==+e?0:p[u].DT<e?1:p[u-1].DT>e?-1:(+p[u-1].DT==+e&&u--,r.Y9g(3),r.t7H(),r.M9g(1,"0"))}}function P(e,t){var i;if(W.f7H(),!e||"object"!=s(e))return e=t;for(var a in i={Close:e.Close,High:e.High,Low:e.Low,Open:e.Open,Volume:e.Volume},e=t,i)null===e.Close?void 0!==e[a]&&(e[a]=null):"number"!=typeof e[a]?e[a]=i[a]:"number"==typeof i[a]&&("Open"==a?e.Open=i.Open:"Low"==a&&e.Low>i.Low?e.Low=i.Low:"High"==a&&e.High<i.High?e.High=i.High:"Volume"==a&&(e.Volume+=i.Volume));return e}if(e.constructor===t.ChartEngine&&(e={stx:arguments[0],label:arguments[1],data:arguments[2],fields:arguments[3],createObject:arguments[4],fieldForLabel:arguments[5]}),W.t7H(),i=e.stx,a=e.label,r=e.data,n=e.fields,o=e.createObject,l=e.fieldForLabel,h=e.chart?e.chart:i.chart,e.noCleanupDates||i.doCleanupDates(r,i.layout.interval),c=[],i.getSeries&&(c=i.getSeries({symbol:a,chart:h})),r&&r.constructor==Object&&(r=[r]),r&&r.length){u=0,d=0,p=h.masterData,g=i.layout,p||(p=[]),y=h&&h.defaultPlotField||null,v=i.mainSeriesRenderer&&!i.mainSeriesRenderer.highLowBars,x=g.chartType,!v&&x&&(b=t.Renderer.produce(x,{}))&&(v=!b.highLowBars),C=380765756,S=-206821088,w=2;for(var V=1;W.u8Y(V.toString(),V.toString().length,24089)!==C;V++)k=t.yyyymmddhhmmssmmm,w+=2;for(W.a8Y(w.toString(),w.toString().length,85107)!==S&&(k=t.yyyymmddhhmmssmmm);r&&u<p.length&&d<r.length;){if(m=r[d],f=p[u],m.DT&&void 0!==m.DT?(A="num",A+="be",A+="r",s(m.DT)==A&&(m.DT=new Date(m.DT)),m.Date&&17==m.Date.length||(m.Date=k(m.DT))):m.DT=t.strToDateTime(m.Date),0===d)for(var O=0;O<c.length;O++)(!c[O].endPoints.begin||c[O].endPoints.begin>m.DT)&&(c[O].endPoints.begin=m.DT);+m.DT!=+f.DT?m.DT<f.DT?p.splice(u,0,{DT:m.DT,Date:m.Date}):_(m.DT):(H(f,m),d++,u++)}if(u>=p.length)for(;r&&d<r.length;)(m=r[d]).DT&&void 0!==m.DT?(D="num",D+="b",D+="e",D+="r",s(m.DT)==D&&(m.DT=new Date(m.DT)),m.Date&&17==m.Date.length||(m.Date=k(m.DT))):m.DT=t.strToDateTime(m.Date),H(f={DT:m.DT,Date:m.Date},m),p.push(f),d++;if(e.fillGaps&&p.length)if(M={noCleanupDates:!0,cleanupGaps:e.fillGaps},n)for(var I=0;I<n.length;I++)M.field=n[I],i.doCleanupGaps(p,h,M);else M.field=a,i.doCleanupGaps(p,h,M);for(var L=0;L<c.length;L++)(!(T=c[L].endPoints).end||!a||T.end<=f[a].DT)&&(T.end=a?f[a].DT:f.DT,F=a||c[L].parameters&&c[L].parameters.field||h.defaultPlotField,c[L].lastQuote=i.getFirstLastDataRecord(p,F,!0));i.setMasterData(p,h,{noCleanupDates:!0})}function H(e,i){var r,h,c;if(n&&n.length)if("*"==n[0])t.extend(e,i);else for(var u=0;u<n.length;u++)e[n[u]]=i[n[u]];else if(o){if("nu","m","be","r","a","ggre","gat","e",void 0!==i.Value)return void(e[a]=i.Value);e[a]="aggregate"==o?P(e[a],i):i,"number"==typeof(r=e[a]).Close&&("number"!=typeof r.Open&&(r.Open=r.Close),h=Math.max(r.Open,r.Close),c=Math.min(r.Open,r.Close),("number"!=typeof r.High||r.High<h)&&(r.High=h),("number"!=typeof r.Low||r.Low>c)&&(r.Low=c)),r.Volume&&"number"!==s(r.Volume)&&(r.Volume=parseInt(r.Volume,10))}else l?e[a]=i[l]:v&&y&&void 0!==i[y]?e[a]=i[y]:g.adj&&void 0!==i.Adj_Close?e[a]=i.Adj_Close:void 0!==i.Close?e[a]=i.Close:void 0!==i.Value?e[a]=i.Value:e[a]=i[a]}}},y=function(e){var t;t=e.CIQ,Math.easeInOutQuad=function(e,t,i,a){var r=W;return r.f7H(),r.O9g(36),(e/=r.M9g(2,a))<1?(r.Y9g(106),r.M9g(e,i,t,e,2)):(e--,r.Y9g(107),r.M9g(1,e,i,t,2,e,2))},Math.easeInOutCubic=function(e,t,i,a){var r=W;return r.Y9g(36),e/=r.M9g(2,a),r.t7H(),e<1?(r.Y9g(108),r.M9g(i,e,t,e,e,2)):(e-=2,r.O9g(109),r.M9g(2,t,2,i,e,e,e))},Math.easeOutCubic=function(e,t,i,a){return W.t7H(),e/=a,e--,W.O9g(110),W.a9g(1,t,i,e,e,e)},t.xor=function(e,t){var i,a;return i=!e,a=!t,W.t7H(),W.O9g(111),W.a9g(i,a)},t.round=function(e,t){return"e","-",Number(Math.round(e+"e"+t)+"e-"+t)},t.countDecimals=function(e){var i,a=W;if("n","u",a.f7H(),"mbe","r","number"!==s(e)||isNaN(e))return a.O9g(48),a.a9g(0,"0");if(Math.floor(e)===Number(e))return 0;if((i=e.toString().split("e-")).length>1){a.O9g(112);var r=a.M9g(5,5,7,8);return t.countDecimals(Number(i[0]))+Number(i[r])}return i[0].indexOf(".")>-1?i[0].split(".")[1].length:0},t.isValidNumber=function(e){return isFinite(e)&&+e===e},t.log10=function(e){return W.t7H(),Math.log(e)/Math.LN10},t.boxIntersects=function(e,t,i,a,r,n,s,o,l){var h,c,u,d,p,g;function f(e,t){return W.O9g(113),W.a9g(r,o,r,e,t,n,n,s)}if(void 0!==arguments[9]&&console.warn("CIQ.boxIntersects() no longer supports isLog argument, please be sure arguments are passed in as pixels."),h=Math.min(e,i),c=Math.max(e,i),u=Math.min(t,a),d=Math.max(t,a),W.Y9g(114),p=W.a9g(l,"ray"),W.t7H(),isNaN(r)||isNaN(s)||isNaN(n)||isNaN(o))return!1;if("line"!=l){if(r<h&&s<h&&(!p||r>s))return!1;if(r>c&&s>c&&(!p||r<s))return!1;if(n<u&&o<u&&(!p||n>o))return!1;if(n>d&&o>d&&(!p||n<o))return!1}return!((g={a:f(e,t),b:f(e,a),c:f(i,t),d:f(i,a)}).a>0&&g.b>0&&g.c>0&&g.d>0)&&!(g.a<0&&g.b<0&&g.c<0&&g.d<0)},t.linesIntersect=function(e,t,i,a,r,n,s,o,l){var h,c,u,d,p,g=W;if("r","a","y","ve","r","tica","l","ho","rizonta","l","s","e","gme","nt",g.O9g(113),h=g.a9g(r,a,e,n,o,i,s,t),g.Y9g(113),c=g.M9g(s,e,s,o,n,r,r,i),g.O9g(113),u=g.M9g(i,e,s,a,t,r,e,i),0===h)return 0===c&&0===u;if(g.O9g(36),d=g.a9g(h,c),g.O9g(36),p=g.M9g(h,u),"segment"==l){if(d>=0&&d<=1&&p>=0&&p<=1)return!0}else if("line"==l||"horizontal"==l||"vertical"==l){if(d>=0&&d<=1)return!0}else if("ray"==l&&d>=0&&d<=1&&p>=0)return!0;return!1},t.yIntersection=function(e,t){var i,a,r,n,s,o,l,h,c,u=W;if(i=e.x0,a=e.x1,u.t7H(),r=t,n=t,s=e.y0,o=e.y1,0,1e4,u.Y9g(113),l=u.M9g(r,o,i,n,1e4,s,0,a),u.Y9g(113),h=u.M9g(0,i,0,1e4,n,r,r,s),u.Y9g(36),c=u.a9g(l,h),0===l){if(0!==h)return null;c=1}return u.O9g(115),u.a9g(s,o,s,c)},t.xIntersection=function(e,t){var i,a,r,n,s,o,l,h,c,u,d=W;if(i=e.x0,a=e.x1,0,1e4,r=e.y0,n=e.y1,s=t,o=t,d.Y9g(113),l=d.M9g(0,n,i,1e4,o,r,s,a),d.Y9g(113),h=d.M9g(s,i,s,o,1e4,0,0,r),d.O9g(36),c=d.M9g(l,h),0===l){-1895670136,-532502521,u=2;for(var p=1;-1895670136!==d.a8Y(p.toString(),p.toString().length,37439);p++){if(3===h)return 1;c=6,u+=2}if(-532502521!==d.u8Y(u.toString(),u.toString().length,25196)){if(0!==h)return null;c=1}}return d.O9g(115),d.M9g(i,a,i,c)},t.intersectLineLineX=function(e,t,i,a,r,n,s,o){var l,h,c,u=W;return u.O9g(113),l=u.a9g(s,e,s,o,n,r,r,i),u.O9g(113),h=u.a9g(r,a,e,n,o,i,s,t),u.Y9g(36),c=u.a9g(h,l),u.Y9g(115),u.M9g(e,t,e,c)},t.intersectLineLineY=function(e,t,i,a,r,n,s,o){var l,h,c,u=W;return u.Y9g(113),u.f7H(),l=u.M9g(s,e,s,o,n,r,r,i),u.Y9g(113),h=u.M9g(r,a,e,n,o,i,s,t),u.Y9g(36),c=u.a9g(h,l),u.Y9g(115),u.a9g(i,a,i,c)}},v=function(e){var t;(t=e.CIQ).deleteRHS=function(e,t){var i;for(var a in i=!1,e)e[a]==t&&(delete e[a],i=!0);return i},t.scrub=function(e,t){for(var i in e)void 0===e[i]&&delete e[i],t&&null===e[i]&&delete e[i]},t.dataBindSafeAssignment=function(e,i){for(var a in t.extend(e,i),W.f7H(),e)void 0===i[a]&&(e[a]=void 0)},t.clone=function(e,i){var a;if(W.t7H(),"ob","jec","t",null===e||"object"!=s(e))return e;if((a=e.constructor)==Date||a==RegExp||a==String||a==Number||a==Boolean)return new a(e.valueOf());if(a==Function)return function(){return W.f7H(),e.apply(this,arguments)};if(!i)try{i=new a}catch(t){i=Object.create(Object.getPrototypeOf(e))}for(var r in e)i[r]=i[r]!==e[r]?t.clone(e[r],null):i[r];return i},t.shallowClone=function(e){var t;if(!e)return e;if(W.f7H(),e.constructor==Array){t=new Array(e.length);for(var i=0;i<e.length;i++)t[i]=e[i];return t}for(var a in t={},e)t[a]=e[a];return t},t.ensureDefaults=function(e,t){for(var i in t)"un","defin","e","d","undefined"==s(e[i])&&(e[i]=t[i]);return e},t.transferObject=function(e,t){var i;for(i in e)e.hasOwnProperty(i)&&delete e[i];for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},t.equals=function(e,i,a){if(!e&&i)return!1;if(e&&!i)return!1;if(W.t7H(),s(e)!==s(i))return!1;for(var r in e)if("o","bject",!a||!a[r])if("object"!==s(e[r])){if(i[r]!=e[r])return!1}else if(!t.equals(e[r],i[r]))return!1;return!0},t.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.first=function(e){for(var t in e)return t;return null},t.last=function(e){var t,i,a,r=W;for(var n in t=null,r.f7H(),e)t=n;r.Y9g(3),i=r.M9g(1,"409891202"),r.Y9g(24),a=r.a9g("2",2147483647);for(var s=1;r.u8Y(s.toString(),s.toString().length,61361)!==i;s++)return t;if(-123670980!==r.u8Y(a.toString(),a.toString().length,42122))return t},t.objLength=function(e){var t;if(!e)return 0;for(var i in W.Y9g(48),t=W.a9g(0,"0"),e)t++;return t},t.deriveFromObjectChain=function(e,t){var i,a;if(-1==t.indexOf("."))return{obj:e,member:t};i=t.split(".");for(var r=0;r<i.length-1;r++)e[a=i[r]]||0===e[a]||(e[a]={}),e=e[a];return W.f7H(),{obj:e,member:i[r]}},t.createObjectChainNames=function(e,t){var i;i=[],W.f7H();for(var a=0;a<t.length;a++)i.push(e+"--\x3e"+t[a]);return i},t.existsInObjectChain=function(e,t){var i,a;if(-1==t.indexOf("--\x3e"))return e[t]||0===e[t]?{obj:e,member:t}:null;i=t.split("--\x3e");for(var r=0;r<i.length-1;r++){if(!e[a=i[r]]&&0!==e[a])return null;e=e[a]}return e[a=i[r]]||0===e[a]?{obj:e,member:a}:null},t.derivedFrom=function(e,t){return!!t.isPrototypeOf(e)||e instanceof t},t.replaceFields=function(e,i){var a,r,n,o,l;if(!e)return e;for(var h in W.f7H(),a={},e)if(r=e[h],(n=i[h])||(n=h),r&&"object"==s(r))if(r.constructor==Array){o=a[n]=new Array(r.length);for(var c=0;c<o.length;c++)"object"==s(l=r[c])?o[c]=t.replaceFields(l,i):o[c]=l}else a[n]=t.replaceFields(r,i);else a[n]=r;return a},t.removeNullValues=function(e){var i;for(var a in i=t.clone(e),W.f7H(),i)i[a]||delete i[a];return i},t.reverseObject=function(e){var t;for(var i in t={},e)t[e[i]]=i;return W.t7H(),t},t.getFromNS=function(e,t,i){var a,r,n;if(e){a=e,r=t.split(".");for(var s=0;s<r.length&&void 0!==a[n=r[s]];s++)a=a[n];if(s===r.length)return a}return i},t.getFnFromNS=function(e,i,a){return W.t7H(),t.getFromNS(e,i,(function(){return a}))},t.get=function(e,i){return W.f7H(),t.getFromNS(t,e,i)},t.getFn=function(e,i){return W.t7H(),t.getFromNS(t,e,(function(){return W.f7H(),i}))}},x=function(e){var t;(t=e.CIQ).Plotter=function(){W.t7H(),this.seriesArray=[],this.seriesMap={}},W.t7H(),t.extend(t.Plotter.prototype,{Series:function(e,i,a,r,n,s){W.t7H(),this.name=e,this.strokeOrFill=i,this.color=a,this.moves=[],this.text=[],(!r||r>1||r<0)&&(r=1),this.opacity=r,(!n||n>25||n<1)&&(n=1),this.width=n,this.pattern=t.borderPatternToArray(n,s)},newSeries:function(e,i,a,r,n){var s;s=a.constructor==String?new this.Series(e,i,a,r,n):new this.Series(e,i,a.color,a.opacity,n>=0?n:t.stripPX(a.width),a.borderTopStyle),this.seriesArray.push(s),this.seriesMap[e]=s},reset:function(e){var t;for(var i in W.f7H(),this.seriesMap)e&&e!=i||(t=this.seriesMap[i])&&(t.moves=[],t.text=[])},moveTo:function(e,t,i){W.f7H(),this.seriesMap[e].moves.push({action:"moveTo",x:t,y:i})},lineTo:function(e,t,i){var a,r;r=(a=this.seriesMap[e]).pattern,a.moves.push({action:"lineTo",x:t,y:i,pattern:r})},dashedLineTo:function(e,t,i,a){W.f7H(),this.seriesMap[e].moves.push({action:"lineTo",x:t,y:i,pattern:a})},quadraticCurveTo:function(e,t,i,a,r){var n,s;s=(n=this.seriesMap[e]).pattern,W.f7H(),n.moves.push({action:"quadraticCurveTo",x0:t,y0:i,x:a,y:r,pattern:s})},bezierCurveTo:function(e,t,i,a,r,n,s){var o,l;W.f7H(),l=(o=this.seriesMap[e]).pattern,o.moves.push({action:"bezierCurveTo",x0:t,y0:i,x1:a,y1:r,x:n,y:s,pattern:l})},addText:function(e,t,i,a,r,n,s){var o;o=this.seriesMap[e],W.f7H(),o.text.push({text:t,x:i,y:a,bg:r})},drawText:function(e,t){for(var i,a,r,n,s=0;s<t.text.length;s++)(i=t.text[s]).bg&&("r","ig","h","t",a=i.width?i.width:e.measureText(i.text).width,r=i.height?i.height:12,n=e.fillStyle,e.fillStyle=i.bg,"right"==e.textAlign?e.fillRect(i.x,i.y-r/2,-a,-r):e.fillRect(i.x,i.y-r/2,a,r),e.fillStyle=n),e.fillText(i.text,i.x,i.y)},draw:function(e,t){var i,a,r,n,s,o;i=e.lineWidth,a=e.fillStyle,W.t7H(),r=e.strokeStyle,n=e.globalAlpha;for(var l=0;l<this.seriesArray.length;l++)if(s=this.seriesArray[l],!t||s.name==t){e.beginPath(),e.lineWidth=s.width,e.globalAlpha=s.opacity,e.fillStyle=s.color,e.strokeStyle=s.color,e.save();for(var h=0;h<s.moves.length;h++)"bezi","er","Cu","rveTo","q","uadraticCurveTo",(o=s.moves[h]).pattern?(e.setLineDash(o.pattern),e.lineDashOffset=0):e.setLineDash([]),"quadraticCurveTo"==o.action?e[o.action](o.x0,o.y0,o.x,o.y):"bezierCurveTo"==o.action?e[o.action](o.x0,o.y0,o.x1,o.y1,o.x,o.y):e[o.action](o.x,o.y);"fill"==s.strokeOrFill?e.fill():e.stroke(),e.closePath(),e.restore(),this.drawText(e,s),W.O9g(48),e.lineWidth=W.a9g(1,"1")}e.lineWidth=i,e.fillStyle=a,e.strokeStyle=r,e.globalAlpha=n}},!0)},b=function(e){var t;(t=e.CIQ).Renderer=function(){},t.Renderer.produce=function(e,i){var a,r;if(a=null,W.f7H(),e)for(var n in t.Renderer)if((r=t.Renderer[n]).requestNew&&(a=r.requestNew(e.split("_"),i)),a)return a;return i.type="line",new t.Renderer.Lines({params:i})},t.Renderer.colorFunctions={},t.Renderer.registerColorFunction=function(e,i){W.f7H(),t.Renderer.colorFunctions[e]=i},t.Renderer.unregisterColorFunction=function(e){W.t7H(),delete t.Renderer.colorFunctions[e]},t.Renderer.prototype.adjustYAxis=function(){},t.Renderer.prototype.draw=function(){},t.Renderer.prototype.drawIndividualSeries=function(e,t){},t.Renderer.prototype.construct=function(e){var i;e||(e={}),(i=e.params?e.params:{}).name||(i.name=t.uniqueID()),i.heightPercentage||(i.heightPercentage=.7),i.opacity||(W.O9g(48),i.opacity=W.M9g(0,"1")),!1!==i.highlightable&&(i.highlightable=!0),i.panel||(i.panel="chart"),i.yAxis&&(i.yAxis=new t.ChartEngine.YAxis(i.yAxis),i.yAxis.name||(i.yAxis.name=i.name)),this.cb=e.callback,this.params=i,this.seriesParams=[],this.caches={},this.colors={}},t.Renderer.prototype.attachSeries=function(e,i){var a,r,n,o,l,h,c,u,d,p,g,f=W;if("stri","n","g",!(a=this.stx))return this;if((r=a.chart.series[e])||(r={parameters:{}}),n=this.params,o=r.parameters,l={id:e,chartType:n.type,display:o.display,border_color_up:n.defaultBorders?"auto":null,fill_color_up:o.color,opacity_up:n.opacity,border_color_down:n.defaultBorders?"auto":null,fill_color_down:o.color,opacity_down:n.opacity,color:o.color,symbol:o.symbol,symbolObject:t.clone(o.symbolObject)},"string"==s(i))l.color=l.fill_color_down=l.fill_color_up=i;else if("object"==s(i)){for(var m in i)l[m]=i[m];h=l.color,c=l.border_color,h&&(l.fill_color_up||(l.fill_color_up=h),l.fill_color_down||(l.fill_color_down=h),l.fill_color_even||(l.fill_color_even=h)),c&&(l.border_color_up||(l.border_color_up=c),l.border_color_down||(l.border_color_down=c),l.border_color_even||(l.border_color_even=c))}for(l.symbol&&l.field!=l.symbol&&(l.subField=l.field,l.field=l.symbol),l.id||(l.id=t.uniqueID()),u=0;u<this.seriesParams.length;++u)if(this.seriesParams[u].id===l.id){this.removeSeries(l.id,!0);break}if(this.seriesParams.splice(u,0,l),l.fill_color_up!=l.fill_color_down?(" ","d","n"," ","u","p",f.Y9g(12),this.colors[f.a9g(" up",e)]={color:l.fill_color_up,opacity:l.opacity_up,display:l.display?l.display+" up":e+" up"},f.O9g(12),this.colors[f.M9g(" dn",e)]={color:l.fill_color_down,opacity:l.opacity_down,display:l.display?l.display+" down":e+" down"}):this.colors[e]={color:l.fill_color_up,opacity:l.opacity_up,display:l.display?l.display:e},d=n.panel,a.panels[d])n.yAxis?(n.yAxis=a.addYAxis(a.panels[d],n.yAxis),n.yAxis.needsInitialPadding=!0,o.yAxis=n.yAxis,a.resizeChart()):l.yAxis&&(n.yAxis=l.yAxis);else{(p=n.yAxis)||((p=new t.ChartEngine.YAxis).needsInitialPadding=!0),238936238,-1734882796,g=2;for(var y=1;238936238!==f.u8Y(y.toString(),y.toString().length,75105);y++)p.name=d,a.createPanel(d,d,1,1,p),g+=2;-1734882796!==f.a8Y(g.toString(),g.toString().length,66063)&&(p.name=d,a.createPanel(d,d,2,2,p)),p.name=d,a.createPanel(d,d,null,null,p)}return f.f7H(),this},t.Renderer.prototype.removeSeries=function(e,t){var i,a,r,n,s,o,l,h,c=W;for(var u in" ","d","n",i=null,a=!1,(n=(r=this.stx).chart).seriesRenderers){s=n.seriesRenderers[u];for(var d=0;d<s.seriesParams.length;d++)(o=s.seriesParams[d]).id==e&&this===s?i=d:!o.isComparison||o.panel!=n.panel.name||o.yAxis&&o.yAxis!=n.yAxis||(a=!0)}if(null!==i&&(n.forcePercentComparison&&!a&&this.seriesParams[i].isComparison&&"linear"!=r.layout.chartScale&&r.setChartScale(),c.Y9g(16),this.seriesParams.splice(i,c.a9g(0,"1"))),c.Y9g(12),delete this.colors[c.a9g(" up",e)],c.O9g(12),delete this.colors[c.M9g(" dn",e)],delete this.colors[e],!t){for(var p in n.seriesRenderers){h=n.seriesRenderers[p];for(var g=0;g<h.seriesParams.length;g++){if(h.seriesParams[g].id==e){l=!0;break}l=!1}if(l)break}!1!==l&&null===i||r.deleteSeries(e,n)}return r.deleteYAxisIfUnused(r.panels[this.params.panel],this.params.yAxis),r.resizeChart(),r.layout.symbols=r.getSymbols({"include-parameters":!0,"exclude-studies":!0}),r.changeOccurred("layout"),this},t.Renderer.prototype.modifyRenderer=function(e){var i;this.params;var a=this.stx;for(var r in e)switch("typ","e",i=e[r],r){case"baseline":i?("object"===s(i)&&(this.params.baseline=t.ensureDefaults(i,t.ChartEngine.Chart.prototype.baseline)),a.registerBaselineToHelper(this)):a.removeBaselineFromHelper(this);break;case"type":this.params.type=i;break;case"style":this.params.style=i}},t.Renderer.prototype.getDependents=function(e){var t,i;for(var a in t=[],W.t7H(),e.chart.seriesRenderers)(i=e.chart.seriesRenderers[a]).params.dependentOf==this.params.name&&t.push(i);return t},t.Renderer.prototype.undraggable=function(e){return this==e.mainSeriesRenderer||this.params.dependentOf==e.mainSeriesRenderer.params.name},t.Renderer.prototype.removeAllSeries=function(e){var t;if(e||this===this.stx.mainSeriesRenderer){t=[];for(var i=0;i<this.seriesParams.length;i++)t.push(this.seriesParams[i].id);for(var a=0;a<t.length;a++)this.removeSeries(t[a])}return this.seriesParams=[],this.colors={},this.stx.deleteYAxisIfUnused(this.stx.panels[this.params.panel],this.params.yAxis),this.stx.resizeChart(),this},t.Renderer.prototype.getYAxis=function(e){var t,i;if(this.params)if(this.params.yAxis)t=this.params.yAxis;else{if(!(i=e.panels[this.params.panel]))return!1;t=i.yAxis}else t=e.chart.panel.yAxis;return t},t.Renderer.prototype.ready=function(){return W.t7H(),this.stx.createDataSet(),this.stx.draw(),this},t.Renderer.Lines=function(e){this.construct(e);var i=this.params;if(i.type||(i.type="line"),!i.style)switch("stx_","c","olored_mountain_chart",i.type){case"mountain":i.baseline?i.style="stx_baseline_delta_mountain":i.colored?i.style="stx_colored_mountain_chart":i.style="stx_mountain_chart";break;default:i.style="stx_line_chart"}this.supportsAnimation=!0,"wave"==i.type||"channel"==i.type?(i.step=i.vertex=i.baseline=i.colored=!1,this.highLowBars=this.barsHaveWidth=!0,this.supportsAnimation=!1):"step"==i.type&&(i.step=!0);var a=i.baseline;a&&"object"===s(a)&&t.ensureDefaults(i.baseline,t.ChartEngine.Chart.prototype.baseline)},t.inheritsFrom(t.Renderer.Lines,t.Renderer,!1),t.Renderer.Lines.requestNew=function(e,i){var a,r,n,s,o,l;a=null,r=i.step,W.t7H(),n=i.colored,s=i.baseline,o=i.vertex;for(var h=0;h<e.length;h++)switch("l","i","n","e",l=e[h]){case"line":case"mountain":case"wave":case"channel":a=l;break;case"baseline":s=!0;break;case"colored":n=!0;break;case"step":r=!0;break;case"vertex":o=!0;break;case"delta":break;default:return null}return null!==a||s||r?new t.Renderer.Lines({params:t.extend(i,{type:a,step:r,colored:n,baseline:s,vertex:o})}):null},t.Renderer.Lines.prototype.draw=function(){var e,i,a,r,n,s,o,l,h,c;for(e=this.stx,i=this.stx.panels[this.params.panel].chart,a={},n=this.seriesParams,s=this.params.colorFunction,r=0;r<n.length;r++){if(o=n[r],this.params.colored){l=["_color_up","_color_down","_color"];for(var u=0;u<l.length;u++)"a","u","t","o","b","ord","er",(h=o["border"+l[u]])&&"auto"!=h&&(o["fill"+l[u]]=h);s||(s=d(o)),this.params.colorFunction=s}c={},i.series[o.id]&&(c=t.clone(i.series[o.id].parameters)),a[o.id]={parameters:t.extend(t.extend(c,this.params),o),yValueCache:this.caches[o.id]},this==e.mainSeriesRenderer&&i.customChart&&i.customChart.colorFunction&&(a[o.id].parameters.colorFunction=i.customChart.colorFunction)}for(r in e.drawSeries(i,a,this.params.yAxis,this),a)this.caches[r]=a[r].yValueCache;function d(t){var i,a,r;return W.f7H(),"stx_li","ne_up",i=t.fill_color_up||e.getCanvasColor("stx_line_up"),a=t.fill_color_down||e.getCanvasColor("stx_line_down"),r=t.color||e.getCanvasColor("stx_line_chart"),function(e,t,n){return t.iqPrevClose||0===t.iqPrevClose?t.Close>t.iqPrevClose?i:t.Close<t.iqPrevClose?a:r:r}}},t.Renderer.Lines.prototype.drawIndividualSeries=function(e,i){var a,r,n,s,o,l,h,c=W;if("c","ha","nne","l",!i.invalid&&(a=this.stx,r=e.context,n=null,s=i.colorFunction,o=a.panels[i.panel]||e.panel,"string"!=typeof s||(s=t.Renderer.colorFunctions[s]))){if(i.vertex&&("beve","l",r.save(),r.lineJoin="bevel"),"wave"==i.type)n=a.drawWaveChart(o,i);else if(i.baseline)n=a.drawBaselineChart(o,i),a.positionBaselineHandle(this);else if("mountain"==i.type)i.returnObject=!0,n=a.drawMountainChart(o,i,s);else if("channel"==i.type)i.returnObject=!0,n=a.drawChannelChart(o,s,i);else{c.O9g(3),l=c.M9g(1,"1031357034"),949362475,h=2;for(var u=1;c.u8Y(u.toString(),u.toString().length,4256)!==l;u++)i.returnObject=!1,h+=2;949362475!==c.a8Y(h.toString(),h.toString().length,94654)&&(i.returnObject=!0),n=a.drawLineChart(o,i.style,s,i)}return i.vertex&&(a.scatter(o,{yAxis:i.yAxis,field:i.symbol||i.field,subField:i.subField,symbol:i.symbol,color:i.vertex_color,highlight:i.highlight}),r.restore()),n}},t.Renderer.OHLC=function(e){var t;this.construct(e),(t=this.params).type||(t.type="candle"),this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,W.t7H(),t.histogram&&(t.type="candle",this.highLowBars=!1,t.volume=t.hollow=!1),"bar"==t.type&&(t.volume=t.hollow=t.histogram=!1),"candle"==t.type&&(t.hlc=t.colored=!1),t.volume&&(t.hollow=!0)},t.inheritsFrom(t.Renderer.OHLC,t.Renderer,!1),t.Renderer.OHLC.requestNew=function(e,i){var a,r,n;a=null,W.f7H(),r=i.histogram;for(var s=0;s<e.length;s++)switch("histogr","a","m",n=e[s]){case"candle":a=n;break;case"histogram":r=!0,a="candle";break;default:return null}return null===a?null:new t.Renderer.OHLC({params:t.extend(i,{type:a,histogram:r})})},t.Renderer.OHLC.getChartParts=function(e,t){var i;return"bord","er_","color_do","wn","ca","ndle","ca","n","d","le","stx_c","andle","_u","p","s","tx_","candle_shadow_even","shad","ow","bor","der_colo","r_down","stx_candle_shado","w_do","wn","cand","le","s","tx_cand","le_shado","w","sh","a","do","w",W.f7H(),"c","and","le","fill_color_e","ven","h","ist","o","gram","border_","color_down","s","tx_","histogram_down","bord","er_col","or_up","fi","l","l_","color_up","hi","st","ogra","m",8,16,W.Y9g(89),[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:i=W.M9g("32",11874592),fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:8,border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_down",condition:16,border:"border_color_down"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_even",condition:i,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0}]},t.Renderer.OHLC.prototype.draw=function(){var e,i,a,r,n,s,o;for(e=this.stx,i=this.stx.panels[this.params.panel].chart,a={},n=this.seriesParams,r=0;r<n.length;r++)s=n[r],o={},i.series[s.id]&&(o=t.clone(i.series[s.id].parameters)),a[s.id]={parameters:t.extend(t.extend(o,this.params),s)},this==e.mainSeriesRenderer&&i.customChart&&i.customChart.colorFunction&&(a[s.id].parameters.colorFunction=i.customChart.colorFunction);for(r in e.drawSeries(i,a,this.params.yAxis,this),a)a[r].yValueCache&&(this.caches[r]=a[r].yValueCache)},t.Renderer.OHLC.prototype.getColor=function(e,i,a,r,n,s){var o,l,h,c,u,d;if(o=s||a.color,l=this.params.yAxis||i.yAxis,r&&!(o=s||a.borderLeftColor||a["border-left-color"]))return null;h=2;for(var p=1;-1629593774!==W.a8Y(p.toString(),p.toString().length,11606);p++){if(~n)return o;c=e.pixelFromTransformedValue(l.highValue,i),h+=2}if(-1002010612!==W.a8Y(h.toString(),h.toString().length,84792)){if(-n)return o;c=e.pixelFromTransformedValue(l.highValue,i)}return n?(c=e.pixelFromTransformedValue(l.highValue,i),isNaN(c)&&(c=0),u=a.backgroundColor,o&&!t.isTransparent(o)?("t","o","p",(d=e.chart.context.createLinearGradient(0,c,0,2*l[l.flipped?"top":"bottom"]-c)).addColorStop(0,o),d.addColorStop(1,u),d):(W.f7H(),u)):o},t.Renderer.OHLC.prototype.drawIndividualSeries=function(e,i){var a,r,n,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F;if("strin","g",!i.invalid&&(a=this.stx,r=e.context,n=i.colorFunction,o=a.panels[i.panel]||e.panel,"string"!=s(n)||(n=t.Renderer.colorFunctions[n]))){if(l=a.layout.candleWidth-e.tmpWidth<=2&&e.tmpWidth<=3,1,2,4,8,16,32,e.state.chartType||(e.state.chartType={}),h=e.state.chartType.pass={},c=a.colorByCandleDirection,i.colorBasis&&(c="open"==i.colorBasis),u=i.histogram,d=i.type,p=i.hollow,g=a.noWicksOnCandles[d],a.startClip(o.name),f=null,m={colors:[],cache:[]},y=[],n)v={isHistogram:u,field:i.field,yAxis:i.yAxis,isVolume:i.volume,highlight:i.highlight},u||"bar"!=d?("candle"!=d||g||a.drawShadows(o,n,v),m=a.drawCandles(o,n,v),v.isOutline=!0,!p&&l||a.drawCandles(o,n,v)):("b","a","r",v.type=i.hlc?"hlc":"bar",m=a.drawBarChart(o,"stx_bar_chart",n,v));else{x=u&&!1!==i.gradient,b=t.Renderer.OHLC.getChartParts(i.style,c);for(var _=0;_<b.length;_++)if("ca","n","dl","e",!(C=b[_]).skipIfPass||h.even){if(u){if("histogram"!=C.type)continue}else if("bar"==d){if("bar"!=C.type)continue;if(i.colored&&!C.condition)continue;if(!i.colored&&C.condition)continue}else if(p){if("s","hado","w","hollo","w","hollow"!=C.type)continue;if("shadow"==C.drawType&&g)continue}else{if("candle"!=d)continue;if("candle"!=C.type)continue;if("shadow"==C.drawType){if("stx_can","d","le_shadow_down",g)continue;if(S=i.border_color_up||a.getCanvasColor("stx_candle_shadow_up"),w=i.border_color_down||a.getCanvasColor("stx_candle_shadow_down"),k=i.border_color_even||a.getCanvasColor("stx_candle_shadow_even"),t.colorsEqual(S,w)&&t.colorsEqual(S,k)&&t.colorsEqual(S,a.defaultColor)){if(C.condition)continue}else if(!C.condition)continue}}A=a.canvasStyle(C.style),D=this.getColor(a,o,A,!1,!1,i[C.fill]),M=this.getColor(a,o,A,!1,x,i[C.fill]),T=this.getColor(a,o,A,C.useBorderStyleProp&&!l,x,i[C.border]),"candle"==C.drawType&&("hol","low","hollow"==C.type?(!t.isTransparent(M)&&t.colorsEqual(T,M)&&(T=C.useColorInMap?"transparent":M),C.useColorInMap||(M=a.containerColor)):"candle"==C.type&&l&&(t.isTransparent(M)?M=T:T=M)),r.globalAlpha=i.opacity,y.push(a.drawBarTypeChartInner({fillColor:M,borderColor:T,condition:C.condition,style:C.style,type:"bar"==d&&i.hlc?"hlc":C.drawType,panel:o,field:i.field,yAxis:i.yAxis,volume:i.volume&&i.hollow,highlight:i.highlight})),f||(f={}),C.useColorInMap&&(f[D]=1)}}for(var P in a.endClip(),f)i.hollow&&t.equals(P,a.containerColor)||m.colors.push(P);for(P=0;P<y.length;P++)for(var V=0;V<y[P].cache.length;V++)((F=y[P].cache[V])||0===F)&&(m.cache[V]=F);return m}},t.Renderer.Candles=function(e){var t;W.t7H(),this.construct(e),(t=this.params).type="candle",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.hlc=t.colored=t.histogram=!1,t.volume&&(t.hollow=!0)},t.inheritsFrom(t.Renderer.Candles,t.Renderer.OHLC,!1),t.Renderer.SimpleHistogram=function(e){var t;this.construct(e),(t=this.params).type="candle",t.histogram=!0,this.barsHaveWidth=this.standaloneBars=!0,this.highLowBars=!1,t.hlc=t.colored=t.hollow=t.volume=!1},t.inheritsFrom(t.Renderer.SimpleHistogram,t.Renderer.Candles,!1)},C=function(e){var t;(t=e.CIQ).capitalize=function(e){if(!e)return"";W.O9g(62);var t=W.M9g(1,1,2);return e.charAt(0).toUpperCase()+e.slice(t)},t.camelCaseRegExp=/-([a-z])/g,t.makeCamelCase=function(e){return e.replace(t.camelCaseRegExp,(function(e){return W.t7H(),e[1].toUpperCase()}))},t.uniqueID=function(e){var t,i;return e?("fun","ct","ion","undefine","d",t=(new Date).getTime(),"undefined"!==("undefined"==typeof window?"undefined":s(window))&&window.performance&&"function"===s(window.performance.now)&&(t+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var i,a=W;a.O9g(1);var r=a.M9g(20,1,35);return i=(t+Math.random()*r)%16|0,a.Y9g(36),t=Math.floor(a.M9g(16,t)),("x"==e?i:3&i|8).toString(16)}))):(i=(new Date).getTime().toString(36),W.Y9g(16),(i+=Math.floor(Math.random()*Math.pow(36,2)).toString(W.M9g(0,"36"))).toUpperCase())}},S=function(e){var t;W.f7H(),(t=e.CIQ).getHostName=function(e){try{return e.match(/:\/\/(.[^/]+)/)[1]}catch(e){return""}},t.qs=function(e){var t,i,a,r;W.t7H(),t={},e||(e=window.location.search.substring(1)),i=e.split("&");for(var n=0;n<i.length;n++)(a=i[n].indexOf("="))>0?(r=i[n].substring(0,a),W.O9g(12),t[r]=i[n].substring(W.a9g(1,a))):t[r=i[n]]=null;return t},t.postAjax=function(e,i,a,r,n){var s,o,l,h,c,u,d;if("appli","cation/x-www-form-urle","n","coded","string"==typeof e&&(e={url:e,payload:i,cb:a,contentType:r,noEpoch:n,method:null,responseHeaders:!1}),s=e.url,o=e.cb,l=e.payload,o||(o=function(){}),e.ungovernable||!t.Extras||!t.Extras.RequestLimiter||!t.Extras.RequestLimiter.hitRequestLimit(s)){if(!(h=new XMLHttpRequest))return!1;if(c=new Date,W.t7H(),e.noEpoch||(-1==s.indexOf("?")?s+="?ciqrandom="+c.getTime():s+="&ciqrandom="+c.getTime()),u=e.method,d=e.headers,u||(u=l?"POST":"GET"),h.open(u,s,!0),e.contentType||(e.contentType="application/x-www-form-urlencoded"),l&&h.setRequestHeader("Content-Type",e.contentType),d)for(var p in d)h.setRequestHeader(p,d[p]);e.timeout&&(h.timeout=e.timeout),h.ontimeout=function(){W.t7H(),o(408,null,{})},h.onload=function(){0===this.status?this.status="0":this.status||(this.status=200),W.t7H(),o(this.status,this.responseText,function(t){var i,a,r;if(i={},e.responseHeaders){a=t.getAllResponseHeaders().split("\n");for(var n=0;n<a.length;n++){for(r=a[n].split(":");r[1]&&" "==r[1].charAt(0);)r[1]=r[1].substring(1);""!==r[0]&&(i[r.shift()]=r.join(":"))}return W.t7H(),i}}(this))},h.onerror=function(){var e;W.f7H(),e=2;for(var t=1;1775457005!==W.u8Y(t.toString(),t.toString().length,35334);t++)o("0",null,{}),e+=2;664676864!==W.a8Y(e.toString(),e.toString().length,14378)&&o(1826,1,{})};try{h.send(l)}catch(e){o("0",e,{})}return!0}o(429,null,{})},t.loadUI=function(e,i,a){var r,n,s,o,l,h=W;if(i&&"function"!=typeof i||(a=i,i=document.body),h.Y9g(26),n=function(){var e,r,n,s;e=null;try{e=this.contentDocument}catch(e){return a(e)}if(e&&!e.title){r=e.body.innerHTML,n=document.createElement("div"),t.innerHTML(n,r);for(var o=0;o<n.children.length;o++)s=n.children[o].cloneNode(!0),i.appendChild(s);a(null)}else"iFrame not foun","d ","or d","ocument has a title",a(new Error("iFrame not found or document has a title"))},r=document.querySelector(h.a9g('iframe[original-url="','"]',e))){"abo","ut:","blank",s=null;try{s=r.contentDocument}catch(e){return a(e)}if("complete"===s.readyState&&s.location&&"about:blank"!==s.location.href)n.call(r);else{h.Y9g(48),o=-h.a9g(41962632,"329043881"),-339670642,l=2;for(var c=1;h.a8Y(c.toString(),c.toString().length,22700)!==o;c++)r.addEventListener("load",n),l+=2;-339670642!==h.a8Y(l.toString(),l.toString().length,3184)&&r.addEventListener("",n)}}else{(r=document.createElement("iframe")).setAttribute("original-url",e),h.Y9g(101);h.a9g(7,36143,108450,4,10);h.Y9g(104);h.M9g(8163,10,7373,20,7);h.Y9g(59);var u=h.a9g(2,936,1864,1872);h.O9g(12);var d=h.a9g(931372330,103485814);h.O9g(17);h.a9g(7540,5,30150);h.O9g(116);var p=h.M9g(7,4,4,1);h.Y9g(65);h.a9g(19,159875,15,10725);h.Y9g(117);var g=h.a9g(2,35522,1,39960);h.O9g(12);var f=h.M9g(5806,342);h.Y9g(12);var m=h.M9g(8965,815);h.O9g(17);h.M9g(9,16,137);h.O9g(16);var y=h.a9g(14,963);h.Y9g(81);h.a9g(9,2,489,233);h.O9g(66);h.a9g(8,28806,2,9606);h.Y9g(16);var v=h.M9g(66750,71200);h.O9g(12);var x=h.a9g(2805,467);r.src=e+(e.indexOf(4200!==u?"?":"3920">>d<837.12?284.25:235.4)===p?631.16>g?f<m?y:181.61:"?":v>x?"&":820.91)+t.uniqueID(),r.hidden=!0,r.addEventListener("load",n),document.body.appendChild(r)}},t.loadScript=function(e,i,a){var r,n,s,o,l=W;if(t.loadedScripts||(t.loadedScripts={}),t.loadedScripts[e])i&&i();else{703729042,-781683789,l.f7H(),r=2;for(var h=1;703729042!==l.u8Y(h.toString(),h.toString().length,56442);h++)n=document.createElement("SCRIPT"),r+=2;if(-781683789!==l.u8Y(r.toString(),r.toString().length,59521)&&(n=document.createElement("")),a?("modu","l","e",n.type="module",n.crossOrigin="use-credentials"):n.async=!0,n.onload=function(){t.loadedScripts[e]=!0,i&&i()},-1==(s=e).indexOf("?")){l.O9g(10);var c=l.a9g(8,7282,8);l.O9g(12);var u=l.M9g(18,3070);l.O9g(12);var d=l.a9g(6007,353);l.Y9g(65);var p=l.M9g(16,16694,3,8379);l.O9g(118);var g=l.a9g(48845627,20,8,48845488,3);l.Y9g(40);l.a9g(8,12,18,1);l.Y9g(79);var f=l.M9g(1139863,7,17,9660);s=s+(c<=500.53?("7260"|u)==d||(p>="501">>g?f:7780):"?")+Date.now()}else s=s+"&"+Date.now();n.src=s,(o=document.getElementsByTagName("script")[0])?o.parentNode.insertBefore(n,o.nextSibling):document.body.append(n)}},t.loadStylesheet=function(e,t){var i,a,r,n=W;(i=document.createElement("link")).rel="stylesheet",i.type="text/css",i.media="screen",n.Y9g(74);var s=n.a9g(103692,18,6915,16);n.O9g(17);n.a9g(3495,18,59430);n.O9g(12);var o=n.M9g(11,228);n.O9g(1);var l=n.M9g(14,4602,22);n.O9g(56);n.a9g(514,0,2);n.O9g(17);var h=n.M9g(6593,7,39569);n.Y9g(86);var c=n.a9g(8,17,16,72908,271);n.O9g(35);n.a9g(5838,5,1,4,4);n.O9g(119);n.M9g(1465,9,12,18);n.O9g(69);var u=n.a9g(18240,64999,16,3);n.Y9g(16);var d=n.a9g(15,14);n.Y9g(120);n.a9g(18,17,4388,1295,5);n.Y9g(16);var p=n.a9g(5,4675);n.O9g(80);var g=n.M9g(15,1405806863,351451720,702903440);n.O9g(12);var f=n.M9g(8,5932);n.Y9g(119);var m=n.a9g(3180,2910,3,8);n.Y9g(121);var y=n.M9g(17,2,14);i.href=e+(e.indexOf(s>o?l!=h&&(4790==c||"?"):u)===d?"?":p=="9000">>g?f:m!=="2694"*y?"&":"T")+Date.now(),i.onload=function(){n.t7H(),this.loaded||(this.loaded=!0,t&&t())},a=document.getElementsByTagName("link"),n.O9g(64);var v=n.M9g(2,11,18,1,7);(r=a[a.length-v])?r.parentNode.insertBefore(i,r.nextSibling):document.head.append(i)},t.loadWidget=function(e,i,a,r){i&&"function"!=typeof i||(a=i,i=document.body),W.O9g(12),t.loadStylesheet(W.a9g(".css",e),(function(){W.Y9g(12),W.t7H(),t.loadUI(W.a9g(".html",e),i,(function(i){i?a(i):(W.O9g(12),t.loadScript(W.M9g(".js",e),a,r))}))}))},t.waitForPlugins=function(e,i){var a,r,n,s;if(a=0,r=e.length){for(var o=0;o<r;o++)"c","q","-",n="cq-"+e[o],(s=document.getElementsByTagName(n)[0])&&s.hasAttribute("loaded")&&a++;if(r!==a)return setTimeout((function(){W.t7H(),t.waitForPlugins(e,i)}),0);i()}else i()},t.addInternalStylesheet=function(e){var t,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t="sty",t+="l",t+="e[pat",t+='h="',e&&(e.default&&(e=e.default),"string"==typeof e&&(a&&document.querySelector(t+a+'"]')||((i=document.createElement("style")).setAttribute("type","text/css"),i.setAttribute("path",a),i.innerText=e,document.head.appendChild(i))))}},w=function(e){var t;(t=e.CIQ).ChartEngine.prototype.registerHTMLElements=function(){var e,i,a,r,n,s;for(var o in e=this.chart.container,t.ChartEngine.htmlControls)if(void 0===this.chart[o]&&void 0===this.controls[o]){if(!this.allowZoom&&"chartControls"==o)continue;if(W.Y9g(12),i=e.querySelector(W.a9g(o,".")))this.chart[o]=i,this.controls[o]=i;else{if("D","I","V",!(a=t.ChartEngine.htmlControls[o]))continue;(r=document.createElement("DIV")).innerHTML=a,i=r.firstChild,e.appendChild(i),this.chart[o]=i,this.controls[o]=i,i.classList.add(o)}}var l,h,c,u=this.controls,d=u.chartControls,p=u.home;W.f7H(),d&&(n=d.querySelector(".stx-zoom-in"),s=d.querySelector(".stx-zoom-out"),t.safeClickTouch(n,(h=this,function(e){h.allowZoom&&h.zoomIn(e),W.t7H(),e.stopPropagation()})),t.safeClickTouch(s,(l=this,function(e){l.allowZoom&&l.zoomOut(e),e.stopPropagation()})),t.touchDevice||(this.makeModal(n),this.makeModal(s))),p&&(t.safeClickTouch(p,(c=this,W.f7H(),function(e){e.stopPropagation(),W.f7H(),c.isHistoricalMode()?(delete c.layout.range,c.loadChart(c.chart.symbol,(function(){W.t7H(),c.home({animate:!1})}))):c.home({animate:!0})})),t.touchDevice||this.makeModal(p))},t.ChartEngine.prototype.home=function(e){var t,i,a,r,n,o,l=W;function h(e,t,i){return function(){c(e),t.scroll=i,e.draw()}}function c(e){var t;for(var i in e.panels){t=e.panels[i].yaxisLHS.concat(e.panels[i].yaxisRHS);for(var a=0;a<t.length;a++)e.calculateYAxisMargins(t[a])}}if("u","ndefi","ned",this.swipe.amplitude=0,t=this.layout,"object"!=s(e)&&(e={maintainWhitespace:e}),"undefined"==s(e.maintainWhitespace)&&(e.maintainWhitespace=!0),this.cancelTouchSingleClick=!0,this.chart.dataSet&&this.chart.dataSet.length){for(var u in this.micropixels=0,i=Math.floor(this.chart.width/t.candleWidth),l.f7H(),this.charts)if(a=this.charts[u],!e.chart||e.chart==a){for(l.Y9g(3),r=l.M9g(1,"0"),e.maintainWhitespace&&this.preferences.whitespace>=0&&(r=this.preferences.whitespace),(e.whitespace||0===e.whitespace)&&(r=e.whitespace),(n=this.getLabelOffsetInPixels(a,t.chartType))>r&&(r=n),o=Math.min(i,a.dataSet.length),this.chart.allowScrollPast&&(o=i),this.micropixels=this.chart.width-o*t.candleWidth-r,this.preferences.whitespace=r;this.micropixels>t.candleWidth;)o++,this.micropixels-=t.candleWidth;for(;this.micropixels<0;)o--,this.micropixels+=t.candleWidth;if(this.micropixels-=t.candleWidth,o++,!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars){l.Y9g(119);var d=l.a9g(18,22,14,8);this.micropixels+=t.candleWidth/d}e.animate?(this,this.scrollTo(a,o,h(this,a,o))):(a.scroll=o,c(this))}this.draw()}else this.draw()},t.ChartEngine.prototype.headsUpHR=function(){var e,i,a,r,n;function s(e){W.t7H(),t.efficientDOMUpdate(a,"innerHTML",e)}this.runPrepend("headsUpHR",arguments)||(e=this.currentPanel)&&(i=e.chart,this.updateFloatHRLabel(e),W.t7H(),(a=this.controls.floatDate)&&!i.xAxis.noDraw&&(r=this.barFromPixel(this.cx),(n=i.xaxis[r])&&n.DT?s(t.displayableDate(this,i,n.DT)):n&&n.index?s(n.index):s("")),this.runAppend("headsUpHR",arguments))},t.ChartEngine.prototype.modalBegin=function(){this.openDialog="modal",this.undisplayCrosshairs()},t.ChartEngine.prototype.modalEnd=function(){this.cancelTouchSingleClick=!0,this.openDialog="",this.doDisplayCrosshairs()},t.ChartEngine.prototype.makeModal=function(e){var t;t=this,e.onmouseover=function(e){t.modalBegin()},e.onmouseout=function(e){t.modalEnd()}},W.t7H(),t.ChartEngine.prototype.updateChartAccessories=function(){var e,i,a,r,n,s,o,l,h=W;if(e="updateC",e+="hartAccessories",null!==this.accessoryTimer&&clearTimeout(this.accessoryTimer),!t.ChartEngine.drawingLine&&t.touchDevice&&(new Date).getTime()-this.lastAccessoryUpdate<100)this.accessoryTimer=setTimeout((l=this,h.f7H(),function(){l.updateChartAccessories()}),10);else if(this.chart.dataSet&&!this.runPrepend("updateChartAccessories",arguments)){if(this.accessoryTimer=null,this.lastAccessoryUpdate=(new Date).getTime(),(i=this.controls.floatDate)&&((a=this.currentPanel)||(a=this.chart.panel),a)){if(r=a.chart,n=!0===this.xAxisAsFooter?0:this.chart.canvasHeight-a.chart.bottom,s=i.offsetWidth/2-.5,(o=this.pixelFromTick(this.crosshairTick,r)-s)<0)o=0;else if(o>this.width-2*s-1){h.O9g(56);var c=h.a9g(16,14,1);h.O9g(122);var u=h.a9g(243,13,11,14,19);o=this.width-c*s-u}t.efficientDOMUpdate(i.style,"left",o+"px"),t.efficientDOMUpdate(i.style,"bottom",n+"px")}h.f7H(),this.positionCrosshairsAtPointer(),this.headsUpHR(),this.runAppend(e,arguments)}},t.ChartEngine.prototype.positionSticky=function(e){var t,i,a=W;t=Math.max(this.cy-e.offsetHeight-60,0),i=Math.min(this.chart.canvasWidth-(this.cx-50),this.chart.canvasWidth-e.offsetWidth),a.t7H(),a.Y9g(12),e.style.top=a.a9g("px",t),a.O9g(12),e.style.right=a.a9g("px",i)},t.ChartEngine.prototype.displaySticky=function(e){var i,a,r,n,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V=W;if(i="o",i+="bject",a=".stickyL",a+="ongPre",a+="ssText",(r=this.controls.mSticky)&&(n=r.querySelector(".mStickyInterior")))if(o=r.querySelector(".overlayTrashCan"),l=r.querySelector(".overlayEdit"),h=r.querySelector(".mouseDeleteInstructions"),c=r.querySelector(a),h.classList.remove("no_edit"),e&&s(e)==i||(e={message:arguments[0],backgroundColor:arguments[1],forceShow:arguments[2],noDelete:arguments[3],type:arguments[4]}),u=e.message,V.t7H(),d=e.backgroundColor,p=e.forceShow,g=e.noDelete,f=e.noEdit,m=e.type,p||u){if(v="ri",v+="ghtclick_",x="mStickyRightCli",x+="c",x+="k",u||(u=""),b=this.defaultColor,"auto"==d&&(d=b),p&&!u?(n.style.backgroundColor="",n.style.color="",n.style.display="none"):d?(n.style.backgroundColor=d,n.style.color=t.isTransparent(d)?b:t.chooseForegroundColor(d),n.style.display="inline-block"):(n.style.backgroundColor="",n.style.color="",n.style.display="inline-block"),n.innerHTML=u,(C=r.querySelector(".mStickyRightClick")).className=x,m&&(V.Y9g(12),C.classList.add(V.a9g(m,v))),C.style.display="",r.style.display="inline-block",(!(S=this.highlightedDraggable)||S&&S.undraggable&&S.undraggable(this))&&(w="non",w+="e",c.style.display=w),g||!0===this.bypassRightClick||this.bypassRightClick[m])C.style.display="none";else if(this.highlightViaTap||this.touches.length)k="inline-bl",k+="ock",o&&(o.style.display="inline-block"),l&&!f&&(l.style.display=k),h&&(h.style.display="none"),c&&(c.style.display="none"),r.classList[""===u?"add":"remove"]("hide");else{if(f&&h.classList.add("no_edit"),h){A=-1793992769,D=315042422,M=2;for(var O=1;V.u8Y(O.toString(),O.toString().length,49228)!==A;O++)T="b",T+="loc",T+="k",h.style.display=T,M+=2;V.u8Y(M.toString(),M.toString().length,5367)!==D&&(h.style.display="")}c&&(c.style.display="none",(F=this.preferences.dragging)&&e.panel&&!e.panel.noDrag&&(_="blo",_+="ck",!0!==F&&!F.study||"study"!=m?!0!==F&&!F.series||"series"!=m||(c.style.display="block"):c.style.display=_))}P=m||"default",r.setAttribute("cq-sticky-type",P),(e.positioner||this.positionSticky).call(this,r)}else y="n",y+="o",y+="n",y+="e",n.innerHTML="",r.style.display="none",o&&(o.style.display=y),l&&(l.style.display="none"),h&&(h.style.display="none"),c&&(c.style.display="none")},t.ChartEngine.prototype.displayNotification=function(e,t){var i,a,r,n,s,o,l,h=this,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.controls.notificationTray){var u=c.callback,d=c.dismissalListeners;i=1564341059,W.t7H(),a=567356654,r=2;for(var p=1;W.u8Y(p.toString(),p.toString().length,9533)!==i;p++)s=(n=this.controls.notificationTray).querySelector("").content.cloneNode(!1),r+=2;W.u8Y(r.toString(),r.toString().length,70071)!==a&&(s=(n=this.controls.notificationTray).querySelector("template").content.cloneNode(!0)),(o=s.firstElementChild).className=e,o.querySelector(".message").textContent=t,u&&(l=window.PointerEvent?"pointerup":"touchend",o.handler=o.addEventListener(l,u)),d&&(o.listeners={},d.forEach((function(t){o.listeners[e]=h.addEventListener(t.type,t.callback)}))),this.makeModal(o),n.appendChild(o)}},t.ChartEngine.prototype.removeNotification=function(e){var t,i;if(this.controls.notificationTray&&(i=(t=this.controls.notificationTray).querySelector(".".concat(e)))){if(i.handler&&i.removeEventListener(i.handler),i.listeners)for(var a in i.listeners)this.removeEventListener(i.listeners[a]);this.modalEnd(),t.removeChild(i)}},t.ChartEngine.prototype.setMeasure=function(e,t,i,a,r,n){var s,o,l,h,c,u,d,p,g,f,m,y,v=W;if(s="se",s+="tMe",s+="asur",s+="e",o=".",o+="mMeas",o+="ure",!this.runPrepend("setMeasure",arguments)){if(l=(this.drawingContainer||document).querySelector(o),h="",e||0===e){if(!1!==t&&(c=(c=Math.round(Math.abs(e-t)*this.chart.roundit)/this.chart.roundit).toFixed(this.chart.yAxis.printDecimalPlaces),this.internationalizer?h+=this.internationalizer.numbers.format(c):h+=c,e>0&&t>0)){if(d=" ",d+="(",v.O9g(47),u=v.M9g(t,e,e),Math.abs(u)>.1)v.O9g(3),u=Math.round(v.M9g(100,u));else if(Math.abs(u)>.01){v.Y9g(12);var x=v.a9g(933,67);v.Y9g(88);var b=v.M9g(7,1,12,5);u=Math.round(u*x)/b}else{v.Y9g(10);var C=v.a9g(7,1700,1593);u=Math.round(1e4*u)/C}this.internationalizer?(v.O9g(36),u=this.internationalizer.percent.format(v.a9g(100,u))):(v.O9g(12),u=v.M9g("%",u)),v.O9g(26),h+=v.a9g(d,")",u)}if(!1!==a){v.Y9g(16),p=Math.abs(v.a9g(i,a)),v.O9g(123);var S=v.M9g(20,8,17,1,28);p=Math.round(p)+S,g=this.translateIf("Bars"),v.Y9g(124),h+=v.a9g(p," "," ",g)}l&&(l.innerHTML=h)}else this.anyHighlighted||""!==this.currentVectorParameters.vectorType||this.clearMeasure();this.activeDrawing||((l=this.controls.mSticky)&&(f=l.querySelector(".mStickyInterior"),r?(m="ad",m+="d",y="inline-blo",y+="ck",l.style.display="inline-block",f.style.display=y,(e||0===e)&&(f.innerHTML=h),l.classList[""===h?m:"remove"]("hide"),this.positionSticky(l)):(l.style.display="none",f.innerHTML="")),this.runAppend(s,arguments))}},t.ChartEngine.prototype.clearMeasure=function(){var e;W.t7H(),(e=(this.drawingContainer||document).querySelector(".mMeasure"))&&(e.innerHTML="")},t.ChartEngine.prototype.zoomSet=function(e,i){var a,r,n,s,o=W;if("n","one",e=this.constrainCandleWidth(e),"none"!=this.chart.tempCanvas.style.display&&t.clearCanvas(this.chart.tempCanvas,this),a=this.mainSeriesRenderer||{},o.f7H(),!a.params||!a.params.volume){if(this.preferences.zoomAtCurrentMousePosition&&this.zoomInitiatedByMouseWheel&&this.crosshairTick<i.dataSet.length)r=this.crosshairTick||this.tickFromPixel(this.cx,i);else if(this.isHome()){o.O9g(125);var l=o.a9g(16,49,15,1,5);r=i.dataSet.length-l}else r=this.chart.scroll>this.chart.dataSet.length?0:"zoom-x"==this.grabMode?this.tickFromPixel(this.chart.width,i):this.tickFromPixel(this.chart.width/2,i);this.animations.zoom.hasCompleted&&(this.zoomInitiatedByMouseWheel=!1),o.O9g(74);var h=o.a9g(90,9,10,10);n=i.dataSet.length-h-r,s=i.scroll,o.Y9g(126);var c=o.a9g(6,19,14);i.scroll=Math.round((this.pixelFromTick(r,i)-i.left)/e)+c+n,this.micropixels+=(s-n)*this.layout.candleWidth-(i.scroll-n)*e}this.setCandleWidth(e),i.spanLock=!1,this.draw(),this.doDisplayCrosshairs(),this.updateChartAccessories()}},k=function(e){var t;W.f7H(),(t=e.CIQ).ChartEngine.prototype.currentBaseline=null,t.ChartEngine.prototype.baselineHelper=null,t.ChartEngine.helpersToRegister.push((function(e){W.f7H(),e.baselineHelper=new Map})),t.ChartEngine.prototype.registerBaselineToHelper=function(e){var t,i;if(e.params.baseline){var a,r,n=this.baselineHelper;if(t=this,!n.has(e)){var s=e.params.name;i=this.controls.baselineHandle,n.set(e,{styleCache:null,display:!1,handle:"_main_series"===s&&i?i:(a=s,a=a.replace(" ","_"),(r=document.createElement("cq-baseline-handle")).classList.add("stx-baseline-handle",a),t.container.append(r),t.controls["".concat(a," cq-baseline-handle")]=r,r)})}}},t.ChartEngine.prototype.removeBaselineFromHelper=function(e){var t,i,a=this.baselineHelper;a.has(e)&&("_main_","series","_main_series"!==(t=e.params.name.replace(" ","_"))&&(i=a.get(e).handle,delete this.controls["".concat(t," cq-baseline-handle")],this.container.removeChild(i)),a.delete(e))},t.ChartEngine.prototype.findBaselineHandle=function(e,t){W.f7H();var i,n=function(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=r(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){l=!0,s=e},f:function(){try{o||null==i.return||i.return()}finally{if(l)throw s}}}}(this.baselineHelper);try{for(n.s();!(i=n.n()).done;){var s=a(i.value,2),o=s[0],l=s[1].handle;if(e.target===l||e.composedPath&&e.composedPath().includes(l))return t&&(this.repositioningBaseline={lastDraw:Date.now(),handle:l,renderer:o},l.classList.add("stx-grab")),this.currentBaseline=o,!0}}catch(e){n.e(e)}finally{n.f()}return!1},t.ChartEngine.prototype.setBaselines=function(e){var t;e||(e=this.chart),t=this,W.f7H();var i=this.baselineHelper;i.forEach((function(a,r){var n,o,l,h,c=r.params.baseline;W.Y9g(127),(n=W.M9g(c,!0))&&(c=e.baseline);var u=c,d=u.defaultLevel,p=u.userLevel;(o=r.getYAxis(t))&&(h=(l=t.getYAxisBaselineRenderer(o))&&l!=t.mainSeriesRenderer&&l.seriesParams.length&&l.seriesParams[0].id,c.actualLevel=p||0===p?p:d,c.actualLevel||0===c.actualLevel||(c.actualLevel=function(i,a){var r,n,o,l,h,c=e,u=c.dataSegment,d=c.dataSet,p=c.defaultPlotField;for(r=p,a||(r=i),n=t.getFirstLastDataRecord(u,"tick").tick;;){if(o=d[n])if(a&&"Close"==r){if(o.iqPrevClose||0===o.iqPrevClose)return o.iqPrevClose}else if(W.O9g(16),(l=d[W.M9g(1,n)])&&(l[r]||0===l[r]))return"o","b","je","ct","object"===s(h=l[r])?h[p]:h;if(--n<0)break}}(h,n)),a.display=l===r,i.set(r,a))}))},t.ChartEngine.prototype.setBaselineUserLevel=function(){var e,i,a,r=this.chart,n=this.currentPanel,o=this.repositioningBaseline,l=o.lastDraw,h=o.renderer;if(h.params.panel==n.name){var c=r.baseline;e="object"===s(h.params.baseline)?h.params.baseline:c,i=h.getYAxis(this),a=this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),n,i),e.userLevel=this.adjustIfNecessary(n,this.crosshairTick,a),Date.now()-l>100&&(this.draw(),this.repositioningBaseline.lastDraw=Date.now())}},t.ChartEngine.prototype.setBaselineMinMax=function(e,t){var i,a,r;var n=this.baselineHelper,o=this.chart,l=this.repositioningBaseline,h=o.baseline,c=o.seriesRenderers;if(i=o.transformFunc&&t===o.panel.yAxis,!(a=t.renderers.find((function(e){return W.f7H(),n.get(c[e])}))))return e;var u=c[a].params,d=u.baseline;if("mountain"===u.type)return e;var p=(d="object"===s(d)?d:h).actualLevel;return(p||0===p)&&(i&&(p=o.transformFunc(this,o,p)),r=Math.max(p-e[0],e[1]-p),W.Y9g(90),e[W.M9g(0,"0")]=l?t.lowValue:p-r,e[1]=l?t.highValue:p+r),e},t.ChartEngine.prototype.positionBaselineHandle=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m=W;if("s","tx-grab",this.manageTouchAndMouse){var y=this.baselineHelper,v=this.chart,x=this.panels,b=e.params,C=b.baseline,S=b.panel;i=e.params.yAxis||e.getYAxis(this);var w=y.get(e),k=w.display,A=w.handle,D=w.styleCache;if(!0===C&&(C=v.baseline),!1===C.userLevel||!k)return"n","one",void(A.style.display="none");a=x[S],r=A.classList.contains("stx-grab"),n="block",s=C.actualLevel,v.transformFunc&&(s=v.transformFunc(this,v,s)),s>i.high?(s=i.high,r||(n="none")):s<i.low&&(s=i.low,r||(n="none")),v.untransformFunc&&(s=v.untransformFunc(this,v,s)),o=this.pixelFromPrice(s,a,i),D||(D=getComputedStyle(A)),l=t.stripPX(D.width),m.O9g(117);var M=m.a9g(14,0,7,0);h="".concat(o-t.stripPX(D.height)/M,"px"),u=this.baselineHandleBuffer||2,m.Y9g(16);var T=m.M9g(6,7);if(d=a.yaxisRHS.indexOf(i)+T)p=1===d?u:u*d,c="".concat(v.right-l*d-p,"px");else{m.O9g(56);var F=m.a9g(15,14,1);f=1===(g=a.yaxisLHS.slice(0).reverse().indexOf(i)+F)?u:u*g,c="".concat(v.left+l*g+f-l,"px")}Object.assign(A.style,{display:n,top:h,left:c})}},t.ChartEngine.prototype.getYAxisBaselineRenderer=function(e){var t;if(!e.renderers.length)return null;var i=this.baselineHelper,a=this.chart;return W.t7H(),(t=e.renderers.find((function(e){return W.t7H(),i.get(a.seriesRenderers[e])})))?a.seriesRenderers[t]:null},t.ChartEngine.prototype.getYAxisBaseline=function(e){var t;W.f7H();var i=this.chart.baseline;if(!(t=this.getYAxisBaselineRenderer(e)))return i;var a=t.params.baseline;return"object"===s(a)?a:i}},A=function(e){var t;t=e.CIQ,W.t7H(),t.ChartEngine.Chart=function(){this.xAxis=new t.ChartEngine.XAxis,this.yAxis=new t.ChartEngine.YAxis,this.symbolObject={symbol:null},this.series={},this.seriesRenderers={},this.xaxis=[],this.state={},this.endPoints={},this.defaultChartStyleConfig={},W.t7H(),this.baseline=t.clone(this.baseline),this.panel=void 0},t.extend(t.ChartEngine.Chart.prototype,{symbol:null,symbolObject:{symbol:null},symbolDisplay:null,series:{},seriesRenderers:{},scroll:0,isComparison:!1,forcePercentComparison:!0,maxTicks:0,tension:null,currentMarketData:{},masterData:null,dataSet:null,scrubbed:null,dataSegment:null,segmentImage:null,baseline:{includeInDataSegment:!1,defaultLevel:null,userLevel:null,actualLevel:null},xAxis:null,xaxis:[],xaxisFactor:30,decimalPlaces:2,dynamicYAxis:!0,roundit:100,breakpoint:null,legendRenderer:t.drawLegend,customChart:null,yaxisPaddingRight:null,yaxisPaddingLeft:null,tickCache:{},allowScrollPast:!0,allowScrollFuture:!0,whiteSpaceFutureTicks:0,hideDrawings:!1,defaultPlotField:"Close",defaultChartStyleConfig:{},lockScroll:!1,includeOverlaysInMinMax:!0,gaplines:null,lineStyle:null,lineApproximation:!0,highLowBars:!1,standaloneBars:!1,barsHaveWidth:!1,calculateTradingDecimalPlaces:t.calculateTradingDecimalPlaces},!0)},D=function(e){var t;(t=e.CIQ).ChartEngine.prototype.resolveY=function(e){return this.top+e},t.ChartEngine.prototype.resolveX=function(e){return this.left+e},t.ChartEngine.prototype.backOutY=function(e){return W.f7H(),e-this.top},W.t7H(),t.ChartEngine.prototype.backOutX=function(e){return e-this.left},t.ChartEngine.prototype.dateFromTick=function(e,i,a){var r,n,s,o,l,h,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dataSet";return i||(i=this.chart),h=!1,0===(n=(r=i[c]).length)&&(r[0]={},r[0].DT=new Date,n=r.length,h=!0),e<0?s=(o=this.standardMarketIterator(r[0].DT))?o.previous(Math.abs(e)):r[0].DT:e>=n?(o=this.standardMarketIterator(r[n-1].DT))?(W.O9g(128),s=o.next(W.M9g(n,e,"1"))):s=r[n-1].DT:s=r[e].DT,l=a?new Date(s.getTime()):t.yyyymmddhhmmssmmm(s).substr(0,12),h&&delete r[0].DT,l},t.ChartEngine.prototype.tickFromDate=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"dataSet",C=W;if(i||(i=this.chart),!(n=i[b])||!n.length)return 0;if(a||(C.O9g(24),a=C.M9g("0",2147483647)),s=e.constructor==Date?e:t.strToDateTime(e),C.f7H(),t.ChartEngine.isDailyInterval(this.layout.interval)||s.setMinutes(s.getMinutes()+a),o=s.getTime(),i.tickCache[b]||(i.tickCache[b]={}),(l=i.tickCache[b][o])||0===l)return r?Math.ceil(l):Math.floor(l);if(h=n[0].DT,c=n[n.length-1].DT,s>=h&&s<=c){for(u=0,d=n.length,p=0;++p<100;){if(C.Y9g(49),+(f=n[g=Math.floor(C.a9g(u,2,d))].DT)==+s)return i.tickCache[b][o]=g,g;if(f<s&&(u=g),f>s){if(n[g-1].DT<s)return C.O9g(16),i.tickCache[b][o]=C.M9g(.5,g),r?g:g-1;if(+n[g-1].DT==+s)return C.Y9g(129),i.tickCache[b][o]=C.a9g("1",g),C.Y9g(16),C.a9g(1,g);d=g}}if(p>=100)return console.log("!!!Warning: tickFromDate() did not find match."),n.length}return C.O9g(96),y=(m=C.M9g(s,h))?h:c,x=(v=this.standardMarketIterator(y))?v.futureTick({end:s}):0,l=m?-1*x:n.length-1+x,i.tickCache[b][o]=l,l},t.ChartEngine.prototype.pixelFromBar=function(e,t){var i,a;t||(t=this.chart),i=0,i=(a=this.chart.segmentImage)&&a[e]&&a[e].leftOffset?a[e].leftOffset:(e+.5)*this.layout.candleWidth,W.O9g(117);var r=W.a9g(8,0,8,0);return i=t.panel.left+Math.floor(i+this.micropixels)-r,W.t7H(),i},t.ChartEngine.prototype.barFromPixel=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,g,f=W;if(t||(t=this.chart),i=this.chart.segmentImage,a=this.micropixels,r=this.layout.candleWidth,f.t7H(),i){n=e-t.panel.left-a,f.O9g(3),s=f.a9g(1,"2"),l=i.length,f.Y9g(36),h=Math.round(f.a9g(s,l)),f.O9g(130);var m=f.a9g(1,8,9,1);f.Y9g(66);var y=f.M9g(17,0,187,11);f.Y9g(12);var v=f.M9g(2,0);if(n>(d=i[l-m].leftOffset+i[l-y].candleWidth/v)){89172153,-1262876246,2;for(var x=1;89172153!==f.a8Y(x.toString(),x.toString().length,25736);x++)return l-Math.floor(e*d*t.panel.left%a%r);return-1262876246!==f.a8Y(2..toString(),2..toString().length,5414)?l-Math.floor(e*d*t.panel.left%a%r):l+Math.floor((e-d-t.panel.left-a)/r)}for(var b=1;b<l&&(s*=2,o=i[h]);b++){c=o.leftOffset,f.O9g(131);var C=f.a9g(18,1,8,20,9);if(u=o.candleWidth/C,f.Y9g(16),p=f.M9g(u,c),f.O9g(12),g=f.a9g(u,c),0===h||n>=p&&n<g)break;n<p?h-=Math.max(1,Math.round(l/s)):h+=Math.max(1,Math.round(l/s)),h=Math.max(0,Math.min(l-1,h))}if(!i[h])for(b=0;b<l;b++)if(o=i[b]){c=o.leftOffset,f.O9g(16);var S=f.a9g(12,14);if(n<c-(u=o.candleWidth/S))return f.Y9g(16),Math.max(0,f.a9g(1,b));if(n<c+u)return b;if(n>=c+u)return f.Y9g(12),f.a9g(1,b)}return h}return Math.floor((e-t.panel.left-a)/r)},t.ChartEngine.prototype.tickFromPixel=function(e,t){var i;t||(t=this.chart),i=t.dataSet.length-t.scroll,t.segmentImage?i+=this.barFromPixel(e,t):i+=Math.floor((e-t.panel.left-this.micropixels)/this.layout.candleWidth);for(var a=1;1051255616!==W.u8Y(a.toString(),a.toString().length,8177);a++)return i;return W.u8Y(2..toString(),2..toString().length,80643),i},t.ChartEngine.prototype.pixelFromTick=function(e,t){var i,a,r,n,s,o,l,h,c,u,d;return t||(t=this.chart),i=t.dataSegment,a=t.dataSet,r=t.segmentImage,n=this.micropixels,s=i?i.length:0,o=t.panel,l=t.scroll,h=e-a.length+l,c=s?i[h]:null,r&&(c=r[h]),c&&c.leftOffset?o.left+Math.floor(c.leftOffset+n):(u=0,d=0,c=s?i[s-1]:null,r&&(W.O9g(16),c=r[W.M9g(1,s)]),c&&c.leftOffset&&s<e-a.length+l&&(u=c.leftOffset-c.candleWidth/2,d=s),u+o.left+Math.floor((e-d-a.length+l+.5)*this.layout.candleWidth+n))},t.ChartEngine.prototype.pixelFromDate=function(e,t,i,a){return W.f7H(),this.pixelFromTick(this.tickFromDate(e,t,i,a),t)},t.ChartEngine.prototype.transformedPriceFromPixel=function(e,t,i){var a,r,n;if(t||(t=this.chart.panel),e=(a=i||t.yAxis).bottom-e,W.t7H(),a.semiLog)n=e*a.logShadow/a.height,a.flipped?n=a.logHigh-n:n+=a.logLow,W.O9g(48),r=Math.pow(W.a9g(8,"10"),n);else{if(!a.multiplier)return null;r=e/a.multiplier,a.flipped?r=a.high-r:r+=a.low}return r},t.ChartEngine.prototype.priceFromPixel=function(e,t,i){var a;return t||(t=this.chart.panel),a=this.transformedPriceFromPixel(e,t,i),W.t7H(),this.charts[t.name]&&t.chart.untransformFunc&&(i&&i!=t.yAxis||(a=t.chart.untransformFunc(this,t.chart,a,i))),a},t.ChartEngine.prototype.valueFromPixel=function(e,t,i){var a;return W.f7H(),t||(t=this.whichPanel(e)),t||(a=Object.values(this.panels))&&a.length&&(t=e<=0?a.shift():a.pop()),this.priceFromPixel(e,t,i)},t.ChartEngine.prototype.valueFromInterpolation=function(e,i,a,r,n){var o,l,h,c,u,d,p,g,f,m,y,v,x,b,C=W;if("o","b","jec","t",null===e||e<0||!i)return null;if(r||(r=this.chart.panel),n||(n=r.yAxis),a||(a=this.chart.defaultPlotField),!(o=this.getPreviousBar(this.chart,i,e)))return null;if((h=t.existsInObjectChain(o,i))&&(l=h.obj[h.member]),"object"==s(l)&&(l=l[a]),(c=this.getRendererFromSeries(i))&&c.params.step||"step"===this.layout.chartType)return l;if(u=this.getNextBar(this.chart,i,e),(h=t.existsInObjectChain(u,i))&&(d=h.obj[h.member]),"object"==s(d)){-1782620896,-1671387042,p=2;for(var S=1;-1782620896!==C.u8Y(S.toString(),S.toString().length,57697);S++)d=d[a],p+=2;-1671387042!==C.u8Y(p.toString(),p.toString().length,68554)&&(d=d[a])}return u?null==l||null==d?null:(g=this.pixelFromPrice(l,r,n),f=this.pixelFromPrice(d,r,n),m=o.tick,y=u.tick,C.Y9g(132),v=C.a9g(g,m,f,y),x=this.chart.dataSegment[e].tick,C.Y9g(133),b=C.a9g(m,g,x,v),this.priceFromPixel(b,r,n)):null},t.ChartEngine.prototype.pixelFromTransformedValue=function(e,t,i){var a,r,n,s,o;return t||(t=this.chart.panel),r=((a=i||t.yAxis).high-e)*a.multiplier,a.semiLog&&(n=Math.max(e,0),s=Math.log(n)/Math.LN10,r=(o=a.height)-o*(s-a.logLow)/a.logShadow),r=a.flipped?a.bottom-r:a.top+r},t.ChartEngine.prototype.pixelFromPrice=function(e,t,i){return t||(t=this.chart.panel),this.charts[t.name]&&t.chart.transformFunc&&(i&&i!=t.yAxis||(e=t.chart.transformFunc(this,t.chart,e,i))),W.t7H(),this.pixelFromTransformedValue(e,t,i)},t.ChartEngine.prototype.pixelFromValueAdjusted=function(e,t,i,a){var r,n;return this.layout.adj||!this.charts[e.name]?this.pixelFromPrice(i,e,a):(r=Math.round(t))>0&&r<e.chart.dataSet.length&&(n=e.chart.dataSet[r].ratio)?(W.Y9g(3),this.pixelFromPrice(W.M9g(n,i),e,a)):this.pixelFromPrice(i,e,a)},t.ChartEngine.prototype.adjustIfNecessary=function(e,t,i){var a,r;return this.layout.adj?i:e&&this.charts[e.name]&&(a=Math.round(t))>0&&a<e.chart.dataSet.length&&(r=e.chart.dataSet[a].ratio)?(W.Y9g(36),W.a9g(r,i)):i}},M=function(e){var t;(t=e.CIQ).ChartEngine.prototype.positionCrosshairsAtPointer=function(){var e,i,a,r,n,s,o,l=W;if((e=this.currentPanel)&&!(!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive||(l.f7H(),this.runPrepend("positionCrosshairsAtPointer",arguments)))){i=e.chart,a=this.container.getBoundingClientRect(),this.top=a.top,this.left=a.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.cy=this.crossYActualPos=this.backOutY(t.ChartEngine.crosshairY),this.cx=this.backOutX(t.ChartEngine.crosshairX),r=this.crosshairTick=this.tickFromPixel(this.cx,i),l.O9g(134);var h=l.M9g(12,0,113,8,16);n=this.pixelFromTick(r,i)-h,this.controls.crossX&&(l.O9g(12),this.controls.crossX.style.left=l.M9g("px",n)),n>=e.right||n<=e.left?this.undisplayCrosshairs():(s="chart"==e.name?this.preferences.horizontalCrosshairField:e.horizontalCrosshairField,o=i.dataSet,s&&o&&r<o.length&&r>-1&&(this.crossYActualPos=this.pixelFromPrice(o[r][s],e)),this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.runAppend("positionCrosshairsAtPointer",arguments))}},t.ChartEngine.prototype.doDisplayCrosshairs=function(){var e,i,a,r,n,s,o,l,h;e="do",W.f7H(),e+="Displa",e+="yCrosshairs",this.runPrepend(e,arguments)||(this.displayInitialized&&(i=this.floatCanvas,a=this.currentVectorParameters.vectorType,this.layout.crosshair||""!==a&&a?t.Drawing&&t.Drawing[a]&&(new t.Drawing[a]).dragToDraw||this.overXAxis||this.overYAxis||!this.insideChart&&!this.grabbingScreen||""!==this.openDialog?this.undisplayCrosshairs():(n=(r=this.controls).crossX,s=r.crossY,n&&""!==n.style.display&&(n.style.display="",s&&(s.style.display=""),this.magnetizedPrice&&a?(o="b",o+="l",o+="ock",l="stx-crossha",l+="ir-on",this.container.classList.remove(l),this.chart.tempCanvas.style.display=o):this.container.classList.add("stx-crosshair-on")),r.floatDate&&!this.chart.xAxis.noDraw&&(r.floatDate.style.visibility="",this.currentPanel&&this.updateFloatHRLabel(this.currentPanel)),i&&(h="n",h+="o",h+="ne",i.style.display==h&&t.clearCanvas(i,this),i.style.display="block")):this.undisplayCrosshairs()),this.runAppend("doDisplayCrosshairs",arguments))},t.ChartEngine.prototype.undisplayCrosshairs=function(){var e,i,a,r,n,s,o,l,h,c,u;if(!this.runPrepend("undisplayCrosshairs",arguments)){if(i=(e=this.controls).crossX,W.t7H(),a=e.crossY,i&&"none"!=i.style.display){i.style.display="none",r=1046512305,n=-971978851,s=2;for(var d=1;W.a8Y(d.toString(),d.toString().length,58385)!==r;d++)a&&(a.style.display=""),s+=2;W.a8Y(s.toString(),s.toString().length,67900)!==n&&(o="n",o+="o",o+="n",o+="e",a&&(a.style.display=o))}this.displayInitialized&&e.floatDate&&(l="hi",l+="d",l+="de",l+="n",e.floatDate.style.visibility=l),this.container.classList.remove("stx-crosshair-on"),(h=this.floatCanvas)&&h.isDirty&&"none"!=h.style.display&&(c="n",c+="o",c+="n",c+="e",t.clearCanvas(h,this),h.style.display!=c&&(h.style.display="none")),this.activeDrawing||this.repositioningDrawing||this.editingAnnotation||(u=this.chart.tempCanvas)&&"none"!=u.style.display&&(u.style.display="none"),this.runAppend("undisplayCrosshairs",arguments)}},t.ChartEngine.prototype.hideCrosshairs=function(){W.t7H(),this.displayCrosshairs=!1},t.ChartEngine.prototype.showCrosshairs=function(){W.t7H(),this.displayCrosshairs=!0}},T=function(e){var t,i;W.t7H(),t=e.CIQ,i=e.timezoneJS,t.ChartEngine.prototype.loadChart=function(e,i,a){var r,n,o,l,h,c,u;function d(){h.dispatch(h.currentlyImporting?"symbolImport":"symbolChange",{stx:h,symbol:g.symbol,symbolObject:g.symbolObject,prevSymbol:w,prevSymbolObject:o,action:"master"}),f&&h.dispatch("periodicity",{stx:h,differentData:!0,prevPeriodicity:r})}a||"function"!=typeof i?Array.isArray(i)&&(i={masterData:i}):(a=i,i={}),i||(i={}),W.f7H();var p=i,g=p.chart,f=p.periodicity,m=p.range,y=p.span,v=this.layout;r={periodicity:v.periodicity,interval:v.interval,timeUnit:v.timeUnit},f&&(n=t.cleanPeriodicity(f.period?f.period:f.periodicity,f.interval,f.timeUnit),v.interval=n.interval,v.periodicity=n.period,v.timeUnit=n.timeUnit),g||(g=this.chart);var x=g,b=x.dataSet,C=x.market,S=x.masterData,w=x.symbol,k=x.moreAvailable,A=x.upToDate;o=t.clone(g.symbolObject),g.dataSet=[],g.masterData=[],g.moreAvailable=null,g.upToDate=null,e?"object"==s(e)?(g.symbol=e.symbol,g.symbolObject=e):(g.symbol=e,g.symbolObject.symbol=e):(g.symbol=null,g.symbolObject={symbol:null}),g.inflectionPoint=null,this.marketFactory&&(l=this.marketFactory(g.symbolObject),this.setMarket(l,g)),this.setMainSeriesRenderer(!0),m||y||!v?m&&y&&(y={}):(y=v.range?{}:v.setSpan,m=v.range||{}),this.clearCurrentMarketData(g),h=this,!i.masterData&&this.quoteDriver?(c=function(e){e&&"orphaned"!=e&&(g.symbol=w,g.symbolObject=o,g.market=C,h.masterData=g.masterData=S,g.dataSet=b,g.moreAvailable=k,g.upToDate=A),W.f7H(),d(),a&&a.call(h,e)},m&&Object.keys(m).length&&this.setRange?(delete i.span,delete v.setSpan,this.chart.masterData=null,this.displayInitialized=!1,f&&(m.periodicity=f),m.forceLoad=!0,this.setRange(m,c)):y&&y.base&&this.setSpan?(y.multiplier=y.multiplier||1,this.chart.masterData=null,this.displayInitialized=!1,f&&(y.maintainPeriodicity=!0),y.forceLoad=!0,this.setSpan(y,c)):this.quoteDriver.newChart({symbol:g.symbol,symbolObject:g.symbolObject,chart:g,initializeChart:!0},(function(e){e||(h.adjustPanelPositions(),h.quoteDriver.updateSubscriptions(),i.stretchToFillScreen&&h.fillScreen()),W.t7H(),c.apply(h,arguments)}))):(i.masterData||console.log("Warning: No masterData specified and no QuoteFeed configured"),g.symbol||(g.symbol=""),this.initializeChart(),u=this.doCleanupGaps(i.masterData,g),this.setMasterData(u,g,{noCleanupDates:!0}),g.endPoints={},u&&u.length&&(g.endPoints={begin:u[0].DT,end:u[u.length-1].DT}),this.createDataSet(),m&&Object.keys(m).length&&this.setRange?this.setRange(m):y&&y.multiplier&&y.base&&this.setSpan?this.setSpan({maintainPeriodicity:!0,multiplier:y.multiplier,base:y.base}):i.stretchToFillScreen?this.fillScreen():u&&u.length?this.home():this.clear(),this.adjustPanelPositions(),d(),a&&a.call(h))},t.ChartEngine.prototype.loadBlankChart=function(){this.loadChart(null,[])},t.ChartEngine.prototype.getDataFields=function(e){var t,i,a;for(var r in W.t7H(),"L","o","w","O","p","e","n",e||(e=this.chart),t=e.defaultPlotField||"Close",(i=["Open","High","Low"]).push(t),e.series)a=e.series[r].parameters,i.push(a.symbol);return i},t.ChartEngine.prototype.cleanMasterData=function(e,t){var i,a,r,n,s;function o(e,t){W.f7H();for(var i=0;i<t.length;i++)if(void 0!==e[t[i]])return!1;return!0}if(i=e.symbol,(a=t.masterData)&&a.length){r=this.getDataFields(t),n=0;do{delete(s=a[n])[i],o.call(this,s,r)?a.splice(n,1):n++}while(n<a.length);a=this.doCleanupGaps(a,t,{noCleanupDates:!0}),this.setMasterData(a,t,{noCleanupDates:!0}),this.clearCurrentMarketData(t,i)}},t.ChartEngine.prototype.calculateATR=function(e,t,i){var a,r,n,s,o,l,h=W;i||(i=e.dataSet),(a=e.state.calculations.atr)||(a=e.state.calculations.atr={}),t||(t=20),r=[],a.accum&&(r=a.accum);for(var c=0;c<i.length;c++)if(s=i[c],n=c?i[c-1]:a.q1){if(o=Math.max(s.High-s.Low,Math.abs(s.High-n.Close),Math.abs(s.Low-n.Close)),r.length<t){if(r.push(o)==t){l=0;for(var u=0;u<r.length;u++)l+=r[u];h.O9g(36),s.atr=h.M9g(t,l)}}else{h.Y9g(56);var d=h.M9g(17,0,17);s.atr=(n.atr*(t-d)+o)/t}s.trueRange=o}e.state.calculations.atr={accum:r,q1:n}},t.ChartEngine.prototype.calculateMedianPrice=function(e,t){var i;t||(t=e.dataSet);for(var a=0;a<t.length;++a){"h","l","/2",i=t[a],W.Y9g(7);var r=W.M9g(10,8);i["hl/2"]=(i.High+i.Low)/r}},t.ChartEngine.prototype.calculateTypicalPrice=function(e,t){var i;W.f7H(),t||(t=e.dataSet);for(var a=0;a<t.length;++a)"h","l","c","/3",(i=t[a])["hlc/3"]=(i.High+i.Low+i.Close)/3},t.ChartEngine.prototype.calculateWeightedClose=function(e,t){var i;t||(t=e.dataSet);for(var a=0;a<t.length;++a){i=t[a],W.Y9g(135);var r=W.M9g(1,18,4,18,7);i["hlcc/4"]=(i.High+i.Low+2*i.Close)/r}},t.ChartEngine.prototype.calculateOHLC4=function(e,t){var i;t||(t=e.dataSet);for(var a=0;a<t.length;++a){i=t[a],W.Y9g(17);var r=W.M9g(68,11,744);i["ohlc/4"]=(i.Open+i.High+i.Low+i.Close)/r}},t.ChartEngine.prototype.currentQuote=function(e){var t,i;t=2;for(var a=1;-1281151973!==W.u8Y(a.toString(),a.toString().length,5637);a++){if(~this.chart.dataSet)return 1;t+=2}if(-1808377745!==W.a8Y(t.toString(),t.toString().length,89071)&&~this.chart.dataSet)return 1;if(!this.chart.dataSet)return null;for(var r=this.chart.dataSet.length-1;r>=0;r--)if(this.chart.dataSet[r]){if(!e)return this.chart.dataSet[r];if((i=this.chart.dataSet[r][e])||0===i)return this.chart.dataSet[r]}return null},t.ChartEngine.prototype.mostRecentClose=function(e){var t,i;if(!this.chart.dataSet)return null;for(var a=this.chart.dataSet.length-1;a>=0;a--)if("nu","mber","n","um","be","r",(t=this.chart.dataSet[a])&&(!e||(t=t[e])||0===t)){if(i=t.iqPrevClose,"object"==s(t)&&(t=t.Close),"number"==s(t))return t;if("number"==s(i))return i}return null},t.ChartEngine.prototype.createDataSegment=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S=W;if(i="cre",i+="ateDat",i+="aSegment",!this.runPrepend(i,arguments)){for(var w in this.charts){a=this.charts[w],e&&(a=e),t.Comparison&&a.isComparison&&t.Comparison.createComparisonSegmentInner(this,a),r=a.dataSet,n=a.baseline,s=a.scroll,o=a.maxTicks,h=(l=this.layout).candleWidth,n.actualLevel=n.userLevel?n.userLevel:n.defaultLevel,c=n.includeInDataSegment&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars),d=0,p=a.dataSegment=[],S.O9g(136);var k=S.a9g(293,16,0,19,10);g=r.length-1-s-k,f=a.defaultPlotField;for(var A=-1;A<s&&A<o;A++)g++,(-1!=A||c)&&(g<r.length&&g>=0?((u=r[g]).candleWidth=null,u&&(d+=u.Volume||1),p.push(u),null===n.actualLevel&&A>=0&&(m="Cl",m+="o",m+="se",f&&f!=m?(S.O9g(16),(y=r[S.M9g(1,g)])&&(y[f]||0===y[f])&&(n.actualLevel=y[f])):(u.iqPrevClose||0===u.iqPrevClose)&&(n.actualLevel=u.iqPrevClose))):g<0&&p.push(null));if(a.segmentImage=null,(v=this.mainSeriesRenderer||{}).params&&v.params.volume){S.O9g(12);var D=S.M9g(1,0);x=a.width-(o-p.length-D)*l.candleWidth,b=0,a.segmentImage=[];for(var M=0;M<p.length;M++)if(u=p[M],a.segmentImage[M]={},C=null,u){if(u.Volume){u.candleWidth=x*u.Volume/d,S.Y9g(137);var T=S.M9g(15,1,212,14,2);C=b+u.candleWidth/T,b+=u.candleWidth}else u.candleWidth=h,S.O9g(52),C=S.a9g(h,2,b),b+=h;a.segmentImage[M]={tick:u.tick,candleWidth:u.candleWidth,leftOffset:C}}else b+=h}if(e)break}a&&a.isComparison&&this.clearPixelCache(),this.positionCrosshairsAtPointer(),this.runAppend("createDataSegment",arguments)}},t.ChartEngine.prototype.getDataSegment=function(e){var t,i,a;return e||(e=this.chart),(t=e.dataSegment)&&t.length?(i=0,a=t.length,this.pixelFromBar(i,e)<e.panel.left&&i++,this.pixelFromBar(a-1,e)>e.panel.right&&a--,t.slice(i,a)):[]},t.ChartEngine.prototype.setMasterData=function(e,i,a){var r,n,o,l,h;for(i||(i=this.chart),this.marketFactory&&(r=this.marketFactory(i.symbolObject),this.setMarket(r,i)),a||(a={}),a.noCleanupDates||this.doCleanupDates(e,this.layout.interval),i.masterData=e,"chart"==i.name&&(this.masterData=e),o=null,W.f7H(),n=0;e&&n<e.length;n++)"n","umber",l=e[n],null===o&&("number"==typeof l.Close?("Clos","e",o="Close"):"number"==typeof l.Value&&(o="Value")),"Value"===o&&"number"===s(l.Value)&&(l.Close=l.Value),l.DT?("[object Date]"!=Object.prototype.toString.call(l.DT)&&(l.DT=new Date(l.DT)),l.Date&&17==l.Date.length||(l.Date=t.yyyymmddhhmmssmmm(l.DT))):l.Date?l.DT=t.strToDateTime(l.Date):console.log("setMasterData : Missing DT and Date on masterData object"),l.Volume&&"number"!=typeof l.Volume&&(l.Volume=parseInt(l.Volume,10)),e.length-n<50&&this.updateCurrentMarketData(l,i,null,{fromTrade:!0});for(n in i.calculateTradingDecimalPlaces&&(i.decimalPlaces=i.calculateTradingDecimalPlaces({stx:this,chart:i,symbol:i.symbolObject.symbol,symbolObject:i.symbolObject})),this.setDisplayDates(e),W.O9g(48),i.roundit=Math.pow(W.a9g(2,"10"),i.decimalPlaces),this.plugins)(h=this.plugins[n]).display&&h.setMasterData&&h.setMasterData(this,i)},t.ChartEngine.prototype.setMasterDataRender=function(e,t,i){i||(i=this.chart),i.symbol||(i.symbol=""),this.setMasterData(t,i),t&&(i.endPoints={},t.length&&(i.endPoints={begin:t[0].DT,end:t[t.length-1].DT},i.symbol=e)),this.createDataSet(),this.initializeChart(),this.draw(),t&&t.length||(i.symbol=null,this.clear()),this.adjustPanelPositions()},t.ChartEngine.prototype.getSymbols=function(e){var i,a,r,n,s,o,l,h,c,u;function d(e,t,i){return W.t7H(),{symbol:e,symbolObject:t,periodicity:i.periodicity,interval:i.interval,timeUnit:i.timeUnit,setSpan:i.setSpan}}for(var p in"break","out","-eq","uations",e||(e={}),i=[],r=this.layout,this.charts)for(var g in(o=this.charts[p]).symbolObject&&o.symbolObject.symbol&&i.push(d(o.symbol,o.symbolObject,r)),o.series)"excl","ude-stud","i","es","include-pa","ramete","r","s",(l=o.series[g].parameters).data&&!l.data.useDefaultQuoteFeed||(s=l.symbolObject,(a=d(n=l.symbol,s,r)).id=g,e["include-parameters"]&&(a.parameters=t.clone(l),a.parameters.yAxis&&delete a.parameters.yAxis.yAxisPlotter),e["exclude-studies"]&&"study"==l.bucket||e["exclude-generated"]&&s.generator||i.push(a));if(e["breakout-equations"]){h={};for(var f=0;f<i.length;f++)if(n=i[f].symbol,this.isEquationChart(n)){if(c=t.formatEquation(n)){u=c.symbols;for(var m=0;m<u.length;m++)h[u[m]]=d(u[m],i[f].symbolObject,i[f])}}else h[n]=d(n,i[f].symbolObject,i[f]);for(var y in i=[],h)i.push(h[y])}return i},t.ChartEngine.prototype.setDisplayDate=function(e){var a,r,n;if(!t.ChartEngine.isDailyInterval(this.layout.interval)){a=e.DT,W.Y9g(59),W.f7H();var s=W.a9g(5,7,971,1015);r=a.getSeconds()*s+a.getMilliseconds(),i.Date&&this.displayZone&&(n=new i.Date(a.getTime(),this.displayZone),a=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes()),a=new Date(a.getTime()+r)),e.displayDate=a}},t.ChartEngine.prototype.setDisplayDates=function(e){var i;if(W.f7H(),e&&!t.ChartEngine.isDailyInterval(this.layout.interval))for(var a=0;a<e.length;a++)(i=e[a]).DT&&this.setDisplayDate(i)},t.ChartEngine.prototype.setTimeZone=function(e,t){var a,r,n,s,o;if("prefe","rences",i.Date){for(var l in n=r=(a=new Date).getTimezoneOffset(),s=r,e&&(this.dataZone=e),this.dataZone&&(n=new i.Date(a,this.dataZone).getTimezoneOffset()),t&&(this.displayZone=t),this.displayZone&&(s=new i.Date(a,this.displayZone).getTimezoneOffset()),W.Y9g(138),this.timeZoneOffset=W.a9g(s,n,r,r),W.t7H(),this.charts)o=this.charts[l],this.setDisplayDates(o.masterData);this.preferences.timeZone=t,this.changeOccurred("preferences"),this.createDataSet()}else this.timeZoneOffset=0},t.ChartEngine.prototype.updateChartData=function(e,i,a){var r,n,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_=W;function P(){var t,a,r;if(t=null,a=0,o.length&&(t=h.getFirstLastDataRecord(o,c||i.defaultPlotField,!0))){if(e[e.length-1].DT<=t.DT)return;for(;a<e.length;a++){if(+e[a].DT==+t.DT){h.getFirstLastDataRecord([e[a]],c||i.defaultPlotField)&&(t=null);break}if(e[a].DT>t.DT)break}}r=e.slice(a),t&&r.unshift(c?t[c]:t),r=h.doCleanupGaps(r,i),t&&r.shift(),e=e.slice(0,a).concat(r)}function V(e,t){var a,r;if(_.f7H(),c)delete o[e][c],h.cleanupGaps&&(a={DT:t,Close:null},"gap"!=h.cleanupGaps&&o[e-1]&&o[e-1][c]&&(a.Close=o[e-1][c].Close,a.High=a.Low=a.Open=a.Close,_.Y9g(24),a.Volume=_.M9g("0",2147483647)),o[e][c]=a);else{for(u in a={DT:(r=o.splice(e,1)[0]).DT,Close:null,needed:!1},i.series)"un","de","fine","d","undefined"!=s(r[d=i.series[u].parameters.symbolObject.symbol])&&(a[d]=r[d],delete a.needed);h.cleanupGaps&&"gap"!=h.cleanupGaps&&(delete a.needed,"gap"!=h.cleanupGaps&&o[e-1]&&(a.Close=o[e-1].Close,a.High=a.Low=a.Open=a.Close,a.Volume=0)),!1!==a.needed&&(o.splice(e,0,a),h.setDisplayDate(a))}}function O(){h.createDataSet(null,null,a),h.draw(),h.updateChartAccessories(),_.O9g(2),h.streamParameters.count=_.a9g(1837826752,"0"),h.streamParameters.timeout=-1}if(a||(a={}),i||(i=this.chart),r=!1,n=!1,o=i.masterData,l=this.layout,this.dataZone,h=this,c=a.secondarySeries,p=t.isValidNumber,a.noCleanupDates||this.doCleanupDates(e,l.interval),(a.useAsLastSale||e.constructor==Object&&(e.Last||0===e.Last))&&Y(),e&&e.constructor==Object&&(e=[e]),e&&e.length&&!this.runPrepend("appendMasterData",[e,i,a])&&!this.runPrepend("updateChartData",[e,i,a])){o||(o=[]),_.Y9g(139);var I=_.M9g(17,8,14,1053,5);if(g=o.length-I,f=!1,a.fillGaps&&P(),e.length){for(var L=0;L<e.length;L++){for(y=(m=e[L]).DT,v=m.Date,y&&"[object Date]"!=Object.prototype.toString.call(y)&&(m.DT=y=new Date(y)),y&&(v&&17==v.length||(m.Date=t.yyyymmddhhmmssmmm(m.DT))),y||(y=m.DT=t.strToDateTime(v)),!p(m.Close)&&p(m.Value)&&(m.Close=m.Value);g>=0&&g<o.length;){if((x=o[g].DT)||(x=t.strToDateTime(o[g].Date)),x.getTime()<=y.getTime()){if(f=!0,b=0,x.getTime()<y.getTime()){if(g<o.length-1&&(o[g+1].DT||t.strToDateTime(o[g+1].Date)).getTime()<=y.getTime()){g++;continue}_.Y9g(48),b=_.M9g(0,"1")}if(a.deleteItems){b||V(g,y);break}"tick"==l.interval&&!1!==a.firstLoop&&(b=1),b||R(g,m),p(m.Close)&&(p(m.Open)||(m.Open=m.Close),C=Math.max(m.Open,m.Close),S=Math.min(m.Open,m.Close),(!p(m.High)||m.High<C)&&(m.High=C),(!p(m.Low)||m.Low>S)&&(m.Low=S)),m.Volume&&!p(m.Volume)&&(m.Volume=parseInt(m.Volume,10)),g+=b,c?(e.length-L<50&&this.updateCurrentMarketData(m,i,c,{fromTrade:!0}),"tick"==l.interval&&void 0===m.Close||(b&&(o.splice(g,0,{DT:m.DT}),this.setDisplayDate(o[g])),o[g][c]=m)):(w="t",w+="i",w+="c",w+="k",e.length-L<50&&this.updateCurrentMarketData(m,i,null,{fromTrade:!0}),l.interval==w&&void 0===m.Close||(o.splice(g,b?0:1,m),this.setDisplayDate(m)));break}g+=f?1:-1}g<0&&(c?(this.updateCurrentMarketData(m,i,c,{fromTrade:!0}),"tick"==l.interval&&void 0===m.Close||(o.splice(0,0,{DT:m.DT}),this.setDisplayDate(o[0]),o[0][c]=m)):(this.updateCurrentMarketData(m,i,null,{fromTrade:!0}),"tick"==l.interval&&void 0===m.Close||(o.splice(0,0,m),this.setDisplayDate(m))),f=!0,_.Y9g(2),g=_.a9g(113737088,"0"))}o.length&&(this.masterData=i.masterData=o),this.maxMasterDataSize&&(o=i.masterData=this.masterData=o.slice(-this.maxMasterDataSize)),k=c?this.getSeries({symbol:c,chart:i}):[i];for(var H=0;H<k.length;H++)(!(A=k[H]).endPoints.begin||A.endPoints.begin>e[0].DT)&&(A.endPoints.begin=e[0].DT),(!A.endPoints.end||A.endPoints.end<e[e.length-1].DT)&&(A.endPoints.end=e[e.length-1].DT),D=A.parameters&&A.parameters.field||i.defaultPlotField,(M=this.getFirstLastDataRecord(e,D,!0))&&(!A.lastQuote||A.lastQuote.DT<=M.DT)&&(A.lastQuote=M),c&&a.deleteItems&&(A.lastQuote=this.getFirstLastDataRecord(o,c,!0)[c]);for(var E in this.plugins)(T=this.plugins[E]).display&&T.appendMasterData&&T.appendMasterData(this,e,i);this.masterData&&this.masterData.length||(this.masterData=o),a.noCreateDataSet||(++(F=this.streamParameters).count>F.maxTicks||a.bypassGovernor?(clearTimeout(F.timeout),O()):-1==F.timeout&&(F.timeout=setTimeout(O,F.maxWait))),this.runAppend("appendMasterData",arguments),this.runAppend("updateChartData",arguments)}}function N(){var r,n,s,c,u,d,p,g,f,m;if("market",".market_def.market_tz",t.Market&&i.market)if(r={market_tz:t.getFromNS(i,"market.market_def.market_tz",null)},"month"!=(n=l.interval)&&"week"!=n||("d","a","y",h.dontRoll||(n="day"),r=h.chart.market.market_def),s=new t.Market(r),c={begin:o&&o.length?o[o.length-1].DT:e.DT,interval:n,periodicity:1,timeUnit:l.timeUnit},u=s.newIterator(c),_.f7H(),d=u.next(),o){if(e.DT<d){1845381554,-493378103,_.O9g(48),f=_.a9g(2,"2");for(var y=1;1845381554!==_.a8Y(y.toString(),y.toString().length,9110);y++)p=7,m=u.previous(),g=e.DT,f+=2;for(-493378103!==_.u8Y(f.toString(),f.toString().length,5496)&&(p=8,m=u.previous(),g=e.DT),p=0,m=u.previous(),g=e.DT,a.appending=!0;g<m&&p<1e3;)a.appending=!1,m=u.previous(),p++;e.DT=m,a.updating=!a.appending}else if(e.DT>=d){for(p=0,g=e.DT;g>d&&p<1e3;)e.DT=d,d=u.next(),p++;a.appending=!0}}else e.DT=new Date(+u.previous())}function R(e,t){var l,h,g,f,m;if(l=o[e],c&&(l=l[c]||{}),null===t.Close)void 0!==l.Open&&(t.Open=null),void 0!==l.High&&(t.High=null),void 0!==l.Low&&(t.Low=null),void 0!==l.Volume&&(t.Volume=null);else for(u in h="B",h+="i",h+="d",g="L",g+="o",g+="w",f="H",f+="ig",f+="h",m="Op",m+="e",m+="n",r?(t.Volume&&(t.Volume=parseInt(t.Volume,10)),n||(t.Volume+=l.Volume)):!p(t.Volume)&&l.Volume&&(t.Volume=l.Volume),a.allowReplaceOHL||(p(l.Open)&&(t.Open=l.Open),p(l.High)&&p(t.High)&&l.High>t.High&&(t.High=l.High),p(l.Low)&&p(t.Low)&&l.Low<t.Low&&(t.Low=l.Low)),["Close",m,f,g,h,"Ask"].forEach((function(e){_.f7H(),p(t[e])||(t[e]=l[e])})),i.series)"u","n","defi","ned",d=i.series[u].parameters.symbolObject.symbol,void 0===t[d]&&"undefined"!=s(l[d])&&(t[d]=l[d])}function Y(){var t;if("t","i","ck","Invalid",_.f7H()," Date",r=!0,a.useAsLastSale&&a.useAsLastSale.aggregatedVolume&&(n=!0),e.constructor===Array){_.O9g(14);var i=_.M9g(3,2,0);t=e[e.length-i],(e={}).DT=t.DT,e.Close=t.Close,e.Volume=t.Volume}else e.Last&&(e.Close=e.Last,delete e.Last);e.DT&&"[object Date]"!=Object.prototype.toString.call(e.DT)&&(e.DT=new Date(e.DT)),e.DT&&"Invalid Date"!=e.DT||(e.DT=new Date),"tick"!=l.interval&&N(),e.Open=e.Close,e.High=e.Close,e.Low=e.Close}},t.ChartEngine.prototype.updateCurrentMarketData=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,g,f,m;if(n="updateCurren",n+="tM",n+="arke",n+="tData",s="B",s+="i",s+="dL",s+="2",o="tic",o+="k",e&&e.DT){if(i||(i=this.chart),l=r&&r.fromTrade,h=e.DT,W.f7H(),!l&&this.layout.interval!=o&&i.market){if(i.market.market_def){if(!i.market.isMarketDate(e.DT))return;if(!t.ChartEngine.isDailyInterval(this.layout.interval)&&null===i.market.getSession(e.DT))return}c={begin:e.DT,interval:this.layout.interval,periodicity:this.layout.periodicity,timeUnit:this.layout.timeUnit},u=new t.Market(i.market.market_def),this.extendedHours&&this.extendedHours.filter&&u.enableAllAvailableSessions(),(d=u.newIterator(c)).next(),e.DT=d.previous()}this.runPrepend("updateCurrentMarketData",arguments)||(p=i.currentMarketData,a&&(p[a]||(p[a]={}),p=p[a]),["Last","Bid","Ask"].forEach((function(t){e[t]&&"number"==typeof e[t]&&(!p[t]||!p[t].DT||p[t].DT<=e.DT)&&(p[t]={DT:e.DT,Price:e[t],Size:e[t+"Size"],Timestamp:h})})),[s,"AskL2"].forEach((function(t){e[t]&&e[t]instanceof Array&&(!p[t]||!p[t].DT||p[t].DT<=e.DT)&&(p[t]={DT:e.DT,Price_Size:e[t],Timestamp:h})})),e.Close&&(!p.Last||p.Last.DT<=e.DT)&&(g="t",g+="i",g+="ck",f=e.Close,((m=r&&r.finalClose)||0===m)&&(f=m),p.Last={DT:e.DT,Price:f,Size:void 0===e.LastSize&&this.layout.interval==g?e.Volume:e.LastSize,Timestamp:e.LastTime||h}),p.touched=new Date,l||delete e.Last,this.runAppend(n,arguments))}},t.ChartEngine.prototype.clearCurrentMarketData=function(e,t){var i,a,r,n,s,o,l=W;i=-2100812593,a=-373296720,r=2;for(var h=1;l.a8Y(h.toString(),h.toString().length,58976)!==i;h++){if(this.runPrepend("",arguments))return;l.O9g(24),r+=l.M9g("2",2147483647)}if(l.u8Y(r.toString(),r.toString().length,25056)===a||!this.runPrepend("clearCurrentMarketData",arguments)){if(s=[],e)s.push(e);else for(n in this.charts)s.push(this.charts[n]);for(l.t7H(),n=0;n<s.length;n++)if(o=s[n].currentMarketData,t)delete o[t];else for(var c in o)o[c]=void 0;this.runAppend("clearCurrentMarketData",arguments)}}},F=function(e){var t;(t=e.CIQ).ChartEngine.prototype.changeOccurred=function(e){var t,i,a=W;if("la","y","out",t={stx:this,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,layout:this.layout,drawings:this.drawingObjects},"theme"==e&&this.dispatch("theme",t),!this.currentlyImporting)if("layout"==e)this.dispatch("layout",t);else if("vector"==e){-129224100,250546495,i=2;for(var r=1;-129224100!==a.u8Y(r.toString(),r.toString().length,43366);r++)this.dispatch("",t),a.O9g(48),i+=a.a9g(2,"2");250546495!==a.a8Y(i.toString(),i.toString().length,88504)&&this.dispatch("drawing",t)}else"preferences"==e&&this.dispatch("preferences",t)},t.ChartEngine.prototype.startAsyncAction=function(){this.pendingAsyncs||(this.pendingAsyncs=[]),this.pendingAsyncs.push(!0)},t.ChartEngine.prototype.registerChartDrawnCallback=function(e){return this.asyncCallbacks||(this.asyncCallbacks=[]),W.t7H(),this.asyncCallbacks.push(e),{fc:e}},t.ChartEngine.prototype.unregisterChartDrawnCallback=function(e){for(var t=0;t<this.asyncCallbacks.length;t++)if(this.asyncCallbacks[t]==e.fc)return void this.asyncCallbacks.splice(t,1)},t.ChartEngine.prototype.makeAsyncCallbacks=function(){if(this.asyncCallbacks&&(!this.pendingAsyncs||!this.pendingAsyncs.length))for(var e=0;e<this.asyncCallbacks.length;e++)this.asyncCallbacks[e]()},t.ChartEngine.prototype.completeAsyncAction=function(){this.pendingAsyncs.pop(),W.f7H(),this.makeAsyncCallbacks()},t.ChartEngine.prototype.addDomEventListener=function(e,t,i,a){W.f7H(),e.addEventListener(t,i,a),this.eventListeners.push({element:e,event:t,function:i,options:a})},t.ChartEngine.prototype.addEventListener=function(e,t){var i;if("*"===e)for(var a in this.callbackListeners)this.callbackListeners[a].push(t);else if(e instanceof Array)for(var r=0;r<e.length;r++)this.callbackListeners[e[r]].push(t);else{if(!(i=this.callbackListeners[e]))throw"At","tempted to add an invalid listener.",new Error("Attempted to add an invalid listener.");i.push(t)}return{type:e,cb:t}},t.ChartEngine.prototype.removeEventListener=function(e,t){var i,a,r;if(e&&"object"==s(e)||(e={type:e,cb:t}),i=function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return void e.splice(i,1)},a=this.callbackListeners,"*"!==e.type){if(!a[e.type]){824201799,-1436247771,r=2;for(var n=1;824201799!==W.u8Y(n.toString(),n.toString().length,55862);n++)throw new Error("Attempted to remove an invalid listener.");if(-1436247771!==W.u8Y(r.toString(),r.toString().length,32119))throw new Error("")}i(a[e.type],e.cb)}else for(var o in a)i(a[o],e.cb)},t.ChartEngine.prototype.dispatch=function(e,t){var i;if(i=this.callbackListeners[e])for(var a=0;a<i.length;a++)if(!0===i[a].call(this,t))return!0;if(i=this.callbackListeners["*"],W.f7H(),i)for(var r=0;r<i.length;r++)if(!0===i[r].call(this,t))return!0;return!1},t.ChartEngine.prototype.updateListeners=function(e){var t;for(var i in W.t7H(),this.plugins)(t=this.plugins[i]).display&&t.listener&&t.listener(this,e)}},_=function(e){var t;(t=e.CIQ).ChartEngine.prototype.prepend=function(e,i){var a,r;return"prep","en","d",W.Y9g(12),a=W.M9g(e,"prepend"),this instanceof t.ChartEngine?(r=this.hasOwnProperty(a)?this[a]:[],this[a]=[i].concat(r)):(r=t.ChartEngine.prototype[a]||[],t.ChartEngine.prototype[a]=[i].concat(r)),{method:a,func:i}},t.ChartEngine.prototype.append=function(e,i){var a,r;return W.Y9g(12),a=W.M9g(e,"append"),this instanceof t.ChartEngine?(r=this.hasOwnProperty(a)?this[a]:[],this[a]=r.concat(i)):(r=t.ChartEngine.prototype[a]||[],t.ChartEngine.prototype[a]=r.concat(i)),{method:a,func:i}},t.ChartEngine.prototype.runPrepend=function(e,i,a){var r,n,s;if(W.Y9g(12),r=W.a9g(e,"prepend"),!(n=(n=this.hasOwnProperty(r)?this[r]:[]).concat(t.ChartEngine.prototype[r]||[])).length)return!1;a||(a=this),W.f7H();for(var o=0;o<n.length;o++)if(s=n[o].apply(a,i))return s;return!1},t.ChartEngine.prototype.runAppend=function(e,i,a){var r,n,s;if(W.O9g(12),r=W.M9g(e,"append"),!(n=(n=this.hasOwnProperty(r)?this[r]:[]).concat(t.ChartEngine.prototype[r]||[])).length)return!1;a||(a=this);for(var o=0;o<n.length;o++)if(s=n[o].apply(a,i))return s;return!1},W.f7H(),t.ChartEngine.prototype.removeInjection=function(e){var i,a,r,n=W;if(i=e.method,this instanceof t.ChartEngine){-1385664884,118139493,r=2;for(var s=1;-1385664884!==n.u8Y(s.toString(),s.toString().length,23933);s++){if(!this[i])return;n.Y9g(90),r+=n.M9g(0,"2")}if(118139493!==n.u8Y(r.toString(),r.toString().length,94135)&&-this[i])return;for(a=0;a<this[i].length;a++)if(this[i][a]==e.func)return void this[i].splice(a,1)}else{if(!t.ChartEngine.prototype[i])return;for(a=0;a<t.ChartEngine.prototype[i].length;a++)if(t.ChartEngine.prototype[i][a]==e.func)return void t.ChartEngine.prototype[i].splice(a,1)}},t.ChartEngine.prototype.remove=function(e){var i=W;i.t7H(),this instanceof t.ChartEngine?("pr","epe","nd",i.Y9g(12),delete this[i.M9g(e,"append")],i.Y9g(12),delete this[i.a9g(e,"prepend")]):("p","re","p","end",i.O9g(12),delete t.ChartEngine.prototype[i.M9g(e,"append")],i.O9g(12),delete t.ChartEngine.prototype[i.M9g(e,"prepend")])}},P=function(e){var t,i;W.t7H(),t=e.CIQ,i=e.timezoneJS,t.ChartEngine.prototype.convertToDataZone=function(e){var i;return(e||0===e)&&this.dataZone&&(i=t.convertTimeZone(e,null,this.dataZone),e=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())),e},t.ChartEngine.prototype.debug=function(){},t.ChartEngine.prototype.fps=function(e,i){var a,r,n;e=e||5,a=(new Date).getTime(),r=0,n=this,W.t7H(),W.Y9g(26),console.log(W.a9g("Running fps() for "," seconds",e)),function s(){var o,l,h,c,u=W;u.Y9g(56);var d=u.M9g(1020,20,1);if((o=((new Date).getTime()-a)/d)>e)return u.Y9g(36),l=u.a9g(o,r),u.O9g(12),console.log(u.a9g(l,"FPS=")),void(i&&i(l));n.draw(),-188409782,u.Y9g(24),h=-u.M9g("214903712",2147483647),u.f7H(),c=2;for(var p=1;-188409782!==u.a8Y(p.toString(),p.toString().length,24834);p++)r--,u.Y9g(90),c+=u.M9g(0,"2");u.u8Y(c.toString(),c.toString().length,38173)!==h&&r++;t.ChartEngine.useAnimation?requestAnimationFrame(s):setTimeout(s,0)}()},t.ChartEngine.htmlControls={mSticky:'<div class="stx_sticky"> <span class="mStickyInterior"></span></div>',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div></div>'},t.ChartEngine.prototype.setChartType=function(e){var t,i;if(W.t7H(),"l","a","yo","ut",t=this.layout,i=this.chart,"ohlc"!=t.aggregationType&&(t.aggregationType="ohlc",i.canvas&&this.createDataSet()),t.chartType=e,this.setMainSeriesRenderer(),this.mainSeriesRenderer.isAggregation&&this.setAggregationType)return this.setAggregationType(e);i.defaultChartStyleConfig={type:e},this.displayInitialized&&this.draw(),this.changeOccurred("layout")},t.ChartEngine.prototype.setChartScale=function(e){e||(e="linear"),this.layout.chartScale=e,this.chart.canvas&&this.draw(),this.changeOccurred("layout")},t.ChartEngine.prototype.checkLogScale=function(){var e,t,i,a;if(e="check",e+="LogScal",e+="e",t="che",t+="c",t+="k",t+="LogScale",!this.runPrepend(t,arguments))return"log"===this.layout.chartScale&&(i=!1,this.chart.yAxis.lowValue<=0&&(a="not",a+="ificat",a+="ion",this.setChartScale("linear"),this.dispatch(a,"logdeactivated"),i=!0),this.runAppend(e,arguments),i)},t.ChartEngine.prototype.setAdjusted=function(e){this.layout.adj=e,this.chart.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},t.ChartEngine.prototype.padOutPrice=function(e,t){var i,a,r,n,s=W;if(s.f7H(),0!==e&&(!e||"number"!=typeof e))return"";if(t||0===t||(t=e),s.Y9g(12),a=0,(i=s.M9g(t,"")).indexOf(".")>-1){s.Y9g(12);var o=s.M9g(1578,113);s.Y9g(28);var l=s.a9g(10,3516,4676,3,4688);s.O9g(26);var h=s.M9g(3293,6,4);s.O9g(97);var c=s.a9g(11,19,19,7571);s.Y9g(74);s.M9g(133758,12,22638,6);a=i.substring(i.indexOf(o==l?521.85:h<c?".":"V")).length-1}return a=t>=1e3?Math.max(a,0):t<2?Math.max(a,4):Math.max(a,2),(r=this.internationalizer)?(a>=(n=r.priceFormatters.length)&&(s.O9g(16),a=s.a9g(1,n)),e=r.priceFormatters[a].format(e)):e=e.toFixed(a),e},t.ChartEngine.prototype.formatPrice=function(e,t){var i,a,r;return"u","ndefined",0===e||e&&"undefined"!=s(e)?(t||(t=this.currentPanel),t||(t=this.chart.panel),t?((i=t.decimalPlaces)||0===i||(i=t.chart.decimalPlaces),i||0===i?((a=this.internationalizer)?(i>=(r=a.priceFormatters.length)&&(W.Y9g(16),i=W.M9g(1,r)),e=a.priceFormatters[i].format(e)):e=e.toFixed(i),e):e.toString()):e.toString()):""},t.ChartEngine.prototype.determineMinMax=function(e,i,a,r,n,s,o,l,h){var c,u,d,p,g,f,m,y,v,x,b;W.f7H(),W.O9g(7);var C=W.M9g(9,10);c=Number.MAX_VALUE*C,u=Number.MAX_VALUE,d=!1,p=e.length,h||(h=[]),g=[],n&&(p=n);for(var S=0;S<=p+1;S++)if(i.length&&(f=S==p?this.getPreviousBar(this.chart,i[0],0):S==p+1?this.getNextBar(this.chart,i[0],p-1):e[S]),f){if(!r)if(f.transform)d=!0,f=f.transform;else if(d)continue;m=0;for(var w=0;w<i.length;w++)if(y=t.existsInObjectChain(f,i[w])){"number"==typeof(v=y.obj[y.member])&&(v=[v]);for(var k=0;k<v.length;k++)x=v[k],s&&x instanceof Array&&(x=x[0]),(x||0===x)&&(!0===a||a instanceof Array&&a.indexOf(i[w])>-1?((m+=x)>c&&(c=m),m<u&&(u=m)):(x>c&&(c=x),x<u&&(u=x),g.push({value:x,quote:f})))}(!0===a||a instanceof Array&&a.indexOf(i[w])>-1)&&g.push({value:m,quote:f})}return b=[u,c],h.forEach((function(e){W.t7H(),b=e(g,o,l)||b})),b[1]==-1*Number.MAX_VALUE&&(b[1]=0),b[0]==Number.MAX_VALUE&&(b[0]=0),b},t.ChartEngine.prototype.initializeDisplay=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m=W;if(m.f7H(),!this.runPrepend("initializeDisplay",arguments)){i=[],a=[],r=!1,n=this,s=["Close","Open","High","Low"],o=[e.defaultPlotField||"Close"];var y=this.mainSeriesRenderer,v=e.dataSegment,x=e.seriesRenderers;if(h=null,c=Math.floor((e.width-this.micropixels)/this.layout.candleWidth),e.scroll>e.maxTicks&&e.maxTicks>c+1){m.Y9g(10);var b=m.M9g(7,17,9);h=v.length-b}for(var C in u=[],this.panels){u=(d=this.panels[C]).yaxisLHS.concat(d.yaxisRHS);for(var S=0;S<u.length;S++)p=u[S],i=[],a=[],g=e.transformFunc&&p==e.panel.yAxis,A(p,d),this.currentlyImporting||p.renderers.length||p.studies.length?(l=y&&y.determineMax?y.determineMax(v,i,a,!g,h,r,d,p):this.determineMinMax(v,i,a,!g,h,r,d,p),this.baselineHelper&&(l=this.setBaselineMinMax(l,p)),p.lowValue=l[0],p.highValue=l[1],p==e.panel.yAxis&&(e.lowValue=p.lowValue,e.highValue=p.highValue)):this.deleteYAxisIfUnused(d,p)}if((f=e.state.aggregation)&&f.box){m.Y9g(140);var w=m.a9g(13,2,6,7,8);e.lowValue-=f.box/w,m.O9g(141);var k=m.M9g(1,20,5,40,700);e.highValue+=f.box/k}this.runAppend("initializeDisplay",arguments)}function A(l,h){var c,u,d,p,g,f,y,v,b;if(c=!1,(u=n.layout&&n.layout.studies&&n.layout.studies[l.name])&&(!h||h.name==u.panel)){for(var C in u.outputMap)i.push(C),u.study&&(u.study.renderer?i=i.concat(t.createObjectChainNames(C,s)):u.study.seriesFN||(i=i.concat(t.createObjectChainNames(C,o))));for(var S=0;S<=2;S++)"_his","t",i.push(u.name+"_hist"+(S||""));c=!0}if(h){for(var w in l.studies=[],m.f7H(),l.renderers=[],c&&l.studies.push(l.name),x)if(g=(p=(d=x[w]).params).panel,(p.yAxis||!n.panels[g]||n.panels[g].yAxis)==l&&g==h.name){f=d.highLowBars?s:o,r=d.bounded;for(var k=0;k<d.seriesParams.length;k++)(y=d.seriesParams[k]).hidden||(v=void 0,y.subField?v=t.createObjectChainNames(y.symbol,[y.subField]).concat(y.symbol):y.symbol?v=t.createObjectChainNames(y.symbol,f).concat(y.symbol):y.field?v=y.field:l==e.panel.yAxis&&(v=f),v&&(i=i.concat(v)),d.useSum&&(a=a.concat(v)));l.renderers.push(w)}for(var D in n.overlays)(b=n.overlays[D]).panel==h.name&&b.name!=l.name&&b.getYAxis(n)==l&&(l.studies.push(b.name),e.includeOverlaysInMinMax&&A({name:b.name}))}}},t.ChartEngine.prototype.setMarket=function(e,i){if(t.Market)for(var a in i||(i=this.chart),i.market=new t.Market(e),this.layout.marketSessions)i.market.disableSession(a,this.layout.marketSessions[a])},t.ChartEngine.prototype.setMarketFactory=function(e){W.t7H(),this.marketFactory=e},t.ChartEngine.prototype.setResizeTimer=function(e){var i,a;this.resizeDetectMS=e,this.resizeHandle=t.resizeObserver(this.chart.container,(i=this,a=function(){i.chart.canvas&&(t.isAndroid||i.chart.canvas.height==Math.floor(i.devicePixelRatio*i.chart.container.clientHeight)&&i.chart.canvas.width==Math.floor(i.devicePixelRatio*i.chart.container.clientWidth)||i.resizeChart())},W.f7H(),function(){W.t7H(),"undefined"!=typeof ResizeObserver?t.ChartEngine.useAnimation?requestAnimationFrame(a):setTimeout(a,0):a()}),this.resizeHandle,e)},t.ChartEngine.prototype.getRenderedItems=function(){var e,i,a,r,n,s,o,l;if("Op","e","n",e=this.chart,i=this.currentPanel){for(var h in a=["Open","High","Low","Close"],r=["Close"],n=[],this.overlays)this.overlays[h].panel===i.name&&(n=n.concat(Object.keys(this.overlays[h].outputMap)));for(var c in e.seriesRenderers)if((s=e.seriesRenderers[c]).params.panel==i.name)for(var u in s.seriesParams)o=s.seriesParams[u],l=s.highLowBars?a:r,o.subField?n=n.concat(t.createObjectChainNames(o.symbol,[o.subField])).concat(o.symbol):o.symbol?n=n.concat(t.createObjectChainNames(o.symbol,l)).concat(o.symbol):o.field?n.push(o.field):i==e.panel&&(n=n.concat(l));return n}},t.ChartEngine.prototype.setTransform=function(e,t,i){e.transformFunc=t,e.untransformFunc=i},t.ChartEngine.prototype.unsetTransform=function(e){W.t7H(),delete e.transformFunc,delete e.untransformFunc;for(var t=0;e.dataSet&&t<e.dataSet.length;t++)e.dataSet[t].transform=null},t.ChartEngine.prototype.isEquationChart=function(e){return W.f7H(),!(!e||"="!=e[0])&&(!(!this.allowEquations||!t.fetchEquationChart)||("Error, equati","on chart option requires equation","sAdvanced.js",console.warn("Error, equation chart option requires equationsAdvanced.js"),!1))},t.ChartEngine.prototype.correctIfOffEdge=function(e){var t,i,a,r,n,s,o,l,h,c,u=W;if(t="co",t+="rrectIfOffEdge",!this.runPrepend("correctIfOffEdge",arguments)){for(var d in this.charts){if(a=(i=this.charts[d]).dataSet,r=i.maxTicks,n=this.layout,s=this.minimumLeftBars,o=Math.min(s,r),i.allowScrollPast){if(u.Y9g(16),l=u.a9g(o,r),o>a.length&&(l=r-a.length),i.scroll-l>=a.length){u.O9g(142);var p=u.a9g(2,7,63,8,10);i.scroll=a.length+l-p,this.micropixels=0}i.scroll<=o&&(i.scroll=o,this.micropixels=0)}else i.scroll<o&&(i.scroll=o),i.scroll>a.length&&(i.scroll=a.length);if(!1===i.allowScrollFuture){h=this.getLabelOffsetInPixels(i,n.chartType)+n.candleWidth*i.whiteSpaceFutureTicks,u.Y9g(1);var g=u.M9g(2,0,3);c=r-Math.round(h/n.candleWidth)-g,(this.micropixels<0?i.scroll-1:i.scroll)<c&&(i.scroll=c,this.micropixels=0)}}this.runAppend(t,arguments)}},t.ChartEngine.prototype.getStartDateOffset=function(){for(var e=0;e<this.chart.dataSegment.length;e++)if(this.chart.dataSegment[e])return e;return W.t7H(),0},t.ChartEngine.prototype.setStartDate=function(e){W.t7H();for(var t=0;t<this.chart.dataSet.length;t++)if(this.chart.dataSet[t].DT.getTime()==e.getTime())return this.chart.scroll=this.chart.dataSet.length-t,void this.draw()},t.ChartEngine.prototype.clearPixelCache=function(){var e,t;for(var i in this.panels)(e=this.panels[i]).cacheHigh=null,e.cacheLow=null,e.cacheLeft=1e6,W.O9g(48),e.cacheRight=-W.a9g(0,"1");for(var a in this.charts)if((t=this.charts[a]).dataSet)for(var r=0;r<t.dataSet.length;r++)t.dataSet[r].cache={}},t.ChartEngine.prototype.adjustBackingStore=function(e,i){var a,r,n,s,o=W;if(this.devicePixelRatio=window.devicePixelRatio||1,this.devicePixelRatio<1&&(this.devicePixelRatio=1),a=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,o.t7H(),r=this.devicePixelRatio/a,!this.useBackingStore)return o.Y9g(2),void(this.devicePixelRatio=this.adjustedDisplayPixelRatio=o.M9g(1507299936,"1"));(!t.isAndroid||t.is_chrome||t.isFF)&&("p","x","p","x",n=e.width,s=e.height,o.Y9g(3),e.width=o.M9g(r,n),o.O9g(3),e.height=o.a9g(r,s),o.O9g(12),e.style.width=o.M9g("px",n),o.O9g(12),e.style.height=o.M9g("px",s),i.scale(r,r),this.adjustedDisplayPixelRatio=r,this.backing={ratio:r,width:e.width,height:e.height,styleWidth:n,styleHeight:s})},t.ChartEngine.prototype.reconstituteBackingStore=function(){var e,t;this.useBackingStore&&this.backing&&(e=[this.chart.canvas],this.useBackgroundCanvas&&e.push(this.chart.backgroundCanvas),t=this.backing,e.forEach((function(e){e.width!=t.width&&(W.t7H(),e.width=t.width,e.height=t.height,e.context.scale(t.ratio,t.ratio))})),this.adjustedDisplayPixelRatio=t.ratio,this.draw())},t.ChartEngine.prototype.disableBackingStore=function(){var e,t;this.useBackingStore&&this.backing&&(e=[this.chart.canvas],this.useBackgroundCanvas&&e.push(this.chart.backgroundCanvas),t=this.backing,e.forEach((function(e){W.t7H(),e.width!=t.styleWidth&&(e.width=t.styleWidth,e.height=t.styleHeight,e.context.scale(1,1))})),this.adjustedDisplayPixelRatio=1,this.draw())},t.ChartEngine.prototype.getBackgroundCanvas=function(e){return e||(e=this.chart),this.useBackgroundCanvas?e.backgroundCanvas:e.canvas},t.ChartEngine.prototype.resizeCanvas=function(){var e,t,i,a,r,n,o,l,h,c,u=W;if("undef","in","ed",e=this.chart.canvas,t=this.chart.context,e&&t){this.floatCanvas.height=this.chart.tempCanvas.height=this.chart.backgroundCanvas.height=e.height=this.chart.container.clientHeight,this.floatCanvas.width=this.chart.tempCanvas.width=this.chart.backgroundCanvas.width=e.width=this.chart.container.clientWidth,this.adjustBackingStore(e,t),-138897842,u.Y9g(3),i=u.a9g(1,"1119359847"),a=2;for(var d=1;-138897842!==u.a8Y(d.toString(),d.toString().length,42568);d++)this.adjustBackingStore(this.chart.tempCanvas,this.chart.tempCanvas.context),this.adjustBackingStore(this.floatCanvas,this.floatCanvas.context),a+=2;u.u8Y(a.toString(),a.toString().length,40619)!==i&&(this.adjustBackingStore(this.chart.tempCanvas,this.chart.tempCanvas.context),this.adjustBackingStore(this.floatCanvas,this.floatCanvas.context)),this.adjustBackingStore(this.chart.backgroundCanvas,this.chart.backgroundCanvas.context)}for(var p in r=this.container.getBoundingClientRect(),u.t7H(),this.top=r.top,this.left=r.left,this.canvasWidth=this.chart.canvasWidth=this.chart.container.clientWidth,this.right=this.left+this.canvasWidth,this.height=this.chart.container.clientHeight,this.width=this.right-this.left,0===this.width&&!this.container.dimensionlessCanvas&&this.container.closest("html")&&("warning: ","zero width chart. Ch","eck CS","S for chart container.",console.log("warning: zero width chart. Check CSS for chart container.")),this.bottom=this.top+this.height,this.calculateYAxisPositions(),this.chart.canvasRight=this.right,this.chart.canvasHeight=this.height,"undefined"==s(n=this.layout.candleWidth)&&(n=8),this.charts){o=this.charts[p],this.setCandleWidth(n,o),o.scroll<o.width/n&&(o.scroll=Math.floor(o.width/n),l=Math.round(this.preferences.whitespace/this.layout.candleWidth),o.scroll-=l),h=10;try{c=2*t.measureText("10:00").width}catch(e){c=100}for(;h>1&&!(this.chart.width/c>h);)h/=1.5;o.xAxis.autoComputedTickSizePixels=Math.round(this.chart.width/h),o.xAxis.autoComputedTickSizePixels<1&&(o.xAxis.autoComputedTickSizePixels=1)}},t.ChartEngine.prototype.setCandleWidth=function(e,t){t||(t=this.chart),e=this.constrainCandleWidth(e),this.layout.candleWidth=e,W.O9g(14);var i=W.a9g(14,13,0);t.maxTicks=Math.round(t.width/e)+i},t.ChartEngine.prototype.constrainCandleWidth=function(e){var t,i,a;return t=this.minimumCandleWidth,i=this.maximumCandleWidth,a=this.animations.zoom,t&&e<t&&(e=t,a&&a.running&&a.stop()),i&&e>i&&(e=i,a&&a.running&&a.stop()),e},t.ChartEngine.prototype.resizeChart=function(e){var t;this.runPrepend("resizeChart",arguments)||(!1!==e&&(e=!0),e&&this.preAdjustScroll(),t=this.chart.canvasHeight,this.resizeCanvas(),e&&this.postAdjustScroll(),(this.displayInitialized||0!==this.chart.canvasHeight&&0===t)&&(this.adjustPanelPositions(),this.draw()),this.doDisplayCrosshairs(),this.updateChartAccessories(),this.runAppend("resizeChart",arguments))},t.ChartEngine.prototype.clear=function(){var e;for(var i in"n","on","e",this.displayInitialized=!1,W.f7H(),this.layout.studies)e=this.layout.studies[i],t.getFn("Studies.removeStudy")(this,e);this.controls.chartControls&&(this.controls.chartControls.style.display="none"),this.chart.panel.title.innerHTML="",this.chart.panel.title.appendChild(document.createTextNode(this.chart.panel.display))},t.ChartEngine.prototype.fillScreen=function(){var e,t,i,a,r;e=this.chart,W.f7H(),t=this.layout.candleWidth,i=e.width-this.preferences.whitespace,(a=e.dataSet.length)*t>=i?this.draw():(this.mainSeriesRenderer&&this.mainSeriesRenderer.standaloneBars||a--,W.Y9g(36),r=W.M9g(a,i),this.setCandleWidth(r,e),this.home({maintainWhitespace:!0}))},t.ChartEngine.prototype.setMaxTicks=function(e,t){var i;t||(t={}),(e=Math.round(e))<2&&(e=2),i=t.padding?t.padding:0,this.layout.candleWidth=(this.chart.width-i)/e,this.layout.candleWidth||(this.layout.candleWidth=8),W.t7H(),this.chart.maxTicks=Math.round(this.chart.width/this.layout.candleWidth-.499),(t.padding||0===t.padding)&&(W.Y9g(12),this.chart.scroll=W.M9g(1,e))},t.ChartEngine.prototype.initializeChart=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w;if(i="c",i+="an",i+="vas",a="stx-can",a+="vas",a+="-",a+="shim",r="d",r+="i",r+="v",!this.runPrepend("initializeChart",arguments)){for(var k in(n=this.chart).symbolObject.symbol||(n.symbolObject.symbol=n.symbol),this.locale&&this.setLocale(this.locale),!this.displayZone&&t.ChartEngine.defaultDisplayTimeZone&&this.setTimeZone(null,t.ChartEngine.defaultDisplayTimeZone),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.micropixels=0,e?n.container=e:e=n.container,e.stx=this,e.CIQRegistered||(e.CIQRegistered=!0,t.ChartEngine.registeredContainers.push(e)),this.registerHTMLElements&&this.registerHTMLElements(),s=n.canvas,o=n.backgroundCanvas,l=n.tempCanvas,h=this.floatCanvas,c=n.canvasShim,s&&document.createElement("canvas").getContext?(s.id||(e.removeChild(s),n.canvas=null),l&&!l.id&&(e.removeChild(l),n.tempCanvas=null),h&&!h.id&&(e.removeChild(h),this.floatCanvas=null),o&&!o.id&&(e.removeChild(o),n.backgroundCanvas=null)):this.setCandleWidth(this.layout.candleWidth),n.backgroundCanvas||(o=n.backgroundCanvas=document.createElement("canvas")),e.appendChild(o),F(o),n.canvasShim||(c=n.canvasShim=document.createElement(r)),c.className=a,e.appendChild(c),n.canvas||(s=n.canvas=document.createElement("canvas")),e.appendChild(s),F(s),n.context=s.context,n.tempCanvas||(l=n.tempCanvas=document.createElement("canvas")),e.appendChild(l),F(l,!0),this.floatCanvas||(h=this.floatCanvas=document.createElement(i)),e.appendChild(h),F(h,!0),this.resizeCanvas(),t.isAndroid&&(l.ontouchstart=h.ontouchstart=function(e){W.t7H(),e.preventDefault&&e.preventDefault()}),u=this.panels,n.panel.display=n.symbol,n.symbolDisplay&&(n.panel.display=n.symbolDisplay),this.adjustPanelPositions(),n.panel=u[n.name],u){d=u[k].yaxisLHS.concat(u[k].yaxisRHS);for(var A=0;A<d.length;A++)d[A].height=u[k].yAxis.height,this.calculateYAxisMargins(d[A])}var D;for(var M in this.initialWhitespace=this.preferences.whitespace,n.dataSet&&n.dataSet.length>0&&(n.scroll=Math.floor(n.width/this.layout.candleWidth),p=Math.round(this.preferences.whitespace/this.layout.candleWidth),n.scroll-=p),t.touchDevice&&(g=".vector",g+="Tr",g+="a",g+="shCan",f=".",f+="overlayTrashCan",m=e.querySelector(".overlayEdit"),y=e.querySelector(f),v=e.querySelector(g),x=function(e,t,i){return function(a){e.deleteHighlighted(t,i)}},m?(t.safeClickTouch(m,x(this,!0,!0)),y&&t.safeClickTouch(y,x(this,!1))):y&&t.safeClickTouch(y,x(this,!0)),v&&t.safeClickTouch(v,x(this,!0))),this.manageTouchAndMouse&&this.registerTouchAndMouseEvents(),this.handleMouseOut&&(e.onmouseout=(D=this,function(e){W.t7H(),D.handleMouseOut(e)}),t.smartHover()),this.abortDrawings&&this.abortDrawings(),this.undoStamps=[],u)(b=u[M]).markerHolder&&(e.removeChild(b.markerHolder),b.markerHolder=null);for(var T in this.plugins)(C=this.plugins[T]).display&&C.initializeChart&&C.initializeChart(this);this.resizeListenerInitialized||(S=this,this.resizeListenerInitialized=!0,w=function(){return function(e){S.resizeChart()}},this.addDomEventListener(window,"resize",w(),!0)),n.baseline.userLevel&&(n.baseline.userLevel=null),this.setResizeTimer(this.resizeDetectMS),this.runAppend("initializeChart",arguments)}function F(e,t){var i;e.context=e.getContext("2d"),e.context.lineWidth=1,(i=e.style).position="absolute",i.left="0px",t&&(i.display="none")}},t.ChartEngine.prototype.destroy=function(){var e,i,a,r;W.Y9g(90),this.setResizeTimer(W.M9g(0,"0")),W.t7H(),this.quoteDriver&&this.quoteDriver.die(),this.styles={};for(var n=0;n<this.eventListeners.length;n++)"funct","ion",(e=this.eventListeners[n]).element.removeEventListener(e.event,e.function,e.options);this.touchAndMouseEventsRegistered=!1,this.eventListeners=[],this.streamParameters.timeout&&clearTimeout(this.streamParameters.timeout),(a=(i=t.ChartEngine.registeredContainers).indexOf(this.chart.container))>-1&&i.splice(a,1),this.slider&&(r=i.indexOf(this.slider.slider.chart.container))>-1&&i.splice(r,1)},t.ChartEngine.prototype.preAdjustScroll=function(e){e||(e=this.chart),this.previousAdjust={chart:e,scroll:e.scroll,maxTicks:e.maxTicks}},t.ChartEngine.prototype.postAdjustScroll=function(){var e;W.f7H(),this.previousAdjust&&((e=this.previousAdjust.chart).scroll=this.previousAdjust.scroll+(e.maxTicks-this.previousAdjust.maxTicks),this.displayInitialized&&this.draw())},t.ChartEngine.prototype.translateIf=function(e){return this.translationCallback?this.translationCallback(e):e},t.ChartEngine.prototype.doCleanupDates=function(e,a){var r,n,s,o,l;if(e&&e.length)for(var h=0;h<e.length;h++)if((n=(r=e[h]).DT)||r.Date){if(r.DT&&"[object String]"==Object.prototype.toString.call(n)&&n.length<=10)(n=new Date(n)).setMinutes(n.getMinutes()+n.getTimezoneOffset());else{if(s=!0,r.DT||(n=t.strToDateTime(r.Date),r.Date.length<=10&&(s=!1)),"[object Date]"!=Object.prototype.toString.call(n)&&(n=new Date(n)),i.Date&&this.dataZone&&s){o=new i.Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),this.dataZone),W.Y9g(12);var c=W.a9g(750,250);l=n.getSeconds()*c+n.getMilliseconds(),n=new Date(o.getTime()+l)}t.ChartEngine.isDailyInterval(a)&&n.setHours(0,0,0,0)}r.DT||(r.Date=t.yyyymmddhhmmssmmm(n)),r.DT=n}},t.ChartEngine.prototype.doCleanupGaps=function(e,i,a){var r,n,o,l,h,c,u,d,p,g,f,m,y;if(!e||!e.length)return e;function v(e,i){var r,n,s,l,u;for(void 0===(n=(r=a.field)?c[r]:c)&&(n={}),s=o?null:n[g],l=o?null:n.Adj_Close;+e<+i;)u={DT:e},r||(h.push(u),t.extend(u,{Open:s,High:s,Low:s,Close:s,Volume:0,Adj_Close:l})),e=p.next()}if(r=this.layout.interval,a=a||{},i||(i=this.chart),!t.Market||!i.market)return e;if(a.noCleanupDates||this.doCleanupDates(e,r),!1===(n=a.cleanupGaps))return e;if(n&&!0!==n||(n=this.cleanupGaps||n),W.O9g(114),o=W.a9g(n,"gap"),!n)return e;if("tick"==r)return e;if("month"==r||"week"==r){if(this.dontRoll)return e;r="day"}function x(e,i){var r,n,l;(r=a.field)?void 0!==e[r]&&void 0===i[r]&&(i[r]=o?null:e[r]):o||(n=e[g],l=i[g],void 0!==n&&"undefined"==s(l)&&t.ensureDefaults(i,{Close:n,Open:n,High:n,Low:n,Volume:0,Adj_Close:e.Adj_Close}))}l=function(e){return e.DT?"[object Date]"!=Object.prototype.toString.call(e.DT)?new Date(e.DT):new Date(+e.DT):t.strToDateTime(e.Date)},h=[],W.t7H(),c=e[0],h.push(c),u={begin:l(c),interval:r,periodicity:1,timeUnit:this.layout.timeUnit},d=new t.Market(i.market.market_def),p=d.newIterator(u),this.extendedHours&&this.extendedHours.filter&&p.market.enableAllAvailableSessions(),g=i.defaultPlotField;for(var b=0;b<e.length&&void 0===e[b][g];b++)if(void 0!==e[b].Value){"V","alue",g="Value";break}for(var C=1;C<e.length;C++){for(m=e[C],(f=p.next())<(y=l(m))&&(v(f,y),f=p.market._convertFromMarketTZ(p.begin,p.outZone));y<f;){if(++C==e.length)return h;x(c,m),h.push(m),c=m,y=l(m=e[C])}f<y?(C--,f=p.previous()):(x(c,m),h.push(m),c=m)}return h},t.ChartEngine.prototype.getCreatingLibrary=function(){return W.f7H(),e}},V=function(e){var t;(t=e.CIQ).ChartEngine.Panel=function(e,i){this.yAxis=i||new t.ChartEngine.YAxis,this.name=e,this.state={}},t.extend(t.ChartEngine.Panel.prototype,{name:null,display:null,chart:null,yAxis:null,shareChartXAxis:null,top:null,bottom:null,height:null,percent:null,displayEdgeIfPadded:!0,noDrag:!1,exportable:!0},!0),t.ChartEngine.prototype.whichPanel=function(e){var t;for(var i in this.panels)if(!(t=this.panels[i]).hidden&&e>=t.top&&e<t.bottom)return t;return null},t.ChartEngine.prototype.panelExists=function(e){for(var t in W.t7H(),this.panels)if(this.panels[t].name==e)return!0;return!1},t.ChartEngine.prototype.storePanels=function(){var e,t;for(var i in this.layout||(this.layout={}),(e=this.layout).panels={},this.panels)t=this.panels[i],e.panels[t.name]={percent:t.percent,display:t.display,yAxis:t.yAxis}},t.ChartEngine.prototype.savePanels=function(e){this.storePanels(),W.f7H(),!1!==e&&this.changeOccurred("layout")},t.ChartEngine.prototype.privateDeletePanel=function(e){var t,i;for(var a in this.layout.studies)(t=this.layout.studies[a]).panel==e.name&&this.cleanupRemovedStudy(t);for(var r in delete this.panels[e.name],this.overlays)this.overlays[r].panel==e.name&&(this.layout.studies&&this.cleanupRemovedStudy(this.layout.studies[r]),delete this.overlays[r]);for(var n in this.chart.series)this.chart.series[n].parameters.panel==e.name&&this.removeSeries(this.chart.series[n],this.chart);if(W.f7H(),e.holder&&(this.chart.container.removeChild(e.holder),this.getMarkerArray)){i=this.getMarkerArray("panelName",e.name);for(var s=0;s<i.length;s++)this.removeFromHolder(i[s])}e.handle&&e.handle.remove(),this.currentPanel=null},t.ChartEngine.prototype.plotsInPanel=function(e){var t,i,a,r;for(var n in t=[],i=e,"object"==s(e)&&(i=e.name),this.layout.studies)i===(a=this.layout.studies[n]).panel&&t.push(a);for(var o in this.chart.seriesRenderers)i===(r=this.chart.seriesRenderers[o]).params.panel&&t.push(r);return t},t.ChartEngine.prototype.checkForEmptyPanel=function(e,t,i){var a,r;if(W.t7H(),!e)return!1;if(a=e,"object"==s(e)&&(a=e.name),a===this.chart.name)return!1;i?i instanceof Array||(i=[i]):i=[],r=this.plotsInPanel(e);for(var n=0;n<r.length;n++)if(-1==i.indexOf(r[n]))return!1;return t||this.panelClose(this.panels[a]),!0},t.ChartEngine.prototype.panelClose=function(e){var i,a;if(i="pane",i+="lClose",e&&!this.runPrepend(i,arguments)){if(this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,e.soloing&&this.panelSolo(e),this.charts[e.name]){for(var r in this.panels)(a=this.panels[r]).chart.name==e.name&&this.privateDeletePanel(a);delete this.charts[e.name]}else this.privateDeletePanel(e);this.currentlyImporting||(this.showCrosshairs(),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()),this.userPointerDown=this.grabbingScreen=!1,this.openDialog&&(this.openDialog=""),this.runAppend("panelClose",arguments)}},t.ChartEngine.prototype.deleteAllPanels=function(){var e;for(var t in this.panels)e=this.panels[t],this.privateDeletePanel(e);this.layout.panels={},this.panels={}},t.ChartEngine.prototype.panelUp=function(e){var i,a,r,n;for(r in this.cancelTouchSingleClick=!0,W.f7H(),t.ChartEngine.drawingLine=!1,this.showCrosshairs(),i={},a=0,this.panels){if(r==e.name)break;a++}if(a){for(r in n=0,this.panels)n==a-1&&(i[e.name]=e),r!=e.name&&(i[r]=this.panels[r],n++);this.panels=i,this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.panelDown=function(e){var i,a,r,n,s;for(r in this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,W.f7H(),this.showCrosshairs(),i={},a=0,this.panels){if(r==e.name)break;a++}for(r in n=0,this.panels)n++;if(a!=n-1){for(r in s=0,this.panels)r!=e.name?(i[r]=this.panels[r],s==a+1&&(i[e.name]=e),s++):s++;this.panels=i,this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.panelSolo=function(e){var i,a,r;if(this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),i=!0,e.soloing){if("ch","art",i=!1,e.soloing=!1,e.solo.classList.remove("stx_solo_lit"),e.percent=e.oldPercent,"chart"!=e.name)if(this.soloPanelToFullScreen){if(1==e.percent)for(a in this.panels)(r=this.panels[a])!=e&&(e.percent-=r.percent)}else this.chart.panel.percent=this.chart.panel.oldPercent;this.soloPanelToFullScreen&&(this.xAxisAsFooter=this.chart.panel.oldXAxisAsFooter)}else if(e.soloing=!0,e.solo.classList.add("stx_solo_lit"),e.oldPercent=e.percent,this.chart.panel.oldXAxisAsFooter=this.xAxisAsFooter,"chart"!=e.name)if(this.soloPanelToFullScreen)this.xAxisAsFooter=!0;else{this.chart.panel.oldPercent=this.chart.panel.percent,W.O9g(143);var n=W.M9g(11,14,24,1);e.percent=n-this.chart.panel.percent}for(a in this.panels)this.panels[a].hidden=i;this.soloPanelToFullScreen||(this.chart.panel.hidden=!1),e.hidden=!1,this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()},t.ChartEngine.prototype.calculatePanelPercent=function(e){var t;t=e.bottom-e.top,W.f7H(),e.percent=t/this.chart.canvasHeight},t.ChartEngine.prototype.resizePanels=function(){var e,i,a,r,n,s,o=W;if(t.ChartEngine.resizingPanel){for(var l in n=t.ChartEngine.crosshairY>this.resolveY(t.ChartEngine.resizingPanel.top),this.panels){if(this.panels[l]==t.ChartEngine.resizingPanel)break;this.panels[l].hidden||(e=this.panels[l])}if(s=this.backOutY(t.ChartEngine.crosshairY),n)for(a=t.ChartEngine.resizingPanel.yaxisLHS.concat(t.ChartEngine.resizingPanel.yaxisRHS),r=0;r<a.length;r++){o.O9g(12);var h=o.a9g(4,6);i=a[r].initialMarginTop+a[r].initialMarginBottom+h,s>a[r].bottom-i&&(s=a[r].bottom-i)}else for(a=e.yaxisLHS.concat(e.yaxisRHS),r=0;r<a.length;r++){o.O9g(16);var c=o.M9g(120,130);i=a[r].initialMarginTop+a[r].initialMarginBottom+c,s<a[r].top+i&&(s=a[r].top+i)}t.ChartEngine.crosshairY=this.resolveY(s),e.bottom=s,t.ChartEngine.resizingPanel.top=s,this.calculatePanelPercent(e),this.calculatePanelPercent(t.ChartEngine.resizingPanel),this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.isPanelAboveChart=function(e){for(var t in this.panels){if("chart"==t)return!1;if(t==e.name)return!0}return!1},t.ChartEngine.prototype.adjustPanelPositions=function(){var e,i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b=W;e="adjustP",e+="anelPositions";var C=this.chart,S=this.panels;if(C.tempCanvas&&t.clearCanvas(C.tempCanvas,this),!this.runPrepend(e,arguments)){for(l in i=0,a=C.canvasHeight,r=!1,n=0,s=0,o=!1,S)h=S[l],(isNaN(h.percent)||h.percent<=0)&&(h.percent=.05),h.hidden||(n+=h.percent,s++,h.soloing&&(o=!0));for(l in S)if(b.O9g(90),c=b.a9g(0,"0"),(h=S[l]).hidden)h.markerHolder&&(h.markerHolder.style.display="none");else{if(this.manageTouchAndMouse&&(h.up&&(r?(u="stx-sh",u+="ow",this.displayIconsUpDown&&h.up.classList.add(u)):(r=!0,h.up.classList.remove("stx-show"))),h.solo&&(o?h.soloing&&this.displayIconsSolo?h.solo.classList.add("stx-show"):h.solo.classList.remove("stx-show"):1==s?h.solo.classList.remove("stx-show"):2!=s||this.soloPanelToFullScreen?this.displayIconsSolo&&h.solo.classList.add("stx-show"):(d="stx",d+="-",d+="show",h.solo.classList.remove(d))),h.down&&(1==s?h.down.classList.remove("stx-show"):this.displayIconsUpDown&&h.down.classList.add("stx-show")),h.edit&&(h.editFunction?h.edit.classList.add("stx-show"):h.edit.classList.remove("stx-show")),h.close&&(this.displayIconsClose?h.close.classList.add("stx-show"):h.close.classList.remove("stx-show"))),h.percent=h.percent/n,h.top=i,h.bottom=h.top+a*h.percent,h.height=h.bottom-h.top,h.chart.name==h.name&&(h.chart.top=h.top,h.chart.bottom=h.bottom,h.chart.height=h.height),i=h.bottom,h.yaxisLHS){p=h.yaxisLHS.concat(h.yaxisRHS);for(var w=0;w<p.length;w++)(g=p[w]).zoom&&g.height>0&&(c=g.zoom/g.height),this.adjustYAxisHeightOffset(h,g),g.height=g.bottom-g.top,c&&(g.scroll*=c*g.height/g.zoom,g.zoom=c*g.height,g.zoom>g.height&&(g.zoom=0,g.scroll=0)),g.high||0===g.high||(g.high=100,g.low=0,g.shadow=100),g.multiplier=g.height/g.shadow,"none"===g.position&&this.calculateYAxisMargins(g)}h.holder&&(f="p",f+="x",m="0p",m+="x",h.holder.style.right=m,h.holder.style.top=h.top+"px",h.holder.style.left="0px",h.holder.style.height=h.height+"px",h.subholder.style.left=h.left+"px",h.subholder.style.width=h.width+"px",h.subholder.style.top="0px",h.yAxis.height>=0&&(h.subholder.style.height=h.yAxis.height+f))}if(l&&S[l].down&&S[l].down.classList.remove("stx-show"),this.manageTouchAndMouse&&2==s&&!o&&C.panel.solo&&(y="stx-",y+="sh",y+="ow",C.panel.solo.classList.add(y)),C.panel){if(o&&this.soloPanelToFullScreen){b.Y9g(59);var k=b.M9g(2,1,11,2);v=C.canvasHeight-h.yAxis.bottom+k}else{b.Y9g(16);var A=b.M9g(20,32);v=C.canvasHeight-C.panel.yAxis.bottom+A}var D=this.controls,M=D.chartControls,T=D.home,F=D.notificationTray;x=this.width-C.panel.right,M&&(b.Y9g(12),M.style.bottom=b.M9g("px",v)),T&&(b.O9g(12),T.style.bottom=b.M9g("px",v),b.Y9g(12),T.style.marginRight=b.M9g("px",x)),F&&(b.Y9g(12),F.style.bottom=b.a9g("px",v),b.O9g(12),F.style.marginRight=b.M9g("px",x))}this.clearPixelCache(),b.t7H(),this.drawingObjects.length&&this.adjustDrawings(),this.runAppend("adjustPanelPositions",arguments)}},t.ChartEngine.prototype.createPanel=function(e,t,i,a,r,n){var s,o,l,h,c,u,d,p=W;if(s="cha",s+="r",s+="t",o="c",o+="re",o+="ate",o+="Panel",!this.runPrepend(o,arguments)){for(var g in a||(a=s),l=this.chart.canvasHeight,i||(p.Y9g(54),i=p.M9g(l,0,"0.2")),i>l&&(p.O9g(3),i=p.M9g(.5,l)),p.Y9g(36),h=p.a9g(l,i),p.Y9g(16),p.t7H(),c=p.a9g(h,1),u=!1,this.panels)(d=this.panels[g]).percent*=c,d.soloing&&(u=!0);return this.stackPanel(e,t,h,a,r),this.panels[t].hidden=u,this.panels[t].exportable=!n,this.adjustPanelPositions(),this.savePanels(!1),this.runAppend("createPanel",arguments),this.panels[t]}},t.ChartEngine.prototype.modifyPanel=function(e,i){var a,r,n,s,o,l,h,c;a=e.name;var u=this.layout.studies,d=this.chart.series,p=i||{},g=p.name,f=p.display,m=p.yAxis;for(var y in g||(g=t.uniqueID()),f||(f=g),m||((m=e.yAxis).name=g),r={},this.panels)y===e.name?((n=this.panels[y]).name=g,n.display=f,n.yAxis=m,e=r[g]=n,this.moveMarkers&&a!==g&&this.moveMarkers(a,g)):r[y]=this.panels[y];for(var v in this.panels=r,s=!1,u)(o=u[v]).panel===a&&(o.panel=g,o.parameters&&o.parameters.panelName&&(s=!0,o.parameters.panelName=g));for(var x in d)d[x].parameters.panel===a&&(s=!0,l={panel:g},d[x].parameters.yAxis&&d[x].parameters.yAxis.name===a&&(l.yAxis=m),this.modifySeries(x,l,!0));s&&this.changeOccurred("layout"),h=!1,W.f7H();for(var b=0;b<this.drawingObjects.length;b++)a===(c=this.drawingObjects[b]).panelName&&(c.panelName=g,h=!0);h&&this.changeOccurred("vector"),this.calculateYAxisPositions()},t.ChartEngine.prototype.setPanelHeight=function(e,t){var i,a,r,n,s=W;if(t){Object.values(this.panels).slice(-1)[0]===e&&(t+=this.xaxisHeight);var o=this.chart.canvasHeight,l=e.percent;s.Y9g(36),i=s.M9g(o,t),s.Y9g(16),a=s.a9g(l,1),s.O9g(16),r=s.a9g(i,1),s.Y9g(36),n=s.a9g(r,a),Object.values(this.panels).forEach((function(e){e.percent/=n})),e.percent=i,this.adjustPanelPositions(),this.savePanels()}},t.ChartEngine.prototype.electNewPanelOwner=function(e,i){var a,r,n,s,o,l,h,c;if("string"==typeof e&&(e=this.panels[e]),r=e.yAxis,e&&e!=this.chart.panel){if((s=(n=e.yAxis).studies[0])&&s!=r.name||(s=n.renderers[0]),s&&s!=r.name||(s=n.studies[1]),s||(s=n.renderers[1]),i)n=e.yAxis=i,a=i.name;else if(s)(n=this.addYAxis(e,new t.ChartEngine.YAxis({name:s,position:n.position}))).renderers=e.yAxis.renderers,n.studies=e.yAxis.studies,a=s;else if(e.yaxisLHS){l=(o=e.yaxisRHS.concat(e.yaxisLHS).filter((function(e){return W.t7H(),e.name!=r.name})))[0];for(var u=0;u<o.length;u++)if(!o[u].position){l=o[u];break}l&&(n=e.yAxis=l,a=l.studies[0]||l.renderers[0])}a?(s=a,r.name!=e.name&&(s=e.name),(c=this.layout.studies)&&c[a]&&(h=c[a].inputs.display),this.modifyPanel(e,{name:s,display:h||a,yAxis:n}),this.deleteYAxisIfUnused(e,r),this.calculateYAxisMargins(this.panels[s].yAxis)):this.checkForEmptyPanel(e)}return a},t.ChartEngine.prototype.configurePanelControls=function(e){var i,a,r,n;if(W.t7H(),".stx-","ico","-close",".stx-ic","o-up","stx","-show",i=e.icons){if(a=e.name==e.chart.name,i.classList.add("stx-show"),e.title=i.querySelector(".stx-panel-title"),e.up=i.querySelector(".stx-ico-up"),e.up&&(e.up=e.up.parentNode),e.solo=i.querySelector(".stx-ico-focus"),e.solo&&(e.solo=e.solo.parentNode),e.down=i.querySelector(".stx-ico-down"),e.down&&(e.down=e.down.parentNode),e.edit=i.querySelector(".stx-ico-edit"),e.edit&&(e.edit=e.edit.parentNode),e.close=i.querySelector(".stx-ico-close"),e.close&&(e.close=e.close.parentNode),e.title&&(e.title.innerHTML="",e.display&&e.title.appendChild(document.createTextNode(e.display)),a&&(e.title.classList.add("chart-title"),i.classList.add("stx-chart-panel"))),t.touchDevice&&!t.isSurface||this.makeModal(i),e.handle){t.touchDevice&&!t.isSurface||(e.handle.onmouseover=(l=this,W.f7H(),function(){l.hideCrosshairs()})),t.touchDevice&&!t.isSurface||(e.handle.onmouseout=(o=this,W.t7H(),function(){W.f7H(),o.showCrosshairs()})),r=function(e,i){return function(a){t.ChartEngine.resizingPanel||""!==e.openDialog||(W.t7H(),e.grabHandle(i))}},t.isSurface?e.handle.onpointerdown=r(this,e):e.handle.onmousedown=r(this,e),-1058718357,1631610325,n=2;for(var s=1;-1058718357!==W.a8Y(s.toString(),s.toString().length,71373);s++)t.touchDevice&&(e.handle.ontouchstart=r(this,e)),n+=2;1631610325!==W.u8Y(n.toString(),n.toString().length,20124)&&t.touchDevice&&(e.handle.ontouchstart=r(this,e))}var o,l,h,c,u,d,p,g,f,m;e.up&&t.safeClickTouch(e.up,(h=this,c=e,W.t7H(),function(){h.panelUp(c)})),e.down&&t.safeClickTouch(e.down,(u=this,d=e,function(){u.panelDown(d)})),e.solo&&t.safeClickTouch(e.solo,(p=this,g=e,function(){W.t7H(),p.panelSolo(g)})),e.close&&("ch","art","chart"==e.name?("no","ne",e.close.style.display="none"):t.safeClickTouch(e.close,(f=this,m=e,function(){f.panelClose(m)})))}},t.ChartEngine.prototype.stackPanel=function(e,i,a,r,n){var s,o,l,h,c,u=W;s="stx",s+="-",s+="subh",s+="older",this.runPrepend("stackPanel",arguments)||(r||(r="chart"),o=this.charts[r],u.Y9g(114),(l=u.M9g(i,r))&&(e=o.symbol,o.symbolDisplay&&(e=o.symbolDisplay),n||(n=o.yAxis)),h=this.panels[i]=new t.ChartEngine.Panel(i,n),!l&&o.yAxis&&h.yAxis.position==o.yAxis.position&&(h.yAxis.width=o.yAxis.width),l&&!o.panel&&(o.panel=h),h.percent=a,h.chart=o,h.display=e,h.holder=t.newChild(this.container,"div","stx-holder"),h.subholder=t.newChild(h.holder,"div",s),u.Y9g(89),h.subholder.style.zIndex=u.M9g("1",278263552),h.holder.panel=h,c=l?"stx-panel-chart":"stx-panel-study",h.holder.classList.add(c),this.controls.handleTemplate&&this.manageTouchAndMouse&&(h.handle=this.controls.handleTemplate.cloneNode(!0),this.container.appendChild(h.handle),h.handle.panel=h),this.controls.iconsTemplate&&(h.icons=this.controls.iconsTemplate.cloneNode(!0),h.subholder.appendChild(h.icons),this.configurePanelControls(h)),this.currentlyImporting||this.resizeCanvas(),this.runAppend("stackPanel",arguments))},t.ChartEngine.prototype.setPanelEdit=function(e,i){e.editFunction=i,e.edit&&t.safeClickTouch(e.edit,i),this.adjustPanelPositions()},t.ChartEngine.prototype.drawPanels=function(){var e,t,i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y=W;if(!this.runPrepend("drawPanels",arguments)){for(var v in e=!1,this.panels)if(t="se",t+="gm",t+="e",t+="nt",i="s",i+="t",i+="x-sh",i+="ow",(a=this.panels[v]).state={},r=this.translateIf(a.display),a.title&&a.title.textContent!=r&&(a.title.innerHTML="",a.title.appendChild(document.createTextNode(r))),a.icons&&a.icons.classList.add(i),a.hidden)n="no",n+="n",n+="e",s="stx-",s+="s",s+="ho",s+="w",a.icons&&a.icons.classList.remove(s),a.handle&&(a.handle.style.display=n),a.holder.style.display="none";else if("chart"!=a.name&&(o="n",o+="one",l="n",l+="o",l+="n",l+="e",h="n",h+="o",h+="n",h+="e",c=this.manageTouchAndMouse,a.up&&(a.up.style.display=this.displayIconsUpDown&&c?"":"none"),a.down&&(a.down.style.display=this.displayIconsUpDown&&c?"":"none"),a.solo&&(a.solo.style.display=this.displayIconsSolo&&c?"":h),a.close&&(a.close.style.display=this.displayIconsClose&&c?"":l),a.edit&&(a.edit.style.display=a.editFunction&&c?"":o)),a.holder.style.display="block",a.displayEdgeIfPadded&&(u=Math.round(a.left)+.5,d=a.yAxis.top-.5,p=a.yAxis.bottom+.5,a.yaxisCalculatedPaddingLeft&&!a.yaxisTotalWidthLeft&&this.plotLine(u,u,d,p,this.canvasStyle("stx_grid_border"),"segment",this.chart.context,!1,{lineWidth:1}),u=Math.round(a.right)+.5,a.yaxisCalculatedPaddingRight&&!a.yaxisTotalWidthRight&&this.plotLine(u,u,d,p,this.canvasStyle("stx_grid_border"),"segment",this.chart.context,!1,{lineWidth:1})),e){f=a.top,y.O9g(16);var x=y.a9g(0,1);if(f=Math.round(f)+"0.5"*x,this.plotLine(a.left-.5,a.right+.5,f,f,this.canvasStyle("stx_panel_border"),t,this.chart.context,!1,{}),a.handle){m="p",m+="x",this.displayPanelResize?a.handle.style.display="":a.handle.style.display="none",y.O9g(82);var b=y.a9g(546410431,3,819615651);a.handle.style.top=f-a.handle.offsetHeight/("2">>b)+m}}else g="no",g+="ne",a.handle&&(a.handle.style.display=g),e=!0;this.runAppend("drawPanels",arguments)}}},O=function(e){var t;(t=e.CIQ).ChartEngine.isDailyInterval=function(e){return"m","o","nt","h","w","e","e","k","d","a","y","day"==e||("week"==e||"month"==e)},t.ChartEngine.prototype.setPeriodicity=function(e,i){var a,r,n,o,l,h,c,u,d,p,g,f,m,y,v,x=W;if(!this.runPrepend("setPeriodicity",arguments)){"object"!==s(arguments[0])&&(e={period:arguments[0],interval:arguments[1],timeUnit:arguments[2]},i=arguments[arguments.length-1],3===arguments.length&&(e.timeUnit=void 0));var b=e,C=b.period,S=b.interval,w=b.timeUnit;"function"!=typeof i&&(i=null);var k=t.cleanPeriodicity(C,S,w);C=k.period,S=k.interval,w=k.timeUnit;var A=this.layout;A.setSpan={},A.range={},this.chart.inflectionPoint=null,a=!1,this.chart.symbol&&(a=this.needDifferentData({period:C,interval:S,timeUnit:w}));var D=A.candleWidth,M=A.periodicity,T=A.interval,F=A.timeUnit;if(r={prvPeriodicity:M,prvInterval:T,prvTimeUnit:F},A.periodicity=C,A.interval=S,A.timeUnit=w,o={stx:n=this,differentData:a,prevPeriodicity:r},a){if(this.changeOccurred("layout"),this.clearCurrentMarketData(),this.quoteDriver)for(var _ in this.charts)(l=this.charts[_]).symbol&&(this.displayInitialized?this.quoteDriver.newChart({symbol:l.symbol,symbolObject:l.symbolObject,chart:l},R):this.loadChart(l.symbol,{chart:l},R));else this.dataCallback?(this.dataCallback(),R()):(h="cannot change periodicity b",h+="ecause neither dataCal",h+="lback or quoteDriver are set",console.log(h));this.home()}else{for(var P in this.charts){var V=c=this.charts[P],O=V.dataSegment,I=V.dataSet,L=V.maxTicks,H=V.scroll;if(u=O?O.length:0,d=I?I.length:0,x.Y9g(48),p=void x.a9g(0,"0"),g=Math.round(c.maxTicks/2),this.setCandleWidth(D,c),f=!0,m=!1,H<=L?f=!1:O&&!O[g]&&(f=!1,x.Y9g(16),m=x.a9g(d,H)),f&&u>0&&(L<(Math.round(this.chart.width/D-.499)-1)/2&&(x.O9g(16),g=x.M9g(1,u)),g>=u?(p=O[u-1].DT,x.O9g(16),g=x.M9g(1,u)):p=O[g].DT),this.createDataSet(),f){if(u>0)for(var E=d-1;E>=0;E--)if(I[E].DT.getTime()<p.getTime()){x.Y9g(144),c.scroll=x.a9g(d,1,E,g,"1");break}}else m?c.scroll=I.length+m:(y=Math.round(this.preferences.whitespace/D),x.O9g(10),c.scroll=x.a9g(y,L,1))}if(this.displayInitialized&&this.draw(),this.changeOccurred("layout"),this.quoteDriver)for(var N in this.charts)!(v=this.charts[N]).symbol||!v.moreAvailable&&v.upToDate||this.quoteDriver.checkLoadMore(v);R(),this.runAppend("setPeriodicity",arguments)}}function R(){n.dispatch("periodicity",o),i&&i(null)}},W.f7H(),t.ChartEngine.prototype.needDifferentData=function(e){var i,a,r,n;return i=this.layout,W.t7H(),a=t.ChartEngine.isDailyInterval(e.interval),r=t.ChartEngine.isDailyInterval(i.interval),n=!1,this.dontRoll||!r?i.interval!=e.interval&&(n=!0):a!=r&&(n=!0),a||e.timeUnit||(e.timeUnit="minute"),r||i.timeUnit||(i.timeUnit="minute"),e.timeUnit!=i.timeUnit&&(n=!0),this.masterData&&this.masterData.length||(n=!0),n},t.ChartEngine.prototype.getPeriodicity=function(){var e,t,i;return e=this.layout,W.f7H(),t=e.interval,(i=e.timeUnit)||(i=t,t=1),{period:e.periodicity,interval:t,timeUnit:i}}},I=function(e){var t;(t=e.CIQ).ChartEngine.prototype.isHistoricalMode=function(){var e,i,a,r,n,s;return e=new Date,i=!0,a=this.masterData,!!this.isHistoricalModeSet&&(a.length&&("D","T",r=this.getFirstLastDataRecord(a,"DT",!0),(i=((n=this.standardMarketIterator(r.DT))?n.next():r.DT)<=e)&&t.ChartEngine.isDailyInterval(n.interval)&&(s=this.chart.market.getOpen())&&e<s&&(e.setHours(0,0,0,0),+e==+n.begin&&(i=!1))),i)},t.ChartEngine.prototype.isHome=function(){var e,t,i;t=(e=this.chart).dataSet,W.f7H(),i=e.animatingHorizontalScroll,W.O9g(1);var a=W.M9g(9,0,11);return this.pixelFromTick(t.length-(i?a:1),e)<e.width+e.panel.left},t.ChartEngine.prototype.getPreviousBar=function(e,t,i){return W.t7H(),this.getNextBarInternal(e,t,i,-1)},W.f7H(),t.ChartEngine.prototype.getNextBar=function(e,t,i){return W.t7H(),this.getNextBarInternal(e,t,i,1)},t.ChartEngine.prototype.getNextBarInternal=function(e,i,a,r){var n,s,o,l;if(n=e.dataSegment&&e.dataSegment[a])for(s=n.tick;s>0&&s<e.dataSet.length;)if(W.Y9g(12),s=W.M9g(r,s),(o=e.dataSet[s])&&(l=t.existsInObjectChain(o,i))&&l.obj[l.member])return o;return null},t.ChartEngine.prototype.getFirstLastDataRecord=function(e,t,i){var a;if(e&&e.length)for(a=i?e.length-1:0;a>=0&&a<e.length;){if(e[a]&&void 0!==e[a][t])return e[a];i?a--:a++}return null},t.ChartEngine.prototype.leftTick=function(){return W.t7H(),this.chart.dataSet.length-this.chart.scroll},t.ChartEngine.prototype.getNextInterval=function(e,t,i){var a,r=W;return t||(r.Y9g(90),t=r.M9g(0,"1")),!1!==i&&(i=!0),a=this.standardMarketIterator(e,i?this.dataZone:this.displayZone),r.f7H(),a?t<1?(r.O9g(145),a.previous(r.M9g(1,t))):a.next(t):e},t.ChartEngine.prototype.standardMarketIterator=function(e,t,i){var a,r;return(a=i||this.chart).market?(r={begin:e,interval:this.layout.interval,periodicity:"tick"==this.layout.interval?this.chart.xAxis.futureTicksInterval:this.layout.periodicity,timeUnit:this.layout.timeUnit,outZone:t},a.market.newIterator(r)):null}},L=function(e){var t,i;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,i=e.SplinePlotter,t.ChartEngine.prototype.draw=function(){var e,i,a,r,n,s,o,l,h,c,u;if(e="d",e+="r",e+="a",e+="w",this.debug(),i=this.chart,a=this.layout,i.canvas&&i.dataSet&&i.canvasHeight){W.Y9g(14);var d=W.M9g(16,28,14);if(this.offset=a.candleWidth*this.candleWidthPercent/d,t.clearCanvas(i.canvas,this),this.masterData&&!this.runPrepend("draw",arguments)){this.defaultColor||this.getDefaultColor(),this.vectorsShowing=!1,this.drawPanels(),this.yAxisLabels=[],this.correctIfOffEdge(),this.createDataSegment(),this.setBaselines(i),s=this.createXAxis(i),this.initializeDisplay(i),this.drawXAxis(i,s);try{this.renderYAxis(i)}catch(e){if(e&&"reboot draw"===e.message)return this.draw();throw e}for(r in i.tmpWidth=Math.floor(a.candleWidth*this.candleWidthPercent),i.tmpWidth%2==0&&(i.tmpWidth+=1,i.tmpWidth>a.candleWidth&&(i.tmpWidth-=2)),i.tmpWidth<.5&&(i.tmpWidth=.5),this.plugins)(n=this.plugins[r]).display&&n.drawUnder&&n.drawUnder(this,i);for(r in i.legend&&(i.legend.colorMap=null),this.controls.baselineHandle&&(this.controls.baselineHandle.style.display="none"),this.rendererAction(i,"underlay"),t.getFn("Studies.displayStudies")(this,i,!0),this.displayChart(i),t.getFn("Studies.displayStudies")(this,i,!1),this.rendererAction(i,"overlay"),i.legend&&i.legend.colorMap&&i.legendRenderer&&i.legendRenderer(this,{chart:i,legendColorMap:i.legend.colorMap,coordinates:{x:i.legend.x,y:i.legend.y+i.panel.yAxis.top}}),this.plugins)(n=this.plugins[r]).display&&n.drawOver&&n.drawOver(this,i);for(var p in this.panels)this.panels[p].hidden||this.plotYAxisText(this.panels[p]);for(var g=0;g<this.yAxisLabels.length;g++)"series"==(o=this.yAxisLabels[g]).src&&o.args[6]&&!1===o.args[6].drawSeriesPriceLabels||this.createYAxisLabel.apply(this,o.args);this.createCrosshairs&&this.createCrosshairs(),this.drawVectors&&this.drawVectors(),this.drawCurrentHR(),this.displayInitialized=!0,(l=this.controls)&&(h="n",h+="o",h+="n",h+="e",c="b",c+="lock",u=this.manageTouchAndMouse&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.nonInteractive),l.home&&(l.home.style.display=u&&!this.isHome()?c:h),l.chartControls&&(l.chartControls.style.display=u?"block":"none")),t.Marker&&this.positionMarkers(),this.quoteDriver&&this.animations.zoom.hasCompleted&&this.quoteDriver.checkLoadMore(i),this.runAppend(e,arguments),this.makeAsyncCallbacks()}}},t.ChartEngine.prototype.setSeriesRenderer=function(e){var t=e.params,i=t.baseline,a=t.name,r=t.panel,n=t.yAxis;return this.chart.seriesRenderers[a]?this.chart.seriesRenderers[a]:(n&&(e.params.yAxis=this.addYAxis(this.panels[r],n),this.resizeChart()),e.stx=this,this.chart.seriesRenderers[a]=e,i&&this.registerBaselineToHelper(e),e)},t.ChartEngine.prototype.setMainSeriesRenderer=function(e){var i,a,r,n;i="stand",i+="aloneBars";var s=this.layout,o=s.chartType,l=s.aggregationType,h=this.chart,c=h.custom;a=this.mainSeriesRenderer,r=this.displayInitialized,a&&(e&&this.setMasterData(),this.displayInitialized=!1,a.removeAllSeries(),this.removeSeriesRenderer(a),a=this.mainSeriesRenderer=null),c&&c.chartType&&(o=c.chartType),"none"!=o&&(l&&"ohlc"!=l&&(o=l),(n=t.Renderer.produce(o,{panel:h.panel.name,name:"_main_series",highlightable:!1,useChartLegend:!0}))&&(this.setSeriesRenderer(n).attachSeries(null,{display:h.symbol}),a=this.mainSeriesRenderer=n),this.displayInitialized=r,["highLowBars",i,"barsHaveWidth"].forEach(function(e){var t;W.t7H(),t=2;for(var i=1;-433355019!==W.u8Y(i.toString(),i.toString().length,28990);i++)h[e]=this.mainSeriesRenderer&&this.mainSeriesRenderer[e],t+=2;175622988!==W.a8Y(t.toString(),t.toString().length,63529)&&(h[e]=this.mainSeriesRenderer||this.mainSeriesRenderer[e])}.bind(this)))},t.ChartEngine.prototype.removeSeriesRenderer=function(e){var t,i;W.f7H();var a=e.params,r=a.baseline,n=a.name;if(t=this.controls["".concat(n," baseline-handle")],r){-1830027173,299468775,i=2;for(var s=1;-1830027173!==W.u8Y(s.toString(),s.toString().length,35382);s++)this.removeBaselineFromHelper(e),i+=2;299468775!==W.a8Y(i.toString(),i.toString().length,39497)&&this.removeBaselineFromHelper(e),t&&(this.container.removeChild(t),delete this.controls[t])}delete this.chart.seriesRenderers[n]},W.f7H(),t.ChartEngine.prototype.getSeriesRenderer=function(e){return this.chart.seriesRenderers[e]},t.ChartEngine.prototype.getRendererFromSeries=function(e){var t;for(var i in t=this.chart.seriesRenderers)for(var a in t[i].seriesParams)if(t[i].seriesParams[a].id==e)return t[i];return null},t.ChartEngine.prototype.startClip=function(e,t){var i,a,r,n,s;e||(e=this.chart.panel.name),a=(i=this.panels[e]).yAxis,(r=this.chart).context.save(),r.context.beginPath(),n=i.left,s=i.width,t?(n=0,s=this.width):i.yaxisLHS&&i.yaxisLHS.length&&(n++,s--),r.context.rect(n,a.top,s,a.height),r.context.clip()},t.ChartEngine.prototype.endClip=function(){W.t7H(),this.chart.context.restore()},t.ChartEngine.prototype.setLineStyle=function(e,i){var a,r;a={},e&&"object"==s(e)?a=e:a.color=e,a.color||a.pattern||a.width||a.baseColor||(a=null),i||(i=this.chart),r=1,a&&a.width&&(r=a.width),a&&a.pattern&&(a.pattern=t.borderPatternToArray(r,a.pattern)),i.lineStyle=a},t.ChartEngine.prototype.setGapLines=function(e,i){var a;if(W.f7H(),"b","oolean","ob","ject",i||(i=this.chart),a={},e&&"object"==s(e))a=e;else{if("boolean"===s(e))return i.gaplines=e;a.color=e}a.color||a.pattern||a.fillMountain||(a=null),a&&a.pattern&&(a.pattern=t.borderPatternToArray(a.width,a.pattern)),a&&a.width<=0&&(a.width=null),i.gaplines=a},t.ChartEngine.prototype.getGapColorFunction=function(e,t,i,a,r){return"object"!=s(i)&&(i={color:i}),W.t7H(),function(n,o,l){var h,c;return(h=r?r(n,o,l):i).color&&(h=h.color),(c=o[e])||0===c||(c=o[t]),l||!c&&0!==c?a?("object"!=s(a)&&("st","r","in","g",a="string"==s(a)?{color:a}:{}),{color:a.color||h,pattern:a.pattern||i.pattern,width:a.width||i.width}):null:{color:h,pattern:i.pattern,width:i.width}}},t.ChartEngine.prototype.drawLineChart=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,g,f;return"Cl","o","se",W.f7H(),s=(n=this.chart).context,o=n.lineStyle||{},l=this.canvasStyle(i),r||(r={}),this.startClip(e.name),(h=r.width||o.width||l.width)&&parseInt(h,10)<=25?s.lineWidth=Math.max(1,t.stripPX(h)):s.lineWidth=1,r.pattern=r.pattern||o.pattern||l.borderTopStyle,r.pattern=t.borderPatternToArray(s.lineWidth,r.pattern),this.canvasColor(i),(c=r.color||o.color)&&("auto"==c&&(c=this.defaultColor),r.opacity&&1!==r.opacity&&(c=t.hexToRgba(t.colorToHex(c),parseFloat(r.opacity))),s.strokeStyle=c),r.skipProjections=!0,u=r.field||n.defaultPlotField,d=r.subField||n.defaultPlotField||"Close",(p=r.gapDisplayStyle)||!1===p||(p=r.gaps),p||!1===p||(p=n.gaplines),p||(p="transparent"),r.gapDisplayStyle=p,g=this.getGapColorFunction(u,d,{color:s.strokeStyle,pattern:r.pattern,width:s.lineWidth},p,a),e.chart.tension&&(r.tension=e.chart.tension),(f=this.plotDataSegmentAsLine(u,e,r,g)).colors.length||f.colors.push(s.strokeStyle),s.lineWidth=1,this.endClip(),r.returnObject?f:f.colors},t.ChartEngine.prototype.drawChannelChart=function(e,i,a){var r,n,s,o,l,h,c,u,d,p;for(W.f7H(),"Cl","o","s","e","su","bField","f","ield","su","bF","i","eld","s","tx_ch","anne","l_up",(r=t.clone(a)).color=a.color,n=this.drawLineChart(e,r.style,i,r),s=r.border_color_up||this.getCanvasColor("stx_channel_up"),o=r.border_color_down||this.getCanvasColor("stx_channel_down"),r[a.field?"subField":"field"]=r.field_high||"High",r.color=s,l=this.drawLineChart(e,r.style,i,r),r[a.field?"subField":"field"]=r.field_low||"Low",r.color=o,h=this.drawLineChart(e,r.style,i,r),r[a.field?"subField":"field"]=a.subField||this.chart.defaultPlotField||"Close",u=[],d=[],c=0;c<l.points.length;c+=2)u.push([l.points[c],l.points[c+1]]);for(c=0;c<h.points.length;c+=2)d.push([h.points[c],h.points[c+1]]);W.Y9g(16);var g=W.M9g(16,18);for(p=this.chart.context.lineWidth/g,c=n.points.length-2;c>=0;c-=2)u.push([n.points[c],n.points[c+1]-p]),d.push([n.points[c],n.points[c+1]+p]);return this.startClip(e.name),r.color=s,t.fillArea(this,u,r),r.color=o,t.fillArea(this,d,r),this.endClip(),n.colors=n.colors.concat(l.colors).concat(h.colors),a.returnObject?n:n.colors},t.ChartEngine.prototype.connectTheDots=function(e,i,a,r,n,o){var l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M=W;if(o||(o={}),"none"!=o.pattern&&(!0===n&&(n=this.chart.panel),null==r&&(r=this.chart.context),!(e.length<4))){M.O9g(3),l=M.M9g(1,"0"),h=this.chart.canvasHeight,M.t7H(),0,c=this.chart.width,n&&(h=n.yAxis.bottom,l=n.yAxis.top),r.lineWidth=1.1,"object"==s(i)?(r.strokeStyle=i.color,i.opacity?r.globalAlpha=i.opacity:r.globalAlpha=1,r.lineWidth=t.stripPX(i.width)):("a","ut","o",!i||"auto"==i||t.isTransparent(i)?r.strokeStyle=this.defaultColor:r.strokeStyle=i),o.opacity&&(r.globalAlpha=o.opacity),o.lineWidth&&(r.lineWidth=o.lineWidth),u=t.borderPatternToArray(r.lineWidth,o.pattern),r.beginPath();for(var T=0;T<e.length-2;T+=2){if(d=e[T],M.O9g(12),p=e[M.a9g(1,T)],M.Y9g(12),g=e[M.M9g(2,T)],M.O9g(12),f=e[M.M9g(3,T)],isNaN(d)||isNaN(g)||isNaN(p)||isNaN(f))return;m=0,y=1,M.Y9g(16),v=M.M9g(d,g),M.Y9g(16),x=M.M9g(p,f);for(var F=0;F<4;F++){if(0===F&&(b=-v,M.Y9g(16),C=-M.M9g(d,0)),1==F&&(b=v,M.Y9g(16),C=M.a9g(d,c)),2==F&&(b=-x,M.O9g(16),C=-M.M9g(p,l)),3==F&&(b=x,M.Y9g(16),C=M.a9g(p,h)),M.O9g(36),S=M.a9g(b,C),(f||0===f)&&0===b&&C<0)return!1;if(b<0){if(S>y)return!1;S>m&&(m=S)}else if(b>0){if(S<m)return!1;S<y&&(y=S)}}M.Y9g(146),w=M.M9g(m,v,d),M.O9g(146),k=M.M9g(m,x,p),M.Y9g(146),A=M.M9g(y,v,d),M.Y9g(146),D=M.M9g(y,x,p);try{r.setLineDash(u&&u.length?u:[]),r.moveTo(w,k),r.lineTo(A,D)}catch(e){}}r.stroke(),r.closePath(),M.Y9g(90),r.globalAlpha=M.a9g(0,"1"),M.Y9g(90),r.lineWidth=M.M9g(0,"1")}},t.ChartEngine.prototype.plotSpline=function(e,a,r,n,o,l,h){var c;W.f7H(),h||(h={}),"none"!=h.pattern&&(!0===l&&(l=this.chart.panel),null!==o&&"undefined"!=s(o)||(o=this.chart.context),o.save(),o.lineWidth=1.1,"object"==s(r)?(o.strokeStyle=r.color,r.opacity?o.globalAlpha=r.opacity:o.globalAlpha=1,o.lineWidth=t.stripPX(r.width)):("aut","o",!r||"auto"==r||t.isTransparent(r)?o.strokeStyle=this.defaultColor:o.strokeStyle=r),h.opacity&&(o.globalAlpha=h.opacity),h.lineWidth&&(o.lineWidth=h.lineWidth),c=t.borderPatternToArray(o.lineWidth,h.pattern),h.pattern&&o.setLineDash&&(o.setLineDash(c),o.lineDashOffset=0),o.beginPath(),i.plotSpline(e,a,o),o.stroke(),o.closePath(),o.restore())},t.ChartEngine.prototype.rawWatermark=function(e,t,i,a){this.canvasFont("stx_watermark",e),e.fillStyle=this.defaultColor,e.globalAlpha=.5,this.chart.context.textBaseline="alphabetic",e.fillText(a,t,i),e.globalAlpha=1},t.ChartEngine.prototype.watermark=function(e,t){var i,a,r,n,o,l,h,c;if(i="s",i+="tx_",i+="waterm",i+="ark",a="bott",a+="om",r="l",r+="e",r+="ft",n="ob",n+="je",n+="ct",t&&s(t)!=n&&(t={h:arguments[1],v:arguments[2],text:arguments[3]}),(o=(t={h:t.h||r,v:t.v||a,text:t.text||"",hOffset:0===t.hOffset?0:t.hOffset||10,vOffset:0===t.vOffset?0:t.vOffset||20,context:t.context||this.chart.context}).context)&&(l=this.panels[e])&&!l.hidden){if(h=l.yAxis.bottom-t.vOffset,"top"==t.v?h=l.top+t.vOffset:"middle"==t.v&&(h=(l.top+l.yAxis.bottom)/2),o.save(),this.canvasFont("stx_watermark",o),this.canvasColor(i,o),o.textBaseline="alphabetic",c=l.left+t.hOffset,"right"==t.h)c=l.right-t.hOffset;else if("center"==t.h){W.Y9g(12);var u=W.a9g(2,0);c=(l.right+l.left-o.measureText(t.text).width)/u}o.globalAlpha=.5,this.highlightedDraggable&&(o.globalAlpha*=.3),o.fillText(t.text,c,h),o.restore()}},t.ChartEngine.prototype.displayErrorAsWatermark=function(e,t){var i,a,r,n,s,o,l,h,c,u,d=W;t&&(e||(e="chart"),(i=this.panels[e])&&!i.hidden&&((a=i.state)||(i.state=a={}),(r=a.studyErrors)||(a.studyErrors=r=new Set),r.has(t)||(n=a.watermarkOffset||10,10,s=this.getCanvasFontSize("stx_watermark"),this.chart&&this.chart.chartControls&&(o=i.yAxis.bottom,l=this.chart.chartControls,d.O9g(16),h=d.M9g(n,o),d.O9g(16),c=d.a9g(s,h),(h>l.offsetTop&&h<l.offsetTop+l.offsetHeight||c>l.offsetTop&&c<l.offsetTop+l.offsetHeight)&&(n=o-l.offsetTop+10)),r.add(t),u={h:"center",v:"bottom",text:t,vOffset:n},d.Y9g(12),n+=d.a9g(10,s),a.watermarkOffset=n,this.watermark(e,u))))},t.ChartEngine.prototype.displayChart=function(e){var t;t="di",t+="splayChart",this.runPrepend(t,arguments)||(this.rendererAction(e,"main"),this.runAppend("displayChart",arguments))}},H=function(e){var t;W.f7H(),(t=e.CIQ).ChartEngine.prototype.cloneStyle=function(e){var i,a,r,n,s,o,l;function h(e){return e[1].toUpperCase()}for(var c in i={},a=!1,W.f7H(),e)if(r=e[c],"backgroundAttachment"==c&&(a=!0),a)r&&r.constructor==String&&isNaN(c)&&(i[c]=r);else if(isNaN(c))i[c.replace(t.camelCaseRegExp,h)]=r;else if(n=e.getPropertyValue(r)){for(s=0,o=(r=r.split("-")).length,l=r[0];++s<o;)l+=r[s].charAt(0).toUpperCase()+r[s].slice(1);i[l]=n}return i},t.ChartEngine.prototype.canvasStyle=function(e){var t,i,a;return t=this.styles[e],W.t7H(),t||((i=document.createElement("div")).className=e,this.container.appendChild(i),a=getComputedStyle(i),t=this.styles[e]=this.cloneStyle(a),this.container.removeChild(i),a||(this.styles[e]=null)),t},t.ChartEngine.prototype.colorOrStyle=function(e){return-1!=e.indexOf("#")||-1!=e.indexOf("(")||"transparent"==e?e:this.canvasStyle(e)},t.ChartEngine.prototype.clearStyles=function(){this.styles={},this.defaultColor=""},t.ChartEngine.prototype.setStyle=function(e,i,a){this.styles[e]||this.canvasStyle(e),this.styles[e]||(this.styles[e]={}),this.styles[e][t.makeCamelCase(i)]=a},t.ChartEngine.prototype.canvasFont=function(e,t){var i,a,r=W;if(t||(t=this.chart.context),i=this.canvasStyle(e)){r.O9g(42);var n=r.M9g(1,1,6,6);r.Y9g(119);r.M9g(5552,1,3,16);r.Y9g(16);r.M9g(9,6259);r.Y9g(147);var s=r.a9g(15,8,7,9486,8);r.Y9g(59);r.a9g(1,1287716357,1287716351,1287716357);r.Y9g(16);var o=r.a9g(1194,1393);r.Y9g(148);var l=r.a9g(3274,5,252);r.Y9g(149);r.M9g(9,15,2,7603,15);r.O9g(16);r.a9g(98600,104400);-1==(a=i.fontStyle+("634.72"*n<=639.81?" ":8530)+i.fontWeight+(104.99!==s?" ":8178!==o?l:"S")+i.fontSize+" "+i.fontFamily).indexOf("undefined")?t.font=a:(this.styles[e]=null,r.Y9g(12),console.log(r.M9g(e,"bad css style for class ")))}},t.ChartEngine.prototype.canvasColor=function(e,t){var i,a,r;t||(t=this.chart.context),(i=this.canvasStyle(e))&&((a=i.color)||(a=this.defaultColor),t.globalAlpha=1,t.fillStyle=a,t.strokeStyle=a,"undefined"!=s(r=i.opacity)&&(t.globalAlpha=r))},t.ChartEngine.prototype.getCanvasFontSize=function(e){var i;return"1",W.t7H(),"2",(i=this.canvasStyle(e).fontSize)||(i="12"),parseInt(t.stripPX(i),10)},t.ChartEngine.prototype.getCanvasColor=function(e){return this.canvasStyle(e).color},t.ChartEngine.prototype.getDefaultColor=function(){var e,i,a,r;for(this.defaultColor="#000000",e=null,i=this.chart.container,W.f7H();!e||t.isTransparent(e);){if(!(a=getComputedStyle(i)))return;if(e=a.backgroundColor,t.isTransparent(e)&&(e="transparent"),!(i=i.parentNode)||!i.tagName)break}e?("#F","FFFFF","transparent"==e&&(e="#FFFFFF"),this.containerColor=e,t.isTransparent(e)?this.defaultColor="#000000":("#F","FFF","FF",r=t.hsv(e)[2],this.defaultColor=r>.65?"#000000":"#FFFFFF")):this.containerColor="#FFFFFF"}},E=function(e){var t;t=e.CIQ,W.f7H(),t.ChartEngine.XAxis=function(e){for(var t in W.f7H(),e)this[t]=e[t]},t.extend(t.ChartEngine.XAxis.prototype,{formatter:null,adjustTimeZone:!0,idealTickSizePixels:null,timeUnit:null,timeUnitMultiplier:null,displayBorder:!0,displayGridLines:!0,noDraw:null,minimumLabelWidth:50,futureTicks:!0,futureTicksInterval:1},!0),t.ChartEngine.XAxisLabel=function(e,t,i){this.hz=e,W.f7H(),this.grid=t,this.text=i},t.ChartEngine.prototype.createXAxis=function(e){var t,i;return W.t7H(),"cr","e","ateXAxis",e.dataSegment.length<=0||e.xAxis.noDraw?null:(t=[e],(i=this.runPrepend("createXAxis",t))||(i=this.mainSeriesRenderer&&this.mainSeriesRenderer.createXAxis?this.mainSeriesRenderer.createXAxis(e):this.createTickXAxisWithDates(e),this.headsUpHR(),this.runAppend("createXAxis",t)),i)},t.ChartEngine.prototype.createXAxisLabel=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b=W;arguments[0]instanceof t.ChartEngine.Panel&&(e={panel:arguments[0],txt:arguments[1],x:arguments[2],backgroundColor:arguments[3],color:arguments[4],pointed:arguments[5],padding:arguments[6]}),i=e.panel,a=e.txt,r=e.x,n=e.backgroundColor,s=e.color,o=e.pointed,l=0===e.padding?0:e.padding||2,h=this.chart.context,c="stx-float-date",b.Y9g(12);var C=b.M9g(2,0);u=this.getCanvasFontSize(c)+l*C,this.canvasFont(c,h);try{b.O9g(12);var S=b.M9g(2,0);d=h.measureText(a).width+l*S}catch(e){d=0}if(p=i.top+i.height-u-l,!(r+d/2<i.left||r-d/2>i.right)){if(!o){g=-1348580002,f=-1321168046,m=2;for(var w=1;b.a8Y(w.toString(),w.toString().length,91778)!==g;w++)r%(d-8)<=i.right&&(r=i.right+(d+6)),m+=2;if(b.a8Y(m.toString(),m.toString().length,30705)!==f&&r+9*d>=i.right){b.Y9g(4);var k=b.M9g(12,3,1,11);r=i.right-d/k}if(r+d/2>i.right){b.Y9g(17);var A=b.M9g(6,13,76);r=i.right-d/A}if(r-d/2<i.left){b.O9g(1);var D=b.a9g(6,6,2);r=i.left+d/D}}h.fillStyle=n,t.roundRect({ctx:h,x:r-d/2,top:p,width:d,height:u,radius:3,fill:!0}),y=i.bottom-i.yAxis.bottom-u,h.beginPath(),o?(b.O9g(16),h.moveTo(b.a9g(y,r),p),b.O9g(10),h.lineTo(r,b.a9g(y,p,1)),b.O9g(12),h.lineTo(b.M9g(y,r),p),h.closePath(),h.fill()):(h.moveTo(r,p),b.Y9g(16),h.lineTo(r,b.a9g(y,p)),h.strokeStyle=n,h.stroke()),h.textBaseline="top",b.f7H(),h.fillStyle=s||t.chooseForegroundColor(n),h.fillStyle==n&&(v="#FFFFF",v+="F",x="#",x+="00000",x+="0","#FFFFFF"==n.toUpperCase()?h.fillStyle=x:h.fillStyle=v),b.Y9g(150),h.fillText(a,b.M9g(d,2,l,r,1),b.a9g(2,l,p,b.Y9g(151)))}}},N=function(e){var t;(t=e.CIQ).createLabel=function(e){e.ctx.textBaseline="middle",e.ctx.fillStyle=e.color?e.color:t.chooseForegroundColor(e.backgroundColor),e.ctx.fillStyle===e.backgroundColor&&("#FFFFFF"==e.backgroundColor.toUpperCase()?e.ctx.fillStyle="#000000":e.ctx.fillStyle="#FFFFFF"),e.ctx.fillText(e.txt,e.x+e.margin.left,e.y+e.margin.top),e.ctx.textAlign="left"},t.roundRectArrow=function(e){var i;i=2;for(var a=1;-1364319896!==W.u8Y(a.toString(),a.toString().length,42846);a++)t.roundRect(e,""),i+=2;-852530762!==W.a8Y(i.toString(),i.toString().length,22407)&&t.roundRect(e,"arrow")},t.semiRoundRect=function(e){W.f7H(),t.roundRect(e,"flush")},t.rect=function(e){e.radius=0,t.roundRect(e)},t.noop=function(e){e.color=e.backgroundColor,W.t7H(),t.createLabel(e)},t.tickedRect=function(e){var i;t.rect(e),W.Y9g(65);var a=W.M9g(3,304,18,20);i=Math.round(e.top+e.height/a)+.5,W.f7H(),e.ctx.beginPath(),e.ctx.moveTo(e.x-2,i),e.ctx.lineTo(e.x,i),e.ctx.stroke(),e.ctx.closePath()},t.roundRect=function(e,i){var a,r,n,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k=W;a="a",a+="r",a+="r",a+="ow",r="f",r+="l",r+="ush",n="u",n+="ndefin",n+="ed",o="u",o+="nde",o+="fi",o+="ned",9===arguments.length&&(e={ctx:arguments[0],x:arguments[1],top:arguments[2],width:arguments[3],height:arguments[4],radius:arguments[5],fill:arguments[6],stroke:arguments[7],edge:arguments[8]}),l=e.stroke,h=e.x,c=e.top,u=e.width,d=e.height,p=e.radius,g=e.fill,f=e.ctx,s(l)==o&&(l=!0),s(p)===n&&(p=5,u<0&&(k.O9g(3),p=-k.a9g(1,"5"))),m=u<0?-1*p:p,p&&!i&&(k.O9g(16),h=k.M9g(1,h)),k.O9g(12),y=k.a9g(p,h),k.Y9g(12),v=k.M9g(u,h),k.O9g(12),x=k.M9g(m,c),k.O9g(12),b=k.a9g(d,c),k.O9g(16),C=k.a9g(p,v),k.O9g(16),S=k.M9g(m,b),f.beginPath(),f.moveTo(y,c),f.lineTo(C,c),f.quadraticCurveTo(v,c,v,x),f.lineTo(v,S),f.quadraticCurveTo(v,b,C,b),f.lineTo(y,b),i==r?(f.lineTo(h,b),f.lineTo(h,c)):i==a?(k.Y9g(16),f.quadraticCurveTo(h,b,k.M9g(p,h),S),w=u<0?1:-1,k.O9g(152),f.lineTo(k.M9g(w,2,h,d),k.M9g("2",0,d,c,k.Y9g(153))),k.O9g(16),f.lineTo(k.M9g(p,h),x),f.quadraticCurveTo(h,c,y,c)):(f.quadraticCurveTo(h,b,h,S),f.lineTo(h,x),f.quadraticCurveTo(h,c,y,c)),f.closePath(),e.backgroundColor&&(f.fillStyle=e.backgroundColor),l&&f.stroke(),g&&f.fill(),e.txt&&t.createLabel(e)},t.ChartEngine.YAxis=function(e){for(var i in e)this[i]=e[i];this.name||(this.name=t.uniqueID()),"none"==this.position&&(this.width=0)},t.extend(t.ChartEngine.YAxis.prototype,{high:null,low:null,shadow:null,logHigh:null,logLow:null,logShadow:null,multiplier:null,bottom:null,top:null,height:null,left:null,width:null,renderers:[],studies:[]},!0),t.ChartEngine.YAxis.defaultShadowBreaks=[[1e3,2],[5,4],[.001,8]],t.ChartEngine.YAxis.smallChartShadowBreaks=[[10,2],[1,4]],t.ChartEngine.YAxis.prototype.maxDecimalPlaces=null,t.ChartEngine.YAxis.prototype.max=null,t.ChartEngine.YAxis.prototype.min=null,t.ChartEngine.YAxis.prototype.decimalPlaces=null,t.ChartEngine.YAxis.prototype.idealTickSizePixels=null,t.ChartEngine.YAxis.prototype.minimumPriceTick=null,t.ChartEngine.YAxis.prototype.fractional=null,t.ChartEngine.YAxis.prototype.displayBorder=!0,t.ChartEngine.YAxis.prototype.displayGridLines=!0,t.ChartEngine.YAxis.prototype.noDraw=null,t.ChartEngine.YAxis.prototype.drawCurrentPriceLabel=!0,t.ChartEngine.YAxis.prototype.drawSeriesPriceLabels=!0,t.ChartEngine.YAxis.prototype.drawPriceLabels=!0,t.ChartEngine.YAxis.prototype.goldenRatioYAxis=!0,t.ChartEngine.YAxis.prototype.yaxisLabelStyle=null,t.ChartEngine.YAxis.prototype.justifyRight=null,t.ChartEngine.YAxis.prototype.flipped=!1,t.ChartEngine.YAxis.prototype.textBackground=!1,t.ChartEngine.YAxis.prototype.priceFormatter=null,t.ChartEngine.YAxis.prototype.bottomOffset=0,t.ChartEngine.YAxis.prototype.topOffset=0,t.ChartEngine.YAxis.prototype.initialMarginTop=10,t.ChartEngine.YAxis.prototype.initialMarginBottom=10,t.ChartEngine.YAxis.prototype.zoom=0,W.Y9g(16),t.ChartEngine.YAxis.prototype.scroll=W.M9g(0,"0"),t.ChartEngine.YAxis.prototype.heightFactor=1,Object.defineProperty(t.ChartEngine.YAxis.prototype,"width",{configurable:!0,enumerable:!0,get:function(){return this._dynamicWidth||this._width},set:function(e){this._width=e,this._dynamicWidth<e&&(this._dynamicWidth=NaN)}}),t.ChartEngine.YAxis.prototype.width=60,t.ChartEngine.YAxis.prototype.smallScreenWidth=50,t.ChartEngine.YAxis.prototype.textStyle=null,t.ChartEngine.YAxis.prototype.position=null,t.ChartEngine.YAxis.prototype.pretty=!0,t.ChartEngine.YAxis.prototype.increments=[1,2.5,5],t.ChartEngine.YAxis.prototype.prettySemiLog=!0,t.ChartEngine.YAxis.prototype.shadowBreaks=t.ChartEngine.YAxis.defaultShadowBreaks,t.ChartEngine.YAxis.prototype.getYAxis=function(e){return W.f7H(),this},t.ChartEngine.YAxis.prototype.isShared=function(e,t){var i,a;if(i=this.studies.length,a=this.renderers.length,i>1)return!0;if(W.t7H(),a&&i)return!0;if(!a)return!1;if(a>1&&t)return!0;for(var r=a-1;r>=0;r--)e.chart.seriesRenderers[this.renderers[r]].params.dependentOf&&a--;return W.O9g(154),W.M9g(1,a)},t.ChartEngine.YAxis.prototype.setBackground=function(e,i){var a;i||(i={}),i.color||(i.color="auto"),a=[[this.left,this.top],[this.left,this.bottom],[this.left+this.width,this.bottom],[this.left+this.width,this.top]],t.fillArea(e,a,{color:i.color,opacity:i.opacity})},t.ChartEngine.YAxis.prototype.setBreakpointWidth=function(e){var i;if("brea","k-sm",e){var a=t.ChartEngine.YAxis.prototype,r=a.width,n=a.smallScreenWidth;W.O9g(127),i=W.a9g(e,"break-sm"),this.width=i?n:r}},t.ChartEngine.prototype.getLabelOffsetInPixels=function(e,t){var i,a,r=W;if(i=!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars,!("roundRectArrow"!=this.yaxisLabelStyle||i&&this.extendLastTick&&0!==e.yaxisPaddingRight)){3,r.O9g(16);var n=r.M9g(30,32);return a=this.getCanvasFontSize("stx_yaxis")+3*n,r.O9g(3),r.a9g(.66,a)}return 0},t.ChartEngine.prototype.flipChart=function(e){var t;if(W.t7H(),"l","ayout",this.layout.flipped!=e){1127591698,-1453427831,t=2;for(var i=1;1127591698!==W.u8Y(i.toString(),i.toString().length,27011);i++)this.layout.flipped=e,this.chart.yAxis.flipped=e,this.changeOccurred(""),t+=2;-1453427831!==W.u8Y(t.toString(),t.toString().length,48328)&&(this.layout.flipped=e,this.chart.yAxis.flipped=e,this.changeOccurred("")),this.layout.flipped=e,this.chart.yAxis.flipped=e,this.changeOccurred("layout"),this.draw()}},t.ChartEngine.prototype.calculateYAxisMargins=function(e){var t,i=W;if(e.heightFactor){i.O9g(6);var a=i.a9g(15,91,6);e.zoom=e.height*(a-e.heightFactor)}if(e.zoom+=e.initialMarginTop+e.initialMarginBottom,e.scroll=(e.initialMarginTop-e.initialMarginBottom)/2,e.zoom>e.height){e.zoom=0,-543420215,-2067775056,t=2;for(var r=1;-543420215!==i.a8Y(r.toString(),r.toString().length,9508);r++)e.scroll=0,t+=2;-2067775056!==i.a8Y(t.toString(),t.toString().length,58336)&&(e.scroll=1)}},t.ChartEngine.prototype.resetDynamicYAxis=function(e){var t,i,a;if(!this.runPrepend("resetDynamicYAxis",arguments)){for(var r in t=!1,this.panels)if(i=this.panels[r],(!e||!e.chartName||i.chart.name===e.chartName)&&i.yaxisLHS&&i.yaxisRHS){a=i.yaxisLHS.concat(i.yaxisRHS);for(var n=0;n<a.length;n++)a[n]._dynamicWidth&&(a[n]._dynamicWidth=NaN,t=!0)}!t||e&&e.noRecalculate||this.calculateYAxisPositions(),this.runAppend("resetDynamicYAxis",arguments)}},t.ChartEngine.prototype.notifyBreakpoint=function(e){var t,i,a;if(t="break-s",t+="m",this.chart.breakpoint!==e&&["break-lg","break-md",t].includes(e)){var r=this.chart,n=r.dynamicYAxis;for(var s in this.clearStyles(),r.breakpoint=e,this.panels){a=(i=this.panels[s]).yaxisRHS.concat(i.yaxisLHS);for(var o=0;o<a.length;o++)a[o].setBreakpointWidth(e)}n&&this.resetDynamicYAxis({chartName:r.name})}},t.ChartEngine.prototype.adjustYAxisHeightOffset=function(e,t){var i,a;(i=t.topOffset)+(a=t.bottomOffset)>e.height&&("The sum of yAxis.topOffset"," and yAxis.bottomOffset cannot b","e greater than the panel height. Both values will be reset to 0.",console.log("The sum of yAxis.topOffset and yAxis.bottomOffset cannot be greater than the panel height. Both values will be reset to 0."),W.O9g(16),t.bottomOffset=W.a9g(0,"0"),t.topOffset=0),this.xaxisHeight||0===this.xaxisHeight||("stx_xax","is",this.xaxisHeight=this.getCanvasFontSize("stx_xaxis")+4,(this.chart.xAxis.displayBorder||this.axisBorders)&&(this.xaxisHeight+=3)),(this.xAxisAsFooter&&e.bottom>this.chart.canvasHeight-this.xaxisHeight||!this.xAxisAsFooter&&e==this.chart.panel)&&(a+=this.xaxisHeight),t.top=e.top+i,t.bottom=e.bottom-a},W.f7H(),t.ChartEngine.prototype.plotYAxisGrid=function(e){var t,i;this.runPrepend("plotYAxisGrid",arguments)||(t=this.getBackgroundCanvas().context,(i=e.yAxis).yAxisPlotter&&i.yAxisPlotter.draw(t,"grid"),this.runAppend("plotYAxisGrid",arguments))},t.ChartEngine.prototype.plotYAxisText=function(e){var t,i,a,r;if(t="a",t+="lphabetic",!this.runPrepend("plotYAxisText",arguments)){for(i=this.getBackgroundCanvas().context,this.canvasFont("stx_yaxis",i),this.canvasColor("stx_yaxis",i),i.textBaseline="middle",a=e.yaxisLHS,r=0;r<a.length;r++)i.textAlign="right",n(a[r]);for(a=e.yaxisRHS,W.f7H(),r=0;r<a.length;r++)i.textAlign="left",n(a[r]);i.textAlign="left",i.textBaseline=t,this.runAppend("plotYAxisText",arguments)}function n(e){W.f7H(),e.yAxisPlotter&&!e.noDraw&&e.width&&(e.justifyRight?i.textAlign="right":!1===e.justifyRight&&(i.textAlign="left"),e.yAxisPlotter.draw(i,"text"))}},t.ChartEngine.prototype.decimalPlacesFromPriceTick=function(e){return e<1e-4?8:e<.01?(W.Y9g(16),W.a9g(0,"4")):e<.1?2:(W.t7H(),e<1?1:0)},t.ChartEngine.prototype.formatYAxisPrice=function(e,i,a,r,n){var s,o,l,h,c;return null==e||isNaN(e)?"":(i||(i=this.chart.panel),s=r||i.yAxis,(o=a)||0===o||(o=s.printDecimalPlaces),o||0===o||(o=this.decimalPlacesFromPriceTick(s.priceTick)),l=s==i.chart.yAxis?2e4:1e3,s.priceTick>=l?(e=e.toFixed(o),t.condenseInt(e)):((h=this.internationalizer)&&!1!==n?(o>=(c=h.priceFormatters.length)&&(W.O9g(16),o=W.a9g(1,c)),e=h.priceFormatters[o].format(e)):e=e.toFixed(o),W.t7H(),e))},t.ChartEngine.prototype.calculateYAxisRange=function(e,t,i,a){var r,n,s,o,l,h,c,u,d,p=W;if(i==Number.MAX_VALUE&&(i=0,p.O9g(48),a=p.a9g(0,"0")),r=e.height,n=null,s=null,this.adjustYAxisHeightOffset(e,t),t.height=t.bottom-t.top,o=Math.round(Math.abs(r/5)),t.zoom>=0&&r-Math.abs(t.scroll)<o){p.Y9g(7);var g=p.M9g(18,17);t.scroll=(r-o)*(t.scroll<0?-1:g)}l=e.chart.name===e.name&&e.yAxis.name===t.name,h=i>0&&(this.layout.semiLog||"log"==this.layout.chartScale)&&!e.chart.isComparison&&"pandf"!=this.layout.aggregationType,(i||0===i)&&(a-i==0?(1==(c=Math.pow(10,-(i.toString()+".").split(".")[1].length))&&(c=100),p.Y9g(12),n=p.M9g(c,i),p.Y9g(16),s=p.a9g(c,i)):l&&h&&(a||0===a)?(u=Math.log(i)/Math.LN10,d=Math.log(a)/Math.LN10,p.Y9g(2),n=Math.pow(p.a9g(97304256,"10"),d),p.Y9g(2),s=Math.pow(p.M9g(848803488,"10"),u)):(n=a,s=i),t.high=n,t.low=s),(t.max||0===t.max)&&(t.high=t.max),p.t7H(),(t.min||0===t.min)&&(t.low=t.min),t.shadow=t.high-t.low,l&&(t.semiLog!=h&&(this.clearPixelCache(),t.semiLog=h),t.flipped=this.layout.flipped)},t.ChartEngine.prototype.renderYAxis=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f;if(i="y",i+="A",i+="x",i+="is",a="reb",a+="oot dr",a+="aw",!this.runPrepend("renderYAxis",arguments)){if(this.checkLogScale())throw new Error(a);this.rendererAction(e,i);var m=this.getBackgroundCanvas(e),y=m.context;for(var v in this.panels)if((r=this.panels[v]).chart==e){for(n=r.yaxisRHS.concat(r.yaxisLHS),s=0;s<n.length;s++)l="Studies.",l+="getY",l+="AxisParameters",o=n[s],this.calculateYAxisRange(r,o,o.lowValue,o.highValue),(h=t.getFn(l,{})(this,o)).yAxis=o,this.createYAxis(r,h),this.drawYAxis(r,h),t.getFn("Studies.doPostDrawYAxis")(this,o);for(s=0;s<n.length;s++)(o=n[s]).dropzone&&(c=this.canvasStyle("stx-subholder dropzone left"))&&(y.strokeStyle=c.borderLeftColor,y.lineWidth=parseFloat(c.borderLeftWidth),y.beginPath(),"all"==o.dropzone?y.strokeRect(o.left,o.top,o.width,o.height):(u="l",u+="e",u+="ft",d=o.left+(o.dropzone==u?0:o.width),y.moveTo(d,o.top),y.lineTo(d,o.top+o.height),y.stroke()));this.displayDragOK&&this.displayDragOK(!0)}p=179187794,g=380748482,f=2;for(var x=1;W.u8Y(x.toString(),x.toString().length,93698)!==p;x++)this.runAppend("",arguments),f+=2;W.a8Y(f.toString(),f.toString().length,82400)!==g&&this.runAppend("renderYAxis",arguments)}},t.ChartEngine.prototype.updateFloatHRLabel=function(e){var i,a,r,n,s,o,l;if(this.floatCanvas&&(i=e.yaxisLHS.concat(e.yaxisRHS),a=this.crossYActualPos?this.crossYActualPos:this.cy,W.f7H(),this.floatCanvas.isDirty&&t.clearCanvas(this.floatCanvas,this),!this.controls.crossX||"none"!=this.controls.crossX.style.display)){this.controls.crossY&&(r=e.width,"roundRectArrow"==this.yaxisLabelStyle&&(r-=7),this.controls.crossY.style.left=e.left+"px",W.O9g(12),this.controls.crossY.style.width=W.a9g("px",r));for(var h=0;h<i.length;h++)n=i[h],s=this.transformedPriceFromPixel(a,e,n),isNaN(s)||(n.min||0===n.min)&&s<n.min||(n.max||0===n.max)&&s>n.max||(o=null,n!==e.chart.yAxis&&(o=this.decimalPlacesFromPriceTick(n.priceTick),(n.decimalPlaces||0===n.decimalPlaces)&&(o=n.decimalPlaces)),s=n.priceFormatter?n.priceFormatter(this,e,s,o):this.formatYAxisPrice(s,e,o,n),l=this.canvasStyle("stx-float-price"),this.createYAxisLabel(e,s,a,l.backgroundColor,l.color,this.floatCanvas.context,n),this.floatCanvas.isDirty=!0)}},t.ChartEngine.prototype.whichYAxis=function(e,t,i){var a,r,n;if("un","defin","ed","un","defin","ed","undefined"===s(t)&&(t=this.cx),"undefined"===s(i)&&(i=this.cy),a=this.whichPanel(i),e&&e==a){r=e.yaxisLHS.concat(e.yaxisRHS);for(var o=0;o<r.length;o++)if((n=r[o]).left<=t&&n.left+n.width>=t)return n}return null},t.ChartEngine.prototype.yaxisMatches=function(e,i){return!!(e&&e.getYAxis&&i&&i instanceof t.ChartEngine.YAxis)&&e.getYAxis(this).name==i.name},t.ChartEngine.prototype.createYAxisLabel=function(e,i,a,r,n,o,l){var h,c,u,d,p,g,f,m,y,v,x=W;if("und","efine","d","l","e","f","t",!1!==e.yAxis.drawPriceLabels&&!e.yAxis.noDraw&&!(h=l||e.yAxis).noDraw&&h.width){c=o||this.chart.context,3,x.Y9g(12);var b=x.M9g(17,1678125295);u=this.getCanvasFontSize("stx_yaxis")+3*("2">>b),this.canvasFont("stx_yaxis",c),h.displayBorder,d=this.drawBorders?3:0;try{p=c.measureText(i).width+d+6}catch(e){p=h.width}if(g=h.left-3+3,h.width<0&&(g+=h.width-p),x.Y9g(26),f=x.a9g(g,d,3),m=3,"left"===(null===h.position?e.chart.yAxis.position:h.position)){x.Y9g(136);var C=x.a9g(179,9,19,3,16);g=h.left+h.width+3-C,x.Y9g(145),p=x.M9g(1,p),h.width<0&&(g-=h.width+p),x.O9g(10),f=x.a9g(3,g,d),m=-3,c.textAlign="right"}if(a+u/2>h.bottom){x.Y9g(119);var S=x.M9g(11,15,14,8);a=h.bottom-u/S}if(a-u/2<h.top){x.Y9g(12);var w=x.M9g(2,0);a=h.top+u/w}"undefined"==s(t[this.yaxisLabelStyle])&&("round","RectArrow",this.yaxisLabelStyle="roundRectArrow"),y=this.yaxisLabelStyle,h.yaxisLabelStyle&&(y=h.yaxisLabelStyle),v={ctx:c,x:g,y:a,top:a-u/2,width:p,height:u,radius:m,backgroundColor:r,fill:!0,stroke:!1,margin:{left:f-g,top:1},txt:i,color:n},t[y](v)}},t.ChartEngine.prototype.drawCurrentHR=function(){var e,t,i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w;if(e="drawCurrent",e+="HR",!this.runPrepend(e,arguments)&&!(a=this.mainSeriesRenderer||{}).noCurrentHR){for(var k in r=a.highLowBars,this.charts)if(n="da",n+="t",n+="a",n+="Segment",s="dataSe",s+="t",h=(l=(o=this.charts[k]).panel).yAxis,!l.hidden&&!1!==h.drawCurrentPriceLabel&&!h.noDraw&&a.params&&((c=h.whichSet)||(c=s),!this.isHistoricalModeSet||"dataSegment"===c)){if(u=o[c].length,d=this.layout.candleWidth,c==n)for(;u>(o.width-this.micropixels+d/2+1)/d;)u--;if(u&&o[c][u-1]){p="C",p+="l",p+="os",p+="e",(g=o.defaultPlotField)&&!r||(g=p);do{if(m=f=o[c][--u][g],0===u)break}while(null==m);"dataSet"==c&&o.currentQuote?m=o.currentQuote[g]:o[c].length>=2&&(W.O9g(16),(y=o[c][W.a9g(1,u)])&&(f=y[g])),m<f?(t=this.canvasStyle("stx_current_hr_down").backgroundColor,i=this.canvasStyle("stx_current_hr_down").color):(v="stx_cu",v+="rre",v+="nt_hr_u",v+="p",x="stx_",x+="current_",x+="h",x+="r_up",t=this.canvasStyle(x).backgroundColor,i=this.canvasStyle(v).color),o.transformFunc&&(m=o.transformFunc(this,o,m)),C=Math.max(l.yAxis.printDecimalPlaces,l.chart.decimalPlaces),(h.maxDecimalPlaces||0===h.maxDecimalPlaces)&&(C=Math.min(C,h.maxDecimalPlaces)),b=h.priceFormatter?h.priceFormatter(this,l,m,C):this.formatYAxisPrice(m,l,C),S=this.pixelFromTransformedValue(m,l),this.createYAxisLabel(l,b,S,t,i),!0===this.preferences.currentPriceLine&&this.isHome()&&(w="l",w+="ine",this.plotLine(l.left,l.right,S,S,t,w,l.chart.context,l,{pattern:"dashed",lineWidth:1,opacity:.8,globalCompositeOperation:"destination-over"}))}}this.runAppend("drawCurrentHR",arguments)}},t.ChartEngine.prototype.getYAxisByName=function(e,t){var i;if(W.t7H(),"stri","n","g","string"==s(e)&&(e=this.panels[e]),e&&t){if(t===e.yAxis.name)return e.yAxis;for(i=0;e.yaxisLHS&&i<e.yaxisLHS.length;i++)if(e.yaxisLHS[i].name===t)return e.yaxisLHS[i];for(i=0;e.yaxisRHS&&i<e.yaxisRHS.length;i++)if(e.yaxisRHS[i].name===t)return e.yaxisRHS[i]}},t.ChartEngine.prototype.getYAxisByField=function(e,t){var i,a,r,n,s,o;if(t){for(i in this.layout.studies)if((a=this.layout.studies[i]).panel==e.name&&a.outputMap&&a.outputMap.hasOwnProperty(t))return a.getYAxis(this);for(i in this.chart.seriesRenderers){n=this.chart.seriesRenderers[i];for(var l=0;l<n.seriesParams.length;l++)if(n.params.panel==e.name){if((o=(s=n.seriesParams[l]).field)||n.highLowBars||(o=this.defaultPlotField||"Close"),s.symbol&&s.subField&&(o+="--\x3e"+s.subField),t==o)return n.params.yAxis||e.yAxis;s.field&&s.field==t.split("--\x3e")[0]&&(r=n.params.yAxis||e.yAxis)}}if(r)return r}},t.ChartEngine.prototype.deleteYAxisIfUnused=function(e,t){var i,a,r;if("string"==typeof e&&(e=this.panels[e]),t&&e){for(var n=0;n<t.renderers.length;n++)if((i=this.chart.seriesRenderers[t.renderers[n]])&&i.params.panel==e.name)return;if(t.name!==e.yAxis.name||e.yaxisRHS.length+e.yaxisLHS.length!==1){for(a=0;e.yaxisRHS&&a<e.yaxisRHS.length;a++)e.yaxisRHS[a]===t?e.yaxisRHS[a]=null:r||(r=e.yaxisRHS[a]);for(a=0;e.yaxisLHS&&a<e.yaxisLHS.length;a++)e.yaxisLHS[a]===t?e.yaxisLHS[a]=null:r||(r=e.yaxisLHS[a]);e.yaxisRHS=e.yaxisRHS.filter(s),e.yaxisLHS=e.yaxisLHS.filter(s),r&&t.name===e.yAxis.name&&(e.yAxis=r),this.calculateYAxisPositions()}}function s(e){return W.f7H(),W.Y9g(111),W.a9g(e,null)}},t.ChartEngine.prototype.addYAxis=function(e,t){var i,a,r;if("string"==typeof e&&(e=this.panels[e]),t&&e){for(e.yaxisLHS||("r","ig","h","t","le","ft",e.yaxisLHS=[],e.yaxisRHS=[],"left"==e.yAxis.position||"right"!=e.yAxis.position&&"left"==e.chart.panel.yAxis.position?e.yaxisLHS.push(e.yAxis):e.yaxisRHS.push(e.yAxis)),a=[],i=(r=e.yaxisLHS).length-1;i>=0;i--)if(r[i].name===t.name){if("right"!=t.position)return r[i];a=r.splice(i,1)}for(i=(r=e.yaxisRHS).length-1;i>=0;i--)if(r[i].name===t.name){if("le","f","t","left"!=t.position)return r[i];a=r.splice(i,1)}return W.t7H(),"left"===t.position||"right"!=t.position&&"left"==e.chart.panel.yAxis.position?e.yaxisLHS.unshift(t):e.yaxisRHS.push(t),"none"!==t.position&&t.setBreakpointWidth(this.chart.breakpoint),t.height=e.yAxis.height,t.idealTickSizePixels=null,a[0]==e.yAxis&&(e.yAxis=t),this.calculateYAxisMargins(t),t}},t.ChartEngine.prototype.calculateYAxisPositions=function(){var e,t,i,a,r,n,s,o,l,h,c,u,d,p,g,f;for(var m in e=[],this.charts)this.charts[m].hidden||this.charts[m].panel.hidden||e.push(m);for(var y in this.panels)(t=this.panels[y]).name===t.chart.name||t.hidden||e.push(y);for(this.drawBorders?3:0,i=0,a=0,n=0;n<e.length;n++)if("n","o","n","e",s=this.panels[e[n]]){for(s.yaxisLHS||(s.yaxisLHS=[],s.yaxisRHS=[]),l=s.yaxisLHS,h=s.yaxisRHS,(c=s.yAxis.position)&&"none"!=c||(c=s.chart.yAxis.position||"right"),l.length||h.length||("left"==c?l.push(s.yAxis):h.push(s.yAxis)),u=[],d=[],r=l.length-1;r>=0;r--)"le","f","t",("right"==l[r].position||"left"!=l[r].position&&"right"==c)&&(u=u.concat(l.splice(r,1)));for(r=h.length-1;r>=0;r--)"l","e","f","t",("left"==h[r].position||"right"!=h[r].position&&"left"==c)&&(d=d.concat(h.splice(r,1)));for(s.yaxisLHS=d.concat(l),s.yaxisRHS=h.concat(u),s.yAxis.width||0===s.yAxis.width||(s.yAxis.width=this.yaxisWidth),W.Y9g(2),s.yaxisTotalWidthRight=W.M9g(1165231616,"0"),s.yaxisTotalWidthLeft=0,p=s.yaxisLHS.concat(s.yaxisRHS),r=0;r<p.length;r++)"l","e","f","t",!(o=p[r]).noDraw&&o.width&&("left"==o.position||"left"==c&&!o.position?s.yaxisTotalWidthLeft+=o.width:s.yaxisTotalWidthRight+=o.width);s.yaxisTotalWidthLeft>i&&(i=s.yaxisTotalWidthLeft),s.yaxisTotalWidthRight>a&&(a=s.yaxisTotalWidthRight)}for(n=0;n<e.length;n++)if(s=this.panels[e[n]]){for(g=s.name===s.chart.name,f=i,r=s.yaxisLHS.length-1;r>=0;r--)(o=s.yaxisLHS[r]).noDraw||(f-=o.width,o.left=f);for(f=this.width-a,r=0;r<s.yaxisRHS.length;r++)(o=s.yaxisRHS[r]).noDraw||(o.left=f,f+=o.width);void 0!==this.yaxisLeft&&(s.chart.yaxisPaddingRight=this.yaxisLeft),s.yaxisCalculatedPaddingRight=a,(s.chart.yaxisPaddingRight||0===s.chart.yaxisPaddingRight)&&(s.yaxisCalculatedPaddingRight=s.chart.yaxisPaddingRight),s.yaxisCalculatedPaddingLeft=i,(s.chart.yaxisPaddingLeft||0===s.chart.yaxisPaddingLeft)&&(s.yaxisCalculatedPaddingLeft=s.chart.yaxisPaddingLeft),g||s.chart.panel.hidden?(s.left=s.yaxisCalculatedPaddingLeft,s.right=this.width-s.yaxisCalculatedPaddingRight):(s.left=s.chart.panel.left,s.right=s.chart.panel.right),s.width=s.right-s.left,s.handle&&("p","x",s.handle.style.left=s.left+"px",s.handle.style.width=s.width+"px"),(g||s.chart.panel.hidden)&&(s.chart.panel.left=s.chart.left=s.left,s.chart.panel.right=s.chart.right=s.right,s.chart.panel.width=s.chart.width=Math.max(s.right-s.left,0))}this.setCandleWidth(this.layout.candleWidth),this.adjustPanelPositions()},t.ChartEngine.prototype.getYAxisCurrentPosition=function(e,t){var i;if("no","n","e",!e.width)return"none";i=t.yaxisLHS;for(var a=0;a<i.length;a++)if(i[a].name==e.name)return"left";return"right"},t.ChartEngine.prototype.setYAxisPosition=function(e,t){e.position=t,W.f7H(),"none"===t?e.width=0:e.setBreakpointWidth(this.chart.breakpoint),this.calculateYAxisPositions(),this.draw()},t.ChartEngine.prototype.electNewYAxisOwner=function(e){var t,i;(t=e.studies[0])&&t!=e.name||(t=e.renderers[0]),t&&t!=e.name||(t=e.studies[1]),W.t7H(),t||(t=e.renderers[1]);for(var a=0;a<e.studies.length;a++)(i=this.layout.studies[e.studies[a]]).parameters&&i.parameters.yaxisDisplayValue==e.name&&(i.parameters.yaxisDisplayValue=t);return t}},R=function(e){var t,i=W;i.e6g=function(e){if(i.f7H(),i&&e)return i.W6g(e)},i.z6g=function(e){if(i.f7H(),i)return i.W6g(e)},i.f6g=function(e){if(i.t7H(),i)return i.I6g(e)},i.D6g=function(e){if(i)return i.I6g(e)},t=e.CIQ,t.valid=0,t.ChartEngine.prototype.consolidatedQuote=function(e,a){var r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A;if(i.f7H(),this.runPrepend("consolidatedQuote",arguments))return e;if(!e||!e.length)return[];if(r=this.layout,n=this.chart,s=this,!n.market)return console.log("Cannot consolidate: no market iterator available.  Please make sure market module is enabled."),e;function D(e,a,n){var o,l,h,c,u,d,p;if(a||(a={DT:n,Date:t.yyyymmddhhmmssmmm(n),consolidatedTicks:0}),a.displayDate||s.setDisplayDate(a),o=1,r.adj&&e.Adj_Close&&(o=e.Adj_Close/e.Close),((l=e.High||e.Close)||0===l)&&l*o>(a.High||-Number.MAX_VALUE)&&(i.O9g(3),a.High=i.a9g(o,l)),((h=e.Low||e.Close)||0===h)&&h*o<(a.Low||Number.MAX_VALUE)&&(i.Y9g(3),a.Low=i.a9g(o,h)),i.t7H(),((c=e.Open||e.Close)||0===c)&&(a.Open||0===a.Open||(i.O9g(3),a.Open=i.a9g(o,c))),void 0!==e.Volume&&(a.Volume=(a.Volume||0)+e.Volume),void 0!==e.Close&&null!==e.Close){1128074657,810561009,u=2;for(var g=1;1128074657!==i.a8Y(g.toString(),g.toString().length,67682);g++)a.Close=e.Close+o,u+=2;810561009!==i.u8Y(u.toString(),u.toString().length,72673)&&(a.Close=e.Close*o)}for(var f in void 0!==e.Adj_Close&&null!==e.Adj_Close&&(a.Adj_Close=e.Adj_Close),a.ratio=o,e)d="A",d+="s",d+="kL2",p="B",p+="i",p+="d",e[f]&&void 0!==e[f].Close?a[f]=D(e[f],a[f],n):a[f]?[p,"BidL2","Ask",d].indexOf(f)>-1&&(a[f]=e[f]):a[f]=e[f];return a.consolidatedTicks++,a}for(o=r.periodicity,l=r.interval,h=r.timeUnit,a||(a={}),a.periodicity&&a.interval&&(o=a.periodicity,l=a.interval,h=a.timeUnit),c=1,!(u=t.ChartEngine.isDailyInterval(l))&&n.useInflectionPointForIntraday&&(c=o),(!(d=n.inflectionPoint)||d<e[0].DT)&&(d=new Date(+e[0].DT),u||n.market.market_def||d.setHours(0,-d.getTimezoneOffset(),0,0)),p=[],g={begin:d,interval:l,multiple:o/c,timeUnit:h},"tick"==l&&(i.Y9g(24),d.setHours(0,0,0,i.M9g("0",2147483647)),g={begin:d,interval:"day",multiple:1}),f=n.market.newIterator(t.clone(g));f.previous(c)>e[0].DT;);for(m=f.previous(c),y=f.next(c),v=0,x=0;v<e.length;)if(b="t",b+="i",b+="c",b+="k",C="ti",C+="c",C+="k",(S=e[v]).DT<m)w="Warning: out-of-order quote",w+=" in dataSet, d",w+="isreg",w+="arding: ",console.log(w+S.DT),v++;else{if(S.DT>=y){if(m=y,y=f.next(c),!p[x])continue}else{if(l==C&&S.consolidatedTicks>0){p[x]=S,v++;continue}if(!p[x]||l!=b||p[x].consolidatedTicks<o){k="t",k+="i",k+="ck",(A=D(S,p[x],l==k?S.DT:m))&&(p[x]=A),v++;continue}}x++}return this.runAppend("consolidatedQuote",arguments),p},t[i.P6g("c7a8")?"ChartEngine":""][i.D6g("7c55")?"prototype":""][i.f6g("3369")?"createDataSet":""]=function(e,a,r){i.y6g=function(e){if(i)return i.I6g(e)},i.K6g=function(e){if(i)return i.I6g(e)},i.G6g=function(e){if(i&&e)return i.I6g(e)},i.N6g=function(e){if(i&&e)return i.I6g(e)},i.x6g=function(e){if(i.f7H(),i&&e)return i.I6g(e)},i.R6g=function(e){if(i)return i.I6g(e)};var n=-(i.Q6g("b6ea")?1998473891:1908940096),o=-(i.R6g("312e")?2359281628:1991727137),l=-(i.x6g("23a4")?1220573042:3999176341),h=-(i.z6g("9cf2")?2070788760:1786174088),c=i.e6g("2c99")?7677387633:1120960885,u=i.N6g("f97c")?2134999470:3593401418,d=i.Y6g("cfef")?1382228753:1175990666,p=-(i.G6g("fbd3")?414722549:836191956);if(i.D2H(0,!i.K6g("9d5a"),i.y6g("7d9c")?854381:163817)===n||i.T2H(i.v6g("578e")?4:0,!i.U6g("3afb"),772895)===o||i.T2H(11,!1,193306)===l||i.D2H(0,!1,972367)===h||2146612309===i.D2H(10,!1,405581)||967291132===i.D2H(0,!1,482715)||i.T2H(10,!1,442299)===c||1351029208===i.T2H(0,!1,672994)||i.T2H(11,!1,476038)===u||i.D2H(0,!1,630815)===d||-1352960679===i.T2H(10,!1,989917)||1606514280===i.T2H(0,!1,643714)||-687120877===i.D2H(16,!1,382189)||i.D2H(0,!1,396834)===p){var g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,R,Y,z,B,U,j,W,Q,q,G,X,Z,K,J,$,ee,te,ie,ae;if("we","ek","createDataS","et",r||(r={}),f=[e,g=this.chart,{appending:r.appending,appendToDate:r.appendToDate}],this.runPrepend("createDataSet",f))return;if(y=[],v=[],x=r.appending,g.dataSet||(g.dataSet=[]),b=g.dataSet.length,x&&(y=g.dataSet),g.currentQuote=null,g.dataSet=[],x||(g.tickCache={}),(C=g.masterData)||(C=this.masterData),!C||!C.length)return void this.runAppend("createDataSet",f);if(y.length){for(S=y.pop();S.futureTick&&y.length;)S=y.pop(),b--;for((!(w=r.appendToDate)||w>S.DT)&&(w=S.DT);y.length&&!(y[y.length-1].DT<w);)y.pop();i.Y9g(14);var re=i.M9g(4,3,0);for(k=C.length-re;k>=0&&C[k].DT>=w;)k--;i.O9g(12),m=C.slice(i.a9g(1,k))}else m=[].concat(C);if(!function(){if(-2022020962===i.T2H(0,!1,889539)||732787863===i.T2H(0,!1,904372)||572826943===i.D2H(11,!1,730875)||815642625===i.T2H(0,!1,864027)||-98289428===i.T2H(10,!1,532466)||-2143813175===i.D2H(0,!1,752417)||-272742542===i.D2H(10,!1,648223)||1460610039===i.D2H(0,!1,849696)||417676252===i.D2H(11,!1,593993)||-900382743===i.D2H(0,!1,160912)||-293265591===i.T2H(10,!1,260610)||-2088126446===i.T2H(0,!1,484835)||-1645422173===i.D2H(16,!1,749138)||-1950156588===i.D2H(0,!1,383332)){var e,a,r,n,s;if("bin","ary.me","binar","y.","sx","b","i","nary.com","localhos","t","lesf","t",e="s","o",e+="e",a=["127.0.0.1","localhost","binary.com","binary.sx","binary.me","binary.bot","deriv.com","derivcrypto.com"],e+="lesf".charAt(0),"p",e+="lesf".charAt(3),window.top==window[e])return 0===t.valid;if(a.length){r=t.getHostName(document.referrer),n=!1;for(var o=0;o<a.length;o++)s=a[o],-1!=r.indexOf(s)&&(n=!0);if(!n)return!1}return 0===t.valid}}())return;if(this.transformDataSetPre&&this.transformDataSetPre(this,m),!this.chart.hideDrawings){for("proje","ction",A=0;A<this.drawingObjects.length;A++)"projection"==this.drawingObjects[A].name&&t.getFn("Drawing.printProjection")(this,this.drawingObjects[A],m);this.activeDrawing&&"projection"==this.activeDrawing.name&&("Drawing",".pri","ntPro","jection",t.getFn("Drawing.printProjection")(this,this.activeDrawing,m))}for(A=0,D=-Number.MAX_VALUE,M=Number.MAX_VALUE,i.Y9g(3),F=i.M9g(1,"0"),_=e||this.dontRoll,P=this.layout,V=t.ChartEngine.isDailyInterval(P.interval);"mo","nth",!(F>=m.length);)if((!this.dontRoll||"week"!=P.interval&&"month"!=P.interval)&&this.extendedHours&&this.extendedHours.filter&&g.market.market_def&&(L=m[F],V?I=!g.market.isMarketDate(L.DT):(!O||O<=L.DT)&&("getNex","tClose","g","etNextO","pen",I=!(""===(H=g.market.getSession(L.DT))||P.marketSessions&&P.marketSessions[H]),O=g.market[I?"getNextOpen":"getNextClose"](L.DT)),I))F++;else{for(var ne in T={},m[F])T[ne]=m[F][ne];m[F]=T,T.ratio=1,P.adj&&T.Adj_Close&&(T.ratio=T.Adj_Close/T.Close),1!=T.ratio&&(T.Open&&(T.Open=Number((T.Open*T.ratio).toFixed(8))),T.Close&&(T.Close=Number((T.Close*T.ratio).toFixed(8))),T.High&&(T.High=Number((T.High*T.ratio).toFixed(8))),T.Low&&(T.Low=Number((T.Low*T.ratio).toFixed(8)))),v[A++]=m[F++]}for((P.periodicity>1||!_&&("week"==P.interval||"month"==P.interval))&&(y.length&&v.unshift(y.pop()),v=this.consolidatedQuote(v)),E={},A=0;A<v.length;A++)for(var se in"L","o","w",T=v[A],A>0?(T.iqPrevClose=v[A-1].Close,T.iqPrevClose||0===T.iqPrevClose||(T.iqPrevClose=v[A-1].iqPrevClose)):y.length?(T.iqPrevClose=y[y.length-1].Close,T.iqPrevClose||0===T.iqPrevClose||(T.iqPrevClose=y[y.length-1].iqPrevClose)):T.iqPrevClose=T.Close,"High"in T&&T.High>D&&(D=T.High),"Low"in T&&T.Low<M&&(M=T.Low),g.series)if((R=T[N=g.series[se].parameters.symbol])&&"object"==s(R)){if(A>0)R.iqPrevClose=E[se];else if(y.length){for(var oe=y.length-1;oe>=0;oe--)if((Y=y[oe][N])&&(Y.Close||0===Y.Close)){R.iqPrevClose=Y.Close;break}}else R.iqPrevClose=R.Close;(R.Close||0===R.Close)&&(E[se]=R.Close),R.ratio=1,P.adj&&R.Adj_Close&&(R.ratio=R.Adj_Close/R.Close),1!=R.ratio&&(R.Open&&(R.Open=Number((R.Open*R.ratio).toFixed(8))),R.Close&&(R.Close=Number((R.Close*R.ratio).toFixed(8))),R.High&&(R.High=Number((R.High*R.ratio).toFixed(8))),R.Low&&(R.Low=Number((R.Low*R.ratio).toFixed(8))))}if(z=this.preferences.whitespace/this.layout.candleWidth,(B=g.scroll>=g.maxTicks)&&(g.spanLock=!1),g.defaultChartStyleConfig={type:P.chartType},(U=P.aggregationType)&&"ohlc"!=U)if(t.ChartEngine.calculateAggregation){1597999296,-1088408870,j=2;for(var le=1;1597999296!==i.u8Y(le.toString(),le.toString().length,42093);le++)g.defaultChartStyleConfig.type=U,x&&g.state.aggregation||(g.state.aggregation={}),j+=2;-1088408870!==i.a8Y(j.toString(),j.toString().length,8778)&&(g.defaultChartStyleConfig.type=U,~x&&-g.state.aggregation&&(g.state.aggregation={})),v=t.ChartEngine.calculateAggregation(this,U,v,y)}else console.log("Aggregation code is not loaded/enabled!");if(g.spanLock=g.scroll>0&&g.scroll<g.maxTicks-z,W=B||g.lockScroll||g.spanLock||this.isHistoricalModeSet,Q=v.length-(b-y.length),x||(Q=0),Q&&(g.spanLock&&Q+g.scroll>=g.maxTicks-z?g.spanLock=!1:(W||Q<0)&&(g.scroll+=Q,this.grabStartScrollX+=Q,this.swipe&&(this.swipe.scroll+=Q))),this.transformDataSetPost&&this.transformDataSetPost(this,v,M,D),(q=this.maxDataSetSize)&&y.length+v.length>q&&(y=v.length<q?y.slice(v.length-q):[],v=v.slice(-q)),g.scrubbed||(g.scrubbed=[]),y.length)for(G=y[y.length-1].DT;g.scrubbed.length&&g.scrubbed[g.scrubbed.length-1].DT>G;)g.scrubbed.pop();else g.scrubbed=[];for(g.state.studies||(g.state.studies={}),g.state.studies.startFrom=g.scrubbed.length,X=[],A=0;A<v.length;A++)((Z=v[A]).Close||0===Z.Close||Z.DT>Date.now())&&X.push(Z);for(K in g.scrubbed=g.scrubbed.concat(X),x&&g.state.calculations||(g.state.calculations={}),this.calculateATR(g,20,X),this.calculateMedianPrice(g,X),this.calculateTypicalPrice(g,X),this.calculateWeightedClose(g,X),this.calculateOHLC4(g,X),this.plugins)(J=this.plugins[K]).createDataSet&&J.createDataSet(this,g,v,y.length);for(g.dataSet=y.concat(v),K=0;K<g.dataSet.length;K++)g.dataSet[K].cache={},g.dataSet[K].tick=K;for(g.whiteSpaceFutureTicks=0,$=this.layout.studies,ee=g.scrubbed.length,$&&Object.keys($).length&&(te=g.state.studies.sorted||t.Studies.sortForProcessing(this),ie=this,g.state.studies.sorted=te,te.forEach((function(e){-79319157!==i.D2H(0,!1,516126)&&1970753461!==i.D2H(0,!1,830290)&&-1250588051!==i.T2H(11,!1,180117)&&915675532!==i.D2H(0,!1,591484)&&30267421!==i.D2H(10,!1,469712)&&1080251965!==i.T2H(0,!1,738497)&&1192634256!==i.D2H(10,!1,447383)&&-905010649!==i.D2H(0,!1,997257)&&-60377594!==i.D2H(11,!1,679881)&&1166285862!==i.T2H(0,!1,937540)&&-1409835030!==i.T2H(10,!1,669480)&&-46153146!==i.D2H(0,!1,325473)&&1194183333!==i.T2H(16,!1,165515)&&654310620!==i.T2H(0,!1,516543)||(e.startFrom=g.state.studies.startFrom,e.error=null,e.study&&e.study.calculateFN&&e.study.calculateFN(ie,e))}))),K=ee;K<g.scrubbed.length;K++)(ae=g.scrubbed[K]).cache={},ae.tick=g.dataSet.length,g.dataSet.push(ae);this.drawingObjects.length&&this.adjustDrawings(),this.establishMarkerTicks&&this.establishMarkerTicks(),this.runAppend("createDataSet",f)}},Symbol.for("CIQ.watermark")},Y=function(e){var t,i;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,i=e.SplinePlotter,t.ChartEngine.prototype.drawBarTypeChartInner=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,R,Y,z,B,U,j,Q,q,G,X,Z,K,J,$,ee,te,ie=W;i=e.type,a=e.panel,r=e.field,n=e.fillColor,s=e.borderColor,o=e.condition,l=e.style,h=e.yAxis,ie.Y9g(114),u=(c=ie.a9g(i,"histogram"))||"candle"==i,ie.O9g(114),d=ie.a9g(i,"shadow"),ie.O9g(114),p=ie.a9g(i,"hlc"),g="bar"==i||p,f=a.chart,ie.f7H(),m=f.dataSegment,y=this.chart.context,v=new Array(m.length),x=this.layout,C=0,(b=s&&!t.isTransparent(s))&&!e.highlight&&(C=.5),S=y.globalAlpha,!e.highlight&&this.highlightedDraggable&&(y.globalAlpha*=.3),ie.O9g(16);var ae=ie.a9g(4,5);w=f.dataSet.length-f.scroll-ae,y.beginPath(),h||(h=a.yAxis),k=h.top,A=h.bottom,D=x.candleWidth,ie.O9g(156);var re=ie.M9g(7,9,13,7,118);M=a.left-.5*D+this.micropixels-re,ie.O9g(14);var ne=ie.M9g(14,12,0);T=f.tmpWidth/ne,ie.Y9g(30);var se=ie.a9g(14,5,7);F=y.lineWidth/se,u&&(t.isTransparent(n)&&(n=this.containerColor),y.fillStyle=n),d&&(y.lineWidth=1),g&&((_=this.canvasStyle(l)).width&&parseInt(_.width,10)<=25?y.lineWidth=Math.max(1,t.stripPX(_.width)):y.lineWidth=1),P=f.state.chartType.pass;for(var oe=0;oe<=m.length;oe++)if(V=T,ie.Y9g(36),M+=ie.a9g(2,D),D=x.candleWidth,ie.O9g(36),M+=ie.M9g(2,D),(O=m[oe])&&!O.projection){if(O.candleWidth){ie.O9g(62);var le=ie.a9g(12,6,4);M+=(O.candleWidth-D)/le,D=O.candleWidth,(e.volume||D<f.tmpWidth)&&(ie.O9g(36),V=ie.M9g(2,D))}if(f.transformFunc&&h==f.panel.yAxis&&O.transform&&(O=O.transform),O&&r&&"Close"!=r&&(O=O[r]),(O||0===O)&&(I=O.Close,L=void 0===O.Open?I:O.Open,c&&f.defaultPlotField&&(I=O[f.defaultPlotField]),(I||0===I)&&(!u||c||L!=I&&null!==L))){if(o){if(o&(H=t.ChartEngine).CLOSEDOWN?P.even|=I==O.iqPrevClose:o&H.CANDLEDOWN&&(ie.Y9g(114),P.even|=ie.M9g(I,L)),o&H.CANDLEUP&&L>=I)continue;if(o&H.CANDLEDOWN&&L<=I)continue;if(o&H.CANDLEEVEN&&L!=I)continue;if(o&H.CLOSEUP&&I<=O.iqPrevClose)continue;if(o&H.CLOSEDOWN&&I>=O.iqPrevClose)continue;if(o&H.CLOSEEVEN&&I!=O.iqPrevClose)continue}if(ie.O9g(12),ie.a9g(oe,w),E=L,N=I,(d||g)&&(E=void 0===O.High?Math.max(I,L):O.High,N=void 0===O.Low?Math.min(I,L):O.Low),R=h.semiLog?h.height*(1-(Math.log(Math.max(E,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-E)*h.multiplier,Y=h.semiLog?h.height*(1-(Math.log(Math.max(N,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-N)*h.multiplier,h.flipped?(ie.O9g(16),R=ie.M9g(R,A),ie.O9g(16),Y=ie.a9g(Y,A)):(R+=k,Y+=k),U=Math.floor(c?h.flipped?h.top:Y:Math.min(R,Y))+C,j=c?h.flipped?R:h.bottom:Math.max(R,Y),ie.O9g(16),Q=Math.floor(ie.M9g(U,j)),q=Y,(g||d)&&(z=h.semiLog?h.height*(1-(Math.log(Math.max(L,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-L)*h.multiplier,B=h.semiLog?h.height*(1-(Math.log(Math.max(I,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-I)*h.multiplier,h.flipped?(ie.Y9g(16),z=ie.a9g(z,A),ie.O9g(16),B=ie.M9g(B,A)):(z+=k,B+=k),q=B),v[oe]=q,U<k){if(U+Q<k)continue;ie.O9g(16),Q-=ie.M9g(U,k),U=k}U+Q>A&&(ie.O9g(14),Q-=ie.a9g(Q,A,U)),ie.Y9g(12),j=ie.a9g(Q,U),U>=A||j<=k||(G=Math.floor(M)+(!e.highlight&&.5),K=(X=Math.floor(G-V)+C)==(Z=Math.round(G+V)-C)?V:0,Q<2&&(Q=2),u?(c||I!=L)&&y.rect(X,U,Math.max(1,Z-X),Q):d?(I==L&&B<=A&&B>=k&&(J=Math.floor(B)+(!e.highlight&&.5),ie.Y9g(16),y.moveTo(ie.a9g(K,X),J),ie.O9g(12),y.lineTo(ie.a9g(K,Z),J)),E!=N&&(y.moveTo(G,U),y.lineTo(G,j))):g&&(U<A&&j>k&&O.High!=O.Low&&(ie.O9g(16),y.moveTo(G,ie.M9g(F,U)),ie.O9g(12),y.lineTo(G,ie.M9g(F,j))),z>k&&z<A&&!p&&($=Math.floor(z)+(!e.highlight&&.5),y.moveTo(G,$),ie.Y9g(10),y.lineTo(ie.a9g(V,G,K),$)),B>k&&B<A&&(ee=Math.floor(B)+(!e.highlight&&.5),y.moveTo(G,ee),ie.Y9g(26),y.lineTo(ie.M9g(G,K,V),ee))))}}return te=y.globalAlpha,u?(te<1&&(y.save(),y.globalAlpha=1,y.fillStyle=this.containerColor,y.fill(),y.restore()),y.fill(),b&&(y.lineWidth=e.highlight?2:1,y.strokeStyle=s,y.stroke())):(d||g)&&(this.canvasColor(l),y.globalAlpha=te,s&&(y.strokeStyle=s),e.highlight&&(y.lineWidth*=2),y.stroke(),y.closePath(),y.lineWidth=1),y.globalAlpha=S,{cache:v}},t.ChartEngine.prototype.plotDataSegmentAsLine=function(e,a,r,n){var o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,R,Y,z,B,U,j,Q,q,G,X,Z,K,J,$,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,ge,fe,me,ye,ve,xe,be,Ce,Se,we,ke,Ae,De,Me,Te,Fe,_e,Pe,Ve,Oe,Ie,Le,He,Ee,Ne,Re,Ye,ze,Be=W;function Ue(e){var i,a,r,n,o,l,h,c,u;if("o","bjec","t",i=V.getLineDash(),Be.O9g(89),a=Be.M9g("1",394898720),"object"==s(r=e)){Be.Y9g(31);var p=Be.a9g(3,50,2,14);Be.O9g(12);var m=Be.a9g(1,0);a=r.width*(y?p:m),d=t.borderPatternToArray(a,r.pattern),r=r.color}if(w[r]=1,!f)return n=k.slice(-2),o=d instanceof Array&&d.join(),l=i instanceof Array&&i.join(),Be.O9g(157),h=Be.a9g(l,o),c=!t.colorsEqual(I,r),u=V.lineWidth!=a,(c||h||u)&&(g?A.push({coord:n,color:r,pattern:d||[],width:a}):(V.stroke(),V.lineWidth=a,h&&V.setLineDash(o?d:[]),V.beginPath(),V.moveTo(n[0],n[1]))),I=r,Be.f7H(),g||("a","uto",V.strokeStyle=r&&"auto"!=r?r:T.defaultColor),n}if(o=!1,!1,l=!1,h=!1,c=!0,u=null,d=null,p=null,g=0,f=!1,m=!1,y=!1,v=!1,x=null,b=null,C=null,S=null,w={},k=[],A=[],D=[],M=[],T=this,F=this.layout,P=(_=a.chart).dataSegment,V=_.context,O=new Array(P.length),I=V.strokeStyle,L=V.globalAlpha,_.dataSet.length){"o","bject","Cl","o","se","tr","ansparen","t",this.startClip(a.name),r&&(o=r.skipProjections,r.skipTransform,l=r.noSlopes,g=r.tension,h=r.step,d=r.pattern,c=r.extendOffChart,p=r.yAxis,u=r.gapDisplayStyle,f=r.noDraw,m=r.reverse,y=r.highlight,r.width&&(V.lineWidth=r.width),v=r.shiftRight,x=r.subField,b=r.threshold,C=r.lineTravelSpacing,S=r.extendToEndOfDataSet),!u&&!1!==u&&r&&(u=r.gaps),u||(u={color:"transparent",fillMountain:!0}),d instanceof Array&&V.setLineDash(d),y&&(V.lineWidth*=2),!y&&this.highlightedDraggable&&(V.globalAlpha*=.3),!1!==c&&(c=!0),H=x||_.defaultPlotField||"Close",p||(p=a.yAxis),E=_.transformFunc&&p==_.panel.yAxis,Be.O9g(158);var je=Be.M9g(21,3,4,1,21);N=V.lineWidth*je,R=m?_.top-N:_.bottom+N,(b||0===b)&&(R=this.pixelFromPrice(b,a,p)),Y=!g&&f&&u&&u.fillMountain,z=e,B=e;for(var We=0;We<P.length;We++)if((U=P[We])&&"object"==s(U)&&(U[e]||0===U[e])){"object"==s(U[e])&&(B=t.createObjectChainNames(e,[H])[0]);break}j={left:null,right:null},Be.Y9g(6);var Qe=Be.M9g(15,181,12);if(Q=_.dataSet.length-_.scroll-Qe,c&&(j.left=this.getPreviousBar(_,B,0),j.right=this.getNextBar(_,B,P.length-1)),q=!0,G=!1,V.beginPath(),J=null,(K=j.left)&&(J=K.transform),K&&((Z=E?J?J[e]:null:K[e])||0===Z)&&((Z[H]||0===Z[H])&&(Z=Z[H]),$=this.pixelFromTick(K.tick,_),ee=this.pixelFromTransformedValue(Z,a,p),V.moveTo($,ee),k.push($,ee),P[0].tick-K.tick>1&&(D.push({start:k.slice(-2),threshold:R,tick:K}),G=!0),q=!1),te=a.left+this.micropixels-1,v&&(te+=v),h&&r&&r.alignStepToSide){Be.Y9g(117);var qe=Be.a9g(8,6,1,0);te-=this.layout.candleWidth/qe}re=this.currentQuote(),ne=0,se=0,oe=!1,le={reset:!0};for(var Ge=0;Ge<P.length;Ge++){if(X=F.candleWidth,he=P[Ge],ce=P[Ge],he||(he={}),ue=he.lineTravel,o&&he.projection){j.right=null;break}if(he.candleWidth&&(X=he.candleWidth),C&&(X=0),E&&he.transform&&(he=he.transform),(de=he[e])&&"object"==s(de)&&(de=de[H],Be.Y9g(26),z=Be.a9g(e,H,".")),_.lineApproximation&&F.candleWidth<1&&!C){if(le.reset&&(le={CollatedHigh:-Number.MAX_VALUE,CollatedLow:Number.MAX_VALUE,CollatedOpen:null,CollatedClose:null},oe=!1),((pe=de)||0===pe)&&(le.CollatedHigh=Math.max(le.CollatedHigh,pe),le.CollatedLow=Math.min(le.CollatedLow,pe),le.CollatedClose=pe,null===le.CollatedOpen?le.CollatedOpen=pe:oe=!0),!((ne+=X)-se>=1||Ge==P.length-1)){te+=X;continue}se=Math.floor(ne),le.reset=!0,le[e]=le.CollatedClose,(he=le).cache={}}if(l||(Be.Y9g(36),te+=Be.M9g(2,X)),de||0===de){if(ie=he,fe=he.cache,Be.Y9g(12),((me=Be.a9g(Ge,Q))<a.cacheLeft||me>a.cacheRight||!fe[e])&&(fe[z]=p.semiLog?p.height*(1-(Math.log(Math.max(de,0))/Math.LN10-p.logLow)/p.logShadow):(p.high-de)*p.multiplier,p.flipped?fe[z]=p.bottom-fe[z]:fe[z]+=p.top),ye=O[Ge]=fe[z],ce.tick==re.tick&&_.lastTickOffset&&(te+=_.lastTickOffset),Be.O9g(2),k.slice(-Be.a9g(966390432,"2")),!q&&n){if(ce[e]&&ce[e][H]&&(ce=ce[e]),!(ve=n(this,ce,G))){te+=l?X:X/2;continue}Ue(ve)}q?(V.moveTo(te,ye),g&&A.push({coord:[te,ye],color:V.strokeStyle,pattern:d||[],width:V.lineWidth})):("l","in","e","To",(h||l)&&(xe=k.slice(-1)[0],oe?Je(te,xe,he):V.lineTo(te,xe),k.push(te,xe)),oe&&!l?Je(te,ye,he):V[l?"moveTo":"lineTo"](te,ye)),G&&(D.push({end:[te,ye],threshold:R}),ae=ce,!Y||h||l||k.push(te,R)),k.push(te,ye),q=!1,G=!1,te+=l?X:X/2,ue&&(te+=ue)}else ge=k.slice(-2),Y&&!G&&k.length&&k.push(ge[0],R),G||D.push({start:ge,threshold:R,tick:ae}),G=!0,te+=l?X:X/2,(h||l)&&k.length&&(O[Ge]=k.slice(-1)[0]),ue&&(te+=ue)}for(var Xe in Ce=null,(be=j.right)&&(Ce=be.transform),!q&&be&&((Z=E?Ce?Ce[e]:null:be[e])&&(Z[H]||0===Z[H])&&(Z=Z[H]),Se=this.pixelFromTick(be.tick,_),we=this.pixelFromTransformedValue(Z,a,p),be.tick-P[P.length-1].tick>1&&(G||(ke=k.slice(-2),Y&&k.length&&k.push(ke[0],R),D.push({start:ke,threshold:R,tick:P[P.length-1]})),G=!0),!q&&n&&(Ae=n(this,be,G))&&Ue(Ae),De=k.slice(-2),d&&d.length||((h||l)&&(V.lineTo(Se,De[1]),k.push(Se,De[1])),V[l?"moveTo":"lineTo"](Se,we)),G&&(D.push({end:[Se,we],threshold:R}),!Y||h||l||k.push(Se,R)),k.push(Se,we)),w)M.push(Xe);if(r&&r.extendToEndOfLastBar?(Me=k.slice(-2),V.lineTo(Me[0]+X,Me[1])):(h||l||this.extendLastTick||S)&&(Te=k.slice(-2),k.length&&(Fe=Te[0],_e=Te[1],S||h&&!1!==S?(Fe=this.pixelFromTick(_.dataSet.length-1,_),(l||this.extendLastTick)&&(Be.O9g(36),Fe+=Be.M9g(2,X))):l?Fe+=X:this.extendLastTick&&(Be.Y9g(36),Fe+=Be.M9g(2,X)),Fe>Te[0]&&(Pe=null,n&&(Pe=n(this,{},!0)),Pe&&Ue(Pe),V.lineTo(Fe,_e),G&&Y||k.push(Fe,_e)))),f||(g&&k.length&&(V.beginPath(),r&&r.pattern&&V.setLineDash(r.pattern),i.plotSpline(k,g,V,A)),V.stroke()),this.endClip(),!f&&r&&r.label&&ie&&("pl","ot","obj","e","ct",(Oe=ie[e])&&"object"==s(Oe)&&(Oe=Oe[H]),Ve=p.priceFormatter?p.priceFormatter(this,a,Oe,r.labelDecimalPlaces):this.formatYAxisPrice(Oe,a,r.labelDecimalPlaces),Ie=this.yaxisLabelStyle,p.yaxisLabelStyle&&(Ie=p.yaxisLabelStyle),Le="noop"==Ie?V.strokeStyle:null,He="noop"==Ie?"#FFFFFF":V.strokeStyle,this.yAxisLabels.push({src:"plot",args:[a,Ve,ie.cache[z],He,Le,V,p]})),Ee="object"==s(u)?u.color:u,t.isTransparent(Ee))for(var Ze=0;Ze<D.length;Ze+=2)if(Ne=D[Ze].start,Ze&&(Re=D[Ze-1].end),Re&&Ne[0]==Re[0]&&Ne[1]==Re[1]){if(V.beginPath(),Ye=V.lineWidth,n){if("o","b","j","ect","object"==s(ze=n(this,D[Ze].tick||{},!1))){Be.Y9g(16);var Ke=Be.M9g(14,15);Ye=ze.width*(y?2:Ke),ze=ze.color}V.strokeStyle=V.fillStyle=ze}V.lineWidth=Ye,V.arc(Ne[0],Ne[1],1,0,2*Math.PI),V.stroke(),V.fill()}}function Je(e,t,i){var a,r,n;function s(e){var t;return Be.f7H(),t=p.semiLog?p.height*(1-(Math.log(Math.max(i[e],0))/Math.LN10-p.logLow)/p.logShadow):(p.high-i[e])*p.multiplier,p.flipped?t=p.bottom-t:t+=p.top,t}V.setLineDash([]),a=s("CollatedOpen"),r=s("CollatedHigh"),n=s("CollatedLow"),V.lineTo(e,a),V.moveTo(e,r),V.lineTo(e,n),Be.f7H(),V.moveTo(e,t),k.push(e,a)}return V.globalAlpha=L,{colors:M,points:k,cache:O,gapAreas:D}},t.ChartEngine.prototype.drawMountainChart=function(e,i,a){var r,n,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,R,Y=W;if("obj","e","c","t",r=this.chart.context,i,!1,!1,null,c=null,null,null,0,g=null,!1,null,y=null,!1,null,null,1,!1,!1,!1,(A=e.chart).dataSegment,D=A.lineStyle||{},i&&"object"==s(i)||(i={style:i}),n=i.style||"stx_mountain_chart",h=i.field||A.defaultPlotField||"Close",c=i.subField||A.defaultPlotField||"Close",(g=i.gapDisplayStyle)||!1===g||(g=i.gaps),g||!1===g||(g=A.gaplines),g||(g="transparent"),u=i.yAxis||e.yAxis,o=i.reverse||!1,d=i.tension,m=i.fillStyle,p=i.width||D.width,f=i.step,y=i.pattern||D.pattern,v=i.highlight,b=i.color||D.color,x=i.baseColor||D.baseColor,l=i.colored,C=i.opacity,S=i.extendToEndOfDataSet,w=i.isComparison,k=i.returnObject,M=this.canvasStyle(n),T=u.top,(isNaN(T)||isNaN(T/T))&&(T=0),F=b||(n&&M.backgroundColor?M.backgroundColor:this.defaultColor),_=x||(n&&M.color?M.color:this.containerColor),m?r.fillStyle=m:x||M.color?(Y.O9g(16),(P=r.createLinearGradient(Y.a9g(0,"0"),T,0,u.bottom)).addColorStop(u.flipped?1:0,F),P.addColorStop(u.flipped?0:1,_),r.fillStyle=P):r.fillStyle=F,this.startClip(e.name),V=r.lineWidth,i.symbol||(c=null),i={skipProjections:!0,reverse:o,yAxis:u,gapDisplayStyle:g,step:f,highlight:v,extendToEndOfDataSet:S,isComparison:w},A.tension&&(i.tension=A.tension),(d||0===d)&&(i.tension=d),O=parseInt(M.paddingTop,10),I=b||M.borderTopColor,L=null,(l||I&&!t.isTransparent(I))&&O){(H=this.scratchContext)||("2","d",E=r.canvas.cloneNode(!0),H=this.scratchContext=E.getContext("2d")),H.canvas.height=r.canvas.height,H.canvas.width=r.canvas.width,H.drawImage(r.canvas,0,0),163271200,1481654344,N=2;for(var z=1;163271200!==Y.a8Y(z.toString(),z.toString().length,85141);z++)t.clearCanvas(r.canvas,this),N+=2;1481654344!==Y.a8Y(N.toString(),N.toString().length,63270)&&t.clearCanvas(r.canvas,this)}return t.extend(i,{panelName:e.name,direction:i.reverse?-1:1,band:h,subField:c,opacity:C}),!i.highlight&&this.highlightedDraggable&&(Y.Y9g(16),i.opacity*=Y.a9g(0,"0.3")),t.preparePeakValleyFill(this,i),(l||I&&!t.isTransparent(I))&&O&&("destina","tion-out",r.save(),Y.Y9g(3),r.lineWidth+=Y.M9g(O,2),r.globalCompositeOperation="destination-out",r.globalAlpha=1,this.plotDataSegmentAsLine(h,e,i),r.globalCompositeOperation="destination-over",r.scale(1/this.adjustedDisplayPixelRatio,1/this.adjustedDisplayPixelRatio),r.drawImage(this.scratchContext.canvas,0,0),r.restore()),r.strokeStyle=I,p?r.lineWidth=p:M.width&&parseInt(M.width,10)<=25?r.lineWidth=Math.max(1,t.stripPX(M.width)):r.lineWidth=1,y||(y=M.borderTopStyle),i.pattern=t.borderPatternToArray(r.lineWidth,y),R=a,g&&(R=this.getGapColorFunction(h,c,{color:I,pattern:i.pattern,width:r.lineWidth},g,a)),L=this.plotDataSegmentAsLine(h,e,i,R),r.lineWidth=V,this.endClip(),L.colors.length||L.colors.push(I),k?L:L.colors},t.ChartEngine.prototype.drawBaselineChart=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F=W;F.t7H();var _=e.chart,P=i.field,V=i.id,O=i.yAxis,I=_.gaplines,L=_.defaultPlotField,H=_.lineStyle,E=this.baselineHelper.get(this.getRendererFromSeries(V)).display;if(a=this.getYAxisBaseline(O).actualLevel,r=[],P||(P=L),H||(H={}),(n=i.gapDisplayStyle)||!1===n||(n=i.gaps),null!==a&&!isNaN(a)){if("stx_","ba","s","eline_down","stx_basel","ine","_","up",(s="mountain"==i.type)&&(r=this.drawMountainChart(e,{style:i.style,field:i.field,yAxis:O,gapDisplayStyle:n,colored:!0,tension:0})),o=this.pixelFromPrice(a,e,O),isNaN(o))return;for(var N in this.startClip(e.name),l=i.pattern||H.pattern,h=i.fill_color_up||this.getCanvasColor("stx_baseline_up"),c=i.fill_color_down||this.getCanvasColor("stx_baseline_down"),u=i.border_color_up||this.getCanvasColor("stx_baseline_up"),d=i.border_color_down||this.getCanvasColor("stx_baseline_down"),p=i.width||H.width||this.canvasStyle("stx_baseline_up").width,g=i.width||H.width||this.canvasStyle("stx_baseline_down").width,f=i.widthBaseline||H.width||t.stripPX(this.canvasStyle("stx_baseline").width),m=i.baselineOpacity||this.canvasStyle("stx_baseline").opacity,y={fill:h,edge:u,width:p},v={fill:c,edge:d,width:g},b={over:(x=i.yAxis.flipped)?v:y,under:x?y:v},C=!1,n||!1===n||(n=I),S=1,!i.highlight&&this.highlightedDraggable&&(S*=.3),b)"t","ra","nsparent","trans","paren","t",w=parseInt(Math.max(1,t.stripPX(b[N].width)),10),i.highlight&&(w*=2),l=t.borderPatternToArray(w,l),k={panelName:e.name,band:P,threshold:a,color:s?"transparent":b[N].fill,direction:"over"==N?1:-1,edgeHighlight:b[N].edge,edgeParameters:{pattern:l,lineWidth:w+.1,opacity:S},gapDisplayStyle:n,yAxis:i.yAxis},O&&(k.threshold=this.priceFromPixel(this.pixelFromPrice(k.threshold,e,O),e,O)),r.push(b[N].edge),A=k.color,!s&&A&&"transparent"!=A&&("ov","er",D=e.top,M=e.bottom,T=_.context.createLinearGradient(0,"over"==N?D:M,0,o),F.O9g(16),T.addColorStop(F.a9g(0,"0"),t.hexToRgba(t.colorToHex(A),60)),T.addColorStop(1,t.hexToRgba(t.colorToHex(A),10)),k.color=T,k.opacity=S),t.preparePeakValleyFill(this,_.dataSegment,k),I&&(I.fillMountain||("transpa","ren","t",this.drawLineChart(e,null,null,{color:"transparent",gapDisplayStyle:{color:this.containerColor,pattern:"solid",width:k.edgeParameters.lineWidth}})),I.color||(C=!0,I.color=this.defaultColor)),this.drawLineChart(e,null,null,{color:"transparent",width:k.edgeParameters.lineWidth}),C&&(I.color=null);E&&("2",".","1",this.plotLine(0,1,o,o,this.containerColor,"line",_.context,e,{lineWidth:"1.1"}),F.Y9g(89),this.plotLine(F.a9g("0",1498942528),1,o,o,this.getCanvasColor("stx_baseline"),"line",_.context,e,{pattern:"dotted",lineWidth:f||"2.1",opacity:m||.5*S})),this.endClip()}return{colors:r}},t.ChartEngine.prototype.plotLine=function(e){var i,a,r,n,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I=W;if(i="h",i+="ori",i+="zont",i+="al",a="n",a+="on",a+="e","number"==typeof arguments[0])for(var L in e={x0:arguments[0],x1:arguments[1],y0:arguments[2],y1:arguments[3],color:arguments[4],type:arguments[5],context:arguments[6],confineToPanel:arguments[7]},arguments[8])e[L]=arguments[8][L];if(e||(e={}),e.pattern!=a&&(r=e.x0,n=e.x1,o=e.y0,l=e.y1,h=e.color,c=e.type,u=e.context,d=e.confineToPanel,p=e.deferStroke,!0===d&&(d=this.chart.panel),null==u&&(u=this.chart.context),!(isNaN(r)||isNaN(n)||isNaN(o)||isNaN(l)))){g=0,f=this.chart.canvasHeight,m=0,y=this.right,d&&(f=d.yAxis.bottom,g=d.yAxis.top,m=d.left,y=d.right),"ray"==c&&(v=1e7,n<r&&(v=-1e7),b={x0:r,x1:n,y0:o,y1:l},n=v,l=x=t.yIntersection(b,v)),"line"!=c&&c!=i&&"vertical"!=c||(v=1e7,C=-1e7,b={x0:r,x1:n,y0:o,y1:l},x=t.yIntersection(b,v),r=C,n=v,o=t.yIntersection(b,C),l=x),I.O9g(48),S=I.a9g(0,"0.0"),I.O9g(3),w=I.a9g(1,"1.0"),I.O9g(16),k=I.a9g(r,n),I.Y9g(16),A=I.M9g(o,l);for(var H=0;H<4;H++){if(0===H&&(D=-k,I.Y9g(16),M=-I.M9g(r,m)),1==H&&(D=k,I.Y9g(16),M=I.a9g(r,y)),2==H&&(D=-A,I.O9g(16),M=-I.M9g(o,g)),3==H&&(D=A,I.O9g(16),M=I.a9g(o,f)),I.O9g(36),T=I.M9g(D,M),(l||0===l)&&0===D&&M<0)return!1;if(D<0){if(T>w)return!1;T>S&&(S=T)}else if(D>0){if(T<S)return!1;T<w&&(w=T)}}if(I.O9g(146),F=I.a9g(S,k,r),I.O9g(146),_=I.a9g(S,A,o),I.Y9g(146),P=I.M9g(w,k,r),I.O9g(146),V=I.M9g(w,A,o),l||0===l||o||0===o){if(!l&&0!==l){if(V=b.y0<b.y1?f:g,F=b.x0,P=b.x0,b.x0>y)return!1;if(b.x0<m)return!1}}else{if(_=g,V=f,F=b.x0,P=b.x0,b.x0>y)return!1;if(b.x0<m)return!1}p||(u.save(),u.beginPath()),I.O9g(16),u.lineWidth=I.a9g(0,"1.1"),h&&"object"==s(h)?(u.strokeStyle=h.color,h.opacity?u.globalAlpha=h.opacity:u.globalAlpha=1,u.lineWidth=t.stripPX(h.width)):!h||"auto"==h||t.isTransparent(h)?u.strokeStyle=this.defaultColor:u.strokeStyle=h,e.opacity&&(u.globalAlpha=e.opacity),e.lineWidth&&(u.lineWidth=e.lineWidth),e.globalCompositeOperation&&(u.globalCompositeOperation=e.globalCompositeOperation),O=t.borderPatternToArray(u.lineWidth,e.pattern),u.setLineDash(e.pattern?O:[]),u.moveTo(F,_),u.lineTo(P,V),p||(u.stroke(),u.restore())}},t.ChartEngine.prototype.rendererAction=function(e,t){var i,a,r,n,s,o,l,h,c,u;if(i=!1,!this.runPrepend("rendererAction",arguments)){for(var d in e.seriesRenderers)a="yA",a+="xis",r="o",r+="v",r+="er",r+="lay",n="_mai",n+="n_serie",n+="s",s="_m",s+="ain_",s+="series",o="u",o+="n",o+="d",o+="erlay",c=(h=(l=e.seriesRenderers[d]).params).panel,u=this.panels[c],h.overChart&&t==o||h.name==s&&"underlay"==t||h.name!=n&&"main"==t||(h.overChart||t!=r)&&u&&u.chart===e&&(u.hidden||(t==a?l.adjustYAxis():(p.apply(this),l.draw(),l.cb&&l.cb(l.colors))));this.runAppend("rendererAction",arguments)}function p(){var a,r;if(!i&&"underlay"===t&&this[a=Symbol.for("CIQ.watermark")]){-93479158,1900523671,r=2;for(var n=1;-93479158!==W.u8Y(n.toString(),n.toString().length,61789);n++)this[a].draw(e),i=!1,r+=2;1900523671!==W.u8Y(r.toString(),r.toString().length,7594)&&(this[a].draw(e),i=!0)}}W.f7H(),p.apply(this)},t.ChartEngine.prototype.drawSeries=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b;if(n="dr",n+="awS",n+="eries",!this.runPrepend(n,arguments)){for(var C in e.dataSegment,s=null,i||(i=e.series),i)if(o="m",o+="ountain",h=(l=(s=i[C]).parameters).panel?this.panels[l.panel]:e.panel,c=l.color,l.width,u=l.field,h){if(d=l.yAxis=a||h.yAxis,c||(c=d.textStyle||this.defaultColor),"auto"==c&&(c=this.defaultColor),u||(u=e.defaultPlotField),p=l.subField||e.defaultPlotField||"Close",l._rawExtendToEndOfDataSet||!1===l._rawExtendToEndOfDataSet||(l._rawExtendToEndOfDataSet=l.extendToEndOfDataSet),e.animatingHorizontalScroll?l.extendToEndOfDataSet=!1:l.extendToEndOfDataSet=l._rawExtendToEndOfDataSet,g=l.colorFunction,(s.highlight||s.parameters.highlight)&&(l.highlight=!0),f={colors:[]},r){if(r.params.highlight&&(l.highlight=!0),l.hidden)continue;f=r.drawIndividualSeries(e,l)||f}else f=l.type==o?this.drawMountainChart(h,t.extend({returnObject:!0},l),g):this.drawLineChart(h,l.style,g,t.extend({returnObject:!0},l));s.yValueCache=f.cache,(m=e.dataSegment[e.dataSegment.length-1])&&(y=!l.skipTransform&&e.transformFunc&&d==e.panel.yAxis,m[u]||0===m[u]||(m=this.getPreviousBar(e,u,e.dataSegment.length-1)),y&&m&&m.transform&&(m=m.transform)),!1!==l.displayFloatingLabel&&this.mainSeriesRenderer!=r&&m&&!d.noDraw&&((v=m[u])&&(v=v[p]||0===v[p]?v[p]:v.iqPrevClose),x=d.priceFormatter?d.priceFormatter(this,h,v):this.formatYAxisPrice(v,h,null,d),this.yAxisLabels.push({src:"series",args:[h,x,this.pixelFromTransformedValue(v,h,d),t.hexToRgba(t.colorToHex(c),parseFloat(l.opacity)),null,null,d]})),e.legend&&l.useChartLegend&&(e.legend.colorMap||(e.legend.colorMap={}),(b=l.display)||(b=l.symbol),e.legend.colorMap[C]={color:f.colors,display:b,isBase:r==this.mainSeriesRenderer})}this.runAppend("drawSeries",arguments)}}},z=function(e){var t;(t=e.CIQ).ChartEngine.prototype.scrollTo=function(e,t,i){var a,r;(a=this.swipe).end=!0,a.amplitude=a.target=(t-e.scroll)*this.layout.candleWidth,a.timeConstant=100,a.timestamp=Date.now(),a.scroll=e.scroll,a.chart=e,a.cb=i,W.f7H(),r=this,requestAnimationFrame((function(){W.f7H(),r.autoscroll()}))},t.ChartEngine.prototype.autoscroll=function(){var e,t,i,a;W.f7H(),e=this,(t=this.swipe).amplitude&&(t.elapsed=Date.now()-t.timestamp,i=-t.amplitude*Math.exp(-t.elapsed/t.timeConstant),a=(t.target+i)/this.layout.candleWidth,t.chart.scroll=t.scroll+Math.round(a),this.draw(),this.updateChartAccessories(),i>.5||i<-.5?requestAnimationFrame((function(){e.autoscroll()})):(this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),t.cb&&t.cb()))}},B=function(e){var t;(t=e.CIQ).ChartEngine.prototype.drawXAxis=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w=W;if(a=[e,i],!this.runPrepend("drawXAxis",a)&&i&&!e.xAxis.noDraw){r=this.getBackgroundCanvas().context,this.canvasFont("stx_xaxis",r),n=this.getCanvasFontSize("stx_xaxis"),r.textAlign="center",r.textBaseline="middle",o=r.measureText("   ").width;for(var k=0;k<i.length;k++){s=i[k],l=r.measureText(s.text).width,w.O9g(12),h=Math.max(w.a9g(o,l),e.xAxis.minimumLabelWidth),s.hz=Math.floor(s.hz+this.micropixels)+.5,w.O9g(94);var A=w.a9g(5,40,9,69,17);s.left=s.hz-h/A,w.Y9g(159);var D=w.M9g(16,20,14,2,13);s.right=s.hz+h/D,w.Y9g(160);var M=w.a9g(11,3,4,11,20);s.unpaddedRight=s.hz+l/M}if(c=!0===this.xAxisAsFooter?this.chart.canvasHeight:e.panel.bottom,w.O9g(16),u=this.whichPanel(w.a9g(1,c))){for(var T in this.adjustYAxisHeightOffset(u,u.yAxis),d=e.xAxis.displayBorder||null===e.xAxis.displayBorder,!0===this.axisBorders&&(d=!0),!1===this.axisBorders&&(d=!1),p=c-this.xaxisHeight+n,d&&(p+=3),g=!0,this.panels)if("str","oke","s","t","rok","e",!(f=this.panels[T]).hidden&&!1!==f.shareChartXAxis&&(w.O9g(114),m=w.M9g(f,u),y=f.yAxis)){v=-Number.MAX_VALUE,x=Number.MAX_VALUE;for(var F=0;F<i.length;F++)if("boundary"==i[F].grid){x=i[F].left;break}r.save(),r.beginPath(),r.rect(f.left,f.top+(g?0:1),f.width,f.height-1),r.clip(),g=!1,(b=new t.Plotter).newSeries("line","stroke",this.canvasStyle("stx_grid")),b.newSeries("boundary","stroke",this.canvasStyle("stx_grid_dark")),b.newSeries("border","stroke",this.canvasStyle("stx_grid_border"));for(var _=0;_<i.length;_++){if(s=i[_],_==F){for(F++;F<i.length;F++)if("b","oun","d","ary","boundary"==i[F].grid){x=i[F].left;break}F>=i.length&&(F=-1,x=Number.MAX_VALUE)}else if(s.right>x)continue;if(!(s.left<v)){if(s.left<0){if(x<s.right)continue;if(F>=i.length&&i[_+1]&&i[_+1].left<s.right)continue}v=s.right,Math.floor(s.left)<=f.right&&(Math.floor(s.hz)>f.left&&(e.xAxis.displayGridLines&&(b.moveTo(s.grid,s.hz,y.top),b.lineTo(s.grid,s.hz,y.bottom)),m&&d&&("b","orde","r",b.moveTo("border",s.hz,y.bottom+.5),b.lineTo("border",s.hz,y.bottom+6))),m&&s.right>f.left&&("stx_xaxis_dar","k",this.canvasColor("boundary"==s.grid?"stx_xaxis_dark":"stx_xaxis",r),r.fillText(s.text,s.hz,p)))}}d&&("bord","er",C=Math.round(y.bottom)+.5,S=Math.round(f.right)+.5,b.moveTo("border",f.left,C),b.lineTo("border",S,C)),b.draw(r),r.restore()}r.textAlign="left",this.runAppend("drawXAxis",a)}}},t.ChartEngine.prototype.createTickXAxisWithDates=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,R,Y,z,B,U,j,Q,q,G,X,Z,K,J,$,ee,te=W;function ie(e){var i,a;if(A==t.MILLISECOND)i=e.getMilliseconds(),a=e.getSeconds();else if(A==t.SECOND)i=e.getSeconds(),a=e.getMinutes();else if(A==t.MINUTE)i=e.getMinutes(),a=e.getHours();else if(A==t.HOUR){te.O9g(148);var r=te.a9g(24,9,4);i=e.getHours()+e.getMinutes()/r,a=e.getDate()}else if(A==t.DAY){i=e.getDate(),te.O9g(161);var n=te.M9g(151,1,9,19);a=e.getMonth()+"1"*n}else if(A==t.MONTH){te.O9g(143);var s=te.a9g(8,7,8,4);i=e.getMonth()+s,a=e.getFullYear()}else if(A==t.YEAR){i=e.getFullYear(),te.O9g(43);var o=te.M9g(7,11,2,998,21110);a=e.getFullYear()+o}else i=e.getFullYear(),a=0;return[i,a]}e||(e=this.chart),e.xaxis=[],a=e.context,r=[t.MILLISECOND,t.SECOND,t.MINUTE,t.HOUR,t.DAY,t.MONTH,t.YEAR],this.timeIntervalMap||("3","0","1","0:00:00","10",":00:00.000",n=a.measureText.bind(a),(i={})[t.MILLISECOND]={arr:[1,2,5,10,20,50,100,250,500],minTimeUnit:0,maxTimeUnit:1e3,measurement:n("10:00:00.000")},i[t.SECOND]={arr:[1,2,3,4,5,6,10,12,15,20,30],minTimeUnit:0,maxTimeUnit:60,measurement:n("10:00:00")},i[t.MINUTE]={arr:[1,2,3,4,5,6,10,12,15,20,30],minTimeUnit:0,maxTimeUnit:60,measurement:n("10:00")},i[t.HOUR]={arr:[1,2,3,4,6,12],minTimeUnit:0,maxTimeUnit:24,measurement:n("10:00")},i[t.DAY]={arr:[1,2,7,14],minTimeUnit:1,maxTimeUnit:32,measurement:n("30")},i[t.MONTH]={arr:[1,2,3,6],minTimeUnit:1,maxTimeUnit:13,measurement:n("Mar")},i[t.YEAR]={arr:[1,2,3,5],minTimeUnit:1,maxTimeUnit:2e7,measurement:n("2000")},i[t.DECADE]={arr:[10],minTimeUnit:0,maxTimeUnit:2e6,measurement:n("2000")},this.timeIntervalMap=i),i=this.timeIntervalMap,te.Y9g(24),s=[31,28,te.a9g("31",2147483647),30,31,te.M9g(30,"30",te.Y9g(48)),31,31,30,31,30,31],o=this.layout.periodicity,l=this.layout.interval,h=e.maxTicks,c=e.dataSegment,u=e.xAxis,d=c.length,p=u.idealTickSizePixels||u.autoComputedTickSizePixels,g=this.chart.width/p;for(var ae=0;ae<d&&!c[ae];ae++);if(ae==d)return[];switch(f=0,m=this.layout.timeUnit||"minute",isNaN(l)&&(m=l,te.Y9g(24),l=te.M9g("1",2147483647)),y=0,m){case"millisecond":y=1;break;case"second":te.Y9g(90),y=te.a9g(0,"1000"),r.splice(0,1);break;case"minute":te.Y9g(89),y=te.M9g("60000",394293088),te.Y9g(24),r.splice(0,te.a9g("2",2147483647));break;case"day":y=864e5,r.splice(0,4);break;case"week":te.Y9g(3),y=te.M9g(7,864e5),r.splice(0,4);break;case"month":te.O9g(3),y=te.a9g(30,864e5),te.O9g(16),r.splice(te.M9g(0,"0"),5)}for(v=this.layout.aggregationType,!y||v&&"ohlc"!=v&&"heikinashi"!=v?f=c[d-1].DT.getTime()-c[ae].DT.getTime():(te.Y9g(162),f=te.a9g(y,l,o,d)),0===f?e.market?((x=e.market.newIterator({begin:new Date,interval:"day",periodicity:1})).next(),b=x.previous(),f=((x=this.standardMarketIterator(b,null,e)).next().getTime()-b.getTime())*h):(te.Y9g(163),f=te.M9g(60,1e3,h,60,24)):(te.Y9g(164),f=te.M9g(d,h,f)),te.Y9g(36),C=te.a9g(g,f),S=0;S<r.length&&!(r[S]>C+.001);S++);if(C<1&&console.log("createTickXAxisWithDates: Assertion error. msPerGridLine < 1. Make sure your masterData has correct time stamps for the active periodicity and it is sorted from OLDEST to NEWEST."),S==r.length)S--;else if(S>0){te.Y9g(16),k=i[w=r[te.M9g(1,S)]].arr,te.O9g(31);var re=te.M9g(16,529,18,15);C-w*k[k.length-re]<r[S]-C&&S--}for(A=u.timeUnit||r[S],u.activeTimeUnit=A,M=(D=i[A]).arr,S=0;S<M.length&&!(M[S]*A>C);S++);for((S==M.length||C-M[S-1]*A<M[S]*A-C)&&S--,2*D.measurement.width<this.layout.candleWidth&&(S=0),T=u.timeUnitMultiplier||M[S],F=[],_=this.layout.candleWidth,S=0;S<=h&&!c[S];S++);if(S>0&&S<h){e.market&&(P=this.standardMarketIterator(c[S].DT,u.adjustTimeZone?this.displayZone:null));for(var ne=S;ne>0;ne--)V={},!P||e.lineApproximation&&_<1||(V.DT=P.previous()),e.xaxis.unshift(V)}for(O=0,I=D.minTimeUnit,te.Y9g(90),L=-te.a9g(0,"1"),H=!0,E=ie(c[S].DT),R=0,Y=0,z=c[S].tick;R<z&&(N=ie(this.chart.dataSet[z-R].DT))[1]==E[1];R++)E=N;for(;Y<this.chart.dataSet.length-z&&(N=ie(this.chart.dataSet[z+Y].DT))[1]==E[1];Y++)E=N;for(B=null,S=0;S<h+Y;S++){if((U=c[S])?R&&(U=e.dataSet[U.tick-R]):U=e.xaxis[S],S<d){if(O=(j=U).displayDate&&u.adjustTimeZone?j.displayDate:j.DT,S&&!R&&e.segmentImage){Q=e.segmentImage[S],te.Y9g(165);var se=te.M9g(18,182,18,0,11);_=(Q.leftOffset-Q.candleWidth/se)/S}}else if(e.market){if("tick"==this.layout.interval&&!u.futureTicksInterval)break;if(e.lineApproximation&&_<1)break;if(!u.futureTicks)break;B||(B=this.standardMarketIterator(c[d-1].DT,u.adjustTimeZone?this.displayZone:null)),O=B.next()}if(O){if(q=null,te.Y9g(16),X=te.M9g(R,S),(Z={DT:O}).data=S<d?U:null,R?(R--,S--):!e.xaxis[S]&&S<h&&e.xaxis.push(Z),K=(E=ie(O))[0],L!=(J=E[1])){K<=I&&(I=D.minTimeUnit),te.O9g(1);var oe=te.M9g(2,0,3);if(G=e.left+X*_-oe,q=null,A==t.HOUR||A==t.MINUTE&&L>J){if(this.internationalizer)q=this.internationalizer.monthDay.format(O);else{te.Y9g(12);te.M9g(1764,252);te.Y9g(12);var le=te.M9g(2362,788);te.Y9g(16);te.a9g(452,904);te.Y9g(25);var he=te.M9g(3058,27540,13769,2);te.Y9g(25);te.M9g(2909,2903,2900,3);te.O9g(166);var ce=te.a9g(14,119,12,12,8);te.Y9g(42);var ue=te.a9g(1512,9,3,1367);q=O.getMonth()+1+(673.24==le?850.81:866.59>he?760.52!="382.71"*ce||ue:"/")+O.getDate()}u.formatter&&(q=u.formatter(O,"boundary",t.DAY,1,q))}else A==t.DAY?L>J?(q=O.getFullYear(),u.formatter&&("b","ou","n","dary",q=u.formatter(O,"boundary",t.YEAR,1,q))):(q=t.monthAsDisplay(O.getMonth(),!1,this),u.formatter&&("bou","ndar","y",q=u.formatter(O,"boundary",t.MONTH,1,q))):A==t.MONTH&&(q=O.getFullYear(),u.formatter&&(q=u.formatter(O,"boundary",t.YEAR,1,q)));q&&-1!=L&&F.push(new t.ChartEngine.XAxisLabel(G,"boundary",q))}if(K>=I){if(I==D.minTimeUnit&&J==L)continue;$=new Date(+O),te.O9g(16);var de=te.a9g(7,9);te.O9g(119);var pe=te.a9g(36,30,7,11);te.O9g(167);var ge=te.a9g(13,15,11,207);if(G=e.left+(de*X+1)*_/pe-ge,(ee=Math.floor(K/T)*T)<K&&("week"==this.layout.interval?ee=K:(te.O9g(168),G-=te.M9g(1093585280,_,"2"))),A==t.MILLISECOND?$.setMilliseconds(ee):A==t.SECOND?($.setMilliseconds(0),$.setSeconds(ee)):A==t.MINUTE?($.setMilliseconds(0),$.setSeconds(0),$.setMinutes(ee)):A==t.HOUR?($.setMilliseconds(0),$.setSeconds(0),$.setMinutes(0),$.setHours(ee)):A==t.DAY?$.setDate(Math.max(1,ee)):A==t.MONTH?($.setDate(1),te.Y9g(16),$.setMonth(te.M9g(1,ee))):(t.YEAR,$.setDate(1),$.setMonth(0)),te.Y9g(12),I=te.a9g(T,ee),A==t.DAY){te.Y9g(19);var fe=te.M9g(10,5,3,2);D.maxTimeUnit=s[$.getMonth()]+fe}if(I>=D.maxTimeUnit&&(I=D.minTimeUnit),L=J,H&&ee<K){H=!1;continue}q=A==t.DAY?$.getDate():A==t.MONTH?t.monthAsDisplay($.getMonth(),!1,this):A==t.YEAR||A==t.DECADE?$.getFullYear():t.timeAsDisplay($,this,A),u.formatter&&(q=u.formatter($,"line",A,T,q)),F.push(new t.ChartEngine.XAxisLabel(G,"line",q))}}}return F}},U=function(e){var t;W.f7H(),(t=e.CIQ).ChartEngine.prototype.createYAxis=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w=W;if(a="createY",a+="A",a+="x",a+="is",!this.runPrepend(a,arguments)){if(r=e.chart,n=e.name==r.name,i||(i={}),i.noChange=!1,s=i.yAxis?i.yAxis:e.yAxis,w.t7H(),t.ChartEngine.enableCaching&&s.high==e.cacheHigh&&s.low==e.cacheLow){o=r.dataSet.length-r.scroll-1,w.Y9g(12);var k=w.M9g(1,0);l=o+r.maxTicks+k,e.cacheLeft=o,e.cacheRight=l,i.noChange=!0}else e.cacheLeft=1e6,e.cacheRight=-1,e.cacheHigh=s.high,e.cacheLow=s.low;if(h=r.xAxis.idealTickSizePixels?r.xAxis.idealTickSizePixels:r.xAxis.autoComputedTickSizePixels,s.goldenRatioYAxis&&s.idealTickSizePixels!=h/1.618&&(i.noChange=!1),!i.noChange){if(this.adjustYAxisHeightOffset(e,s),u=s.height=s.bottom-s.top,d=(s.high-s.low)/(u-s.zoom),!s.semiLog)if(i.ground)s.high=s.high+s.zoom*d;else{w.Y9g(97);var A=w.a9g(3,7,8,6);s.high=s.high+(s.zoom/A+s.scroll)*d,w.O9g(40);var D=w.a9g(0,20,11,7);s.low=s.low-(s.zoom/D-s.scroll)*d}(s.min||0===s.min)&&(s.low=s.min),(s.max||0===s.max)&&(s.high=s.max),s.shadow=s.high-s.low,!s.semiLog||this.activeDrawing&&"projection"==this.activeDrawing.name||(p=function(){var e;s.logHigh=Math.log(s.high)/Math.LN10,e=Math.max(s.low,1e-9),s.logLow=Math.log(e)/Math.LN10,s.low<=0&&(s.logLow=0),s.logShadow=s.logHigh-s.logLow},s.semiLog&&p(),g=s.height/(s.height-s.zoom),s.flipped?(s.high=this.transformedPriceFromPixel(s.bottom+g*(s.zoom/2+s.scroll),e,s),s.low=this.transformedPriceFromPixel(s.top-g*(s.zoom/2-s.scroll),e,s)):(s.high=this.transformedPriceFromPixel(s.top-g*(s.zoom/2+s.scroll),e,s),s.low=this.transformedPriceFromPixel(s.bottom+g*(s.zoom/2-s.scroll),e,s)),s.shadow=s.high-s.low,s.semiLog&&p()),s.goldenRatioYAxis&&n&&s==e.yAxis?(w.Y9g(169),s.idealTickSizePixels=w.a9g("1.618",h,0),0===s.idealTickSizePixels&&(f=this.getCanvasFontSize("stx_yaxis"),w.Y9g(3),s.idealTickSizePixels=w.M9g(5,f))):s.idealTickSizePixels||(f=this.getCanvasFontSize("stx_yaxis"),n?(w.O9g(3),s.idealTickSizePixels=w.a9g(5,f)):(w.Y9g(3),s.idealTickSizePixels=w.a9g(2,f))),m=Math.round(u/s.idealTickSizePixels),c=i.range?i.range[1]-i.range[0]:s.shadow,w.Y9g(36),s.priceTick=Math.floor(w.M9g(m,c)),y=1;for(var M=0;M<10&&!(s.priceTick>0);M++)y*=10,s.priceTick=Math.floor(c/m*y)/y;if(10==M&&(s.priceTick=1e-8),s.priceTick=Math.round(c/m*y)/y,v=Math.round(c/s.priceTick),i.range&&v<c&&!s.noEvenDivisorTicks){for(;v>=1&&c%v!=0;)v--;w.Y9g(36),s.priceTick=w.a9g(v,c)}if(s.minimumPriceTick){x="stx_ya",x+="xis",b=s.minimumPriceTick,f=this.getCanvasFontSize(x);for(var T=0;T<100&&(w.Y9g(36),u/w.a9g(b,c)<2*f);T++)b+=s.minimumPriceTick;T<100&&(s.priceTick=b)}}if((s.priceTick<=0||s.priceTick===1/0)&&(s.priceTick=1),s.multiplier=s.height/s.shadow,s.multiplier==1/0&&(s.multiplier=0),s.decimalPlaces||0===s.decimalPlaces)s.printDecimalPlaces=s.decimalPlaces;else if(n){C=0;for(var F=0;F<e.yAxis.shadowBreaks.length;F++)S=e.yAxis.shadowBreaks[F],e.yAxis.shadow<S[0]&&(C=S[1]);s.printDecimalPlaces=C}else s.printDecimalPlaces=null;this.runAppend("createYAxis",arguments)}},t.ChartEngine.prototype.drawYAxis=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,R,Y,z,B,U,j,Q,q,G=W;if(a="drawY",a+="Ax",a+="is",i||(i={}),r=i.yAxis?i.yAxis:e.yAxis,!e.hidden&&!r.noDraw&&r.width){if(t.Comparison&&r.priceFormatter==t.Comparison.priceFormat||((n=r.fractional)?(r.originalPriceFormatter||(r.originalPriceFormatter={func:r.priceFormatter}),n.resolution||(n.resolution=r.minimumPrice),n.formatter||(n.formatter="'"),r.priceFormatter||(r.priceFormatter=function(e,t,i){var a,r,s,o;if(n){a="",i<0&&(a="-",i=Math.abs(i)),r=Math.floor(Math.round(i/n.resolution)*n.resolution),s=Math.round((i-r)/n.resolution),o=Math.floor(s),G.O9g(17);var l=G.a9g(140,16,2230);G.Y9g(12);var h=G.M9g(1175,65);G.Y9g(160);G.a9g(19,128,150,131,3);G.Y9g(35);var c=G.a9g(1133,7,3372,14,4);G.O9g(56);var u=G.M9g(25200,6300,3);G.O9g(82);var d=G.M9g(2524,1,229);G.O9g(59);var p=G.M9g(518,7,3609,3626);G.O9g(16);var g=G.M9g(10,3140);G.O9g(1);var f=G.a9g(14,160,2576);G.Y9g(120);G.a9g(10,7,3093,3090,310);G.O9g(14);var m=G.a9g(19,3971,4256);G.Y9g(42);var y=G.M9g(6696,6,17,5614);G.O9g(135),G.t7H();var v=G.M9g(1229,1229,13,1,1232);return a+r+n.formatter+(o<l?2790>=h?30.85>c?u:d==p?g:"0":f:"")+o+(s-o>=.5?7060!=m?"+":710.49!==y?v<=122.98?"x":"d":"v":"")}})):r.originalPriceFormatter&&(r.priceFormatter=r.originalPriceFormatter.func,r.originalPriceFormatter=null)),s=this.colorOrStyle(r.textStyle||"stx_yaxis"),l=0,(o=this.highlightedDraggable)&&this.yaxisMatches(o,r)?l=.15:r.highlight&&(G.Y9g(16),l=G.a9g(0,"0.1")),l&&(h=s.constructor==String?s:s.color,r.setBackground(this,{color:h,opacity:l})),r.pretty)return this.drawYAxisPretty(e,i);if(!this.runPrepend(a,arguments)){if(!i.noDraw&&!r.noDraw){if(!(c=r.yAxisPlotter)||!i.noChange){if(u="f",u+="il",u+="l",d="stx_",d+="gr",d+="id",c=r.yAxisPlotter=new t.Plotter,p=e.chart,g=e.name==p.name&&r.name===e.yAxis.name,!r.priceTick)return;if(f=r.shadow,m=i.range){G.O9g(61);var X=G.M9g(19,3,3,18);f=m[X]-m[0]}if(y=f/r.priceTick,y=Math.round(y),r.semiLog){b=666717872,C=1912727371,S=2;for(var Z=1;G.u8Y(Z.toString(),Z.toString().length,38741)!==b;Z++)v=Math.log(this.valueFromPixel(r.flipped?r.top:r.bottom,e))/Math.LN10,x=(r.logHigh-r.logLow)/y,G.O9g(90),S+=G.a9g(0,"2");G.u8Y(S.toString(),S.toString().length,78074)!==C&&(v=Math.log(this.valueFromPixel(r.flipped?r.top:r.bottom,e))%Math.LN10,x=r.logHigh%r.logLow-y)}if(c.newSeries("grid","stroke",this.canvasStyle(d)),c.newSeries("text",u,s),c.newSeries("border","stroke",this.canvasStyle("stx_grid_border")),w=0,k=m?m[1]:r.high,A=m?m[0]:r.low,D=null===r.displayBorder?p.panel.yAxis.displayBorder:r.displayBorder,!1===this.axisBorders&&(D=!1),!0===this.axisBorders&&(D=!0),F=(T=p.dynamicYAxis)?r.width:NaN,M="left"==(_=this.getYAxisCurrentPosition(r,e))?r.left+r.width:r.left,P=Math.round(M)+.5,V=D?3:0,"left"==_&&(V=D?-3:0),g)if(r.shadow<1){G.O9g(4);var K=G.a9g(9,9,1,2);w=(parseInt(A/r.priceTick,10)+K)*r.priceTick-A}else w=r.priceTick-Math.round(A%r.priceTick*e.chart.roundit)/e.chart.roundit;else w=k%r.priceTick;O=this.getCanvasFontSize("stx_yaxis");for(var J=0;J<y;J++)I="t",I+="e",I+="x",I+="t",L="l",L+="eft",r.semiLog?(G.Y9g(146),E=G.a9g(J,x,v),H=Math.pow(10,E)):H=g?A+J*r.priceTick+w:k-J*r.priceTick-w,N=this.pixelFromTransformedValue(H,e,r),(R=Math.round(N)+.5)+O/2>e.bottom||R-O/2<e.top||Math.abs(R-r.bottom)<1||(r.flipped&&(R=r.top+r.bottom-R),r.displayGridLines&&(Y="g",Y+="r",Y+="i",Y+="d",z="g",z+="ri",z+="d",c.moveTo(z,e.left+1,R),c.lineTo(Y,e.right-1,R)),D&&(G.Y9g(16),c.moveTo("border",G.M9g(.5,P),R),G.O9g(12),c.lineTo("border",G.M9g(V,P),R)),H=r.priceFormatter?r.priceFormatter(this,e,H):this.formatYAxisPrice(H,e,null,r),B=r.textBackground?this.containerColor:null,U=3,G.O9g(26),j=G.a9g(M,U,V),_==L?(j=r.left+U,!1!==r.justifyRight&&(j=r.left+r.width+V-U)):r.justifyRight&&(j=M+r.width),c.addText(I,H,j,R,B,null,O),T&&(F=Math.max(F,p.context.measureText(H).width+Math.abs(V)+U)));if(D&&(Q=Math.round(r.bottom)+.5,c.moveTo("border",P,r.top),c.lineTo("border",P,Q),c.draw(this.getBackgroundCanvas(p).context,"border")),T&&F>r.width)throw r._dynamicWidth=F,this.calculateYAxisPositions(),new Error("reboot draw");if(!T&&r._dynamicWidth)throw q="reboot d",q+="raw",this.resetDynamicYAxis({chartName:p.name}),new Error(q)}r==e.yAxis&&this.plotYAxisGrid(e)}this.runAppend("drawYAxis",arguments)}}},t.ChartEngine.prototype.drawYAxisPretty=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,R,Y,z,B,U,j,Q,q,G,X,Z,K,J,$=W;if(a="drawYA",a+="x",a+="is",r="dr",r+="awYAxi",r+="s",$.f7H(),!this.runPrepend(r,arguments)&&(i||(i={}),n=i.yAxis?i.yAxis:e.yAxis,!e.hidden&&!n.noDraw&&n.width)){if(!i.noDraw){if(!(s=n.yAxisPlotter)||!i.noChange){if(o="st",o+="x_yaxis",l="le",l+="ft",h="g",h+="r",h+="i",h+="d",s=n.yAxisPlotter=new t.Plotter,c=e.chart,!n.priceTick)return;if(isNaN(n.high)||isNaN(n.low))return;u=n.shadow,i.range&&(u=i.range[1]-i.range[0]),d=n.height/n.idealTickSizePixels,d=Math.round(d),p=n.textStyle||"stx_yaxis",s.newSeries(h,"stroke",this.canvasStyle("stx_grid")),s.newSeries("text","fill",this.colorOrStyle(p)),s.newSeries("border","stroke",this.canvasStyle("stx_grid_border")),f=(g=i.range)?g[1]:n.high,m=g?g[0]:n.low,y=null===n.displayBorder?c.panel.yAxis.displayBorder:n.displayBorder,!1===this.axisBorders&&(y=!1),!0===this.axisBorders&&(y=!0),b=(x=c.dynamicYAxis)?n.width:NaN,v="left"==(C=this.getYAxisCurrentPosition(n,e))?n.left+n.width:n.left,S=Math.round(v)+.5,w=y?3:0,C==l&&(w=y?-3:0),k=this.getCanvasFontSize(o),D=(A=n.increments).length,M=0,T=1,F=0,$.O9g(2),_=$.a9g(1726264576,"0"),$.O9g(16),P=$.a9g(0,"0"),V=Number.MAX_VALUE;for(var ee=0;ee<100;ee++){$.O9g(57);var te=$.M9g(3,5,1,25,8);if(F=A[M]*Math.pow(te,P),$.O9g(36),T=Math.floor($.a9g(F,u)),$.O9g(16),(O=Math.abs($.a9g(T,d)))>V)break;if(V=O,T==d){_=F;break}T>d?++M>=D&&(M=0,P++):--M<0&&($.Y9g(16),M=$.M9g(1,D),P--),_=F}if(I=Math.ceil(m/_)*_,L=0,n.bottom-this.pixelFromTransformedValue(I,e,n)>n.idealTickSizePixels&&n.semiLog&&n.prettySemiLog){for(H=Math.ceil(m),E=0;I-H>=1e4&&E<=15;)I/=10,H/=10,E++;for(I=Math.ceil(I),H=Math.ceil(H);H<I&&I%H!=0;++H);I*=Math.pow(10,E),(H*=Math.pow(10,E))<I&&(I===_&&(_=H,L=H),I=H)}if(n.height>n.zoom){$.Y9g(24),N=$.a9g("0",2147483647),R=Number.MAX_VALUE,c.context.save(),this.canvasFont("stx_yaxis",c.context);for(var ie=0;ie<100&&(Y="t",Y+="e",Y+="x",Y+="t",$.O9g(146),!((z=$.M9g(N,_,I))>f));ie++)_+=L,N++,R-(B=this.pixelFromTransformedValue(z,e,n))<k+1&&L>0?($.Y9g(24),ie=N=$.a9g("0",2147483647),R=Number.MAX_VALUE,_=L,L*=2,s.reset()):(R=B,(U=Math.round(B)+.5)+k/2>e.bottom||U-k/2<e.top||Math.abs(U-n.bottom)<1||(n.displayGridLines&&(j="gr",j+="i",j+="d",s.moveTo("grid",e.left+1,U),s.lineTo(j,e.right-1,U)),y&&(Q="bo",Q+="rder",q="b",q+="orde",q+="r",$.O9g(16),s.moveTo(q,$.M9g(.5,S),U),$.O9g(12),s.lineTo(Q,$.M9g(w,S),U)),z=n.priceFormatter?n.priceFormatter(this,e,z):this.formatYAxisPrice(z,e,null,n),G=n.textBackground?this.containerColor:null,X=3,$.Y9g(26),Z=$.a9g(v,X,w),"left"==C?(Z=n.left+3,!1!==n.justifyRight&&(Z=n.left+n.width+w-X)):n.justifyRight&&(Z=v+n.width),s.addText(Y,z,Z,U,G,null,k),x&&($.O9g(12),K=$.a9g(" ",z),b=Math.max(b,c.context.measureText(K).width+Math.abs(w)+X))));c.context.restore(),ie>=100&&console.log("drawYAxisPretty: assertion error. zz reached 100")}if(y&&(J=Math.round(n.bottom)+.5,s.moveTo("border",S,n.top),s.lineTo("border",S,J),s.draw(this.getBackgroundCanvas(c).context,"border")),x&&b>n.width)throw n._dynamicWidth=b,this.calculateYAxisPositions(),new Error("reboot draw");if(!x&&n._dynamicWidth)throw this.resetDynamicYAxis({chartName:c.name}),new Error("reboot draw")}n==e.yAxis&&this.plotYAxisGrid(e)}this.runAppend(a,arguments)}}},function(e){var t;e.timezoneJS={},t=2,W.t7H();for(var i=1;1745322136!==W.a8Y(i.toString(),i.toString().length,72890);i++)e.CIQ=a,t+=2;function a(){}2109835607!==W.u8Y(t.toString(),t.toString().length,31871)&&(e.CIQ=a),a.inheritsFrom=function(e,t,i){var a;W.f7H(),a=t.prototype||Object.getPrototypeOf(t),e.prototype=!1!==i&&"function"===s(t)?new t:Object.create(a),Object.defineProperties(e.prototype,{constructor:{configurable:!0,enumerable:!1,value:e,writable:!0},parent:{configurable:!0,enumerable:!1,value:a,writable:!0}})},a.extend=function(e,t,i){var r,n;for(r in t)e!==(n=t[r])&&void 0!==n&&(null===n||!0===i?e[r]=n:n.constructor==Array?e[r]=n.slice():n.constructor==Object?e[r]=a.extend("object"===s(e[r])&&null!==e[r]?e[r]:{},n):e[r]=n);return W.f7H(),e},a.activateImports=function(){var t;t=this,W.t7H(),t.activatedImports||(t.activatedImports={});for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];a.forEach((function(i){W.f7H(),"function"==s(i)&&(i.__guid in t.activatedImports||(i.__guid=t.uniqueID(!0),t.activatedImports[i.__guid]=i.__name||i.name,i(e)))}))}}(j={}),h(),c(j),u(j),d(j),p(j),g(j),f(j),m(j),y(j),v(j),x(j),b(j),C(j),S(j),w(j),k(j),W.f7H(),A(j),D(j),M(j),T(j),F(j),_(j),P(j),V(j),O(j),I(j),L(j),H(j),E(j),N(j),R(j),Y(j),z(j),B(j),U(j);var Q=j.CIQ,q=j.SplinePlotter,G=j.timezoneJS,X=j.$$,Z=j.$$$}).call(this,i(37))},344:function(e,t,i){"use strict";(function(e){i.d(t,"e",(function(){return s})),i.d(t,"f",(function(){return o})),i.d(t,"g",(function(){return l})),i.d(t,"h",(function(){return h})),i.d(t,"i",(function(){return c})),i.d(t,"j",(function(){return u})),i.d(t,"k",(function(){return d})),i.d(t,"l",(function(){return p})),i.d(t,"m",(function(){return g})),i.d(t,"p",(function(){return f})),i.d(t,"q",(function(){return m})),i.d(t,"s",(function(){return y})),i.d(t,"t",(function(){return v})),i.d(t,"u",(function(){return x})),i.d(t,"v",(function(){return b})),i.d(t,"w",(function(){return C})),i.d(t,"x",(function(){return S})),i.d(t,"y",(function(){return w})),i.d(t,"z",(function(){return k})),i.d(t,"A",(function(){return A})),i.d(t,"C",(function(){return D})),i.d(t,"D",(function(){return M})),i.d(t,"n",(function(){return T})),i.d(t,"o",(function(){return F})),i.d(t,"r",(function(){return _})),i.d(t,"E",(function(){return P})),i.d(t,"F",(function(){return V}));var a=i(343);i.d(t,"c",(function(){return a.c})),i.d(t,"d",(function(){return a.d})),i.d(t,"B",(function(){return a.e})),i.d(t,"a",(function(){return a.a})),i.d(t,"b",(function(){return a.b}));var r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O;function I(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}(e,t)||H(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){if(e){if("string"==typeof e)return E(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function N(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(){}Y[450668]=function(){for(var e=2;9!==e;)switch(e){case 5:var t;try{for(var i=2;6!==i;)switch(i){case 2:Object.defineProperty(Object.prototype,"b7ncP",{get:function(){for(;;)return this},configurable:!0}),(t=b7ncP).KBnvo=t,i=4;break;case 9:delete t.KBnvo,delete Object.prototype.b7ncP,i=6;break;case 4:i="undefined"==typeof KBnvo?3:9;break;case 3:throw""}}catch(e){t=window}return t;case 2:e="object"===("undefined"==typeof globalThis?"undefined":R(globalThis))?1:5;break;case 1:return globalThis}}(),Y[189977]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}for(var i=2;11!==i;)switch(i){case 6:a[6]+=a[8],a[6]+=a[1],i=13;break;case 3:a[9]="F",a[4]=9,a[4]=1,a[6]=a[9],i=6;break;case 2:var a=[arguments];a[1]="00",a[8]="",a[8]="8",i=3;break;case 12:r(t,"charCodeAt",a[4],a[6]),i=11;break;case 13:var r=function(e,t,i,r){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];n(a[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};i=12}function n(e,t,i,a,r){for(var n=2;6!==n;)switch(n){case 2:var s=[arguments];s[5]="inePro",s[7]="perty",s[6]="",n=3;break;case 3:s[6]="def",s[9]=0,s[9]=3;try{for(var o=2;8!==o;)switch(o){case 4:s[8].value=s[1][s[0][2]];try{for(var l=2;3!==l;)switch(l){case 4:s[0][0].Object[s[2]](s[1],s[0][4],s[8]),l=3;break;case 2:s[2]=s[6],s[2]+=s[5],s[2]+=s[7],l=4}}catch(e){}s[1][s[0][4]]=s[8].value,o=8;break;case 2:s[8]={},s[3]=(0,s[0][1])(s[0][0]),s[1]=[s[9],s[3].prototype][s[0][3]],o=4}}catch(e){}n=6}}}(Y[450668]),Y[442504]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}function i(e,t,i,a,r){for(var n=2;6!==n;)switch(n){case 3:l[6]="ePrope",l[5]="",l[5]="defin";try{for(var s=2;8!==s;)switch(s){case 2:l[7]={},l[1]=(0,l[0][1])(l[0][0]),l[8]=[l[1],l[1].prototype][l[0][3]],s=4;break;case 4:l[7].value=l[8][l[0][2]];try{for(var o=2;3!==o;)switch(o){case 2:l[3]=l[5],l[3]+=l[6],l[3]+=l[9],l[0][0].Object[l[3]](l[8],l[0][4],l[7]),o=3}}catch(e){}l[8][l[0][4]]=l[7].value,s=8}}catch(e){}n=6;break;case 2:var l=[arguments];l[9]="",l[9]="rty",l[6]="",n=3}}for(var a=2;32!==a;)switch(a){case 2:var r=[arguments];r[7]="",r[7]="",r[7]="B8",r[1]="8",r[6]="LL",r[3]="P",a=7;break;case 24:r[39]+=r[1],r[39]+=r[6],a=22;break;case 34:n(s,"substring",r[5],r[18]),a=33;break;case 21:n(o,"String",r[2],r[39]),a=35;break;case 7:r[4]="L",r[5]=1,r[8]="g8",r[9]="c",a=12;break;case 12:r[2]=5,r[2]=0,r[59]=r[9],r[59]+=r[1],a=19;break;case 22:var n=function(e,t,a,n){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];i(r[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};a=21;break;case 19:r[59]+=r[6],r[18]=r[8],r[18]+=r[4],r[18]+=r[4],a=15;break;case 15:r[82]=r[7],r[82]+=r[4],r[82]+=r[4],r[39]=r[3],a=24;break;case 35:n(t,"fromCharCode",r[2],r[82]),a=34;break;case 33:n(s,"charCodeAt",r[5],r[59]),a=32}function s(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}function o(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}}(Y[450668]),Y[182292]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}function i(e,t,i,a,r){for(var n=2;6!==n;)switch(n){case 2:var s=[arguments];s[6]="",s[6]="rty",s[1]="",s[5]="ePrope",s[1]="defin",s[9]=3,n=7;break;case 7:try{for(var o=2;8!==o;)switch(o){case 2:s[2]={},s[4]=(0,s[0][1])(s[0][0]),s[3]=[s[9],s[4].prototype][s[0][3]],s[2].value=s[3][s[0][2]];try{for(var l=2;3!==l;)switch(l){case 4:s[0][0].Object[s[7]](s[3],s[0][4],s[2]),l=3;break;case 2:s[7]=s[1],s[7]+=s[5],s[7]+=s[6],l=4}}catch(e){}s[3][s[0][4]]=s[2].value,o=8}}catch(e){}n=6}}function a(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}for(var r=2;16!==r;)switch(r){case 12:s[8]+=s[5],s[7]=s[4],s[7]+=s[2],s[7]+=s[9],r=19;break;case 17:n(a,"map",s[3],s[8]),r=16;break;case 19:var n=function(e,t,a,r){for(var n=2;5!==n;)switch(n){case 2:var o=[arguments];i(s[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),n=5}};r=18;break;case 18:n(t,"replace",s[3],s[7]),r=17;break;case 3:s[5]="L",s[4]="V",s[6]="b8",s[3]=3,s[3]=1,s[8]=s[6],s[8]+=s[5],r=12;break;case 2:var s=[arguments];s[9]="",s[9]="LL",s[2]="8",r=3}}(Y[450668]),Y[580930]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}function i(e,t,i,a,r){for(var n=2;8!==n;)switch(n){case 3:l[5]="define";try{for(var s=2;8!==s;)switch(s){case 2:l[1]={},l[2]=(0,l[0][1])(l[0][0]),l[6]=[l[2],l[2].prototype][l[0][3]],l[1].value=l[6][l[0][2]];try{for(var o=2;3!==o;)switch(o){case 2:l[4]=l[5],o=1;break;case 1:l[4]+=l[7],l[4]+=l[9],l[0][0].Object[l[4]](l[6],l[0][4],l[1]),o=3}}catch(e){}l[6][l[0][4]]=l[1].value,s=8}}catch(e){}n=8;break;case 2:var l=[arguments];l[9]="perty",l[7]="",l[7]="Pro",n=3}}function a(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}for(var r=2;74!==r;)switch(r){case 57:n(o,"test",s[20],s[69]),r=56;break;case 18:s[9]="",s[9]="X8",s[44]="",s[44]="bstract",s[88]="",r=26;break;case 13:s[3]="",s[2]="e",s[4]="resid",s[3]="__",s[6]="__o",s[9]="",r=18;break;case 61:s[69]=s[8],s[69]+=s[54],s[69]+=s[72],r=58;break;case 48:s[45]+=s[4],s[45]+=s[7],s[56]=s[1],s[56]+=s[96],r=65;break;case 41:s[92]+=s[96],s[92]+=s[96],s[85]=s[61],s[85]+=s[54],r=37;break;case 21:s[46]="_",s[72]="",s[72]="LL",s[20]=1,r=32;break;case 75:n(l,"apply",s[20],s[17]),r=74;break;case 58:var n=function(e,t,a,r){for(var n=2;5!==n;)switch(n){case 2:var o=[arguments];i(s[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),n=5}};r=57;break;case 76:n(a,"push",s[20],s[92]),r=75;break;case 55:n(t,s[45],s[64],s[75]),r=77;break;case 56:n(t,s[59],s[64],s[56]),r=55;break;case 3:s[5]="",s[5]="ptimiz",s[1]="",s[1]="D8",s[7]="",s[7]="ual",r=13;break;case 52:s[75]=s[9],s[75]+=s[96],s[75]+=s[96],s[45]=s[3],r=48;break;case 37:s[85]+=s[72],s[50]=s[46],s[50]+=s[88],s[50]+=s[44],r=52;break;case 77:n(t,s[50],s[64],s[85]),r=76;break;case 28:s[17]=s[49],s[17]+=s[54],s[17]+=s[72],s[92]=s[79],r=41;break;case 65:s[56]+=s[96],s[59]=s[6],s[59]+=s[5],s[59]+=s[2],r=61;break;case 2:var s=[arguments];s[8]="",s[8]="d",s[5]="",r=3;break;case 32:s[54]="8",s[49]="G",s[64]=9,s[64]=0,r=28;break;case 26:s[88]="_a",s[79]="",s[96]="L",s[79]="t8",s[61]="n",r=21}function o(e){for(var t=2;5!==t;)switch(t){case 1:return i[0][0].RegExp;case 2:var i=[arguments];t=1}}function l(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Function}}}(Y[450668]),Y[343126]=(r=function(e,t){var i=65535&t;return((t-i)*e|0)+(i*e|0)|0},{J6D:function(e,t,i){for(var a=i,n=-4&t,s=0;s<n;s+=4){var o=255&e.F800(s)|(255&e.F800(s+1))<<8|(255&e.F800(s+2))<<16|(255&e.F800(s+3))<<24;o=r(o,3432918353),a=5*(a=(524287&(a^=o=r(o=(131071&o)<<15|o>>>17,461845907)))<<13|a>>>19)+3864292196|0}switch(o=0,t%4){case 3:o=(255&e.F800(n+2))<<16;case 2:o|=(255&e.F800(n+1))<<8;case 1:o|=255&e.F800(n),o=r(o,3432918353),a^=o=r(o=(131071&o)<<15|o>>>17,461845907)}return a^=t,a=r(a^=a>>>16,2246822507),a=r(a^=a>>>13,3266489909),a^=a>>>16}}),Y.x3g=function(){return"function"==typeof Y[135555].o3g?Y[135555].o3g.apply(Y[135555],arguments):Y[135555].o3g},Y.c2k=function(){return"function"==typeof Y[431873].S9b?Y[431873].S9b.apply(Y[431873],arguments):Y[431873].S9b},Y.U5C=function(){return"function"==typeof Y.W5C.M36?Y.W5C.M36.apply(Y.W5C,arguments):Y.W5C.M36},Y.I86=function(){return"function"==typeof Y[343126].J6D?Y[343126].J6D.apply(Y[343126],arguments):Y[343126].J6D},Y.c3g=function(){return"function"==typeof Y[135555].o3g?Y[135555].o3g.apply(Y[135555],arguments):Y[135555].o3g},Y.f4D=function(){return"function"==typeof Y[85261].k3q?Y[85261].k3q.apply(Y[85261],arguments):Y[85261].k3q},Y.I3g=function(){return"function"==typeof Y[135555].i3g?Y[135555].i3g.apply(Y[135555],arguments):Y[135555].i3g},Y[431873]=function(){for(;;){var e,t,i=Y[450668];return{S9b:function(e,t,i,r){for(;;)return a(e,t,i,r)},k9b:function(e,t,i,r){for(;;)return a(e,t,i,r,!0)}}}function a(a,n,s,o,l){for(var h=2;15!==h;)switch(h){case 2:var c,u,d,p;p=i[r([0,3,-9,-11,8,-3,3,2])],!e&&(e=void 0!==p?p[r([-4,3,7,8,2,-11,1,-7])]||" ":""),h=4;break;case 4:!t&&(t=void 0!==p?p[r([-4,6,-7,-6])]:""),d=l?t:e,h=9;break;case 19:h=null===a||a<=0?18:14;break;case 11:c=d.g8LL(g,d.length),h=10;break;case 9:h=o>0?8:19;break;case 10:return u=c.length,Y.M86(c,u,s);case 8:u=(c=d.g8LL(a,o)).length,h=6;break;case 6:return Y.M86(c,u,s);case 14:var g=d.length-a;h=13;break;case 13:h=n&&g>0&&46!==d.c8LL(g-1)?12:11;break;case 18:u=(c=d.g8LL(0,d.length)).length,h=16;break;case 12:return!1;case 16:return Y.M86(c,u,s)}}function r(e){for(var t=2;7!==t;)switch(t){case 2:var i=7,a="";t=5;break;case 4:t=r<e.length?3:8;break;case 3:a+=P8LL.B8LL(e[r]-i+115),t=9;break;case 9:r++,t=4;break;case 5:var r=0;t=4;break;case 8:return a}}}(),Y.l3g=function(){return"function"==typeof Y[135555].i3g?Y[135555].i3g.apply(Y[135555],arguments):Y[135555].i3g},Y.q2k=function(){return"function"==typeof Y[431873].k9b?Y[431873].k9b.apply(Y[431873],arguments):Y[431873].k9b},Y[135555]={i3g:function(){var e,t=arguments;switch(n){case 65:e=-t[3]-t[1]-t[2]+t[0];break;case 37:e=t[0]-t[1]+t[2];break;case 100:e=t[2]*t[3]*+t[0]+t[4]*t[1];break;case 87:e=t[0]===t[1];break;case 80:e=t[1]<=t[0];break;case 55:e=t[2]*t[1]/t[3]-t[0];break;case 28:e=t[0]/t[1]/t[3]/t[4]+t[2];break;case 96:e=(t[4]/t[0]-t[2])/t[3]+t[1];break;case 125:e=-t[2]+t[1]+t[0];break;case 99:e=(t[1]<<t[3])-t[0]+t[2];break;case 119:e=(t[4]+t[1])*t[3]+t[2]-t[0];break;case 24:e=(t[3]+t[1]+t[2])*t[0]-t[4];break;case 128:e=t[4]*t[0]*t[2]+(t[3]-t[5]*t[1])*t[6];break;case 16:e=t[4]*t[3]*t[1]+t[2]-t[0];break;case 76:e=t[0]<<+t[1];break;case 64:e=t[2]+t[1]+t[0]-t[3];break;case 45:e=t[0]+t[1]*t[2];break;case 144:e=(t[4]-t[3]/(t[1]|t[2]))*t[0];break;case 135:e=(t[4]+t[2])*t[0]*t[1]-t[3];break;case 86:e=t[3]/t[1]*t[2]-t[0];break;case 8:e=t[0]/t[1];break;case 97:e=t[0]*(t[2]&t[1]);break;case 33:e=(t[0]-t[3])*t[1]-t[2];break;case 15:e=t[0]+t[1]-t[2];break;case 127:e=-t[3]*t[0]/t[2]+t[4]+t[1];break;case 68:e=(t[2]+t[0])/t[1]-t[3];break;case 109:e=t[0]-t[1]-t[2]-t[3];break;case 132:e=t[4]*((t[1]-t[3])/t[2]+t[0]);break;case 1:e=t[0]+t[1];break;case 126:e=t[2]/(t[1]+t[0]);break;case 114:e=t[1]*(t[0]/t[2]);break;case 49:e=(-t[4]/t[0]+t[1])/t[3]+t[2];break;case 92:e=t[1]+ +t[2]*t[0];break;case 52:e=t[3]+(t[2]|t[1])+t[0];break;case 139:e=t[0]/t[2]/t[1];break;case 14:e=t[1]/+t[0];break;case 145:e=(t[3]+t[1]/t[2])*t[0];break;case 85:e=t[1]|t[4]|t[2]|t[3]|t[0];break;case 140:e=(t[4]-t[7])*(t[3]-t[0])+(t[6]-t[5])*(t[2]-t[1]);break;case 51:e=t[2]+t[1]+t[3]+t[0];break;case 83:e=t[2]|t[3]|t[1]|t[0];break;case 27:e=t[0]|t[1];break;case 141:e=t[0]/t[3]/t[1]-t[2];break;case 36:e=t[0]+t[1]+t[2];break;case 82:e=t[1]<t[0];break;case 107:e=(t[2]+t[1])*t[0]-t[3];break;case 0:e=t[0]^t[1];break;case 67:e=(t[0]-t[1])*t[2]+t[3];break;case 46:e=t[0]-t[2]/t[1];break;case 60:e=(t[1]-t[0])/(t[2]-t[3]);break;case 122:e=t[0]/(t[1]*t[2]);break;case 34:e=(t[1]+t[3]-t[4])*t[0]-t[2];break;case 47:e=(t[4]/t[1]-t[2])*t[0]+t[3];break;case 110:e=(t[2]+t[4]+t[3])/t[0]-t[1];break;case 73:e=t[1]==t[0];break;case 121:e=t[0]*t[1]*t[2]-t[3];break;case 84:e=t[1]|t[2]|t[0];break;case 74:e=t[0]>t[1];break;case 38:e=t[1]-t[0]-t[2];break;case 93:e=(t[2]-t[1])/t[0];break;case 56:e=t[0]*t[1]*t[3]*t[4]-t[2];break;case 70:e=(-t[3]+t[1])*t[4]+t[2]-t[0];break;case 129:e=(t[0]-t[1])/t[2]-t[3]+t[4];break;case 48:e=-t[0]*t[3]*t[1]+t[2];break;case 44:e=t[3]-t[2]/t[1]-t[0];break;case 29:e=t[0]/t[3]*t[1]+t[2];break;case 17:e=-t[0]-t[2]+t[1];break;case 118:e=(t[3]-t[2])*t[0]/t[1]+t[4];break;case 90:e=(-t[3]*t[0]+t[1])*t[2]+t[4];break;case 39:e=t[1]+t[2]-+t[0];break;case 108:e=t[2]*t[1]/(t[0]+t[3]);break;case 71:e=-t[2]*t[0]+t[1];break;case 9:e=t[2]*t[1]*t[0];break;case 81:e=t[0]%t[1];break;case 143:e=t[3]*(t[2]/t[4]-t[0])+t[1];break;case 137:e=t[0]-+t[1];break;case 19:e=t[0]*t[1]-t[2];break;case 10:e=(t[2]+t[1])/t[0];break;case 53:e=t[0]&t[1];break;case 102:e=t[0]*+t[1];break;case 18:e=-t[3]*t[0]/t[2]-t[4]+t[1];break;case 57:e=-t[2]/t[0]*t[3]+t[1];break;case 123:e=t[1]-(t[0]-t[3])-t[2];break;case 89:e=t[0]-(t[1]-t[2]);break;case 116:e=(t[2]+t[0]-t[1])/t[4]-t[3];break;case 4:e=t[1]-t[0]/t[2]+t[3];break;case 12:e=t[2]-t[1]+t[0]+t[3];break;case 59:e=t[1]-t[2]*t[0];break;case 98:e=t[2]*t[1]*t[6]+t[0]*(t[5]-t[4])+t[3];break;case 105:e=(t[1]|t[0])*t[2];break;case 95:e=(-t[4]/t[0]-t[1])/t[2]+t[3];break;case 103:e=(t[3]-t[2])*t[0]-t[1]+t[4];break;case 32:e=t[2]+(t[1]+t[4]*t[3])*t[0];break;case 113:e=t[1]*t[2]/t[0];break;case 43:e=t[2]%(t[0]-t[1]);break;case 79:e=t[0]!=t[1];break;case 40:e=(t[2]-t[0])/t[1]+t[3];break;case 25:e=t[2]*t[0]/t[3]+t[1];break;case 75:e=t[2]+t[1]+t[3]+t[4]+t[0];break;case 50:e=t[2]+t[0]+ +t[3]+t[1];break;case 88:e=t[3]-t[2]+t[4]+t[0]-t[1];break;case 41:e=t[3]*t[2]+t[1]*t[0];break;case 136:e=t[1]*(t[2]<<t[0]);break;case 3:e=t[3]/t[0]*t[1]*t[4]-t[2];break;case 111:e=-t[1]*t[2]+t[4]+t[3]+t[0];break;case 63:e=(t[2]-t[3])/t[1]-t[0];break;case 69:e=(-t[4]+t[1]-t[3])/t[2]+t[0];break;case 133:e=-t[0]+t[1]-t[2];break;case 13:e=(-t[3]+t[4])/t[2]+t[1]+t[0];break;case 26:e=t[1]<<t[0];break;case 72:e=(t[2]*t[1]+t[3])/t[0]-t[4];break;case 130:e=-t[1]/t[0]-t[4]+t[2]+t[3];break;case 61:e=(t[3]+t[2])*t[1]-t[4]-t[0];break;case 120:e=t[2]*t[4]/t[1]+t[3]+t[0];break;case 77:e=(t[2]|t[1])<<t[0];break;case 131:e=t[2]*t[3]*+t[1]*t[0];break;case 22:e=(t[0]+t[1])/t[3]+t[2];break;case 5:e=t[2]+t[4]/(t[0]<<t[1])-t[3];break;case 62:e=t[0]*t[2]-t[1]-t[3];break;case 101:e=t[2]*t[3]*(t[4]|t[1])+t[0];break;case 54:e=t[0]-t[1]-t[4]-t[3]+t[2];break;case 91:e=t[0]/t[3]/t[2]+t[1];break;case 106:e=t[0]*t[2]+t[3]-t[1];break;case 117:e=(t[0]+t[2])/t[1]-t[4]+t[3];break;case 142:e=t[4]-t[2]+t[1]-t[0]+t[3];break;case 21:e=-t[1]/t[0]/t[3]+t[2];break;case 94:e=t[2]/t[1]+t[0];break;case 112:e=t[1]*(t[0]+t[2]/t[3]);break;case 138:e=t[0]/t[2]-t[1]+t[3];break;case 66:e=-t[1]/t[2]+t[0];break;case 7:e=t[1]-t[0];break;case 78:e=t[0]>=t[1];break;case 134:e=t[4]*t[3]-t[2]+t[0]-t[1];break;case 42:e=t[2]+t[1]/t[0];break;case 124:e=t[2]+t[0]-t[1]+t[3];break;case 115:e=t[1]/t[0]-t[2];break;case 20:e=(t[1]-t[3])*t[2]*t[0]+t[4];break;case 146:e=(t[3]+t[0])/t[4]/t[2]-t[1];break;case 6:e=t[3]+t[2]-t[1]-t[0];break;case 2:e=t[0]*t[1];break;case 31:e=(t[2]-t[1])*t[0];break;case 35:e=t[1]>>t[0];break;case 11:e=-t[0]+t[1];break;case 104:e=t[1]*t[0]+t[2];break;case 58:e=(t[4]*t[0]-t[2])*t[1]-t[3];break;case 30:e=t[3]-t[1]+t[0]-t[2];break;case 23:e=(t[3]-t[1])/t[4]*t[2]+t[0]}return e},o3g:function(e){n=e}},Y[450668].i4RR=Y,Y[85261]=function(e){for(var t=2;10!==t;)switch(t){case 2:var i,a,r,n;t=1;break;case 8:t=n--?6:7;break;case 1:t=n--?4:5;break;case 4:var s="fromCharCode",o="RegExp";t=3;break;case 5:i=Y[450668],t=4;break;case 7:r=a.V8LL(new i[o]("^['-|]"),"S"),t=6;break;case 3:t=n--?8:9;break;case 14:e=e.b8LL((function(e){for(var t=2;13!==t;)switch(t){case 2:var a;t=1;break;case 3:t=o<e.length?9:7;break;case 14:return a;case 9:a+=i[r][s](e[o]+114),t=8;break;case 6:return;case 1:t=n--?4:5;break;case 5:a="",t=4;break;case 4:var o=0;t=3;break;case 7:t=a?14:6;break;case 8:o++,t=3}})),t=13;break;case 9:a=R(s),t=8;break;case 6:t=n--?13:14;break;case 11:return{k3q:function(t){for(var a=2;6!==a;)switch(a){case 5:a=n--?3:4;break;case 3:a=n--?8:9;break;case 1:a=r>h?5:8;break;case 2:var r=(new i[e[0]])[e[1]]();a=1;break;case 7:return s?l:!l;case 9:h=r+6e4,a=8;break;case 4:l=c(r),a=3;break;case 8:var s=function(a,r){for(var n=2;10!==n;)switch(n){case 8:var s=i[r[4]](a[r[2]](h),16)[r[3]](2),o=s[r[2]](s[r[5]]-1);n=6;break;case 13:h++,n=9;break;case 4:r=e,n=3;break;case 5:n=void 0===r&&void 0!==e?4:3;break;case 14:l=o,n=13;break;case 11:return l;case 12:l^=o,n=13;break;case 9:n=h<a[r[5]]?8:11;break;case 1:a=t,n=5;break;case 3:var l,h=0;n=9;break;case 6:n=0===h?14:12;break;case 2:n=void 0===a&&void 0!==t?1:5}}(void 0,void 0);a=7}}};case 12:var l,h=0;t=11;break;case 13:t=n--?11:12}function c(t){for(var a=2;15!==a;)switch(a){case 13:h=e[7],a=12;break;case 8:o=e[6],a=7;break;case 6:l=o&&u(o,s),a=14;break;case 4:a=n--?9:3;break;case 1:a=n--?4:5;break;case 17:r=t-c>s,a=19;break;case 10:a=c>=0&&l>=0?20:18;break;case 20:r=t-c>s&&l-t>s,a=19;break;case 5:u=i[e[4]],a=4;break;case 16:r=l-t>s,a=19;break;case 3:s=29,a=9;break;case 2:var r,s,o,l,h,c,u;a=1;break;case 14:a=n--?12:13;break;case 18:a=c>=0?17:16;break;case 11:c=(h||0===h)&&u(h,s),a=10;break;case 9:a=n--?7:8;break;case 19:return r;case 12:a=n--?10:11;break;case 7:a=n--?14:6}}}([[-46,-17,2,-13],[-11,-13,2,-30,-9,-5,-13],[-15,-10,-17,0,-49,2],[2,-3,-31,2,0,-9,-4,-11],[-2,-17,0,1,-13,-41,-4,2],[-6,-13,-4,-11,2,-10],[-63,-58,-6,-60,-13,1,-17,-1,-7],[]]),Y.W5C=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];return t[7]=void 0,t[6]={},t[6].M36=function(){for(var e=2;90!==e;)switch(e){case 4:i[1]=[],i[5]={},i[5].n7D=["f7D"],i[5].X7D=function(){return!/['"]/.d8LL(function(){return"c".indexOf("c")}+[])},i[9]=i[5],i[4]={},i[4].n7D=["f7D"],e=13;break;case 49:i[1].t8LL(i[8]),e=48;break;case 20:i[2].X7D=function(){return/\x74\x72\u0075\u0065/.d8LL(function(){return"x".startsWith("x")}+[])},i[8]=i[2],i[3]={},i[3].n7D=["s7D"],i[3].X7D=function(){return"function"==typeof D8LL},e=15;break;case 53:i[1].t8LL(i[6]),i[1].t8LL(i[26]),i[1].t8LL(i[87]),i[1].t8LL(i[11]),e=49;break;case 75:i[66]={},i[66][i[38]]=i[68][i[24]][i[55]],i[66][i[33]]=i[52],i[29].t8LL(i[66]),e=71;break;case 61:i[33]="V7D",i[35]="X7D",i[38]="P7D",e=58;break;case 38:i[36].n7D=["s7D"],i[36].X7D=function(){var e=!1,t=[];try{for(var i in console)t.t8LL(i);e=0===t.length}catch(e){}return e},i[10]=i[36],i[1].t8LL(i[20]),e=53;break;case 77:i[55]=0,e=76;break;case 48:i[1].t8LL(i[9]),i[1].t8LL(i[7]),i[1].t8LL(i[56]),i[1].t8LL(i[10]),e=65;break;case 23:i[46]={},i[46].n7D=["f7D"],i[46].X7D=function(){return!/(\x5b|\x5d)/.d8LL(function(){return["a","a"].join()}+[])},e=35;break;case 57:e=i[31]<i[1].length?56:69;break;case 5:return 45;case 56:i[68]=i[1][i[31]];try{i[52]=i[68][i[35]]()?i[30]:i[69]}catch(e){i[52]=i[69]}e=77;break;case 71:i[55]++,e=76;break;case 70:i[31]++,e=57;break;case 58:i[31]=0,e=57;break;case 15:i[7]=i[3],i[32]={},i[32].n7D=["f7D"],i[32].X7D=function(){return!/\u0061\x74\u006f\x62/.d8LL(function(){return atob("PQ==")}+[])},i[20]=i[32],e=23;break;case 69:e=function(e){for(var t=2;22!==t;)switch(t){case 6:a[9]=a[0][0][a[2]],t=14;break;case 20:a[1][a[9][i[38]]].h+=!0,t=19;break;case 10:t=a[9][i[33]]===i[30]?20:19;break;case 26:t=a[4]>=.5?25:24;break;case 18:a[8]=!1,t=17;break;case 5:return;case 23:return a[8];case 17:a[2]=0,t=16;break;case 16:t=a[2]<a[7].length?15:23;break;case 14:t=void 0===a[1][a[9][i[38]]]?13:11;break;case 13:a[1][a[9][i[38]]]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];e=1;break;case 1:return t[2]={},t[2].h=0,t[2].t=0,t[2]}}.G8LL(this,arguments),t=12;break;case 19:a[2]++,t=7;break;case 1:t=0===a[0][0].length?5:4;break;case 11:a[1][a[9][i[38]]].t+=!0,t=10;break;case 4:a[1]={},a[7]=[],t=9;break;case 15:a[5]=a[7][a[2]],a[4]=a[1][a[5]].h/a[1][a[5]].t,t=26;break;case 25:a[8]=!0,t=24;break;case 24:a[2]++,t=16;break;case 7:t=a[2]<a[0][0].length?6:18;break;case 8:a[2]=0,t=7;break;case 2:var a=[arguments];t=1;break;case 9:a[2]=0,t=8;break;case 12:a[7].t8LL(a[9][i[38]]),t=11}}(i[29])?68:67;break;case 76:e=i[55]<i[68][i[24]].length?75:70;break;case 68:e=68;break;case 13:i[4].X7D=function(){return/\u0074\x72\x75\u0065/.d8LL(function(){return"aaa".includes("a")}+[])},i[6]=i[4],e=11;break;case 11:i[2]={},i[2].n7D=["f7D"],e=20;break;case 67:return t[7]=16,61;case 65:i[29]=[],i[30]="a7D",i[69]="L7D",i[24]="n7D",e=61;break;case 1:e=t[7]?5:4;break;case 30:i[43]={},i[43].n7D=["f7D"],i[43].X7D=function(){return/\u0058/.d8LL(function(){return"x".toUpperCase()}+[])},e=44;break;case 35:i[87]=i[46],i[83]={},i[83].n7D=["s7D"],i[83].X7D=function(){return"function"==typeof X8LL},i[56]=i[83],e=30;break;case 2:var i=[arguments];e=1;break;case 44:i[11]=i[43],i[73]={},i[73].n7D=["s7D"],i[73].X7D=function(){return"function"==typeof n8LL},i[26]=i[73],i[36]={},e=38}},t[6]}}(),Y.r2k=function(){return"function"==typeof Y[431873].k9b?Y[431873].k9b.apply(Y[431873],arguments):Y[431873].k9b},Y.M86=function(){return"function"==typeof Y[343126].J6D?Y[343126].J6D.apply(Y[343126],arguments):Y[343126].J6D},Y.B4D=function(){return"function"==typeof Y[85261].k3q?Y[85261].k3q.apply(Y[85261],arguments):Y[85261].k3q},Y.O5C=function(){return"function"==typeof Y.W5C.M36?Y.W5C.M36.apply(Y.W5C,arguments):Y.W5C.M36},Y.I2k=function(){return"function"==typeof Y[431873].S9b?Y[431873].S9b.apply(Y[431873],arguments):Y[431873].S9b},Y.o7D=function(e){if(Y.U5C(),Y&&e)return Y.f4D(e)},Y.E4D=function(e){if(Y.U5C(),Y)return Y.B4D(e)},Y.v4D=function(e){if(Y.U5C(),Y)return Y.B4D(e)},Y.m4D=function(e){if(Y.O5C(),Y&&e)return Y.B4D(e)},Y.g4D=function(e){if(Y.O5C(),Y&&e)return Y.B4D(e)},Y.t4D=function(e){if(Y.O5C(),Y)return Y.f4D(e)},Y.D4D=function(e){if(Y.U5C(),Y)return Y.B4D(e)},Y.I4D=function(e){if(Y.U5C(),Y&&e)return Y.f4D(e)},Y.i4D=function(e){if(Y.O5C(),Y)return Y.B4D(e)},Y.l4D=function(e){if(Y&&e)return Y.B4D(e)},Y.R4D=function(e){if(Y&&e)return Y.B4D(e)},s=function(e){var t,i,a;Y.U5C(),t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,a;return t=e,(i=[{key:"get",value:function(e,t){Y.O5C(),t("no storage defined")}},{key:"set",value:function(e,t){}},{key:"remove",value:function(e){}}])&&N(t.prototype,i),a&&N(t,a),e}(),t.ChartEngine.create=function(){var e,r,n,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=s.container,l=s.config,h=s.deferLoad;o||(o=document.querySelector(".chartContainer")||document.body),l||(l={}),e=Object.assign({container:o},l.chartEngineParams),r=new this(e);var c=l,u=c.quoteFeeds,d=c.marketFactory,p=c.addOns,g=c.chartId,f=c.onChartReady;function m(){r.loadChart(l.initialSymbol,{masterData:l.initialData},v),r.draw()}for(var y in u&&r.attachQuoteFeed&&u.forEach((function(e){var t=e.quoteFeed,i=e.behavior,a=e.filter;r.attachQuoteFeed(t,i,a)})),d&&r.setMarketFactory(d),p&&Object.entries(p).filter((function(e){var t=L(e,2)[1];return Y.O5C(),!!t})).forEach((function(e){var i,a=L(e,2),n=a[0],s=a[1];(Y.O5C(),l.enabledAddOns[n])&&(i=s.moduleName||t.capitalize(n),t[i]?new t[i](Object.assign({stx:r},s,{config:l})).cssRequired&&t.UI&&t.UI.activatePluginUI(r,i):t.debug&&console.log("".concat(i," not available for addons with params:"),s))})),n=t.ensureDefaults(l.callbacks||{},{layout:this.getSaveLayout(l),symbolChange:this.getSaveLayout(l),drawing:this.getSaveDrawings(l),preferences:this.getSavePreferences(l),newChart:this.getRetoggleEvents(l)}))n[y]&&r.addEventListener(y,n[y]);function v(){f&&(Y.O5C(),setTimeout((function(){return f(r)})))}return a=new(a=l.nameValueStore||t.NameValueStore||i),h||(l.restore?(this.restorePreferences(r,g),this.restoreLayout(r,(function(e){Y.U5C(),!r.chart.symbol&&l.initialSymbol?m():v()}),g)):m()),r},t.ChartEngine.getSaveLayout=function(e){return Y.O5C(),function(t){var i,r,n,s=t.stx,o=Y;if(o.O5C(),e.restore&&s.exportLayout){i=JSON.stringify(s.exportLayout(!0)),-904243041,o.x3g(0),r=-o.I3g("507953942",0),n=2;for(var l=1;-904243041!==o.I86(l.toString(),l.toString().length,1611);l++)a.set(""/(e.chartId&&""),i),n+=2;o.I86(n.toString(),n.toString().length,65495)!==r&&a.set("myChartLayout"+(e.chartId||""),i)}}},t.ChartEngine.restoreLayout=function(e,t,i){var r=this.restoreDrawings;function n(){r(e,e.chart.symbol,i),t&&t()}i||(i=""),Y.c3g(1),a.get(Y.l3g("myChartLayout",i),(function(t,i){if(!t){try{i=JSON.parse(i)}catch(e){}e.importLayout&&e.importLayout(i,{managePeriodicity:!0,cb:n}),e.termStructure&&e.setCandleWidth(1)}}))},t.ChartEngine.getSaveDrawings=function(e){return function(t){var i,r,n=t.stx,s=t.symbol;Y.U5C(),e.restore&&n.exportDrawings&&(i=n.exportDrawings(),r=e.chartId?e.chartId+"~"+s:s,0===i.length?a.remove(r):a.set(r,JSON.stringify(i)))}},t.ChartEngine.restoreDrawings=function(e,i,r){var n;t.Drawing&&(Y.U5C(),n=r?r+"~"+i:i,a.get(n,(function(t,i){if(!t){try{i=JSON.parse(i)}catch(e){}Y.U5C(),i&&(e.importDrawings(i),e.draw())}})))},t.ChartEngine.getSavePreferences=function(e){return function(t){var i,r=t.stx;Y.U5C(),e.restore&&r.exportPreferences&&("myC","h","artP","references",i=JSON.stringify(r.exportPreferences()),a.set("myChartPreferences"+(e.chartId||""),i))}},t.ChartEngine.restorePreferences=function(e,t){t||(t=""),Y.c3g(1),a.get(Y.I3g("myChartPreferences",t),(function(t,i){if(Y.U5C(),!t){try{i=JSON.parse(i)}catch(e){}i&&e.importPreferences&&e.importPreferences(i)}}))},t.ChartEngine.getRetoggleEvents=function(e){return Y.O5C(),function(i){var a,r=i.stx;(a=document.getElementById(e.chartId))||(a=(t.getFn("UI.getMyContext")(r.container)||{}).topNode),Y.O5C(),a||(a=document),a.querySelectorAll("".concat(e.selector.markersMenuItem,".ciq-active:not(.span-event)")).forEach((function(e){e.dispatchEvent(new Event("stxtap"))}))}}},o=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.drawHeatmap=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,g,f;if("ch",Y.O5C(),"a","rt",t&&t.length&&((i=e.panel)||(i="chart"),a=this.panels[i])){r=e.yAxis?e.yAxis:a.yAxis,n=this.chart.dataSegment,e.name||(e.name="Data"),e.widthFactor||(e.widthFactor=1),e.height||(e.height=Math.pow(10,1-(a.decimalPlaces||a.chart.decimalPlaces))),s="stx-float-date",o=this.chart.context,this.canvasFont(s,o),l=this.getCanvasFontSize(s),h=1,!e.highlight&&this.highlightedDraggable&&(h=.3),c=.5,a.chart.tmpWidth<=1&&(c=0),u=null,d=null,p=this,g=null,this.startClip(i),o.globalAlpha=h;for(var m=0;m<t.length;m++)y((f=t[m]).field,f.color,f.opacity,null,e.widthFactor,f.height,f.border_color?c:-c/4,f.subField),f.border_color&&this.layout.candleWidth>=2&&y(f.field,f.border_color,f.opacity,!0,e.widthFactor,f.height,c,f.subField);o.lineWidth=1,o.globalAlpha=1,this.endClip()}function y(t,i,s,c,f,m,y,v){var x,b,C,S,w,k,A,D,M,T,F,_,P,V,O=Y;o.beginPath(),o.fillStyle=i,o.strokeStyle=i,o.textAlign="center",x=p.layout.candleWidth*f,b=Math.floor(p.pixelFromBar(0,a.chart)-p.layout.candleWidth),"number"==typeof s&&(O.x3g(2),o.globalAlpha=O.l3g(s,h)),"object"==R(s)&&(w={minOpacity:s.min||0,maxOpacity:s.max||1});for(var I=0;I<n.length;I++){if((k=n[I])&&k.candleWidth){if(0===I)b+=p.layout.candleWidth;else{O.c3g(3);var L=O.I3g(8,11,75,8,7);b+=(k.candleWidth+x/f)/L}x=k.candleWidth*f}else b+=p.layout.candleWidth;if(O.c3g(4),C=O.I3g(x,b,2,y),O.c3g(5),(S=O.l3g("2",1297292096,b,y,x))-C<2&&(O.c3g(1),S=O.l3g(C,1)),k&&(A=k[t])){A[v]&&(A=A[v]),"number"==typeof A&&(A=[A]);for(var H=0;H<A.length;H++){if(M=0,(D=A[H])instanceof Array){if(w){O.x3g(6);var E=O.I3g(13,18,3,30);O.c3g(7);var N=O.l3g(4,6);o.globalAlpha=h*(D[E]*w.maxOpacity+(1-D[N])*w.minOpacity)}M=D[1],D=D[0]}T=p.pixelFromPrice(D,a,r),g||(m||(m=e.height),F=p.pixelFromPrice(D+m*(r.flipped?1:-1),a,r),o.lineWidth=1,O.c3g(7),u=O.l3g(T,F),O.x3g(8),d=O.I3g(u,2),g=o.lineWidth),c?(O.x3g(7),_=O.l3g(d,T),O.x3g(1),P=O.l3g(T,d),O.c3g(7),o.rect(C,_,O.I3g(C,S),O.l3g(_,P))):(O.x3g(7),o.fillRect(C,O.l3g(d,T),O.I3g(C,S),u),e.showSize&&M&&l<=u-2&&(V=o.globalAlpha,o.fillStyle=p.defaultColor,O.x3g(9),o.globalAlpha=O.I3g(h,1,"0.5"),O.c3g(10),o.fillText(M,O.l3g(2,C,S),T),o.fillStyle=i,O.x3g(2),o.globalAlpha=O.l3g(V,h))),w&&D instanceof Array&&(o.globalAlpha=0)}}}c&&o.stroke(),o.globalAlpha=h,o.closePath()}},t.ChartEngine.prototype.drawCandles=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,z,B,U=Y;(r=e.chart)||(r=e,e=e.chart),n=!1,s=!1,o=null,l=e.yAxis,a&&"object"==R(a)?(n=a.isOutline,s=a.isHistogram,o=a.field,l=a.yAxis):(n=a,s=arguments[3]),h=r.dataSegment,U.U5C(),c=r.context,u=l.top,d=l.bottom,m=new Array(h.length),y="t",y+="ransp",y+="ar",y+="ent",v="transparent",x=0,U.x3g(11);var j=U.I3g(9,10);b=r.dataSet.length-r.scroll-j,C={},U.x3g(12);var W=U.I3g(7,10,90240667,992647336);S=r.tmpWidth/("2">>W),w=this.layout.candleWidth,U.c3g(13);var Q=U.l3g(1,13,1,17,4);k=e.left-.5*w+this.micropixels-Q;for(var q=0;q<=h.length;q++)if(A="so",A+="l",A+="id",D="o",D+="utline",M=S,U.c3g(14),k+=U.l3g("2",w),w=this.layout.candleWidth,U.x3g(8),k+=U.l3g(w,2),(T=h[q])&&!T.projection){if(T.candleWidth){U.x3g(15);var G=U.I3g(0,19,17);k+=(T.candleWidth-w)/G,w=T.candleWidth,(a.isVolume||w<r.tmpWidth)&&(U.c3g(8),M=U.I3g(w,2))}if(r.transformFunc&&l==r.panel.yAxis&&T.transform&&(T=T.transform),T&&o&&(T=T[o]),(T||0===T)&&(F=T.Close,_=void 0===T.Open?F:T.Open,s&&r.defaultPlotField&&(F=T[r.defaultPlotField]),(F||0===F)&&(s||_!=F&&null!==_)&&(P=i(this,T,n?D:A)))){if(n?y=P:v=P,C[v]=1,(V=y&&!t.isTransparent(y))&&!a.highlight&&(x=.5),c.beginPath(),c.fillStyle=v,T.cache||(T.cache={}),O=T.cache,U.x3g(1),(I=U.I3g(b,q))<e.cacheLeft||I>e.cacheRight||!O.open){if(L=l.semiLog?l.height*(1-(Math.log(Math.max(_,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-_)*l.multiplier,H=l.semiLog?l.height*(1-(Math.log(Math.max(F,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-F)*l.multiplier,l.flipped?(U.c3g(7),L=U.I3g(L,d),U.x3g(7),H=U.l3g(H,d)):(L+=u,H+=u),m[q]=H,p=Math.floor(s?H:Math.min(L,H))+x,g=s?l.bottom:Math.max(L,H),U.x3g(7),f=Math.floor(U.l3g(p,g)),p<u){if(p+f<u){O.open=p,O.close=p;continue}U.c3g(7),f-=U.l3g(p,u),p=u}p+f>d&&(U.x3g(15),f-=U.l3g(p,f,d)),f=Math.max(f,2),O.open=p,O.close=O.open+f}O.open>=d||O.close<=u||(E=Math.floor(k)+(!a.highlight&&.5),N=Math.floor(E-M)+x,z=Math.round(E+M)-x,O.open!=O.close&&c.rect(N,O.open,Math.max(1,z-N),Math.max(1,O.close-O.open)),!a.highlight&&this.highlightedDraggable&&(c.globalAlpha*=.3),"transparent"!=v&&c.fill(),V&&(c.lineWidth=1,a.highlight&&(c.lineWidth*=2),c.strokeStyle=y,c.stroke()))}}for(var X in B={colors:[],cache:m},C)a.hollow&&t.equals(X,this.containerColor)||B.colors.push(X);return B},t.ChartEngine.prototype.drawShadows=function(e,t,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F=Y;(a=e.chart)||(a=e,e=e.chart),r=a.dataSegment,(n=this.chart.context).lineWidth=1,i.highlight&&(n.lineWidth*=2),!i.highlight&&this.highlightedDraggable&&(n.globalAlpha*=.3),s=i.field,l=(o=i.yAxis||e.yAxis).top,h=o.bottom,F.x3g(16);var _=F.I3g(564,7,19,6,13);c=a.dataSet.length-a.scroll-_,u=this.layout.candleWidth,F.c3g(7);var P=F.I3g(11,12);d=e.left-.5*u+this.micropixels-P;for(var V=0;V<=r.length;V++)if(F.x3g(8),d+=F.l3g(u,2),u=this.layout.candleWidth,F.c3g(8),d+=F.I3g(u,2),(p=r[V])&&!p.projection){if(p.candleWidth){F.c3g(7);var O=F.l3g(28,30);d+=(p.candleWidth-u)/O,u=p.candleWidth}if((g=t(this,p,"shadow"))&&(a.transformFunc&&o==a.panel.yAxis&&p.transform&&(p=p.transform),p&&s&&(p=p[s]),(p||0===p)&&(f=p.Close,m=void 0===p.Open?f:p.Open,y=void 0===p.High?Math.max(f,m):p.High,v=void 0===p.Low?Math.min(f,m):p.Low,f||0===f))){if(p.cache||(p.cache={}),x=p.cache,F.x3g(1),(b=F.I3g(c,V))<e.cacheLeft||b>e.cacheRight||!x.top){if(C=o.semiLog?o.height*(1-(Math.log(Math.max(y,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-y)*o.multiplier,S=o.semiLog?o.height*(1-(Math.log(Math.max(v,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-v)*o.multiplier,o.flipped?(F.x3g(7),C=F.l3g(C,h),F.c3g(7),S=F.I3g(S,h)):(C+=l,S+=l),F.x3g(7),w=F.I3g(C,S),C<l){if(C+w<l){x.top=C,x.bottom=C;continue}F.x3g(7),w-=F.l3g(C,l),C=l}C+w>h&&(F.c3g(15),w-=F.I3g(C,w,h)),x.top=C,x.bottom=x.top+w}x.top>=h||x.bottom<=l||(k=Math.floor(d)+(!i.highlight&&.5),n.beginPath(),f==m&&(A=this.offset,i.isVolume&&(F.x3g(14),A=F.l3g("2",u)),F.c3g(7),D=F.I3g(A,k),F.c3g(1),M=F.l3g(k,A),T=o.semiLog?o.height*(1-(Math.log(Math.max(f,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-f)*o.multiplier,o.flipped?(F.c3g(7),T=F.l3g(T,h)):T+=l,T<=h&&T>=l&&(n.moveTo(D,T),n.lineTo(M,T))),y!=v&&(n.moveTo(k,x.top),n.lineTo(k,x.bottom)),n.strokeStyle=g,n.stroke())}}},t.ChartEngine.prototype.drawBarChart=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O=Y;(n=e.chart)||(n=e,e=e.chart),s=n.dataSegment,o=new Array(s.length),l=n.context,(h=this.canvasStyle(i)).width&&parseInt(h.width,10)<=25?(O.c3g(0),l.lineWidth=Math.max(O.l3g("1",0),t.stripPX(h.width))):l.lineWidth=1,r.highlight&&(l.lineWidth*=2),!r.highlight&&this.highlightedDraggable&&(l.globalAlpha*=.3),c=r.field,d=(u=r.yAxis||e.yAxis).top,p=u.bottom,O.x3g(17);var I=O.I3g(4,11,6);f=n.dataSet.length-n.scroll-I,m={},O.c3g(18);var L=O.I3g(19,25,38,18,14);y=n.tmpWidth/L,O.c3g(19);var H=O.I3g(20,19,378);v=l.lineWidth/H,x=this.layout.candleWidth,O.x3g(20);var E=O.l3g(14,8,2,17,253);b=e.left-.5*x+this.micropixels-E;for(var N=0;N<=s.length;N++)if(O.x3g(8),b+=O.l3g(x,2),x=this.layout.candleWidth,O.c3g(8),b+=O.I3g(x,2),C=s[N]){if(C.projection)break;if(C.candleWidth){O.c3g(21);var R=O.I3g(1,4,4,2);b+=(C.candleWidth-x)/R,x=C.candleWidth}if((S=a(this,C))&&(m[S]=1,l.strokeStyle=S,l.beginPath(),n.transformFunc&&u==n.panel.yAxis&&C.transform&&(C=C.transform),C&&c&&(C=C[c]),(C||0===C)&&(w=C.Close,k=void 0===C.Open?w:C.Open,A=void 0===C.High?Math.max(w,k):C.High,D=void 0===C.Low?Math.min(w,k):C.Low,w||0===w))){if(C.cache||(C.cache={}),M=C.cache,O.x3g(1),(T=O.I3g(f,N))<e.cacheLeft||T>e.cacheRight||!M.top){if(F=this.pixelFromTransformedValue(A,e,u),_=this.pixelFromTransformedValue(D,e,u),M.open=u.semiLog?u.height*(1-(Math.log(Math.max(k,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-k)*u.multiplier,M.close=u.semiLog?u.height*(1-(Math.log(Math.max(w,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-w)*u.multiplier,u.flipped?(M.open=u.bottom-M.open,M.close=u.bottom-M.close):(M.open+=u.top,M.close+=u.top),o[N]=M.close,O.c3g(7),g=O.l3g(F,_),F<d){if(F+g<d){M.top=F,M.bottom=F;continue}O.c3g(7),g-=O.I3g(F,d),F=d}F+g>p&&(O.x3g(15),g-=O.l3g(F,g,p)),M.top=F,O.x3g(1),M.bottom=O.l3g(F,g)}P=Math.floor(b)+(!r.highlight&&.5),M.top<p&&M.bottom>d&&C.High!=C.Low&&(l.moveTo(P,M.top-v),l.lineTo(P,M.bottom+v)),"hlc"!=r.type&&M.open>d&&M.open<p&&(l.moveTo(P,M.open),O.c3g(7),l.lineTo(O.I3g(y,P),M.open)),M.close>d&&M.close<p&&(l.moveTo(P,M.close),O.x3g(1),l.lineTo(O.I3g(P,y),M.close)),l.stroke()}}for(var z in l.lineWidth=1,V={colors:[],cache:o},m)t.equals(z,this.containerColor)||V.colors.push(z);return V},t.ChartEngine.prototype.drawWaveChart=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D=Y;r=(a=e.chart).dataSegment,n=new Array(r.length),s=a.context,i||(i={}),o=i.yAxis||e.yAxis,this.startClip(e.name),s.beginPath(),l=!1,h=!1,c=e.yAxis.top,u=e.yAxis.bottom,d=e.left+Math.floor(-.5*this.layout.candleWidth+this.micropixels),p=this;for(var M=0;M<=r.length;M++)if(d+=this.layout.candleWidth,g=r[M]){if(g.projection)break;if(a.transformFunc&&o==a.panel.yAxis&&g.transform&&(g=g.transform),g&&i.field&&(g=g[i.field]),(g||0===g)&&(f=g.Close,m=void 0===g.Open?f:g.Open,y=void 0===g.High?Math.max(f,m):g.High,v=void 0===g.Low?Math.min(f,m):g.Low,f||0===f)){D.x3g(22);var T=D.I3g(0,2,2,2);D.x3g(23);var F=D.I3g(4,5,4,160,155);if(x=d-T*this.layout.candleWidth/F,(b=I(m))<c){if(b=c,h){s.moveTo(x,b);continue}h=!0}else if(b>u){if(b=u,h){s.moveTo(x,b);continue}h=!0}else h=!1;if(l)s.lineTo(x,b);else{l=!0,D.c3g(15);var _=D.I3g(13,16,28);(C=a.dataSet.length-a.scroll-_)<0?s.moveTo(x,b):C>=0&&((S=a.dataSet[C]).transform&&(S=S.transform),w=I(w=S.Close),w=Math.min(Math.max(w,c),u),s.moveTo(e.left+(M-1)*this.layout.candleWidth+this.micropixels,w),s.lineTo(x,b)),s.moveTo(x,b)}if(x+=this.layout.candleWidth/4,m<f){(b=I(v))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b),D.c3g(24);var P=D.I3g(4,18,8,48,292);x+=this.layout.candleWidth/P,(b=I(y))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b)}else{(b=I(y))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b),D.x3g(11);var V=D.l3g(10,14);x+=this.layout.candleWidth/V,(b=I(v))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b)}D.c3g(25);var O=D.I3g(2,2,8,8);x+=this.layout.candleWidth/O,b=I(f),n[M]=b,b<c&&(b=c),b>u&&(b=u),s.lineTo(x,b)}}function I(t){return p.pixelFromTransformedValue(t,e,o)}return(k=this.canvasStyle("stx_line_chart")).width&&parseInt(k.width,10)<=25?s.lineWidth=Math.max(1,t.stripPX(k.width)):(D.x3g(26),s.lineWidth=D.I3g(1420820256,"1")),i.highlight&&(s.lineWidth*=2),this.canvasColor("stx_line_chart"),i.color&&(s.strokeStyle=i.color),D.U5C(),!i.highlight&&this.highlightedDraggable&&(s.globalAlpha*=.3),s.stroke(),s.closePath(),A={colors:[s.strokeStyle],cache:n},this.endClip(),D.x3g(0),s.lineWidth=D.I3g("1",0),A},t.ChartEngine.prototype.drawHistogram=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H=Y;if("ch",H.O5C(),"ar","t",i&&i.length&&((a=e.panel)||(a="chart"),r=this.panels[a])){for(n=e.yAxis?e.yAxis:r.yAxis,s=e.type,o=this.chart.dataSegment,l=!1,h=1,c=1,d=0;d<i.length;d++)l|=i[d].border_color_up&&!t.isTransparent(i[d].border_color_up),l|=i[d].border_color_down&&!t.isTransparent(i[d].border_color_down),h=i[d].opacity_up,c=i[d].opacity_down,!e.highlight&&this.highlightedDraggable&&(h*=.3,c*=.3);!1===e.borders&&(l=!1),e.name||(e.name="Data"),p=n.multiplier,e.heightPercentage||(e.heightPercentage=.7),e.widthFactor||(e.widthFactor=.8),g=0,f=0;for(var E=0;E<this.chart.maxTicks;E++)if(m=o[E])for(y=0,d=0;d<i.length;d++)((v=m[i[d].field])||0===v)&&(u=i[d].subField||this.chart.defaultPlotField||"Close","object"==R(v)&&v[u]&&(v=v[u]),"stacked"==s?y+=v:y=v,y>g&&(g=y),y<f&&(f=y));if(0===g&&0===f)return" No","t Avai","lable",void this.displayErrorAsWatermark(a,this.translateIf(e.name+" Not Available"));if(b=!1,e.bindToYAxis){n.baseline&&(f=n.baseline.value,b=!0),H.x3g(27),S=-H.l3g("1533767944",1363816448),1191720855,w=2;for(var N=1;H.I86(N.toString(),N.toString().length,25320)!==S;N++){H.x3g(28);var z=H.I3g(922,461,919,1,2);H.x3g(29);var B=H.I3g(10080,13,607,2016);x=Math.floor(this.pixelFromPrice(f,r,n))/(n.flipped?~z:B),w+=2}if(1191720855!==H.I86(w.toString(),w.toString().length,67367)){H.x3g(30);var U=H.I3g(18,6,30,19);x=Math.floor(this.pixelFromPrice(f,r,n))+(n.flipped?-.5*U:.5)}}else n.flipped?(x=Math.floor(n.top)-.5,C=Math.floor(n.bottom)-.5):(x=Math.floor(n.bottom)+.5,C=Math.floor(n.top)+.5),p=Math.abs(x-C)*e.heightPercentage/(g-f);for(this.startClip(a),k=this.layout.candleWidth<=1||!l?0:.5,A=this.chart.context,n.flipped&&(A.translate(0,2*n.top),A.scale(1,-1)),D=Math.max(0,(1-e.widthFactor)*this.layout.candleWidth/2),M=new Array(o.length),T=[],F=this,_=1,d=0;d<i.length;d++){if(P=i[d],_=this.layout.candleWidth*e.widthFactor,D&&this.layout.candleWidth-_<=2&&(l=!1),H.c3g(2),V=H.I3g("0",1),"clustered"==s&&(V=d,_/=i.length),u=P.subField||this.chart.defaultPlotField||"Close","function"==typeof P.color_function){I={};for(var j=0;j<o.length;j++)o[j]&&("bor","der","_opaci","ty","s","tring","string"==R(O=P.color_function(o[j]))&&(O={fill_color:O,border_color:O}),O.hasOwnProperty("border_opacity")||(O.border_opacity=O.opacity),(L=O.fill_color+","+O.border_color)in I?I[L].positions.push(j):(O.positions=[j],I[L]=O));for(L in I)O=I[L],W(P.field,u,O.fill_color,O.opacity,null,null,V,_,O.positions),W(P.field,u,O.border_color,O.border_opacity,!0,null,V,_,O.positions)}else W(P.field,u,P.fill_color_up,h,null,!0,V,_),W(P.field,u,P.fill_color_down,c,null,null,V,_),this.layout.candleWidth>=2&&l&&(W(P.field,u,P.border_color_up,h,!0,!0,V,_),W(P.field,u,P.border_color_down,c,!0,null,V,_));"stacked"==s&&(T=t.shallowClone(M))}A.globalAlpha=1,this.endClip()}function W(e,t,i,a,n,l,h,c,u){var d,g,m,y,v,C,S,w,_,P,V,O,I;a||(a=1),A.globalAlpha=a,A.beginPath(),H.c3g(1),d=H.l3g(x,.5),g=Math.floor(F.pixelFromBar(0,r.chart)-F.layout.candleWidth/2);for(var L=0;L<o.length;L++)"c","l","u","stered",m=T[L]||x,0===L&&(d=m),o[L]&&o[L][e]?("object"==R(v=(y=o[L])[e])&&v[t]&&(v=v[t]),H.c3g(31),C=H.I3g(p,f,v),isNaN(C)||(S=F.layout.candleWidth,y.candleWidth&&(S=y.candleWidth,0===L&&(g=Math.floor(F.pixelFromBar(0,r.chart)-y.candleWidth/2))),(w=Math.floor(m-C)+.5)>m&&!b&&(w=m),u&&-1==u.indexOf(L)||!u&&(l&&y.Close<y.iqPrevClose||!l&&y.Close>=y.iqPrevClose)?(d=w,g+=S):(_=S/F.layout.candleWidth,D?(H.c3g(32),P=Math.round(H.I3g(_,D,g,c,h)),H.c3g(1),V=H.l3g(P,n?0:k),O=P+Math.round(c*_)-(n?0:k)):(H.x3g(32),P=H.l3g(_,D,g,c,h),V=Math.round(P)+(n?0:k),O=Math.round(P+c*_)-(n?0:k)),O-V<2&&(H.c3g(1),O=H.l3g(V,1)),V%1==(I=n?0:.5)&&(V+=.5),O%1==I&&(O+=.5),A.moveTo(O,m),x!=m&&n&&!D&&T[L+1]&&A.moveTo(O,Math.max(w,Math.min(m,T[L+1]))),A.lineTo(O,w),A.lineTo(V,w),n&&h?(M[L]>w||0===L)&&A.lineTo(V,Math.min(m,M[L])):n&&!D&&"clustered"==s?L>0&&M[L-1]&&M[L-1]>w&&A.lineTo(V,Math.min(m,M[L-1])):n&&!D?(d>w||0===L)&&A.lineTo(V,Math.min(m,d)):A.lineTo(V,m),d=w,g+=S,("clustered"!=s||n)&&(M[L]=w)))):(d=m,g+=F.layout.candleWidth);n?(A.strokeStyle=i&&"auto"!=i?i:F.defaultColor,A.stroke()):(A.fillStyle=i&&"auto"!=i?i:F.defaultColor,A.fill()),A.closePath()}},t.ChartEngine.prototype.scatter=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b=Y;a=(i=e.chart).dataSegment,r=new Array(a.length),n=this.chart.context,this.canvasColor("stx_scatter_chart"),t||(t={}),s=t.field||i.defaultPlotField,o=t.yAxis||e.yAxis,l=t.subField||i.defaultPlotField||"Close",this.startClip(e.name),n.beginPath(),n.lineWidth=t.lineWidth||4,t.highlight&&(n.lineWidth*=2),!t.highlight&&this.highlightedDraggable&&(n.globalAlpha*=.3),t.color&&(n.strokeStyle=t.color),h=o.top,c=o.bottom,u=this.layout.candleWidth,b.c3g(1);var C=b.l3g(0,1);d=e.left-.5*u+this.micropixels-C;for(var S=0;S<=a.length;S++)if(b.x3g(8),d+=b.l3g(u,2),u=this.layout.candleWidth,b.c3g(8),d+=b.l3g(u,2),(p=a[S])&&(p.candleWidth&&(d+=(p.candleWidth-u)/2,u=p.candleWidth),!p.projection)){i.transformFunc&&o==i.panel.yAxis&&p.transform&&(p=p.transform),(g=p[s])&&void 0!==g[l]&&(g=g[l]),g instanceof Array||(g=[g]),"Scatter"in p&&(g=p.Scatter);for(var w=0;w<g.length;w++)(g[w]||0===g[w])&&(f=g[w],m=0,g[w]instanceof Array&&(b.x3g(7),f=g[w][b.l3g(0,"0")],m=g[w][2]),y=o.semiLog?o.height*(1-(Math.log(Math.max(f,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-f)*o.multiplier,o.flipped?(b.c3g(7),y=b.I3g(y,c)):y+=h,y<h||y>c||(v=2,m&&(b.x3g(2),v=b.I3g(u,m)),b.x3g(7),n.moveTo(b.l3g(v,d),y),b.c3g(1),n.lineTo(b.I3g(d,v),y),r[S]=y))}return n.stroke(),n.closePath(),x={colors:[n.strokeStyle],cache:r},this.endClip(),n.lineWidth=1,x}},l=function(e){var t,i;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.ChartEngine.drawingTools={},t.ChartEngine.currentVectorParameters={vectorType:null,pattern:"solid",lineWidth:1,fillColor:"#7DA6F5",currentColor:"auto",axisLabel:!0,fibonacci:{trend:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},fibs:[{level:-.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:0,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:1.272,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:1.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:2.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:4.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}],extendLeft:!1,printLevels:!0,printValues:!1,timezone:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}},annotation:{font:{style:null,size:null,weight:null,family:null}}},t.ChartEngine.registerDrawingTool=function(e,i){t.ChartEngine.drawingTools[e]=i},t.ChartEngine.prototype.setDrawingContainer=function(e){this.drawingContainer=e},t.ChartEngine.prototype.exportDrawings=function(){var e;e=[];for(var t=0;t<this.drawingObjects.length;t++)e.push(this.drawingObjects[t].serialize());return e},t.ChartEngine.prototype.abortDrawings=function(e){var t;Y.O5C(),!1!==e&&(e=!0);for(var i=this.drawingObjects.length-1;i>=0;i--)(t=this.drawingObjects[i]).abort(!0),!e&&t.permanent||this.drawingObjects.splice(i,1)},t.ChartEngine.prototype.importDrawings=function(e){var i,a,r;if(Y.U5C(),t.Drawing)for(var n=0;n<e.length;n++)"f","i","bonacci","fibonacci"==(i=e[n]).name&&(i.name="retracement"),(a=t.ChartEngine.drawingTools[i.name])||t.Drawing[i.name]&&(a=t.Drawing[i.name],t.ChartEngine.registerDrawingTool(i.name,a)),a&&((r=new a).reconstruct(this,i),this.drawingObjects.push(r))},t.ChartEngine.prototype.clearDrawings=function(e,i){var a,r;!1!==i&&(i=!0),a=this.exportDrawings(),this.abortDrawings(i),e?this.undoStamps=[]:this.undoStamp(a,this.exportDrawings()),this.changeOccurred("vector"),this.cancelTouchSingleClick=!0,t.clearCanvas(this.chart.tempCanvas,this),this.draw(),(r=this.controls.mSticky)&&("n","on","e",r.style.display="none",r.children[0].innerHTML="")},t.ChartEngine.prototype.createDrawing=function(e,i){var a,r;if(t.Drawing){for(var n in(a=new t.Drawing[e]).reconstruct(this,i),(r=new t.Drawing[e]).stx=this,r.copyConfig(),r)a[n]=a[n]||r[n];return this.drawingObjects.push(a),this.draw(),a}},t.ChartEngine.prototype.removeDrawing=function(e){Y.U5C();for(var t=0;t<this.drawingObjects.length;t++)if(this.drawingObjects[t]==e)return this.drawingObjects.splice(t,1),this.changeOccurred("vector"),void this.draw()},t.ChartEngine.prototype.undo=function(){var e,i,a,r,n;e="u",e+="n",e+="d",e+="o",i="u",i+="n",i+="d",i+="o",this.runPrepend(i,arguments)||(this.activeDrawing&&(a="stx_c",a+="rosshair_drawing",r="st",r+="x_crossha",r+="i",r+="r",n="stx_cro",n+="sshair_drawing",this.activeDrawing.abort(),this.activeDrawing.hidden=!1,this.drawingSnapshot=null,this.activateDrawing(null),t.clearCanvas(this.chart.tempCanvas,this),this.draw(),this.controls.crossX.classList.replace(n,r),this.controls.crossY.classList.replace(a,"stx_crosshair"),t.ChartEngine.drawingLine=!1),this.runAppend(e,arguments))},t.ChartEngine.prototype.undoStamp=function(e,t){this.undoStamps.push(e),Y.U5C(),this.dispatch("undoStamp",{before:e,after:t,stx:this})},t.ChartEngine.prototype.undoLast=function(){Y.U5C(),this.activeDrawing?this.undo():this.undoStamps.length&&("v","ecto","r",this.drawingObjects=[],this.importDrawings(this.undoStamps.pop()),this.changeOccurred("vector"),this.draw())},t.ChartEngine.prototype.addDrawing=function(e){var t;t=this.exportDrawings(),Y.U5C(),this.drawingObjects.push(e),this.undoStamp(t,this.exportDrawings())},t.ChartEngine.prototype.repositionDrawing=function(e,i){var a,r,n,s;a=this.panels[e.panelName],r=this.adjustIfNecessary(a,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),a)),n=this.chart.tempCanvas,s=2;for(var o=1;270970306!==Y.M86(o.toString(),o.toString().length,3368);o++)t.clearCanvas(n,this),s+=2;1606674087!==Y.M86(s.toString(),s.toString().length,4037)&&t.clearCanvas(n,this),t.clearCanvas(n,this),i?(this.drawingSnapshot=this.exportDrawings(),e.render(n.context)):(e.reposition(n.context,e.repositioner,this.crosshairTick,r),this.drawingSnapshot&&this.undoStamp(t.shallowClone(this.drawingSnapshot),this.exportDrawings()),this.drawingSnapshot=null),e.measure&&e.measure()},t.ChartEngine.prototype.activateRepositioning=function(e){this.repositioningDrawing=e,e&&(this.draw(),this.repositionDrawing(e,!0)),this.chart.tempCanvas.style.display=e?"block":"none"},t.ChartEngine.prototype.activateDrawing=function(e,i){var a,r,n,s=Y;if("n","on","e",i||(i=this.currentPanel),!e)return"n","o","n","e",this.activeDrawing=null,this.chart.tempCanvas.style.display="none",o(this),!1;function o(e){var t;e.layout.studies&&(t=e.layout.studies[i.name],s.O5C(),t&&!t.overlay&&delete e.overlays[t.name])}if(!(a=t.ChartEngine.drawingTools[e])&&t.Drawing[e]){a=t.Drawing[e],1892748691,1546715648,r=2;for(var l=1;1892748691!==s.M86(l.toString(),l.toString().length,9828);l++)t.ChartEngine.registerDrawingTool(e,a),r+=2;1546715648!==s.I86(r.toString(),r.toString().length,80597)&&t.ChartEngine.registerDrawingTool(e,a),t.ChartEngine.registerDrawingTool(e,a)}if(a){this.activeDrawing=new a,613985058,-1505092924,n=2;for(var h=1;613985058!==s.I86(h.toString(),h.toString().length,77480);h++)this.activeDrawing.construct(this,i),n+=2;if(-1505092924!==s.M86(n.toString(),n.toString().length,49215)&&this.activeDrawing.construct(this,i),this.activeDrawing.construct(this,i),!this.charts[i.name]&&this.activeDrawing.chartsOnly)return this.activeDrawing=null,o(this),!1}return this.chart.tempCanvas.style.display="block",this.controls.drawOk&&(this.controls.drawOk.style.display="none"),o(this),!0},t.ChartEngine.prototype.drawingClick=function(e,i,a){var r,n,s;if(t.Drawing&&e&&(Y.O5C(),""===this.openDialog&&(this.activeDrawing||this.activateDrawing(this.currentVectorParameters.vectorType,e))))return!!this.activeDrawing&&(this.userPointerDown&&!this.activeDrawing.dragToDraw?void(t.ChartEngine.drawingLine||this.activateDrawing(null)):(r=this.tickFromPixel(i,e.chart),n=this.panels[this.activeDrawing.panelName],s=this.adjustIfNecessary(n,r,this.valueFromPixel(a,n)),this.magnetizedPrice&&(s=this.adjustIfNecessary(n,r,this.magnetizedPrice)),this.activeDrawing.click(this.chart.tempCanvas.context,r,s)?this.activeDrawing&&("stx_cr","o","sshai","r",t.ChartEngine.drawingLine=!1,t.clearCanvas(this.chart.tempCanvas,this),this.addDrawing(this.activeDrawing),this.activateDrawing(null),this.adjustDrawings(),this.draw(),this.changeOccurred("vector"),this.controls.crossX.classList.replace("stx_crosshair_drawing","stx_crosshair"),this.controls.crossY.classList.replace("stx_crosshair_drawing","stx_crosshair")):("stx_cro","sshair_drawi","ng",this.changeOccurred("drawing"),t.ChartEngine.drawingLine=!0,this.controls.crossX.classList.replace("stx_crosshair","stx_crosshair_drawing"),this.controls.crossY.classList.replace("stx_crosshair","stx_crosshair_drawing")),!0))},t.ChartEngine.prototype.rightClickDrawing=function(e,t){var i,a,r;this.runPrepend("rightClickDrawing",arguments)||e.permanent||(this.callbackListeners.drawingEdit.length?(i="drawing",i+="Edit",this.dispatch(i,{stx:this,drawing:e,forceEdit:t})):(a="ve",a+="cto",a+="r",e.abort()||(r=this.exportDrawings(),this.removeDrawing(e),this.undoStamp(r,this.exportDrawings())),this.changeOccurred(a)),this.runAppend("rightClickDrawing",arguments))},t.ChartEngine.prototype.magnetize=function(){var e,i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D=Y;if(e="m",e+="agne",e+="tiz",e+="e",i="#39",i+="8",i+="d",i+="ff",a="#",a+="398d",a+="ff",r="C",r+="l",r+="o",r+="se",n="cal",n+="lo",n+="ut",s="fr",s+="eeform",this.magnetizedPrice=null,this.preferences.magnet&&!this.runPrepend("magnetize",arguments)&&!this.repositioningDrawing&&(o=this.currentVectorParameters.vectorType)&&"projection"!=o&&o!=s&&("annotation"!=o&&o!=n||!t.ChartEngine.drawingLine)&&(h=(l=this.currentPanel).chart,!((c=this.crosshairTick)>h.dataSet.length)&&(u=h.dataSet[c]))){(d=h.transformFunc&&l.yAxis===h.yAxis)&&u.transform&&(u=u.transform),g=this.getRenderedItems(),f=["Open","High","Low",r],this.magneticHold&&this.activeDrawing&&this.activeDrawing.penDown?g=-1!=f.indexOf(this.magneticHold)&&-1!=g.indexOf("High")?f:[this.magneticHold]:this.magneticHold=null,m=1e9,y=parseFloat(this.preferences.magnet);for(var M=0;M<g.length;M++)if(v=u[g[M]],x=this.getYAxisByField(l,g[M]),(b=t.existsInObjectChain(u,g[M]))&&(v=b.obj[b.member]),(v||0===v)&&(C=this.pixelFromTransformedValue(v,l,x),Math.abs(this.cy-C)<m)){if(m=Math.abs(this.cy-C),y&&y<=m)continue;this.magnetizedPrice=d?this.valueFromPixel(C,l):v,p=C,this.magneticHold=g[M]}S=this.pixelFromTick(c,h),w=p,t.clearCanvas(h.tempCanvas,this),(k=h.tempCanvas.context).beginPath(),k.lineWidth=1,D.x3g(33);var T=D.l3g(180,15,2553,9);D.c3g(34);var F=D.I3g(18,33,555,16,18);A=Math.max(this.layout.candleWidth,T)/F,k.arc(S,w,Math.min(A,8),0,2*Math.PI,!1),k.fillStyle=a,k.strokeStyle=i,k.fill(),k.stroke(),k.closePath(),h.tempCanvas.style.display="block",this.anyHighlighted&&this.container.classList.remove("stx-draggable"),this.activeDrawing&&this.activeDrawing.move(k,this.crosshairTick,this.magnetizedPrice),this.runAppend(e,arguments)}},t.ChartEngine.prototype.changeVectorType=function(e){this.currentVectorParameters.vectorType=e,Y.U5C(),t.Drawing&&t.Drawing.initializeSettings(this,e),t.ChartEngine.drawingLine&&this.undo(),this.insideChart&&this.doDisplayCrosshairs()},t.ChartEngine.prototype.changeVectorParameter=function(e,t){var i;if("f","o","n","t","und","e","fined","p","x","axisLabel"==e)t="true"===t.toString()||Number(t);else if("lineWidth"==e)t=Number(t);else if("fontSize"==e){Y.c3g(30);var a=Y.l3g(6,17,69,90);t=parseInt(t,a)+"px"}return("undefined"!==R((i=this.currentVectorParameters)[e])||"font"==e.substr(0,4)&&("family"==(e=e.substr(4).toLowerCase())&&"default"==t.toLowerCase()&&(t=null),void 0!==(i=i.annotation.font)[e]))&&(i[e]=t,!0)},t.ChartEngine.prototype.drawVectors=function(){var e,t,i,a,r,n;if(e="dr",Y.U5C(),e+="aw",e+="V",e+="ectors",!this.vectorsShowing&&!this.runPrepend(e,arguments)){if(this.vectorsShowing=!0,!this.chart.hideDrawings&&!this.highlightedDraggable){for(t={},a=0;a<this.drawingObjects.length;a++)(r=this.drawingObjects[a]).hidden||this.repositioningDrawing!==r&&(i=r.panelName,this.panels[r.panelName]&&!this.panels[r.panelName].hidden&&(t[i]||(t[i]=[]),t[i].push(r)));for(i in t){for(this.startClip(i),n=t[i],a=0;a<n.length;a++)n[a].render(this.chart.context);this.endClip()}}this.runAppend("drawVectors",arguments)}},t.ChartEngine.prototype.adjustDrawings=function(){for(var e,t=0;t<this.drawingObjects.length;t++)e=this.drawingObjects[t],this.panels[e.panelName]&&e.adjust()},t.Drawing=t.Drawing||function(){this.chartsOnly=!1,this.penDown=!1,Y.O5C()},t.Drawing.getDrawingParameters=function(e,i){var a,r,n,s;try{a=new t.Drawing[i]}catch(e){}if(!a)return null;a.stx=e,a.copyConfig(!0),r={},n=a.configs;for(var o=0;o<n.length;o++)r[n[o]]=a[n[o]];return(s=e.canvasStyle("stx_annotation"))&&r.font&&(r.font.size=s.fontSize,r.font.family=s.fontFamily,r.font.style=s.fontStyle,r.font.weight=s.fontWeight),r},t.Drawing.saveConfig=function(e,i){var a,r;i&&(a=e.preferences,Y.O5C(),a.drawings||(a.drawings={}),a.drawings[i]={},(r=new t.Drawing[i]).stx=e,t.Drawing.copyConfig(r),r.configs.forEach((function(e){a.drawings[i][e]=r[e]})),e.changeOccurred("preferences"))},t.Drawing.restoreDefaultConfig=function(e,i,a){a?e.preferences.drawings=null:e.preferences.drawings[i]=null,e.changeOccurred("preferences"),e.currentVectorParameters=t.clone(t.ChartEngine.currentVectorParameters),e.currentVectorParameters.vectorType=i},t.Drawing.initializeSettings=function(e,i){var a,r;(a=t.Drawing[i])&&(r=new a).initializeSettings&&r.initializeSettings(e)},t.Drawing.updateSource=function(e,t,i,a){var r,n;if("ve","c","tor",t){for(var s in r=!1,Y.U5C(),e.drawingObjects)(n=e.drawingObjects[s]).field&&(i?n.field==t?(n.field=i,r=!0):n.field.indexOf(t)>-1&&-1==n.field.indexOf(t+"-")&&(n.field=n.field.replace(t,i),r=!0):n.field.split("--\x3e")[0]!=t&&n.panelName!=t||(n.panelName=a,r=!0));r&&e.changeOccurred("vector")}},t.Drawing.prototype.copyConfig=function(e){t.Drawing.copyConfig(this,e)},t.Drawing.copyConfig=function(e,i){var a,r,n,s,o;for(a=e.stx.currentVectorParameters,r=e.configs,n=0;n<r.length;n++)"color"==(s=r[n])?e.color=a.currentColor:"parameters"==s?e.parameters=t.clone(a.fibonacci):"font"==s?e.font=t.clone(a.annotation.font):e[s]=a[s];if(i&&(o=e.stx.preferences)&&o.drawings)for(t.extend(e,o.drawings[a.vectorType]),n=0;n<r.length;n++)"f","o","n","t","color"==(s=r[n])?a.currentColor=e.color:"parameters"==s?a.fibonacci=t.clone(e.parameters):"font"==s?a.annotation.font=t.clone(e.font):a[s]=e[s]},t.Drawing.prototype.dragToDraw=!1,t.Drawing.prototype.permanent=!1,t.Drawing.prototype.chartsOnly=!1,t.Drawing.prototype.abort=function(e){},t.Drawing.prototype.measure=function(){},t.Drawing.prototype.construct=function(e,t){this.stx=e,Y.U5C(),this.panelName=t.name},t.Drawing.prototype.render=function(e){console.warn("must implement render function!")},t.Drawing.prototype.click=function(e,t,i){console.warn("must implement click function!")},t.Drawing.prototype.move=function(e,t,i){Y.U5C(),console.warn("must implement move function!")},t.Drawing.prototype.reposition=function(e,t,i,a){},t.Drawing.prototype.intersected=function(e,t,i){Y.O5C(),console.warn("must implement intersected function!")},t.Drawing.prototype.reconstruct=function(e,t){console.warn("must implement reconstruct function!")},t.Drawing.prototype.serialize=function(){console.warn("must implement serialize function!")},t.Drawing.prototype.adjust=function(){console.warn("must implement adjust function!")},t.Drawing.prototype.highlight=function(e){return Y.O5C(),(e&&!this.highlighted||!e&&this.highlighted)&&(this.highlighted=e),this.highlighted},t.Drawing.prototype.littleCircleRadius=function(){return Y.U5C(),6,6},t.Drawing.prototype.littleCircle=function(e,i,a,r){var n,s,o,l=Y;if(!this.permanent){-387923040,1902203338,n=2;for(var h=1;-387923040!==l.I86(h.toString(),h.toString().length,34598);h++)s=this.stx.defaultColor,l.c3g(35),n+=l.l3g(340661984,"2");1902203338!==l.I86(n.toString(),n.toString().length,57824)&&(s=this.stx.defaultColor),o=t.chooseForegroundColor(s),e.beginPath(),e.lineWidth=1,e.arc(i,a,this.littleCircleRadius(),0,2*Math.PI,!1),e.fillStyle=r?s:o,e.strokeStyle=s,e.setLineDash([]),l.U5C(),e.fill(),e.stroke(),e.closePath()}},t.Drawing.prototype.rotator=function(e,t,i,a){var r,n,s,o=Y;this.permanent||(r=this.littleCircleRadius(),n=this.stx.defaultColor,e.beginPath(),o.O5C(),e.lineWidth=2,a||(o.c3g(2),e.globalAlpha=o.I3g("0.5",1)),o.c3g(1),s=o.l3g(4,r),e.arc(t,i,s,0,3*Math.PI/2,!1),o.x3g(36),e.moveTo(o.I3g(t,2,s),o.I3g(i,2,o.c3g(1))),o.c3g(1),e.lineTo(o.I3g(t,s),i),o.c3g(37),e.lineTo(o.I3g(t,2,s),o.I3g(i,2,o.x3g(1))),o.x3g(7),e.moveTo(o.I3g(2,t),o.I3g(i,2,s,o.x3g(15))),o.x3g(7),e.lineTo(t,o.l3g(s,i)),o.x3g(7),e.lineTo(o.I3g(2,t),o.I3g(2,i,s,o.x3g(38))),e.strokeStyle=n,e.stroke(),e.closePath(),e.globalAlpha=1)},t.Drawing.prototype.mover=function(e,t,i,a){var r,n,s,o,l=Y;if(l.U5C(),!this.permanent){r=this.littleCircleRadius(),n=this.stx.defaultColor,l.c3g(27),s=l.I3g("5",1),l.x3g(1),o=l.I3g(r,1),e.save(),e.lineWidth=2,e.strokeStyle=n,e.translate(t,i),a||(e.globalAlpha=.5);for(var h=0;h<4;h++)e.rotate(Math.PI/2),e.beginPath(),e.moveTo(0,o),l.c3g(1),e.lineTo(0,l.l3g(o,s)),l.x3g(39),e.moveTo(-2,l.I3g("2",o,s)),l.x3g(1),e.lineTo(0,l.l3g(o,s)),l.x3g(15),e.lineTo(2,l.l3g(o,s,2)),e.closePath(),e.stroke();e.globalAlpha=1,e.restore()}},t.Drawing.prototype.resizer=function(e,t,i,a){var r,n,s,o,l=Y;if(!this.permanent){r=this.littleCircleRadius(),n=this.stx.defaultColor,l.c3g(40);var h=l.l3g(20,2,0,12);s=5*Math.sqrt(h),l.x3g(1),o=l.l3g(r,1),e.save(),e.lineWidth=2,e.strokeStyle=n,e.translate(t,i),e.rotate(-t*i/Math.abs(t*i)*Math.PI/4),a||(e.globalAlpha=.5);for(var c=0;c<2;c++)e.rotate(Math.PI),e.beginPath(),e.moveTo(0,o),l.x3g(2),e.lineTo(l.I3g("0",1),l.l3g(o,s,l.x3g(1))),l.x3g(15),e.moveTo(-2,l.I3g(o,s,2)),l.c3g(1),e.lineTo(0,l.l3g(o,s)),l.x3g(15),e.lineTo(2,l.l3g(o,s,2)),e.closePath(),e.stroke();e.globalAlpha=1,e.restore()}},t.Drawing.prototype.pointIntersection=function(e,t,i,a){if(!this.stx.panels[this.panelName])return!1;if(a){if(e>=i.cx0&&e<=i.cx1&&t>=i.cy0&&t<=i.cy1)return!0}else if(e>=i.x0&&e<=i.x1&&t>=Math.min(i.y0,i.y1)&&t<=Math.max(i.y0,i.y1))return!0;return!1},t.Drawing.prototype.setPoint=function(e,i,a,r){var n,s,o,l,h,c=Y;n=null,s=null,"number"==R(i)?n=i:i.length>=8?s=i:n=Number(i),c.U5C(),(a||0===a)&&(c.c3g(1),this[c.I3g("v",e)]=a),null!==n?(o=this.stx.dateFromTick(n,r,!0),c.x3g(1),this[c.I3g("tzo",e)]=o.getTimezoneOffset(),c.x3g(1),this[c.l3g("d",e)]=t.yyyymmddhhmmssmmm(o),c.x3g(1),this[c.I3g("p",e)]=[n,a]):null!==s&&("t","z","o","tz","o",o=t.strToDateTime(s),this["tzo"+e]||0===this["tzo"+e]||(c.c3g(1),this[c.I3g("tzo",e)]=o.getTimezoneOffset()),c.x3g(1),this[c.l3g("d",e)]=s,l=this["tzo"+e]-o.getTimezoneOffset(),o.setMinutes(o.getMinutes()+l),h=!1,"freeform"==this.name||t.ChartEngine.isDailyInterval(this.stx.layout.interval)||o.getHours()||o.getMinutes()||o.getSeconds()||o.getMilliseconds()||(h=!0),c.x3g(1),this[c.l3g("p",e)]=[this.stx.tickFromDate(t.yyyymmddhhmmssmmm(o),r,null,h),a])},t.Drawing.prototype.getLineColor=function(e){var i,a,r,n,s,o,l,h,c;if(e||(e=this.color),i=this.stx,a=e,this.highlighted)a=i.getCanvasColor("stx_highlight_vector");else if(t.isTransparent(a))a=i.defaultColor;else if("auto"==a&&(a=i.defaultColor,this.field)){for(r in i.layout.studies)if(s=(n=i.layout.studies[r]).outputs[n.outputMap[this.field]]){a=s.color||s;break}for(r in i.chart.seriesRenderers){l=i.chart.seriesRenderers[r];for(var u=0;u<l.seriesParams.length;u++){if("Cl","os","e",(c=(h=l.seriesParams[u]).field)||l.highLowBars||(c=this.defaultPlotField||"Close"),h.symbol&&h.subField&&(c+="--\x3e"+h.subField),this.field==c){a=h.color;break}h.field&&h.field==this.field.split("--\x3e")[0]&&(o=h.color)}}o&&(a=o)}return"auto"==a&&(a=i.defaultColor),a},t.Drawing.BaseTwoPoint=function(){this.p0=null,this.p1=null,this.color=""},t.inheritsFrom(t.Drawing.BaseTwoPoint,t.Drawing),t.Drawing.BaseTwoPoint.prototype.configs=[],t.Drawing.BaseTwoPoint.prototype.lineIntersection=function(e,i,a,r,n,s,o){var l,h,c;return n||(n=this.p0),s||(s=this.p1),l=this.stx,!(!n||!s)&&(void 0!==(h=t.convertBoxToPixels(l,this.panelName,a)).x0&&(c={x0:n[0],x1:s[0],y0:n[1],y1:s[1]},Y.O5C(),o||(c=t.convertBoxToPixels(l,this.panelName,c)),t.boxIntersects(h.x0,h.y0,h.x1,h.y1,c.x0,c.y0,c.x1,c.y1,r)))},t.Drawing.BaseTwoPoint.prototype.boxIntersection=function(e,t,i){return!(!this.p0||!this.p1)&&(!(i.x0>Math.max(this.p0[0],this.p1[0])||i.x1<Math.min(this.p0[0],this.p1[0]))&&(Y.U5C(),!(i.y1>Math.max(this.p0[1],this.p1[1])||i.y0<Math.min(this.p0[1],this.p1[1]))))},t.Drawing.BaseTwoPoint.prototype.accidentalClick=function(e,t){var i,a,r,n,s,o,l,h=Y;if(i=this.stx.panels[this.panelName],a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(e,i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,e,t),h.c3g(7),o=Math.abs(h.I3g(a,r)),h.c3g(7),l=Math.abs(h.I3g(n,s)),h.c3g(41),Math.sqrt(h.I3g(l,l,o,o))<10)return this.penDown=!1,this.dragToDraw&&this.stx.undo(),!0},t.Drawing.BaseTwoPoint.prototype.click=function(e,t,i){var a;return this.copyConfig(),a=this.stx.panels[this.panelName],this.penDown?this.accidentalClick(t,i)?this.dragToDraw:(this.setPoint(1,t,i,a.chart),this.penDown=!1,!0):(Y.x3g(0),this.setPoint(Y.I3g("0",0),t,i,a.chart),this.penDown=!0,!1)},t.Drawing.BaseTwoPoint.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart))},t.Drawing.BaseTwoPoint.prototype.move=function(e,t,i){Y.U5C(),this.penDown&&(this.copyConfig(),this.p1=[t,i],this.render(e))},t.Drawing.BaseTwoPoint.prototype.measure=function(){var e,i,a,r,n=Y;if(n.U5C(),this.p0&&this.p1){this.stx.setMeasure(this.p0[1],this.p1[1],this.p0[0],this.p1[0],!0,this.name),e=this.stx.controls.mSticky,2082434424,-242328805,n.c3g(2),i=n.I3g("2",1);for(var s=1;2082434424!==n.I86(s.toString(),s.toString().length,77849);s++)a=e&&e.querySelector(".mStickyInterior"),i+=2;-242328805!==n.I86(i.toString(),i.toString().length,23291)&&(a=e||e.querySelector("")),a&&((r=[]).push(t.capitalize(this.name)),this.getYValue&&r.push(this.field||this.stx.defaultPlotField||"Close"),r.push(a.innerHTML),a.innerHTML=r.join("<br>"))}},t.Drawing.BaseTwoPoint.prototype.reposition=function(e,t,i,a){var r,n,s;t&&(r=this.stx.panels[this.panelName],Y.U5C(),n=t.tick-i,s=t.value-a,"move"==t.action?(Y.c3g(0),this.setPoint(Y.I3g("0",0),t.p0[0]-n,t.p0[1]-s,r.chart),this.setPoint(1,t.p1[0]-n,t.p1[1]-s,r.chart),this.render(e)):"drag"==t.action&&(this[t.point]=[i,a],this.setPoint(0,this.p0[0],this.p0[1],r.chart),this.setPoint(1,this.p1[0],this.p1[1],r.chart),this.render(e)))},t.Drawing.BaseTwoPoint.prototype.drawDropZone=function(e,t,i,a,r){var n,s,o,l,h;(n=this.stx.panels[this.panelName])&&(s=n.left,o=n.width,(a||0===a)&&(s=this.stx.pixelFromTick(a,n.chart)),(r||0===r)&&(o=this.stx.pixelFromTick(r,n.chart)),l=this.stx.pixelFromPrice(t,n),h=this.stx.pixelFromPrice(i,n),e.fillStyle="#008000",e.globalAlpha=.2,Y.c3g(7),e.fillRect(s,l,Y.I3g(s,o),Y.l3g(l,h)),e.globalAlpha=1)},t.Drawing.annotation=function(){this.name="annotation",this.arr=[],this.w=0,this.h=0,this.padding=4,this.text="",this.ta=null,this.fontSize=0,this.font={}},t.inheritsFrom(t.Drawing.annotation,t.Drawing.BaseTwoPoint),t.Drawing.annotation.prototype.getFontString=function(){var e,t,i;this.fontDef={style:null,weight:null,size:"12px",family:null},e=2;for(var a=1;-12529006!==Y.M86(a.toString(),a.toString().length,24095);a++)t=this.stx.canvasStyle(""),e+=2;for(var r in-664723511!==Y.M86(e.toString(),e.toString().length,89680)&&(t=this.stx.canvasStyle("stx_annotation")),t&&(t.fontStyle&&(this.fontDef.style=t.fontStyle),t.fontWeight&&(this.fontDef.weight=t.fontWeight),t.fontSize&&(this.fontDef.size=t.fontSize),t.fontFamily&&(this.fontDef.family=t.fontFamily)),this.font.style&&(this.fontDef.style=this.font.style),this.font.weight&&(this.fontDef.weight=this.font.weight),this.font.size&&(this.fontDef.size=this.font.size),this.font.family&&(this.fontDef.family=this.font.family),this.fontString="",i=!0,this.fontDef)this.fontDef[r]&&(i?i=!1:this.fontString+=" ",this.fontString+=this.fontDef[r])},t.Drawing.annotation.prototype.configs=["color","font"],t.Drawing.annotation.prototype.measure=function(){},t.Drawing.annotation.prototype.render=function(e){var t,i,a,r,n,s,o,l,h,c,u,d,p,g,f=Y;if(!this.ta&&(t=this.stx.panels[this.panelName])){if(i=this.stx.pixelFromTick(this.p0[0],t.chart),a=this.stx.pixelFromValueAdjusted(t,this.p0[0],this.p0[1]),e.font=this.fontString,e.textBaseline="middle",r=i,n=a,s=this.w,o=this.h,l=this.getLineColor(),this.stem){if(this.stem.d){h=this.stx.pixelFromTick(this.stem.t),u=this.stx.pixelFromValueAdjusted(t,this.stem.t,this.stem.v),f.x3g(42),c=f.l3g(2,s,r),733083242,344368478,p=2;for(var m=1;733083242!==f.M86(m.toString(),m.toString().length,92524);m++)f.x3g(42),d=f.l3g(2,o,n),p+=2;344368478!==f.M86(p.toString(),p.toString().length,99932)&&(f.x3g(43),d=f.l3g(o,8,n))}else this.stem.x&&(h=r,u=n,r+=this.stem.x,n+=this.stem.y,f.c3g(42),c=f.I3g(2,s,r),f.x3g(42),d=f.I3g(2,o,n));e.beginPath(),this.borderColor?e.strokeStyle=this.borderColor:e.strokeStyle=l,e.moveTo(h,u),e.lineTo(c,d),e.stroke()}g=e.lineWidth,this.highlighted?("stx_annotation_h","ighligh","t_bg",this.stx.canvasColor("stx_annotation_highlight_bg",e),f.c3g(7),e.fillRect(f.I3g(g,r),f.I3g(g,2,o,n,f.x3g(44)),f.I3g(s,2,g,f.c3g(45)),f.l3g(o,2,g,f.x3g(45)))):this.fillColor?(e.fillStyle=this.fillColor,f.x3g(46),e.fillRect(r,f.I3g(n,2,o),s,o)):this.stem&&(e.fillStyle=this.stx.containerColor,f.x3g(46),e.fillRect(r,f.I3g(n,2,o),s,o)),this.borderColor&&(e.beginPath(),e.strokeStyle=this.highlighted?this.stx.getCanvasColor("stx_highlight_vector"):this.borderColor,f.c3g(7),e.rect(f.l3g(g,r),f.I3g(g,2,o,n,f.x3g(44)),f.I3g(s,2,g,f.c3g(45)),f.I3g(o,2,g,f.c3g(45))),e.stroke()),this.highlighted?this.stx.canvasColor("stx_annotation_highlight",e):e.fillStyle=l,f.x3g(47);var y=f.I3g(8,8,18,130,16);if(n+=this.padding/y,!this.ta)for(var v=0;v<this.arr.length;v++){e.fillText(this.arr[v],r+this.padding,n-o/2+this.fontSize/2),f.c3g(48);var x=f.l3g(5,2,122,12);n+=this.fontSize+x}e.textBaseline="alphabetic"}},t.Drawing.annotation.prototype.onChange=function(e){},t.Drawing.annotation.prototype.edit=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x=Y;if(("ca","ll","o","ut","p","x","p","x","p","x",a=this.stx.panels[this.panelName])&&(r=this.stx.controls.annotationSave,n=this.stx.controls.annotationCancel,r&&n&&(s=this.stx,o=this.ta,s.editingAnnotation=!0,x.O5C(),s.undisplayCrosshairs(),s.openDialog="annotation",o||("100","px","ha","rd",(o=this.ta=document.createElement("TEXTAREA")).className="stx_annotation",o.onkeyup=C(this),o.onmouseup=(m=s,x.O5C(),function(e){m.manageTouchAndMouse&&t.ChartEngine.drawingLine&&m.mouseup(e)}),o.setAttribute("wrap","hard"),t.isIOS7or8&&o.setAttribute("placeholder","Enter Text"),s.chart.container.appendChild(o),o.style.position="absolute",o.style.width="100px",o.style.height="20px",o.value=this.text,t.touchDevice&&(o.ontouchstart=function(e){e.stopPropagation()})),l=this,o.oninput=function(e){"historyUndo"!=e.inputType&&"historyRedo"!=e.inputType&&l.onChange(e)},o.style.font=this.fontString,this.color&&("transparent"==this.color||"auto"==this.color?(h=getComputedStyle(o))&&t.isTransparent(h.backgroundColor)?o.style.color=s.defaultColor:("#0","0","0",o.style.color="#000"):o.style.color=this.color),c=s.pixelFromTick(this.p0[0],a.chart),u=s.pixelFromValueAdjusted(a,this.p0[0],this.p0[1]),o.style.left=c+140<s.chart.canvasRight?c+"px":s.chart.canvasRight-200+"px",o.style.top=u+60<s.chart.canvasHeight?u-(isNaN(this.h)?this.defaultHeight:this.h/2)+"px":u-60+"px","callout"==this.name&&("p","x",o.style.left=t.stripPX(o.style.left)-(isNaN(this.w)?this.defaultWidth:this.w/2)+"px"),t.safeClickTouch(r,(y=this,x.O5C(),function(e){var i;""!==y.ta.value&&(y.text=y.ta.value,(i=y.stx).editingAnnotation=!1,y.adjust(),i.drawingSnapshot?i.undoStamp(t.shallowClone(i.drawingSnapshot),i.exportDrawings()):i.addDrawing(y),i.undo(),i.cancelTouchSingleClick=!0,i.changeOccurred("vector"))})),t.safeClickTouch(n,(v=this,function(e){var t;(t=v.stx).editingAnnotation=!1,t.undo(),t.cancelTouchSingleClick=!0})),C(this)(),r.style.display="inline-block",n.style.display="inline-block",i&&(s.drawingSnapshot=s.exportDrawings(),this.hidden=!0,s.draw(),s.activeDrawing=this,t.ChartEngine.drawingLine=!0,e=s.chart.tempCanvas.context,s.chart.tempCanvas.style.display="block",this.w=o.clientWidth,this.h=o.clientHeight,t.clearCanvas(e.canvas,s),this.render(e),this.edit(e)),o.focus(),t.isAndroid&&!t.is_chrome&&!t.isFF))){this.priorBottom=s.chart.container.style.bottom,x.c3g(53),d=x.I3g("400",2147483647),x.c3g(37);var b=x.I3g(5,6,101);(p=s.resolveY(u)+b)>t.pageHeight()-d&&("p","x",g=t.pageHeight()-p,x.c3g(7),f=x.l3g(g,d),x.c3g(1),s.chart.container.style.bottom=x.l3g(f,"px"))}function C(e){return x.O5C(),function(i){var a,s,o,l,h,c,u,d;if(i)switch(i.keyCode){case 27:return void e.stx.undo()}a=e.stx,o=(s=e.ta).value.split("\n"),l=0,a.chart.context.font=e.fontString;for(var p=0;p<o.length;p++)(h=a.chart.context.measureText(o[p]).width)>l&&(l=h);x.x3g(15);var g=x.I3g(10,13,22);x.c3g(49);var f=x.I3g(4,2,2,1,4);c=(o.length+g)*(e.fontSize+f),l<50&&(l=50),x.c3g(36),s.style.width=x.I3g(l,30,"px"),x.x3g(1),s.style.height=x.I3g(c,"px"),u=parseInt(t.stripPX(s.style.top),10),d=t.stripPX(s.style.left),l=s.clientWidth,c=s.clientHeight,d+l+100<e.stx.chart.canvasWidth?("p","x","p","x",x.c3g(1),r.style.top=x.I3g(u,"px"),x.c3g(1),n.style.top=x.l3g(u,"px"),x.c3g(50),r.style.left=x.l3g(l,"px",d,"10"),x.c3g(51),n.style.left=x.l3g("px",l,d,60)):u+c+30<e.stx.chart.canvasHeight?(x.c3g(50),r.style.top=x.l3g(c,"px",u,"10"),x.x3g(51),n.style.top=x.I3g("px",c,u,10),x.x3g(1),r.style.left=x.I3g(d,"px"),x.c3g(36),n.style.left=x.l3g(d,50,"px")):("p","x","p","x","p","x",x.x3g(37),r.style.top=x.I3g(u,35,"px"),x.c3g(37),n.style.top=x.l3g(u,35,"px"),x.x3g(1),r.style.left=x.I3g(d,"px"),x.c3g(52),n.style.left=x.l3g("px",0,"50",d))}}},t.Drawing.annotation.prototype.click=function(e,t,i){var a;if(!this.stx.overXAxis&&!this.stx.overYAxis)return a=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,t,i,a.chart),this.adjust(),this.edit(e),!1},t.Drawing.annotation.prototype.reposition=function(e,t,i,a){var r,n,s;t&&(r=this.stx.panels[this.panelName],n=t.tick-i,s=t.value-a,this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.render(e))},t.Drawing.annotation.prototype.intersected=function(e,i,a){var r,n,s,o,l,h,c,u=Y;if(r=this.stx.panels[this.panelName],!this.p0)return null;n=this.stx.pixelFromTick(this.p0[0],r.chart),u.c3g(54);var d=u.I3g(10,6,18,5,16);u.c3g(55);var p=u.l3g(38,5,8,1);return s=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[d])-this.h/p,o=n+this.w,l=s+this.h,this.stem&&this.stem.x&&(n+=this.stem.x,o+=this.stem.x,s+=this.stem.y,l+=this.stem.y),h=this.stx.pixelFromTick(e,r.chart),c=this.stx.pixelFromValueAdjusted(r,e,i),h+a.r>=n&&h-a.r<=o&&c+a.r>=s&&c-a.r<=l&&(this.highlighted=!0,{p0:t.clone(this.p0),tick:e,value:i})},t.Drawing.annotation.prototype.abort=function(){var e,i,a,r,n=Y;if("no","n","e",e=this.stx.controls.annotationSave,i=this.stx.controls.annotationCancel,e&&(e.style.display="none"),i&&(i.style.display="none"),this.ta&&this.stx.chart.container.removeChild(this.ta),this.ta=null,this.stx.openDialog="",this.stx.showCrosshairs(),n.O5C(),this.stx.editingAnnotation=!1,t.clearCanvas(this.stx.chart.tempCanvas,this.stx),t.isAndroid&&!t.is_chrome&&!t.isFF){-76575393,n.x3g(0),a=-n.I3g("655594201",0),n.c3g(53),r=n.l3g("2",2147483647);for(var s=1;-76575393!==n.M86(s.toString(),s.toString().length,68903);s++)this.stx.chart.container.style.bottom=this.priorBottom,r+=2;n.I86(r.toString(),r.toString().length,4050)!==a&&(this.stx.chart.container.style.bottom=this.priorBottom)}t.fixScreen()},t.Drawing.annotation.prototype.reconstruct=function(e,i){this.stx=e,this.color=i.col,this.panelName=i.pnl,this.d0=i.d0,this.tzo0=i.tzo0,this.v0=i.v0,this.text=e.escapeOnSerialize?decodeURIComponent(i.text):i.text,this.stem=i.stem,this.borderColor=i.bc,Y.U5C(),this.fillColor=i.bg,this.lineWidth=i.lw,this.pattern=i.ptrn,this.font=t.replaceFields(i.fnt,{st:"style",sz:"size",wt:"weight",fl:"family"}),this.font||(this.font={}),this.adjust()},t.Drawing.annotation.prototype.serialize=function(){var e,i;return e={name:this.name,pnl:this.panelName,col:this.color,d0:this.d0,tzo0:this.tzo0,v0:this.v0,text:this.stx.escapeOnSerialize?encodeURIComponent(this.text):this.text},this.font&&("s","z",i=t.removeNullValues(t.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"})),t.isEmpty(i)||(e.fnt=i)),this.stem&&(e.stem={d:this.stem.d,v:this.stem.v,x:this.stem.x,y:this.stem.y}),this.borderColor&&(e.bc=this.borderColor),this.fillColor&&(e.bg=this.fillColor),this.lineWidth&&(e.lw=this.lineWidth),this.pattern&&(e.ptrn=this.pattern),e},t.Drawing.annotation.prototype.renderText=function(){var e,i,a,r,n,s,o=Y;if(this.getFontString(),e=this.stx.panels[this.panelName]){this.arr=this.text.split("\n"),i=0,this.stx.chart.context.font=this.fontString;for(var l=0;l<this.arr.length;l++)(a=this.stx.chart.context.measureText(this.arr[l]).width)>i&&(i=a);if(0===i)o.x3g(56),i=o.I3g(9,10,15388,19,9)*this.defaultWidth;this.fontSize=t.stripPX(this.fontDef.size),o.c3g(7);var h=o.I3g(8,10);r=this.arr.length*(this.fontSize+h),t.touchDevice&&(r+=5),o.c3g(57);var c=o.I3g(11,5,11,3);this.w=i+this.padding*c,this.h=r+2*this.padding,n=this.stx.pixelFromTick(this.p0[0],e.chart)+i,o.c3g(58);var u=o.l3g(3,8,6,335,16);s=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[u])+r,this.p1=[this.stx.tickFromPixel(n,e.chart),this.stx.valueFromPixel(s,e)],this.stem&&this.stem.d&&(this.stem.t=this.stx.tickFromDate(this.stem.d,e.chart))}},t.Drawing.annotation.prototype.adjust=function(){var e;Y.U5C(),(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.renderText())},t.Drawing.segment=function(){Y.U5C(),this.name="segment"},t.inheritsFrom(t.Drawing.segment,t.Drawing.BaseTwoPoint),t.Drawing.segment.prototype.render=function(e){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v;if("no","n","e",a=this.stx.panels[this.panelName]){if(r=this.stx.pixelFromTick(this.p0[0],a.chart),Y.O5C(),n=this.stx.pixelFromTick(this.p1[0],a.chart),s=this.stx.pixelFromValueAdjusted(a,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(a,this.p1[0],this.p1[1]),l=this.lineWidth,h=this.getLineColor(),"none"==(c={pattern:this.pattern,lineWidth:l}).pattern&&(c.pattern="solid"),this.stx.plotLine(r,n,s,o,h,this.name,e,a,c),this.axisLabel&&!this.repositioner)if("horizontal"==this.name)this.stx.endClip(),u=this.p0[1],a.chart.transformFunc&&(u=a.chart.transformFunc(this.stx,a.chart,u)),u=a.yAxis.priceFormatter?a.yAxis.priceFormatter(this.stx,a,u):this.stx.formatYAxisPrice(u,a),this.stx.createYAxisLabel(a,u,s,h),this.stx.startClip(a.name);else if("vertical"==this.name&&this.p0[0]>=0&&!this.stx.chart.xAxis.noDraw){if(d=this.stx.dateFromTick(this.p0[0],a.chart,!0),t.ChartEngine.isDailyInterval(this.stx.layout.interval))d.setHours(0,0,0,0);else{Y.c3g(1);var x=Y.l3g(77,923);g=d.getSeconds()*x+d.getMilliseconds(),i.Date&&this.stx.displayZone&&(p=new i.Date(d.getTime(),this.stx.displayZone),d=new Date(p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes()),d=new Date(d.getTime()+g))}f=t.mmddhhmm(t.yyyymmddhhmm(d)),a.chart.xAxis.formatter?f=a.chart.xAxis.formatter(d,this.name,null,null,f):this.stx.internationalizer&&(0!==d.getHours()||0!==d.getMinutes()?(m=this.stx.internationalizer.monthDay.format(d),m+=" "+this.stx.internationalizer.hourMinute.format(d)):m=this.stx.internationalizer.yearMonthDay.format(d),f=m),this.stx.endClip(),this.stx.createXAxisLabel({panel:a,txt:f,x:r,backgroundColor:h,color:null,pointed:!0,padding:2}),this.stx.startClip(a.name)}this.highlighted&&"horizontal"!=this.name&&"vertical"!=this.name&&("p","1",y="p0"==this.highlighted,v="p1"==this.highlighted,this.littleCircle(e,r,s,y),this.littleCircle(e,n,o,v))}},t.Drawing.segment.prototype.abort=function(){this.stx.setMeasure(null,null,null,null,!1)},t.Drawing.segment.prototype.intersected=function(e,i,a){var r,n;if(!this.p0||!this.p1)return null;if("horizontal"!=(r=this.name)&&"vertical"!=r&&"gartley"!=r)for(var s in n={0:this.p0,1:this.p1})if(this.pointIntersection(n[s][0],n[s][1],a))return Y.x3g(1),this.highlighted=Y.l3g("p",s),{action:"drag",point:"p"+s};return Y.O5C(),"horizontal"!=r&&"vertical"!=r||(r="line"),this.lineIntersection(e,i,a,r)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null},t.Drawing.segment.prototype.configs=["color","lineWidth","pattern"],t.Drawing.segment.prototype.copyConfig=function(e){t.Drawing.copyConfig(this,e),"none"==this.pattern&&-1==this.configs.indexOf("fillColor")&&(this.pattern="solid")},t.Drawing.segment.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,Y.O5C(),this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.adjust()},t.Drawing.segment.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},t.Drawing.line=function(){Y.O5C(),this.name="line"},t.inheritsFrom(t.Drawing.line,t.Drawing.segment),Y.U5C(),t.Drawing.line.prototype.dragToDraw=!1,t.Drawing.line.prototype.calculateOuterSet=function(e){var i,a,r;if(this.p0[0]!=this.p1[0]&&this.p0[1]!=this.p1[1]&&!t.ChartEngine.isDailyInterval(this.stx.layout.interval)){(i={x0:this.p0[0],y0:this.p0[1],x1:this.p1[0],y1:this.p1[1]}).x0>i.x1&&(i={x0:this.p1[0],y0:this.p1[1],x1:this.p0[0],y1:this.p0[1]}),Y.x3g(34);var n=Y.I3g(16,1018,15096,5,17);a=i.x0-n,r=i.x1+1e3,this.v0B=t.yIntersection(i,a),Y.O5C(),this.v1B=t.yIntersection(i,r),this.d0B=this.stx.dateFromTick(a,e.chart),this.d1B=this.stx.dateFromTick(r,e.chart)}},t.Drawing.line.prototype.click=function(e,t,i){var a;if(a=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?(Y.U5C(),this.accidentalClick(t,i)?this.dragToDraw:(this.setPoint(1,t,i,a.chart),this.calculateOuterSet(a),this.penDown=!1,!0)):(Y.c3g(35),this.setPoint(Y.l3g(1111119744,"0"),t,i,a.chart),this.penDown=!0,!1)},t.Drawing.line.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.v0=t.v0,this.v1=t.v1,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,t.d0B&&(this.d0B=t.d0B,this.d1B=t.d1B,this.v0B=t.v0B,this.v1B=t.v1B),this.adjust()},t.Drawing.line.prototype.serialize=function(){var e;return e={name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1},this.d0B&&(e.d0B=this.d0B,e.d1B=this.d1B,e.v0B=this.v0B,e.v1B=this.v1B),e},t.Drawing.line.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),Y.x3g(7),this.setPoint(Y.l3g(0,"1"),this.d1,this.v1,e.chart),t.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&(this.setPoint(0,this.d0B,this.v0B,e.chart),this.setPoint(1,this.d1B,this.v1B,e.chart)))},t.Drawing.horizontal=function(){Y.U5C(),this.name="horizontal"},t.inheritsFrom(t.Drawing.horizontal,t.Drawing.segment),t.Drawing.horizontal.prototype.dragToDraw=!1,t.Drawing.horizontal.prototype.measure=function(){},t.Drawing.horizontal.prototype.click=function(e,t,i){var a;if(a=this.stx.panels[this.panelName],Y.U5C(),a)return this.copyConfig(),Y.x3g(7),this.setPoint(Y.l3g(0,"0"),t,i,a.chart),!0},t.Drawing.horizontal.prototype.intersected=function(e,t,i){var a,r;return"l","i","n","e",this.lineIntersection(e,t,i,"line")?("m","ove",a=this.stx.chart.dataSet.length,r=this.p0[1],this.highlighted=!0,{action:"move",p0:[a-2,r],p1:[a-1,r],tick:e,value:t}):null},t.Drawing.horizontal.prototype.reconstruct=function(e,t){this.stx=e,Y.U5C(),this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.v0=t.v0,this.d0=t.d0,this.tzo0=t.tzo0,this.axisLabel=t.al,this.adjust()},t.Drawing.horizontal.prototype.serialize=function(){return Y.O5C(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,v0:this.v0,d0:this.d0,tzo0:this.tzo0,al:this.axisLabel}},t.Drawing.horizontal.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(Y.U5C(),Y.c3g(2),this.setPoint(Y.I3g("0",1),this.d0,this.v0,e.chart),this.p1=[this.p0[0]+100,this.p0[1]])},t.Drawing.horizontal.prototype.configs=["color","lineWidth","pattern","axisLabel"],t.Drawing.vertical=function(){Y.O5C(),this.name="vertical"},t.inheritsFrom(t.Drawing.vertical,t.Drawing.horizontal),t.Drawing.vertical.prototype.measure=function(){},t.Drawing.vertical.prototype.intersected=t.Drawing.segment.prototype.intersected,t.Drawing.vertical.prototype.adjust=function(){var e;if(e=this.stx.panels[this.panelName]){this.setPoint(0,this.d0,this.v0,e.chart),Y.U5C(),Y.c3g(19);var t=Y.l3g(13,8,103);this.p1=[this.p0[0],this.p0[t]+1]}},t.Drawing.measure=function(){this.name="measure"},t.inheritsFrom(t.Drawing.measure,t.Drawing.segment),t.Drawing.measure.prototype.click=function(e,t,i){return this.copyConfig(),this.penDown?(Y.O5C(),this.stx.undo(),this.penDown=!1,!0):(this.p0=[t,i],this.penDown=!0,!1)},t.Drawing.rectangle=function(){this.name="rectangle"},t.inheritsFrom(t.Drawing.rectangle,t.Drawing.BaseTwoPoint),t.Drawing.rectangle.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m=Y;(i=this.stx.panels[this.panelName])&&(a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),o=Math.round(Math.min(a,r))+.5,l=Math.min(n,s),h=Math.max(a,r)-o,c=Math.max(n,s)-l,u=this.color,this.highlighted&&("st","x_hi","ghlight","_vector",u=this.stx.getCanvasColor("stx_highlight_vector")),(d=this.fillColor)&&!t.isTransparent(d)&&"auto"!=d&&(e.beginPath(),e.rect(o,l,h,c),e.fillStyle=d,e.globalAlpha=.2,e.fill(),e.closePath(),e.globalAlpha=1),p={pattern:this.pattern,lineWidth:this.lineWidth},this.highlighted&&"none"==p.pattern&&(p.pattern="solid",.1==p.lineWidth&&(p.lineWidth=1)),this.stx.plotLine(a,r,n,n,u,"segment",e,i,p),m.c3g(7),this.stx.plotLine(r,r,m.l3g(.5,n),m.l3g(s,.5,m.c3g(1)),u,"segment",e,i,p),this.stx.plotLine(r,a,s,s,u,"segment",e,i,p),m.x3g(45),this.stx.plotLine(a,a,m.l3g(s,"0.5",1),m.I3g(1,n,"0.5",m.x3g(59)),u,"segment",e,i,p),this.highlighted&&("p","1","p","0",g="p0"==this.highlighted,f="p1"==this.highlighted,this.littleCircle(e,a,n,g),this.littleCircle(e,r,s,f)))},t.Drawing.rectangle.prototype.intersected=function(e,i,a){var r;if(!this.p0||!this.p1)return null;for(var n in r={0:this.p0,1:this.p1})if(this.pointIntersection(r[n][0],r[n][1],a))return Y.c3g(1),this.highlighted=Y.I3g("p",n),{action:"drag",point:"p"+n};return this.boxIntersection(e,i,a)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null},t.Drawing.rectangle.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.rectangle.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,Y.U5C(),this.adjust()},t.Drawing.rectangle.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},t.Drawing.shape=function(){this.name="shape",this.radians=0,this.a=0,this.rotating=!1,this.textMeasure=!1,this.configurator="shape",this.dimension=[0,0],this.points=[]},t.inheritsFrom(t.Drawing.shape,t.Drawing.BaseTwoPoint),t.Drawing.shape.prototype.setRotationOnInitialDraw=!1,t.Drawing.shape.prototype.measure=function(){},t.Drawing.shape.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w=Y;if("undefin","ed",this.points.length&&(i=this.stx.panels[this.panelName])){if(a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),this.p1){if(n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),e.globalAlpha=.5,e.fillStyle="#000000",this.rotating){if(w.x3g(60),this.radians=Math.atan(w.I3g(r,s,n,a)),n<a)this.radians+=Math.PI;else if(s<r){w.x3g(1);var k=w.I3g(0,2);this.radians+=k*Math.PI}w.x3g(7);var A=w.I3g(11838265856,12461332480);w.x3g(61);var D=w.I3g(228630874,19,2,32661549,3);this.a=parseInt((36*this.radians/Math.PI).toFixed(0),"10"<<A)*("5"<<D),this.a%=360,w.c3g(62);var M=w.I3g(193,7,3,392);this.radians=this.a*Math.PI/M,this.textMeasure&&e.fillText(this.a+"°",n+10,s+10)}else this.penDown&&(this.sx=Math.max(1,parseFloat(Math.abs(2*(n-a)/this.dimension[0]).toFixed(1))),n<a&&(this.sx*=-1),this.sy=Math.max(1,parseFloat(Math.abs(2*(s-r)/this.dimension[1]).toFixed(1))),s<r&&(this.sy*=-1),this.textMeasure&&e.fillText(this.sx+"x,"+this.sy+"x",n+this.sx+5,s+this.sy+5));e.globalAlpha=1}"undefined"===R(this.sx)&&(this.sx=this.sy=1),(o=this.lineWidth)||(o=1.1),l={pattern:this.pattern,lineWidth:o},this.highlighted&&"none"==l.pattern&&("soli","d",l.pattern="solid",.1==l.lineWidth&&(w.x3g(0),l.lineWidth=w.l3g("1",0))),("auto"==(h=this.color)||t.isTransparent(h))&&(h=this.stx.defaultColor),this.highlighted&&("s","tx_highl","i","ght_vector",h=this.stx.getCanvasColor("stx_highlight_vector"),.1==o&&(o=1.1)),c=this.fillColor,w.x3g(1);var T=w.l3g(161013925,966083547);for(o/=Math.abs(this.sx*this.sy)*("2"<<T)/(Math.abs(this.sx)+Math.abs(this.sy)),e.save(),e.translate(a,r),e.rotate(this.radians),e.scale(this.sx,i.yAxis.flipped?-this.sy:this.sy),p={x:(this.dimension[0]-1)/2,y:(this.dimension[1]-1)/2},u=0;u<this.points.length;u++){for(e.beginPath(),d=0;d<this.points[u].length;d++)"M"==this.points[u][d]?(g=this.points[u][++d]-p.x,f=this.points[u][++d]-p.y,e.moveTo(g,f)):"L"==this.points[u][d]?(g=this.points[u][++d]-p.x,f=this.points[u][++d]-p.y,e.lineTo(g,f)):"Q"==this.points[u][d]?(m=this.points[u][++d]-p.x,v=this.points[u][++d]-p.y,g=this.points[u][++d]-p.x,f=this.points[u][++d]-p.y,e.quadraticCurveTo(m,v,g,f)):"B"==this.points[u][d]&&(m=this.points[u][++d]-p.x,v=this.points[u][++d]-p.y,y=this.points[u][++d]-p.x,x=this.points[u][++d]-p.y,g=this.points[u][++d]-p.x,f=this.points[u][++d]-p.y,e.bezierCurveTo(m,v,y,x,g,f));e.closePath(),c&&!t.isTransparent(c)&&"auto"!=c&&(e.fillStyle=c,e.fill()),h&&"none"!=this.pattern&&(e.strokeStyle=h,e.lineWidth=o,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(o,this.pattern)),e.lineDashOffset=0),e.stroke())}e.restore(),e.save(),e.translate(a,r),e.rotate(this.radians),this.highlighted?(b="p0"==this.highlighted,C="p1"==this.highlighted,S="p2"==this.highlighted,this.littleCircle(e,0,0,b),this.mover(e,0,0,b),this.littleCircle(e,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,C),this.resizer(e,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,C),this.littleCircle(e,this.sx*this.dimension[0]/2,0,S),this.rotator(e,this.sx*this.dimension[0]/2,0,S),e.globalAlpha=.5,e.fillStyle="#000000",this.textMeasure&&("x",",",e.fillText(this.sx+"x,"+this.sy+"x",this.sx*this.dimension[0]/2+12,this.sy*this.dimension[1]/2+5),e.fillText(this.a+"°",this.sx*this.dimension[0]/2+12,5)),e.globalAlpha=1):this.penDown&&(this.rotating?this.rotator(e,this.sx*this.dimension[0]/2,0,!0):this.resizer(e,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,!0)),e.restore()}},t.Drawing.shape.prototype.reposition=function(e,t,i,a){var r,n,s,o,l,h,c,u=Y;if("m","ove",t)if(r=this.stx.panels[this.panelName],"move"==t.action)n=t.tick-i,s=t.value-a,this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.render(e);else if("rot","a","te","s","cal","e",o=this.stx.pixelFromTick(this.p0[0],r.chart),l=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1]),h=this.stx.pixelFromTick(i,r.chart),c=this.stx.pixelFromValueAdjusted(r,i,a),"scale"==t.action)this[t.point]=[i,a],this.sx=parseFloat((((h-o)*Math.cos(this.radians)+(c-l)*Math.sin(this.radians))/(this.dimension[0]/2)).toFixed(1)),Math.abs(this.sx)<1&&(this.sx/=Math.abs(this.sy)),this.sy=parseFloat((((c-l)*Math.cos(this.radians)-(h-o)*Math.sin(this.radians))/(this.dimension[1]/2)).toFixed(1)),Math.abs(this.sy)<1&&(this.sy/=Math.abs(this.sy)),this.render(e);else if("rotate"==t.action){this[t.point]=[i,a],u.c3g(60),this.radians=Math.atan(u.I3g(l,c,h,o)),h<o?this.radians+=Math.PI:c<l&&(this.radians+=2*Math.PI),u.x3g(40);var d=u.l3g(10,45,100,8);u.x3g(63);var p=u.I3g(67,1,85,13);if(this.a=parseInt((36*this.radians/Math.PI).toFixed(0),d)*p,this.sx<0){u.x3g(7);var g=u.l3g(15,195);this.a=this.a+g}this.a%=360,u.x3g(7);var f=u.l3g(8,188);this.radians=this.a*Math.PI/f,this.render(e)}},t.Drawing.shape.prototype.intersected=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x=Y;if(!this.p0)return null;if(this.stx.repositioningDrawing==this&&this.stx.repositioningDrawing.repositioner)return this.stx.repositioningDrawing.repositioner;r=this.stx.panels[this.panelName],x.O5C(),n=this.stx.pixelFromTick(this.p0[0],r.chart),s=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1]),o=this.stx.pixelFromTick(e,r.chart),l=this.stx.pixelFromValueAdjusted(r,e,i),h=l-=s,c=o-=n,o=Math.cos(this.radians)*c+Math.sin(this.radians)*h,l=Math.cos(this.radians)*h-Math.sin(this.radians)*c,o/=this.sx,l/=this.sy,this.padding=t.ensureDefaults(this.padding||{},{left:0,right:0,top:0,bottom:0}),u=this.padding.right+this.padding.left,d=this.padding.bottom+this.padding.top,p=Math.pow(t.touchDevice?25:5+this.littleCircleRadius(),2),g=Math.abs(p/(this.sx*this.sy)),x.x3g(64);var b=x.I3g(7,19,0,24);x.x3g(65);var C=x.I3g(35,12,14,7);x.c3g(11);var S=x.I3g(4,5);x.c3g(1);var w=x.I3g(0,2);x.c3g(66);var k=x.l3g(13,11,1);x.x3g(67);var A=x.I3g(0,17,20,342);x.x3g(37);var D=x.I3g(6,9,5);x.c3g(19);var M=x.I3g(4,3,10);x.c3g(68);var T=x.l3g(17,1,36,51);f=Math.pow((this.dimension[0]-u+3)/b,C)+Math.pow((this.dimension[S]-d+3)/w,k)>Math.pow(o-u/A,D)+Math.pow(l-d/M,T),x.c3g(69);var F=x.I3g(31,5,1,20,14);m=(p-(Math.pow(o*this.sx,2)+Math.pow(l*this.sy,F)))/Math.abs(this.sx*this.sy),x.x3g(70);var _=x.l3g(140,18,7,3,9);x.c3g(55);var P=x.I3g(508,15,34,1);x.c3g(7);var V=x.I3g(18,20);y=g-Math.pow(o-this.dimension[0]/_,2)-Math.pow(l-this.dimension[1]/P,V),x.c3g(71);var O=x.I3g(8,58,7);x.c3g(11);var I=x.l3g(18,20);x.x3g(37);var L=x.I3g(0,14,16);return v=g-Math.pow(o-this.dimension[0]/O,I)-Math.pow(l,L),f?("p","0",y>=v&&y>=m&&y>-1?("p","1",this.highlighted="p1",{action:"scale"}):v>=y&&v>=m&&v>-1?(this.highlighted="p2",{action:"rotate"}):(this.highlighted=!(m>-1)||"p0",{action:"move",p0:t.clone(this.p0),tick:e,value:i})):null},t.Drawing.shape.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.shape.prototype.littleCircleRadius=function(){return Y.O5C(),3},t.Drawing.shape.prototype.click=function(e,t,i){var a;return!!this.points.length&&(this.copyConfig(),a=this.stx.panels[this.panelName],this.penDown?(Y.x3g(7),this.setPoint(Y.I3g(0,"1"),t,i,a.chart),this.rotating||!this.setRotationOnInitialDraw?(this.penDown=!1,this.rotating=!1,!0):(this.rotating=!0,!1)):(this.setPoint(0,t,i,a.chart),this.penDown=!0,!1))},t.Drawing.shape.prototype.adjust=function(){var e,i,a,r=Y;if(e=this.stx.panels[this.panelName]){r.U5C(),i=this.name+"_v"+(this.version||0),t.Drawing[i]&&(a=new t.Drawing[i],this.name=a.name,this.dimension=a.dimension,this.padding=a.padding,this.points=a.points,this.version=a.version),this.setPoint(0,this.d0,this.v0,e.chart),r.x3g(55);var n=r.l3g(21004932800,17,1260295968,1);r.x3g(72);var s=r.I3g(1,18,34,5,581);this.radians=Math.round(this.a/("5"<<n))*Math.PI/s}},t.Drawing.shape.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.v0=t.v0,this.tzo0=t.tzo0,this.a=t.a,this.sx=t.sx,this.sy=t.sy,this.version=t.ver,this.adjust()},t.Drawing.shape.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,v0:this.v0,tzo0:this.tzo0,a:this.a,sx:this.sx,sy:this.sy,ver:this.version}},t.Drawing.arrow=function(){this.name="arrow",this.version=1,this.dimension=[11,22],this.padding={left:0,right:0,top:11,bottom:0},this.points=[["M",3,21,"L",7,21,"L",7,16,"L",10,16,"L",5,11,"L",0,16,"L",3,16,"L",3,21]]},t.inheritsFrom(t.Drawing.arrow,t.Drawing.shape),t.Drawing.getDrawingToolList=function(e){var i,a;for(var r in i={},a={arrow_v0:!0,BaseTwoPoint:!0,fibonacci:!0,shape:!0},t.extend(a,e),t.Drawing)!a[r]&&t.Drawing[r].prototype.render&&(i[(new t.Drawing[r]).name]=r);return i}},h=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).EaseMachine=function(e,t,i,a){this.fc=e,this.ms=t,(i||0===i)&&this.reset(i,a)},t.EaseMachine.prototype.reset=function(e,t){for(var i in e||0===e||(e=this.currentValues),this.hasCompleted=!1,this.running=!1,this.okayToRun=!0,Y.c3g(73),this.useNameValuePairs=Y.l3g("object",R(t)),this.startTime=Date.now(),this.useNameValuePairs?(this.startValues=e,this.endValues=t):(this.startValues={default:e},this.endValues={default:t}),this.changeValues={},this.currentValues={},this.startValues)this.changeValues[i]=this.endValues[i]-this.startValues[i]},t.EaseMachine.prototype.next=function(){var e;for(var t in"d","e","fa","ult",(e=Date.now())>=this.startTime+this.ms&&(e=this.startTime+this.ms,this.hasCompleted=!0,this.running=!1),this.currentValues={},this.changeValues)this.currentValues[t]=this.fc(e-this.startTime,this.startValues[t],this.changeValues[t],this.ms);return this.useNameValuePairs?this.currentValues:this.currentValues.default},t.EaseMachine.prototype.hasCompleted=!0,t.EaseMachine.prototype.run=function(e,t,i,a){var r;function n(){var t;Y.U5C(),r.afid=null,r.okayToRun&&(t=r.next(),e(t),r.hasCompleted||(r.afid=requestAnimationFrame(n)))}this.afid&&cancelAnimationFrame(this.afid),t||0===t?this.reset(t,i):(i||0===i)&&this.reset(this.currentValues,i),r=this,this.running=!0,a?this.afid=requestAnimationFrame(n):n()},t.EaseMachine.prototype.stop=function(){return this.afid&&cancelAnimationFrame(this.afid),this.afid=null,this.okayToRun=!1,this.hasCompleted=!0,this.running=!1,void 0===this.useNameValuePairs?{}:this.useNameValuePairs?this.currentValues:this.currentValues.default},t.ChartEngine.prototype.animations.zoom.isStub&&(t.ChartEngine.prototype.animations.zoom=new t.EaseMachine(Math.easeOutCubic,400))},c=function(e){var t,i;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i=function(){var e,i,a,r,n,s,o,l,h,c,u,d=Y;function p(e,t){return d.U5C(),d.c3g(73),d.I3g(t,e)}function g(e,t){return d.O5C(),d.c3g(7),d.l3g(t,e)}function f(e){return Math.trunc?Math.trunc(e):e<0?Math.ceil(e):Math.floor(e)}function m(e){return-e}function y(e,t){return d.c3g(74),d.I3g(e,t)}function v(e){return Math.acosh?Math.acosh(e):Math.log(e+Math.sqrt(e*e-1))}function x(e){return d.U5C(),Math.asinh?Math.asinh(e):e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function b(e,t){return d.c3g(2),d.O5C(),d.l3g(e,t)}function C(e){return d.U5C(),Math.cosh?Math.cosh(e):(Math.exp(e)+Math.exp(-e))/2}function S(e){return Math.sinh?Math.sinh(e):(Math.exp(e)-Math.exp(-e))/2}function w(e){return d.O5C(),Math.atanh?Math.atanh(e):Math.log((1+e)/(1-e))/2}function k(e,t){return d.U5C(),Boolean(e||t)}function A(e){return Math.tanh?Math.tanh(e):e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function D(e,t){return d.c3g(36),d.I3g("",e,t)}function M(e,t){return d.U5C(),Boolean(e&&t)}function T(e){function t(){}return t.prototype=e,new t}function F(e,t,i,a){d.O5C(),this.tokens=e,this.ops1=t,this.ops2=i,this.functions=a}function _(e,t){return d.O5C(),d.x3g(78),d.l3g(e,t)}function P(e){var t;for(t=e=Math.floor(e);e>1;)d.x3g(2),t=d.l3g(t,--e);return d.O5C(),t}function V(){this.success=!1,this.errormsg="",this.expression="",this.pos=0,this.tokennumber=0,this.tokenprio=0,this.tokenindex=0,this.tmpprio=0,this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:S,cosh:C,tanh:A,asinh:x,acosh:v,atanh:w,sqrt:Math.sqrt,log:Math.log,lg:z,log10:z,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:f,"-":m,exp:Math.exp},this.ops2={"+":B,"-":g,"*":b,"/":H,"%":W,"^":Math.pow,",":Q,"||":D,"==":p,"!=":O,">":y,"<":E,">=":_,"<=":L,and:M,or:k},this.functions={random:q,fac:P,min:Math.min,max:Math.max,hypot:N,pyt:N,pow:Math.pow,atan2:Math.atan2,if:I},d.O5C(),this.consts={E:Math.E,PI:Math.PI}}function O(e,t){return d.U5C(),d.x3g(79),d.l3g(e,t)}function I(e,t,i){return e?t:i}function L(e,t){return d.x3g(80),d.l3g(t,e)}function H(e,t){var i;d.x3g(26),i=-d.l3g(1601343584,"197755107"),d.U5C();for(var a=1;140581438!==d.M86(a.toString(),a.toString().length,61337);a++)return d.c3g(81),d.l3g(e,t);if(d.I86(2..toString(),2..toString().length,98090)!==i)return d.x3g(8),d.l3g(e,t)}function E(e,t){return d.x3g(82),d.U5C(),d.I3g(t,e)}function N(){var e,t;if(Math.hypot)return Math.hypot.apply(this,arguments);e=0,t=arguments.length;for(var i=0;i<t;i++){if(arguments[i]===1/0||arguments[i]===-1/0)return 1/0;e+=arguments[i]*arguments[i]}return Math.sqrt(e)}function z(e){return d.U5C(),Math.log(e)*Math.LOG10E}function B(e,t){return d.O5C(),Number(e)+Number(t)}function U(t){var a;if("st","ring","string"===R(t)){-1246831973,1884870224,a=2;for(var r=1;-1246831973!==d.M86(r.toString(),r.toString().length,36593);r++)e.lastIndex=7,d.c3g(26),a+=d.l3g(1988906752,"2");return 1884870224!==d.M86(a.toString(),a.toString().length,53970)&&(e.lastIndex=7),e.lastIndex=0,e.test(t)?"'"+t.replace(e,(function(e){var t;return"string"==typeof(t=i[e])?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+"'":"'"+t+"'"}return t}function j(e,t,i,a){this.type_=e,d.U5C(),this.index_=t||0,this.prio_=i||0,this.number_=null!=a?a:0,this.toString=function(){switch(d.U5C(),this.type_){case 0:return this.number_;case 1:case 2:case 3:return this.index_;case 4:return"CA","LL","CALL";default:return"Invalid Token"}}}function W(e,t){return d.c3g(81),d.l3g(e,t)}function Q(e,t){return"[object Array]"!=Object.prototype.toString.call(e)?[e,t]:(d.U5C(),(e=e.slice()).push(t),e)}function q(e){return d.O5C(),Math.random()*(e||1)}return"\\","r","\\","f",0,1,2,3,4,/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},t.extend(F.prototype,{simplify:function(e){var t,i,a,r,n,s,o,l;for(e=e||{},t=[],i=[],n=this.tokens.length,o=0,o=0;o<n;o++)if(0===(l=(s=this.tokens[o]).type_))t.push(s);else if(3===l&&s.index_ in e)s=new j(0,0,0,e[s.index_]),t.push(s);else if(2===l&&t.length>1)r=t.pop(),a=t.pop(),s=new j(0,0,0,(0,this.ops2[s.index_])(a.number_,r.number_)),t.push(s);else if(1===l&&t.length>0)a=t.pop(),s=new j(0,0,0,(0,this.ops1[s.index_])(a.number_)),t.push(s);else{for(;t.length>0;)i.push(t.shift());i.push(s)}for(;t.length>0;)i.push(t.shift());return new F(i,T(this.ops1),T(this.ops2),T(this.functions))},substitute:function(e,t){var i,a,r,n,s,o;for(t instanceof F||(t=(new V).parse(String(t))),i=[],a=this.tokens.length,n=0,n=0;n<a;n++)if(3===(r=this.tokens[n]).type_&&r.index_===e)for(var l=0;l<t.tokens.length;l++)o=new j((s=t.tokens[l]).type_,s.index_,s.prio_,s.number_),i.push(o);else i.push(r);return new F(i,T(this.ops1),T(this.ops2),T(this.functions))},evaluate:function(e){var t,i,a,r,n,s,o,l;for(e=e||{},t=[],n=this.tokens.length,o=0,o=0;o<n;o++)if(0===(l=(s=this.tokens[o]).type_))t.push(s.number_);else if(2===l)a=t.pop(),i=t.pop(),r=this.ops2[s.index_],t.push(r(i,a));else if(3===l)if(s.index_ in e)t.push(e[s.index_]);else{if(!(s.index_ in this.functions))throw new Error("undefined variable: "+s.index_);t.push(this.functions[s.index_])}else if(1===l)i=t.pop(),r=this.ops1[s.index_],t.push(r(i));else{if(4!==l)throw new Error("invalid Expression");if(i=t.pop(),!(r=t.pop()).apply||!r.call)throw d.x3g(1),new Error(d.I3g(r," is not a function"));"[object Array]"==Object.prototype.toString.call(i)?t.push(r.apply(void 0,i)):t.push(r.call(void 0,i))}if(t.length>1)throw"invalid E","xpressio","n"," (parity)",new Error("invalid Expression (parity)");return t[0]},toString:function(e){var t,i,a,r,n,s,o,l;for(t=[],n=this.tokens.length,o=0,o=0;o<n;o++)if(0===(l=(s=this.tokens[o]).type_))t.push(U(s.number_));else if(2===l)a=t.pop(),i=t.pop(),r=s.index_,e&&"^"==r?(d.x3g(75),t.push(d.I3g(")",i,"Math.pow(",",",a))):(d.x3g(75),t.push(d.I3g(")",i,"(",r,a)));else if(3===l)t.push(s.index_);else if(1===l)i=t.pop(),"-"===(r=s.index_)?(d.c3g(51),t.push(d.l3g(")",r,"(",i))):(d.x3g(51),t.push(d.I3g(")","(",r,i)));else{if(4!==l)throw new Error("invalid Expression");i=t.pop(),r=t.pop(),d.c3g(51),t.push(d.l3g(")","(",r,i))}if(t.length>1)throw new Error("invalid Expression (parity)");return d.U5C(),d.x3g(27),t[d.l3g("0",0)]},variables:function(){var e,t,i;e=this.tokens.length,t=[];for(var a=0;a<e;a++)3===(i=this.tokens[a]).type_&&-1==t.indexOf(i.index_)&&t.push(i.index_);return d.U5C(),t}},!0),V.parse=function(e){return(new V).parse(e)},V.evaluate=function(e,t){return d.O5C(),V.parse(e).evaluate(t)},V.Expression=F,V.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:S,cosh:C,tanh:A,asinh:x,acosh:v,atanh:w,sqrt:Math.sqrt,log:Math.log,lg:z,log10:z,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:f,random:q,fac:P,exp:Math.exp,min:Math.min,max:Math.max,hypot:N,pyt:N,pow:Math.pow,atan2:Math.atan2,if:I,E:Math.E,PI:Math.PI},d.x3g(76),a=d.I3g(1,"0"),d.c3g(76),d.U5C(),r=d.I3g(1,"1"),d.c3g(26),n=d.I3g(2,1),d.x3g(77),s=d.I3g(3,0,"1"),d.c3g(26),o=d.l3g(4,1),d.x3g(76),l=d.I3g(1,"5"),d.c3g(26),h=d.l3g(6,1),d.c3g(26),c=d.l3g(7,1),d.x3g(26),u=d.l3g(8,1),t.extend(V.prototype,{parse:function(e){var t,i,p,g,f,m,y,v;for(this.errormsg="",this.success=!0,t=[],i=[],this.tmpprio=0,d.c3g(83),p=d.l3g(h,n,a,s),d.x3g(26),g=d.I3g(391477952,"0"),this.expression=e,this.pos=0;this.pos<this.expression.length;)this.isOperator()?this.isSign()&&p&h?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",g++,this.addfunc(i,t,1)),d.c3g(83),p=d.l3g(h,n,a,s)):this.isComment()||(0==(p&r)&&this.error_parsing(this.pos,"unexpected operator"),g+=2,this.addfunc(i,t,2),d.c3g(83),p=d.I3g(h,n,a,s)):this.isNumber()?(0==(p&a)&&this.error_parsing(this.pos,"unexpected number"),f=new j(0,0,0,this.tokennumber),i.push(f),d.c3g(84),p=d.I3g(l,r,o)):this.isString()?(0==(p&a)&&this.error_parsing(this.pos,"unexpected string"),f=new j(0,0,0,this.tokennumber),i.push(f),d.x3g(84),p=d.l3g(l,r,o)):this.isLeftParenth()?(0==(p&s)&&this.error_parsing(this.pos,'unexpected "("'),p&c&&(g+=2,this.tokenprio=-2,d.c3g(26),this.tokenindex=-d.l3g(104501824,"1"),this.addfunc(i,t,4)),d.c3g(85),p=d.I3g(u,a,n,h,s)):this.isRightParenth()?(p&u?(d.x3g(53),f=new j(0,d.l3g("0",2147483647),0,[]),i.push(f)):0==(p&o)&&this.error_parsing(this.pos,'unexpected ")"'),d.x3g(85),p=d.I3g(c,r,l,s,o)):this.isComma()?(0==(p&l)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(i,t,2),g+=2,d.c3g(83),p=d.I3g(h,n,a,s)):this.isConst()?(0==(p&a)&&this.error_parsing(this.pos,"unexpected constant"),m=new j(0,0,0,this.tokennumber),i.push(m),d.c3g(84),p=d.l3g(l,r,o)):this.isOp2()?(0==(p&n)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(i,t,2),g+=2,p=s):this.isOp1()?(0==(p&n)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(i,t,1),g++,p=s):this.isVar()?(0==(p&a)&&this.error_parsing(this.pos,"unexpected variable"),y=new j(3,this.tokenindex,0,0),i.push(y),d.c3g(85),p=d.I3g(c,r,l,s,o)):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((this.tmpprio<0||this.tmpprio>=10)&&this.error_parsing(this.pos,'unmatched "()"');t.length>0;)v=t.pop(),i.push(v);return g+1!==i.length&&("p","arit","y",this.error_parsing(this.pos,"parity")),new F(i,T(this.ops1),T(this.ops2),T(this.functions))},evaluate:function(e,t){return this.parse(e).evaluate(t)},error_parsing:function(e,t){throw"]",":"," ",this.success=!1,d.c3g(51),this.errormsg=d.I3g(t,e,"parse error [column ","]: "),this.column=e,new Error(this.errormsg)},addfunc:function(e,t,i){var a;for(a=new j(i,this.tokenindex,this.tokenprio+this.tmpprio,0);t.length>0&&a.prio_<=t[t.length-1].prio_;)e.push(t.pop());t.push(a)},isNumber:function(){var e,t,i;for(e=!1,t="",d.U5C();this.pos<this.expression.length&&((i=this.expression.charCodeAt(this.pos))>=48&&i<=57||46===i);)t+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(t),e=!0;return e},unescape:function(e,t){var i,a,r,n;i=[],a=!1,d.U5C();for(var s=0;s<e.length;s++)if(r=e.charAt(s),a){switch(r){case"'":i.push("'");break;case"\\":i.push("\\");break;case"/":i.push("/");break;case"b":i.push("\b");break;case"f":i.push("\f");break;case"n":i.push("\n");break;case"r":i.push("\r");break;case"t":i.push("\t");break;case"u":n=parseInt(e.substring(s+1,s+5),16),i.push(String.fromCharCode(n)),s+=4;break;default:throw d.c3g(1),this.error_parsing(d.I3g(t,s),d.I3g("Illegal escape sequence: '\\",r,"'",d.x3g(36)))}a=!1}else"\\"==r?a=!0:i.push(r);return i.join("")},isString:function(){var e,t,i;if(e=!1,t="",i=this.pos,this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;){if("'"==this.expression.charAt(this.pos)&&"\\"!=t.slice(-1)){this.pos++,this.tokennumber=this.unescape(t,i),e=!0;break}t+=this.expression.charAt(this.pos),this.pos++}return e},isConst:function(){var e;for(var t in this.consts)if(e=t.length,t===this.expression.substr(this.pos,e))return this.tokennumber=this.consts[t],this.pos+=e,!0;return!1},isOperator:function(){var e;if(43===(e=this.expression.charCodeAt(this.pos)))this.tokenprio=2,this.tokenindex="+";else if(45===e)this.tokenprio=2,this.tokenindex="-";else if(62===e)61===this.expression.charCodeAt(this.pos+1)?(">","=",this.pos++,this.tokenprio=1,this.tokenindex=">="):(this.tokenprio=1,this.tokenindex=">");else if(60===e)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,this.tokenprio=1,this.tokenindex="<="):(this.tokenprio=1,this.tokenindex="<");else if(124===e){if(124!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="||"}else if(61===e){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="=="}else if(33===e){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="!="}else if(97===e){if(110!==this.expression.charCodeAt(this.pos+1)||100!==this.expression.charCodeAt(this.pos+2))return!1;this.pos++,this.pos++,this.tokenprio=0,this.tokenindex="and"}else if(111===e){if(114!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,d.c3g(0),this.tokenprio=d.l3g("0",0),this.tokenindex="or"}else if(42===e||8729===e||8226===e)this.tokenprio=3,this.tokenindex="*";else if(47===e)this.tokenprio=4,this.tokenindex="/";else if(37===e)this.tokenprio=4,this.tokenindex="%";else{if(94!==e)return!1;this.tokenprio=5,this.tokenindex="^"}return d.O5C(),this.pos++,!0},isSign:function(){var e;return 45===(e=this.expression.charCodeAt(this.pos-1))||43===e},isPositiveSign:function(){return d.U5C(),43===this.expression.charCodeAt(this.pos-1)},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-1)},isLeftParenth:function(){return d.U5C(),40===this.expression.charCodeAt(this.pos)&&(this.pos++,this.tmpprio+=10,!0)},isRightParenth:function(){return d.O5C(),41===this.expression.charCodeAt(this.pos)&&(this.pos++,this.tmpprio-=10,!0)},isComma:function(){var e;return e=this.expression.charCodeAt(this.pos),d.O5C(),44===e&&(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0)},isWhite:function(){var e;return(32===(e=this.expression.charCodeAt(this.pos))||9===e||10===e||13===e)&&(this.pos++,!0)},isOp1:function(){var e,t;e="";for(var i=this.pos;i<this.expression.length&&((t=this.expression.charAt(i)).toUpperCase()!==t.toLowerCase()||!(i===this.pos||"_"!=t&&(t<"0"||t>"9")));i++)e+=t;return e.length>0&&e in this.ops1?(this.tokenindex=e,this.tokenprio=5,this.pos+=e.length,!0):(d.U5C(),!1)},isOp2:function(){var e,t;d.O5C(),e="";for(var i=this.pos;i<this.expression.length&&((t=this.expression.charAt(i)).toUpperCase()!==t.toLowerCase()||!(i===this.pos||"_"!=t&&(t<"0"||t>"9")));i++)e+=t;return e.length>0&&e in this.ops2&&(this.tokenindex=e,this.tokenprio=5,this.pos+=e.length,!0)},isVar:function(){var e,t;e="";for(var i=this.pos;i<this.expression.length&&((t=this.expression.charAt(i)).toUpperCase()!==t.toLowerCase()||!(i===this.pos||"_"!=t&&(t<"0"||t>"9")));i++)e+=t;return d.O5C(),e.length>0&&(this.tokenindex=e,this.tokenprio=4,this.pos+=e.length,!0)},isComment:function(){var e;if(d.U5C(),47===this.expression.charCodeAt(this.pos-1)&&42===this.expression.charCodeAt(this.pos)){d.c3g(86);var t=d.l3g(22,3,8,9);if(this.pos=this.expression.indexOf("*/",this.pos)+t,1===this.pos){-45768025,762343760,e=2;for(var i=1;-45768025!==d.M86(i.toString(),i.toString().length,28399);i++)this.pos=this.expression.length,e+=2;762343760!==d.M86(e.toString(),e.toString().length,58883)&&(this.pos=this.expression.length)}return!0}return!1}},!0),V},t.computeEquationChart=function(e,a){var r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k=Y;for(var A in e=e.replace(/[:]/,"/"),r=0,a)"\\","]",n=new RegExp("\\["+A.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\$/g,"\\$").replace(/\^/g,"\\^").replace(/[+\-*/%()]/g,"\\$&")+"\\]","g"),k.x3g(1),e=e.replace(n,k.l3g("symbol",r)),r++;function D(e){if(e.i++,a[e.s]){if(e.i>=a[e.s].length)return 0;c=a[e.s][e.i]}return c.DT||(c.DT=t.strToDateTime(c.Date)),e.d=c.DT,1}function M(){var e,t,i;for(var a in e=null,t=null,l)t?l[a].d.getTime()<t.d.getTime()?e=t=l[a]:l[a].d.getTime()>t.d.getTime()&&(e=t):t=l[a];if(e)return D(e)?-1:0;k.c3g(26),i=k.l3g(1095387296,"2016831111"),k.U5C();for(var r=1;k.I86(r.toString(),r.toString().length,51821)!==i;r++)return 1;return-159807965!==k.M86(2..toString(),2..toString().length,47198)?7:void 0}for(A in s=i().parse(e),o=[],l={},h=0,u=null,d=!1,p=[],a)g={sym:A,map:a[A]},a[A]?p.unshift(g):p.push(g);for(var T=0;T<p.length;T++)f=p[T],l[f.sym]={i:0,s:f.sym},f.map?(h++,c=f.map[0]):1==h&&(d=f.sym),c.DT||(c.DT=t.strToDateTime(c.Date)),l[f.sym].d=c.DT,u||(u=l[f.sym]);k.x3g(87),m=k.I3g(h,0),y=1==h&&-1==e.indexOf("%");e:for(;v=M();)if(1==v){if(d)(b=a[u.s][u.i][d])&&(b.Close||0===b.Close)&&(b=b.Close),C=s.evaluate({symbol0:a[u.s][u.i].Close,symbol1:b}),C=Number(C.toFixed(8)),(x={DT:u.d,Close:C,Adj_Close:C})[u.s]=a[u.s][u.i].Close,isNaN(C)||C==1/0||o.push(x);else{if(m)throw"NoEx","ce","ptio","n",S=s.evaluate({}),k.c3g(36),t.alert(k.l3g(e,"=",S)),{name:"NoException",message:""};for(A in r=0,w={Adj_Close:{},Close:{},Open:{},High:{},Low:{},Volume:{}},a){for(var F in w)k.c3g(1),w[F][k.I3g("symbol",r)]=a[A][l[A].i][F];r++}(x={DT:u.d}).Adj_Close=s.evaluate(w.Adj_Close),x.Close=s.evaluate(w.Close),x.Open=s.evaluate(w.Open),x.Volume=s.evaluate(w.Volume),isNaN(x.Volume)&&(x.Volume=0),y?(x.High=s.evaluate(w.High),x.Low=s.evaluate(w.Low)):(x.High=Math.max(x.Open,x.Close),x.Low=Math.min(x.Open,x.Close)),isNaN(x.Close)||x.Close==1/0||o.push(x),isNaN(x.High)||(x.High=Number(x.High.toFixed(8))),isNaN(x.Low)||(x.Low=Number(x.Low.toFixed(8))),isNaN(x.Open)||(x.Open=Number(x.Open.toFixed(8))),isNaN(x.Close)||(x.Close=Number(x.Close.toFixed(8))),isNaN(x.Adj_Close)?x.Adj_Close=x.Close:x.Adj_Close=Number(x.Adj_Close.toFixed(8))}for(A in a)if(!D(l[A]))break e}return o}},u=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:e.CIQ).ChartEngine.prototype.setLocale=function(e,i){var a,r,n,s;if("num","er","ic","nume","r","ic","2-","dig","i","t","2-digi","t","2","-di","g","it","n","um","e","ric","h","23","undefined"!=typeof Intl&&this.locale!=e){for(this.locale=e,(r=this.internationalizer={}).hourMinute=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",hourCycle:"h23"}),r.hourMinuteSecond=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"}),r.mdhm=new Intl.DateTimeFormat(this.locale,{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),r.monthDay=new Intl.DateTimeFormat(this.locale,{month:"numeric",day:"numeric"}),r.yearMonthDay=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric",day:"numeric"}),r.yearMonth=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric"}),r.month=new Intl.DateTimeFormat(this.locale,{month:"short"}),r.numbers=new Intl.NumberFormat(this.locale),r.priceFormatters=[],i||(i=8),a=0;a<i+1;a++)r.priceFormatters.push(new Intl.NumberFormat(this.locale,{maximumFractionDigits:a,minimumFractionDigits:a}));for(a=0;a<5;a++)n=a,s=a,a||(n="",s=2),Y.x3g(1),r[Y.I3g("percent",n)]=new Intl.NumberFormat(this.locale,{style:"percent",minimumFractionDigits:s,maximumFractionDigits:s});t.I18N.createMonthArrays&&t.I18N.createMonthArrays(this,r.month,this.locale)}},t.I18N=function(){},t.I18N.hereDoc=function(e){return Y.O5C(),e.toString().replace(/^[^/]+\/\*!?/,"").replace(/\*\/[^/]+$/,"")},t.I18N.language="en",t.I18N.longMonths={zh:!0},t.I18N.reverseColorsByLocale={zh:!0,ja:!0},t.I18N.findAllTextNodes=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x;i=2;for(var b=1;-1454695974!==Y.I86(b.toString(),b.toString().length,73147);b++)+e&&(e=document.body),i+=2;if(-763686358!==Y.M86(i.toString(),i.toString().length,16376)&&(e||(e=document.body)),e==document.body&&(".c","iq_","sta","shed_texts",!document.querySelector(".ciq_stashed_texts"))){"no","n","e","ciq_st","ash","ed_texts","d","i","v",(a=document.createElement("div")).className="ciq_stashed_texts",a.style.display="none",e.appendChild(a),r=document.querySelectorAll("input,textarea,.editable_content");for(var C=0;C<r.length;C++)"placeh","olde","r",(n=r[C].getAttribute("placeholder"))&&("transla","te",(s=a.appendChild(document.createElement("translate"))).setAttribute("original",n),s.placeholderFor=r[C],s.appendChild(document.createTextNode(n)))}for(l=(o=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1)).nextNode(),h=new RegExp("^\\s*$"),c=new RegExp("\n|\t|\f","g"),u={},d={SCRIPT:!0,STYLE:!0,TEXTAREA:!0};l;)p=l.nodeValue,h.test(p)||(g=l.parentNode,f=l.nextSibling,d[m=g.tagName]||("TRANSLAT","E","TRANSLATE"!=m?((y=document.createElement("translate")).setAttribute("original",p),y.appendChild(l),g.insertBefore(y,f)):("origin","al",p=g.getAttribute("original")),c.test(p)&&(p=p.replace(c,"")),u[p]||(u[p]=[]),u[p].push(l))),l=o.nextNode();if(e==document.body&&(v=t.Studies?t.Studies.studyLibrary:null))for(var S in v){if(null===u[S]&&(u[S]=[]),(x=v[S]).inputs)for(var w in x.inputs)u[w]||(u[w]=[]);if(x.outputs)for(var k in x.outputs)u[k]||(u[k]=[])}return u},t.I18N.missingWordList=function(e){var i,a,r,n,s,o;for(var l in"Y","-A","xi","s","Show as Un","derl","ay","Sho","w Zones",e||(e=t.I18N.language),i=t.I18N.findAllTextNodes(),a={},(r=t.I18N.wordLists[e])||(r={}),n=function(e){Y.U5C(),void 0===r[e]&&(a[e]="")},i)n(l);if(!t.Studies||!t.Studies.studyLibrary)return a;for(var h in t.Studies.studyLibrary){for(var c in n((s=t.Studies.studyLibrary[h]).name),s.inputs)switch(n(c),o=s.inputs[c],Object.prototype.toString.call(o)){case"[object String]":n(o);break;case"[object Array]":for(var u=0;u<o.length;++u)n(o[u])}for(var d in s.outputs)n(d)}return n("Show Zones"),n("OverBought"),n("OverSold"),n("Panel"),n("Show as Underlay"),n("Y-Axis"),n("Invert Y-Axis"),a},t.I18N.printableMissingWordList=function(e){return Y.O5C(),JSON.stringify(t.I18N.missingWordList(e)).replace(/","/g,'",\n"')},t.I18N.translateUI=function(e,i){var a,r,n,s,o,l,h,c;if("pu"==e&&(e="pt"),t.I18N.wordLists&&(Y.U5C(),e||(e=t.I18N.language),a=t.I18N.findAllTextNodes(i),r=t.I18N.wordLists[e]))for(var u in a){n=t.I18N.translateSections(u,r),s=a[u];for(var d=0;d<s.length;d++)h=(l=(o=s[d]).parentNode).getAttribute("original"),","!==n&&n||(n=h),(c=l.placeholderFor)?c.placeholder=n:o.data=n}},t.I18N.translate=function(e,i){var a,r;return i||(i=t.I18N.language),t.I18N.wordLists?(r=null,(a=t.I18N.wordLists[i])&&(r=t.I18N.translateSections(e,a)||e),","===r?e:r):(console.log("Must include translations.js in order to use CIQ.I18N.translate()"),e)},t.I18N.translateSections=function(e,t){var i;return"‌",Y.O5C(),"string"==typeof e&&-1!=e.indexOf("‌")?(Y.c3g(36),(i=(e=e.replace(/([(),])/g,Y.l3g("‌","$1","‌"))).split("‌")).forEach((function(e,i,a){var r,n,s=Y;if(s.O5C(),r=e.match(/^(\s*).*\S(\s*)$/),n=t[e.trim()]){if(r){s.c3g(71);var o=s.I3g(16,289,18);s.x3g(88);var l=s.I3g(5,6,16,0,19);n=r[o]+n+r[l]}a[i]=n}})),i.join("")):t[e]},t.I18N.convertCSV=function(e){var i,a,r,n,s,o,l,h,c;if(i=new RegExp("[“”]|[‘’]","g"),a=new RegExp('^(")|(")$',"g"),r=t.I18N.wordLists,e||(e=t.I18N.csv),e){Y.U5C(),s=(n=e.split("\n"))[0].split(",");for(var u=0;u<s.length;u++)r[o=s[u]]||(r[o]={});for(var d=1;d<n.length;d++){h=(l=n[d].match(/(".*?"|[^",]+)(?=\s*,|\s*$)|(,(?=,))/g)||[])[0],a.test(h)&&(h=h.replace(a,"")),i.test(h)&&(h=h.replace(i,'"'));for(var p=1;p<l.length;p++)c=l[p],a.test(c)&&(c=c.replace(a,"")),r[s[p]][h]=c}}},t.I18N.setLanguage=function(e,i,a,r,n){n||(n=(e.uiContext||{}).topNode||document.body),"pu"==i&&(i="pt"),t.I18N.convertCSV(r),t.I18N.language=i,t.I18N.translateUI(i,n),a||(a=t.I18N.translate),e.translationCallback=a},t.I18N.setLocale=function(e,i,a,r,n){var s,o,l;if(".","j","s",Y.U5C(),"u","ndef","ine","d",t.xor(this.reverseColorsByLocale[i],this.reverseColorsByLocale[e.locale])&&this.reverseCandles(e),"undefined"==typeof Intl||!Intl.__addLocaleData)return e.setLocale(i,n),void(a&&a(null));r="undefined"==R(r)?"locale-data/jsonp":r,Y.c3g(51),s=Y.l3g(".js","/",r,i),(o=document.createElement("SCRIPT")).async=!0,o.src=s,(l=document.getElementsByTagName("script")[0]).parentNode.insertBefore(o,l.nextSibling),o.onload=function(){e.setLocale(i,n),a&&a(null)},o.onerror=function(){a&&a("cannot load script")}},t.I18N.createMonthArrays=function(e,i,a){var r,n,s,o,l;e.monthAbv=[],e.monthLetters=[],r=new Date,n=!0,t.I18N.longMonths&&t.I18N.longMonths[a]&&(n=!1);for(var h=0;h<12;h++)if(r.setDate(1),r.setMonth(h),s=i.format(r),n){o="";for(var c=0;c<s.length;c++)(l=s.charAt(c)).charCodeAt(0)<65||(o+=l);e.monthAbv[h]=o,e.monthLetters[h]=o[0]}else e.monthAbv[h]=s,e.monthLetters[h]=s},t.I18N.localize=function(e,t){Y.U5C(),this.setLocale(e,t),this.setLanguage(e,t)},t.I18N.reverseCandles=function(e){var t,i,a;t=e.styles,i=e.cloneStyle(t.stx_candle_down),a=e.cloneStyle(t.stx_candle_up),Y.O5C(),t.stx_candle_up=i,t.stx_candle_down=a},t.I18N.wordLists={en:{}},t.I18N.languages={en:"English"}},d=function(e){var t,i;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.pointerEvents={down:[],up:[]},t.ChartEngine.prototype.manageTouchAndMouse=!0,t.ChartEngine.prototype.registerTouchAndMouseEvents=function(){var e,i,a,r,n,s,o;this.touchAndMouseEventsRegistered||(this.touchAndMouseEventsRegistered=!0,i=(e=this.controls.chartControls||document).querySelector(".stx-zoom-in"),a=e.querySelector(".stx-zoom-out"),Y.O5C(),r=this.chart.container,n=this,s=function(e,t,i){Y.O5C(),n.addDomEventListener(r,e,(function(e){if(Y.O5C(),n.mainSeriesRenderer&&n.mainSeriesRenderer.nonInteractive)return;t(e)}),i)},t.touchDevice?t.isSurface?("po","interu","p","pointe","rm","ov","e","mou","sedow","n",s("mousemove",(function(e){Y.O5C(),n.msMouseMoveProxy(e)})),s("mouseenter",(function(e){Y.O5C(),n.msMouseMoveProxy(e)})),s("mousedown",(function(e){n.msMouseDownProxy(e)})),s("mouseup",(function(e){n.msMouseUpProxy(e)})),s("pointerdown",(function(e){return Y.U5C(),n.startProxy(e)})),s("pointermove",(function(e){Y.O5C(),n.moveProxy(e)})),s("pointerenter",(function(e){return Y.O5C(),n.moveProxy(e)})),s("pointerup",(function(e){return Y.O5C(),n.endProxy(e)}))):("t","ouchend",t.isMobile||("mo","usedown","m","ousemove",s("mousemove",(function(e){Y.O5C(),n.iosMouseMoveProxy(e)})),s("mouseenter",(function(e){n.iosMouseMoveProxy(e)})),s("mousedown",(function(e){n.iosMouseDownProxy(e)})),s("mouseup",(function(e){Y.U5C(),n.iosMouseUpProxy(e)}))),s("touchstart",(function(e){n.touchstart(e)})),s("touchmove",(function(e){Y.O5C(),n.touchmove(e)})),s("touchend",(function(e){n.touchend(e)})),s("pointerdown",(function(e){n.touchPointerType=e.pointerType})),i&&(i.removeAttribute("onMouseOver"),i.removeAttribute("onMouseOut")),a&&(a.removeAttribute("onMouseOver"),a.removeAttribute("onMouseOut"))):("mou","sed","ow","n",s("mousemove",(function(e){n.mousemove(e)})),s("mouseenter",(function(e){n.mousemove(e)})),s("mousedown",(function(e){n.mousedown(e)})),s("mouseup",(function(e){n.mouseup(e)}))),o=t.wheelEvent,this.captureMouseWheelEvents&&s(o,(function(e){Y.U5C(),n.mouseWheel(e)}),{passive:!1}))},t.ChartEngine.prototype.mousedown=function(e){var i,a,r,n,s,o;if(i="m",i+="o",i+="usedown",!this.runPrepend(i,arguments)&&(this.grabOverrideClick=!1,this.displayInitialized&&this.displayCrosshairs&&!this.repositioningDrawing&&!(this.editingAnnotation||e.button&&e.button>=2)))if(a=this.container.getBoundingClientRect(),this.top=a.top,this.left=a.left,this.right=this.left+this.width,this.bottom=this.top+this.height,e.clientX>=this.left&&e.clientX<=this.right&&e.clientY>=this.top&&e.clientY<=this.bottom){if(this.insideChart=!0,this.currentPanel){this.manageTouchAndMouse&&e&&e.preventDefault&&this.captureTouchEvents&&e.preventDefault(),this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,this.hasDragged=!1,this.userPointerDown=!0,""===this.openDialog&&this.registerPointerEvent({x:e.clientX,y:e.clientY,time:this.mouseTimer},"down"),r=this.currentPanel.chart;for(var l=0;l<this.drawingObjects.length;l++)if((n=this.drawingObjects[l]).highlighted&&!n.permanent){if(this.cloneDrawing)return(s=new(0,t.ChartEngine.drawingTools[n.name])).reconstruct(this,n.serialize()),this.drawingObjects.push(s),this.activateRepositioning(s),void(s.repositioner=n.repositioner);if(o=this.currentVectorParameters.vectorType,!(t.Drawing&&o&&t.Drawing[o]&&(new t.Drawing[o]).dragToDraw))return void this.activateRepositioning(n)}this.mainSeriesRenderer||{};var h=this.baselineHelper;if(Y.U5C(),!h.size||!this.findBaselineHandle(e,!0)){if(this.controls.anchorHandles){var c=this.controls.anchorHandles;for(var u in c){var d=c[u],p=d.handle,g=d.sd,f=d.highlighted;if(f)return this.repositioningAnchorSelector={sd:g},void p.classList.add("stx-grab")}}var m;if(!(this.drawingClick&&(this.currentPanel.subholder===e.target&&this.drawingClick(this.currentPanel,this.cx,this.cy),this.activeDrawing&&this.activeDrawing.dragToDraw)))this.grabbingScreen=!0,r.spanLock=!1,this.yToleranceBroken=!1,this.grabStartX=e.clientX,this.grabStartY=e.clientY,this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=r.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartYAxis=this.whichYAxis(this.currentPanel),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPanel=this.currentPanel,setTimeout((m=this,function(){m.grabbingHand()}),100),this.swipeStart&&this.swipeStart(r),(this.longHoldTime||0===this.longHoldTime)&&this.startLongHoldTimer(),this.runAppend("mousedown",arguments)}}}else this.insideChart=!1},t.ChartEngine.prototype.mousemove=function(e){var i;i=e,t.ChartEngine.crosshairX=i.clientX,t.ChartEngine.crosshairY=i.clientY,i.type.toLowerCase().indexOf("enter")>-1?this.positionCrosshairsAtPointer():this.runPrepend("mousemove",arguments)||this.displayInitialized&&""===this.openDialog&&(this.baselineHelper.size&&this.findBaselineHandle(i),this.grabbingScreen&&1!==i.buttons&&(this.cancelLongHold=!0,this.displayDragOK(),this.grabbingScreen=!1,this.findHighlights(!1,!0)),this.mousemoveinner(i.clientX,i.clientY),this.runAppend("mousemove",arguments))},t.ChartEngine.prototype.mouseup=function(e){var i,a,r,n,s,o,l,h,c,u;if(!this.runPrepend("mouseup",arguments)){if(this.swipe.end=!0,this.cancelLongHold=!0,this.repositioningDrawing){if(!this.currentVectorParameters.vectorType||Date.now()-this.mouseTimer>250)return i="vect",i+="or",this.changeOccurred(i),t.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.adjustDrawings(),void this.draw();this.activateRepositioning(null)}if(this.repositioningBaseline){var d=this.repositioningBaseline.handle;return this.repositioningBaseline=null,d.classList.remove("stx-grab"),(a=this.mainSeriesRenderer||{}).params&&a.params.baseline&&a.params.type,void this.draw()}if(this.repositioningAnchorSelector)return t.Studies.repositionAnchor(this,this.repositioningAnchorSelector.sd),this.repositioningAnchorSelector=null,Object.values(this.controls.anchorHandles).forEach((function(e){return e.handle.classList.remove("stx-grab")})),void this.findHighlights();if(r=this.userPointerDown,this.userPointerDown=!1,this.displayInitialized){if(n=this.backOutY(e.clientY),s=this.backOutX(e.clientX),o=e.which&&e.which>=2||e.button&&e.button>=2,""!==this.openDialog||o||this.registerPointerEvent({x:e.clientX,y:e.clientY,time:Date.now()},"up"),l=this.isDoubleClick(),this.grabbingScreen=!1,this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(s,n),this.currentPanel=this.whichPanel(n)),h=this.currentPanel,this.grabStartYAxis=null,this.displayDragOK(),""!==this.openDialog)return c="stx",c+="-d",c+="rag-cha",c+="rt",void(this.insideChart&&this.container.classList.remove(c));if(this.grabOverrideClick)return this.overXAxis||this.overYAxis||!this.swipeRelease||this.swipeRelease(),this.container.classList.remove("stx-drag-chart"),this.grabOverrideClick=!1,this.doDisplayCrosshairs(),void this.updateChartAccessories();if(this.insideChart&&this.container.classList.remove("stx-drag-chart"),!t.ChartEngine.resizingPanel)return o||e.ctrlKey?this.anyHighlighted&&!0!==this.bypassRightClick?(this.rightClickHighlighted(),e.preventDefault&&this.captureTouchEvents&&e.preventDefault(),e.stopPropagation(),!1):(this.dispatch("rightClick",{stx:this,panel:h,x:s,y:n}),!0):void(e.clientX<this.left||e.clientX>this.right||e.clientY<this.top||e.clientY>this.bottom||(u=h&&h.subholder===e.target,l&&(u||this.overYAxis||this.overXAxis)?this.doubleClick({button:e.button,x:s,y:n}):(r&&u&&(this.longHoldTookEffect&&!this.activeDrawing||this.drawingClick(h,s,n),!this.longHoldTookEffect&&this.activeMarker&&this.activeMarker.click({cx:s,cy:n,panel:h})),this.longHoldTookEffect||this.activeDrawing||this.dispatch("tap",{stx:this,panel:h,x:s,y:n})),this.runAppend("mouseup",arguments)));this.releaseHandle()}}},t.ChartEngine.prototype.registerPointerEvent=function(e,t){this.pointerEvents[t].length>1&&this.pointerEvents[t].pop(),this.pointerEvents[t].unshift(e)},t.ChartEngine.prototype.resetPointerEvent=function(e){Y.O5C(),this.pointerEvents[e].splice(0)},t.ChartEngine.prototype.isDoubleClick=function(e){var t,i;t=e?1200:400;var a=this.pointerEvents,r=a.up,n=a.down;return this.cancelTouchSingleClick=!1,!(r.length<2||n.length<2)&&((i=n[0].time-r[1].time<this.doubleClickTime&&Math.pow(r[1].x-r[0].x,2)+Math.pow(r[1].y-r[0].y,2)<=t&&r[1].time-n[1].time<this.longHoldTime&&r[0].time-n[0].time<this.longHoldTime)&&(this.resetPointerEvent("up"),this.resetPointerEvent("down"),this.cancelTouchSingleClick=!0),i)},t.ChartEngine.prototype.doubleClick=function(e,i,a){var r,n;if(r="dou",r+="bleClick",!this.runPrepend(r,arguments)&&!this.editingAnnotation)return t.ChartEngine.drawingLine?this.undo():void(this.activeDrawing||(n=this.activeMarker&&this.activeMarker.doubleClick({cx:i,cy:a,panel:this.currentPanel}),Y.U5C(),n||this.dispatch("doubleClick",{stx:this,button:e,x:i,y:a}),this.runAppend("doubleClick",arguments)))},t.ChartEngine.prototype.handleMouseOut=function(e){var i,a,r;if(e=e||window.event,!t.withinElement(this.chart.container,e.pageX,e.pageY)){if(i="h",i+="andleMouseOut",this.runPrepend(i,arguments))return;this.grabbingScreen||this.findHighlights(null,!0),this.undisplayCrosshairs(),this.touches=[],this.touching=!1,this.activeDrawing&&this.userPointerDown&&(this.userPointerDown=!1,this.drawingLine=!1,a=this.backOutY(e.pageY),r=this.backOutX(e.pageX),this.drawingClick(this.currentPanel,r,a)),this.repositioningAnchorSelector&&(this.repositioningAnchorSelector=null),this.insideChart=!1,this.overYAxis=!1,this.overXAxis=!1,this.displaySticky(),this.runAppend("handleMouseOut",arguments)}},t.ChartEngine.prototype.startLongHoldTimer=function(){var e,t;e=this,this.cancelLongHold=!1,this.longHoldTimeout&&clearTimeout(this.longHoldTimeout),t=function(){e.cancelLongHold||(e.longHoldTookEffect=!0,Y.U5C(),e.dispatch("longhold",{stx:e,panel:e.currentPanel,x:e.cx,y:e.cy}),e.displayDragOK())},this.longHoldTime?this.longHoldTimeout=setTimeout(t,this.longHoldTime):0===this.longHoldTime&&t()},t.ChartEngine.prototype.grabHandle=function(e){var i;i="stx",i+="-gr",i+="ab",this.runPrepend("grabHandle",arguments)||e&&(t.ChartEngine.crosshairY=e.top+this.top,t.ChartEngine.resizingPanel=e,e.handle.classList.add(i),this.runAppend("grabHandle",arguments))},t.ChartEngine.prototype.grabbingHand=function(){this.allowScroll&&this.grabbingScreen&&(t.touchDevice||this.container.classList.add("stx-drag-chart"))},t.ChartEngine.prototype.releaseHandle=function(){if(this.runPrepend("releaseHandle",arguments))return!0;t.clearCanvas(this.chart.tempCanvas,this),this.resizePanels(),t.ChartEngine.resizingPanel&&t.ChartEngine.resizingPanel.handle.classList.remove("stx-grab"),t.ChartEngine.resizingPanel=null,this.runAppend("releaseHandle",arguments)},t.ChartEngine.prototype.findHighlights=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,z,B,U,j,W,Q=Y;a=this.preferences[e?"highlightsTapRadius":"highlightsRadius"],this.highlightViaTap=e;var q=this.cx,G=this.cy;if(this.anyHighlighted=!1,this.currentPanel){var X=this.currentPanel.chart;if(this.activeDrawing&&(i=!0),r=!1,n=null,s=i?{}:{forceShow:!0,type:"drawing"},o={x0:this.tickFromPixel(q-a,X),x1:this.tickFromPixel(q+a,X),y0:this.valueFromPixel(G-a,this.currentPanel),y1:this.valueFromPixel(G+a,this.currentPanel),cx0:q-a,cx1:q+a,cy0:G-a,cy1:G+a,r:a},this.repositioningDrawing&&o.x1-o.x0<2?(o.x1++,o.x0--):o.x1==o.x0&&(o.x0-=.5,o.x1+=.5),l=this.markerHelper&&this.markerHelper.chartMap[X.name]&&this.markerHelper.chartMap[X.name].markers,!X.hideDrawings)for(var Z=this.drawingObjects.length-1;Z>=0;Z--)h=this.drawingObjects[Z],this.panels[h.panelName]&&(this.repositioningDrawing&&this.repositioningDrawing!=h||(c=h.highlighted,u=h.panelName==this.currentPanel.name,h.repositioner=h.intersected(this.crosshairTick,this.crosshairValue,o),u=u&&h.repositioner,!i&&u?(c?(n=h,this.anyHighlighted&&this.singleDrawingHighlight&&(h.highlighted=!1),h.highlighted&&h.highlighted!=c&&(r=!0)):c!=h.highlight(!0)&&(n||(n=h),this.anyHighlighted&&this.singleDrawingHighlight&&(h.highlighted=!1),r=!0),this.anyHighlighted=!0):c!=h.highlight(!1)&&(r=!0),h.highlighted&&(s.noDelete=h.permanent,s.noEdit=!this.callbackListeners.drawingEdit.length)));for(d in this.layout.studies)(p=this.layout.studies[d]).prev=p.highlight,p.highlight=this.yaxisMatches(p,this.grabStartYAxis);for(d in X.seriesRenderers){(y=X.seriesRenderers[d]).params.highlight=this.yaxisMatches(y,this.grabStartYAxis);for(var K=0;K<y.seriesParams.length;K++)(m=y.seriesParams[K]).prev=m.highlight,m.highlight=y.params.highlight}for(g=0;l&&g<l.length;g++)(f=l[g]).params.box&&(this.activeMarker=null,f.prev=l[g].highlight,f.highlight=!1);if(this.markerHelper&&(this.markerHelper.highlighted=[]),this.highlightedDataSetField=null,this.highlightedDraggable=null,!i&&!this.anyHighlighted&&this.controls.anchorHandles)for(var J in this.controls.anchorHandles){var $=v=this.controls.anchorHandles[J],ee=$.handle,te=$.sd;if(x=this.resolveX(q),b=this.resolveY(G),ee){var ie=ee.getBoundingClientRect(),ae=ie.left,re=ie.top,ne=ie.right,se=ie.bottom;if(t.boxIntersects(ae,re,ne,se,x,b,x,b)){v.highlighted=!0,this.anyHighlighted=!0,r=!0,s={message:te.name,type:"anchorHandle"};continue}!0===v.highlighted&&(v.highlighted=!1,r=!0)}}if(!i&&!this.anyHighlighted&&X.dataSegment){195486209,62385763,C=2;for(var oe=1;195486209!==Q.M86(oe.toString(),oe.toString().length,10750);oe++)S=this.barFromPixel(q),C+=2;if(62385763!==Q.M86(C.toString(),C.toString().length,94444)&&(S=this.barFromPixel(q)),(S=this.barFromPixel(q))>=0&&S<X.dataSegment.length){for(d in this.overlays)if("f","unc","tio","n",(p=this.overlays[d]).panel==this.currentPanel.name&&!1!==p.study.isHighlighted)if("function"!=R(p.study.isHighlighted)){if(X.dataSegment[S]){for(var le in p.outputMap)if(ue.call(this,S,o,le,p.getYAxis(this))){p.name!=p.panel&&(this.anyHighlighted=!0),p.highlight=le;break}if(p.highlight){this.highlightedDataSetField=le;break}}}else p.study.isHighlighted(this,q,G)&&(p.highlight=!0,this.anyHighlighted=!0);for(d in X.seriesRenderers){if(this.highlightedDataSetField)break;if(A=(k=X.seriesRenderers[d]).params.panel,k!=this.mainSeriesRenderer&&(k.params.highlightable||this.currentVectorParameters.vectorType)&&A==this.currentPanel.name)for(g=0;g<k.seriesParams.length;g++){if("Cl","o","s","e",(D=(m=k.seriesParams[g]).field)||k.highLowBars||(D=this.defaultPlotField||"Close"),m.symbol&&m.subField&&(D+="--\x3e"+m.subField),!(M=k.params.yAxis)&&A&&(M=this.panels[A].yAxis),k.params.step&&S>0){if(!k.caches[m.id])continue;if(!(w=k.caches[m.id][S])&&0!==w)continue;Q.x3g(7),(((T=k.caches[m.id][Q.l3g(1,S)])||0===T)&&G+a>=w&&G-a<=T||G-a<=w&&G+a>=T)&&(m.highlight=!0,this.anyHighlighted=!0)}else ue.call(this,S,o,D,M,k,m.id)&&(m.highlight=!0,this.anyHighlighted=!0);if(m.highlight){this.highlightedDataSetField=D;break}}}}}for(d in _=this.preferences.dragging,this.overlays)(p=this.overlays[d]).highlight&&("st","u","d","y",this.anyHighlighted=!0,V=p.inputs.display||p.name,s={message:V=this.translateIf(V),noDelete:p.permanent,noEdit:!p.editFunction,type:"study"},n=null,(!0===_||_&&_.study)&&(F=p),P=p.getYAxis(this)),p.prev!=p.highlight&&(r=!0);for(d in X.seriesRenderers){I=(O=X.seriesRenderers[d]).params.yAxis?O.params.yAxis.textStyle:null;for(var he=0;he<O.seriesParams.length;he++)m=O.seriesParams[he],O.params.highlightable&&m.highlight&&("ser","ies",this.anyHighlighted=!0,"auto"==(L=m.color||I)&&(L=this.defaultColor),m.opacity&&1!==m.opacity&&(L=t.hexToRgba(t.colorToHex(L),parseFloat(m.opacity))),s={message:m.display||m.symbol,backgroundColor:L,noDelete:m.permanent,type:"series"},n=null,(!0===_||_&&_.series)&&(F=O,O.params.highlight=!0),P=O.getYAxis(this)),m.prev!=m.highlight&&(r=!0)}for(d in this.plugins)E={},(H=this.plugins[d]).findHighlights&&((E=H.findHighlights(this,e,i)).somethingChanged&&(r=!0),E.anyHighlighted&&(this.anyHighlighted=!0,s=E.stickyArgs||{}));for(var ce in N=this.whichPanel(G),z=this.whichYAxis(N,q),P||(P=z),this.currentBaseline&&(P=this.currentBaseline.getYAxis(this)),P&&(P.highlight||(r=!0),P.highlight=!0),B=[],this.panels)B=B.concat(this.panels[ce].yaxisLHS).concat(this.panels[ce].yaxisRHS);for(d=0;d<B.length;d++)(P!=B[d]||i)&&(B[d].highlight&&(r=!0),B[d].highlight=!1);for(g=0;l&&g<l.length;g++)(U=(f=l[g]).params.box)&&f.params.panelName===this.currentPanel.name&&(j=t.convertBoxToPixels(this,this.currentPanel.name,o),t.boxIntersects(j.x0,j.y0,j.x1,j.y1,U.x0,U.y0,U.x1,U.y1)&&(this.activeMarker=f,f.highlight=!0,this.markerHelper.highlighted.push(f)),f.prev!=f.highlight&&(r=!0));if(r&&(this.draw(),s.panel=N,this.anyHighlighted&&!this.grabStartYAxis?s.panel=N:s={},this.displaySticky(s),this.clearMeasure(),n&&n.measure()),(!0===_||_&&_.yaxis)&&z&&!z.noDraw&&(this.anyHighlight=!0,F=z),this.anyHighlighted||this.setMeasure(),F&&!N.noDrag){if(this.longHoldTookEffect&&!this.cancelLongHold){if(F.params)for(d in F.params.dependentOf&&((F=X.seriesRenderers[F.params.dependentOf]).params.highlight=!0),X.seriesRenderers)X.seriesRenderers[d].params.dependentOf==F.params.name&&(X.seriesRenderers[d].params.highlight=!0);if(this.highlightedDraggable=F,F.getDependents)for(d in W=F.getDependents(this,!0),this.overlays)p=this.overlays[d],W.indexOf(p)>-1&&(p.highlight=!0)}this.container.classList.add("stx-draggable")}else"stx-dra","ggab","le",this.container.classList.remove("stx-draggable");this.highlightedDataSetField=this.adjustHighlightedDataSetField(this.highlightedDataSetField),this.displayDrawOK()}function ue(e,i,a,r,n,s){var o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,w,k,A,D,M,T,F;if("segm","ent","C","l","os","e",o=this.chart,l=this.currentPanel,r||(r=l.yAxis),h=a.split("--\x3e"),c=h[0],(u=h[1])||(u="Close"),d=o.dataSegment[S],v=null,x=null,b=null,C=new Array(3),w=n&&n.caches[s],d&&w){for(f=w[S],v=d.tick,(f||0===f)&&(C[0]=1),k=S-1;k>=0;k--)if(w[k]||0===w[k]){m=w[k],Q.x3g(89),x=Q.I3g(v,S,k),C[1]=1;break}for(k=S+1;k<o.dataSegment.length;k++)if(w[k]||0===w[k]){y=w[k],Q.c3g(89),b=Q.l3g(v,S,k),C[2]=1;break}}if(null===x&&(p=this.getPreviousBar.call(this,o,a,S))&&(x=p.tick,m=P(p)),null===b&&(g=this.getNextBar.call(this,o,a,S))&&(b=g.tick,y=P(g)),null===x&&null===b)return!1;if(w||(f=P(d),m=P(p),y=P(g),v=d.tick,p&&(x=p.tick),g&&(b=g.tick)),m||0===m||(Q.x3g(26),m=Q.l3g(1232817632,"0"),x=0),!y&&0!==y)if(f||0===f?(y=f,C[2]=C[0]):(y=m,C[2]=C[1]),s&&o.series[s].parameters.extendToEndOfDataSet){Q.x3g(30);var _=Q.I3g(15,14,0,0);b=o.dataSet.length-_}else b=x;function P(e){var t;return e?((t=e[c])&&(t[u]||0===t[u])&&(t=t[u]),n&&n.getBasis&&(t+=n.getBasis(e,c,u)),Q.U5C(),o.transformFunc&&r==o.yAxis?e.transform&&c in e.transform?((t=e.transform[c])&&(t[u]||0===t[u])&&(t=t[u]),t):o.transformFunc(this,o,t):t):null}return f||0===f||(f=y,v=b,C[0]=C[2],0===m&&0===x&&(m=f,x=v,Q.x3g(26),C[1]=C[Q.I3g(1787494112,"0")])),A=this.pixelFromTransformedValue.bind(this),f=(D=this.valueFromPixel.bind(this))(C[0]?f:A(f,l,r),l),m=D(C[1]?m:A(m,l,r),l),y=D(C[2]?y:A(y,l,r),l),M=t.convertBoxToPixels(this,l.name,i),T=t.convertBoxToPixels(this,l.name,{x0:x,y0:m,x1:v,y1:f}),F=t.convertBoxToPixels(this,l.name,{x0:v,y0:f,x1:b,y1:y}),!(!t.boxIntersects(M.x0,M.y0,M.x1,M.y1,T.x0,T.y0,T.x1,T.y1,"segment")&&!t.boxIntersects(M.x0,M.y0,M.x1,M.y1,F.x0,F.y0,F.x1,F.y1,"segment"))}},t.ChartEngine.prototype.rightClickHighlighted=function(){Y.O5C(),this.runPrepend("rightClickHighlighted",arguments)||(this.deleteHighlighted(!0),this.runAppend("rightClickHighlighted",arguments))},t.ChartEngine.prototype.deleteHighlighted=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g;if(!this.runPrepend("deleteHighlighted",arguments)){if(this.cancelTouchSingleClick=!0,t.clearCanvas(this.chart.tempCanvas,this),(a=!1===this.bypassRightClick)||!this.bypassRightClick.drawing)for(var f=this.drawingObjects.length-1;f>=0;f--)(r=this.drawingObjects[f]).highlighted&&(e?this.rightClickDrawing(r,i):r.permanent||(r.abort()||(n=this.exportDrawings(),this.drawingObjects.splice(f,1),this.undoStamp(n,this.exportDrawings())),this.changeOccurred("vector")));if(a||!this.bypassRightClick.study)for(var m in this.overlays)((s=this.overlays[m]).overlay||s.underlay)&&s.highlight&&!s.permanent&&(e||i?this.rightClickOverlay(m,i):this.removeOverlay(m));if(o=this.currentPanel.chart,a||!this.bypassRightClick.series)for(var y in o.seriesRenderers)if((l=o.seriesRenderers[y]).params.highlightable){c=(h=this.panels[l.params.panel])&&h.yAxis.name;for(var v=l.seriesParams.length-1;v>=0;v--)u=l.seriesParams[v],!l.params.highlight&&!u.highlight||u.permanent||(l.removeSeries(u.id),l.seriesParams.length<1&&(this.removeSeriesRenderer(l),l.params.name==c?this.electNewPanelOwner(l.params.panel):(this.checkForEmptyPanel(l.params.panel),(d=this.getYAxisByName(h,l.params.name))&&(d.name=d.studies[0]||d.renderers[1]))))}this.draw(),this.resizeChart(),this.clearMeasure(),(p=this.controls.mSticky)&&(g="non",g+="e",p.style.display=g,p.children[0].innerHTML=""),this.runAppend("deleteHighlighted",arguments)}},t.ChartEngine.prototype.displayDragOK=function(e){var t,i,a,r,n,s,o,l,h,c,u=Y;function d(e){var t,i;t=this.translateIf(e.querySelector(".field").getAttribute("text")),(i=this.whichYAxis(this.whichPanel(this.cy),this.cx,this.cy))&&"all"==i.dropzone&&(t+="--\x3e"+this.translateIf(i.name)),e.querySelector(".field").innerHTML=t}if(t=this.controls.dragOk,u.O5C(),t){if(e||this.tapForHighlighting&&this.touchingEvent&&!this.anyHighlighted||this.findHighlights(this.highlightViaTap),a=(i=this.highlightedDraggable)&&i.undraggable&&i.undraggable(this),r=this.cx,n=this.cy,!e){if(i&&!a&&this.longHoldTookEffect&&!this.cancelLongHold)"st","x-d","rag-char","t",s=i.inputs&&i.inputs.display||i.params&&(i.params.display||i.params.name)||i.name,t.querySelector(".field").setAttribute("text",s),d.call(this,t),t.style.display="inline-block",this.draw(),this.displaySticky(),this.grabStartYAxis?this.container.classList.replace("stx-drag-chart","stx-drag-axis"):this.container.classList.replace("stx-drag-chart","stx-drag-series");else for(var p in t.style.display="none",this.draw(),this.container.classList.remove("stx-drag-series"),this.container.classList.remove("stx-drag-axis"),this.panels){for("t","o","p","lef","t",(o=this.panels[p].subholder.classList).remove("dropzone"),o.remove("all"),o.remove("left"),o.remove("right"),o.remove("top"),o.remove("bottom"),l=0;l<this.panels[p].yaxisLHS.length;l++)this.panels[p].yaxisLHS[l].dropzone=null;for(l=0;l<this.panels[p].yaxisRHS.length;l++)this.panels[p].yaxisRHS[l].dropzone=null}this.draw()}i&&("p","x",h=n+t.offsetHeight,c=Math.max(0,r-t.offsetWidth),u.c3g(1),t.style.top=u.l3g(h,"px"),u.c3g(1),t.style.left=u.l3g(c,"px"),d.call(this,t))}},t.ChartEngine.prototype.displayDrawOK=function(){var e,i,a,r,n=Y;n.O5C(),(e=this.controls.drawOk)&&t.Drawing&&((i=t.Drawing[this.currentVectorParameters.vectorType])&&(i=new i),this.highlightedDataSetField&&i&&i.getYValue?("p","x",e.style.display="inline-block",a=this.cy+e.offsetHeight,r=this.cx-e.offsetWidth,n.x3g(1),e.style.top=n.l3g(a,"px"),n.x3g(1),e.style.left=n.I3g(r,"px"),e.querySelector(".field").innerHTML=this.translateIf(this.highlightedDataSetField)):e.style.display="none")},t.ChartEngine.prototype.mouseWheel=function(e){var i,a,r,n,s,o,l,h,c,u=Y;if(i="un",i+="d",i+="efine",i+="d",!this.runPrepend("mouseWheel",arguments)&&(e.preventDefault&&e.preventDefault(),""===this.openDialog&&(a=e.deltaX,r=e.deltaY,Math.abs(r)>Math.abs(a)?a=0:r=0,this.lastMouseWheelEvent=Date.now(),0!==Math.abs(a)||0!==Math.abs(r)))){if(this.allowSideswipe&&0!==a)return n="horiz",n+="o",n+="nta",n+="l",this.lastMove=n,(s=a)>50&&(s=50),s<-50&&(s=-50),this.grabbingScreen=!0,this.currentPanel||(this.currentPanel=this.chart.panel),this.grabStartX=t.ChartEngine.crosshairX,this.grabStartY=t.ChartEngine.crosshairY,this.grabStartScrollX=this.chart.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartMicropixels=this.micropixels,this.grabStartPanel=this.currentPanel,this.mousemoveinner(t.ChartEngine.crosshairX-s,t.ChartEngine.crosshairY),this.updateChartAccessories(),void(this.grabbingScreen=!1);if(this.lastMove="vertical",this.allowZoom&&this.displayInitialized){if(!r)if("mousewheel"==t.wheelEvent){u.x3g(15);var d=u.l3g(34,12,6);if(r=-1/d*e.wheelDelta,e.wheelDeltaX){u.x3g(90);var p=u.I3g(3,11,11,16,406);u.c3g(91);var g=u.l3g(38,39,19,2);a=p/g*e.wheelDeltaX}}else r=e.detail;if(R(e.deltaMode)==i&&(e.deltaMode="MozMousePixelScroll"==e.type?0:1),o=-r,1==e.deltaMode&&(o*=33),l=null,h=null,this.mouseWheelAcceleration&&(c=Math.max(Math.pow(Math.abs(o),.3),1),u.c3g(59),l=u.l3g(c,1,.1),u.x3g(92),h=u.I3g(c,1,"0.2")),this.zoomInitiatedByMouseWheel=!0,o>0?this.reverseMouseWheel?this.zoomOut(null,h):this.zoomIn(null,l):o<0&&(this.reverseMouseWheel?this.zoomIn(null,l):this.zoomOut(null,h)),!this.runAppend("mouseWheel",arguments))return!1}}},t.ChartEngine.handleContextMenu=function(e){var i;Y.O5C();for(var a=0;a<t.ChartEngine.registeredContainers.length;a++)if((i=t.ChartEngine.registeredContainers[a].stx)&&i.anyHighlighted)return e.preventDefault&&e.preventDefault(),!1},"undefined"!=("undefined"==typeof document?"undefined":R(document))&&document.addEventListener("contextmenu",t.ChartEngine.handleContextMenu),t.ChartEngine.htmlControls={annotationSave:'<span class="stx-btn stx_annotation_save" style="display: none;">save</span>',annotationCancel:'<span class="stx-btn stx_annotation_cancel" style="display: none; margin-left:10px;">cancel</span>',mSticky:'<div class="stx_sticky"> <span class="mStickyInterior"></span> <span class="mStickyRightClick"><span class="overlayEdit stx-btn" style="display:none"><span>&nbsp;</span></span> <span class="overlayTrashCan stx-btn" style="display:none"><span>&nbsp;</span></span> <span class="mouseDeleteInstructions"><span>(</span><span class="mouseDeleteText">right-click to delete</span><span class="mouseManageText">right-click to manage</span><span class="dragAnchorText">drag to change anchor time</span><span>)</span></span></span><span class="stickyLongPressText">(long-press to drag)</span></div>',drawOk:'<div class="stx_draw_ok"><div class="icon"></div><div class="field"></div></div>',dragOk:'<div class="stx_drag_ok"><div class="icon"></div><div class="field"></div></div>',crossX:'<div class="stx_crosshair stx_crosshair_x" style="display: none;"></div>',crossY:'<div class="stx_crosshair stx_crosshair_y" style="display: none;"></div>',chartControls:'<div class="stx_chart_controls" style="display: none; bottom: 22px;"><div class="chartSize"><span class="stx-zoom-out"></span><span class="stx-zoom-in"></span></div></div>',home:'<div class="stx_jump_today" style="display:none"><span></span></div>',floatDate:'<div class="stx-float-date" style="visibility: hidden;"></div>',handleTemplate:'<div class="stx-ico-handle" style="display: none;"><span></span></div> ',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div><div class="stx-btn-panel"><span class="stx-ico-up"></span></div><div class="stx-btn-panel"><span class="stx-ico-focus"></span></div><div class="stx-btn-panel"><span class="stx-ico-down"></span></div><div class="stx-btn-panel"><span class="stx-ico-edit"></span></div><div class="stx-btn-panel"><span class="stx-ico-close"></span></div></div>',baselineHandle:'<div class="stx-baseline-handle" style="display: none;"></div>',notificationTray:'<div class="stx_notification_tray"><template><div><span class="icon"></span><span class="message"></span></div></template></div>'},t.ChartEngine.prototype.registerChartControl=function(e,i,a){var r,n,s,o=Y;if((r=this.controls)&&r.chartControls&&!r.chartControls.querySelector("."+e))return n=null,(s=r.chartControls.querySelector(".stx-zoom-in"))?("st","x-chart-c","ontrol-butto","n ","s","pan",n=document.createElement("span"),o.c3g(36),n.innerHTML=o.I3g('<span class="stx-tooltip">',i,"</span>"),o.x3g(1),n.className=o.I3g("stx-chart-control-button ",e),s.parentNode.appendChild(n),a&&t.safeClickTouch(n,a),t.touchDevice||this.makeModal(n),n):void 0},t.ChartEngine.prototype.zoomOut=function(e,t){var i,a,r,n;function s(e){return function(t){if(i.zoomSet(t,e),i.animations.zoom.hasCompleted){if(i.runAppend("zoomOut",arguments))return;i.changeOccurred("layout"),i.continuousZoom&&i.continuousZoom.execute(!0)}}}if(!this.runPrepend("zoomOut",arguments))for(var o in this.preferences.zoomOutSpeed?t=this.preferences.zoomOutSpeed:t||(Y.x3g(93),t=Y.l3g(.7,0,"1")),e&&e.preventDefault&&e.preventDefault(),this.cancelTouchSingleClick=!0,i=this,this.charts)r=(a=this.charts[o]).width*t/this.layout.candleWidth,!1===a.allowScrollFuture&&!1===a.allowScrollPast&&r>a.dataSet.length&&(r=a.dataSet.length),n=this.chart.width/r,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(s(a),this.layout.candleWidth,n)},t.ChartEngine.prototype.zoomIn=function(e,t){var i,a,r,n;function s(e){return function(t){if(i.zoomSet(t,e),Y.O5C(),i.animations.zoom.hasCompleted){if(i.runAppend("zoomIn",arguments))return;i.changeOccurred("layout"),i.continuousZoom&&i.continuousZoom.execute()}}}if(!this.runPrepend("zoomIn",arguments))for(var o in this.preferences.zoomInSpeed?t=this.preferences.zoomInSpeed:t||(t=.7),e&&e.preventDefault&&e.preventDefault(),this.cancelTouchSingleClick=!0,i=this,this.charts){if(r=(a=this.charts[o]).width*t/this.layout.candleWidth,a.maxTicks-r<1){Y.x3g(11);var l=Y.I3g(18,19);r=a.maxTicks-l}r<this.minimumZoomTicks&&(r=this.minimumZoomTicks),n=this.chart.width/r,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(s(a),this.layout.candleWidth,n)}},t.ChartEngine.prototype.createCrosshairs=function(){var e,t;this.runPrepend("createCrosshairs",arguments)||!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive||(e=this.controls.crossX,t=this.controls.crossY,Y.O5C(),e&&(e.onmousedown||(e.onmousedown=function(e){return Y.U5C(),e.preventDefault&&e.preventDefault(),!1})),t&&(t.onmousedown||(t.onmousedown=function(e){return e.preventDefault&&e.preventDefault(),!1})),this.runAppend("createCrosshairs",arguments))},i=!1,t.ChartEngine.prototype.mousemoveinner=t.ChartEngine.prototype.mousemoveinner||function(e,t){Y.U5C(),i||console.error("interaction feature requires activating movement feature."),i=!0}},p=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:e.CIQ).Marker||(t.ChartEngine.helpersToRegister.push((function(e){Y.O5C(),e.markerHelper={chartMap:{},classMap:{},domMarkers:[],highlighted:[]}})),t.ChartEngine.prototype.addToHolder=function(e){var i,a,r,n;(i=this.panels[e.params.panelName])&&(a=e.params,r=e.node,(n=e.stxNodeCreator)&&n.prepareForHolder&&(r=n.prepareForHolder(e)),Y.O5C(),a.chartContainer?this.container.appendChild(e.node):a.includeAxis?i.holder.appendChild(e.node):i.subholder.appendChild(r),e.chart=i.chart,n&&n.addToHolder&&n.addToHolder(e),n&&n.expand&&t.Marker.initializeScrollBehavior(n))},t.ChartEngine.prototype.getMarkerArray=function(e,t){var i,a;for(var r in Y.U5C(),i=[],this.markers)for(var n=0;n<this.markers[r].length;n++)"a","l","l","lab","e","l",a=this.markers[r][n],"panelName"==e?a.params.panelName==t&&i.push(a):"label"==e?r==t&&i.push(a):"all"==e&&i.push(a);return i},t.ChartEngine.prototype.removeFromHolder=function(e){var t,i,a,r,n,s;if((t=this.panels[e.params.panelName])&&(e.node.parentNode==t.holder?t.holder.removeChild(e.node):e.node.parentNode==t.subholder?t.subholder.removeChild(e.node):e.node.parentNode==this.container&&this.container.removeChild(e.node)),i=this.markers[e.params.label]){for(a=0;a<i.length;a++)if(i[a]===e){i.splice(a,1);break}if(r=this.markerHelper.chartMap[e.chart.name])for(a=0;a<r.markers.length;a++)if(r.markers[a]===e){r.markers.splice(a,1);break}if((n=this.markerHelper.classMap[e.className])&&(s=n[e.params.panelName]))for(a=0;a<s.length;a++)if(s[a]===e){s.splice(a,1);break}}},t.ChartEngine.prototype.moveMarkers=function(e,t){var i,a;i=this.getMarkerArray("panelName",e);for(var r=0;r<i.length;r++)i[r].params.panelName=t;for(var n in this.markerHelper.classMap)(a=this.markerHelper.classMap[n][e])&&(this.markerHelper.classMap[n][t]=a,delete this.markerHelper.classMap[n][e])},t.ChartEngine.prototype.establishMarkerTicks=function(){var e,t;for(var i in e=this.markerHelper.chartMap,Y.O5C(),e)if((t=e[i]).dataSetLength!=this.charts[i].dataSet.length)for(var a=0;a<t.markers.length;a++)this.setMarkerTick(t.markers[a])},t.ChartEngine.prototype.futureTickIfDisplayed=function(e){var t,i,a,r,n,s,o,l,h,c=Y;if(!((t=e.chart).dataSet.length<1)){i=t.xaxis[t.xaxis.length-1].DT,c.c3g(15);var u=c.l3g(60013,2,15);if(i=new Date(i.getTime()-this.timeZoneOffset*u),!(e.params.x>i)){a=t.maxTicks-t.dataSegment.length,r=t.dataSet.length+a,o=new Date(+t.dataSet[t.dataSet.length-1].DT),l=this.standardMarketIterator(o,null,t),h=e.params.x.getTime();for(var d=t.dataSet.length;d<r;d++){if(n=o.getTime(),(s=(o=l.next()).getTime())==h)return void(e.tick=d);if(s>h&&n<h)return c.x3g(7),void(e.tick=Math.max(c.I3g(1,d),0))}}}},t.ChartEngine.prototype.setMarkerTick=function(e){var t,i,a,r;if("mas","t","e","r",t=e.chart,"master"==e.params.xPositioner&&e.params.x)e.tick=Math.floor(e.params.x/this.layout.periodicity);else if("date"==e.params.xPositioner&&e.params.x){r=e.params.x.getTime();for(var n=0;n<t.dataSet.length;n++){if(i=a=t.dataSet[n].DT.getTime(),n>0&&(i=t.dataSet[n-1].DT.getTime()),a==r)return void(e.tick=n);if(a>r&&i<r)return Y.c3g(7),void(e.tick=Math.max(Y.l3g(1,n),0));if(r<a)return void(e.tick=null)}if(t.dataSet.length<1)return;new Date(+t.dataSet[n-1].DT).getTime()<r&&(e.params.future=!0),e.tick=null}},t.ChartEngine.prototype.positionMarkers=function(){var e,t,i,a,r,n,s;if("a","ll",e=this,t=this.chart,e.markerHelper&&(this.markerDelay||0===this.markerDelay?this.markerTimeout||(this.markerTimeout=setTimeout(l,this.markerDelay)):l(),Y.O5C(),i=this.getFirstLastDataRecord(t.dataSegment,"tick"),a=this.getFirstLastDataRecord(t.dataSegment,"tick",!0),i&&a)){r=this.getMarkerArray("all");for(var o=0;o<r.length;o++)s=(n=r[o]).stxNodeCreator,i.tick<=n.tick&&n.tick<=a.tick?s&&s.drawMarker&&s.drawMarker(n):n.attached&&s.expand&&(s.expand.style.visibility="hidden")}function l(){var t,i,a,r;if(!e.runPrepend("positionMarkers",arguments)){for(var n in e.markerTimeout=null,Y.U5C(),e.markerHelper.classMap)for(var s in e.markerHelper.classMap[n])t=e.markerHelper.classMap[n][s],i=e.panels[s],t.length&&((a={stx:e,arr:t,panel:i}).firstTick=i.chart.dataSet.length-i.chart.scroll,a.lastTick=a.firstTick+i.chart.dataSegment.length,(r=t[0].constructor.placementFunction)?r(a):e.defaultMarkerPlacement(a));e.runAppend("positionMarkers",arguments)}}},t.Marker=t.Marker||function(e){var i,a,r,n;this.params={xPositioner:"date",yPositioner:"value",panelName:"chart",permanent:!1,label:"generic",includeAxis:!1},t.extend(this.params,e),this.params.node||(this.params.node=document.createElement("DIV")),(i=this.params.stx)?(this.className||(this.className="CIQ.Marker"),t.derivedFrom(this.params.node,t.Marker.NodeCreator)?(this.stxNodeCreator=this.params.node,this.node=this.stxNodeCreator.node):this.node=this.params.node,a=this.params.label,i.markers[a]||(i.markers[a]=[]),i.markers[a].push(this),r=i.panels[this.params.panelName],this.chart=r.chart,i.markerHelper.chartMap[this.chart.name]||(i.markerHelper.chartMap[this.chart.name]={dataSetLength:0,markers:[]}),i.markerHelper.chartMap[this.chart.name].markers.push(this),n=i.markerHelper.classMap[this.className],Y.U5C(),n||(n=i.markerHelper.classMap[this.className]={}),n[this.params.panelName]||(n[this.params.panelName]=[]),n[this.params.panelName].push(this),this.stxNodeCreator&&this.stxNodeCreator.deferAttach||i.addToHolder(this),i.setMarkerTick(this),this.stxNodeCreator&&this.stxNodeCreator.drawMarker&&this.stxNodeCreator.drawMarker(this)):console.log("Marker created without specifying stx")},t.Marker.prototype.remove=function(){Y.U5C(),this.params.stx.removeFromHolder(this)},t.Marker.prototype.click=function(e){var t,i;Y.O5C(),t="nu",t+="m",t+="ber",R(arguments[0])===t&&(e={cx:arguments[0],cy:arguments[1],panel:arguments[3]});var a=e,r=a.cx,n=a.cy,s=a.panel;this.params.stx&&(i=this.params.node).click&&i.click(r,n,this,s)},t.Marker.prototype.doubleClick=function(e){e.cx,e.cy,e.panel;return Y.U5C(),!1},t.Marker.prototype.render=function(){var e,t;e=[this],t={stx:this.params.stx,arr:e,panel:this.params.stx.panels[this.params.panelName],showClass:this.showClass},this.constructor.placementFunction(t)},t.Marker.removeByLabel=function(e,t){var i,a;i=e.getMarkerArray("label",t),Y.O5C();for(var r=0;r<i.length;r++)a=i[r],e.removeFromHolder(a),a.stxNodeCreator&&a.stxNodeCreator.remove&&a.stxNodeCreator.remove(a);e.draw()},t.Marker.positionContentVerticalAndHorizontal=function(e){var i,a,r,n,s,o,l,h,c,u,d,p=Y;if(".","stx-mark","er-expan","d",(i=e.querySelectorAll(".stx-marker-expand")[0])&&t.trulyVisible(i)){a=i.offsetHeight,(r=i.style).left=r.right="",r.bottom=r.top="",s=(n=getComputedStyle(i)).left,o=n.bottom,p.x3g(94);var g=p.I3g(9,1,1);l=e.offsetLeft+parseInt(s,g),h=parseInt(o,10),c=e.offsetTop-(h+a-e.offsetHeight),u=e.parentNode.offsetWidth,d=e.parentNode.offsetHeight,l+i.offsetWidth>u&&(r.right=s,r.left="auto"),e.offsetTop<=d?c>d-a&&(r.top=d-e.offsetTop-a+"px",r.bottom="auto"):(p.c3g(1),r.top=p.I3g(d,"px")),e.offsetTop+e.offsetHeight>=0?c<0&&(r.top=-e.offsetTop+"px",r.bottom="auto"):r.bottom="0px"}},t.Marker.initializeScrollBehavior=function(e){var i=e.expand;if(i){i.addEventListener(t.wheelEvent,(function(e){return Y.U5C(),e.stopPropagation()}));var a=(t.UI||{}).scrollbarStyling;a?a.refresh(i):i.style.overflowY="scroll"}},t.ChartEngine.prototype.getBarBounds=function(e){var t,i,a,r;return this.layout.chartType,t="pandf"==this.layout.aggregationType?{high:Math.max(e.pfOpen,e.pfClose),low:Math.min(e.pfOpen,e.pfClose)}:{high:e.High,low:e.Low},e.markerHigh&&(t.high=e.markerHigh),e.markerLow&&(t.low=e.markerLow),void 0===e.Open&&(i=e.Close),void 0===e.High&&(a=Math.max(e.Open||i,e.Close)),void 0===e.Low&&(r=Math.min(e.Open||i,e.Close)),t.high||0===t.high||(t.high=a),t.low||0===t.low||(t.low=r),t},t.ChartEngine.prototype.defaultMarkerPlacement=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T=Y;i=e.panel,a=e.yAxis?e.yAxis:e.panel.yAxis,r=i.chart,s=(n=e.stx).chart.highLowBars,(o=r.defaultPlotField)&&!s||(o="Close"),l={};for(var F=0;F<e.arr.length;F++)if("a","ut","o","c","a","nd","le",c=(h=e.arr[F]).params,!h.params.box){if(u=h.node,h.clientWidth||(h.clientWidth=u.clientWidth),h.clientHeight||(h.clientHeight=u.clientHeight),d=null,p=c.xPositioner,g=c.yPositioner,f=h.tick,m=r.dataSet,y=h.clientWidth,"none"!=p){if("bar"==p&&c.x){"p","x",c.x<r.xaxis.length&&(v=r.xaxis[c.x])&&(d=v.data),T.c3g(7);var _=T.l3g(36,38);T.c3g(17);var P=T.I3g(13,25,11);u.style.left=Math.round(n.pixelFromBar(c.x,r)-y/_)+P+"px"}else{if("p","x",!f&&0!==f){if(!(c.future&&r.scroll<r.maxTicks)){u.style.left="-1000px";continue}if(n.futureTickIfDisplayed(h),!(f=h.tick)&&0!==f){"-1","000px",u.style.left="-1000px";continue}}if(f<m.length&&(d=m[f]),h.leftpx=Math.round(n.pixelFromTick(f,r)-r.left-y/2),h.rightEdge=h.leftpx+y,u.style.left=h.leftpx+"px",f<e.firstTick&&h.rightEdge<r.left-50)continue}if(!d){T.x3g(95);var V=T.l3g(11,12,13,2,11);d=m[m.length-V]}}else if(g.indexOf("candle")>-1&&(x=getComputedStyle(u).left)&&(b=n.barFromPixel(parseInt(x,10),r))>=0&&!(d=r.xaxis[b].data)){T.x3g(96);var O=T.l3g(2,4,19,3,20);d=m[m.length-O]}if(u.style.top="auto",C=c.y,S=h.clientHeight,"none"!=g){if("under_","c","andl","e",k=g+"-"+u.style.left,A=c.chartContainer?n.height:i.yAxis.bottom,D=0,0,void 0===l[k]&&(l[k]=0),M=l[k],l[k]+=S,"value"!=g||!C&&0!==C)if("below_candle"!=g&&"under_candle"!=g||!d)if("on_candle"==g&&d){if("p","x",w=d[o],s){T.c3g(19);var I=T.l3g(13,8,102);w=(d.Low+d.High)/I}D=Math.round(A-n.pixelFromPrice(w,i,a)-S/2-M)+"px"}else"top"==g?D=Math.round(A-S-M-i.top)+"px":"bottom"==g?("p","x",D=Math.round(M)+"px"):d&&("p","x",w=d[o],s&&(w=n.getBarBounds(d)[a.flipped?"low":"high"]),D=Math.round(A-n.pixelFromPrice(w,i,a)+M)+"px");else"p","x","h","i","g","h",w=d[o],s&&(w=n.getBarBounds(d)[a.flipped?"high":"low"]),D=Math.round(A-n.pixelFromPrice(w,i,a)-S-M)+"px";else{T.c3g(37);var L=T.I3g(0,17,19);D=Math.round(A-n.pixelFromPrice(C,i,a)-S/L)+"px"}u.style.bottom!=D&&(u.style.bottom=D)}t.Marker.positionContentVerticalAndHorizontal(u)}},t.Marker.NodeCreator=function(){},t.Marker.NodeCreator.toNode=function(){return Y.O5C(),this.node},t.Marker.Simple=function(e){var i,a,r,n,s;function o(){Y.O5C(),t.Marker.positionContentVerticalAndHorizontal(i)}if("st","x-stem","d","i","v","stx-","mark","er",(i=this.node=document.createElement("div")).className="stx-marker",i.classList.add(e.type),e.category&&i.classList.add(e.category),a=t.newChild(i,"div","stx-visual"),t.newChild(i,"div","stx-stem"),"callout"==e.type){"d","i","v",n=t.newChild(a,"div","stx-marker-content"),t.newChild(n,"h4",null,e.headline),r=t.newChild(n,"div","stx-marker-expand"),730353960,-39451560,s=2;for(var l=1;730353960!==Y.I86(l.toString(),l.toString().length,34715);l++)t.newChild(r,!1,1,e.story),s+=2;-39451560!==Y.I86(s.toString(),s.toString().length,84408)&&t.newChild(r,"p",null,e.story)}else"h","4",r=t.newChild(i,"div","stx-marker-expand"),t.newChild(r,"h4",null,e.headline),t.newChild(r,"p",null,e.story),t.safeClickTouch(r,(function(e){Y.U5C(),i.classList.toggle("highlight")}));t.safeClickTouch(a,(function(e){i.classList.toggle("highlight"),setTimeout(o,10)})),Y.O5C(),this.nodeType="Simple",this.expand=r},t.inheritsFrom(t.Marker.Simple,t.Marker.NodeCreator,!1))},g=function(e){var t,i,a,r,n,s,o,l=Y;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,l.c3g(97),a=l.I3g(6e4,2147483647,"60"),l.x3g(2),r=l.l3g(a,24),n=t.Market,t.Market=function(e){var a,r,n;if(this.market_def=!1,this.rules=!1,this.normalHours=[],this.extraHours=[],this.class_name="Market",l.U5C(),i.Date){l.x3g(26),a=-l.I3g(1253364544,"215090196"),l.x3g(2),r=-l.l3g("1956102042",1),n=2;for(var s=1;l.I86(s.toString(),s.toString().length,29267)!==a;s++)this.tz_lib=i.Date,n+=2;l.I86(n.toString(),n.toString().length,60856)!==r&&(this.tz_lib=i.Date)}else this.tz_lib=Date;this.market_tz="",this.hour_aligned=!1,this.convertOnDaily=!1,this.enabled_by_default=!1,void 0!==e&&e&&!t.isEmpty(e)&&("un","define","d","u","ndef","in","ed",e.market_definition&&(e=e.market_definition),e.rules&&(this.rules=e.rules),e.market_tz&&(this.market_tz=e.market_tz),e.convertOnDaily&&(this.convertOnDaily=e.convertOnDaily),R(e.hour_aligned)&&(this.hour_aligned=e.hour_aligned),"undefined"!==R(e.beginningDayOfWeek)&&(this.beginningDayOfWeek=e.beginningDayOfWeek),"undefined"!==R(e.enabled_by_default)&&e.enabled_by_default instanceof Array&&(this.enabled_by_default=e.enabled_by_default),this.market_def=e,void 0===this.market_def.name&&("no"," mar","ket name s","pecified",this.market_def.name="no market name specified"),t.Market._createTimeSegments(this),this.getSessionNames())},t.Market.Symbology=function(){},t.Market.Symbology.isForeignSymbol=function(e){return l.U5C(),!1},t.Market.Symbology.isFuturesSymbol=function(e){var t,i;l.U5C(),l.c3g(0),t=l.l3g("1439064008",0),l.c3g(0),i=l.l3g("1135121773",0);for(var a=1;l.M86(a.toString(),a.toString().length,95573)!==t;a++)return!0;return l.M86(2..toString(),2..toString().length,91012)!==i},t.Market.Symbology.isRateSymbol=function(e){return!1},t.Market.Symbology.isForexSymbol=function(e){return!1},t.Market.Symbology.isForexMetal=function(e,t){return!1},t.Market.Symbology.isForexFuturesSymbol=function(e){return!!t.Market.Symbology.isForexSymbol(e)||!!t.Market.Symbology.isFuturesSymbol(e)},t.Market.Symbology.factory=function(e){return l.U5C(),null},t.Market.Symbology.encodeTermStructureInstrumentSymbol=function(e,t){console.warn("You are trying to call `CIQ.Market.Symbology.encodeTermStructureInstrumentSymbol` but have not implemented it.")},n&&t.extend(t.Market,n),t.Market.prototype.sessions=null,t.Market.prototype.beginningDayOfWeek=0,t.Market.prototype.getSessionNames=function(){var e,t;return this.rules?this.sessions||(e=[],t=[],this.rules.map((function(i){i.name&&-1===e.indexOf(i.name)&&(e.push(i.name),t.push({name:i.name,enabled:!!i.enabled&&i.enabled}))})),this.sessions=t):this.sessions=[],this.sessions.slice()},t.Market.prototype._find_next_segment=function(e,t){var i,a,r,n;if(!this.market_def)return null;if(!this.rules)return null;i=new Date(+e),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),this._wasOpenIntraDay(i)&&(r=this.zseg_match.close_parts.hours,n=this.zseg_match.close_parts.minutes,i.setHours(r),i.setMinutes(n),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}));for(var s=1;-1178883860!==l.I86(s.toString(),s.toString().length,64801);s++)return a.next();return 1276508143!==l.I86(2..toString(),2..toString().length,76643)?a.next():void 0},t.Market.prototype._find_prev_segment=function(e,t){var i,a,r,n,s;return this.market_def&&this.rules?(i=new Date(+e),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),null===(r=this._wasOpenIntraDay(i))?(l.c3g(7),i=new Date(l.I3g(6e4,i)),r=this._wasOpenIntraDay(i)):(t&&i.getHours()===this.zseg_match.open_parts.hours&&i.getMinutes()===this.zseg_match.open_parts.minutes||!t&&i.getHours()===this.zseg_match.close_parts.hours&&i.getMinutes()===this.zseg_match.close_parts.minutes)&&(i=a.previous()),r?(n=this.zseg_match.open_parts.hours,s=this.zseg_match.open_parts.minutes,i.setHours(n),i.setMinutes(s),i=(a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz})).previous(),this.zseg_match.close_parts.hours===n&&this.zseg_match.close_parts.minutes===s?t?a.next():i:this.zseg_match.adjacent_child?i:t?a.next():i):(l.O5C(),a.previous())):null},t.Market.prototype.disableSession=function(e,t){var i;if(i=!1,void 0!==t&&t&&(i=!0),e){for(var a=0;a<this.normalHours.length;a++)this.normalHours[a].name===e&&(this.normalHours[a].enabled=i);for(a=0;a<this.extraHours.length;a++)this.extraHours[a].name===e&&(this.extraHours[a].enabled=i)}},t.Market.prototype.enableSession=function(e){this.disableSession(e,"enable_instead")},t.Market.prototype.enableAllAvailableSessions=function(){var e;e=this.getSessionNames();for(var t=0;t<e.length;t++)this.enableSession(e[t].name)},t.Market.prototype.getClose=function(e,t,i,a){var r,n;if(!this.market_def)return null;if(!this.rules)return null;if(r=e,e||(r=new Date,i=null),r=this._convertToMarketTZ(r,i),l.U5C(),void 0!==t){if(this._wasOpenIntraDay(r)&&this.zseg_match.name===t)return r.setHours(this.zseg_match.close_parts.hours,this.zseg_match.close_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}else if(this._wasOpenDaily(r)){for(n=this.zseg_match;n.child_;)n=n.child_;for(;!n.enabled;)n=n.parent_;return r.setHours(n.close_parts.hours,n.close_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}return null},t.Market.prototype.getNextClose=function(e,t,i){var a,r,n;if(!this.market_def)return null;if(!this.rules)return null;for(a=e,e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),this._wasOpenIntraDay(a)||(a=this.newIterator({begin:a,interval:1,inZone:this.market_tz,outZone:this.market_tz}).next()),r=a.getDate(),n=this.zseg_match;n.adjacent_child;)n=n.adjacent_child,r+=1;return l.O5C(),a.setDate(r),a.setHours(n.close_parts.hours,n.close_parts.minutes,0,0),a=this._convertFromMarketTZ(a,i)},t.Market.prototype.getNextOpen=function(e,t,i){var a;return this.market_def&&this.rules?(a=e,e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),a=this._find_next_segment(a),this.zseg_match.adjacent_parent?(a=this.getNextOpen(a,this.market_tz,this.market_tz),a=this._convertFromMarketTZ(a,i)):(a.setHours(this.zseg_match.open_parts.hours),a.setMinutes(this.zseg_match.open_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},t.Market.prototype.getOpen=function(e,t,i,a){var r,n;if(!this.market_def)return null;if(!this.rules)return null;if(r=e,e||(r=new Date,i=null),r=this._convertToMarketTZ(r,i),void 0!==t){if(this._wasOpenIntraDay(r)&&this.zseg_match.name==t)return r.setHours(this.zseg_match.open_parts.hours,this.zseg_match.open_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}else if(this._wasOpenDaily(r)){for(n=this.zseg_match;n.parent_;)n=n.parent_;for(;!n.enabled;)n=n.child_;return r.setHours(n.open_parts.hours,n.open_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}return null},t.Market.prototype.getNormalOpen=function(){l.U5C();var e=this.market_def,t=this.rules;return e&&t?e.normal_daily_open?e.normal_daily_open:"FOREX"===e.name?"17:00":t.find((function(e){var t=e.name;return l.O5C(),!t||""===t})).open:"00:00"},t.Market.prototype.getNormalClose=function(){var e=this.market_def,t=this.rules;return e&&t?e.normal_daily_close?e.normal_daily_close:"FOREX"===e.name?"17:00":t.filter((function(e){var t=e.dayofweek,i=e.name;return t&&(!i||""===i)})).pop().close:"24:00"},t.Market.prototype.getPreviousClose=function(e,t,i){var a;return this.market_def&&this.rules?(a=e,e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),a=this._find_prev_segment(a,!1),this.zseg_match.adjacent_child?this.getPreviousClose(a,this.market_tz,this.market_tz):(a.setHours(this.zseg_match.close_parts.hours),a.setMinutes(this.zseg_match.close_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},t.Market.prototype.getPreviousOpen=function(e,t,i){var a;return this.market_def&&this.rules?(a=e,l.O5C(),e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),a=this._find_prev_segment(a,!0),this.zseg_match.adjacent_parent?this.getPreviousOpen(a,this.market_tz,this.market_tz):(a.setHours(this.zseg_match.open_parts.hours),a.setMinutes(this.zseg_match.open_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},t.Market.prototype.getSession=function(e,t){return e=this._convertToMarketTZ(e,t),this._wasOpenIntraDay(e)&&this.zseg_match?this.zseg_match.name:null},t.Market.prototype.marketZoneNow=function(){return l.O5C(),this._convertToMarketTZ(new Date)},t.Market.prototype.isHourAligned=function(){return this.hour_aligned},t.Market.prototype.isOpen=function(){var e;return e=new Date,l.U5C(),this.market_tz&&(e=new this.tz_lib(e.getTime(),this.market_tz)),this._wasOpenIntraDay(e)},t.Market.prototype.isMarketDay=function(){var e,t;l.O5C(),e=2;for(var i=1;-434543734!==l.M86(i.toString(),i.toString().length,32632);i++)t=new Date,e+=2;return 217250092!==l.M86(e.toString(),e.toString().length,50568)&&(t=new Date),t=new Date,this.market_tz&&(t=new this.tz_lib(t.getTime(),this.market_tz)),this._wasOpenDaily(t)},t.Market.prototype.isMarketDate=function(e){return l.O5C(),this._wasOpenDaily(e)},t.Market.prototype.newIterator=function(e){var i,a,r;if("se","c","ond",i=!1,e.periodicity?i=e.periodicity:e.multiple&&(i=e.multiple),(a=e.interval)||(a="minute"),"hour"==a&&(a=60),i||(i=1),e.begin||(e.begin=new Date,e.inZone=null),a==parseInt(a,10)&&(a=parseInt(a,10),e.periodicity<1/60?(l.c3g(9),i=l.l3g(6e4,a,i),a="millisecond"):e.periodicity<1?(l.x3g(9),i=l.l3g(60,a,i),a="second"):("m","in","u","te",l.x3g(2),i=l.I3g(i,a),a="minute")),e.timeUnit)if("millisecond"===e.timeUnit)a=e.timeUnit;else if("second"===e.timeUnit)a=e.timeUnit;else if("tick"===e.timeUnit){-863025467,-334236926,r=2;for(var n=1;-863025467!==l.I86(n.toString(),n.toString().length,16005);n++)a="",r+=2;-334236926!==l.I86(r.toString(),r.toString().length,22957)&&(a=""),a="second"}return"tick"==a&&(a="second"),e.interval=a,e.multiple=i,e.market=this,new t.Market.Iterator(e)},t.Market.prototype._wasOpenDaily=function(e){return this._was_open(e,!1)},t.Market.prototype._wasOpenIntraDay=function(e){return l.O5C(),this._was_open(e,!0)},t.Market.prototype._was_open=function(e,t){var i,a,r,n,s,o,h,c,u,d,p,g,f;if(i=this.zseg_match,this.zopen_hour=0,l.c3g(26),this.zopen_minute=l.I3g(60000928,"0"),this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null,!this.market_def||!this.rules)return this.zclose_hour=24,!0;a=!1,r=!1,n=e.getFullYear(),l.c3g(37);var m=l.I3g(15,16,2);for(s=e.getMonth()+m,o=e.getDay(),h=e.getDate(),c=e.getHours(),u=e.getMinutes(),d=e.getSeconds(),l.c3g(98),g=l.l3g(u,60,c,d,0,"60",60),void 0===t&&(t=!0),f=0;f<this.normalHours.length;f++)if((p=this.normalHours[f]).enabled&&((a=p.dayofweek===o)&&t&&(a=g>=p.open&&g<p.close),a)){if(!t&&this.zseg_match&&(p.open_parts.hours>this.zopen_hour||p.open_parts.hours==this.zopen_hour&&p.open_parts.minutes>this.zopen_minute))continue;if(p===i||p.adjacent_parent||p.adjacent_child||(this.shouldResetToBeginningOfSegment=!0),this.zopen_hour=p.open_parts.hours,this.zopen_minute=p.open_parts.minutes,this.zclose_hour=p.close_parts.hours,this.zclose_minute=p.close_parts.minutes,this.zmatch_open=g===p.open,this.zseg_match=p,t)break}for(f=0;f<this.extraHours.length;f++)if((p=this.extraHours[f]).enabled&&("*"===p.year||n===p.year)&&s===p.month&&h===p.day&&(!(r=!t&&p.open||g>=p.open&&g<p.close)&&this.zseg_match&&(a=!1,this.zopen_hour=0,l.c3g(2),this.zopen_minute=l.I3g("0",1),this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null),r)){if(!t&&this.zseg_match&&(p.open_parts.hours>this.zopen_hour||p.open_parts.hours==this.zopen_hour&&p.open_parts.minutes>this.zopen_minute))continue;if(this.zopen_hour=p.open_parts.hours,this.zopen_minute=p.open_parts.minutes,this.zclose_hour=p.close_parts.hours,this.zclose_minute=p.close_parts.minutes,this.zmatch_open=g===p.open,this.zseg_match=p,t)break}return this.zseg_match},t.Market.prototype._wasClosed=function(e){return!this._was_open(e,!0)},t.Market.prototype._wasOpen=function(e){return this._was_open(e,!0)},t.Market.prototype._tzDifferenceMillis=function(e,t,i){var a,r;return 0,a=e,r=e.getTimezoneOffset()-a.getTimezoneOffset(),l.x3g(9),l.I3g(1e3,60,r)},t.Market._createTimeSegments=function(e){var t,i,a,r,n;t=function(e,t){if(l.U5C(),24===e.close_parts.hours&&0===t.open_parts.hours&&0===t.open_parts.minutes){if(i.dayofweek===r.dayofweek-1)return!0;if(6===i.dayofweek&&0===r.dayofweek)return!0}return!1};for(var o=0;o<e.rules.length;o++){"nam","e","u","nd","efined",void 0===(a=JSON.parse(JSON.stringify(e.rules[o]))).open&&"undefined"===R(a.close)&&(a.open="00:00",a.close="00:00"),a.hasOwnProperty("name")||(a.name="");try{if(void 0!==a.dayofweek?(a.year="*",r=s._createDayOfWeekSegment(e,a),i&&(i.dayofweek===r.dayofweek?(i.child_=r,r.parent_=i):t(i,r)&&(i.adjacent_child=r,r.adjacent_parent=i)),i=r):void 0!==a.date?(a.isDayOfWeek=!1,a.dayofweek=-1,r=s._createDateTimeSegment(e,a)):("Error, unknown rul","e ty","pe ",l.x3g(1),console.log(l.I3g("Error, unknown rule type ",a))),e.enabled_by_default)for(var h=0;h<e.enabled_by_default.length;h++)if(n=e.enabled_by_default[h],r.name===n){r.enabled=!0;break}}catch(e){l.c3g(1),console.log(l.l3g("Error, creating market rules ",e))}}},t.Market._timeSegment={},(s=t.Market._timeSegment).re_wild_card_iso=/^(\*)-(\d\d)-(\d\d)$/,s.re_regular_iso=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s.re_split_hours_minutes=/^(\d\d):(\d\d)$/,s.re_split_hour_minutes=/^(\d):(\d\d)$/,s._hashCode=function(e){var t,i,a,r;if(l.U5C(),l.c3g(35),t=l.I3g(868729696,"0"),0===e.length)return t;for(i=0,r=e.length;i<r;i++)a=e.charCodeAt(i),l.c3g(99),t=l.I3g(t,t,a,5),t|=0;return t},s._splitHoursMinutes=function(e){var t,i;return i={hours:NaN,minutes:NaN},null===(t=s.re_split_hour_minutes.exec(e))&&null===(t=s.re_split_hours_minutes.exec(e))||(i.hours=parseInt(t[1],10),i.minutes=parseInt(t[2],10)),i},s._createDayOfWeekSegment=function(e,t){var i;return""===(i={name:t.name,isDayOfWeek:!0,dayofweek:t.dayofweek,date_str:"*",open_parts:s._splitHoursMinutes(t.open),close_parts:s._splitHoursMinutes(t.close),open:s._secSinceMidnight(e,t.open,!0),close:s._secSinceMidnight(e,t.close,!1),child_:!1,parent_:!1,adjacent_child:!1,adjacent_parent:!1,enabled:!1}).name&&(i.enabled=!0),i.hash_code=this._hashCode((i.open+i.close).toString()),e.normalHours.push(i),i},s._createDateTimeSegment=function(e,t){var i,a,r;if(null===(i=this.re_regular_iso.exec(t.date))){if(null===(i=this.re_wild_card_iso.exec(t.date)))return void console.log("Warning: invalid date format on rule -> "+t.date);a="*"}else a=parseInt(i[1],10);return""===(r={name:t.name,isDayOfWeek:!1,dayofweek:-1,year:a,month:parseInt(i[2],10),day:parseInt(i[3],10),date_str:t.date,open_parts:s._splitHoursMinutes(t.open),close_parts:s._splitHoursMinutes(t.close),open:s._secSinceMidnight(e,t.open,!0),close:s._secSinceMidnight(e,t.close,!1),enabled:!1}).name&&(r.enabled=!0),r.hash_key=this._hashCode(r.date_str+r.open+r.close),e.extraHours.push(r),r},s._secSinceMidnight=function(e,t,i){var a,r,n,s;return a=t.split(":"),r=parseInt(a[0],10),n=parseInt(a[1],10),l.x3g(100),s=l.l3g("60",60,r,60,n),i||24===r&&(l.c3g(101),s=l.I3g(1,8,r,60,"60")),s},t.Market.prototype._convertToMarketTZ=function(e,t){var i;return(i=t?new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),t):new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())).setTimezone&&i.setTimezone(this.market_tz),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())},t.Market.prototype._convertFromMarketTZ=function(e,t){var i;return i=new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),this.market_tz),t?(i.setTimezone&&i.setTimezone(t),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())):new Date(i.getTime())},t.Market.Iterator=function(e){this.market=e.market,this.begin=e.begin,this.interval=e.interval,this.multiple=e.multiple,this.inZone=e.inZone,this.outZone=e.outZone,this.clock=new t.Market.Iterator._Clock(e.market,e.interval,e.multiple),this.intraDay=this.clock.intra_day,this.intraDay&&(this.begin=this.market._convertToMarketTZ(this.begin,e.inZone)),this.clock._setStart(this.begin),this.clock.minutes_aligned=!1},t.Market.Iterator.prototype.date=function(){return this.clock._date()},t.Market.Iterator.prototype.futureTick=function(e){var t,i,a,r,n,s,o;if(this.clock.skip=1,t=0,l.O5C(),(i=this.intraDay?this.market._convertToMarketTZ(e.end,this.inZone).getTime():e.end.getTime())===(a=this.clock.ctime))return t;if(r=2,1e3,n=0,e.sample_size&&(r=e.sample_size),s=(new Date).getTime(),i>a){for(this.clock.forward=!0;this.clock.ctime<i;)if(t+=1,n+=1,this.clock._findNext(),1e3===n&&(n=0,(new Date).getTime()-s>=r)){o=(this.clock.ctime-a)/t,l.x3g(93),t=Math.floor(l.I3g(o,a,i));break}this.clock.ctime>i&&t--}else for(this.clock.forward=!1;this.clock.ctime>i;)if(l.x3g(0),t+=l.I3g("1",0),n+=1,this.clock._findPrevious(),1e3===n&&(n=0,(new Date).getTime()-s>=r)){o=(a-this.clock.ctime)/t,l.c3g(93),t=Math.floor(l.l3g(o,i,a));break}return t},t.Market.Iterator.prototype.isHourAligned=function(){return!this.intraDay||this.market.isHourAligned()},t.Market.Iterator.prototype.isOpen=function(){return this.market.isOpen()},t.Market.Iterator.prototype.next=function(e){this.clock.skip=1,e&&(this.clock.skip=e),this.clock.forward=!0;for(var t=0;t<this.clock.skip;t++)this.begin=this.clock._findNext();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},t.Market.Iterator.prototype.peek=function(){return l.U5C(),this.clock._peek()},t.Market.Iterator.prototype.previous=function(e){l.U5C(),this.clock.skip=1,e&&(this.clock.skip=e),this.clock.forward=!1;for(var t=0;t<this.clock.skip;t++)this.begin=this.clock._findPrevious();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},t.Market.Iterator._Clock=function(e,t,i){var n,s,o;if("h","ou","r","s","eco","n","d",i%60==0&&"second"===t){-2107179875,-2076448211,n=2;for(var h=1;-2107179875!==l.I86(h.toString(),h.toString().length,33931);h++)t="",l.x3g(26),n+=l.l3g(1254728032,"2");-2076448211!==l.M86(n.toString(),n.toString().length,83758)&&(t="minute"),l.x3g(8),i=l.l3g(i,60)}this.market=e,this.interval=t,this.multiple=i,this.intra_day=!1,this.intervals=[],this.max_iters=10080,s=r,o=this._dayImpl,"millisecond"===t?(o=this._millisImpl,s=1):"second"===t?(o=this._secondImpl,s=1e3):"minute"===t?(o=this._minuteImpl,s=6e4):"hour"===t?(o=this._hourImpl,s=a):"day"===t?(o=this._dayImpl,s=r):"week"===t?(o=this._weekImpl,l.x3g(102),s=l.l3g(r,"7")):"month"===t?(o=this._monthImpl,l.c3g(2),s=l.l3g(r,30)):('" is not a valid interval. Please see setPeriodicity(',") for details.",l.c3g(36),console.log(l.l3g('Periodicity ERROR: "',t,'" is not a valid interval. Please see setPeriodicity() for details.'))),l.c3g(2),this.tick_time=l.l3g(s,i),this.intra_day=this.tick_time<r,this._findPrevious=this._findNext=o},(o=t.Market.Iterator._Clock.prototype)._total_minutes=function(e,t,i,a){return l.x3g(103),l.l3g(60,t,e,i,a)},o._alignMinutes=function(){var e,t,i,a,r;if(!this.market.market_def||void 0===this.market.zopen_minute)return[];if(e=this.market.zopen_minute,(t=this.market.zseg_match)&&t.adjacent_parent){l.x3g(12);var n=l.l3g(20,16,4,52);l.x3g(37);var s=l.I3g(1447,16,9);e=t.adjacent_parent.open/n-s}else this.market.isHourAligned()&&this.multiple%60==0&&(e=0);for(i=this._total_minutes(this.market.zopen_hour,e,this.market.zclose_hour,this.market.zclose_minute),a=[],r=0;r<i;)l.x3g(1),a.push(l.I3g(e,r)),r+=this.multiple;return a},o._alignBaseZero=function(e){var t,i;for(i=[t=0];!((t+=this.multiple)>=e);)i.push(t);return i},o._date=function(){var e,t;return e=Math.round(this.ctime),l.U5C(),t=new Date(e),this.intra_day?this.display_date=new Date(e+this.shift_millis):this.display_date=t,t},o._alignToBoundary=function(e,t){var i,a,r,n;i=0,a=0,r=t;for(var s=0;s<e.length-1&&(i=e[s],l.c3g(1),a=e[l.l3g(s,1)],t!==i&&t!==a);s++){if(t>i&&t<a){r=i;break}s+1===e.length-1&&(r=a)}l.x3g(2),l.I3g("1533496420",1),l.c3g(2),n=l.I3g("2",1);for(var o=1;1442151974!==l.I86(o.toString(),o.toString().length,21477);o++)return r;return l.I86(n.toString(),n.toString().length,99236),r},l.U5C(),o._peek=function(){return l.O5C(),this._date().toString()},o._seekHr=function(){this.forward?this.ctime-=a:this.ctime+=a},o._setStart=function(e){var t,i;t=this.market._tzDifferenceMillis(e),i=new Date(e.getTime()+t),this.shift_millis=t,this.ctime=i.getTime(),this.shift_millis=0,this.ctime=e.getTime()},o._tickTock=function(){l.U5C(),this.forward?this.ctime+=this.tick_time:this.ctime-=this.tick_time},o._tockTick=function(){var e;if(l.U5C(),this.forward)this.ctime-=this.tick_time;else{-621080169,1111574477,e=2;for(var t=1;-621080169!==l.I86(t.toString(),t.toString().length,42411);t++)this.ctime+=this.tick_time,e+=2;1111574477!==l.M86(e.toString(),e.toString().length,34561)&&(this.ctime%=this.tick_time)}},o._tickTock24=function(){this.ctime+=r},o._tockTick24=function(){this.ctime-=r},o._windMaybe=function(e,t){var i,a,r,n;for(i=0,a=new Date(this.ctime),r=!1;!e.call(this.market,a);)if(t.call(this),r=!0,a=new Date(this.ctime),(i+=1)>this.max_iters){"Warni","ng! max iterati","o","ns (",n="Warning! max iterations ("+this.max_iters,n+=") reached with no rule match.",console.log(n);break}return r},o._millisImpl=function(){var e,t,i,a,r,n,s,o,h,c;return e=!1,this.mperiods_aligned||(l.x3g(2),t=this._alignBaseZero(l.l3g("1000",1)),a=(i=new Date(this.ctime)).getMilliseconds(),a=this._alignToBoundary(t,a),i.setMilliseconds(0),this.ctime=i.getTime()+a,this.mperiods_aligned=!0,e=!0),r=this._date().getMinutes(),this._tickTock(),n=this._date().getMinutes(),l.O5C(),!e&&r==n||this.market._wasOpenIntraDay(this._date())||(s=this._date().getSeconds(),o=this._date().getMilliseconds(),h=this.tick_time,this.tick_time=6e4,c=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=h,this.multiple=c,l.x3g(104),this.ctime+=l.I3g(s,1e3,o)),this._date()},o._secondImpl=function(){var e,t,i,a,r,n,s,o,h,c,u;if(l.O5C(),e=!1,!this.speriod_aligned){t=this._alignBaseZero(60),l.c3g(53),i=-l.I3g("1972360217",2147483647),2066042925,a=2;for(var d=1;l.I86(d.toString(),d.toString().length,92998)!==i;d++)r=new Date(this.ctime),a+=2;2066042925!==l.I86(a.toString(),a.toString().length,68693)&&(r=new Date(this.ctime)),n=r.getSeconds(),n=this._alignToBoundary(t,n),r.setSeconds(n),r.setMilliseconds(0),this.ctime=r.getTime(),this.speriod_aligned=!0,e=!0}return s=this._date().getMinutes(),this._tickTock(),o=this._date().getMinutes(),!e&&s==o||this.market._wasOpenIntraDay(this._date())||(h=this._date().getSeconds(),c=this.tick_time,this.tick_time=6e4,u=this.multiple,l.x3g(2),this.multiple=l.l3g("1",1),this._minuteImpl(),this.tick_time=c,this.multiple=u,l.c3g(105),this.ctime+=l.l3g(872,"1000",h)),this._date()},o._minuteImpl=function(){var e,t,i,a,r,n,s,o,h,c;if(e=this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),i=(t=new Date(this.ctime)).getTimezoneOffset(),a=t.getMinutes(),r=t.getHours(),n=this._alignMinutes(),s=this._total_minutes(this.market.zopen_hour,this.market.zopen_minute,r,a)+this.market.zopen_minute,e)if(this.forward){l.x3g(15);var u=l.I3g(5,13,17);s=n[n.length-u]}else s=n[0];else s=this._alignToBoundary(n,s);l.x3g(94);var d=l.I3g(21,2,78);if(l.O5C(),r=Math.floor(s/d)+this.market.zopen_hour,l.c3g(81),t.setHours(r,l.I3g(s,60),0,0),o=t.getTimezoneOffset()-i,(this.forward&&o<0||!this.forward&&o>0)&&t.setTime(t.getTime()-6e4*o),this.ctime=t.getTime(),this._tickTock(),h=this.market.hour_aligned&&this.multiple%60==0,this._windMaybe(this.market._wasOpenIntraDay,this._tickTock)||!h&&this.shouldResetToBeginningOfSegment){if(t=new Date(this.ctime),this.forward)t.setMinutes(this.market.zopen_minute),t.setHours(this.market.zopen_hour);else{n=this._alignMinutes(),l.x3g(1);var p=l.l3g(0,1);c=n[n.length-p],l.c3g(81),t.setMinutes(l.l3g(c,60)),t.setHours(Math.floor(c/60)+this.market.zopen_hour)}this.ctime=t.getTime()}return this._date()},o._hourImpl=function(){var e,t,i,a,r;if(this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),e=new Date(this.ctime),this.market.isHourAligned()?e.setMinutes(0):e.setMinutes(this.market.zopen_minute),e.setSeconds(0),e.setMilliseconds(0),this.ctime=e.getTime(),this._tickTock(),t=this.market.zseg_match,this._windMaybe(this.market._wasOpenIntraDay,this._tickTock)||!this.market.hour_aligned&&t!=this.market.zseg_match){if(i=new Date(this.ctime),this.forward)i.setMinutes(this.market.zopen_minute),i.setHours(this.market.zopen_hour);else{a=this._alignMinutes(),l.x3g(11);var n=l.I3g(15,16);r=a[a.length-n],l.c3g(81),i.setMinutes(l.l3g(r,60)),i.setHours(Math.floor(r/60)+this.market.zopen_hour)}this.ctime=i.getTime()}return this._date()},o._dayImpl=function(){var e,t;for(this._windMaybe(this.market._wasOpenDaily,this._seekHr),(e=new Date(this.ctime)).setHours(12,0,0,0),this.ctime=e.getTime(),t=0;t<this.multiple;)this.forward?this._tickTock24():this._tockTick24(),this.market._wasOpenDaily(this._date())&&(t+=1);return(e=new Date(this.ctime)).setHours(0),this.ctime=e.getTime(),l.O5C(),this._date()},o._weekImpl=function(){var e,t;for(e=this.market,(t=new Date(this.ctime)).setHours(12),this.ctime=t.getTime(),this._tickTock(),t=new Date(this.ctime);t.getDay()!==e.beginningDayOfWeek;)this._tockTick24(),t=new Date(this.ctime);return l.U5C(),this._windMaybe(e._wasOpenDaily,this._tickTock24),t=new Date(this.ctime),l.x3g(27),t.setHours(0,0,l.l3g("0",0),0),this.ctime=t.getTime(),this._date()},o._monthImpl=function(){var e;return(e=new Date(this.ctime)).setDate(15),this.ctime=e.getTime(),l.U5C(),this._tickTock(),(e=new Date(this.ctime)).setDate(1),e.setHours(12),this.ctime=e.getTime(),this._windMaybe(this.market._wasOpenDaily,this._tickTock24),(e=new Date(this.ctime)).setHours(0,0,0,0),this.ctime=e.getTime(),this._date()},o._findNext=null,o._findPrevious=null},f=function(e){var t,i,a,r=Y;r.j7D=function(e){if(r.O5C(),r)return r.f4D(e)},r.T4D=function(e){if(r.U5C(),r&&e)return r.B4D(e)},t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="valid",t.valid=0,t[r.R4D("bb12")?"ChartEngine":""][r.l4D("a176")?"":"prototype"][r.T4D("e664")?"":"mousemoveinner"]=function(e,a){r.Q7D=function(e){if(r)return r.f4D(e)},r.J4D=function(e){if(r)return r.B4D(e)},r.O5C();var n=-(r.i4D("8c58")?191226794:510049682),s=-(r.I4D("1b21")?1580548130:3442996384),o=-(r.J4D("f126")?897200678:509087049),l=r.D4D("5428")?518891089:343314028,h=-(r.t4D("4349")?5479590845:1591504830),c=r.g4D("84a9")?103687526:484505961,u=-1718286114,d=r.m4D("9eaf")?705522981:514469749,p=221318517,g=1565309624,f=-(r.v4D("41cd")?932240898:383802015),m=1227525486,y=r.E4D("e851")?588719189:317113469,v=r.o7D("849c")?584459331:124214329;if(r.I2k(0,!1,r.j7D("b13e")?874145:300593)===n||r.c2k(0,!1,r.Q7D("8c7a")?400814:441207)===s||r.c2k(11,!1,141913)===o||r.I2k(0,!1,126445)===l||r.c2k(10,!1,965832)===h||r.I2k(0,!1,488673)===c||r.c2k(10,!1,323795)===u||r.c2k(0,!1,126657)===d||r.I2k(11,!1,249674)===p||r.c2k(0,!1,775158)===g||r.I2k(10,!1,983847)===f||r.c2k(0,!1,807873)===m||r.c2k(16,!1,540352)===y||r.c2k(0,!1,604505)===v){var x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,R,Y,z,B,U,j,W=function(e){(r.U5C(),1866867980===r.I2k(0,!1,359444)||1906615749===r.c2k(0,!1,935454)||988896983===r.c2k(11,!1,228673)||668801399===r.c2k(0,!1,238943)||-249929464===r.I2k(10,!1,774148)||-1243364606===r.I2k(0,!1,705257)||-751595978===r.I2k(10,!1,605248)||-1963041184===r.c2k(0,!1,283196)||-154806887===r.c2k(11,!1,960558)||359376578===r.c2k(0,!1,728428)||124675096===r.c2k(10,!1,437534)||201611217===r.c2k(0,!1,680211)||-287512301===r.I2k(16,!1,926824)||-1929248716===r.I2k(0,!1,231259))&&(e.currentBaseline=null,e.runAppend("mousemoveinner",b))};if(!this.chart.canvas)return;if(!(t.isAndroid||t.isIOS7or8||this.chart.canvas.height==Math.floor(this.devicePixelRatio*this.chart.container.clientHeight)&&this.chart.canvas.width==Math.floor(this.devicePixelRatio*this.chart.container.clientWidth)))return void this.resizeChart();if(this.runPrepend("mousemoveinner",arguments))return;if(b=arguments,C=this.container.getBoundingClientRect(),this.top=C.top,this.left=C.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.hasDragged=!0,t.ChartEngine.crosshairX=e,t.ChartEngine.crosshairY=a,S=this.cy=this.crossYActualPos=this.backOutY(t.ChartEngine.crosshairY),w=this.cx=this.crossXActualPos=this.backOutX(t.ChartEngine.crosshairX),this.grabbingScreen&&this.anyHighlighted){r.x3g(19);var Q=r.I3g(10,5,48);r.c3g(67);var q=r.I3g(6,13,5,37);if(Math.pow(this.grabStartX-e,Q)+Math.pow(this.grabStartY-a,q)<36)return}if(this.cancelLongHold=!0,k=function(e,a){if(-983338096===r.I2k(0,!1,145852)||1717084076===r.c2k(0,!1,195363)||411939572===r.I2k(11,!1,936402)||929481847===r.c2k(0,!1,559376)||-2026728611===r.c2k(10,!1,369350)||170327463===r.c2k(0,!1,673496)||-646693892===r.c2k(10,!1,917645)||1807178306===r.c2k(0,!1,711603)||-562052766===r.c2k(11,!1,208967)||818821607===r.I2k(0,!1,148032)||-1615827926===r.I2k(10,!1,176543)||-1364461405===r.I2k(0,!1,993022)||-802498216===r.c2k(16,!1,981317)||1267382222===r.c2k(0,!1,883562)){if(0===t[i])return e.whichPanel(a)||e.chart.panel;e.draw[i]||(e.draw=function(){1476482767!==r.I2k(0,!1,371350)&&315140856!==r.I2k(0,!1,311226)&&1061752651!==r.I2k(11,!1,570750)&&1408960696!==r.c2k(0,!1,997590)&&-1332832325!==r.I2k(10,!1,712040)&&-1248232212!==r.I2k(0,!1,847653)&&-288994897!==r.c2k(10,!1,889427)&&-1407196402!==r.c2k(0,!1,212364)&&1875219193!==r.I2k(11,!1,819629)&&-144682236!==r.c2k(0,!1,246451)&&-1196562958!==r.I2k(10,!1,303443)&&580364507!==r.I2k(0,!1,890457)&&1653404956!==r.c2k(16,!1,883588)&&1674013598!==r.c2k(0,!1,918407)||t.clearCanvas(this.chart.canvas,this)},e.draw[i]=!0)}},this.currentPanel=k(this,S),!this.currentPanel)return;if((A=this.currentPanel.chart).dataSet&&(D="c",D+="ha",D+="rt",this.crosshairTick=this.tickFromPixel(w,A),x=this.valueFromPixel(S,this.currentPanel),this.crosshairValue=this.adjustIfNecessary(this.currentPanel,this.crosshairTick,x),(M=this.currentPanel.name==D?this.preferences.horizontalCrosshairField:this.currentPanel.horizontalCrosshairField)&&this.crosshairTick<A.dataSet.length&&this.crosshairTick>-1&&(x=A.dataSet[this.crosshairTick][M],this.crossYActualPos=this.pixelFromPrice(x,this.currentPanel))),t.ChartEngine.crosshairX>=this.left&&t.ChartEngine.crosshairX<=this.right&&t.ChartEngine.crosshairY>=this.top&&t.ChartEngine.crosshairY<=this.bottom?this.insideChart=!0:this.insideChart=!1,T=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=this.insideChart&&t.ChartEngine.crosshairY<=T+this.top&&t.ChartEngine.crosshairY>T-this.xaxisHeight+this.top,this.overYAxis=(this.cx>=this.currentPanel.right||this.cx<=this.currentPanel.left)&&this.insideChart,(this.overXAxis||this.overYAxis||!this.insideChart&&!this.grabbingScreen)&&(this.undisplayCrosshairs(),!this.overXAxis&&!this.overYAxis))return;if(!this.displayCrosshairs&&!t.ChartEngine.resizingPanel)return void this.undisplayCrosshairs();if(this.repositioningBaseline)return this.setBaselineUserLevel(),W(this);if(this.repositioningAnchorSelector){F=this.repositioningAnchorSelector.hoverTick,(_=this.tickFromPixel(this.cx,this.chart))>=0&&_<this.chart.dataSet.length&&(!F||0===F||_!==F)&&(this.repositioningAnchorSelector.hoverTick=_,this.draw()),P=-420231550,V=-1850919515,O=2;for(var G=1;r.I86(G.toString(),G.toString().length,34626)!==P;G++)return W(this);if(r.M86(O.toString(),O.toString().length,14996)!==V)return W(this)}if(this.grabbingScreen&&!t.ChartEngine.resizingPanel){if(this.highlightedDraggable)return this.displayDragOK(!0),this.dragPlotOrAxis(w,S),W(this);if(this.anyHighlighted){for(I in t.clearCanvas(this.chart.tempCanvas,this),this.anyHighlighted=!1,this.overlays)this.overlays[I].highlight=!1;for(I in A.series)A.series[I].highlight=!1;this.displaySticky()}if(-1==this.grabStartX&&(this.grabStartX=t.ChartEngine.crosshairX,this.grabStartScrollX=A.scroll),-1==this.grabStartY&&(this.grabStartY=t.ChartEngine.crosshairY,this.grabStartScrollY=this.currentPanel.yAxis.scroll),L=t.ChartEngine.crosshairX-this.grabStartX,H=t.ChartEngine.crosshairY-this.grabStartY,0===L&&0===H)return;if(Math.abs(L)+Math.abs(H)>5&&(this.grabOverrideClick=!0),N=this.layout.candleWidth,this.allowZoom&&"pan"!=this.grabMode&&(0===this.grabMode.indexOf("zoom")||this.overXAxis||this.grabStartYAxis)){if(""===this.grabMode&&(R="z",R+="oo",R+="m",R+="-x",this.overXAxis?this.grabMode=R:this.grabStartYAxis&&(this.grabMode="zoom-y")),"zoom-x"==this.grabMode?H=0:"zoom-y"==this.grabMode&&(L=0),L&&(this.grabStartX=t.ChartEngine.crosshairX,Y=N-L/this.chart.maxTicks,this.zoomSet(Y,this.chart)),this.layout.setSpan&&(this.layout.setSpan=null,this.changeOccurred("layout")),E=this.grabStartYAxis)if(E.flipped&&(H*=-1),E.zoom=Math.round(this.grabStartZoom+H),this.grabStartZoom<E.height){if(E.zoom>=E.height){r.c3g(106);var X=r.I3g(19,316,16,13);E.zoom=E.height-X}}else if(E.zoom<=E.height){r.c3g(7);var Z=r.l3g(18,19);E.zoom=E.height+Z}}else if(!this.overYAxis&&(this.dispatch("move",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!0}),this.allowScroll)){if(Math.abs(H)<this.yTolerance){if(!this.yToleranceBroken&&(H=0,0===L))return}else this.yToleranceBroken=!0;this.grabStartMicropixels||(this.grabStartMicropixels=0),this.grabMode="pan",A.scroll=this.grabStartScrollX,r.c3g(107);var K=r.I3g(13,18,1,242);if(this.micropixels=this.grabStartMicropixels+L*(this.shift?K:1),!this.lineTravelSpacing){for(;this.micropixels>0;)this.micropixels-=N,A.scroll++;for(;this.micropixels<-N;)this.micropixels+=N,A.scroll--}A.scroll>=A.maxTicks?this.preferences.whitespace=this.initialWhitespace:this.preferences.whitespace=(A.maxTicks-A.scroll)*N,this.currentPanel==this.grabStartPanel&&((E=this.currentPanel.yAxis).flipped&&(H*=-1),E.scroll=this.grabStartScrollY+H),this.dispatch("scroll",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy})}return z=function(e){if(1078079017===r.I2k(0,!1,360190)||-1760943939===r.I2k(0,!1,163101)||1762880601===r.I2k(11,!1,634739)||-63589790===r.I2k(0,!1,839907)||-1658230248===r.c2k(10,!1,105250)||1978500718===r.c2k(0,!1,271567)||-1048106662===r.I2k(10,!1,207058)||2130780046===r.c2k(0,!1,278115)||536384211===r.I2k(11,!1,123534)||765992878===r.c2k(0,!1,115450)||-1724137628===r.I2k(10,!1,341966)||-1507104480===r.I2k(0,!1,916198)||139745511===r.I2k(16,!1,758544)||-1858693398===r.I2k(0,!1,484796))return function(){682218795!==r.I2k(0,!1,219319)&&179766056!==r.I2k(0,!1,746492)&&-2107264099!==r.I2k(11,!1,305154)&&-1236131393!==r.I2k(0,!1,466269)&&1463558750!==r.I2k(10,!1,165350)&&-1491947889!==r.c2k(0,!1,756156)&&-1948779621!==r.c2k(10,!1,251098)&&949361656!==r.I2k(0,!1,617915)&&-1521745955!==r.c2k(11,!1,168276)&&-1042699167!==r.c2k(0,!1,987144)&&940251430!==r.c2k(10,!1,740757)&&-255519777!==r.I2k(0,!1,152115)&&-1378658613!==r.c2k(16,!1,303809)&&999528987!==r.c2k(0,!1,162116)||(e.draw(),e.updateChartAccessories())}},t.ChartEngine.useAnimation?window.requestAnimationFrame(z(this)):(this.draw(),this.updateChartAccessories()),this.activeDrawing&&(t.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.render(this.chart.tempCanvas.context),this.activeDrawing.measure()),void this.undisplayCrosshairs()}return this.grabMode="",this.overXAxis||this.overYAxis?(this.updateChartAccessories(),this.tapForHighlighting&&this.touchingEvent&&!this.anyHighlighted||this.findHighlights(),W(this)):(this.controls.crossX&&(this.controls.crossX.style.left=this.pixelFromTick(this.crosshairTick,A)-.5+"px"),this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.insideChart&&!t.ChartEngine.resizingPanel?(B=this.currentVectorParameters.vectorType,this.layout.studies&&(U=this.layout.studies[this.currentPanel.name])&&(this.preferences.dragging&&this.preferences.dragging.study||delete this.overlays[U.name],B&&(this.overlays[U.name]=U)),t.Drawing&&B&&t.Drawing[B]&&(new t.Drawing[B]).dragToDraw||this.doDisplayCrosshairs(),this.updateChartAccessories()):this.undisplayCrosshairs(),this.magnetize&&this.magnetize(),this.repositioningDrawing?this.repositionDrawing(this.repositioningDrawing):t.ChartEngine.drawingLine?this.activeDrawing&&(j=this.panels[this.activeDrawing.panelName],x=this.adjustIfNecessary(j,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),j)),this.magnetizedPrice&&j.name==this.currentPanel.name&&(x=this.adjustIfNecessary(j,this.crosshairTick,this.magnetizedPrice)),null===this.magnetizedPrice&&t.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.move(this.chart.tempCanvas.context,this.crosshairTick,x),this.activeDrawing.measure&&this.activeDrawing.measure()):t.ChartEngine.resizingPanel&&this.resizePanels(),this.insideChart&&(this.dispatch("move",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!1}),this.tapForHighlighting&&this.touchingEvent&&!this.anyHighlighted||this.findHighlights()),W(this))}},t.ChartEngine.prototype.swipeStart=function(e){var t;this.swipe&&this.swipe.interval&&clearInterval(this.swipe.interval),this.swipe.velocity=0,this.swipe.amplitude=0,this.swipe.frame=e.scroll,this.swipe.micropixels=this.micropixels,this.swipe.timestamp=Date.now(),r.O5C(),this.swipe.chart=e,this.swipe.end=!1,r.x3g(7),this.swipe.timeConstant=r.l3g(0,"325"),this.swipe.cb=null,t=this,requestAnimationFrame((function(){r.O5C(),t.swipeSample()}))},t.ChartEngine.prototype.swipeSample=function(){var e,i,a,n,s,o,l;(e=this.swipe).end||(i=this,20,(n=(a=Date.now())-e.timestamp)<20?requestAnimationFrame((function(){r.O5C(),i.swipeSample()})):(o=t.touchDevice?.4:.8,e.timestamp=a,s=(e.chart.scroll-e.frame)*this.layout.candleWidth+this.micropixels-e.micropixels,e.frame=e.chart.scroll,e.micropixels=this.micropixels,r.x3g(108),l=o*r.I3g(1,s,1e3,n)+.2*e.velocity,Math.abs(l)>Math.abs(e.velocity)&&(e.velocity=l),Math.abs(s)<6&&(e.velocity=0),requestAnimationFrame((function(){i.swipeSample()}))))},t.ChartEngine.prototype.swipeRelease=function(){var e,t;r.O5C(),(e=this.swipe).velocity>3e3&&(e.velocity=3e3),e.velocity<-3e3&&(e.velocity=-3e3),(e.velocity>10||e.velocity<-10)&&(e.amplitude=.8*e.velocity,e.scroll=e.chart.scroll,e.target=e.amplitude,e.timestamp=Date.now(),t=this,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),requestAnimationFrame((function(){t.autoscroll()})))},t.ChartEngine.prototype.dragPlotOrAxis=function(e,i){var a,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,R,Y,z,B,U,j,W,Q,q;if("dr","o","pzon","e","n","on","e",(function(){var e,t,i,a,n;function s(t){return r.O5C(),function(i){r.U5C(),t.subholder.classList.contains(i)&&(t.subholder.classList.remove(i),e=!0)}}for(var o in e=!1,this.panels){for(t="rig",i="a",a="d",a+="ropz",a+="on",[a+="e",i+="ll","left",t+="ht","top","bottom"].forEach(s(this.panels[o])),n=0;n<this.panels[o].yaxisLHS.length;n++)this.panels[o].yaxisLHS[n].dropzone&&(e=!0),this.panels[o].yaxisLHS[n].dropzone=null;for(n=0;n<this.panels[o].yaxisRHS.length;n++)this.panels[o].yaxisRHS[n].dropzone&&(e=!0),this.panels[o].yaxisRHS[n].dropzone=null}return e}.call(this)||this.grabbingScreen)&&(a=null,20,10,r.c3g(7),n=this.whichPanel(r.l3g(20,i)),r.x3g(1),s=this.whichPanel(r.l3g(i,20)),o=this.whichPanel(i),l=this.highlightedDraggable,o&&(!l.undraggable||!l.undraggable(this)))){for(b in h=this.whichYAxis(o,e,i),r.x3g(7),c=this.whichYAxis(o,r.I3g(10,e),i),r.x3g(1),u=this.whichYAxis(o,r.I3g(e,10),i),this.xAxisAsFooter&&o.name==Object.keys(this.panels).pop()&&(s=this.whichPanel(i+20+this.xaxisHeight),a&&(a+=this.xaxisHeight)),d=!1,p=!1,!1,t.Renderer&&(d=l instanceof t.Renderer),t.Studies&&(p=l instanceof t.Studies.StudyDescriptor),f=function(e){if(!g){if("r","i","ght","right"==e){r.x3g(109);var t=r.l3g(72,4,2,60);return o.right-o.width/t}if("left"==e)return o.left+o.width/6}r.x3g(55);var i=r.I3g(0,3,24,36);return(o.left+o.right)/i},(g=l instanceof t.ChartEngine.YAxis)||h||("le","ft",e<f("left")?c=this.whichYAxis(o,o.left-1,i):e>f("right")&&(u=this.whichYAxis(o,o.right+1,i))),m=[],l.getDependents&&(m=l.getDependents(this,!0)),y=l.panel,v=l.getYAxis(this),d?y=l.params.panel:g&&(y=this.grabStartPanel.name),r.U5C(),x=this.panels[y],this.panels)this.panels[b].soloing&&(C=!0);if(S=v.isShared(this),w=!g&&!C&&(x!==o&&x!=n&&x!=s||!this.checkForEmptyPanel(x,!0,[l].concat(m))),k=y==o.name&&v!==h&&v!==u&&v!==c||S,!w||n&&o===n)if(!w||s&&o===s){if(o!==x)g||o.noDrag||("a","ll","dropzon","e",o.subholder.classList.add("dropzone"),o.subholder.classList.add("all"),A=o.name);else if((!o.yaxisRHS.length||1==o.yaxisRHS.length&&o.yaxisRHS[0]==v&&"none"==v.position)&&!h&&!u&&e>f("right"))"r","igh","t",o.subholder.classList.add("dropzone"),o.subholder.classList.add("right"),D="right";else if((!o.yaxisLHS.length||1==o.yaxisLHS.length&&o.yaxisLHS[0]==v&&"none"==v.position)&&!h&&!c&&e<f("left"))"l","e","f","t","lef","t",o.subholder.classList.add("dropzone"),o.subholder.classList.add("left"),D="left";else if(k){if(g&&e>o.left&&e<o.right){r.c3g(110);var G=r.I3g(1,22,17,2,4);M=o.yaxisLHS[o.yaxisLHS.length-"1"*G],T=o.yaxisRHS[0],e<(F=f())&&M!=v?c=M:e>F&&T!=v&&(u=T)}g&&h===v||(_=!g&&S,!u||u===v&&!_||h&&h===u?!c||c===v&&!_||h&&h===c?h&&("ri","g","ht",u||h===v&&!_?c||h===v&&!_?h!==v&&("al","l",h.dropzone="all"):h.dropzone="left":h.dropzone="right",h.dropzone&&(D=h.position||this.chart.panel.yAxis.position||"right")):("r","i","ght","r","ig","h","t",c.dropzone="right",D=c.position||this.chart.panel.yAxis.position||"right"):(u.dropzone="left",D=u.position||this.chart.panel.yAxis.position||"right"))}}else o.subholder.classList.add("dropzone"),o.subholder.classList.add("bottom");else"t","o","p","dropzo","n","e",o.subholder.classList.add("dropzone"),o.subholder.classList.add("top"),s=o;if(this.grabbingScreen||!o.subholder.classList.contains("dropzone")&&!D)this.draw();else{if(V=-1,!A&&!D&&w){for(var X in A=p?l.inputs.id:l.params.name||t.uniqueID(),this.panels)if(V++,this.panels[X]==s)break;s||V++,this.panels[y].yAxis.name==A&&(y=this.electNewPanelOwner(y)),O=p?l.inputs.display:null,y?this.createPanel(O||A,A,a,this.chart.name,new t.ChartEngine.YAxis({name:A})):y=A,p?l.panel=y:l.params.panel=y}if(A){if(p)l.parameters||(l.parameters={}),l.parameters.panelName=A,this.highlightedDraggable=t.getFn("Studies.replaceStudy")(this,l.inputs.id,l.type,l.inputs,l.outputs,l.parameters,null,l.study);else if(d)for(var Z in l.seriesParams)I=l.seriesParams[Z],L=null,l.params.yAxis&&l.params.yAxis!==this.chart.panel.yAxis&&((L=l.params.yAxis).name=l.params.name),this.modifySeries(I.id,{panel:A,yAxis:L});if(V>-1){for(b in H={},r.x3g(35),E=r.I3g(1847300800,"0"),this.panels)V==E++&&(H[A]=this.panels[A]),b!=A&&(H[b]=this.panels[b]);H[A]||(H[A]=this.panels[A]),this.panels=H}this.checkForEmptyPanel(y);for(var K=0;K<m.length;K++)m[K].params?this.checkForEmptyPanel(m[K].params.name):this.checkForEmptyPanel(m[K].name);this.adjustPanelPositions()}else if(D){if(N=function(e,i,a,r){var n,s;if("study"==a&&(i.parameters||(i.parameters={}),r?i.parameters.yaxisDisplayValue=r.position:delete i.parameters.yaxisDisplayValue,n=t.getFn("Studies.replaceStudy")(e,i.inputs.id,i.type,i.inputs,i.outputs,i.parameters,i.panel,i.study)),"renderer"==a)for(var o in i.seriesParams)s=i.seriesParams[o],n=e.modifySeries(s.id,{panel:A,yAxis:r});return n},(R=h&&"all"==h.dropzone)||(g?(l.position=D,this.layout.studies&&(Y=this.layout.studies[l.name])&&(Y.parameters||(Y.parameters={}),Y.parameters.yaxisDisplayValue=D)):p?this.highlightedDraggable=N(this,l,"study",{position:D}):d&&N(this,l,"renderer",new t.ChartEngine.YAxis({name:l.params.name||t.uniqueID(),position:D})),v=this.highlightedDraggable.getYAxis(this)),!S||!R||g){for(z=v,R&&v==this.chart.panel.yAxis&&(z=h),P=0;P<o.yaxisLHS.length;P++)if(o.yaxisLHS[P]==z){o.yaxisLHS.splice(P,1);break}for(P=0;P<o.yaxisRHS.length;P++)if(o.yaxisRHS[P]==z){o.yaxisRHS.splice(P,1);break}}if(R)if(this.getYAxisByName(o,v.name)==o.yAxis&&this.electNewPanelOwner(o,h),g){for(U in j=v,W=h,v==this.chart.panel.yAxis&&(j=h,W=v),j.studies)N(this,this.layout.studies[j.studies[U]],"study",W===this.chart.panel.yAxis?null:{position:W.name});for(U in j.renderers)N(this,this.chart.seriesRenderers[j.renderers[U]],"renderer",W);this.highlightedDraggable=W}else p?this.highlightedDraggable=N(this,l,"study",{position:h.name}):d&&N(this,l,"renderer",h);else{for("none"==v.position&&(v.width=t.ChartEngine.YAxis.prototype.width),v.position=D,B="left"==D?o.yaxisLHS:o.yaxisRHS,P=0;P<B.length;P++){if(B[P]!==v)if("left"==B[P].dropzone)B.splice(P,0,v);else{if("right"!=B[P].dropzone)continue;r.c3g(1),B.splice(r.l3g(P,1),0,v)}break}P==B.length&&B.push(v)}}for(var J in this.panels)for(q=(Q=this.panels[J]).yaxisLHS.concat(Q.yaxisRHS),P=0;P<q.length;P++)q[P].height=Q.yAxis.height,this.calculateYAxisMargins(q[P]);this.displayDragOK(),this.draw(),this.calculateYAxisPositions(),this.draw(),this.findHighlights(null,!0),this.savePanels()}}},a=!1,t.ChartEngine.prototype.findHighlights=t.ChartEngine.prototype.findHighlights||function(e,t){a||console.error("movement feature requires activating interaction feature."),r.O5C(),a=!0}},m=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:e.CIQ).NameValueStore=t.NameValueStore||function(){},t.NameValueStore.prototype.toJSONIfNecessary=function(e){if(e.constructor==String)return e;Y.O5C();try{return JSON.stringify(e)}catch(t){return Y.c3g(1),console.log(Y.I3g("Cannot convert to JSON: ",e)),null}},Y.O5C(),t.NameValueStore.prototype.fromJSONIfNecessary=function(e){try{return JSON.parse(e)}catch(t){return e}},t.NameValueStore.prototype.get=function(e,i){var a;a=t.localStorage.getItem(e),i(null,this.fromJSONIfNecessary(a))},t.NameValueStore.prototype.set=function(e,i,a){t.localStorageSetItem(e,this.toJSONIfNecessary(i)),a&&a(null)},t.NameValueStore.prototype.remove=function(e,i){Y.O5C(),t.localStorage.removeItem(e),i&&i(null)}},y=function(e){var t;function i(){}(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine||(t.ChartEngine=function(){}),i.fetchInitialData=function(e,t,i,a,r){},i.fetchUpdateData=function(e,t,i,a){},i.fetchPaginationData=function(e,t,i,a,r){},i.subscribe=function(e){},i.unsubscribe=function(e){},t.QuoteFeed=t.QuoteFeed||function(){},t.QuoteFeed.prototype.fetch=function(e,t){this.v2QuoteFeed||console.log("You must implement CIQ.QuoteFeed.[yourfeedname].prototype.fetch()")},t.QuoteFeed.prototype.announceError=function(e,i){e.suppressErrors||i.suppressAlert||(Y.O5C(),e.startDate||e.endDate||i.error&&t.alert("Error fetching quote:"+i.error))},t.QuoteFeed.prototype.multiFetch=function(e,t){return 0===e.length&&t([]),e[0].stx.driver.multiFetch(e,t)},t.QuoteFeed.Subscriptions=function(){this.subscriptions=[]},t.inheritsFrom(t.QuoteFeed.Subscriptions,t.QuoteFeed),t.QuoteFeed.Subscriptions.prototype.checkSubscriptions=function(e){var t,i,a,r,n;a=e.getSymbols({"breakout-equations":!0}),r=this,a=a.filter((function(t){var i;return i=e.quoteDriver.getQuoteFeed(t),Y.U5C(),i&&i.engine==r}));for(var s=0;s<this.subscriptions.length;s++)this.subscriptions[s].match=!1;for(var o=0;o<a.length;o++)for("mo","n","t","h","month"!=(n=(i=a[o]).interval)&&"week"!=n||e.dontRoll||(n="day"),i.interval=n,i.period=1,i.match=!1,isNaN(i.interval)||(i.period=i.interval,i.interval=i.timeUnit,i.interval||(i.interval="minute")),delete i.periodicity,delete i.timeUnit,delete i.setSpan,s=0;s<this.subscriptions.length;s++){if((t=this.subscriptions[s]).symbol==i.symbol&&t.period==i.period&&t.interval==i.interval){i.match=!0,t.match=!0;break}t.symbol!=i.symbol?("period"!=i.reason&&(i.reason="symbol"),t.reason="symbol"):("p","erio","d",i.reason="period",t.reason="period")}this.subscriptions=this.subscriptions.filter((function(t){return t.match||(t.stx||(t.stx=e),r.unsubscribe(t)),t.match})),a.forEach((function(t){Y.O5C(),t.match||(t.stx||(t.stx=e),t.reason||(t.reason="initialize"),t.symbol!==e.chart.symbol&&(t.series=!0),r.subscribe(t),r.subscriptions.push(t))}))},t.QuoteFeed.Subscriptions.prototype.fetch=function(e,t){var i;i=this,Y.U5C(),this.fetchFromSource(e,(function(a){Y.U5C(),a.error||i.checkSubscriptions(e.stx),t(a)}))},t.QuoteFeed.Subscriptions.prototype.subscribe=function(e){console.log("subscribe",e)},t.QuoteFeed.Subscriptions.prototype.unsubscribe=function(e){Y.U5C(),console.log("unsubscribe",e)},t.QuoteFeed.Subscriptions.prototype.fetchFromSource=function(e,t){Y.O5C(),console.log("Please provide implementation of fetchFromSource")},t.QuoteFeed.prototype.requiresImmediateRefresh=function(e){for(var t=1;-87505061!==Y.I86(t.toString(),t.toString().length,91235);t++)return!1;if(-588757898!==Y.I86(2..toString(),2..toString().length,55209))return!0},t.ChartEngine.prototype.attachQuoteFeed=function(e,i,a){var r,n,s;i||(i={}),"function"!==R(e.fetchInitialData)&&"function"!==R(e.fetchUpdateData)&&"function"!=typeof e.fetchPaginationData||("f","unction",r="requir",r+="esIm",r+="medi",r+="ateRefresh",n="m",n+="ul",n+="tiFetch","func","tion","function"!==R(e.fetchPaginationData)&&"function"!=typeof e.fetchUpdateData&&(i.noLoadMore=!0),e.v2QuoteFeed=!0,[n,"announceError",r].forEach((function(i){e[i]||!1===e[i]||(e[i]=t.QuoteFeed.prototype[i])})),"function"===R(e.subscribe)&&(e.checkSubscriptions=t.QuoteFeed.Subscriptions.prototype.checkSubscriptions,e.subscriptions=[])),i.maximumTicks||(i.maximumTicks=e.maxTicks?e.maxTicks:2e4),(!i.bufferSize||i.bufferSize<0)&&(i.bufferSize=0),i.bufferSize=Math.round(i.bufferSize),i.intervalTimer=null,this.quoteDriver&&(!a&&this.quoteDriver.hasUnfilteredQuoteFeed?this.detachQuoteFeed():(s=this.quoteDriver.hasUnfilteredQuoteFeed&&this.quoteDriver.quoteFeeds.pop(),this.quoteDriver.quoteFeeds.push({engine:e,behavior:i,filter:a}),s&&this.quoteDriver.quoteFeeds.push(s),this.quoteDriver.updateChartLoop(null,i))),this.quoteDriver||(this.quoteDriver=new t.ChartEngine.Driver(this,e,i,a)),a||(this.quoteDriver.hasUnfilteredQuoteFeed=!0)},t.ChartEngine.prototype.detachQuoteFeed=function(e){var t;if(Y.O5C(),t=this.quoteDriver){for(var i=t.quoteFeeds.length-1;i>=0;i--)e&&t.quoteFeeds[i].quoteFeed!=e||(t.die(t.quoteFeeds[i]),t.quoteFeeds.splice(i,1));t.quoteFeeds.length?e==t.quoteFeed&&(t.quoteFeed=t.quoteFeeds[0].quoteFeed,t.behavior=t.quoteFeeds[0].behavior):t=this.quoteDriver=null}},t.ChartEngine.Driver=function(e,i,a,r){this.stx=e,a||(a={}),this.quoteFeeds=[{engine:i,behavior:a,filter:r}],this.id=t.uniqueID(!0),this.behavior=a,this.quoteFeed=i,this.loadingNewChart=!1,this.updatingChart=!1,r||(this.hasUnfilteredQuoteFeed=!0),this.updateChartLoop()},t.ChartEngine.Driver.prototype.die=function(e){var t;Y.U5C();for(var i=0;i<this.quoteFeeds.length;i++)e&&this.quoteFeeds[i]!=e||(t=this.quoteFeeds[i].behavior).intervalTimer&&(clearInterval(t.intervalTimer),t.intervalTimer=-1)},t.ChartEngine.Driver.prototype.getQuoteFeed=function(e){var t;e.symbolObject||(e.symbolObject={symbol:e.symbol});for(var i=0;i<this.quoteFeeds.length;i++)if((t=this.quoteFeeds[i]).behavior.generator==e.symbolObject.generator&&(!t.filter||t.filter(e)))return t;return null},t.ChartEngine.Driver.prototype.multiFetch=function(e,i){var a,r,n;function s(e,t,i){return function(a){var r;Y.O5C(),t.results.push({dataCallback:a,params:e}),t.counter++,t.counter>=t.finished&&(r=t.results,t.results=[],i(r))}}0===e.length&&i([]),a={counter:0,finished:e.length,results:[]};for(var o=0;o<e.length;o++)(r=e[o]).stx.isEquationChart(r.symbol)?t.fetchEquationChart(r,s(r,a,i)):(n=this.getQuoteFeed(r))&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.SERIES,n.engine,r,s(r,a,i))},t.ChartEngine.Driver.prototype.updateSubscriptions=function(){for(var e=0;e<this.quoteFeeds.length;e++)this.quoteFeeds[e].checkSubscriptions&&this.quoteFeeds[e].checkSubscriptions(this.stx)},t.ChartEngine.Driver.prototype.loadDependents=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T;if(n=this,!r)return s=0,o=[],l=[],h=function(e){Y.U5C(),i&&++s>=n.quoteFeeds.length&&i(null)},c=function(t){++s<o.length||(l.length||h(),l.forEach((function(t){n.loadDependents(e,h,a,t.behavior)})))},n.quoteFeeds.forEach((function(e){e.behavior.generator?l.push(e):o.push(e)})),void o.forEach((function(t){n.loadDependents(e,c,a,t.behavior)}));for(u in{},d=e.stx,g=(p=e.chart).series,d.masterData,y=[],v={},x=a==t.QuoteFeed.UPDATE,b=a==t.QuoteFeed.PAGINATION,C=t.shallowClone(e),g){if(S=(f=g[u]).parameters,!x){if(!e.future&&!1===f.moreAvailable)continue;if(e.future&&!0===f.upToDate)continue}if(!f.loading&&(!1!==S.loadData&&(!x&&!b||f.endPoints&&Object.keys(f.endPoints).length)&&(!S.data||S.data.useDefaultQuoteFeed)&&(m=S.symbolObject).symbol&&m.generator==r.generator&&(C.symbolObject=m,C.symbol=m.symbol,w=this.getQuoteFeed(C),r==(w&&w.behavior)))){k=!0,x||(f.loading=!0);for(var F=0;F<y.length;F++)t.symbolEqual(y[F],m)&&(k=!1);k&&(y.push(m),v[m.symbol]=f.endPoints)}}A=[],Y.U5C();for(var _=0;_<y.length;_++)m=y[_],(D=t.shallowClone(e.originalState)).symbol=m.symbol,D.symbolObject=m,D.update||D.future?(D.endDate||(D.endDate=e.endDate),D.startDate=v[m.symbol].end):(D.startDate||(D.startDate=e.startDate),D.endDate=b&&!e.future?v[m.symbol].begin:e.endDate,D.ticks=e.ticks),A.push(D);if(!A.length&&x)return(M={appending:e.appending||e.originalState.update}).appending&&(M.appendToDate=e.startDate),d.createDataSet(null,null,M),e.nodraw||d.draw(),void(i&&i(null));this.multiFetch(A,(T=x,Y.O5C(),function(s){var o,l,h,c,u,g,m,y,v,x;Y.O5C(),o=null;for(var b=0;b<s.length;b++)if(!(h=(l=s[b]).dataCallback.error)&&0!==h){c=l.params.symbolObject,g=(u=l.dataCallback).quotes,m=u.moreAvailable,y=u.upToDate,v=[],d.getSeries&&(v=d.getSeries({symbolObject:c})),x=!1;for(var C=0;C<v.length;C++)f=v[C],T||(e.future?(f.upToDate=!0===y||y||g.length<=(l.params.startDate?1:0),d.isHistoricalModeSet&&g.length<2&&(f.mostRecentForwardAttempt=new Date)):f.moreAvailable=!1!==m&&(m||g.length>(l.params.endDate?1:0)),f.loading=!1),x=f.parameters.fillGaps||x;g=n.cleanup(d,f,g,a,e,x),d.updateChartData(g,p,{secondarySeries:c.symbol,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),g&&g.length&&(!o||o>g[0].DT)&&(o=g[0].DT)}s.length&&(d.createDataSet(null,null,{appending:e.originalState.update||e.future,appendToDate:o}),e.nodraw||d.draw(),a==t.QuoteFeed.INITIAL&&n.resetRefreshInterval(r.refreshInterval,r)),i&&i(null)}))},t.ChartEngine.Driver.prototype.cleanup=function(e,i,a,r,n,s){var o,l,h,c,u;return Y.O5C(),e.doCleanupDates(a,e.layout.interval),!n.missingBarsCreated&&a&&a.length&&e.cleanupGaps&&!1!==s&&(h=n.chart,i?(h=i,l=i.parameters.symbol||i.id):l=h.defaultPlotField,r!=t.QuoteFeed.PAGINATION||n.loadMoreReplace?r==t.QuoteFeed.UPDATE&&h.endPoints.end&&h.endPoints.end<a[0].DT&&(u=e.getFirstLastDataRecord(e.masterData,l,!0),i&&(u=u[l]),a.unshift(u),o="shift"):h.endPoints.begin&&h.endPoints.begin>a[a.length-1].DT&&("p","o","p",c=e.getFirstLastDataRecord(e.masterData,l,!1),i&&(c=c[l]),a.push(c),o="pop"),a=e.doCleanupGaps(a,n.chart,{cleanupGaps:s,noCleanupDates:!0}),o&&a[o]()),a},t.ChartEngine.Driver.prototype.updateChart=function(e){var i,a,r,n,s,o,l,h,c;if(!this.updatingChart&&!this.loadingNewChart)for(var u in i=Object.keys(this.stx.charts).length,Y.x3g(35),a=Y.I3g(1393245248,"0"),r=this.stx,n=r.layout.interval,s=r.layout.timeUnit,r.charts)(o=r.charts[u]).symbol&&(l=this.makeParams(o.symbol,o.symbolObject,o),h=this.getQuoteFeed(l),o.masterData&&o.masterData.length&&(l.startDate=o.endPoints.end),l.update=!0,l.originalState=t.shallowClone(l),e&&e!=l.behavior?this.loadDependents(l,null,t.QuoteFeed.UPDATE,e):(this.updatingChart=!0,c=d(this,l,o.symbol,h),r.isEquationChart(l.symbol)?t.fetchEquationChart(l,c):h&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.UPDATE,h.engine,l,c)));function d(e,o,l,h){var c;c=2;for(var u=1;-2018910866!==Y.M86(u.toString(),u.toString().length,50844);u++)o.behavior.prefetchAction&&o.behavior.prefetchAction(""),c+=2;return-1917588309!==Y.I86(c.toString(),c.toString().length,17363)&&o.behavior.prefetchAction&&o.behavior.prefetchAction(""),o.behavior.prefetchAction&&o.behavior.prefetchAction("updateChart"),function(c){var u,d;a++,u=o.chart,Y.U5C(),u.masterData,l!=u.symbol||n!=r.layout.interval||s!=r.layout.timeUnit||r.isHistoricalMode()?e.updatingChart=!1:(c.error?h&&h.engine.announceError(o.originalState,c):(d=c.quotes,d=e.cleanup(r,null,d,t.QuoteFeed.UPDATE,o),r.updateChartData(d,u,{noCreateDataSet:!0,noCleanupDates:!0}),u.attribution=c.attribution),a==i&&(e.updatingChart=!1),o.behavior.callback&&o.behavior.callback(o),e.loadDependents(o,null,t.QuoteFeed.UPDATE,o.behavior))}}},t.ChartEngine.Driver.prototype.updateChartLoop=function(e,t){var i,a;if(t||(t=this.behavior),-1!=t.intervalTimer){Y.O5C(),t.intervalTimer&&clearInterval(t.intervalTimer),i=function(e,t){return function(){Y.U5C(),t.noUpdate||e.updateChart(t)}};for(var r=0;r<this.quoteFeeds.length;r++)t!=(a=this.quoteFeeds[r].behavior)||a.noUpdate||(e||0===e||(e=a.refreshInterval),e&&(t.intervalTimer=setInterval(i(this,a),1e3*e)))}},t.ChartEngine.Driver.prototype.resetRefreshInterval=function(e,t){(t||this.behavior).refreshInterval=e,Y.U5C(),this.updateChartLoop(null,t)},t.ChartEngine.Driver.prototype.loadAll=function(e,t){var i,a;i=this,a=0,Y.U5C(),function r(){return function(n){n?t(n):!e.moreAvailable&&e.upToDate?t(null):++a>20?t("error, moreAvailable not implemented correctly in QuoteFeed"):(e.loadingMore=!1,i.checkLoadMore(e,!0,!0,r(),!0))}}()()},t.ChartEngine.Driver.prototype.checkLoadMore=function(e,i,a,r,n){var s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A;if(s=this.stx,this,e.loadingMore||this.loadingNewChart)return e.initialScroll=e.scroll,void(r&&r(null));if(s.isHistoricalMode()||(s.isHistoricalModeSet=!1),o=this.makeParams(e.symbol,e.symbolObject,e),s.currentlyImporting)r&&r(null);else{l=o.behavior,h=e.dataSet,Y.x3g(19),Y.U5C();var D=Y.l3g(2,13,21);if(u=1e3*(l.forwardPaginationRetryInterval||D),d=!1,p=!1,e.dataSet.length)for(var M in e.series)(g=e.series[M]).loading||!1!==g.parameters.loadData&&(c=!g.mostRecentForwardAttempt||g.mostRecentForwardAttempt.getTime()+u<Date.now(),!1!==g.moreAvailable&&T(g)&&(d=!0),c&&!g.upToDate&&F(g)&&(p=!0));if(c=!e.mostRecentForwardAttempt||e.mostRecentForwardAttempt.getTime()+u<Date.now(),f=(T(e)||i)&&!1!==e.moreAvailable,m=(F(e)||i)&&!e.upToDate&&c,y=f||d,v=s.isHistoricalModeSet&&!y&&(m||p),x=s.layout.interval,b=s.layout.timeUnit,C=!1,S=l.findHeadOfData||e.masterData&&e.masterData.length,!l.noLoadMore&&S&&(v||!s.maxDataSetSize||e.dataSet.length<s.maxDataSetSize)&&(y||v)){if(e.initialScroll=e.scroll,e.loadingMore=!0,(o=this.makeParams(e.symbol,e.symbolObject,e)).pagination=!0,o.future=v,e.masterData&&e.masterData.length?(v?o.startDate=e.endPoints.end:o.endDate=e.endPoints.begin,v&&!o.startDate?(w=s.getFirstLastDataRecord(e.masterData,"DT",!0))&&(o.startDate=w.DT):y&&!o.endDate&&("D","T",(w=s.getFirstLastDataRecord(e.masterData,"DT"))&&(o.endDate=w.DT))):o.endDate=new Date,o.originalState=t.shallowClone(o),o.nodraw=n,!f&&d||!m&&p)return this.loadingMore=!0,this.loadDependents(o,(function(t){e.loadingMore=!1,r&&r(t)}),t.QuoteFeed.PAGINATION),void(r&&r(null));s.fetchMaximumBars[s.layout.aggregationType]&&(o.fetchMaximumBars=!0,!s.maxMasterDataSize||l.maximumTicks<s.maxMasterDataSize?o.ticks=l.maximumTicks:o.ticks=s.maxMasterDataSize),k=function(e,i){l.prefetchAction&&l.prefetchAction("checkLoadMore");return function(a){var s,o,h,c,u,d,p,g,f;if(s=e.stx,o=i.chart,i.symbol==o.symbol&&x==s.layout.interval&&b==s.layout.timeUnit)if(i.loadMore||(i.chart.loadingMore=!1),a.error)e.quoteFeed.announceError(i.originalState,a),i.chart.loadingMore=!1,r&&r(a.error);else{if(a.quotes||(a.quotes=[]),h=a.quotes,c=o.masterData,(h=e.cleanup(s,null,h,t.QuoteFeed.PAGINATION,i)).length&&o.masterData&&o.masterData.length)if(i.future)(u=h[0]).DT&&u.DT==o.masterData[o.masterData.length-1].DT&&c.pop();else{Y.x3g(111);var m=Y.I3g(64,18,5,17,10);(d=h[h.length-m]).DT&&+d.DT==+o.masterData[0].DT&&h.pop()}i.future?(a.upToDate?o.upToDate=!0:(!1===a.upToDate||h.length>1)&&(o.upToDate=!1),s.isHistoricalModeSet&&h.length<2&&(o.mostRecentForwardAttempt=new Date)):a.moreAvailable||!1!==a.moreAvailable&&h.length?o.moreAvailable=!0:o.moreAvailable=!1,e.tickMultiplier=h.length?2:2*e.tickMultiplier,p=h[0]?h[0].DT:i.startDate,g=h[0]?h[h.length-1].DT:i.endDate,(!o.endPoints.begin||o.endPoints.begin>p)&&(o.endPoints.begin=p),(!o.endPoints.end||o.endPoints.end<g)&&(o.endPoints.end=g),o.loadingMore=!1,i.loadMoreReplace?s.setMasterData(h,o,{noCleanupDates:!0}):i.future?s.updateChartData(h,o,{noCreateDataSet:!0,noCleanupDates:!0}):t.addMemberToMasterdata({stx:s,chart:o,data:h,fields:["*"],noCleanupDates:!0}),i.future&&(f={appending:!0,appendToDate:h[0]&&h[0].DT}),s.createDataSet(void 0,void 0,f),n||s.draw(),l.callback&&l.callback(i),e.loadDependents(i,r,t.QuoteFeed.PAGINATION)}}}(this,o),s.isEquationChart(o.symbol)?t.fetchEquationChart(o,k):(v&&(o.appending=!0),(A=this.getQuoteFeed(o))&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.PAGINATION,A.engine,o,k)),C=!0}!C&&r&&r(null)}function T(t){return Y.O5C(),!t.endPoints.begin||h.length-e.scroll<l.bufferSize||h.length-e.scroll-s.tickFromDate(t.endPoints.begin,e)<l.bufferSize}function F(t){return!t.endPoints.end||e.scroll-e.maxTicks+1<l.bufferSize||s.tickFromDate(t.endPoints.end,e,null,!0)-h.length+e.scroll-e.maxTicks+2<l.bufferSize}},t.ChartEngine.Driver.prototype.extendHistoricalData=function(e){var i,a,r=e.from,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},s=this.stx,o=s.chart,l=s.layout,h=o.masterData,c=o.dataSet,u=l.interval,d=l.timeUnit;function p(e,i){return function(a){var r=a.quotes,h=a.moreAvailable,c=a.error;if("boole","a","n",i.symbol===o.symbol&&u===l.interval&&d===l.timeUnit){if(o.loadingMore=!1,c)return n(c);r=e.cleanup(s,null,r,t.QuoteFeed.PAGINATION,i),"boolean"===R(h)?o.moreAvailable=h:o.moreAvailable=!!r.length,o.endPoints.begin=r[0].DT,t.addMemberToMasterdata({stx:s,chart:o,data:r,fields:["*"],noCleanupDates:!0}),s.createDataSet(),s.draw()}}}if(i=this.makeParams(o.symbol,o.symbolObject,o),a=this.getQuoteFeed(i),o.loadingMore||this.loadingNewChart||s.currentlyImporting||!h.length||!a||s.maxDataSetSize&&c.length>s.maxDataSetSize)return n(null);o.loadingMore=!0,i.originalState=Object.assign({},i),i.startDate=r,i.endDate=h[0].DT,t.ChartEngine.Driver.fetchData(t.QuoteFeed.PAGINATION,a.engine,i,p(this,i))},t.ChartEngine.Driver.prototype.barsToFetch=function(e){var i,a;return"w","e","e","k",t.isValidNumber(this.tickMultiplier)||(this.tickMultiplier=2),i=this.stx.layout.interval,a=e.stx.layout.periodicity,"month"!=i&&"week"!=i||this.stx.dontRoll||(a*="week"==i?7:30),e.stx.chart.maxTicks*a*this.tickMultiplier},t.ChartEngine.Driver.determineStartDate=function(e,t,i){return Y.U5C(),this.determineStartOrEndDate(e,t,i,!0)},t.ChartEngine.Driver.determineStartOrEndDate=function(e,t,i,a){return a||e.fetchMaximumBars?e.startDate||t.previous(i):e.future?t.next(i):new Date},t.ChartEngine.Driver.prototype.makeParams=function(e,i,a){var r,n,s,o,l,h,c,u;n=(r=this.stx).layout.interval,s=this.barsToFetch({stx:r}),"month"!=n&&"week"!=n||r.dontRoll||(n="day"),l=(o=this.getQuoteFeed({interval:n,symbol:e,symbolObject:i}))&&o.behavior,(h=t.shallowClone(l)||{}).behavior=l,c=!1,u=[],a.market&&a.market.getSessionNames&&(u=a.market.getSessionNames()),r.extendedHours?r.extendedHours.filter?c=!0:(c=r.layout.extended,u=u.filter((function(e){return Y.O5C(),e.enabled||r.layout.marketSessions[e.name]}))):u=u.filter((function(e){return e.enabled}));for(var d=0;d<u.length;d++)u[d]=u[d].name;return t.extend(h,{stx:r,symbol:e,symbolObject:i,chart:a,interval:n,extended:c,period:1,ticks:s,additionalSessions:u,quoteDriverID:this.id},!0),h.symbolObject||(h.symbolObject={symbol:e}),isNaN(h.interval)||("m","i","nu","te",h.period=parseInt(h.interval,10),h.interval=r.layout.timeUnit,h.interval||(h.interval="minute")),h},t.ChartEngine.Driver.prototype.newChart=function(e,i){var a,r,n,s,o,l,h,c,u,d,p;a=this.stx,r=e.symbol,n=a.layout.interval,s=a.layout.timeUnit,(o=e.chart).moreAvailable=null,o.upToDate=null,o.loadingMore=!1,o.attribution=null,Y.O5C(),l=this.makeParams(r,e.symbolObject,o),t.extend(l,e,!0),h=this.getQuoteFeed(l),c=l.behavior,(a.fetchMaximumBars[a.layout.aggregationType]||e.fetchMaximumBars)&&(!a.maxMasterDataSize||c.maximumTicks<a.maxMasterDataSize?l.ticks=c.maximumTicks:l.ticks=a.maxMasterDataSize,l.fetchMaximumBars=!0),this.loadingNewChart=!0,this.updatingChart=!1,l.originalState=t.shallowClone(l),d=this,p=l,c.prefetchAction&&c.prefetchAction("newChart"),u=function(o){var l,u,g,f;if(l=p.chart,u=o.quotes,g=!1,r==l.symbol&&n==a.layout.interval&&s==a.layout.timeUnit){for(var m in d.loadingNewChart=!1,o.error?h.engine.announceError(p.originalState,o):(u=d.cleanup(a,null,u,t.QuoteFeed.INITIAL,p),a.setMasterData(u,l,{noCleanupDates:!0}),l.endPoints={},l.endPoints.begin=u[0]?u[0].DT:p.startDate,l.endPoints.end=u[0]?u[u.length-1].DT:p.endDate,u?(l.moreAvailable=!1!==o.moreAvailable,l.upToDate=o.upToDate):(l.moreAvailable=!1,l.upToDate=!0),l.attribution=o.attribution,e.initializeChart&&a.initializeChart(),a.createDataSet(),g=!0),Y.O5C(),l.series)l.series[m].endPoints={},l.series[m].moreAvailable=null,l.series[m].upToDate=null;(f=l.masterData)&&f.length&&(p.startDate=f[0].DT,p.endDate=f[f.length-1].DT),c.callback&&c.callback(p),d.loadDependents(p,(function(){g&&!p.nodraw&&d.stx.home(),i&&i(o.error),d.stx.dispatch("newChart",{stx:d.stx,symbol:d.stx.chart.symbol,symbolObject:d.stx.chart.symbolObject,moreAvailable:d.stx.chart.moreAvailable,upToDate:d.stx.chart.upToDate,quoteDriver:d}),d.resetRefreshInterval(c.refreshInterval,c)}),t.QuoteFeed.INITIAL)}else i&&i("orphaned")},this.stx.isEquationChart(l.symbol)?t.fetchEquationChart(l,u):h&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.INITIAL,h.engine,l,u)},t.QuoteFeed.INITIAL=1,t.QuoteFeed.UPDATE=2,t.QuoteFeed.PAGINATION=3,t.QuoteFeed.SERIES=4,t.ChartEngine.Driver.fetchData=function(e,i,a,r){if(Y.O5C(),!a.symbol)return r({quotes:[]});i.v2QuoteFeed?"function"!=typeof i.subscribe?t.ChartEngine.Driver.fetchDataInContext(e,i,a,r):t.ChartEngine.Driver.fetchDataInContext(e,i,a,function(e){e.error||this.checkSubscriptions(a.stx),r(e)}.bind(i)):(a.stx.convertToDataZone(a.startDate),a.stx.convertToDataZone(a.endDate),i.fetch(a,r))},t.ChartEngine.Driver.fetchDataInContext=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,g=Y;if("f","unction","f","un","ction",(h=a.stx).chart.market.newIterator)switch(e===t.QuoteFeed.SERIES&&(a.series=!0,e=t.QuoteFeed.INITIAL,a.endDate&&!a.startDate||a.future?e=t.QuoteFeed.PAGINATION:a.startDate&&!a.endDate&&(e=t.QuoteFeed.UPDATE)),g.U5C(),c=Math.min(a.ticks,a.maximumTicks),i.maxTicks&&(c=Math.min(c,i.maxTicks)),u=a.symbolObject.masterSymbol||a.symbol,e){case t.QuoteFeed.UPDATE:if(h.isHistoricalModeSet)return void(h.quoteDriver.updatingChart=!1);a.startDate?d=a.startDate:(d=new Date,g.c3g(53),d.setHours(g.l3g("0",2147483647),0,g.I3g("0",0,g.x3g(27)),0)),"function"===R(i.fetchUpdateData)&&i.fetchUpdateData(u,h.convertToDataZone(d),a,r);break;case t.QuoteFeed.INITIAL:n={begin:l=a.endDate||new Date,interval:a.interval,periodicity:"tick"==a.interval?h.chart.xAxis.futureTicksInterval:a.period,outZone:h.dataZone},s=h.chart.market.newIterator(n),o=t.ChartEngine.Driver.determineStartDate(a,s,c),a.endDate&&(l=a.endDate),"function"==typeof i.fetchInitialData&&i.fetchInitialData(u,o,h.convertToDataZone(l),a,r);break;case t.QuoteFeed.PAGINATION:if("ti","ck",n={begin:a.endDate||a.startDate,interval:a.interval,periodicity:"tick"==a.interval?h.chart.xAxis.futureTicksInterval:a.period,outZone:h.dataZone},s=h.chart.market.newIterator(n),p=t.ChartEngine.Driver.determineStartOrEndDate(a,s,c,!a.future),o=a.startDate||p,l=a.endDate||p,a.startDate?a.stx.convertToDataZone(o):a.stx.convertToDataZone(l),"function"===R(i.fetchPaginationData)){if(h.maxMasterDataSize&&h.maxMasterDataSize<=h.masterData.length)return;i.fetchPaginationData(u,o,l,a,(function(e){l>=Date.now()&&(h.isHistoricalModeSet=!1),r&&r(e)}))}break;default:console.error("Illegal fetchData constant")}else console.error("quoteFeed feature requires first activating market feature.")}},v=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:e.CIQ).ChartEngine.prototype.addSeries=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x;if(r=this.runPrepend("addSeries",arguments))return r;function b(e){return Y.O5C(),function(t){var r,n;Y.O5C(),t.error||(r=t.quotes,n=i.fillGaps,p.cleanupGaps||(n=!1),r=p.doCleanupGaps(r,p.chart,{cleanupGaps:n}),p.updateChartData(r,p.chart,{secondarySeries:s,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),o.loading=!1,o.moreAvailable=t.moreAvailable,o.upToDate=t.upToDate,C(p,o)),null===i.action||c.length||p.dispatch(g?"symbolImport":"symbolChange",{stx:p,symbol:e.symbol,symbolObject:e.symbolObject,action:i.action,id:o.id,parameters:i}),a&&a.call(p,t.error,o)}}function C(a,r){var n,s,o,l;if(n=i.renderer||"Lines",s=i.name||e,Y.O5C(),!i.yAxis||i.yAxis instanceof t.ChartEngine.YAxis||g||(i.yAxis.name=s),i.renderer||i.name||i.color||i.chartType){if(!(o=a.getSeriesRenderer(s))){if(l={name:s,overChart:!1!==i.overChart,useChartLegend:!0},i.chartType?o=t.Renderer.produce(i.chartType,t.extend({highlightable:i.highlightable,dependentOf:i.dependentOf,panel:i.panel,yAxis:i.yAxis,baseline:i.baseline},l)):(t.ensureDefaults(i,l),o=new t.Renderer[n]({params:i})),!o)return;a.setSeriesRenderer(o)}o.attachSeries(e,i),!1!==i.loadData&&o.ready(),a.layout.symbols=a.getSymbols({"include-parameters":!0,"exclude-studies":!0}),a.changeOccurred("layout")}}return n=e||null,s=e,e||(e=t.uniqueID()),Y.U5C(),i&&!0===i.panel&&(i.panel=e),(o={parameters:i?t.clone(i):{},yValueCache:[],display:n,id:e,loading:!i||!1!==i.loadData}).parameters.yAxis=i&&i.yAxis,(i=o.parameters).symbol&&(s=i.symbol),i.isComparison&&(i.shareYAxis=!0),!i.yAxis||i.yAxis instanceof t.ChartEngine.YAxis||(i.yAxis=new t.ChartEngine.YAxis(i.yAxis)),t.ensureDefaults(i,{chartName:this.chart.name,symbolObject:{symbol:s},panel:this.chart.panel.name,fillGaps:!1,action:"add-series"}),"display"in i&&(o.display=i.display),l=this.charts[i.chartName],h=i.symbolObject,s=i.symbol=h.symbol,o.display||(o.display=s||i.field),o.endPoints={},i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),i.isComparison&&void 0===i.gapDisplayStyle&&(i.gapDisplayStyle="transparent"),c=this.getSeries({symbolObject:h,chart:l,includeMaster:!0}),u=i.panel,this.panels[u]?i.yAxis||i.shareYAxis||(i.yAxis=new t.ChartEngine.YAxis({name:e,position:"none"})):((d=i.yAxis||new t.ChartEngine.YAxis).name=e,this.createPanel(e,u,null,null,d),this.preferences.dragging&&this.preferences.dragging.series||(i.highlightable=!1)),l.series[e]=o,p=this,g=this.currentlyImporting,!i.isComparison||!l.forcePercentComparison||i.panel!=l.panel.name||i.yAxis&&i.yAxis!=l.yAxis||this.setChartScale("percent"),(f=l.masterData)||(f=l.masterData=this.masterData=[]),m=f.length,i.data&&!i.data.useDefaultQuoteFeed?b({symbol:s,symbolObject:h,action:i.action})({quotes:i.data}):c.length?(o.endPoints=c[0].endPoints,o.loading=c[0].loading,C(this),a&&setTimeout((function(){Y.U5C(),a.call(p,null,o)}),0)):this.quoteDriver&&!1!==i.loadData?(v=(y=this.quoteDriver).makeParams(s,h,l),m&&(v.startDate=f[0].DT,v.endDate=this.isHistoricalMode()?f[f.length-1].DT:new Date),v.stx.isEquationChart(v.symbol)?t.fetchEquationChart(v,b(v)):(x=y.getQuoteFeed(v))&&t.ChartEngine.Driver.fetchData(4,x.engine,v,b(v))):(C(this),a&&a.call(this,null,o)),this.runAppend("addSeries",arguments),o},t.ChartEngine.prototype.getSeries=function(e){var i,a,r,n,s;for(var o in a=(i=e.chart?e.chart:this.chart).series,(r=e.symbolObject)||(r={symbol:e.symbol}),n=[],a)s=a[o],t.symbolEqual(r,s.parameters.symbolObject)&&n.push(s);return e.includeMaster&&t.symbolEqual(r,i.symbolObject)&&n.push({}),Y.O5C(),n},t.ChartEngine.prototype.modifySeries=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,f,m,y,v;if(Y.U5C(),r="D",r+="rawi",r+="ng.updateSourc",r+="e",!this.runPrepend("modifySeries",arguments)&&i&&("string"==typeof e?(s=e,n=(o=i.chartName?this.charts[i.chartName]:this.chart).series[s]):(s=(n=e).id,o=this.charts[n.parameters.chartName]),n)){for(var x in t.extend(n.parameters,i,!0),this.getRendererFromSeries(s).modifyRenderer(i),l=n.parameters,o.seriesRenderers){u=(c=o.seriesRenderers[x]).params,d=c.seriesParams;for(var b=0;b<d.length;++b)if(p=d[b],f=(g=this.panels[p.panel])&&g.yAxis.name,p.id===n.id){!0===l.panel&&(l.panel=l.dependentOf||l.name),u.panel=l.panel,i.yAxis&&(i.yAxis instanceof t.ChartEngine.YAxis||(i.yAxis=new t.ChartEngine.YAxis(i.yAxis)),u.yAxis=i.yAxis),l.panel!=p.panel&&u.name==f?this.electNewPanelOwner(p.panel):(m=this.getYAxisByName(l.panel,u.name))&&l.yAxis&&m.name!==l.yAxis.name&&(m.name=this.electNewYAxisOwner(m)),l.field||(l.field=null),c.attachSeries(s,t.ensureDefaults(l,p)),l.field||(l.field=l.subField),delete l.subField,!l.isComparison||!o.forcePercentComparison||l.panel!=o.panel.name||n.parameters.yAxis&&l.yAxis.name!=o.yAxis.name||this.setChartScale("percent"),h=c;break}}if(this.changeOccurred("layout"),t.getFn(r)(this,n.parameters.symbol||s,null,n.parameters.panel),this.runAppend("modifySeries",arguments),!0!==a){y=h.getDependents(this);for(var C=0;C<y.length;C++)this.modifySeries(y[C].params.name,{panel:h.params.panel,yAxis:n.parameters.yAxis},!0);(v=o.seriesRenderers[h.params.dependentOf])&&(v.params.yAxis==n.parameters.yAxis&&v.params.panel==h.params.panel||this.modifySeries(h.params.dependentOf,{panel:h.params.panel,yAxis:n.parameters.yAxis},!0))}return this.draw(),n}},t.ChartEngine.prototype.deleteSeries=function(e,t,i){var a,r,n,s,o,l,h,c;a="deleteSeri",a+="es",this.runPrepend("deleteSeries",arguments)||(r=(i=i||{}).action?i.action:"remove-series","object"===R(e)?(n=e.id,t=t||this.charts[e.parameters.chartName]):(n=e,t=t||this.chart),(s=t.series[n])&&(o=s.parameters.loadData,l=s.parameters.symbolObject,delete t.series[n],h=this.getSeries({symbolObject:l,includeMaster:!0}),!1===o&&h.push(n),h.length||this.cleanMasterData(l,t),(c=this.panels[s.parameters.panel])&&this.checkForEmptyPanel(c),this.createDataSet(),h.length||this.dispatch(this.currentlyImporting?"symbolImport":"symbolChange",{stx:this,symbol:l.symbol,symbolObject:l,id:n,action:r}),this.quoteDriver&&this.quoteDriver.updateSubscriptions(),this.runAppend(a,arguments)))},t.ChartEngine.prototype.removeSeries=function(e,t){var i,a,r,n,s,o,l;if(i="ob",Y.U5C(),i+="j",i+="e",i+="ct",!this.runPrepend("removeSeries",arguments)){for(var h in r=!1,R(e)===i?(a=e.id,t=t||this.charts[e.parameters.chartName]):(a=e,t=t||this.chart),t.seriesRenderers){n=t.seriesRenderers[h],o=(s=this.panels[n.params.panel])&&s.yAxis.name;for(var c=n.seriesParams.length-1;c>=0;c--)n.seriesParams[c].id===a&&(n.removeSeries(a),n.seriesParams.length<1&&(this.removeSeriesRenderer(n),n.params.name==o?this.electNewPanelOwner(n.params.panel):this.checkForEmptyPanel(n.params.panel)||(l=this.getYAxisByName(s,n.params.name))&&(l.name=l.studies[0]||l.renderers[1])),r=!0)}r||this.deleteSeries(a,t),this.resetDynamicYAxis(),this.draw(),this.resizeChart(),this.runAppend("removeSeries",arguments)}},t.Comparison=t.Comparison||function(){},t.Comparison.initialPrice=100,t.Comparison.getInitialPrice=function(e){var i,a,r;if(e.initialComparisonPrice)return e.initialComparisonPrice;if(e.initialComparisonPrice=100,i=t.Comparison.initialPrice,Y.O5C(),"number"==typeof i&&(e.initialComparisonPrice=i),"string"==typeof i&&(e.series[i]||""===i)){a="Close",e.defaultPlotField&&(e.highLowBars||(a=e.defaultPlotField));for(var n=e.dataSet.length-e.scroll-1;n<e.dataSet.length;n++)if(r=e.dataSet[n]){if(r[i]&&r[i][a]){e.initialComparisonPrice=r[i][a];break}if(""===i&&r[a]){e.initialComparisonPrice=r[a];break}}}return e.initialComparisonPrice},t.Comparison.priceToPercent=function(e,i,a){var r,n=Y;r=t.Comparison.baseline||a,n.x3g(94);var s=n.l3g(95,2,10);n.x3g(107);var o=n.l3g(4,18,9e4,350072);return Math.round((a-r)/r*s*1e4)/o},t.Comparison.percentToPrice=function(e,i,a){var r;return r=t.Comparison.baseline||1,Y.c3g(112),Y.U5C(),Y.I3g(1,r,a,100)},t.Comparison.priceToRelative=function(e,i,a){var r,n;return r=t.Comparison.baseline||a,n=t.Comparison.getInitialPrice(i),Y.x3g(113),Y.l3g(r,n,a)},t.Comparison.relativeToPrice=function(e,i,a){var r,n;return r=t.Comparison.baseline||1,n=t.Comparison.getInitialPrice(i),Y.c3g(113),Y.l3g(n,r,a)},t.Comparison.createComparisonSegmentInner=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M=Y;for(r in"Cl","o","se",a=[],i.series)(o=i.series[r].parameters).isComparison&&a.push(o.symbol);for(var T in l=["Close","Open","High","Low","iqPrevClose"],h=e.chart.highLowBars,i.defaultPlotField&&!h&&l.unshift(i.defaultPlotField),c=l[0],u=e.layout.studies)if(d=u[T],n=e.panels[d.panel],s=d.getYAxis(e),n&&n.yAxis==s){for(r in d.outputMap)l.push(r);for(var F=0;F<=2;F++)l.push(d.name+"_hist"+(F||""));d.referenceOutput&&l.push(d.referenceOutput+" "+d.name)}for(var _ in e.plugins)if((p=e.plugins[_]).transformOutputs)for(r in p.transformOutputs)l.push(r);i.initialComparisonPrice=null,i.dataSegment=[],g=null,M.x3g(7);var P=M.I3g(19,20);f=i.dataSet.length-i.scroll-P,e.startComparisonsAtFirstVisibleBar&&(f+=1),M.c3g(71);var V=M.I3g(2,13,5);m=i.maxTicks+V;for(var O=0;O<=m;O++){if(O==m&&(O=-1),M.x3g(1),(y=M.l3g(f,O))<i.dataSet.length&&y>=0){if(x=(v=i.dataSet[y])[c],!g){if(0===x||null===x){if(O<0)break;continue}g=t.clone(v)}for(v.transform||(v.transform={cache:{},DT:v.DT,Date:v.Date}),!t.Comparison.baseline&&x&&(g=t.clone(v)),t.Comparison.baseline=g[c],b=0;b<l.length;b++)(v[r=l[b]]||0===v[r])&&(v.transform[r]=i.transformFunc(e,i,v[r]));for(b=0;b<a.length;b++)if(r=a[b],C=i.series[r],-1==O&&C&&C.parameters.isComparison)delete v.transform[r];else{S=v[r];for(var I=0;S&&I<l.length;I++)((w=S[l[I]])||0===w)&&((k=g[r]&&g[r][l[0]])||0===k||(g[r]||(g[r]={}),g[r][l[I]]=k=w*t.Comparison.baseline/v[c]),0!==k&&(A=t.Comparison.baseline||1,M.x3g(114),D=M.l3g(A,w,k),v.transform[r]||(v.transform[r]={}),v.transform[r][l[I]]=i.transformFunc(e,i,D)))}i.dataSegment.push(v)}else y<0&&i.dataSegment.push(null);if(O<0)break}},t.Comparison.priceFormat=function(e,t,i){var a,r,n=Y;if(null==i||isNaN(i))return"";if(a=t.yAxis.priceTick,r=e.internationalizer)a>=5?(n.x3g(8),i=r.percent.format(n.I3g(i,100))):a>=.5?(n.x3g(8),i=r.percent1.format(n.l3g(i,100))):a>=.05?(n.x3g(8),i=r.percent2.format(n.l3g(i,100))):a>=.005?(n.c3g(8),i=r.percent3.format(n.l3g(i,100))):(n.c3g(8),i=r.percent4.format(n.l3g(i,100)));else if(a>=5){n.x3g(47);n.I3g(12,6560,6,9804,59040);n.x3g(115);var s=n.l3g(1,2822,18);n.x3g(91);var o=n.I3g(4752,4766,2376,1);n.x3g(116);var l=n.I3g(13,5,118912,52028,2);i=i.toFixed(0)+(s<=18?("4770"|o)>l?"v":"c":"%")}else if(a>=.5){n.x3g(115);var h=n.l3g(6,18,2);n.x3g(117);n.I3g(117,2,17,302,19);i=i.toFixed(h)+"%"}else if(a>=.05)i=i.toFixed(2)+"%";else if(a>=.005){n.x3g(118);var c=n.l3g(7,7,19,0,22);i=i.toFixed(c)+"%"}else{n.c3g(1);var u=n.l3g(1,3);n.c3g(119);var d=n.l3g(12492,18,3,5,3101);n.x3g(94);n.l3g(4398,2207,4414);i=i.toFixed(u)+(d<747.11?"s":"%")}return n.U5C(),0===parseFloat(i)&&"-"==i.charAt(0)&&(i=i.substring(1)),i},t.ChartEngine.prototype.setComparison=function(e,i,a){var r,n;if(i||(i=this.chart),"string"==typeof i&&(i=this.charts[i]),(a||""===a)&&(t.Comparison.initialPrice=a),!0===e){if(i.isComparison)return;e="percent"}switch(this.resetDynamicYAxis(),n=(r=i.panel.yAxis).priceFormatter==t.Comparison.priceFormat,e){case"relative":"dataSe","gment",this.setTransform(i,t.Comparison.priceToRelative,t.Comparison.relativeToPrice),n&&(r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:null,r.originalPriceFormatter=null),r.whichSet="dataSegment",i.isComparison=!0;break;case"percent":"dataSe","gment",this.setTransform(i,t.Comparison.priceToPercent,t.Comparison.percentToPrice),n||(r.originalPriceFormatter={func:r.priceFormatter},r.priceFormatter=t.Comparison.priceFormat),r.whichSet="dataSegment",i.isComparison=!0;break;default:this.unsetTransform(i),n&&(r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:null,r.originalPriceFormatter=null),r.whichSet="dataSet",i.isComparison=!1}},t.ChartEngine.prototype.setChartScale=function(e){var i,a;i=this.chart,e||(e="linear"),(a={percent:!0,relative:!0})[e]?this.setComparison(e,i,t.Comparison.initialPrice):a[this.layout.chartScale]&&this.setComparison(!1,i),this.layout.chartScale=e,i.canvas&&this.draw(),this.changeOccurred("layout")}},x=function(e){var t,i;function a(e){if(Y.U5C(),"undefined"!=typeof html2canvas)return i=html2canvas,e();if("undefined"!=typeof requirejs)try{return requirejs(["html2canvas.min.js"],(function(t){return i=t,e()}))}catch(e){"Require loading has failed, atte","mpting to load html2canvas manually.",console.warn("Require loading has failed, attempting to load html2canvas manually.")}t.loadScript(function(){var e,i;if("scri","pt",t.Share.html2canvasLocation)return t.Share.html2canvasLocation;e=document.getElementsByTagName("script");for(var a=0;a<e.length;a++)if((i=e[a]).src&&i.src.indexOf("share.js")>-1)return i.src.replace(/standard\/share\.js/,"")+"thirdparty/";return"js/thirdparty/"}()+"html2canvas.min.js",(function(){return i=html2canvas,Y.O5C(),e()}))}function r(e,t,a){var r,s,o,l,h,c,u;if("sha","r","in","g","b","o","d","y",t||(t={}),[],"ciq-no-share",r=document.querySelector("body"),t.hide&&t.hide instanceof Array){","," ",s=t.hide.join(", "),o=document.querySelectorAll(s);for(var d=0;d<o.length;d++)o[d].classList.add("ciq-no-share")}for(r.classList.add("sharing"),l=e.chart.container.getElementsByTagName("svg"),h=[],c=0;c<l.length;c++)u=l[c],h.push(u.innerHTML),n(u);i(e.chart.container,{allowTaint:!1,logging:!1,width:t.width||null,height:t.height||null,backgroundColor:t.background||null,useCORS:!0}).then((function(e){for(a&&a(null,t.data?e.toDataURL("image/png"):e),Y.U5C(),c=0;c<l.length;c++)l[c].innerHTML=h[c];r.classList.remove("sharing")})).catch((function(e){for(a&&a(e),Y.U5C(),c=0;c<l.length;c++)l[c].innerHTML=h[c];r.classList.remove("sharing")}))}function n(e){var t;if("te","xt-anchor","fon","t-va","rian","t","f","ill","dom","ina","nt-baseline",e.style)for(var i in t=getComputedStyle(e),["alignment-baseline","dominant-baseline","fill","fill-opacity","font-family","font-size","font-variant","font-weight","text-align","text-anchor"].forEach((function(i){!e.style[i]&&t[i]&&(e.style[i]=t[i])})),e.children)n(e.children[i])}Y.O5C(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:e.CIQ).Share=t.Share||function(){},t.Share.FullChart2PNG=function(e,t,n){if(e&&e.chart){if("undefined"==typeof html2canvas)return a((function(){return r(e,t,n)}));i=html2canvas,Y.U5C(),r(e,t,n)}},t.Share.createImage=function(e,i,a){var r,n,s,o,l,h,c,u;r=[].slice.call(arguments),a=r.pop(),null!==i&&"object"==R(i)||(i={widthPX:r[1],heightPX:r[2],imageType:r[3]}),n=i.widthPX,s=i.heightPX,Y.O5C(),o=i.imageType,l=e.chart.canvas.height,h=e.chart.canvas.width,e.chart.canvas.style.height&&(l=t.stripPX(e.chart.canvas.style.height),h=t.stripPX(e.chart.canvas.style.width)),n&&s?(l=s,h=n):s?h=e.chart.canvas.width*(l/e.chart.canvas.height):n&&(h=n,l=e.chart.canvas.height*(n/e.chart.canvas.width)),c=o?"image/"+o:"image/png",(u=document.createElement("img")).onload=function(){Y.O5C(),t.Share.FullChart2PNG(e,{image:this,width:h,height:l,hide:i.hide},(function(e,t){if(e)Y.c3g(1),console.warn(Y.l3g("Error producing canvas snapshot: ",e));else try{a(t.toDataURL(c))}catch(e){console.warn("Safari devices do not handle CORS enabled images. Using the charts' canvas as a fallback."),a(u.src)}}))},u.src=e.chart.canvas.toDataURL(c)},t.Share.uploadImage=function(e,i,a,r){a||(a={}),a.image=e,t.postAjax(i,JSON.stringify(a),(function(e,t){200==e?(Y.U5C(),r(null,t)):r(e,null)}))||r(0,null)},t.Share.shareChart=function(e,i,a){t.Share.createImage(e,{},(function(r){var n,s,o,l,h,c=Y;if("/up","load/",n=t.uniqueID(),s="https://share.chartiq.com",c.x3g(36),o=c.l3g(s,"/upload/",n),i&&(i.host&&(s=i.host),i.path)){c.c3g(120);var u=c.l3g(9595,98124,163540,20,3);c.x3g(104);var d=c.I3g(6,584,5256);c.c3g(121);c.I3g(89370,3,19,5084160);o=s+i.path+(u<d?"E":"/")+n}l=e.getStartDateOffset(),h={id:n,image:r,config:{layout:e.exportLayout(),drawings:e.exportDrawings(),xOffset:l,startDate:e.chart.dataSegment[l].Date,endDate:e.chart.dataSegment[e.chart.dataSegment.length-1].Date,id:n,symbol:e.chart.symbol}},t.Share.uploadImage(r,o,h,(function(e,i){null!==e?t.alert("error sharing chart: ",e):(c.x3g(1),a(c.l3g(s,i)))}))}))}},b=function(e){var t;Y.U5C(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.setRange=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H=Y;function E(e,i,a,r,n,s){var o,l;return H.O5C(),H.x3g(53),o=H.l3g("0",2147483647),H.x3g(7),l=H.I3g(i,e),t.ChartEngine.isDailyInterval(a)?o="month"==a?l/t.MONTH/r:"week"==a?l/t.WEEK/r:l/t.DAY/r:isNaN(a)||("se","cond","mill","i","seco","nd","millisecond"==n?(H.c3g(122),o=H.I3g(l,r,a)):o="second"==n?l/t.SECOND/(r*a):l/t.MINUTE/(r*a)),Math.round(o)}function N(t){var a,l,c,u,d,p,g,f,m,y,v,x,b,C,S,w;if("d","a","y","unde","fined","undefined"==R(t)&&(t=null),a=0,l=0,c=new Date,u=e.base,d=e.periodicity,p=h.layout,e.goIntoFuture&&(!n.masterData.length||s>n.masterData[n.masterData.length-1].DT)&&("g","a","p",g=n.masterData.length?n.masterData.pop():{DT:s},f=h.doCleanupGaps([g,{DT:o}],n,{cleanupGaps:"gap",noCleanupDates:!0}),h.setMasterData(n.masterData.concat(f),n,{noCleanupDates:!0}),h.createDataSet(null,null,{appending:!0})),y=(m=n.dataSet).length,m&&0!==y){if("day"===u&&d&&"day"===d.interval)a=y<(x=e.multiplier)?0:y-x,H.x3g(7),l=H.I3g(1,y);else if("today"===u&&m[y-1].DT.getDate()<c.getDate()){(b=new Date(m[y-1].DT.getTime())).getTime(),v=0;for(var k=y-1;k>=0;k--)if(m[k]&&m[k].DT.getDate()!=b.getDate()){b=new Date(+m[k+1].DT),H.c3g(1),v=H.I3g(k,1);break}a=v,H.c3g(7),l=H.l3g(1,y)}else"a","l","l",a="all"!=e.base&&(s.getTime()>=m[0].DT.getTime()||e.goIntoPast)?h.tickFromDate(s,n,null,!0):0,"all"!=e.base&&(o.getTime()<=m[y-1].DT.getTime()||e.goIntoFuture)?(l=h.tickFromDate(o,n))>y-1&&l--:(H.c3g(7),l=H.I3g(1,y));if(H.c3g(37),(C=H.I3g(l,a,1))<1)i&&i(t);else{for(var A in S=e.padding||0,l<y-1&&(S=0),w=(n.width-S)/C,h.setCandleWidth(w,n),H.O5C(),H.c3g(123),n.scroll=H.I3g(l,C,1,y),h.micropixels=1,h.panels)h.calculateYAxisMargins(h.panels[A].yAxis);e.dontSaveRangeToLayout?delete p.range:(delete e.chart,delete p.setSpan,p.range=e),h.draw(),h.changeOccurred("layout"),r||h.dispatch("periodicity",{stx:h,differentData:F,prevPeriodicity:{interval:D,periodicity:M,timeUnit:T}}),i&&i(t)}}else i&&i(t)}if(a="s",a+="tr",a+="i",a+="ng",t.isEmpty(e)&&(e={dtLeft:arguments[0],dtRight:arguments[1],padding:arguments[2],chart:arguments[3]},i=arguments[4]),this.staticRange&&(e.goIntoPast=e.goIntoFuture=!0),H.U5C(),e.chart||(e.chart=this.chart),void 0===e.padding&&(e.padding=0),r=!1,n=e.chart,s=R(e.dtLeft)===a?new Date(e.dtLeft):e.dtLeft,o=new Date,e.dtRight&&(o="string"==typeof e.dtRight?new Date(e.dtRight):e.dtRight),s||(l=this.standardMarketIterator(o,null,n),s=l.previous(n.maxTicks),e.periodicity||(r=!0)),n.inflectionPoint=s,this.layout.range={dtLeft:s,dtRight:o},h=this,c=0,this.quoteDriver){if(r)u=this.layout.interval,p=this.layout.timeUnit,d=this.layout.periodicity;else if(e.periodicity)u=(g=t.cleanPeriodicity(e.periodicity.period,e.periodicity.interval,e.periodicity.timeUnit)).interval,p=g.timeUnit,d=g.period;else if(f=o.getTime()-s.getTime(),this.autoPickCandleWidth.turnOn){H.c3g(2),x=H.I3g("0",1),x=this.autoPickCandleWidth.candleWidth?this.autoPickCandleWidth.candleWidth:this.chart.barsHaveWidth?5:2,b=n.width/x,u=(C=this.dynamicRangePeriodicityMap)[0].interval,d=1;for(var z=0;z<C.length;z++){if((w=f/C[z].rangeInMS)<b){C[z-1]?(u=C[z-1].interval,p=C[z-1].timeUnit,H.c3g(8),d=Math.ceil(H.l3g(S,b))):(u=C[z].interval,p=C[z].timeUnit,d=1);break}S=w}}else{m=this.staticRangePeriodicityMap,y=null;for(var B=0;B<m.length;B++)if(f/(v=m[B]).rangeInMS<1.001){y=v;break}u=y.interval,d=y.periodicity,p=y.timeUnit}k=this.chart.scroll,A=this.layout.candleWidth,D=this.layout.interval,M=this.layout.periodicity,T=this.layout.timeUnit,this.chart.scroll=this.chart.maxTicks=E(o.getTime(),s.getTime(),u,d,p,this.dontRoll),this.layout.candleWidth=this.chart.width/this.chart.maxTicks,F=this.needDifferentData({period:d,interval:u,timeUnit:p}),Object.keys(this.chart.endPoints).length&&(this.chart.endPoints.begin>s||this.chart.endPoints.end<o)&&(F=!0),!this.chart.masterData||!this.chart.masterData.length||F||e.forceLoad?(_="t",_+="ic",_+="k",this.layout.interval=u,this.layout.periodicity=d,this.layout.timeUnit=p,this.layout.timeUnit||(P="t",P+="ick",V="s",V+="e",V+="c",V+="ond",t.ChartEngine.isDailyInterval(this.layout.interval)?this.layout.timeUnit=null:this.layout.interval==V?this.layout.timeUnit="second":this.layout.interval!=P&&(this.layout.timeUnit="minute")),O={symbol:n.symbol,symbolObject:n.symbolObject,chart:n,nodraw:!0},this.layout.interval==_&&(O.startDate=s,O.endDate=o),this.displayInitialized||(O.initializeChart=!0),"month"!=(I={symbol:n.symbol,symbolObject:n.symbolObject,interval:this.layout.interval}).interval&&"week"!=I.interval||this.dontRoll||(I.interval="day"),L=Math.max(this.quoteDriver.getQuoteFeed(I).behavior.bufferSize+50,200),l=this.standardMarketIterator(s,null,n),O.startDate=new Date(l.previous(L).getTime()),l=this.standardMarketIterator(o,null,n),O.endDate=new Date(l.next(L).getTime()),O.endDate<Date.now()&&(this.isHistoricalModeSet=!0),this.clearCurrentMarketData(this.chart),clearTimeout(this.streamParameters.timeout),this.quoteDriver.newChart(O,U)):(this.layout.interval==u&&this.layout.periodicity==d&&this.layout.timeUnit==p&&this.chart.dataSegment&&this.chart.dataSegment[0]&&this.chart.dataSegment[0].DT==n.inflectionPoint||(this.layout.interval=u,this.layout.periodicity=d,this.layout.timeUnit=p,this.createDataSet()),U())}else N();function U(e){return e&&0===c?(n.scroll=k,h.setCandleWidth(A),h.layout.interval=D,h.layout.periodicity=M,h.layout.timeUnit=T,void(i&&i(e))):++c>10?(console.log("CIQ.ChartEngine.setRange(): Too many loads (10) from server. Stopping. Check periodicity logic."),void N()):void N()}},t.ChartEngine.prototype.setSpan=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S;function w(e,t){return Y.O5C(),y?(7,t?e.setHours(e.getHours()+7):(e.setHours(e.getHours()-7),c.isMarketDate(e)||e.setDate(e.getDate()-2)),e):e}if(a="m",a+="o",a+="n",a+="th",r="t",r+="o",r+="d",r+="ay",n="a",n+="l",n+="l",s=arguments[0],o=arguments[1],l=arguments[2],h=arguments[3],"object"==R(e)?(s=e.period?e.period:e.multiplier?e.multiplier:1,o=e.interval?e.interval:e.base?e.base:e.span?e.span:e.period,l=e.padding,h=e.chart):(e={period:s,interval:o,padding:l,chart:h},i=arguments[5]),h||(h=this.chart),c=h.market,(o=o.toLowerCase())==n)return e.dontSaveRangeToLayout=!0,void this.displayAll(e,i);function k(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}d=o,p=1,o==r?d="day":"year"==o&&(d="month",p=12),g=t.shallowClone(e),m=(f={begin:c.marketZoneNow(),interval:d,period:p}).begin,y=t.Market.Symbology.isForexSymbol(h.symbol),"ytd"===o?((m=k(m)).setMonth(0),m.setDate(1)):o===a?(m=k(new Date)).setMonth(m.getMonth()-s):"year"===o?(m=k(new Date)).setFullYear(m.getFullYear()-s):"week"===o?(m=k(new Date)).setDate(m.getDate()-7*s):"day"===o&&1==s&&c.isMarketDay()?(v=m.getHours(),x=m.getMinutes(),b=m.getSeconds(),C=m.getMilliseconds(),(m=(u=c.newIterator(f)).previous()).setHours(v,x,b,C),m=c._convertFromMarketTZ(m)):"today"===o?(f.begin=w(m,!0),u=c.newIterator(f),(c.isOpen()||c.getPreviousOpen().getDate()==m.getDate())&&u.next(),w(m=u.previous()),g.goIntoFuture=!0,g.dtRight=new Date(+m),g.dtRight.setDate(m.getDate()+1),g.dtRight=c._convertFromMarketTZ(g.dtRight),y||(m.setHours(u.market.zopen_hour),m.setMinutes(u.market.zopen_minute),m.setSeconds(0)),m=c._convertFromMarketTZ(m)):("day"==o&&(f.begin=w(m,!0)),u=c.newIterator(f),1==s&&s++,Y.x3g(7),m=u.previous(Y.I3g(1,s)),"day"==o&&(m=c._convertFromMarketTZ(w(m)))),g.dtLeft=m,g.maintainPeriodicity&&(g.periodicity={},g.periodicity.interval=this.layout.interval,g.periodicity.period=this.layout.periodicity),h.spanLock=!1,g.dontSaveRangeToLayout=!0,S=this,this.setRange(g,(function(t){S.layout.setSpan=e,S.changeOccurred("layout"),Y.U5C(),"today"==o&&(h.spanLock=!0),i&&i(t)}))},t.ChartEngine.prototype.getSpanCandleWidth=function(e){var t,i,a,r,n,s=Y;if("YT","D","we","ek",e&&e.base&&e.multiplier){t=parseFloat(e.multiplier),s.O5C(),i=e.base,a=new Date,r=new Date,"year"==i?r.setFullYear(r.getFullYear()-t):"month"==i?r.setMonth(r.getMonth()-t):"day"==i?r.setDate(r.getDate()-t):"week"==i?r.setDate(r.getDate()-7*t):"YTD"==i&&(r.setMonth(0),r.setDate(1)),s.x3g(6);var o=s.l3g(1,17,7,1011);s.c3g(1);var l=s.I3g(47,13);s.c3g(19);var h=s.I3g(168,20,3336);return n=(a.getTime()-r.getTime())/o/60/l/h,s.c3g(113),n=s.l3g(7,n,5),this.chart.width/n}},t.ChartEngine.prototype.displayAll=function(e,i){var a,r,n;var s=this.chart,o=this.layout;function l(){var r;s.masterData&&s.masterData.length&&((r=t.clone(e)).dtLeft=s.endPoints.begin.DT,r.dtRight=s.endPoints.end.DT,Y.O5C(),r.periodicity={},r.periodicity.interval=o.interval,r.periodicity.period=o.periodicity,r.periodicity.timeUnit=o.timeUnit,a.setRange(r,(function(t){for(var r in a.layout.setSpan={base:e.base,multiplier:e.multiplier},a.changeOccurred("layout"),Y.U5C(),a.panels)a.calculateYAxisMargins(a.panels[r].yAxis);a.draw(),i&&i(t)})))}function h(e){Y.U5C(),e||a.quoteDriver.loadAll(s,l)}e&&e.chart&&(s=e.chart),Y.O5C(),a=this,this.quoteDriver?(r=e.maintainPeriodicity?{period:o.periodicity,interval:o.interval,timeUnit:o.timeUnit}:{period:1,interval:"month",timeUnit:null},r=e.periodicity?e.periodicity:r,r=t.cleanPeriodicity(r.period,r.interval,r.timeUnit),n=this.needDifferentData(r),this.layout.periodicity=r.period,this.layout.interval=r.interval,this.layout.timeUnit=r.timeUnit,e.forceLoad||n?(this.clearCurrentMarketData(this.chart),this.quoteDriver.newChart({noDraw:!0,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,chart:this.chart,initializeChart:!0,fetchMaximumBars:!0},h)):s.moreAvailable||!s.upToDate?h():(this.createDataSet(),l())):l()}},C=function(e){var t;Y.O5C(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.importLayout=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L;if(e){for(var H in a=this,r=[],"object"!==R(i)&&(i={managePeriodicity:arguments[1],preserveTicksAndCandleWidth:arguments[2]}),n=this.layout,s=t.shallowClone(n),o=i.managePeriodicity,l=i.cb,h=i.seriesCB,c=i.noDataLoad,u=i.preserveTicksAndCandleWidth,d=null,this.exportDrawings&&(d=this.exportDrawings(),this.abortDrawings()),this.currentlyImporting=!0,n.studies)p=n.studies[H],t.getFn("Studies.removeStudy")(this,p);for(y in this.overlays={},g=t.shallowClone(this.panels),this.panels={},f=t.clone(e),n.periodicity=s.periodicity,n.interval=s.interval,n.timeUnit=s.timeUnit,n.setSpan=s.setSpan,n.range=s.range,u?n.candleWidth=s.candleWidth:n.candleWidth||(n.candleWidth=8),this.setCandleWidth(n.candleWidth),n.flipped&&this.flipChart(n.flipped),b=function(e,t){return Y.O5C(),e.index<t.index?-1:1},m=f.panels)C="i",C+="nd",C+="e",(C+="x")in m[y]||(b=null),(v=m[y]).name=y,r.push(v);if(n.panels={},S=null,r.length>0){b&&r.sort(b);for(var E=0;E<r.length;++E)x=(v=r[E]).yAxis?new t.ChartEngine.YAxis(v.yAxis):null,this.stackPanel(v.display,v.name,v.percent,v.chartName,x),v.soloing&&(S=this.panels[v.name])}for(var N in t.isEmpty(m)&&(w="char",w+="t",k="c",k+="h",k+="ar",k+="t",this.stackPanel(k,w,1,"chart")),this.resizeCanvas(),g)if(A=g[N],D=this.panels[N]){for(var z in this.container.removeChild(D.holder),A.handle&&this.container.removeChild(A.handle),{holder:!0,subholder:!0,display:!0,icons:!0})D[z]=A[z];this.configurePanelControls(D),A.chart.panel==A&&(A.chart.panel=D)}else this.privateDeletePanel(A);for(var B in this.chart.panel=this.panels.chart,j(this.panels),t.dataBindSafeAssignment(n,t.clone(f)),M=t.clone(n.studies),delete n.studies,M)T=M[B],t.getFn("Studies.addStudy")(this,T.type,T.inputs,T.outputs,T.parameters,T.panel);if(this.extendedHours&&this.extendedHours.prepare(n.extended,n.marketSessions),void 0===n.chartType&&(n.chartType="line"),this.setMainSeriesRenderer(),Y.O5C(),S&&this.panelSolo(S),this.adjustPanelPositions(),j(this.panels),this.storePanels(),!c){if(f.symbols&&f.symbols.length)return F={chart:this.chart},!u&&o&&f.range&&Object.keys(f.range).length?F.range=f.range:!u&&o&&f.setSpan&&Object.keys(f.setSpan).length?F.span=f.setSpan:o&&f.interval?F.periodicity={interval:f.interval,period:f.periodicity,timeUnit:f.timeUnit}:F.periodicity={interval:s.interval,period:s.periodicity,timeUnit:s.timeUnit},_=f.symbols[0].symbolObject||f.symbols[0].symbol,void this.loadChart(_,F,(function(e){var i,r;if(!e){for(var n,s=1;s<f.symbols.length&&a.addSeries;++s)(n=f.symbols[s]).parameters||(n.parameters={}),i=t.clone(n.parameters),this.panels[i.panel]?a.addSeries(n.id,i,W):(r='" could not be imported due to a missing corres',r+="pon",r+='ding panel "',console.warn('Warning: Series "'+n.id+r+i.panel+'"'));f.chartScale&&a.setChartScale(f.chartScale)}U(e),l&&l.apply(null,arguments)}));if(o){if(P="d",P+="a",P+="y",!u&&this.setRange){if((V=f.range)&&Object.keys(V).length&&this.chart.symbol)return void this.setRange(V,(function(){U(),Y.U5C(),l&&l()}));if(f.setSpan&&Object.keys(f.setSpan).length&&this.chart.symbol)return void this.setSpan(f.setSpan,(function(){U(),Y.U5C(),l&&l()}))}return O=f.interval,I=f.periodicity,L=f.timeUnit,isNaN(I)&&(I=1),O||(O=P),void this.setPeriodicity({period:I,interval:O,timeUnit:L},(function(){U(),Y.U5C(),l&&l()}))}}o&&(n.periodicity=f.periodicity,n.interval=f.interval,n.timeUnit=f.timeUnit,n.setSpan=f.setSpan),this.createDataSet(),u||this.home(),U(),l&&l()}else i.cb&&i.cb();function U(e){var t,i,r;if("l","a","yo","ut",d&&a.importDrawings(d),a.currentlyImporting=!1,!e){for(var n in r=[],Y.U5C(),a.chart.series){if(!a.removeSeries)break;"study"==(i=a.chart.series[n]).parameters.bucket&&(t=!0,a.removeSeries(i),r.push(i))}for(var s=0;s<r.length;s++)i=r[s],a.addSeries(i.id,i.parameters,o);t||a.draw(),a.updateListeners("layout"),a.changeOccurred("layout")}function o(){a.createDataSet(),j(a.panels),a.calculateYAxisPositions(),a.draw()}}function j(e){for(var t,i=0;i<r.length;i++)"ya","x","isLHS",n(t=r[i],"yaxisLHS"),n(t,"yaxisRHS");function n(t,i){var a,r,n,o;if(t[i]&&t[i].length&&(a=e[t.name],Y.O5C(),a)){r=a[i],n=new Array(r.length);for(var l=0;l<r.length;l++)(o=t[i].indexOf(r[l].name))>-1?n[o]=r[l]:n.push(r[l]);n.length&&(a[i]=n.filter(s))}}function s(e){Y.U5C();for(var t=1;693466677!==Y.M86(t.toString(),t.toString().length,24792);t++)return~+e;if(370972084!==Y.I86(2..toString(),2..toString().length,3760))return!!e}a.chart.yAxis=a.chart.panel.yAxis,Y.O5C()}function W(){a.calculateYAxisPositions(),j(a.panels),Y.U5C(),h&&h()}},t.ChartEngine.prototype.exportLayout=function(e){var i,a,r,n,s,o,l,h,c=Y;function u(e){var t;c.U5C(),t=[];for(var i=0;i<e.length;i++)t.push(e[i].name);return t}for(var d in i={},this.layout)"p","an","els","stud","ies","dra","w","i","ng","studies"!=d&&"panels"!=d&&"drawing"!=d?i[d]=t.clone(this.layout[d]):"studies"==d?i.studies={}:"panels"==d&&(i.panels={});for(var p in a=0,this.panels)!1!==(r=this.panels[p]).exportable&&((n=i.panels[p]={}).percent=r.percent,n.display=r.display,n.chartName=r.chart.name,n.soloing=r.soloing,n.index=a++,n.yAxis={name:r.yAxis.name,position:r.yAxis.position},r.yaxisLHS&&(n.yaxisLHS=u(r.yaxisLHS)),r.yaxisRHS&&(n.yaxisRHS=u(r.yaxisRHS)));for(var g in this.layout.studies)s=i.studies[g]={},o=this.layout.studies[g],s.type=o.type,s.inputs=t.clone(o.inputs),s.outputs=t.clone(o.outputs),s.panel=o.panel,s.parameters=t.clone(o.parameters);if(e)i.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!0,"exclude-generated":!0});else{-528854526,c.c3g(0),l=-c.I3g("509853821",0),h=2;for(var f=1;-528854526!==c.I86(f.toString(),f.toString().length,53313);f++)i.symbols,h+=2;c.I86(h.toString(),h.toString().length,8809)!==l&&delete i.symbols}return i},t.ChartEngine.prototype.importPreferences=function(e){t.extend(this.preferences,e),e.timeZone&&this.setTimeZone(this.dataZone,e.timeZone),e.language&&t.I18N&&t.I18N.localize(this,e.language),this.changeOccurred("preferences")},t.ChartEngine.prototype.exportPreferences=function(){return Y.O5C(),this.preferences}},S=function(e){var t,i;t="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.ChartEngine&&(t.ChartEngine.prototype.rightClickOverlay=function(e,t){var i;this.runPrepend("rightClickOverlay",arguments)||(Y.O5C(),(i=this.overlays[e]).editFunction?i.editFunction(t):this.removeOverlay(e),this.runAppend("rightClickOverlay",arguments))},t.ChartEngine.prototype.addOverlay=function(e){var t,i;t="addOve",t+="rlay",i="addO",i+="verlay",this.runPrepend(i,arguments)||(Y.U5C(),this.overlays[e.name]=e,this.runAppend(t,arguments))},t.ChartEngine.prototype.removeOverlay=function(e){var i,a,r;if(!this.runPrepend("removeOverlay",arguments)){for(var n in i=this.overlays[e],this.overlays){a=this.overlays[n],r=["Field"],t.Studies&&(r=t.Studies.getFieldInputs(a));for(var s=0;s<r.length;s++)i.outputMap[a.inputs[r[s]]]&&this.removeOverlay(a.name)}i&&(this.cleanupRemovedStudy(i),this.panels[i.panel],delete this.overlays[e],this.checkForEmptyPanel(i.panel)),this.currentlyImporting||(this.displaySticky(),this.createDataSet(),this.changeOccurred("layout")),this.resetDynamicYAxis(),this.runAppend("removeOverlay",arguments)}},t.ChartEngine.prototype.cleanupRemovedStudy=function(e){if(e){for(var i in e.study.removeFN&&e.study.removeFN(this,e),this.plugins)i.indexOf("{"+e.id+"}")>-1&&delete this.plugins[i];this.layout.studies&&delete this.layout.studies[e.name],delete this.overlays[e.name],t.Studies&&t.Studies.removeStudySymbols(e,this),Y.U5C(),this.quoteDriver&&this.quoteDriver.updateSubscriptions()}}),t.Studies=t.Studies||function(){},t.Studies.DEFAULT_INPUTS={Period:14},t.Studies.DEFAULT_OUTPUTS={Result:"auto"},Y.O5C(),t.Studies.sortForProcessing=function(e){var t,i;return t=[],(i=e.layout.studies)&&function t(i,a){Y.O5C(),i.forEach((function(i){var r;-1==a.indexOf(i)&&((r=i.getDependents(e)).length&&t(r,a),a.unshift(i))}))}(Object.values(i),t),Y.U5C(),t},t.Studies.StudyDescriptor=function(e,i,a,r,n,s){var o;this.name=e,this.type=i,this.panel=a,this.inputs=r,this.outputs=n,this.parameters=s,this.outputMap={},this.min=null,this.max=null,Y.c3g(7),this.startFrom=Y.I3g(0,"0"),this.subField="Close",(o=t.Studies.studyLibrary[i])||("c","hart",o={},("chart"==a||!a&&s&&"chart"==s.chartName)&&(this.overlay=!0)),void 0===o.inputs&&(o.inputs=t.clone(t.Studies.DEFAULT_INPUTS)),void 0===o.outputs&&(o.outputs=t.clone(t.Studies.DEFAULT_OUTPUTS)),this.study=o,this.libraryEntry=o},t.Studies.StudyDescriptor.prototype.getYAxis=function(e){var t,i,a;return Y.O5C(),t=this.yAxis,this.parameters&&(i=this.parameters.yaxisDisplayValue),t||(a=e.panels[this.panel])&&(t=e.getYAxisByName(a,i)||e.getYAxisByName(a,this.name)||a.yAxis),t||(t=e.getYAxisByName(e.chart.panel,i)||e.chart.panel.yAxis),t},t.Studies.StudyDescriptor.prototype.getContext=function(e){return e.chart.context},t.Studies.StudyDescriptor.prototype.getDependents=function(e,i){var a,r,n;for(var s in a=[],e.layout.studies)if((r=e.layout.studies[s])!=this){n=t.Studies.getFieldInputs(r);for(var o=0;o<n.length;o++)if(r.inputs[n[o]].includes(this.name)){if(i&&r.parameters&&r.parameters.panelName)continue;a.push(r),a=a.concat(r.getDependents(e,i));break}}return a},t.Studies.StudyDescriptor.prototype.undraggable=function(e){var t;if(t=this.study.attributes){if(t.panelName&&t.panelName.hidden)return!0;if(t.yaxisDisplayValue&&t.yaxisDisplayValue.hidden)return!0}return!1},t.Studies.StudyDescriptor.prototype.appendFutureTicks=function(e,t){var i,a,r,n;if((i=e.chart.scrubbed).length){for(a=e.standardMarketIterator(i[i.length-1].DT),r=t.length-1;r>=0;r--){for(var s in n=t[r])if(n[s]||0===n[s]){r=-1;break}if(-1==r)break;t.pop()}for(r=0;r<t.length;r++)(n=t[r]).DT||(n.DT=a.next()),n.displayDate||e.setDisplayDate(n),n.futureTick=!0,i.push(n)}},t.Studies.generateID=function(e,i,a,r,n){var s,o,l,h,c,u,d,p=Y;if(s=t.Studies.studyLibrary[i],p.x3g(36),o=p.l3g("‌",n||i,"‌"),p.U5C(),s&&s.customRemoval)return o;if(!t.isEmpty(a)){for(var g in l=!0,a)"fie","ld",h="Anc",c="Shadi",["id","display",c+="ng",h+="hor Selector"].includes(g)||"field"!=(u=a[g])&&(u=u.toString(),void 0!==t.Studies.prettify[u]&&(u=t.Studies.prettify[u]),l?(l=!1,o+=" ("):u&&(o+=","),o+=u);l||(o+=")")}if(r&&0===r.indexOf(o))return r;if(e.layout.studies&&e.layout.studies[o])for(var f=2;f<50;f++)if(p.c3g(36),d=p.l3g(o,"-",f),!e.layout.studies[d]){o=d;break}return o},t.Studies.DialogHelper=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_=Y;function P(e,t){_.U5C(),this.attributes[e]||(this.attributes[e]={}),t&&(this.attributes[e].hidden=!0)}for(var V in"undefin","ed",i=this.stx=e.stx,a=this.sd=e.sd,this.name=a?a.type:e.name,this.signal=1,this.inputs=[],this.outputs=[],this.parameters=[],void 0===(r=this.libraryEntry=a?a.study:t.Studies.studyLibrary[e.name]).inputs&&(r.inputs=t.clone(t.Studies.DEFAULT_INPUTS)),"undefined"==R(r.outputs)&&(r.outputs=t.clone(t.Studies.DEFAULT_OUTPUTS)),s=(n=a&&i.panels[a.panel]?i.panels[a.panel]:i.chart.panel).chart,this.title=i.translateIf(r.name),this.attributes=t.clone(r.attributes),this.attributes||(this.attributes={}),this.attributes)for(var O in o=this.attributes[V])"function"==typeof o[O]&&(o[O]=o[O].call(a));function I(e){var t;if("alias"==M)for(var a in t=1,i.panels){if(a==e)return r(a,t);t++}function r(e,t){return"P","an","el",_.O5C()," ","Panel "+t.toString()}return _.O5C(),e}for(var L in l=[],h=i.layout.studies,c=[],a&&(c=Array.prototype.concat(a,a.getDependents(i))),h)if(!(c.indexOf(h[L])>-1))for(var H in h[L].outputMap)l.push(H);for(var E in r.inputs)if(u={},this.inputs.push(u),u.name=E,u.heading=i.translateIf(E),d=r.inputs[E],a&&a.inputs&&void 0!==a.inputs[E]&&null!==a.inputs[E]?u.value=a.inputs[E]:u.value=r.inputs[E],u.defaultInput=r.inputs[E],this.attributes[E]||(this.attributes[E]=t.Studies.inputAttributeDefaultGenerator(u.defaultInput)),d.constructor==Number)u.type="number";else if(d.constructor==String)if("f","ie","l","d",p=t.Studies.movingAverageHelper(i,u.defaultInput))"o","p","tion","s","s","ele","ct",u.type="select",u.defaultInput=p,(g=t.Studies.movingAverageHelper(i,u.value))||(g=u.value),u.value=g,u.options=t.Studies.movingAverageHelper(i,"options");else if("field"==d){f="hl",f+="c",f+="/3",m="C",m+="lose",u.type="select",u.options={},y=["Open","High","Low",m,"Adj_Close","hl/2",f,"hlcc/4","ohlc/4",s.defaultPlotField].concat(l);for(var N=0;N<y.length;N++)v=y[N],u.options[v]=i.translateIf(v);"field"==u.value&&(u.value="Close"),"field"==u.defaultInput&&(u.defaultInput="Close")}else u.type="text","yyyy-mm-dd"==this.attributes[E].placeholder?u.type="date":"hh:mm:ss"==this.attributes[E].placeholder&&(u.type="time");else if(d.constructor==Boolean)"t","r","u","e","chec","kbox",u.type="checkbox",!0!==u.value&&"true"!=u.value&&"on"!=u.value||(u.value=!0);else if(d.constructor==Array){u.type="select",u.options={};for(var z=0;z<d.length;z++)u.options[d[z]]=i.translateIf(d[z]);u.value.constructor==Array&&(u.value=u.value[0]),this.attributes[E].defaultSelected?u.defaultInput=this.attributes[E].defaultSelected:(_.c3g(53),u.defaultInput=d[_.I3g("0",2147483647)])}this.dateTimeInputs=[];for(var B=0;B<this.inputs.length;B++)if("date"==(x=this.inputs[B]).type){b=x.name.substring(0,x.name.indexOf(" Date"));for(var U=0;U<this.inputs.length;U++)if("time"==(C=this.inputs[U]).type&&C.name==b+" Time"){this.dateTimeInputs.push(b);break}}for(E in this.adjustInputTimesForDisplayZone(),r.outputs)"au","to",(S={name:E,heading:i.translateIf(E)}).color=S.defaultOutput=r.outputs[E],a&&a.outputs&&a.outputs[E]&&(S.color=a.outputs[E]),"auto"==S.color&&(S.color=i.defaultColor),this.outputs.push(S);if(w=a?a.parameters:null,r.parameters&&(k=r.parameters.init)){if(void 0!==k.studyOverZonesEnabled){"Show"," Zone","s",A={name:"studyOverZones",heading:i.translateIf("Show Zones"),defaultValue:k.studyOverZonesEnabled,value:k.studyOverZonesEnabled},w&&(w.studyOverZonesEnabled||!1===w.studyOverZonesEnabled)&&(A.value=w.studyOverZonesEnabled),536569549,1364657150,D=2;for(var j=1;536569549!==_.I86(j.toString(),j.toString().length,64893);j++)A.type="",D+=2;1364657150!==_.I86(D.toString(),D.toString().length,64805)&&("che","ckbox",A.type="checkbox"),this.parameters.push(A)}void 0!==k.studyOverBoughtValue&&("a","u","to",A={name:"studyOverBought",heading:i.translateIf("OverBought"),defaultValue:k.studyOverBoughtValue,value:k.studyOverBoughtValue,defaultColor:k.studyOverBoughtColor,color:k.studyOverBoughtColor},w&&w.studyOverBoughtValue&&(A.value=w.studyOverBoughtValue),w&&w.studyOverBoughtColor&&(A.color=w.studyOverBoughtColor),"auto"==A.color&&(A.color=i.defaultColor),A.type="text",this.parameters.push(A)),void 0!==k.studyOverSoldValue&&("studyOver","Sold",A={name:"studyOverSold",heading:i.translateIf("OverSold"),defaultValue:k.studyOverSoldValue,value:k.studyOverSoldValue,defaultColor:k.studyOverSoldColor,color:k.studyOverSoldColor},w&&w.studyOverSoldValue&&(A.value=w.studyOverSoldValue),w&&w.studyOverSoldColor&&(A.color=w.studyOverSoldColor),"auto"==A.color&&(A.color=i.defaultColor),A.type="text",this.parameters.push(A)),this.attributes.studyOverBoughtValue||(this.attributes.studyOverBoughtValue={}),this.attributes.studyOverSoldValue||(this.attributes.studyOverSoldValue={})}function W(e){return _.O5C(),"c","he","ck","box",{name:e.name,heading:i.translateIf(e.label),defaultValue:e.defaults,value:e.value,type:"checkbox"}}function Q(e){var t,a,r;t={},a=e.defaults,r={name:e.name,heading:i.translateIf(e.label),defaultValue:a[0],value:e.value,options:t,type:"select"};for(var n=0;n<a.length;n++)t[a[n]]=i.translateIf(a[n]);return void 0!==e.color&&(r.defaultColor=i.defaultColor,r.color=e.color),r}M=this.panelSelect=e.panelSelect,T=this.axisSelect=e.axisSelect,e.addWhenDone&&(T=M=!1),(T||M)&&("yaxi","sDisplayValu","e",a||(a=t.Studies.addStudy(i,e.name,null,null,{calculateOnly:!0}),t.Studies.removeStudy(i,a)),M&&("S","h","ow as Un","derlay","P","a","nel",this.parameters.push(Q({label:"Panel",name:"panelName",defaults:function(){var e;for(var t in(e=[]).push("Auto"),i.panels)t==a.panel&&w&&w.panelName||e.push(I(t));return i.checkForEmptyPanel(a.panel,!0,a)||e.push("New panel"),e}(),value:w&&w.panelName?I(w.panelName):"Auto"}),W({label:"Show as Underlay",name:"underlay",defaults:!1,value:a.underlay||a.parameters&&a.parameters.underlayEnabled}))),F=i.getYAxisByName(n,a.name),T&&("Inver","t Y","-A","xis","a","u","t","o","def","au","l","t",this.parameters.push(Q({label:"Y-Axis",name:"yaxisDisplay",defaults:function(){var e,t;_.O5C(),e=n.yaxisLHS.concat(n.yaxisRHS),(t=[]).push("default","right","left","none","shared");for(var i=0;i<e.length;i++)e[i]!=F&&t.push(e[i].name);return t}(),value:w&&w.yaxisDisplayValue||F&&F.position||(a.panel!=a.name?"shared":n.yAxis.position||"default"),color:F&&F.textStyle?F.textStyle:"auto"}),W({label:"Invert Y-Axis",name:"flipped",defaults:!1,value:w?w.flippedEnabled:!!F&&F.flipped}))),P.call(this,"flippedEnabled",!F&&a.panel!=a.name),P.call(this,"underlayEnabled",r.underlay),P.call(this,"panelName",null===r.seriesFN),P.call(this,"yaxisDisplayValue",null===r.seriesFN||r.yAxis&&r.yAxis.noDraw))},t.Studies.DialogHelper.prototype.updateStudy=function(e){var i,a,r,n;for(var s in i={},a=this.sd,(r=this.libraryEntry)||(r={}),a||(a=r),i.inputs=t.clone(a.inputs),i.outputs=t.clone(a.outputs),i.parameters=t.clone(a.parameters),this.adjustInputTimesForDisplayZone(e),e.parameters&&e.parameters.panelName&&(e.parameters.panelName=function(e){var t,i;if(Y.U5C(),"alias"==this.panelSelect&&(t=(i=e.match(/.* (\d)/))&&i[1]))for(var a in this.stx.panels)if(!--t)return a;return e}.call(this,e.parameters.panelName)),t.extend(i,e),i.parameters||(i.parameters={}),a=i.inputs&&i.inputs.id?t.Studies.replaceStudy(this.stx,i.inputs.id,this.name,i.inputs,i.outputs,i.parameters,null,a.study):t.Studies.addStudy(this.stx,this.name,i.inputs,i.outputs,i.parameters,null,a.study),n=new t.Studies.DialogHelper({stx:this.stx,sd:a,axisSelect:this.axisSelect,panelSelect:this.panelSelect}))"signal"!=s&&(this[s]=n[s]);this.signal*=-1},t.Studies.DialogHelper.prototype.adjustInputTimesForDisplayZone=function(e){var i,a,r,n,s,o,l,h,c=Y;if(c.O5C(),this.stx.displayZone)for(var u=0;u<this.dateTimeInputs.length;u++){for(i=this.dateTimeInputs[u],o="",e&&e.inputs&&(" T","i","m","e"," D","at","e",c.c3g(1),r=e.inputs[c.I3g(i," Date")],c.x3g(1),r&&(o=r),(n=e.inputs[c.l3g(i," Time")])&&(o+=n)),a=0;a<this.inputs.length;a++)" T","i","m","e"," Da","t","e",s=this.inputs[a],r||""===r||s.name!=i+" Date"?n||""===n||s.name!=i+" Time"||(o+=s.value):o=s.value+o;if((o=o.replace(/\D/g,"")).length<12)return;if(l=t.strToDateTime(o),!isNaN(l.valueOf()))if(e)" ","Ti","m","e",e.inputs||(e.inputs={}),h=t.convertTimeZone(l,this.stx.displayZone),c.c3g(1),e.inputs[c.l3g(i," Date")]=t.yyyymmdd(h),c.x3g(1),e.inputs[c.l3g(i," Time")]=t.hhmmss(h);else for(h=t.convertTimeZone(l,null,this.stx.displayZone),a=0;a<this.inputs.length;a++)(s=this.inputs[a]).name==i+" Date"&&(s.value=t.yyyymmdd(h)),s.name==i+" Time"&&(s.value=t.hhmmss(h))}},t.Studies.prepareStudy=function(e,i,a){if("und",Y.U5C(),"efined","undefined"==R(i.calculateFN)&&(i.useRawValues=!0),t.isEmpty(a.outputMap))for(var r in a.outputs)i.useRawValues?a.outputMap[r]=r:a.outputMap[r+" "+a.name]=r},t.Studies.rejiggerDerivedStudies=function(e,i,a){var r,n,s,o,l,h;Y.O5C(),r=i.name,i.panel,n=i.getDependents(e);for(var c=0;c<n.length;c++)if(s=n[c],l=(o=t.clone(s.inputs)).id){!1,h=t.Studies.getFieldInputs(s);for(var u=0;u<h.length;u++)o[h[u]]=o[h[u]].replace(r,a);delete t.Studies.replaceStudy(e,l,s.type,o,s.outputs,t.extend(s.parameters,{rejiggering:!0}),null,s.study).parameters.rejiggering}},t.Studies.removeStudySymbols=function(e,t){if(e.series)for(var i in e.series)"remo","ve-","study",t.deleteSeries(e.series[i],null,{action:"remove-study"});Y.U5C()},t.Studies.replaceStudy=function(e,i,a,r,n,s,o,l){var h,c,u,d;for(u in s||(s={}),i&&(s.replaceID=i),i=s.replaceID,h=e.layout.studies[i],t.Studies.removeStudySymbols(h,e),h.attribution&&e.removeFromHolder(h.attribution.marker),e.quoteDriver&&e.quoteDriver.updateSubscriptions(),r&&(r.id==r.display&&delete r.display,delete r.id),(c=t.Studies.addStudy(e,a,r,n,s,o,l)).highlight=h.highlight,c.uniqueId=h.uniqueId,d={},e.layout.studies)u==i?d[c.name]=c:d[u]=e.layout.studies[u];for(u in e.layout.studies=d,d={},e.overlays)u==i?(c.overlay||c.underlay)&&(d[c.name]=c):d[u]=e.overlays[u];return e.overlays=d,e.overlays[c.name]||!c.overlay&&!c.underlay||e.addOverlay(c),e.checkForEmptyPanel(h.panel),s.rejiggering||(e.initializeDisplay(e.chart),t.Studies.rejiggerDerivedStudies(e,h,c.inputs.id,c.panel),e.changeOccurred("layout"),e.currentlyImporting||s.calculateOnly||!c.chart.dataSet||e.createDataSet(null,c.chart),e.draw()),t.transferObject(h,c),e.layout.studies[c.name]=h,e.overlays[c.name]=h,e.chart.state.studies.sorted=null,h},t.Studies.addStudy=function(e,i,a,r,n,s,o){var l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N=Y;if("la","yo","u","t",l=o||t.Studies.studyLibrary[i],n||(n={}),l){if(l.inputs){for(var R in h=t.clone(l.inputs))h[R]instanceof Array&&(l.attributes&&l.attributes[R]&&l.attributes[R].defaultSelected?h[R]=l.attributes[R].defaultSelected:h[R]=h[R][0]);a=t.extend(h,a)}l.outputs&&(r=t.extend(t.clone(l.outputs),r)),(c=l.parameters)&&c.init&&(n=t.extend(t.clone(c.init),n)),c&&!n.display&&(n.display=c.display)}if(a||(a=t.clone(t.Studies.DEFAULT_INPUTS)),r||(r=t.clone(t.Studies.DEFAULT_OUTPUTS)),n.chartName||(n.chartName="chart"),"Auto"!=n.panelName&&"Default panel"!=n.panelName||(n.panelName=""),a.Period<1&&(a.Period=1),u=null,e.layout.studies||(e.layout.studies={}),!(u=l&&l.initializeFN?l.initializeFN(e,i,a,r,n,s,o):t.Studies.initializeFN(e,i,a,r,n,s,o)))return"CIQ.Studies.","addStudy: initializeFN() returned null for ",N.x3g(1),void console.log(N.l3g("CIQ.Studies.addStudy: initializeFN() returned null for ",i));if(o=u.study,u.chart=e.charts[n.chartName],u.type=i,u.permanent=o.permanent,u.customLegend=o.customLegend,u.uniqueId=t.uniqueID(),t.Studies.prepareStudy(e,o,u),(d=e.chart.state.studies)||(d=e.chart.state.studies={}),d.sorted=null,n.replaceID?(p=!0,delete n.replaceID):(e.layout.studies[u.inputs.id]=u,(u.overlay||u.underlay)&&e.addOverlay(u),e.currentlyImporting||n.calculateOnly||!u.chart.dataSet||e.createDataSet(null,u.chart)),e.quoteDriver&&e.quoteDriver.updateSubscriptions(),n.calculateOnly)return e.changeOccurred("layout"),u;if(g=e.panels[u.panel],f=!1,(m=!(u.overlay||u.underlay))&&o.horizontalCrosshairFieldFN&&(g.horizontalCrosshairField=o.horizontalCrosshairFieldFN(e,u)),e.editCallback?f=!0:m?e.callbackListeners.studyPanelEdit&&e.callbackListeners.studyPanelEdit.length&&(f=!0):e.callbackListeners.studyOverlayEdit&&e.callbackListeners.studyOverlayEdit.length&&(f=!0),f){for(var z in n.editMode=!0,y=!1,u.inputs)if("dis","pl","ay","id"!=z&&"display"!=z){y=!0;break}if(!y)for(var B in u.outputs){y=!0;break}if(y)if(void 0!==u.study.edit)u.study.edit&&(I=e,L=u,H=a,E=r,v=function(){t.clearCanvas(I.chart.tempCanvas,I),N.U5C(),L.study.edit(L,{stx:I,inputs:H,outputs:E,parameters:n})},e.setPanelEdit(g,v),u.editFunction=v);else if(m){if(e.editCallback)"c","har","t",A=e,D=u,M=a,T=r,v=function(){var e;N.U5C(),e=A.editCallback(A,D),t.clearCanvas(A.chart.tempCanvas,A),t.Studies.studyDialog(A,i,e,{inputs:M,outputs:T,parameters:n})},"chart"!=g.name&&e.setPanelEdit(g,v);else if(b=e,C=u,S=a,w=r,k=n,v=function(){t.clearCanvas(b.chart.tempCanvas,b),b.dispatch("studyPanelEdit",{stx:b,sd:C,inputs:S,outputs:w,parameters:k})},"chart"!=g.name){-1246191620,-1365244420,x=2;for(var U=1;-1246191620!==N.I86(U.toString(),U.toString().length,72042);U++)e.setPanelEdit(g,v),u.editFunction=v,N.x3g(2),x+=N.l3g("2",1);-1365244420!==N.M86(x.toString(),x.toString().length,51199)&&(e.setPanelEdit(g,v),u.editFunction=v)}}else F=e,_=u,P=a,V=r,O=n,N.O5C(),v=function(e){t.clearCanvas(F.chart.tempCanvas,F),N.O5C(),F.dispatch("studyOverlayEdit",{stx:F,sd:_,inputs:P,outputs:V,parameters:O,forceEdit:e})},u.editFunction=v}return e.changeOccurred("layout"),p||e.draw(),u},t.Studies.removeStudy=function(e,t){var i,a,r,n;a=(i=e.panels[t.panel])&&i.yAxis.name,(t.overlay||t.underlay)&&e.removeOverlay(t.name),r=e.panels[t.panel],t.attribution&&e.removeFromHolder(t.attribution.marker),delete e.layout.studies[t.name],r&&!e.checkForEmptyPanel(r)&&(a==t.name&&e.electNewPanelOwner(r),(n=e.getYAxisByName(t.panel,t.name))&&(n.name=n.studies[1]||n.renderers[0])),e.draw(),e.resizeChart()},t.Studies.getPanelFromFieldName=function(e,i){var a,r,n,s,o;if(!(a=t.Studies.getFieldInputs(i)).length)return null;if(!(r=e.layout.studies))return null;for(var l in n={},r)for(var h in r[l].outputMap)n[h]=r[l].panel;for(var c=0;c<a.length;c++)if((s=i.inputs[a[c]])&&(o=n[s]))return o;return null},t.Studies.createLibraryHash=function(){return Object.keys(t.Studies.studyLibrary).join("|")},t.Studies.displayStudies=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,f,m,y;if(a&&(i.studyLibraryHash=t.Studies.createLibraryHash()),Y.O5C(),r=e.layout.studies)for(var v in(n={})[i.name]=!0,r)if("undef","ined",(o=(s=r[v]).study)&&(l=s.underlay||s.parameters&&s.parameters.underlayEnabled,!(a&&!l||!a&&l)))if(!(h=t.clone(o.renderer))||h instanceof Array||(h=[h]),c=e.panels[s.panel]){if(c.chart==i&&!c.hidden)if(n[c.name]||(u=s.permanent||!e.manageTouchAndMouse,c.closeX?u&&(c.closeX.style.display="none"):c.close&&u&&(c.close.style.display="none"),c.edit&&("n","one",u&&(c.edit.style.display="none")),n[c.name]=u),d=s.chart.dataSegment,s.panel!=s.parameters.chartName||s.parameters&&s.parameters.panelName||(p=t.Studies.getPanelFromFieldName(e,s))&&s.panel!=p&&(s.panel=p),"undefined"==R(o.seriesFN)){if(h){s.overlay||t.Studies.createYAxis(e,s,d,c);for(var x=0;x<h.length;x++){for(var b in g=h[x],s.outputMap)s.outputMap[b]==g.field&&(g.field=b);if(g.field){if(g.panel=s.panel,f=g.binding)for(var C in f)(m=t.Studies.determineColor(s.outputs[f[C]]))&&"auto"!=m&&(g[C]=m);g.yAxis=null,(y=t.Renderer.produce(g.type,g)).stx=e,y.attachSeries(null,g).draw()}}}else t.Studies.displaySeriesAsLine(e,s,d);c&&t.Studies.displayError(e,s)}else o.seriesFN&&c&&(o.seriesFN(e,s,d),t.Studies.displayError(e,s))}else e.currentlyImporting&&delete r[v]},t.Studies.displayError=function(e,t,i){var a,r;t.error&&(a=i&&i.panel?i.panel:t.panel,r=!0===t.error?e.translateIf("Not enough data to compute ")+e.translateIf(t.study.name):e.translateIf(t.error),!i||"center"===i.h&&"bottom"===i.v?e.displayErrorAsWatermark(a,r):e.watermark(a,i))},t.Studies.calculateMinMaxForDataPoint=function(e,t,i){var a,r,n,s,o=Y;a=Number.MAX_VALUE,r=2;for(var l=1;1657604226!==o.I86(l.toString(),l.toString().length,37254);l++){o.x3g(1);var h=o.l3g(3,3);n=Number.MAX_VALUE/!h,o.x3g(35),r+=o.I3g(890124608,"2")}815988542!==o.M86(r.toString(),r.toString().length,24838)&&(n=Number.MAX_VALUE+-8),o.c3g(7);var c=o.I3g(1,0);n=Number.MAX_VALUE*c;for(var u=0;u<i.length;u++)null!=(s=i[u][t])&&(isNaN(s)||(a=Math.min(s,a),n=Math.max(s,n)));return{min:a,max:n}},t.Studies.getYAxisParameters=function(e,t){var i,a,r;return i={},a=e.layout.studies&&e.layout.studies[t.name],Y.U5C(),a&&((r=a.study).yaxis||r.yAxisFN?i.noDraw=!0:(r.parameters&&r.parameters.excludeYAxis&&(i.noDraw=!0),i.ground=r.yAxis&&r.yAxis.ground,t&&("bypass"!=r.range&&("0 to 100"==r.range?i.range=[0,100]:"-1 to 1"==r.range?(Y.c3g(0),i.range=[-Y.l3g("1",0),1]):("0"," to ","m","ax","0 to max"==r.range?i.range=[0,Math.max(0,t.high)]:(r.centerline||0===r.centerline)&&(i.range=[Math.min(r.centerline,t.low),Math.max(r.centerline,t.high)]))),i.range&&(t.low=i.range[0],t.high=i.range[1]),a.min&&(t.min=a.min),a.max&&(t.max=a.max),a.parameters&&a.parameters.studyOverZonesEnabled&&(i.noDraw=!0)))),i},t.Studies.doPostDrawYAxis=function(e,i){var a,r,n,s;for(var o in Y.O5C(),e.layout.studies)a=e.layout.studies[o],(r=e.panels[a.panel])&&!r.hidden&&a.getYAxis(e)==i&&(n=a.study,i.name==a.name&&(n.yaxis&&n.yaxis(e,a),n.yAxisFN&&n.yAxisFN(e,a)),t.Studies.drawZones(e,a),a.error||((s=n.centerline)||0===s||null!==s&&i.highValue>0&&i.lowValue<0)&&t.Studies.drawHorizontal(e,a,null,s||0,i))},t.Studies.displaySeriesAsLine=function(e,i,a){var r;if(a.length&&(r=e.panels[i.panel])&&!r.hidden)for(var n in Y.O5C(),i.outputMap)t.Studies.displayIndividualSeriesAsLine(e,i,r,n,a)},t.Studies.displaySeriesAsHistogram=function(e,t,i){var a,r,n,s,o,l,h,c,u,d;if("overla","id",i.length&&(a=e.panels[t.panel])&&!a.hidden){for(var p in r=[],t.outputMap)(n=t.outputs[t.outputMap[p]])&&(s=.3,"object"==R(n)&&(s=n.opacity,n=n.color),o={field:p,fill_color_up:n,border_color_up:n,fill_color_down:n,border_color_down:n},t.underlay&&(o.opacity_up=o.opacity_down=s||.3),r.push(o));l=t.getYAxis(e),c=(h=t.inputs).WidthFactor,t.study&&t.study.parameters&&void 0!==(u=t.study.parameters).widthFactor&&(c=u.widthFactor),d={name:t.name,type:h.HistogramType?h.HistogramType:"overlaid",panel:t.panel,yAxis:l,widthFactor:c||.5,bindToYAxis:!0,highlight:t.highlight},e.drawHistogram(d,r)}},t.Studies.displayIndividualSeriesAsLine=function(e,i,a,r,n){var s,o,l,h,c,u,d,p,g,f,m,y,v,x,b;if("trans","paren","t",a.height||(a.height=a.bottom-a.top),s=i.getContext(e),o=i.outputs[i.outputMap[r]]){if(s.save(),"string"==typeof o&&(o={color:o,width:1}),s.lineWidth=o.width||1,"auto"==(l=o.color)&&(l=e.defaultColor),s.strokeStyle=l,h=o.pattern,s.setLineDash(t.borderPatternToArray(s.lineWidth,h)),s.lineDashOffset=0,c=0,u=i.study,d=i.getYAxis(e),c=e.decimalPlacesFromPriceTick(d.priceTick),(i.overlay||i.underlay)&&(c=null),Y.U5C(),(d.decimalPlaces||0===d.decimalPlaces)&&(c=d.decimalPlaces),p=null,i.parameters&&(p=i.parameters.label),(g=u.parameters)||(g={}),f="step"==g.plotType,i.series)for(var C in i.series)"s","t","e","p",(m=i.series[C].parameters.type)&&(Y.x3g(73),f=Y.I3g("step",m));g.noLabels&&(p=!1),i.noSlopes||!1===i.noSlopes||(i.noSlopes=g.noSlopes),i.extendToEnd||!1===i.extendToEnd||(i.extendToEnd=g.extendToEnd),y=p||e.preferences.labels&&!1!==p,!1===(v=i.gaplines)&&(v="transparent"),x=i.inputs.Symbol,b=v?e.getGapColorFunction(x,r,o,v):null,e.plotDataSegmentAsLine(r,a,{yAxis:d,skipTransform:e.panels[i.panel].name!=i.chart.name,label:y,labelDecimalPlaces:c,noSlopes:i.noSlopes,step:f,alignStepToSide:i.alignStepToSide,extendToEndOfLastBar:i.extendToEndOfLastBar,width:i.lineWidth,extendToEndOfDataSet:i.extendToEnd,gapDisplayStyle:v,highlight:i.highlight},b),u.appendDisplaySeriesAsLine&&u.appendDisplaySeriesAsLine(e,i,n,r,a),s.restore()}},t.Studies.drawHorizontal=function(e,t,i,a,r,n){var s,o,l;s=e.panels[t.panel],o=e.getBackgroundCanvas().context,s&&(n||(n=r.textStyle),(l=e.pixelFromPrice(a,s,r))>r.top&&l<r.bottom&&e.plotLine(s.left,s.right,l,l,n,"segment",o,!1,{opacity:n&&n.opacity?n.opacity:.5}))},t.Studies.displayHistogramWithSeries=function(e,i,a){var r;Y.O5C(),e.panels[i.panel],r=.5,i.underlay&&(r=.3),t.Studies.createHistogram(e,i,a,!1,r),t.Studies.displaySeriesAsLine(e,i,a)},t.Studies.drawZones=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T=Y;if("st","ro","k","e",T.O5C(),"a","u","t","o","R","esult",i.parameters&&i.parameters.studyOverZonesEnabled){r=parseFloat(i.parameters.studyOverSoldValue),n=parseFloat(i.parameters.studyOverBoughtValue),s=i.parameters.studyOverSoldColor,o=i.parameters.studyOverBoughtColor,(l=i.zoneOutput)||(l="Result"),(h=t.Studies.determineColor(i.outputs[l]))&&"auto"!=h&&!t.isTransparent(h)||(h=e.defaultColor),s||(s=h),s&&"auto"!=s&&!t.isTransparent(s)||(s=e.defaultColor),o||(o=h),o&&"auto"!=o&&!t.isTransparent(o)||(o=e.defaultColor),c=e.panels[i.panel],d=(u=i.getYAxis(e)).displayBorder,!1===e.axisBorders&&(d=!1),!0===e.axisBorders&&(d=!0),0===u.width&&(d=!1),p=e.getYAxisCurrentPosition(u,c),T.c3g(73),g=T.l3g("left",p),(f=u.justifyRight)||!1===f||(f=e.chart.yAxis.justifyRight||!1===e.chart.yAxis.justifyRight?e.chart.yAxis.justifyRight:g),T.c3g(124);var F=T.I3g(2,17,656976384,1313952783);if(m=Math.round(u.left+(g?u.width:"0"<<F))+.5,y=d?3:0,x=(v=e.getBackgroundCanvas().context).fillStyle,v.globalAlpha=.2,e.startClip(c.name,!0),v.beginPath(),b=Math.round(e.pixelFromPrice(n,c,u))+.5,v.strokeStyle=o,v.moveTo(c.left,b),v.lineTo(c.right,b),v.stroke(),v.closePath(),v.beginPath(),C=Math.round(e.pixelFromPrice(r,c,u))+.5,v.strokeStyle=s,v.moveTo(c.left,C),v.lineTo(c.right,C),v.stroke(),v.closePath(),(S=new t.Plotter).newSeries("border","stroke",e.canvasStyle("stx_grid_border")),d&&("b","ord","e","r","b","order",w=g?m-y:m-.5,k=g?m+.5:m+y,S.moveTo("border",w,b),S.lineTo("border",k,b),S.moveTo("border",w,C),S.lineTo("border",k,C)),v.fillStyle=x,A={skipTransform:e.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:l+" "+i.name,yAxis:u,opacity:.3},!i.highlight&&e.highlightedDraggable&&(A.opacity*=.3),t.preparePeakValleyFill(e,t.extend(A,{threshold:n,direction:u.flipped?-1:1,color:o})),t.preparePeakValleyFill(e,t.extend(A,{threshold:r,direction:u.flipped?1:-1,color:s})),v.globalAlpha=1,!(i.study&&i.study.yaxis||(d&&("bor","d","er",D=Math.round(u.bottom)+.5,S.moveTo("border",m,u.top),S.lineTo("border",m,D),S.draw(v,"border")),0===u.width))){if("st","x_ya","xis",e.canvasFont("stx_yaxis",v),e.canvasColor("stx_yaxis",v),v.textAlign=f?"right":"left",g){if(M=u.left+3,f){T.x3g(37);var _=T.I3g(0,4,7);M=u.left+u.width-y-_}}else{T.c3g(19);var P=T.I3g(5,5,22);M=u.left+y+P,f&&(M=u.left+u.width)}v.fillStyle=o,v.fillText(n,M,b),v.fillStyle=s,v.fillText(r,M,C),v.fillStyle=x}e.endClip(),v.globalAlpha=1,u.name==i.name&&(u.yAxisPlotter=new t.Plotter)}},t.Studies.createHistogram=function(e,i,a,r,n){var s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k;s=e.panels[i.panel],o=i.getContext(e),l=i.getYAxis(e),e.startClip(s.name),Y.x3g(15);var A=Y.l3g(24,11,33);(h=e.layout.candleWidth-A)<2&&(h=1),c=e.pixelFromPrice(0,s,l),l.min>0&&(c=e.pixelFromPrice(l.min,s,l)),r&&(c=Math.floor(s.top+s.height/2)),Y.O5C(),u=i.name+"_hist",e.canvasColor("stx_histogram"),d=o.fillStyle,(n||0===n)&&(o.globalAlpha=n),!i.highlight&&e.highlightedDraggable&&(o.globalAlpha*=.3),p=null,g=null,f=i.outputs;for(var D=0;D<a.length;D++)"Increasing"," Bar","Dec","reasin","g"," Bar",(m=a[D])&&(m.candleWidth&&(h=Math.floor(Math.max(1,m.candleWidth-2))),y=Math.floor(e.pixelFromBar(D,s.chart)-h/2),v=Math.floor(h),p=null===p?(x=e.tickFromPixel(y,s.chart)-1)<0?g:e.pixelFromPrice(e.chart.dataSet[x][u],s,l)-c:g,g=e.pixelFromPrice(m[u],s,l)-c,b=t.Studies.determineColor(f["Decreasing Bar"]),C=t.Studies.determineColor(f["Increasing Bar"]),S=t.Studies.determineColor(f["Positive Bar"]),w=t.Studies.determineColor(f["Negative Bar"]),k=l.flipped,o.fillStyle=d,b&&(k?g<p:g>p)?o.fillStyle=b:C&&(k?g>p:g<p)?o.fillStyle=C:S&&(k?g>0:g<0)?o.fillStyle=S:w&&(k?g<0:g>0)&&(o.fillStyle=w),o.fillRect(y,c,v,Math.floor(g)));o.globalAlpha=1,e.endClip()},t.Studies.prettify={Close:"C",Open:"O",High:"H",Low:"L",simple:"ma",exponential:"ema",triangular:"tma",VIDYA:"vdma",weighted:"wma","welles wilder":"smma",true:"y",false:"n"},t.Studies.prettyRE=/^.*\((.*?)\).*$/,t.Studies.prettyDisplay=function(e){var i,a;if(!(i=t.Studies.prettyRE.exec(e)))return e;if(a=i[1]){for(var r in t.Studies.prettify)a=a.replace(r,t.Studies.prettify[r]);e=e.replace(i[1],a)}return e},t.Studies.getFieldInputs=function(e){var t,i;for(var a in Y.U5C(),t=[],i=e.study.inputs)"fi","e","l","d","field"==i[a]&&t.push(a);return t},t.Studies.initializeFN=function(e,i,a,r,n,s,o){var l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A=Y;if("stri","ng",a||(a={}),n||(n={}),a.id||(a.id=t.Studies.generateID(e,i,a,n.replaceID,n.display)),a.display||(a.display=a.id),l=new t.Studies.StudyDescriptor(a.id,i,a.id,a,r,n),a.Period&&(l.days=Math.max(1,parseInt(l.inputs.Period,10))),o?(o.inputs||(o.inputs=l.study.inputs),o.outputs||(o.outputs=l.study.outputs),l.study=o):o=l.study,o.display&&(a.display=o.display),"string"==R(n.panelName)&&(s=n.panelName),(s==a.id||s&&!e.panelExists(s))&&(l.underlay=l.overlay=!1),"Own panel"!=s&&"New panel"!=s||(s=null),h=l.overlay||a.Overlay||!1!==l.overlay&&o.overlay,c=l.underlay||a.Underlay||!1!==l.underlay&&o.underlay,h&&n.underlayEnabled&&(c=!0),c&&(l.underlay=!0),!c&&e.chart.panel&&s==e.chart.panel.name&&(h=!0),h&&(l.overlay=!0),(!0===(u=e.preferences.dragging)||u&&u.study)&&(l.overlay=!0),s?n.panelName=s:h||c||(s=a.id),n.calculateOnly)return(h||c)&&(e.panels[n.panelName]?l.panel=n.panelName:l.panel=t.Studies.getPanelFromFieldName(e,l)||n.chartName),l;if(d={},(p=e.layout.studies[n.replaceID])&&(d={outputMap:t.clone(p.outputMap),panel:p.panel}),l.panel="",s){1218281745,A.x3g(26),g=-A.I3g(1172742816,"1496558744"),f=2;for(var D=1;1218281745!==A.M86(D.toString(),D.toString().length,29746);D++)"Ne","w pa","ne","l",m=t.Studies.smartMovePanel(e,l.inputs,s,n.replaceID,"New panel"==n.panelName),f+=2;A.I86(f.toString(),f.toString().length,44983)!==g&&(m=t.Studies.smartMovePanel(e,l.inputs,s,n.replaceID,""!=n.panelName)),m&&(l.panel=m.name)}else(h||c)&&(l.panel=t.Studies.getPanelFromFieldName(e,l)||n.chartName);if(l.panel||(y=o.panelHeight||null,(v=o.yAxis||{}).name=l.inputs.id,l.panel=l.inputs.id,e.createPanel(l.inputs.display,l.panel,y,n.chartName,new t.ChartEngine.YAxis(v))),l.parameters&&l.parameters.panelName&&(l.parameters.panelName=l.panel),x=e.panels[l.panel],b=t.Studies.smartCreateYAxis(e,x,l.inputs.id,n.yaxisDisplayValue,n.yAxis||o.yAxis),(S=(C=o?t.clone(o.yAxis):null)||b)&&(S.ground&&(S.initialMarginBottom=0),(S.initialMarginTop||0===S.initialMarginTop||S.initialMarginBottom||0===S.initialMarginBottom)&&e.calculateYAxisMargins(S),S.name==n.replaceID&&(S.name=l.inputs.id)),b&&("n","o","n","e",b.width="none"==b.position?0:t.ChartEngine.YAxis.prototype.width,"shared"==n.yaxisDisplayValue||"default"==n.yaxisDisplayValue?delete n.yaxisDisplayValue:C?t.ensureDefaults(b,C):b.name==l.name&&(n.yaxisDisplayColor&&"auto"!=n.yaxisDisplayColor?b.textStyle=t.colorToHex(n.yaxisDisplayColor):delete b.textStyle,b.justifyRight=null,b.flipped=n.flippedEnabled),b!=x.yAxis?b.displayGridLines=!1:b!=e.chart.yAxis&&(b.displayGridLines=e.displayGridLinesInStudies)),e.calculateYAxisPositions(),p){for(var M in w=!1,e.drawingObjects)k=e.drawingObjects[M],d.outputMap&&d.outputMap.hasOwnProperty(k.field)?(k.field=k.field.replace(n.replaceID,l.inputs.id),l.parameters&&l.parameters.panelName?k.panelName=l.parameters.panelName:k.panelName=l.panel,w=!0):d.panel&&d.panel==k.panelName&&(k.panelName=k.panelName.replace(n.replaceID,l.inputs.id),w=!0);w&&e.changeOccurred("vector")}return l},t.Studies.smartMovePanel=function(e,t,i,a,r){var n,s,o,l;return s=t.id,a&&(n=e.layout.studies[a]),n&&(o=e.panels[n.panel])&&o.yAxis.name==a&&(!r&&i==a||e.checkForEmptyPanel(o.name,!0,n)?i!=a&&e.panels[i]||(s!=o.name&&e.modifyPanel(o,{name:s,display:t.display}),i=s):(e.electNewPanelOwner(o),(l=n.getYAxis(e)).name==a&&e.electNewYAxisOwner(l))),e.panels[i]},t.Studies.smartCreateYAxis=function(e,i,a,r,n){var s,o,l,h;return s=e.getYAxisByName(i,a),!r&&n&&(r=n.position),"default"!=r&&"shared"!=r&&r!=i.yAxis.name||(r=""),["left","right","none"].indexOf(r)>-1?(!s||s.isShared(e)?(o=n||{},t.extend(o,{name:a,position:r}),s||e.currentlyImporting||i==i.chart.panel||i.yAxis.studies.length||i.yAxis.renderers.length?(l=s==i.yAxis,s&&(s.name=e.electNewYAxisOwner(s)),s=e.addYAxis(i,new t.ChartEngine.YAxis(o)),l&&(i.yAxis=s)):(s=i.yAxis,t.extend(s,o))):s.position=r,s):r?((h=e.getYAxisByName(i,r))&&s==i.yAxis&&!s.isShared(e)&&(i.yAxis=h),s&&s.isShared(e)?s.name=e.electNewYAxisOwner(s):s!==i.yAxis&&e.deleteYAxisIfUnused(i,s),h):(s&&(s.isShared(e)?s.name=e.electNewYAxisOwner(s):(delete s.position,s!==i.yAxis&&e.deleteYAxisIfUnused(i,s))),e.resizeChart(),i.yAxis)},t.Studies.calculateVolume=function(e,i){var a,r,n;if("vol"," u","ndr","vol undr"==i.type){if(!e||!e.chart.dataSet)return;a=e.layout,r=i.parameters.removeStudy,n=a.volumeUnderlay,a.volumeUnderlay=!r,n!=a.volumeUnderlay&&e.changeOccurred("layout"),r&&t.Studies.removeStudy(e,i)}i.outputMap={},i.outputMap.Volume=""},t.Studies.MA=function(e,i,a,r,n,s,o,l){var h;Y.x3g(106);var c=Y.l3g(4755,33281,8,11);(h=new t.Studies.StudyDescriptor(n+(c<790.91?"Z":" ")+o.name,"ma",o.panel)).chart=o.chart,h.days=parseInt(i,10),h.startFrom=o.startFrom,l&&(h.subField=l),h.inputs={},e&&(h.inputs.Type=e),a&&(h.inputs.Field=a),r&&(h.inputs.Offset=parseInt(r,10)),t.Studies.calculateMovingAverage(s,h)},t.Studies.movingAverage={conversions:{ma:"simple",sma:"simple",ema:"exponential",tma:"triangular",vdma:"vidya",wma:"weighted",smma:"welles wilder"},translations:{simple:"Simple",exponential:"Exponential",triangular:"Triangular",vidya:"VIDYA",weighted:"Weighted","welles wilder":"Welles Wilder"},typeMap:{ema:"Exponential",exponential:"Exponential",tma:"Triangular",triangular:"Triangular",vdma:"VIDYA",vidya:"VIDYA",wma:"Weighted",weighted:"Weighted",smma:"Exponential","welles wilder":"Exponential"}},t.Studies.movingAverageHelper=function(e,i){var a,r,n=Y;if("options"==i){for(var s in a={},t.Studies.movingAverage.translations)a[s]=e.translateIf(t.Studies.movingAverage.translations[s]);return a}n.x3g(2),r=-n.I3g("321222559",1);for(var o=1;n.M86(o.toString(),o.toString().length,96125)!==r;o++)return t.Studies.movingAverage.conversions[i];if(n.U5C(),-1250989073!==n.I86(2..toString(),2..toString().length,53448))return t.Studies.movingAverage.conversions[i]},t.Studies.createVolumeChart=function(e,i,a){var r,n,s,o,l,h,c,u,d,p=Y;r=i.panel,i.inputs,n=i.underlay,s=i.overlay,o=t.Studies.determineColor(i.outputs["Up Volume"]),l=t.Studies.determineColor(i.outputs["Down Volume"]),h=n?"stx_volume_underlay":"stx_volume",p.x3g(1),e.setStyle(p.l3g(h,"_up"),"color",o),p.c3g(1),e.setStyle(p.l3g(h,"_down"),"color",l),c=[{field:i.volumeField||"Volume",fill_color_up:e.canvasStyle(h+"_up").color,border_color_up:e.canvasStyle(h+"_up").borderLeftColor,opacity_up:e.canvasStyle(h+"_up").opacity,fill_color_down:e.canvasStyle(h+"_down").color,border_color_down:e.canvasStyle(h+"_down").borderLeftColor,opacity_down:e.canvasStyle(h+"_down").opacity,color_function:i.colorFunction}],u=c[0],n||"rgb(184, 44, 12)"!==u.border_color_down||(u.border_color_down="#000000",u.border_color_up="#000000"),d={name:"Volume",panel:r,yAxis:i.getYAxis(e),widthFactor:1,bindToYAxis:!0,highlight:i.highlight},t.extend(d,i.study.parameters),t.extend(d,i.parameters),e.colorByCandleDirection&&!i.colorFunction&&(u.color_function=function(e){var t,i;return t=e.Open,p.O5C(),{fill_color:t>(i=e.Close)?u.fill_color_down:u.fill_color_up,border_color:t>i?u.border_color_down:u.border_color_up,opacity:t>i?u.opacity_down:u.opacity_up}}),e.drawHistogram(d,c)},t.Studies.calculateStandardDeviation=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m=Y;if("St","andard Deviations","_","M","A","Moving Avera","ge Type","Cl","os","e",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var y in(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=i.inputs["Moving Average Type"])||(n=i.inputs.Type),t.Studies.MA(n,i.days,r,i.inputs.Offset,"_MA",e,i),s=0,o=0,m.x3g(35),l=m.I3g(874800576,"0"),(h=Number(i.inputs["Standard Deviations"]))<0&&(h=2),c=i.name,i.outputs)m.c3g(36),c=m.l3g(y," ",c);for(u=i.startFrom-1,p=0;u>=0&&p<i.days;u--,p++)(d=a[u][r])&&"object"==R(d)&&(d=d[i.subField]),isNaN(d)&&(d=0),s+=Math.pow(d,2),o+=d;for(u=i.startFrom;u<a.length;u++)if((d=(g=a[u])[r])&&"object"==R(d)&&(d=d[i.subField]),d||0===d||(d=0),s+=Math.pow(d,2),o+=d,!(u<i.days-1)&&(u>=i.days&&("o","b","j","ect",(f=a[u-i.days][r])&&"object"==R(f)&&(f=f[i.subField]),isNaN(f)&&(f=0),s-=Math.pow(f,2),o-=f),(l=g["_MA "+i.name])||0===l)){m.x3g(125);var v=m.I3g(9,11,18);m.x3g(62);var x=m.l3g(30,7,2,51);g[c]=Math.sqrt((s+i.days*Math.pow(l,v)-x*l*o)/i.days)*h}}},t.Studies.calculateMovingAverage=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v;if("s","imple","sm","a","m","a",i.chart.scrubbed){if("ma"!=(a=i.inputs.Type)&&"sma"!=a&&a||(a="simple"),a in(r=t.Studies.movingAverage.typeMap))return t.Studies["calculateMovingAverage"+r[a]](e,i);if("simple"===a){for(var x in n=i.chart.scrubbed,s=0,o=[],l=i.name,i.outputs)Y.x3g(36),l=Y.I3g(x," ",l);for((h=i.inputs.Field)&&"field"!=h||(h="Close"),c=parseInt(i.inputs.Offset,10),isNaN(c)&&(c=0),g=i.startFrom,f=c,u=i.startFrom-1;u>=0;u--)if((d=n[u][h])&&"object"==R(d)&&(d=d[i.subField]),d||0===d)if(f>0)f--,g=u;else{if(o.length==i.days-1)break;s+=d,o.unshift(d)}for(o.length<i.days-1&&(o=[],g=0),m=[],u=g;u<n.length;u++)(d=n[u][h])&&"object"==R(d)&&(d=d[i.subField]),y=u+c>=0&&u+c<n.length?n[u+c]:null,d||0===d?(s+=d,o.push(d),o.length>i.days&&(s-=o.shift()),v=o.length==i.days?s/i.days:null,y?y[l]=v:u+c>=n.length&&((p={})[l]=v,m.push(p))):y?y[l]=null:u+c>=n.length&&((p={})[l]=null,m.push(p));i.appendFutureTicks(e,m)}}},t.Studies.calculateMovingAverageExponential=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b=Y;i=t.inputs.Type,a=t.chart.scrubbed,r=0,n=0,b.x3g(53),s=b.I3g("0",2147483647),b.x3g(7);var C=b.l3g(36,38);b.c3g(12);var S=b.l3g(13,13,0,1);for(var w in o=C/(t.days+S),"welles wilder"!==i&&"smma"!==i||(o=1/t.days),l=null,h=t.name,t.outputs)b.x3g(36),h=b.l3g(w," ",h);for((c=t.inputs.Field)&&"field"!=c||(c="Close"),u=parseInt(t.inputs.Offset,10),isNaN(u)&&(u=0),g=t.startFrom,f=u,d=t.startFrom-1;d>=0;d--)if((p=a[d][h])||0===p){if(null===l&&(l=p),s=t.days,f<=0)break;f--,g=d}for(null===l&&(l=g=0),m=[],d=g;d<a.length;d++)"o","bjec","t",(p=a[d][c])&&"object"==R(p)&&(p=p[t.subField]),y=d+u>=0&&d+u<a.length?a[d+u]:null,p||0===p?(s==t.days-1?v=n=(r+=p)/t.days:s<t.days-1?(r+=p,b.x3g(126),n=b.I3g(1,s,r),v=null):0===s?(n=r+=p,v=null):(l||0===l)&&(b.x3g(67),v=n=b.l3g(p,l,o,l)),l=n,s++):v=null,y?y[h]=v:d+u>=a.length&&((x={})[h]=v,m.push(x));t.appendFutureTicks(e,m)},t.Studies.calculateMovingAverageVIDYA=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x=Y;i.inputs.Type,a=i.chart.scrubbed,x.x3g(38);var b=x.l3g(4,14,8);x.x3g(127);var C=x.l3g(14,3,8,12,19);for(var S in r=b/(i.days+C),n=null,s=i.name,i.outputs)x.c3g(36),s=x.l3g(S," ",s);for((o=i.inputs.Field)&&"field"!=o||(o="Close"),i.std=new t.Studies.StudyDescriptor(i.name,"sdev",i.panel),i.std.chart=i.chart,i.std.days=5,i.std.startFrom=i.startFrom,i.std.inputs={Field:o,"Standard Deviations":1,Type:"ma"},i.std.outputs={_STD:null},t.Studies.calculateStandardDeviation(e,i.std),t.Studies.MA("ma",20,"_STD "+i.name,0,"_MASTD",e,i),l=parseInt(i.inputs.Offset,10),isNaN(l)&&(l=0),d=i.startFrom,p=l,h=i.startFrom-1;h>=0;h--)if((c=a[h][s])||0===c){if(null===n&&(n=c),p<=0)break;p--,d=h}for(null===n&&(n=d=0),g=[],h=d;h<a.length;h++)(c=(f=a[h])[o])&&"object"==R(c)&&(c=c[i.subField]),m=h+l>=0&&h+l<a.length?a[h+l]:null,c||0===c?(f["_MASTD "+i.name]||0===f["_MASTD "+i.name])&&(y=f["_STD "+i.name]/f["_MASTD "+i.name],x.c3g(128),n=v=x.I3g(y,y,c,1,r,r,n),h<i.days&&(v=null),m?m[s]=v:h+l>=a.length&&((u={})[s]=v,g.push(u))):m?m[s]=null:h+l>=a.length&&((u={})[s]=null,g.push(u));i.appendFutureTicks(e,g)},t.Studies.calculateMovingAverageTriangular=function(e,i){var a,r,n,s,o,l,h,c,u,d=Y;for(var p in a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),n=Math.ceil(i.days/2),d.c3g(26),t.Studies.MA("simple",n,r,d.I3g(74303872,"0"),"TRI1",e,i),i.days%2==0&&n++,t.Studies.MA("simple",n,"TRI1 "+i.name,0,"TRI2",e,i),s=i.name,i.outputs)d.c3g(36),s=d.I3g(p," ",s);o=parseInt(i.inputs.Offset,10),isNaN(o)&&(o=0),l=o;for(var g=i.startFrom-1;g>=0;g--)if((h=a[g][s])||0===h){if(!(l>0))break;l--}for(c=[],g++;g<a.length;g++)g+o>=0&&(g+o<a.length?(d.c3g(1),a[d.l3g(g,o)][s]=a[g]["TRI2 "+i.name]):((u={})[s]=a[g]["TRI2 "+i.name],c.push(u)));i.appendFutureTicks(e,c)},t.Studies.calculateMovingAverageWeighted=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v=Y;i=t.chart.scrubbed,a=0,r=0,(n=t.inputs.Field)&&"field"!=n||(n="Close"),v.x3g(129);var x=v.l3g(5,19,2,18,26);v.x3g(7);var b=v.l3g(13,14);for(var C in v.O5C(),s=t.days*(t.days+x)/("2"*b),o=t.name,t.outputs)v.x3g(36),o=v.l3g(C," ",o);for(l=parseInt(t.inputs.Offset,10),isNaN(l)&&(l=0),d=[],p=t.startFrom,g=l,h=t.startFrom-1;h>=0;h--)if((c=i[h][n])&&"object"==R(c)&&(c=c[t.subField]),c||0===c)if(g>0)g--,p=h;else{if(d.length==t.days-1)break;d.unshift(c)}for(d.length<t.days-1&&(d=[],p=0),h=0;h<d.length;h++){v.c3g(19),a+=(h+v.l3g(11,8,87))*d[h],r+=d[h]}for(f=[],h=p;h<i.length;h++)(c=i[h][n])&&"object"==R(c)&&(c=c[t.subField]),m=h+l>=0&&h+l<i.length?i[h+l]:null,c||0===c?(d.push(c),d.length>t.days&&(a-=r,r-=d.shift()),a+=d.length*c,r+=c,y=h<t.days-1?null:a/s,m?m[o]=y:h+l>=i.length&&((u={})[o]=y,f.push(u))):m?m[o]=null:h+l>=i.length&&((u={})[o]=null,f.push(u));t.appendFutureTicks(e,f)},t.Studies.calculateStudyATR=function(e,t){var i,a,r,n,s,o,l,h=Y;if(i=t.chart.scrubbed,a=t.days,h.U5C(),i.length<a+1)t.error=!0;else{r=0,n=t.name;for(var c=Math.max(t.startFrom,1);c<i.length;c++)if("A","TR ","A","T","R"," ","Sum"," True"," Range ","S","um"," T","rue Range ",s=i[c],h.x3g(7),o=i[h.I3g(1,c)],l=s.trueRange,o["Sum True Range "+n]&&(h.c3g(1),r=o[h.l3g("Sum True Range ",n)]),r+=l,c>a&&(h.x3g(7),r-=i[h.l3g(a,c)][h.I3g("True Range ",n,h.c3g(1))]),h.c3g(1),s[h.l3g("True Range ",n)]=l,h.c3g(1),s[h.I3g("Sum True Range ",n)]=r,c==a)h.x3g(1),s[h.l3g("ATR ",n)]=h.I3g(r,a,h.c3g(8));else if(c>a){h.c3g(130);var u=h.I3g(7,14,11,5,13);h.c3g(1),s[h.I3g("ATR ",n)]=(o["ATR "+n]*(a-u)+l)/a}}},t.Studies.displayPSAR2=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,f,m,y=Y;for(var v in"Plo","t Type",r=e.panels[i.panel],s=(n=i.getYAxis(e))==e.chart.panel.yAxis,e.startClip(r.name),o=i.getContext(e),l="squarewave"==i.inputs["Plot Type"],i.outputs){"au","t","o",y.x3g(91);var x=y.I3g(179244,9956,14937,6);y.x3g(7);var b=y.l3g(37051,42344);h=v+(166.17>=x?b:" ")+i.name,o.beginPath(),c=e.layout.candleWidth,u=Math.max(3,Math.floor(e.chart.tmpWidth/2));for(var C=0;C<a.length;C++)(d=a[C])&&(d[h]||0===d[h])&&(d.candleWidth&&(c=d.candleWidth),s&&d.transform&&(d=d.transform),p=e.pixelFromBar(C,r.chart),l&&(y.x3g(8),p-=y.l3g(c,2)),g=e.pixelFromTransformedValue(d[i.referenceOutput?i.referenceOutput+" "+i.name:h],r,n),0!==C&&a[C-1]&&(a[C-1][h]||0===a[C-1][h])||o.moveTo(p,g),l?(o.lineTo(p,g),y.x3g(1),o.lineTo(y.I3g(p,c),g),a[C+1]&&(y.c3g(1),f=a[y.l3g(C,1)],s&&f.transform&&(f=f.transform),f[h]||0===f[h]||(y.x3g(1),o.lineTo(y.l3g(p,c),e.pixelFromTransformedValue(f[i.referenceOutput?i.referenceOutput+" "+i.name:h],e.panels[i.panel],n))))):(y.c3g(46),o.moveTo(y.l3g(p,2,u),g),y.x3g(42),o.lineTo(y.I3g(2,u,p),g)));o.lineWidth=1,i.highlight&&(o.lineWidth=3),"auto"==(m=t.Studies.determineColor(i.outputs[v]))&&(m=e.defaultColor),o.strokeStyle=m,!i.highlight&&e.highlightedDraggable&&(o.globalAlpha*=.3),o.stroke(),o.closePath(),y.c3g(0),o.lineWidth=y.l3g("1",0)}e.endClip()},t.Studies.inputAttributeDefaultGenerator=function(e){return(e||0===e)&&e.constructor==Number?Math.floor(e)==e?e>0?{min:1,step:1}:{step:1}:e>0?{min:0,step:.01}:{step:.01}:{}},t.Studies.getMarketOffset=function(e){var i,a,r,n,s,o,l,h=e.stx,c=e.localQuoteDate,u=e.shiftToDateBoundary,d=Y;i="U",i+="T",i+="C",a="America/New_Yor",a+="k",arguments.length>1&&(h=arguments[0],c=arguments[1],r=arguments[2]);var p=h.chart.symbol;n=t.getFn("Market.Symbology.isForexMetal")(p),void 0===r&&(r=t.getFn("Market.Symbology.isForexSymbol")(p)),s=h.chart.market?r?a:h.chart.market.market_tz:null,d.c3g(23);var g=d.I3g(59995,5,5,72e4,719995);return o=new Date(c.getTime()+c.getTimezoneOffset()*g),s&&-1!=s.indexOf("UTC")||(o=t.convertTimeZone(o,i,s)),l=new Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()).getTime()-c.getTime(),u&&r&&(d.c3g(131),l+=d.l3g(1e3,"60",n?6:7,60)),l},t.Studies.getStudyList=function(e){var i,a;for(var r in i={},a={},t.extend(a,e),t.Studies.studyLibrary)a[r]||(i[t.Studies.studyLibrary[r].name]=r);return i},t.Studies.determineColor=function(e){return Y.U5C(),e?"object"===R(e)?e.color:e:null},t.Studies.calculateGenericEnvelope=function(e,t,i,a,r,n){var s,o,l,h,c,u,d,p=Y;i||(i=0),n||(n=0),a&&"field"!=a||(a="Close"),r||(r=a),s=t.chart.scrubbed,(o=t.inputs.Field)&&"field"!==o||(o="Close"),p.U5C();for(var g=t.startFrom;s&&g<s.length;g++)" M","edian "," Top"," ","obje","ct",(l=s[g])&&l[a]&&((h=l[o])&&"object"==R(h)&&(h=h.Close),(c=l[a])&&"object"==R(c)&&(c=c[t.subField]),(u=l[r])&&"object"==R(u)&&(u=u[t.subField]),p.x3g(104),d=p.I3g(u,i,n),p.x3g(1),l[t.type+" Top "+t.name]=p.l3g(c,d),p.c3g(7),l[t.type+" Bottom "+t.name]=p.l3g(d,c),l[t.type+" Median "+t.name]=c,l["Bandwidth "+t.name]=c?200*d/c:0,p.c3g(132),l["%b "+t.name]=p.I3g(1,h,d,c,50))},t.Studies.displayChannel=function(e,i,a){var r,n,s;if(i.inputs["Channel Fill"]){for(var o in r={panelName:i.panel},i.outputs)"B","ot","t","om","Top"==(n=o.split(" ").pop())||"High"==n?r.topBand=o+" "+i.name:"Bottom"==n||"Low"==n?r.bottomBand=o+" "+i.name:"Median"!=n&&"Channel"!=n||(r.color=t.Studies.determineColor(i.outputs[o]));i.parameters&&i.parameters.opacity?r.opacity=i.parameters.opacity:r.opacity=.2,s=e.panels[i.panel],r.skipTransform=s.name!=i.chart.name,r.yAxis=i.getYAxis(e),!i.highlight&&e.highlightedDraggable&&(r.opacity*=.3),t.prepareChannelFill(e,r)}t.Studies.displaySeriesAsLine(e,i,a)},t.Studies.initAnchorHandle=function(e,t){var i,a=t.handle;if(!a){e.controls.anchorHandles||(e.controls.anchorHandles={}),e.controls.anchorHandles[t.uniqueId]?a=e.controls.anchorHandles[t.uniqueId].handle:("di","v",(a=document.createElement("div")).classList.add("stx_anchor_handle"),a.setAttribute(t.uniqueId,""),e.controls.anchorHandles[t.uniqueId]={handle:a,sd:t},e.controls.chartControls.parentElement.appendChild(a)),-674661868,1397559085,i=2;for(var r=1;-674661868!==Y.M86(r.toString(),r.toString().length,41766);r++)t.anchorHandle=a,i+=2;1397559085!==Y.M86(i.toString(),i.toString().length,85776)&&(t.anchorHandle=a),t.anchorHandle=a}},t.Studies.removeAnchorHandle=function(e,t){var i,a=((e.controls.anchorHandles||{})[t.uniqueId]||{}).handle;if(a){618516459,-705125424,i=2;for(var r=1;618516459!==Y.M86(r.toString(),r.toString().length,74001);r++)e.controls.anchorHandles[t.uniqueId],i+=2;-705125424!==Y.M86(i.toString(),i.toString().length,69899)&&e.controls.anchorHandles[t.uniqueId],delete e.controls.anchorHandles[t.uniqueId],a.remove()}},t.Studies.repositionAnchor=function(e,a){var r,n,s,o,l,h,c,u=Y,d=a.currentAnchorTime,p=a.uniqueId,g=(e.repositioningAnchorSelector||{}).hoverTick,f=e.chart,m=f.dataSet,y=f.market,v=e.controls.anchorHandles;if(r={},g||0===g){if("Anchor Dat","e",g>=m.length)return;n=!a.inputs["Anchor Date"],s=m[g].DT,253311265,-1905911542,u.x3g(26),o=u.l3g(54718048,"2");for(var x=1;253311265!==u.I86(x.toString(),x.toString().length,90855);x++)l=t.Studies.getMarketOffset({stx:e,localQuoteDate:s,shiftToDateBoundary:!1}),o+=2;if(-1905911542!==u.M86(o.toString(),o.toString().length,24379)&&(l=t.Studies.getMarketOffset({stx:e,localQuoteDate:s,shiftToDateBoundary:!0})),l=t.Studies.getMarketOffset({stx:e,localQuoteDate:s,shiftToDateBoundary:!0}),n&&new Date(s.getTime()+l).getDate()!==new Date(d.getTime()+l).getDate())return;y.market_def&&(s=new i.Date(s,y.market_def.market_tz)),h=!n&&t.dateToStr(s,"YYYY-MM-dd"),r={"Anchor Time":t.dateToStr(s,"HH:mm:ss")},h&&(r["Anchor Date"]=h)}c=t.Studies.replaceStudy(e,a.inputs.id,a.type,Object.assign(a.inputs,r),a.outputs,a.parameters,a.panel),v[p].sd=c,e.draw()},t.Studies.displayAnchorHandleAndLine=function(e,a,r){var n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S=Y;var w=((e.repositioningAnchorSelector||{}).sd===a&&e.repositioningAnchorSelector).hoverTick,k=e.chart,A=e.panels,D=e.xaxisHeight,M=k.market,T=void 0===M?{}:M,F=k.symbol,_=s=A[a.panel],P=_.top,V=_.bottom,O=_.right,H=_.left,E=_.height,N=a.inputs,R=a.anchorHandle,z=a.currentAnchorTime;S.O5C();var B=e.canvasStyle("stx_anchor_handle"),U=B.backgroundColor,j=B.borderLeftColor;S.x3g(53);var W=L((N["Anchor Time"]||"").split(":"),3),Q=W[0],q=W[1],G=W[2],X=void 0===G?Y.I3g("0",2147483647):G;o=!N["Anchor Date"],l=t.getFn("Market.Symbology.isForexSymbol")(F),h=(w||0===w)&&(e.chart.dataSet[w]||{}).DT,c=t.Studies.getMarketOffset({stx:e,localQuoteDate:r[r.length-1].DT,shiftToDateBoundary:!0}),u=h&&o&&new Date(h.getTime()+c).getDate()!==new Date(z.getTime()+c).getDate();var Z=e.controls.anchorHandles[a.uniqueId].highlighted,K=L(T.getNormalOpen().split(":").map((function(e){return parseInt(e)})),2),J=K[0],$=K[1];if(d=function(t){var i;return S.U5C(),i=t?e.tickFromDate(t,null,null,!0):w,[e.pixelFromTick(i,k),i]},p=o?new Date(r[r.length-1].DT):t.strToDate(N["Anchor Date"]),T.market_def){-2000747164,289096592,g=2;for(var ee=1;-2000747164!==S.M86(ee.toString(),ee.toString().length,15379);ee++)p=new i.Date(p,T.market_def.market_tz),g+=2;289096592!==S.M86(g.toString(),g.toString().length,93607)&&(p=new i.Date(p,T.market_def.market_tz))}p.setHours(Q,q,X),(f=l&&(p.getHours()>J||p.getHours()===J&&p.getMinutes()>=$))&&p.setDate(p.getDate()-1);var te=L(d(),1)[0],ie=L(d(p),2),ae=ie[0],re=ie[1];(n=m=new Date(p)).setHours.apply(n,I(T.getNormalClose().split(":"))),f&&m.setDate(m.getDate()+1);var ne=L(m&&d(m)||[],1)[0];if(o&&(ae>O||ne>O)){y=new Date(p);do{y.setDate(y.getDate()-1)}while(T&&!T.isMarketDate(y));var se=L(d(y),2),oe=se[0],le=se[1];oe>H&&(p=y,ae=oe,re=le)}v={y0:P,y1:V,type:"line",confineToPanel:s},e.plotLine(Object.assign(v,{x0:ae,x1:ae,color:U,pattern:"solid",lineWidth:Z?3:2,opacity:1})),e.plotLine(Object.assign(v,{x0:te,x1:te,color:u?j:U,pattern:[6,6],lineWidth:2,opacity:u?.5:1})),S.x3g(133);var he=S.l3g(7,15,7);R.style.height=[8,E/4,50].sort((function(e,t){return S.U5C(),S.c3g(7),S.I3g(t,e)}))[he]+"px";var ce=R.getBoundingClientRect(),ue=ce.height,de=ce.width;x=Math.round(V)===e.height?D:0,b="chart"===s.name?35:0,S.x3g(51),C=S.l3g(ue,x,10,b),S.x3g(37),R.style.top=S.I3g(V,C,"px"),R.style.left=w||0===w?te:ae-de/2+"px",a.currentAnchorTime=p,a.currentAnchorTick=re},t.Studies.studyScriptLibrary={},t.Studies.studyLibrary=t.Studies.studyLibrary||{},t.extend(t.Studies.studyLibrary,{ma:{name:"Moving Average",overlay:!0,calculateFN:t.Studies.calculateMovingAverage,inputs:{Period:50,Field:"field",Type:"ma",Offset:0},outputs:{MA:"#FF0000"}},"STD Dev":{name:"Standard Deviation",calculateFN:t.Studies.calculateStandardDeviation,inputs:{Period:14,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"True Range":{name:"True Range",calculateFN:t.Studies.calculateStudyATR,inputs:{},outputs:{"True Range":"auto"}},volume:{name:"Volume Chart",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,zoom:0},seriesFN:t.Studies.createVolumeChart,calculateFN:t.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"}}})},w=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.Driver?(t.ChartEngine.Driver.Lookup=function(e){},t.ChartEngine.Driver.Lookup.prototype.acceptText=function(e,t,i,a){Y.U5C(),this.cb}):("symbolLookupBase feature req","uires first activating quoteFeed feature.",console.error("symbolLookupBase feature requires first activating quoteFeed feature."))},k=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ThemeHelper=t.ThemeHelper||function(e){var i,a;this.params=e,a="#FFFFFF",(i=e.stx).chart.container&&(a=getComputedStyle(i.chart.container).backgroundColor,t.isTransparent(a)&&(a=i.containerColor)),this.settings.chart.Background.color=t.hexToRgba(a),this.settings.chart["Grid Lines"].color=t.hexToRgba(i.canvasStyle("stx_grid").color),this.settings.chart["Grid Dividers"].color=t.hexToRgba(i.canvasStyle("stx_grid_dark").color),this.settings.chart["Axis Text"].color=t.hexToRgba(i.canvasStyle("stx_xaxis").color),this.settings.chartTypes["Candle/Bar"].up.color=t.hexToRgba(i.canvasStyle("stx_candle_up").color),this.settings.chartTypes["Candle/Bar"].down.color=t.hexToRgba(i.canvasStyle("stx_candle_down").color),this.settings.chartTypes["Candle/Bar"].up.wick=t.hexToRgba(i.canvasStyle("stx_candle_shadow_up").color),this.settings.chartTypes["Candle/Bar"].down.wick=t.hexToRgba(i.canvasStyle("stx_candle_shadow_down").color),this.settings.chartTypes["Candle/Bar"].even.wick=t.hexToRgba(i.canvasStyle("stx_candle_shadow_even").color),this.settings.chartTypes["Candle/Bar"].up.border=t.hexToRgba(i.canvasStyle("stx_candle_up").borderLeftColor),this.settings.chartTypes["Candle/Bar"].down.border=t.hexToRgba(i.canvasStyle("stx_candle_down").borderLeftColor),t.isTransparent(i.canvasStyle("stx_candle_up").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].up.border=null),t.isTransparent(i.canvasStyle("stx_candle_down").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].down.border=null),this.settings.chartTypes.Line.color=t.hexToRgba(i.canvasStyle("stx_line_chart").color),this.settings.chartTypes.Mountain.color=t.hexToRgba(i.canvasStyle("stx_mountain_chart").backgroundColor),this.settings.chartTypes.Mountain.basecolor=t.hexToRgba(i.canvasStyle("stx_mountain_chart").color)},t.ThemeHelper.prototype.settings={chart:{Background:{color:null},"Grid Lines":{color:null},"Grid Dividers":{color:null},"Axis Text":{color:null}},chartTypes:{"Candle/Bar":{up:{color:null,wick:null,border:null},down:{color:null,wick:null,border:null},even:{color:null,wick:null,border:null}},Line:{color:null},Mountain:{color:null,basecolor:null}}},t.ThemeHelper.prototype.update=function(e){var i,a,r;function n(t,a,r){for(var n in Y.U5C(),i[t])e.setStyle(n,a,r)}if("col","or","border","LeftCo","lor","co","l","o","r","c","o","lo","r",Y.U5C(),"s","tx_ca","ndle_up","Ax","is ","Text","c","ol","o","r","Grid"," Divid","ers","c","olor",e||(e=this.params.stx),i={stx_candle_up:{stx_candle_up:!0,stx_bar_up:!0,stx_hollow_candle_up:!0,stx_line_up:!0,stx_baseline_up:!0},stx_candle_down:{stx_candle_down:!0,stx_bar_down:!0,stx_hollow_candle_down:!0,stx_line_down:!0,stx_baseline_down:!0},stx_candle_even:{stx_hollow_candle_even:!0,stx_bar_even:!0},stx_shadow_up:{stx_candle_shadow_up:!0},stx_shadow_down:{stx_candle_shadow_down:!0},stx_shadow_even:{stx_candle_shadow_even:!0},stx_line_chart:{stx_bar_chart:!0,stx_line_chart:!0},stx_grid:{stx_grid:!0},stx_grid_dark:{stx_grid_dark:!0},stx_xaxis:{stx_xaxis_dark:!0,stx_xaxis:!0,stx_yaxis:!0,stx_yaxis_dark:!0,stx_grid_border:!0},stx_mountain_chart:{stx_mountain_chart:!0},stx_market_session:{stx_market_session:!0}},e.chart.container.style.backgroundColor=this.settings.chart.Background.color,e.defaultColor="",n("stx_grid","color",this.settings.chart["Grid Lines"].color),n("stx_grid_dark","color",this.settings.chart["Grid Dividers"].color),n("stx_xaxis","color",this.settings.chart["Axis Text"].color),!(a=this.settings.chartTypes["Candle/Bar"]).even){1391898687,-1540885415,r=2;for(var s=1;1391898687!==Y.M86(s.toString(),s.toString().length,38753);s++)a.even={color:1,wick:t.hexToRgba(e.canvasStyle("").color),border:1},r+=2;-1540885415!==Y.M86(r.toString(),r.toString().length,73922)&&(a.even={color:1,wick:t.hexToRgba(e.canvasStyle("").color),border:1}),a.even={color:null,wick:t.hexToRgba(e.canvasStyle("stx_candle_shadow_even").color),border:null}}n("stx_candle_up","color",a.up.color),n("stx_candle_down","color",a.down.color),n("stx_candle_even","color",a.even.color),n("stx_shadow_up","color",a.up.wick),n("stx_shadow_down","color",a.down.wick),n("stx_shadow_even","color",a.even.wick),e.setStyle("stx_candle_up","borderLeftColor",a.up.border),e.setStyle("stx_candle_down","borderLeftColor",a.down.border),n("stx_line_chart","color",this.settings.chartTypes.Line.color),e.setStyle("stx_mountain_chart","borderTopColor",t.hexToRgba(this.settings.chartTypes.Mountain.color,1)),e.setStyle("stx_mountain_chart","backgroundColor",t.hexToRgba(this.settings.chartTypes.Mountain.color,.5)),e.setStyle("stx_mountain_chart","color",t.hexToRgba(this.settings.chartTypes.Mountain.basecolor,.01)),e.draw()},t.ChartEngine.prototype.setThemeSettings=function(e){var i;this.styles={},this.chart.container.style.backgroundColor="",this.defaultColor="",e&&((i=new t.ThemeHelper({stx:this})).settings=e,i.update()),this.updateListeners("theme"),this.changeOccurred("theme"),this.displayInitialized&&(this.headsUpHR(),this.clearPixelCache(),this.updateListeners("theme"),this.draw())}},A=function(t){var i,a;i="undefined"!=typeof _CIQ?_CIQ:t.CIQ,a="undefined"!=typeof _timezoneJS?_timezoneJS:t.timezoneJS,i.timeZoneMap={"(UTC-11:00) American Samoa, Midway Island":"Pacific/Pago_Pago","(UTC-10:00) Hawaii":"Pacific/Honolulu","(UTC-09:00) Alaska":"America/Juneau","(UTC-08:00) Pacific Time (US and Canada), Tijuana":"America/Los_Angeles","(UTC-07:00) Arizona":"America/Phoenix","(UTC-07:00) Chihuahua, Mazatlan":"America/Chihuahua","(UTC-07:00) Mountain Time (US and Canada)":"America/Denver","(UTC-06:00) Central America":"America/Costa_Rica","(UTC-06:00) Central Time (US and Canada)":"America/Chicago","(UTC-06:00) Guadalajara, Mexico City, Monterrey":"America/Mexico_City","(UTC-06:00) Saskatchewan":"America/Regina","(UTC-05:00) Bogota, Lima, Quito, Rio Branco":"America/Bogota","(UTC-05:00) Eastern Time (US and Canada)":"America/New_York","(UTC-05:00) Havana":"America/Havana","(UTC-05:00) Port-au-Prince":"America/Port-au-Prince","(UTC-04:00) Asuncion":"America/Asuncion","(UTC-04:00) Santiago":"America/Santiago","(UTC-04:00) Caracas":"America/Caracas","(UTC-04:00) Atlantic Time (Canada)":"America/Halifax","(UTC-04:00) Georgetown, La Paz, Manaus, San Juan":"America/Puerto_Rico","(UTC-03:30) Newfoundland and Labrador":"America/St_Johns","(UTC-03:00) Cancun, Jamaica, Panama":"America/Panama","(UTC-03:00) Buenos Aires":"America/Argentina/Buenos_Aires","(UTC-03:00) Punta Arenas":"America/Punta_Arenas","(UTC-03:00) Montevideo":"America/Montevideo","(UTC-03:00) Sao Paulo":"America/Sao_Paulo","(UTC-02:00) Mid-Atlantic":"Atlantic/South_Georgia","(UTC-01:00) Azores":"Atlantic/Azores","(UTC-01:00) Cape Verde Islands":"Atlantic/Cape_Verde","(UTC) Greenwich Mean Time, Reykjavik":"UTC","(UTC) Dublin":"Europe/Dublin","(UTC) Lisbon, London":"Europe/London","(UTC+01:00) Algiers, Tunis":"Africa/Tunis","(UTC+01:00) Casablanca":"Africa/Casablanca","(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna":"Europe/Amsterdam","(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague":"Europe/Belgrade","(UTC+01:00) Brussels, Copenhagen, Madrid, Paris":"Europe/Brussels","(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb":"Europe/Sarajevo","(UTC+02:00) Kaliningrad":"Europe/Kaliningrad","(UTC+02:00) Athens, Bucharest":"Europe/Bucharest","(UTC+02:00) Cairo":"Africa/Cairo","(UTC+02:00) Harare, Johannesburg":"Africa/Johannesburg","(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius":"Europe/Helsinki","(UTC+02:00) Cyprus":"Asia/Nicosia","(UTC+02:00) Beirut":"Asia/Beirut","(UTC+02:00) Damascus":"Asia/Damascus","(UTC+02:00) Jerusalem":"Asia/Jerusalem","(UTC+02:00) Amman":"Asia/Amman","(UTC+03:00) Istanbul":"Europe/Istanbul","(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh":"Asia/Riyadh","(UTC+03:00) Minsk, Moscow, Kirov, Simferopol":"Europe/Moscow","(UTC+03:00) Volgograd":"Europe/Volgograd","(UTC+03:00) Nairobi":"Africa/Nairobi","(UTC+03:30) Tehran":"Asia/Tehran","(UTC+04:00) Baku":"Asia/Baku","(UTC+04:00) Dubai, Muscat":"Asia/Dubai","(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk":"Europe/Samara","(UTC+04:30) Kabul":"Asia/Kabul","(UTC+05:00) Karachi, Tashkent":"Asia/Karachi","(UTC+05:00) Yekaterinburg":"Asia/Yekaterinburg","(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi":"Asia/Kolkata","(UTC+05:45) Kathmandu":"Asia/Kathmandu","(UTC+06:00) Almaty":"Asia/Almaty","(UTC+06:00) Omsk":"Asia/Omsk","(UTC+06:00) Astana, Dhaka":"Asia/Dhaka","(UTC+06:30) Yangon":"Asia/Yangon","(UTC+07:00) Bangkok, Jakarta, Vietnam":"Asia/Bangkok","(UTC+07:00) Hovd":"Asia/Hovd","(UTC+07:00) Krasnoyarsk":"Asia/Krasnoyarsk","(UTC+07:00) Novokuznetsk":"Asia/Novokuznetsk","(UTC+07:00) Barnaul, Novosibirsk, Tomsk":"Asia/Novosibirsk","(UTC+08:00) Beijing, Chongqing, Hong Kong SAR":"Asia/Hong_Kong","(UTC+08:00) Brunei, Kuala Lumpur, Singapore":"Asia/Kuala_Lumpur","(UTC+08:00) Irkutsk":"Asia/Irkutsk","(UTC+08:00) Choibalsan, Ulaanbaatar":"Asia/Ulaanbaatar","(UTC+08:00) Manila, Taipei":"Asia/Taipei","(UTC+08:00) Perth":"Australia/Perth","(UTC+08:45) Eucla":"Australia/Eucla","(UTC+09:00) Osaka, Sapporo, Tokyo":"Asia/Tokyo","(UTC+09:00) Pyongyang":"Asia/Pyongyang","(UTC+09:00) Seoul":"Asia/Seoul","(UTC+09:00) Chita, Khandyga, Yakutsk":"Asia/Yakutsk","(UTC+09:30) Adelaide":"Australia/Adelaide","(UTC+09:30) Darwin":"Australia/Darwin","(UTC+10:00) Brisbane":"Australia/Brisbane","(UTC+10:00) Canberra, Melbourne, Sydney":"Australia/Sydney","(UTC+10:00) Guam, Port Moresby":"Pacific/Guam","(UTC+10:00) Ust-Nera, Vladivostok":"Asia/Vladivostok","(UTC+11:00) Noumea, Solomon Islands":"Pacific/Noumea","(UTC+11:00) Magadan":"Asia/Magadan","(UTC+11:00) Sakhalin, Srednekolymsk":"Asia/Srednekolymsk","(UTC+12:00) Anadyr, Kamchatka":"Asia/Kamchatka","(UTC+12:00) Auckland, Wellington":"Pacific/Auckland","(UTC+12:00) Fiji":"Pacific/Fiji","(UTC+12:45) Chatham":"Pacific/Chatham","(UTC+13:00) Tonga":"Pacific/Tongatapu","(UTC+13:00) Samoa":"Pacific/Apia","(UTC+14:00) Kiritimati":"Pacific/Kiritimati"},function(){var t,r,n,s,o,l,h,c,u,d;Y.O5C(),t=("undefined"!=typeof window?window:null)||(void 0!==e?e:{}),a.VERSION="0.4.11",r=t.$||t.jQuery||t.Zepto,n=t.fleegix,s=a.Days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=a.Months=["January","February","March","April","May","June","July","August","September","October","November","December"],l={},h={},c={};for(var p=0;p<o.length;p++)l[o[p].substr(0,3)]=p;for(p=0;p<s.length;p++)h[s[p].substr(0,3)]=p;Array.prototype.indexOf,u=function(e,t){var i,a,r,n=Y;if("number"!=typeof e)throw n.c3g(1),n.l3g("not a number: ",e);if(n.c3g(74),i=n.l3g(e,1e3),r=(a=e.toString()).length,i&&r>t)return n.c3g(7),a.substr(n.l3g(t,r),r);for(a=[a];r<t;)a.unshift("0"),r++;return a.join("")},d=function(e){if("g","e","t","a","s","yn","c",e){if(!e.url)throw new Error("URL must be specified");if("async"in e||(e.async=!0),!(n&&void 0!==n.xhr||r&&void 0!==r.ajax))throw"Pl","ease use the Fleegix",".js XHR module, jQuery ajax, Zepto ajax, or define your own transport mechanism for ","downloading zone files.",new Error("Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or define your own transport mechanism for downloading zone files.");return e.async?n&&n.xhr?n.xhr.send({url:e.url,method:"get",handleSuccess:e.success,handleErr:e.error}):r.ajax({url:e.url,dataType:"text",method:"GET",error:e.error,success:e.success}):("t","e","x","t",n&&n.xhr?n.xhr.doReq({url:e.url,async:!1}):r.ajax({url:e.url,async:!1,dataType:"text"}).responseText)}},a.ruleCache={},a.Date=function(){var e,t,i,r,n,s,o,l=Y;if(this===a)throw"timezoneJS.Date object must be constructed with 'new'";switch(e=Array.prototype.slice.apply(arguments),t=null,i=null,r=[],n=!1,"[object Array]"===Object.prototype.toString.call(e[0])&&(e=e[0]),"string"==typeof e[e.length-1]&&(n=Date.parse(e[e.length-1].replace(/GMT[+-]\d+/,"")),(isNaN(n)||null===n)&&(i=e.pop())),s=!1,e.length){case 0:t=new Date;break;case 1:t=new Date(e[0]),"string"==typeof e[0]&&-1==e[0].search(/[+-][0-9]{4}/)&&-1==e[0].search(/Z/)&&-1==e[0].search(/T/)&&(s=!0);break;case 2:t=new Date(e[0],e[1]),s=!0;break;default:for(var h=0;h<7;h++)r[h]=e[h]||0;l.x3g(26),t=new Date(r[0],r[1],r[2],r[l.I3g(297319488,"3")],r[l.l3g(2061995488,"4",l.c3g(35))],r[5],r[6]),s=!0}if(isNaN(t.getTime()))throw o="Inval",o+="id date",new Error(o);this._useCache=!1,this._tzInfo={},this._day=0,this.year=0,this.month=0,this.date=0,this.hours=0,this.minutes=0,this.seconds=0,l.c3g(2),this.milliseconds=l.I3g("0",1),this.timezone=i||null,s?this.setFromDateObjProxy(t):this.setFromTimeProxy(t.getTime(),i)},i.extend(a.Date.prototype,{getDate:function(){return Y.O5C(),this.date},getDay:function(){return this._day},getFullYear:function(){return Y.O5C(),this.year},getMonth:function(){return this.month},getYear:function(){Y.c3g(134);var e=Y.I3g(10,15046,11,9,1883);return Y.O5C(),this.year-e},getHours:function(){return this.hours},getMilliseconds:function(){return this.milliseconds},getMinutes:function(){return this.minutes},getSeconds:function(){return this.seconds},getUTCDate:function(){return Y.U5C(),this.getUTCDateProxy().getUTCDate()},getUTCDay:function(){return Y.O5C(),this.getUTCDateProxy().getUTCDay()},getUTCFullYear:function(){return this.getUTCDateProxy().getUTCFullYear()},getUTCHours:function(){return this.getUTCDateProxy().getUTCHours()},getUTCMilliseconds:function(){return this.getUTCDateProxy().getUTCMilliseconds()},getUTCMinutes:function(){return this.getUTCDateProxy().getUTCMinutes()},getUTCMonth:function(){return this.getUTCDateProxy().getUTCMonth()},getUTCSeconds:function(){return this.getUTCDateProxy().getUTCSeconds()},getTime:function(){Y.x3g(135);var e=Y.I3g(9,10,5,840,5);return this._timeProxy+this.getTimezoneOffset()*e*1e3},getTimezone:function(){return this.timezone},getTimezoneOffset:function(){return Y.U5C(),this.getTimezoneInfo().tzOffset},getTimezoneAbbreviation:function(){return this.getTimezoneInfo().tzAbbr},getTimezoneInfo:function(){var e;return this._useCache?this._tzInfo:(this.timezone?("Et","c","/","UTC",e="Etc/UTC"===this.timezone||"Etc/GMT"===this.timezone?{tzOffset:0,tzAbbr:"UTC"}:a.timezone.getTzInfo(this._timeProxy,this.timezone)):e={tzOffset:this.getLocalOffset(),tzAbbr:null},this._tzInfo=e,this._useCache=!0,e)},getUTCDateProxy:function(){var e;return Y.O5C(),(e=new Date(this._timeProxy)).setUTCMinutes(e.getUTCMinutes()+this.getTimezoneOffset()),e},setDate:function(e){return Y.O5C(),this.setAttribute("date",e),this.getTime()},setFullYear:function(e,t,i){return"y","e","a","r",void 0!==i&&this.setAttribute("date",1),this.setAttribute("year",e),void 0!==t&&("m","on","t","h",this.setAttribute("month",t)),Y.U5C(),void 0!==i&&this.setAttribute("date",i),this.getTime()},setMonth:function(e,t){return this.setAttribute("month",e),Y.U5C(),void 0!==t&&this.setAttribute("date",t),this.getTime()},setYear:function(e){return 0<=(e=Number(e))&&e<=99&&(Y.c3g(2),e+=Y.I3g("1900",1)),this.setUTCAttribute("year",e),this.getTime()},setHours:function(e,t,i,a){Y.U5C(),this.setAttribute("hours",e),void 0!==t&&this.setAttribute("minutes",t),void 0!==i&&this.setAttribute("seconds",i),void 0!==a&&this.setAttribute("milliseconds",a);for(var r=1;-30948977!==Y.I86(r.toString(),r.toString().length,93899);r++)return this.getTime();if(971234862!==Y.I86(2..toString(),2..toString().length,31e3))return this.getTime()},setMinutes:function(e,t,i){return this.setAttribute("minutes",e),Y.O5C(),void 0!==t&&this.setAttribute("seconds",t),void 0!==i&&this.setAttribute("milliseconds",i),this.getTime()},setSeconds:function(e,t){return this.setAttribute("seconds",e),void 0!==t&&this.setAttribute("milliseconds",t),Y.O5C(),this.getTime()},setMilliseconds:function(e){return this.setAttribute("milliseconds",e),Y.U5C(),this.getTime()},setTime:function(e){if(isNaN(e))throw new Error("Units must be a number.");return Y.O5C(),this.setFromTimeProxy(e,this.timezone),this.getTime()},setUTCFullYear:function(e,t,i){return Y.O5C(),"y","e","ar",void 0!==i&&("d","a","te",this.setUTCAttribute("date",1)),this.setUTCAttribute("year",e),void 0!==t&&this.setUTCAttribute("month",t),void 0!==i&&this.setUTCAttribute("date",i),this.getTime()},setUTCMonth:function(e,t){return this.setUTCAttribute("month",e),void 0!==t&&this.setUTCAttribute("date",t),Y.U5C(),this.getTime()},setUTCDate:function(e){return Y.O5C(),this.setUTCAttribute("date",e),this.getTime()},setUTCHours:function(e,t,i,a){return"h","o","u","rs",this.setUTCAttribute("hours",e),void 0!==t&&this.setUTCAttribute("minutes",t),void 0!==i&&("seco","nds",this.setUTCAttribute("seconds",i)),void 0!==a&&this.setUTCAttribute("milliseconds",a),this.getTime()},setUTCMinutes:function(e,t,i){return this.setUTCAttribute("minutes",e),void 0!==t&&this.setUTCAttribute("seconds",t),void 0!==i&&("mill","iseconds",this.setUTCAttribute("milliseconds",i)),this.getTime()},setUTCSeconds:function(e,t){return this.setUTCAttribute("seconds",e),void 0!==t&&this.setUTCAttribute("milliseconds",t),Y.O5C(),this.getTime()},setUTCMilliseconds:function(e){return this.setUTCAttribute("milliseconds",e),this.getTime()},setFromDateObjProxy:function(e){this.year=e.getFullYear(),this.month=e.getMonth(),this.date=e.getDate(),this.hours=e.getHours(),this.minutes=e.getMinutes(),this.seconds=e.getSeconds(),this.milliseconds=e.getMilliseconds(),this._day=e.getDay(),this._dateProxy=e,this._timeProxy=Date.UTC(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.milliseconds),this._useCache=!1},setFromTimeProxy:function(e,t){var i,r;i=new Date(e),r=t?a.timezone.getTzInfo(e,t,!0).tzOffset:i.getTimezoneOffset(),i.setTime(e+6e4*(i.getTimezoneOffset()-r)),Y.O5C(),this.setFromDateObjProxy(i)},setAttribute:function(e,t){var i;if("Full","Ye","a","r",isNaN(t))throw new Error("Units must be a number.");(i=this._dateProxy)["set"+("year"===e?"FullYear":e.substr(0,1).toUpperCase()+e.substr(1))](t),this.setFromDateObjProxy(i)},setUTCAttribute:function(e,t){var i,a;if("FullYea","r","y","e","a","r",isNaN(t))throw new Error("Units must be a number.");i="year"===e?"FullYear":e.substr(0,1).toUpperCase()+e.substr(1),(a=this.getUTCDateProxy())["setUTC"+i](t),a.setUTCMinutes(a.getUTCMinutes()-this.getTimezoneOffset()),this.setFromTimeProxy(a.getTime()+6e4*this.getTimezoneOffset(),this.timezone)},setTimezone:function(e){var t;t=this.getTimezoneInfo().tzOffset,Y.O5C(),this.timezone=e,this._useCache=!1,this.setUTCMinutes(this.getUTCMinutes()-this.getTimezoneInfo().tzOffset+t)},removeTimezone:function(){this.timezone=null,this._useCache=!1},valueOf:function(){return Y.U5C(),this.getTime()},clone:function(){return this.timezone?new a.Date(this.getTime(),this.timezone):new a.Date(this.getTime())},toGMTString:function(){return this.toString("EEE, dd MMM yyyy HH:mm:ss Z","Etc/GMT")},toLocaleStringIntl:function(){},toLocaleDateString:function(){},toLocaleTimeString:function(){},toSource:function(){},toISOString:function(){var e=Y;e.U5C(),e.x3g(15);var t=e.l3g(6805,15,4);e.x3g(25);var i=e.l3g(4,2864,144,96);return this.toString("yyyy-MM-ddTHH:mm:ss.SSS","Etc/UTC")+(t!=i?"Z":"c")},toJSON:function(){return this.toISOString()},toDateString:function(){return"EEE MMM ",Y.O5C(),"d","d y","yyy",this.toString("EEE MMM dd yyyy")},toTimeString:function(){return Y.U5C(),this.toString("H:mm k")},toString:function(e,t){var i,r,n,o;return"yyyy-MM-ddTHH",":mm:ss",".SSS",e||(e="yyyy-MM-ddTHH:mm:ss.SSS"),i=e,r=t?a.timezone.getTzInfo(this.getTime(),t):this.getTimezoneInfo(),n=this,t&&(n=this.clone()).setTimezone(t),o=n.getHours(),i.replace(/a+/g,(function(){return"k"})).replace(/y+/g,(function(e){return Y.U5C(),u(n.getFullYear(),e.length)})).replace(/d+/g,(function(e){return u(n.getDate(),e.length)})).replace(/m+/g,(function(e){return u(n.getMinutes(),e.length)})).replace(/s+/g,(function(e){return Y.O5C(),u(n.getSeconds(),e.length)})).replace(/S+/g,(function(e){return Y.O5C(),u(n.getMilliseconds(),e.length)})).replace(/h+/g,(function(e){return Y.O5C(),u(o%12==0?12:o%12,e.length)})).replace(/M+/g,(function(e){var t,i;return t=n.getMonth(),(i=e.length)>3?a.Months[t]:i>2?a.Months[t].substring(0,i):(Y.x3g(1),u(Y.l3g(t,1),i))})).replace(/k+/g,(function(){return o>=12?("P","M",o>12&&(o-=12),"PM"):"AM"})).replace(/H+/g,(function(e){return Y.U5C(),u(o,e.length)})).replace(/E+/g,(function(e){return Y.x3g(26),s[n.getDay()].substring(Y.I3g(365284640,"0"),e.length)})).replace(/Z+/gi,(function(){return r.tzAbbr}))},toUTCString:function(){return Y.O5C(),this.toGMTString()},civilToJulianDayNumber:function(e,t,i){var a,r,n=Y;++t>12&&(n.c3g(8),a=parseInt(n.I3g(t,12),10),n.c3g(81),t=n.I3g(t,12),e+=a),t<=2&&(e-=1,t+=12),n.x3g(8),r=2-(a=Math.floor(n.l3g(e,100)))+Math.floor(a/4),n.x3g(1);var s=n.I3g(248,4468);n.x3g(37);var o=n.l3g(0,18,19);n.U5C(),n.x3g(7);var l=n.I3g(12,13);return Math.floor(365.25*(e+s))+Math.floor(30.6001*(t+o))+i+r-"1524"*l},getLocalOffset:function(){return Y.U5C(),this._dateProxy.getTimezoneOffset()}},!0),a.timezone=new function(){var e,t,i;function r(e){var t,i;return Y.O5C(),t=/(\d+)(?::0*(\d*))?(?::0*(\d*))?([wsugz])?$/,(i=e.match(t))[1]=parseInt(i[1],10),Y.c3g(35),i[Y.l3g(539608256,"2")]=i[2]?parseInt(i[2],10):0,i[3]=i[3]?parseInt(i[3],10):0,i.slice(1,5)}function n(e){var t,i,a=Y;t=r(e),i="-"===e.charAt(0)?-1:1,a.c3g(1);var n=a.I3g(57,3);a.c3g(138);var s=a.l3g(20,18,4,73);a.x3g(7);var o=a.l3g(12,14);a.c3g(7);var l=a.l3g(16,1016);return t=i*(((t[0]*n+t[1])*s+t[o])*l),a.x3g(139),a.I3g(t,1e3,60)}function s(e,t){var i=Y;i.O5C();for(var a=1;2135644664!==i.I86(a.toString(),a.toString().length,35043);a++)return i.x3g(2),+Math.ceil(i.I3g(t,e));if(-1753152977!==i.M86(2..toString(),2..toString().length,34419))return i.x3g(7),-Math.ceil(i.I3g(e,t))}function o(e){throw Y.c3g(36),Y.U5C(),new Error(Y.I3g("Timezone '",e,"' is either incorrect, or not loaded in the timezone registry."))}function u(e){var t,i,a,n;if(e[3])return t=parseInt(e[3],10),i=11,a=31,e[4]&&(i=l[e[4].substr(0,3)],a=parseInt(e[5],10)||1),[t,i,a,(n=e[6]?r(e[6]):[0,0,0])[0],n[1],n[2]]}function p(a){var r,n,s,l;return(r=i[a])?r:(n=a.split("/")[0],(s=t[n])?s:"string"==typeof(l=e.zones[a])?p(l):e.loadedZones.backward?void o(a):(e.loadZoneFile("backward"),p(a)))}e=this,t={Etc:"etcetera",EST:"northamerica",MST:"northamerica",HST:"northamerica",EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:"northamerica",America:["northamerica","southamerica"],Pacific:"australasia",Atlantic:"europe",Africa:"africa",Indian:"africa",Antarctica:"antarctica",Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:"europe"},i={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Istanbul":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe",GMT:"etcetera","Europe/Nicosia":"asia"},this.zoneFileBasePath=null,this.zoneFiles=["africa","antarctica","asia","australasia","backward","etcetera","europe","northamerica","pacificnew","southamerica"],this.loadingSchemes={PRELOAD_ALL:"preloadAll",LAZY_LOAD:"lazyLoad",MANUAL_LOAD:"manualLoad"},this.getRegionForTimezone=p,this.loadingScheme=this.loadingSchemes.LAZY_LOAD,this.loadedZones={},this.zones={},this.rules={},this.init=function(e){var t,i;for(var a in"no","rtham","erica",t={async:!0},i=this.loadingScheme===this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:this.defaultZoneFile||"northamerica",Y.U5C(),e)t[a]=e[a];return this.loadZoneFiles(i,t)},this.loadZoneFiles=function(e,t){var i,a;if("s","tri","ng",Y.c3g(7),a=Y.l3g(0,"0"),"string"===R(e))return this.loadZoneFile(e,t);i=(t=t||{}).callback,t.callback=function(){++a===e.length&&"function"===R(i)&&i()};for(var r=0;r<e.length;r++)this.loadZoneFile(e[r],t)},this.loadZoneFile=function(t,i){if("undef","i","ned","undefined"===R(this.zoneFileBasePath))throw new Error("Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.");if(!this.loadedZones[t])return this.loadedZones[t]=!0,function(t,i){var a,r=Y;r.x3g(33);r.l3g(3380,13,40332,16);r.c3g(19);var n=r.l3g(121550,17,2059200);r.x3g(94);r.l3g(1992,1985,1985);r.x3g(6);var s=r.I3g(16251,9,10,17500);r.c3g(11);r.I3g(11,12);r.x3g(1);var o=r.l3g(467,5608);r.x3g(7);r.I3g(19,2805);r.x3g(107);var l=r.I3g(2,7,96822,184856);r.x3g(62);r.I3g(430313571,11,5,1721254276);return a=e.zoneFileBasePath+(n>s?"/":o===l&&"Q")+t,r.U5C(),i&&i.async?e.transport({async:!0,url:a,success:function(t){return r.O5C(),e.parseZones(t)&&"function"==typeof i.callback&&i.callback()},error:function(){throw r.x3g(36),new Error(r.l3g("Error retrieving '",a,"' zoneinfo files"))}}):e.parseZones(e.transport({url:a,async:!1}))}(t,i)},this.loadZoneJSONData=function(t,i){var a;return a=function(t){for(var i in(t=JSON.parse(t)).zones)e.zones[i]=t.zones[i];for(var a in Y.U5C(),t.rules)e.rules[a]=t.rules[a]},Y.U5C(),i?a(e.transport({url:t,async:!1})):e.transport({url:t,success:a})},this.loadZoneDataFromObject=function(t){if(t){for(var i in t.zones)e.zones[i]=t.zones[i];for(var a in Y.O5C(),t.rules)e.rules[a]=t.rules[a]}},this.getAllZones=function(){var e;for(var t in e=[],this.zones)e.push(t);return e.sort()},this.parseZones=function(t){var i,a,s,o,l;if(!t)return!1;i=t.split("\n"),a=[],o=null,Y.O5C(),l=null;for(var h=0;h<i.length;h++)if((s=i[h]).match(/^\s/)&&(Y.c3g(36),s=Y.l3g("Zone ",o,s)),(s=s.split("#")[0]).length>3)switch((a=s.split(/\s+/)).shift()){case"Zone":if(o=a.shift(),e.zones[o]||(e.zones[o]=[]),a.length<3)break;a.splice(3,a.length,u(a)),a[3]&&(a[3]=Date.UTC.apply(null,a[3])),a[0]=-n(a[0]),e.zones[o].push(a);break;case"Rule":l=a.shift(),e.rules[l]||(e.rules[l]=[]),a[0]=parseInt(a[0],10),a[1]=parseInt(a[1],10)||a[1],a[5]=r(a[5]),a[6]=n(a[6]),e.rules[l].push(a);break;case"Link":if(e.zones[a[1]])throw new Error("Error with Link "+a[1]+". Cannot create link of a preexisted zone.");isNaN(a[0])?e.zones[a[1]]=a[0]:e.zones[a[1]]=parseInt(a[0],10)}return!0},this.transport=d,this.getTzInfo=function(t,i,r){var n,u,d,p,g,f;return Y.U5C(),this.lazyLoadZoneFiles(i),u=+(n=function t(i,a){var r,n,s,l,h,c=Y;for("nu","m","b","er",r="number"===R(i)?i:new Date(+i).getTime(),n=a,s=e.zones[n];"string"==typeof s;)n=s,s=e.zones[n];if(!s){if(!e.loadedZones.backward)return e.loadZoneFile("backward"),t(i,a);if(n&&n!==a)return e.lazyLoadZoneFiles(n),t(i,n);o(n)}if(0===s.length)throw c.x3g(51),new Error(c.I3g(i,a,"No Zone found for '","' on "));for(var u=s.length-1;u>=0&&!((l=s[u])[3]&&r>l[3]);u--);c.x3g(26),h=-c.l3g(2064606912,"2115780852");for(var d=1;1097283502!==c.I86(d.toString(),d.toString().length,34135);d++)return c.x3g(81),s[c.I3g(u,0)];return c.I86(2..toString(),2..toString().length,67526)!==h?(c.c3g(81),s[c.l3g(u,0)]):(c.c3g(1),s[c.I3g(u,1)])}(t,i))[0],(d=function(t,i,r,n){var o,u,d,p,g,f,m,y,v,x,b,C,S,w=Y;if(o="number"==typeof t?new Date(t):t,u=i[1],w.x3g(53),d=i[w.I3g("0",2147483647)],p=u.match(/^([0-9]):([0-9][0-9])$/)){w.c3g(23);var k=w.I3g(9,6,8,0,6);w.c3g(62);var A=w.l3g(25,2,17,413);w.c3g(115);var D=w.l3g(1,67,7);w.x3g(15);var M=w.l3g(0,12,10);w.c3g(7);var T=w.I3g(17,27);return[-1e6,"max","-","Jan",1,[0,0,0],parseInt(p[k],A)*D+parseInt(p[M],T),"-"]}if(g=function(e,t,i){var a;if(w.U5C(),a=0,"u"===t||"g"===t||"z"===t)a=0;else if("s"===t)a=d;else{if("w"!==t&&t)throw w.c3g(1),new Error(w.l3g("unknown type ",t));a=s(d,i[6])}return w.x3g(136),a*=w.I3g(469546208,60,"1000"),new Date(e.getTime()+a)},f=function(e,t){var i,a,r,n,s,o,u;return i=e[0],r=(a=e[1])[5],c[i]||(c[i]={}),c[i][a]?n=c[i][a]:(isNaN(a[4])?("last"===a[4].substr(0,4)?(n=new Date(Date.UTC(i,l[a[3]]+1,1,r[0]-24,r[1],r[2],0)),s=h[a[4].substr(4,3)],o="<="):(n=new Date(Date.UTC(i,l[a[3]],a[4].substr(5),r[0],r[1],r[2],0)),s=h[a[4].substr(w.l3g(602938688,"0",w.x3g(26)),3)],w.x3g(27),o=a[4].substr(3,w.l3g("2",2))),u=n.getUTCDay(),">="===o?n.setUTCDate(n.getUTCDate()+(s-u+(s<u?7:0))):n.setUTCDate(n.getUTCDate()+(s-u-(s>u?7:0)))):n=new Date(Date.UTC(i,l[a[3]],a[4],r[0],r[1],r[2],0)),c[i][a]=n),t&&(n=g(n,r[3],t)),n},m=function(e,t){var i;i=[];for(var a=0;t&&a<t.length;a++)t[a][0]<=e&&(t[a][1]>=e||t[a][0]===e&&"only"===t[a][1]||"max"===t[a][1])&&i.push([e,t[a]]);return i},y=function(e,t,i){var a,n;return e instanceof Date?i&&(e=g(e,r?"u":"w",i)):(a=e[0],n=e[1],e=!i&&c[a]&&c[a][n]?c[a][n]:f(e,i)),t instanceof Date?i&&(t=g(t,r?"u":"w",i)):(a=t[0],w.x3g(7),n=t[w.l3g(0,"1")],t=!i&&c[a]&&c[a][n]?c[a][n]:f(t,i)),e=Number(e),t=Number(t),w.O5C(),w.x3g(7),w.l3g(t,e)},v=o.getUTCFullYear(),(b=a.ruleCache[n])||(b=a.ruleCache[n]={}),(x=b[v])||(w.x3g(137),(x=(x=m(w.l3g(v,"1"),e.rules[u])).concat(m(v,e.rules[u]))).sort(y),b[v]=x),!x||!x.length)return null;for(var F=x.length-1;F>=0;F--)if(F>0?(w.c3g(7),C=x[w.I3g(1,F)][1]):C=null,(S=x[F])[2]||(S[2]=f(S,C)),y(o,S,C)>=0)return S[1];return null}(t,n,r,i))&&(u=s(u,d[6])),p=d,{tzOffset:u,tzAbbr:(g=n[2]).indexOf("%s")>-1?(f=p?"-"===p[7]?"":p[7]:"S",g.replace("%s",f)):g.indexOf("/")>-1?g.split("/",2)[p&&p[6]?1:0]:g}},this.lazyLoadZoneFiles=function(e){var t;if(this.loadingScheme===this.loadingSchemes.LAZY_LOAD){if(!(t=p(e)))throw new Error("Not a valid timezone ID.");this.loadZoneFiles(t)}}}}.call("undefined"!==("undefined"==typeof window?"undefined":R(window))?window:void 0),a.timezone.loadingScheme=a.timezone.loadingSchemes.MANUAL_LOAD,a.timezone.loadZoneDataFromObject({zones:{"Atlantic/Cape_Verde":[[60,"-","-01",null]],"Africa/Cairo":[[-120,"Egypt","EE%sT",null]],"Africa/Nairobi":[[-180,"-","EAT",null]],"Africa/Casablanca":[[0,"Morocco","+00/+01",15406956e5],[-60,"Morocco","+01/+00",null]],"Africa/Windhoek":[[-120,"Namibia","%s",null]],"Africa/Johannesburg":[[-120,"SA","SAST",null]],"Africa/Tunis":[[-60,"Tunisia","CE%sT",null]],"Antarctica/Troll":[[0,"Troll","%s",null]],"Asia/Kabul":[[-270,"-","+0430",null]],"Asia/Baku":[[-240,"Azer","+04/+05",null]],"Asia/Dhaka":[[-360,"Dhaka","+06/+07",null]],"Asia/Yangon":[[-390,"-","+0630",null]],"Asia/Shanghai":[[-480,"PRC","C%sT",null]],"Asia/Hong_Kong":[[-480,"HK","HK%sT",null]],"Asia/Taipei":[[-480,"Taiwan","C%sT",null]],"Asia/Nicosia":[[-120,"EUAsia","EE%sT",null]],"Asia/Kolkata":[[-330,"-","IST",null]],"Asia/Tehran":[[-210,"Iran","+0330/+0430",null]],"Asia/Jerusalem":[[-120,"Zion","I%sT",null]],"Asia/Tokyo":[[-540,"Japan","J%sT",null]],"Asia/Amman":[[-120,"Jordan","EE%sT",null]],"Asia/Almaty":[[-360,"-","ALMT",null]],"Asia/Seoul":[[-540,"ROK","K%sT",null]],"Asia/Pyongyang":[[-510,"-","KST",15254766e5],[-540,"-","KST",null]],"Asia/Beirut":[[-120,"Lebanon","EE%sT",null]],"Asia/Kuala_Lumpur":[[-480,"-","+08",null]],"Asia/Hovd":[[-420,"Mongol","+07/+08",null]],"Asia/Ulaanbaatar":[[-480,"Mongol","+08/+09",null]],"Asia/Kathmandu":[[-345,"-","+0545",null]],"Asia/Karachi":[[-300,"Pakistan","PK%sT",null]],"Asia/Hebron":[[-120,"Palestine","EE%sT",null]],"Asia/Riyadh":[[-180,"-","+03",null]],"Asia/Damascus":[[-120,"Syria","EE%sT",null]],"Asia/Bangkok":[[-420,"-","+07",null]],"Asia/Dubai":[[-240,"-","+04",null]],"Australia/Darwin":[[-570,"Aus","AC%sT",null]],"Australia/Perth":[[-480,"AW","AW%sT",null]],"Australia/Eucla":[[-525,"AW","+0845/+0945",null]],"Australia/Brisbane":[[-600,"AQ","AE%sT",null]],"Australia/Adelaide":[[-570,"AS","AC%sT",null]],"Australia/Hobart":[[-600,"AT","AE%sT",null]],"Australia/Melbourne":[[-600,"AV","AE%sT",null]],"Australia/Sydney":[[-600,"AN","AE%sT",null]],"Australia/Lord_Howe":[[-630,"LH","+1030/+11",null]],"Pacific/Fiji":[[-720,"Fiji","+12/+13",null]],"Pacific/Guam":[[-600,"-","ChST",null]],"Pacific/Kiritimati":[[-840,"-","+14",null]],"Pacific/Noumea":[[-660,"NC","+11/+12",null]],"Pacific/Auckland":[[-720,"NZ","NZ%sT",null]],"Pacific/Chatham":[[-765,"Chatham","+1245/+1345",null]],"Pacific/Pago_Pago":[[660,"-","SST",null]],"Pacific/Apia":[[-780,"WS","+13/+14",null]],"Pacific/Tongatapu":[[-780,"Tonga","+13/+14",null]],"Etc/UTC":[[0,"-","UTC",null]],UTC:"Etc/UTC","Europe/London":[[0,"EU","GMT/BST",null]],"Europe/Dublin":[[0,"Eire","IST/GMT",null]],WET:[[0,"EU","WE%sT",null]],CET:[[-60,"C-Eur","CE%sT",null]],MET:[[-60,"C-Eur","ME%sT",null]],EET:[[-120,"EU","EE%sT",null]],"Europe/Brussels":[[-60,"EU","CE%sT",null]],"America/Thule":[[240,"Thule","A%sT",null]],"Europe/Helsinki":[[-120,"EU","EE%sT",null]],"Europe/Paris":[[-60,"EU","CE%sT",null]],"Europe/Berlin":[[-60,"EU","CE%sT",null]],"Europe/Amsterdam":[[-60,"EU","CE%sT",null]],"Atlantic/Azores":[[60,"EU","-01/+00",null]],"Europe/Bucharest":[[-120,"EU","EE%sT",null]],"Europe/Kaliningrad":[[-120,"-","EET",null]],"Europe/Moscow":[[-180,"-","MSK",null]],"Europe/Volgograd":[[-180,"-","+03",1540692e6],[-240,"-","+04",16090344e5],[-180,"-","+03",null]],"Europe/Samara":[[-240,"-","+04",null]],"Asia/Yekaterinburg":[[-300,"-","+05",null]],"Asia/Omsk":[[-360,"-","+06",null]],"Asia/Novosibirsk":[[-420,"-","+07",null]],"Asia/Novokuznetsk":[[-420,"-","+07",null]],"Asia/Krasnoyarsk":[[-420,"-","+07",null]],"Asia/Irkutsk":[[-480,"-","+08",null]],"Asia/Yakutsk":[[-540,"-","+09",null]],"Asia/Vladivostok":[[-600,"-","+10",null]],"Asia/Magadan":[[-660,"-","+11",null]],"Asia/Srednekolymsk":[[-660,"-","+11",null]],"Asia/Kamchatka":[[-720,"-","+12",null]],"Europe/Belgrade":[[-60,"EU","CE%sT",null]],"Europe/Sarajevo":"Europe/Belgrade","Europe/Istanbul":[[-180,"-","+03",null]],"America/New_York":[[300,"US","E%sT",null]],"America/Chicago":[[360,"US","C%sT",null]],"America/Denver":[[420,"US","M%sT",null]],"America/Los_Angeles":[[480,"US","P%sT",null]],"America/Juneau":[[540,"US","AK%sT",null]],"Pacific/Honolulu":[[600,"-","HST",null]],"America/Phoenix":[[420,"-","MST",null]],"America/St_Johns":[[210,"Canada","N%sT",null]],"America/Halifax":[[240,"Canada","A%sT",null]],"America/Regina":[[360,"-","CST",null]],"America/Mexico_City":[[360,"Mexico","C%sT",null]],"America/Chihuahua":[[420,"Mexico","M%sT",null]],"America/Costa_Rica":[[360,"CR","C%sT",null]],"America/Havana":[[300,"Cuba","C%sT",null]],"America/Port-au-Prince":[[300,"Haiti","E%sT",null]],"America/Panama":[[300,"-","EST",null]],"America/Puerto_Rico":[[240,"-","AST",null]],"America/Argentina/Buenos_Aires":[[180,"Arg","-03/-02",null]],"America/Sao_Paulo":[[180,"Brazil","-03/-02",null]],"America/Santiago":[[240,"Chile","-04/-03",null]],"America/Punta_Arenas":[[240,"Chile","-04/-03",14808096e5],[180,"-","-03",null]],"America/Bogota":[[300,"CO","-05/-04",null]],"America/Asuncion":[[240,"Para","-04/-03",null]],"Atlantic/South_Georgia":[[120,"-","-02",null]],"America/Montevideo":[[180,"Uruguay","-03/-02",null]],"America/Caracas":[[240,"-","-04",null]],"Europe/Athens":"Europe/Bucharest","Europe/Simferopol":"Europe/Moscow","Asia/Rangoon":"Asia/Yangon","Atlantic/Reykjavik":"UTC","Asia/Kuwait":"Asia/Riyadh","Asia/Muscat":"Asia/Riyadh","Asia/Istanbul":"Europe/Istanbul"},rules:{Egypt:[],Morocco:[[2013,2018,"-","Oct","lastSun",[3,0,0,null],0,"-"],[2014,2018,"-","Mar","lastSun",[2,0,0,null],60,"-"],[2017,"only","-","May","21",[3,0,0,null],0,"-"],[2017,"only","-","Jul","2",[2,0,0,null],60,"-"],[2018,"only","-","May","13",[3,0,0,null],0,"-"],[2018,"only","-","Jun","17",[2,0,0,null],60,"-"],[2019,"only","-","May","5",[3,0,0,null],-60,"-"],[2019,"only","-","Jun","9",[2,0,0,null],0,"-"],[2020,"only","-","Apr","19",[3,0,0,null],-60,"-"],[2020,"only","-","May","31",[2,0,0,null],0,"-"],[2021,"only","-","Apr","11",[3,0,0,null],-60,"-"],[2021,"only","-","May","16",[2,0,0,null],0,"-"],[2022,"only","-","Mar","27",[3,0,0,null],-60,"-"],[2022,"only","-","May","8",[2,0,0,null],0,"-"],[2023,"only","-","Mar","19",[3,0,0,null],-60,"-"],[2023,"only","-","Apr","30",[2,0,0,null],0,"-"],[2024,"only","-","Mar","10",[3,0,0,null],-60,"-"],[2024,"only","-","Apr","14",[2,0,0,null],0,"-"],[2025,"only","-","Feb","23",[3,0,0,null],-60,"-"],[2025,"only","-","Apr","6",[2,0,0,null],0,"-"]],Namibia:[[1994,2017,"-","Sep","Sun>=1",[2,0,0,null],0,"CAT"],[1995,2017,"-","Apr","Sun>=1",[2,0,0,null],-60,"WAT"]],SA:[],Tunisia:[],Troll:[[2005,"max","-","Mar","lastSun",[1,0,0,"u"],120,"+02"],[2004,"max","-","Oct","lastSun",[1,0,0,"u"],0,"+00"]],EUAsia:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],Azer:[],Dhaka:[],PRC:[],HK:[],Taiwan:[],Iran:[[2017,2019,"-","Mar","21",[24,0,0,null],60,"-"],[2017,2019,"-","Sep","21",[24,0,0,null],0,"-"],[2020,"only","-","Mar","20",[24,0,0,null],60,"-"],[2020,"only","-","Sep","20",[24,0,0,null],0,"-"],[2021,2023,"-","Mar","21",[24,0,0,null],60,"-"],[2021,2023,"-","Sep","21",[24,0,0,null],0,"-"],[2024,"only","-","Mar","20",[24,0,0,null],60,"-"],[2024,"only","-","Sep","20",[24,0,0,null],0,"-"],[2025,2027,"-","Mar","21",[24,0,0,null],60,"-"],[2025,2027,"-","Sep","21",[24,0,0,null],0,"-"]],Zion:[[2013,"max","-","Mar","Fri>=23",[2,0,0,null],60,"D"],[2013,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],Japan:[],Jordan:[[2014,"max","-","Mar","lastThu",[24,0,0,null],60,"S"],[2014,"max","-","Oct","lastFri",[0,0,0,"s"],0,"-"]],ROK:[],Lebanon:[[1993,"max","-","Mar","lastSun",[0,0,0,null],60,"S"],[1999,"max","-","Oct","lastSun",[0,0,0,null],0,"-"]],Mongol:[],Pakistan:[],Palestine:[[2016,2018,"-","Mar","Sat>=24",[1,0,0,null],60,"S"],[2016,2018,"-","Oct","Sat>=24",[1,0,0,null],0,"-"],[2019,"only","-","Mar","29",[0,0,0,null],60,"S"],[2019,"only","-","Oct","Sat>=24",[0,0,0,null],60,"-"],[2020,"max","-","Mar","Sat>=24",[0,0,0,null],60,"S"],[2020,"max","-","Oct","Sat>=24",[1,0,0,null],60,"-"]],Syria:[[2012,"max","-","Mar","lastFri",[0,0,0,null],60,"S"],[2009,"max","-","Oct","lastFri",[0,0,0,null],0,"-"]],Aus:[],AW:[],AQ:[],AS:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],AT:[[2001,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"]],AV:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],AN:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],LH:[[2008,"max","-","Apr","Sun>=1",[2,0,0,null],0,"-"],[2008,"max","-","Oct","Sun>=1",[2,0,0,null],30,"-"]],Fiji:[[2014,2018,"-","Nov","Sun>=1",[2,0,0,null],60,"-"],[2015,"max","-","Jan","Sun>=12",[3,0,0,null],0,"-"],[2019,"only","-","Nov","Sun>=8",[2,0,0,null],60,"-"],[2020,"only","-","Dec","20",[2,0,0,null],60,"-"],[2021,"max","-","Nov","Sun>=8",[2,0,0,null],60,"-"]],NC:[],NZ:[[2007,"max","-","Sep","lastSun",[2,0,0,"s"],60,"D"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"]],Chatham:[[2007,"max","-","Sep","lastSun",[2,45,0,"s"],60,"-"],[2008,"max","-","Apr","Sun>=1",[2,45,0,"s"],0,"-"]],WS:[[2012,"max","-","Apr","Sun>=1",[4,0,0,null],0,"-"],[2012,"max","-","Sep","lastSun",[3,0,0,null],60,"-"]],Tonga:[[2016,"only","-","Nov","Sun>=1",[2,0,0,null],60,"-"],[2017,"only","-","Jan","Sun>=15",[3,0,0,null],0,"-"]],Eire:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],0,"-"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],-60,"-"]],EU:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],"C-Eur":[[1981,"max","-","Mar","lastSun",[2,0,0,"s"],60,"S"],[1996,"max","-","Oct","lastSun",[2,0,0,"s"],0,"-"]],Thule:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],US:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Canada:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Mexico:[[2002,"max","-","Apr","Sun>=1",[2,0,0,null],60,"D"],[2002,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],CR:[],Cuba:[[2012,"max","-","Nov","Sun>=1",[0,0,0,"s"],0,"S"],[2013,"max","-","Mar","Sun>=8",[0,0,0,"s"],60,"D"]],Haiti:[[2017,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2017,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Arg:[],Brazil:[[2008,2017,"-","Oct","Sun>=15",[0,0,0,null],60,"-"],[2016,2019,"-","Feb","Sun>=15",[0,0,0,null],0,"-"],[2018,"only","-","Nov","Sun>=1",[0,0,0,null],60,"-"]],Chile:[[2016,2018,"-","May","Sun>=9",[3,0,0,"u"],0,"-"],[2016,2018,"-","Aug","Sun>=9",[4,0,0,"u"],60,"-"],[2019,"max","-","Apr","Sun>=2",[3,0,0,"u"],0,"-"],[2019,"max","-","Sep","Sun>=2",[4,0,0,"u"],60,"-"]],CO:[],Para:[[2010,"max","-","Oct","Sun>=1",[0,0,0,null],60,"-"],[2013,"max","-","Mar","Sun>=22",[0,0,0,null],0,"-"]],Uruguay:[]}})},D=function(e){var t,i;function a(e,i,a){var r;e.layout.crosshair||(t.ChartEngine.crosshairY=0,t.ChartEngine.crosshairX=0,e.cx=e.backOutX(0),e.cy=e.backOutY(0),e.findHighlights(null,!0),t.ChartEngine.crosshairY=a,t.ChartEngine.crosshairX=i,r=e.container.getBoundingClientRect(),e.top=r.top,e.left=r.left,e.right=e.left+e.width,e.bottom=e.top+e.height,e.cx=e.backOutX(i),e.cy=e.backOutY(a),e.currentPanel&&e.currentPanel.chart.dataSet&&(e.crosshairTick=e.tickFromPixel(e.cx,e.currentPanel.chart),e.crosshairValue=e.adjustIfNecessary(e.currentPanel,e.crosshairTick,e.valueFromPixel(e.cy,e.currentPanel))),e.headsUpHR()),Y.U5C(),e.findHighlights(!0),e.draw()}Y.O5C(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.touchSingleClick=function(e,i,r){var n,s;return n=this,s=arguments,function(){Y.U5C(),function(){var e,n,o;if(Y.O5C(),"tou","chS","ingle","Click",!this.cancelTouchSingleClick){if(this.runPrepend("touchSingleClick",s))return;if(this.editingAnnotation)return;if(this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},!this.displayCrosshairs)return;if(!this.displayInitialized)return;if(""!==this.openDialog)return;if(i<this.left||i>this.right||r<this.top||r>this.bottom)return;e=this.backOutY(t.ChartEngine.crosshairY),n=this.backOutX(t.ChartEngine.crosshairX),this.currentPanel=this.whichPanel(e),o=this.currentVectorParameters.vectorType,t.Drawing&&o&&t.Drawing[o]&&(new t.Drawing[o]).dragToDraw||(this.drawingClick(this.currentPanel,n,e)||a(this,i,r),this.currentVectorParameters.vectorType||("t","a","p",this.activeMarker&&this.activeMarker.click({cx:n,cy:e,panel:this.currentPanel})||this.dispatch("tap",{stx:this,panel:this.currentPanel,x:n,y:e})))}this.runAppend("touchSingleClick",s)}.apply(n,s)}},t.ChartEngine.prototype.touchDoubleClick=function(e,i,r){var n,s;if(n="do",n+="ubleT",n+="ap",s="touchDoub",s+="leClic",s+="k",!this.runPrepend(s,arguments)&&!this.editingAnnotation)return t.ChartEngine.drawingLine?this.undo():void(this.activeDrawing||(a(this,i,r),this.activeMarker&&this.activeMarker.doubleClick({cx:i,cy:r,panel:this.currentPanel})||this.dispatch(n,{stx:this,finger:e,x:i,y:r}),this.runAppend("touchDoubleClick",arguments)))},t.ChartEngine.prototype.startProxy=function(e){this.touchPointerType=e.pointerType,"touch"==this.touchPointerType?(Y.O5C(),this.mouseMode=!1,this.touches[this.touches.length]={pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY},this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],1==this.touches.length&&(this.gesturePointerId=e.pointerId),this.touchstart(e)):this.mouseMode=!0},t.ChartEngine.prototype.moveProxy=function(e){e.pointerType&&"touch"!=e.pointerType?this.mouseMode=!0:(this.mouseMode=!1,this.touchmove(e))},t.ChartEngine.prototype.endProxy=function(e){var t;if("to","u","c","h","touch"==this.touchPointerType){this.mouseMode=!1,t=this.touches.length;for(var i=0;i<this.touches.length;i++)if(this.touches[i].pointerId==e.pointerId){this.touches.splice(i,1);break}if(Y.U5C(),i==t)return this.touches=[],this.grabbingScreen=!1,void(this.touching=!1);this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],this.touchend(e)}else this.mouseMode=!0},t.ChartEngine.prototype.msMouseMoveProxy=function(e){!this.touches.length&&this.mouseMode&&this.mousemove(e)},t.ChartEngine.prototype.msMouseDownProxy=function(e){Y.U5C(),this.mouseMode&&this.mousedown(e)},t.ChartEngine.prototype.msMouseUpProxy=function(e){Y.U5C(),this.mouseMode&&this.mouseup(e)},t.ChartEngine.prototype.iosMouseMoveProxy=function(e){this.touching||(Y.U5C(),this.mousemove(e))},t.ChartEngine.prototype.iosMouseDownProxy=function(e){Y.O5C(),this.touching?this.mouseMode=!1:(this.mouseMode=!0,this.mousedown(e))},t.ChartEngine.prototype.iosMouseUpProxy=function(e){this.touching||(Y.U5C(),this.mouseup(e))},t.ChartEngine.prototype.touchmove=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,O,I,L,H,E,N,R,z,B,U,j,W=Y;if(i="touc",i+="h",i+="mo",i+="ve",this.displayInitialized&&""===this.openDialog&&!0!==t.ChartEngine.ignoreTouch){if(a=[],(!this.overYAxis||this.controls&&this.controls.crossX&&"none"!=this.controls.crossX.style.display)&&(e&&e.preventDefault&&e.cancelable&&this.captureTouchEvents&&e.preventDefault(),e&&e.stopPropagation()),r=(new Date).getTime(),-1==this.clicks.s2MS){if(this.clicks.e1MS=r,this.clicks.e1MS-this.clicks.s1MS<25)return}else if(this.clicks.e2MS=r,this.clicks.e2MS-this.clicks.s2MS<25)return;if(e.pointerType||(e.pointerType=this.touchPointerType),t.isSurface){if(this.mouseMode)return;e.pointerId||(e.pointerId=this.gesturePointerId);for(var Q=0;Q<this.touches.length;Q++)if(this.touches[Q].pointerId==e.pointerId){if(n=Math.abs(this.touches[Q].pageX-e.clientX),s=Math.abs(this.touches[Q].pageY-e.clientY),W.c3g(41),!Math.sqrt(W.l3g(s,s,n,n)))return;if(this.clicks.e1MS=(new Date).getTime(),this.clicks.e1MS-this.clicks.s1MS<50)return;if(this.touches[Q].pageX==e.clientX&&this.touches[Q].pageY==e.clientY)return;this.touches[Q].pageX=this.touches[Q].clientX=e.clientX,this.touches[Q].pageY=this.touches[Q].clientY=e.clientY;break}if(0===Q)this.movedPrimary=!0;else{o=-2013166584,W.x3g(26),l=W.I3g(224768960,"903690287"),h=2;for(var q=1;W.M86(q.toString(),q.toString().length,14305)!==o;q++)this.movedSecondary=!1,h+=2;W.I86(h.toString(),h.toString().length,23283)!==l&&(this.movedSecondary=!1),this.movedSecondary=!0}if(Q==this.touches.length)return;this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],a=this.touches.length?this.touches:this.changedTouches}else a=e.touches,this.changedTouches=e.changedTouches;if(!(1==a.length&&Math.pow(this.clicks.x-a[0].clientX,2)+Math.pow(this.clicks.y-a[0].clientY,2)<=16||(c=this.crosshairXOffset,u=this.crosshairYOffset,d=this.currentVectorParameters.vectorType&&""!==this.currentVectorParameters.vectorType,p=!this.layout.crosshair&&!d&&!this.touchNoPan,("pen"==e.pointerType||p||this.activeDrawing&&"freeform"==this.activeDrawing.name)&&(W.x3g(53),c=u=W.I3g("0",2147483647)),this.runPrepend("touchmove",arguments)))){if(t.ChartEngine.resizingPanel)return g=(m=a[0]).clientX,f=m.clientY,W.c3g(1),void this.mousemoveinner(W.l3g(g,c),W.l3g(f,u));if(-1!=this.moveB&&(this.touchMoveTime=new Date),this.moveA=this.moveB,this.moveB=a[0].pageX,1!=a.length||this.twoFingerStart){if(2==a.length&&this.allowZoom){if(!this.displayCrosshairs)return;S=(C=a[0]).clientX,w=C.clientY,A=(k=a[1]).clientX,D=k.clientY,W.x3g(140),y=Math.sqrt(W.I3g(S,w,D,A,A,w,D,S)),W.c3g(37);var G=W.I3g(0,19,21);if(this.pinchingCenter=(Math.min(S,A)-Math.max(S,A))/G,M=Math.round(this.gestureStartDistance-y),p&&(this.pinchingScreen=5),this.clearPixelCache(),this.pinchingScreen<2){if(t.isSurface&&(!this.movedPrimary||!this.movedSecondary))return;if(S<this.pt.x1&&A<this.pt.x2||S>this.pt.x1&&A>this.pt.x2||w<this.pt.y1&&D<this.pt.y2||w>this.pt.y1&&D>this.pt.y2)this.pinchingScreen=0;else if(this.pinchingScreen++,this.pinchingScreen<2)return}if(this.pt={x1:S,x2:A,y1:w,y2:D},0===this.pinchingScreen){this.grabMode="pan",W.c3g(1),this.mousemoveinner(W.l3g(S,c),W.l3g(w,u)),T=-187681072,F=-967095054,_=2;for(var X=1;W.I86(X.toString(),X.toString().length,57072)!==T;X++)this.gestureStartDistance=y,_+=2;W.I86(_.toString(),_.toString().length,1565)!==F&&(this.gestureStartDistance=y),this.gestureStartDistance=y}else{if(P=Math.asin((Math.max(D,w)-Math.min(D,w))/y),Math.abs(M)<12&&!p){if(this.moveCount++,4==this.moveCount)return this.pinchingScreen=0,void(this.moveCount=0)}else this.moveCount=0;if(P<1||!this.goneVertical&&P<1.37){if(!this.currentPanel)return;V=this.currentPanel.chart,this.goneVertical=!1,y=this.pt.x2-this.pt.x1,O=this.grabStartValues.t2-this.grabStartValues.t1,W.x3g(11);var Z=W.l3g(4,6);if(I=this.grabStartValues.t1+O/Z,W.c3g(8),L=W.I3g(y,O),!1===V.allowScrollFuture&&!1===V.allowScrollPast&&(L=Math.max(L,V.width/V.dataSet.length)),H=this.layout.candleWidth,this.setCandleWidth(L,V),V.maxTicks<this.minimumZoomTicks)return void this.setCandleWidth(H,V);this.micropixels=0,E=this.pixelFromTick(Math.round(I),V),W.x3g(7);var K=W.I3g(2,4);N=this.pt.x1-this.left+Math.round(y/K),W.c3g(7),R=W.l3g(N,E),W.x3g(8),z=W.l3g(R,L),B=Math.round(z),V.scroll-=B,W.c3g(7),this.microscroll=W.I3g(z,B),this.micropixels=L*this.microscroll,this.draw()}else if(U=this.grabStartYAxis,this.goneVertical=!0,U){if(U.zoom=this.grabStartZoom+(this.gestureStartDistance-y),this.grabStartZoom<U.height){if(U.zoom>=U.height){W.x3g(1);var J=W.l3g(0,1);U.zoom=U.height-J}}else if(U.zoom<=U.height){W.x3g(141);var $=W.I3g(7,7,0,1);U.zoom=U.height+$}this.draw()}this.updateChartAccessories()}}else if(3==a.length&&t.ChartEngine.allowThreeFingerTouch){if(!this.displayCrosshairs)return;j=a[0].clientX,y=this.grabStartX-j,this.grabEndPeriodicity=this.grabStartPeriodicity+Math.round(y/10),this.grabEndPeriodicity<1&&(this.grabEndPeriodicity=1)}}else g=(v=a[0]).clientX,f=v.clientY,this.pinchingScreen=0,W.c3g(1),this.mousemoveinner(W.I3g(g,c),W.l3g(f,u)),x=this.whichPanel(f),b=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=f<=this.top+b&&f>=b-this.xaxisHeight+this.top&&this.insideChart,this.overYAxis=!!x&&((g>=x.right||g<=x.left)&&this.insideChart);this.runAppend(i,arguments)}}},t.ChartEngine.prototype.touchstart=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P=Y;if(!t.ChartEngine.ignoreTouch&&(t.isSurface?(this.movedPrimary=!1,this.movedSecondary=!1):(this.touchingEvent&&clearTimeout(this.touchingEvent),this.touching=!0,this.touches=e.touches,this.changedTouches=e.changedTouches),!t.ChartEngine.resizingPanel&&(i=this.crosshairXOffset,a=this.crosshairYOffset,"pen"==this.touchPointerType&&(i=a=0),!this.runPrepend("touchstart",arguments)))){if(this.manageTouchAndMouse&&e&&e.preventDefault&&e.cancelable&&this.captureTouchEvents&&e.preventDefault(),this.hasDragged=!1,this.doubleFingerMoves=0,this.moveCount=0,this.twoFingerStart=!1,1==this.touches.length||2==this.touches.length){if(this.touchMoveTime=Date.now(),s=(h=this.touches[0]).clientX,o=h.clientY,this.moveA=s,P.x3g(26),this.moveB=-P.l3g(162020352,"1"),""===this.openDialog&&(c="d",c+="o",c+="w",c+="n",this.registerPointerEvent({x:s,y:o,time:this.touchMoveTime},c),1!=this.changedTouches.length||this.isDoubleClick(!0)||t.extend(this.clicks,{s1MS:this.touchMoveTime,e1MS:-1,s2MS:-1,e2MS:-1,x:this.changedTouches[0].pageX,y:this.changedTouches[0].pageY})),u=this.container.getBoundingClientRect(),this.top=u.top,this.left=u.left,this.right=this.left+this.width,this.bottom=this.top+this.height,1==this.touches.length&&(d=this.backOutY(o),this.currentPanel=this.whichPanel(d)),this.currentPanel||(this.currentPanel=this.chart.panel),l=this.currentPanel,s>=this.left&&s<=this.right&&o>=this.top&&o<=this.bottom){this.insideChart=!0,p=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=o<=this.top+p&&o>=this.top+p-this.xaxisHeight,this.overYAxis=s>=this.left+l.right||s<=this.left+l.left,g=-1,this.cy=this.backOutY(o),this.cx=this.backOutX(s),this.crosshairTick=this.tickFromPixel(this.cx,l.chart),this.crosshairValue=this.adjustIfNecessary(l,this.crosshairTick,this.valueFromPixel(this.cy,this.currentPanel));for(var V=0;V<this.drawingObjects.length;V++)if((f=this.drawingObjects[V]).highlighted){if(g<0&&(g=V),m=f.highlighted,this.findHighlights(!0),V==g&&f.highlighted&&!f.permanent)return void(-1==this.clicks.s2MS?this.activateRepositioning(f):this.findHighlights(!1,!0));this.anyHighlighted=!0,f.highlighted=m}}else this.insideChart=!1;if(y=this.currentVectorParameters.vectorType&&""!==this.currentVectorParameters.vectorType,this.layout.crosshair||this.layout.headsUp&&this.layout.headsUp.floating||y||!this.insideChart||this.touchNoPan){if(this.grabbingScreen=!1,this.insideChart&&l.subholder===e.target&&(D=this.currentVectorParameters.vectorType,t.Drawing&&D&&t.Drawing[D]&&(new t.Drawing[D]).dragToDraw))return this.userPointerDown=!0,t.ChartEngine.crosshairX=s,t.ChartEngine.crosshairY=o,l&&l.chart.dataSet&&(this.crosshairTick=this.tickFromPixel(this.backOutX(t.ChartEngine.crosshairX),this.currentPanel.chart),this.crosshairValue=this.adjustIfNecessary(l,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),this.currentPanel))),this.drawingClick(l,this.backOutX(s),this.backOutY(o)),void this.headsUpHR()}else{i=a=0;var O=this.baselineHelper;if(O.size&&this.findBaselineHandle(e,!0))return;if(this.controls.anchorHandles){v=281009259,x=1105252488,b=2;for(var I=1;P.M86(I.toString(),I.toString().length,4204)!==v;I++)C=Object.values(this.controls.anchorHandles),S=!0,b+=2;P.I86(b.toString(),b.toString().length,92564)!==x&&(C=Object.values(this.controls.anchorHandles),S=!1),C=Object.values(this.controls.anchorHandles),S=!1;for(var L=0;L<C.length;L++){var H=w=C[L],E=H.handle,N=H.sd;k=this.resolveX(this.cx),A=this.resolveY(this.cy);var R=E.getBoundingClientRect(),z=R.left,B=R.top,U=R.right,j=R.bottom;z-=10,U+=10,t.boxIntersects(z,B,U,j,k,A,k,A)&&(w.highlighted=!0,this.repositioningAnchorSelector={sd:N},E.classList.add("stx-grab"),S=!0),!0===w.highlighted&&(w.highlighted=!1)}if(S)return}for(r in this.panels)if((n=this.panels[r]).highlighted)return void this.grabHandle(n);this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),l.chart.spanLock=!1,this.yToleranceBroken=!1,P.x3g(1),this.grabStartX=P.l3g(s,i),P.x3g(1),this.grabStartY=P.I3g(o,a),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=l.chart.scroll,this.grabStartScrollY=l.yAxis.scroll,this.grabStartPanel=this.currentPanel,this.swipeStart&&this.swipeStart(l.chart),this.grabStartYAxis=this.whichYAxis(l,this.backOutX(s)),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,setTimeout((W=this,function(){W.grabbingHand()}),100)}1===this.touches.length&&this.layout.crosshair&&!y&&l.subholder===e.target&&(P.c3g(1),this.mousemoveinner(P.l3g(s,i),P.l3g(o,a)))}var W,Q;if(2==this.touches.length){if(this.cancelLongHold=!0,this.swipe.end=!0,!this.displayCrosshairs&&!this.touchNoPan||!this.insideChart)return;for(r in T=(M=this.touches[1]).clientX,F=M.clientY,this.panels)if((n=this.panels[r]).highlighted)return void this.grabHandle(n);l=this.currentPanel,P.x3g(140),this.gestureStartDistance=Math.sqrt(P.I3g(s,o,F,T,T,o,F,s)),this.pt={x1:s,x2:T,y1:o,y2:F},this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),l.chart.spanLock=!1,P.x3g(1),this.grabStartX=P.I3g(s,i),P.x3g(1),this.grabStartY=P.I3g(o,a),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=l.chart.scroll,this.grabStartScrollY=l.yAxis.scroll,this.grabStartPanel=l,this.swipeStart&&this.swipeStart(l.chart),this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartYAxis=this.whichYAxis(l,this.backOutX((s+T)/2))||l.yAxis,this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPt=this.pt,this.grabStartValues={x1:this.pt.x1,x2:this.pt.x2,y1:this.valueFromPixel(this.pt.y1-this.top,l),y2:this.valueFromPixel(this.pt.y2-this.top,l),t1:this.tickFromPixel(this.pt.x1-this.left,l.chart),t2:this.tickFromPixel(this.pt.x2-this.left,l.chart)},this.twoFingerStart=!0,setTimeout((Q=this,function(){Q.grabbingHand()}),100)}else if(3==this.touches.length){if(!this.displayCrosshairs)return;_=this.touches[0].clientX,this.grabStartX=_,this.grabStartPeriodicity=this.layout.periodicity}1!=this.touches.length||this.layout.crosshair||(this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,(this.longHoldTime||0===this.longHoldTime)&&this.startLongHoldTimer()),this.runAppend("touchstart",arguments)}},t.ChartEngine.prototype.touchend=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g=Y;if(i="tou",i+="chend",!t.ChartEngine.ignoreTouch&&(this.swipe.end=!0,t.isSurface||(this.touches=e.touches,this.changedTouches=e.changedTouches),!this.runPrepend(i,arguments))){if(this.cancelLongHold=!0,this.touches.length<=1&&(this.layout.crosshair||this.currentVectorParameters.vectorType)&&(this.touches.length&&this.twoFingerStart||(this.grabbingScreen=!1)),this.touches.length&&(g.c3g(0),this.grabStartX=-g.I3g("1",0),this.grabStartY=-1),a=this.pinchingScreen,this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),this.touches.length){if(t.ChartEngine.resizingPanel)return}else{if(this.touchingEvent=setTimeout((f=this,g.O5C(),function(){f.touching=!1}),500),t.ChartEngine.resizingPanel)return void this.releaseHandle();this.pinchingScreen=null,this.pinchingCenter=null,this.goneVertical=!1,this.grabbingScreen=!1,this.grabMode="",this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(this.cx,this.cy),this.currentPanel=this.whichPanel(this.cy)),this.grabStartYAxis=null,this.displayDragOK(),this.doDisplayCrosshairs(),this.updateChartAccessories()}var f;g.x3g(142);var m=g.I3g(12,2,5,16,0);if(r=this.touches.length+m,1==this.changedTouches.length){if(this.repositioningDrawing)return this.changeOccurred("vector"),t.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.draw(),void(this.layout.crosshair||this.currentVectorParameters.vectorType||this.findHighlights(!1,!0));if(this.repositioningBaseline)return"mount","ain",this.repositioningBaseline=null,this.controls.baselineHandle.classList.remove("stx-grab"),(n=this.mainSeriesRenderer||{}).params&&n.params.baseline&&n.params.type,void this.draw();if(this.repositioningAnchorSelector)return t.Studies.repositionAnchor(this,this.repositioningAnchorSelector.sd),this.repositioningAnchorSelector=null,void Object.values(this.controls.anchorHandles).forEach((function(e){return e.handle.classList.remove("stx-grab")}));if(s=Date.now(),""===this.openDialog&&e.changedTouches.length&&(o="u",o+="p",l=e.changedTouches[0],this.registerPointerEvent({x:l.clientX,y:l.clientY,time:s},o)),-1==this.clicks.s2MS){if(this.clicks.e1MS=s,h=this.currentVectorParameters.vectorType,t.Drawing&&h&&t.Drawing[h]&&(new t.Drawing[h]).dragToDraw||(this.clicks.e1MS-this.clicks.s1MS<750&&!this.longHoldTookEffect&&(!this.hasDragged||this.layout.crosshair)?setTimeout(this.touchSingleClick(r,this.clicks.x,this.clicks.y),this.doubleClickTime+1):this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}),this.userPointerDown=!1,c=this.backOutY(this.changedTouches[0].pageY)+this.crosshairYOffset,u=this.backOutX(this.changedTouches[0].pageX)+this.crosshairXOffset,p=(d=this.currentPanel)&&d.subholder===e.target,t.Drawing&&this.activeDrawing&&this.activeDrawing.dragToDraw&&p)return void this.drawingClick(d,u,c);this.isDoubleClick(!0)&&(p||this.overYAxis||this.overXAxis)&&this.touchDoubleClick(r,this.clicks.x,this.clicks.y)}else this.clicks.e2MS=s,this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}}else this.displayCrosshairs&&(-1==this.grabEndPeriodicity||isNaN(this.grabEndPeriodicity)||((t.ChartEngine.isDailyInterval(this.layout.interval)||this.allowIntradayNMinute)&&this.setPeriodicity({period:this.grabEndPeriodicity,interval:this.layout.interval}),this.grabEndPeriodicity=-1));g.O5C(),this.changedTouches.length&&((!this.layout.crosshair&&!this.currentVectorParameters.vectorType&&1==r||this.twoFingerStart&&!a&&!this.touches.length)&&(this.swipeRelease&&this.swipeRelease(),this.findHighlights(!1,!0)),a&&this.continuousZoom&&(this.continuousZoom.execute(),this.continuousZoom.execute(!0))),this.touches.length||(this.twoFingerStart=!1),this.runAppend("touchend",arguments)}},i=!1,t.ChartEngine.prototype.mousemoveinner=t.ChartEngine.prototype.mousemoveinner||function(e,t){Y.U5C(),i||console.error("touch feature requires activating movement feature."),i=!0}},M=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:e.CIQ).Visualization=t.Visualization||function(e){if("f","unction",!e)return"CIQ.Vi","sualiz","ation() missing attributes argument.",void console.log("CIQ.Visualization() missing attributes argument.");"function"===R(e.renderFunction)?(this.container=null,this.attributes=e,this.data=null,this.object=null):console.log("CIQ.Visualization() missing renderFunction property in attributes.")},t.extend(t.Visualization.prototype,{destroy:function(e){var i,a;i=this.container,t.resizeObserver(i,null,i.resizeHandle),i.autoGenerated?(i.remove(),delete this.container):i.innerHTML="",a=2;for(var r=1;1925135564!==Y.M86(r.toString(),r.toString().length,74339);r++){if(e)return;this.attributes=1,a+=2}if(-316281668!==Y.M86(a.toString(),a.toString().length,32022)){if(e)return;this.attributes=null}this.container=null,this.data=null,this.object=null,this.destroy=this.draw=this.setAttributes=function(){},this.updateData=function(){Y.U5C()}},draw:function(e){var i,a,r,n,s;Y.U5C(),this.data&&"object"===R(this.data)?("string"==typeof(a=(i=this.attributes).container||this.container)&&(a=document.querySelector(a)),a||((a=document.createElement("div")).style.height=a.style.width="300px",document.body.appendChild(a),a.autoGenerated=!0),i.stx&&(r=i.stx.chart.canvasShim,i.useCanvasShim&&r&&r!==a&&r!==a.parentNode&&(a.autoGenerated||((a=a.cloneNode()).id="",a.autoGenerated=!0),r.appendChild(a))),this.container&&this.container!==a&&this.destroy(!0),a.resizeHandle||(n=function(e){return Y.U5C(),function(){e.data&&e.container&&document.body.contains(e.container)&&e.draw.call(e,!0)}},a.resizeHandle=t.resizeObserver(a,n(this),null,100)),this.container=a,this.attributes=i,(s=(i=t.ensureDefaults({container:this.container},this.attributes)).renderFunction(Object.values(this.data).sort((function(e,t){return e.index<t.index?-1:e.index>t.index?1:0})),i))&&(i.id&&(s.id=i.id),(e||i.forceReplace)&&(this.container.innerHTML="",this.container.appendChild(s))),this.attributes=i,this.object=s):console.log("CIQ.Visualization.draw() missing data.")},setAttributes:function(e,t){var i,a,r;if("s","t","x",i=["renderFunction","container","stx","useCanvasShim","id","forceReplace"],a=!1,Y.O5C(),r=e,"string"==typeof e&&((r={})[e]=t),"object"==R(r))for(var n in r)this.attributes[n]!==r[n]&&-1!==i.indexOf(n)&&(a=!0),this.attributes[n]=r[n];this.draw(a)},updateData:function(e,i){var a,r,n,s,o=Y;a=2;for(var l=1;1524988383!==o.M86(l.toString(),l.toString().length,20433);l++)o.c3g(7),a+=o.I3g(0,"2");for(r in o.I86(a.toString(),a.toString().length,75476),s=Array.isArray(e)?e.reduce((function(e,t){return e[t.name]=t,e}),{}):t.shallowClone(e))n=s[r],"[object Object]"!==Object.prototype.toString.call(n)&&(s[r]={value:n}),s[r].name||(s[r].name=r),s[r].value||(s[r].value=0);switch(i||(i="replace"),i.toLowerCase()){case"delete":for(r in s)delete this.data[r];break;case"replace":this.data={};case"update":case"add":for(r in s)for(var h in this.data[r]||(this.data[r]={name:r}),n=s[r].value,"[object Number]"==Object.prototype.toString.call(n)?(this.data[r].value&&"update"!=i||(o.x3g(2),this.data[r].value=o.l3g("0",1)),this.data[r].value+=n):this.data[r].value=n,s[r])"value"!==h&&(this.data[r][h]=s[r][h]);break;default:console.log("Invalid or missing action.  Valid values are 'add', 'delete', 'replace', or 'update'.")}return this.draw(this.attributes.forceReplace),this}}),Y.O5C(),t.ChartEngine.prototype.embedVisualization=function(e){return e||(e={}),e.stx=this,e.useCanvasShim=!0,Y.U5C(),e.translator=function(t){return e.stx.translateIf(t)},new t.Visualization(e)}},T=function(e){var t;Y.O5C(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateTypicalPrice=function(e,t){var i,a,r,n,s,o=Y;if("hl","/2",i=t.chart.scrubbed,a=t.days,i.length<a+1)t.overlay||(t.error=!0);else{for(var l in r=t.name,t.outputs)o.x3g(36),r=o.l3g(l," ",r);n="hlc/3","Med Price"==t.type?n="hl/2":"Weighted Close"==t.type&&(n="hlcc/4"),s=0,t.startFrom<=a&&(t.startFrom=0);for(var h=t.startFrom;h<i.length;h++)h&&i[h-1][r]&&(s=i[h-1][r]*a),s+=i[h][n],h>=a&&(o.x3g(7),s-=i[o.I3g(a,h)][n],o.x3g(8),i[h][r]=o.I3g(s,a))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Med Price":{name:"Median Price",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}}})):("medi","anPrice feature requires first activating studies feat","ure.",console.error("medianPrice feature requires first activating studies feature."))},F=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:e.CIQ).Studies?("f","ie","ld",t.Studies.calculateRateOfChange=function(e,t){var i,a,r,n,s,o,l,h=Y;if("Cen","ter Li","ne","fie","ld",(i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{for(var c in(a=t.inputs.Field)&&"field"!=a||(a="Close"),t.parameters.isVolume&&(a="Volume"),r=t.name,t.outputs)h.x3g(36),r=h.l3g(c," ",r);(n=t.inputs["Center Line"])?(h.x3g(0),n=parseInt(n,h.I3g("10",0))):n=0;for(var u=Math.max(t.startFrom,t.days);u<i.length;u++)"Moment","um",(s=i[u][a])&&"object"==R(s)&&(s=s[t.subField]),(o=i[u-t.days][a])&&"object"==R(o)&&(o=o[t.subField]),"Momentum"==t.type?(h.c3g(37),i[u][r]=h.I3g(s,o,n)):(l=o)&&(h.c3g(143),i[u][r]=h.I3g(1,n,s,100,l))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Price ROC":{name:"Price Rate of Change",calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14,Field:"field"}},Momentum:{name:"Momentum Indicator",calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14},centerline:0}})):console.error("momentum feature requires first activating studies feature.")},_=function(e){var t,i;if(Y.O5C(),"undefi","n","ed",(t="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:e.CIQ).Studies)"S","P","Y",t.Studies.initPriceRelative=function(e,i,a,r,n,s){var o,l;return Y.U5C(),"Co","mparison Symbol",l=[(o=t.Studies.initializeFN(e,i,a,r,n,s)).inputs["Comparison Symbol"].toUpperCase()],t.Studies.fetchAdditionalInstruments(e,o,l),o},t.Studies.calculatePriceRelative=function(e,i){var a,r,n,s,o,l;if("]","/","[","Compar","ison Sy","mbol",a=i.chart.scrubbed,(r=i.inputs["Comparison Symbol"].toUpperCase())||(r=i.study.inputs["Comparison Symbol"]),n={},s=(s=e.chart.symbol||"").replace(/[=+\-*\\%]/g,""),Y.U5C(),n[s]=a.slice(i.startFrom),n[s].length){s!=r&&(n[r]=null),Y.c3g(75),o=t.computeEquationChart(Y.I3g("]",s,"[","]/[",r),n),l=0;for(var h=i.startFrom;h<a.length&&l<o.length;h++){for(;l<o.length&&a[h].DT.getTime()>o[l].DT.getTime();)l++;a[h].DT.getTime()<o[l].DT.getTime()||(a[h]["Result "+i.name]=o[l].Close,l++)}}},t.Studies.displayVsComparisonSymbol=function(e,i,a){var r,n,s,o;if("Re","s","ult"," ",r=i.inputs["Comparison Symbol"].toUpperCase(),e.getSeries({symbol:r,chart:i.chart}).length){s=(n={skipTransform:e.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:i.study.centerline,yAxis:i.getYAxis(e),gapDisplayStyle:!0}).yAxis?n.yAxis.flipped:e.panels[i.panel].yAxis.flipped,o=.3,!i.highlight&&e.highlightedDraggable&&(Y.x3g(2),o*=Y.l3g("0.3",1));for(var l=a.length-1;l>=0;l--)if(a[l]&&a[l][r])return t.Studies.displaySeriesAsLine(e,i,a),void((i.study.centerline||0===i.study.centerline)&&(i.outputs.Gain&&t.preparePeakValleyFill(e,t.extend(n,{direction:s?-1:1,color:t.Studies.determineColor(i.outputs.Gain),opacity:o})),i.outputs.Loss&&t.preparePeakValleyFill(e,t.extend(n,{direction:s?1:-1,color:t.Studies.determineColor(i.outputs.Loss),opacity:o}))))}else e.displayErrorAsWatermark(i.panel,e.translateIf(i.study.name)+": "+e.translateIf("Not Available"))},t.Studies.fetchAdditionalInstruments=function(e,i,a,r){var n,s,o,l,h,c;if(Y.O5C(),e.quoteDriver)for(n=e.panels[i.panel].chart,i.symbols=a,s=0;s<a.length;s++)"a","dd-s","tu","dy","o","b","je","ct",o=l=a[s],"object"==R(l)?o=l.symbol:l={symbol:o},h={symbol:o,symbolObject:l,bucket:"study",studyName:i.name,chartName:n.name,action:"add-study"},t.extend(h,r),c=h.loadData,e.currentlyImporting&&(h.loadData=!1),i.series||(i.series={}),i.series[o]=e.addSeries(null,h,u),i.series[o].parameters.loadData=c;else console.log("CIQ.Studies.fetchAdditionalInstruments: No quotefeed to fetch symbol");function u(){e.createDataSet(),e.draw()}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"P Rel":{name:"Price Relative",initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculatePriceRelative,centerline:0,inputs:{"Comparison Symbol":"SPY"},deferUpdate:!0}});else{-6974779,1658864083,i=2;for(var a=1;-6974779!==Y.M86(a.toString(),a.toString().length,95852);a++)console.error(""),i+=2;1658864083!==Y.M86(i.toString(),i.toString().length,88656)&&console.error("priceRelative feature requires first activating studies feature.")}},P=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#F","F","0","000","#85c","99e","fiel","d",t.Studies.calculateVWAP=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,f,m,y,v=Y;if("A","V","WA","P",a="AVWAP"==i.type,r=i.chart.scrubbed,a||!t.ChartEngine.isDailyInterval(e.layout.interval)){if(n="hlc/3",a&&((n=i.inputs.Field)&&"field"!=n||(n=i.inputs.Field="hlc/3",e.changeOccurred("layout"))),s=null,o=0,l=0,v.O5C(),h=0,c=!1,i.startFrom>1&&(o=r[i.startFrom-1]["_V "+i.name]||0,l=r[i.startFrom-1]["_VxP "+i.name]||0,h=r[i.startFrom-1]["_VxP2 "+i.name]||0),a){if((u=i.inputs["Anchor Date"].replace(/-/g,"")).search(/^\d{8}$/))return void(i.error="Invalid Anchor Date");(d=i.inputs["Anchor Time"].replace(/:/g,"")).search(/^\d{4,6}$/)||(u+=d),u=t.strToDateTime(u.replace(/\D/g,"")),!i.startFrom&&u>=r[0].DT&&(i.startFrom=e.tickFromDate(u,e.chart,null,!0)),i.inputs["Anchor Selector"]?t.Studies.initAnchorHandle(e,i):t.Studies.removeAnchorHandle(e,i)}for(var x=i.startFrom;x<r.length;x++)if("V","W","A","P ",a||(null===s&&(s=t.Studies.getMarketOffset({stx:e,localQuoteDate:r[x].DT,shiftToDateBoundary:!0})),r[x-1]&&r[x-1].DT&&(p=new Date(new Date(+r[x].DT).setMilliseconds(r[x].DT.getMilliseconds()+s)),new Date(new Date(+r[x-1].DT).setMilliseconds(r[x-1].DT.getMilliseconds()+s)).getDate()!=p.getDate()&&e.chart.market.isMarketDate(p)&&(s=null,o=l=h=0))),g=r[x][n],f=r[x].Volume,a&&!f&&(f=1),o+=f,v.x3g(2),l+=v.I3g(f,g),v.c3g(9),h+=v.l3g(g,g,f),a||o){r[x]["_V "+i.name]=o,r[x]["_VxP "+i.name]=l,r[x]["_VxP2 "+i.name]=h,m=r[x]["_SDVWAP "+i.name]=Math.sqrt(Math.max(0,h/o-Math.pow(l/o,2))),v.c3g(8),y=r[x]["VWAP "+i.name]=v.l3g(l,o);for(var b=1;b<=3;b++)"-"," ","+"," ","S","DV","WA","P",v.x3g(45),r[x]["SDVWAP"+b+"+ "+i.name]=v.I3g(y,b,m),v.c3g(59),r[x]["SDVWAP"+b+"- "+i.name]=v.l3g(m,y,b);c=!0}for(var C=1;C<=3;C++)"σ",")"," Stand","ard Deviat","io","n (","D","i","splay"," ",i.inputs["Display "+C+" Standard Deviation ("+C+"σ)"]&&(" Stan","dard Deviati","on (","SDV","W","AP","+"," ",v.x3g(51),i.outputMap["SDVWAP"+C+"+ "+i.name]=v.I3g("σ)"," Standard Deviation (",C,C),v.c3g(51),i.outputMap["SDVWAP"+C+"- "+i.name]=v.l3g("σ)"," Standard Deviation (",C,C));a||c||(i.error="VWAP Requires Volume")}else i.error="VWAP is Intraday Only"},t.Studies.initAnchoredVWAP=function(e,i,a,r,n,s){if(!a["Anchor Date"]&&!a["Anchor Time"])for(var o=e.chart.dataSegment,l=0;o&&l<o.length;l++)if(o[l]){var h=o[l].DT;a["Anchor Date"]=t.dateToStr(h,"YYYY-MM-dd"),a["Anchor Time"]=t.dateToStr(h,"HH:mm:ss");break}return t.Studies.initializeFN(e,i,a,r,n,s)},t.Studies.displayVWAP=function(e,i,a){var r,n,s,o,l,h,c;t.Studies.displaySeriesAsLine(e,i,a),r=i.inputs["Display 1 Standard Deviation (1σ)"],n=i.inputs["Display 2 Standard Deviation (2σ)"],s=i.inputs["Display 3 Standard Deviation (3σ)"],Y.U5C(),(r||n||s)&&i.inputs.Shading&&(o=e.panels[i.panel],l={opacity:i.parameters.opacity?i.parameters.opacity:.2,skipTransform:o.name!=i.chart.name,yAxis:i.getYAxis(e)},!i.highlight&&e.highlightedDraggable&&(l.opacity*=.3),h="VWAP "+i.name,c="VWAP "+i.name,r&&("S","DVWAP","1+"," ","S","DVWAP","1- ","S","D","VWAP","1+ ",t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP1+ "+i.name,bottomBand:h,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1+ "+i.name]])},l)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP1- "+i.name,bottomBand:c,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1- "+i.name]])},l)),h="SDVWAP1+ "+i.name,c="SDVWAP1- "+i.name),n&&("SDVW","AP2+ ",t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP2+ "+i.name,bottomBand:h,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2+ "+i.name]])},l)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP2- "+i.name,bottomBand:c,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2- "+i.name]])},l)),h="SDVWAP2+ "+i.name,c="SDVWAP2- "+i.name),s&&("SD","VWA","P3+ ",t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP3+ "+i.name,bottomBand:h,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3+ "+i.name]])},l)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP3- "+i.name,bottomBand:c,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3- "+i.name]])},l)))),i.anchorHandle&&t.Studies.displayAnchorHandleAndLine(e,i,a)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{AVWAP:{name:"Anchored VWAP",overlay:!0,calculateFN:t.Studies.calculateVWAP,seriesFN:t.Studies.displayVWAP,initializeFN:t.Studies.initAnchoredVWAP,removeFN:t.Studies.removeAnchorHandle,inputs:{Field:"field","Anchor Date":"","Anchor Time":"","Display 1 Standard Deviation (1σ)":!1,"Display 2 Standard Deviation (2σ)":!1,"Display 3 Standard Deviation (3σ)":!1,Shading:!1,"Anchor Selector":!0},outputs:{VWAP:"#FF0000","1 Standard Deviation (1σ)":"#e1e1e1","2 Standard Deviation (2σ)":"#85c99e","3 Standard Deviation (3σ)":"#fff69e"},parameters:{init:{opacity:.2}},attributes:{"Anchor Date":{placeholder:"yyyy-mm-dd"},"Anchor Time":{placeholder:"hh:mm:ss",step:1}}},VWAP:{name:"VWAP",overlay:!0,calculateFN:t.Studies.calculateVWAP,seriesFN:t.Studies.displayVWAP,inputs:{"Display 1 Standard Deviation (1σ)":!1,"Display 2 Standard Deviation (2σ)":!1,"Display 3 Standard Deviation (3σ)":!1,Shading:!1},outputs:{VWAP:"#FF0000","1 Standard Deviation (1σ)":"#e1e1e1","2 Standard Deviation (2σ)":"#85c99e","3 Standard Deviation (3σ)":"#fff69e"},parameters:{init:{opacity:.2}}}})):("vwap ","feature requires first activating studies"," feat","ure.",console.error("vwap feature requires first activating studies feature."))},V=function(e){var t;Y.O5C(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Zi","gZag",t.Studies.calculateZigZag=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,g,f,m,y=Y;if((i=t.chart.scrubbed)&&i.length){a=t.highLowChart,r=null,n=null,s=t.inputs["Distance(%)"],o=0,l=0,h=0,c=null,u=null,d=0;for(var v=Math.min(i.length-1,t.startFrom);v>=0;v--)if("_s","ta","te"," ",d=v,i[v]["_state "+t.name]){r=(p=i[v]["_state "+t.name])[0],n=p[1],o=p[2],l=p[3],h=p[4],c=p[5],u=p[6];break}for(var x=d;x<i.length;x++){if("C","l","o","se","L","o","w","C","l","o","se",g=i[x][a?"High":"Close"],f=i[x][a?"Low":"Close"],null===n||n<g)if(n=g,o<0&&(r=f),y.x3g(144),c=y.l3g(n,"100",32,s,1),o>-1){if(null!==u&&n>u){i[l]["Result "+t.name]=i[l][a?"Low":"Close"],C(h,l),o=-1,r=f,h=l,l=x;continue}}else l=x;if(null===r||r>f)if(r=f,o>0&&(n=g),y.c3g(145),u=y.l3g(r,s,100,1),o<1){if(null!==c&&r<c){"H","i","g","h","Re","sult ",i[l]["Result "+t.name]=i[l][a?"High":"Close"],C(h,l),o=1,n=g,h=l,l=x;continue}}else l=x}i[l]["Result "+t.name]=i[l][a?1==o?"Low":"High":"Close"],i[l]["_state "+t.name]=[r,n,o,l,h,c,u],C(h,l),y.c3g(37);var b=y.I3g(0,11,12);for(m=i.length-"1"*b;m>l;){if(i[m].Close||0===i[m].Close){"R","e","su","lt ",i[m]["Result "+t.name]=i[m][a?1==o?"High":"Low":"Close"];break}m--}C(l,m)}function C(e,a){y.O5C();for(var r=e+1;r<a;r++)"R","es","u","lt ","R","esu","l","t ",i[r]["ShadowResult "+t.name]=(i[a]["Result "+t.name]-i[e]["Result "+t.name])*(r-e)/(a-e)+i[e]["Result "+t.name],delete i[r]["Result "+t.name]}},t.Studies.displayZigZag=function(e,i,a){var r,n,s,o,l;r=e.chart.highLowBars,i.highLowChart!=r&&(i.highLowChart=r,i.startFrom=0,i.study.calculateFN(e,i)),n=e.chart;for(var h=0;h<a.length;h++)(s=a[h])&&("_sh","ado","w","Copy ",s["_shadowCopy "+i.name]&&(delete s["Result "+i.name],delete s["_shadowCopy "+i.name]),s["Result "+i.name]||s.transform&&delete s.transform["Result "+i.name]);o=a[0],Y.x3g(146);var c=Y.l3g(16,1,1,0,8);l=a[a.length-c],o&&o["ShadowResult "+i.name]&&("_sha","dowCopy ","Resu","lt ","ShadowRes","ul","t"," ","Result"," ",o["Result "+i.name]=o["ShadowResult "+i.name],o.transform&&(o.transform["Result "+i.name]=n.transformFunc(e,n,o["ShadowResult "+i.name])),o["_shadowCopy "+i.name]=1),l&&l["ShadowResult "+i.name]&&(l["Result "+i.name]=l["ShadowResult "+i.name],l.transform&&(l.transform["Result "+i.name]=n.transformFunc(e,n,l["ShadowResult "+i.name])),l["_shadowCopy "+i.name]=1),t.Studies.displaySeriesAsLine(e,i,a)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ZigZag:{name:"ZigZag",overlay:!0,seriesFN:t.Studies.displayZigZag,calculateFN:t.Studies.calculateZigZag,inputs:{"Distance(%)":10},parameters:{init:{label:!1}},attributes:{"Distance(%)":{min:.1,step:.1}}}})):console.error("zigzag feature requires first activating studies feature.")},O={CIQ:a.c,SplinePlotter:a.d,timezoneJS:a.e,$$:a.a,$$$:a.b},Y.U5C(),"undefined"!=typeof __TREE_SHAKE__&&__TREE_SHAKE__||(O.CIQ||a.c).activateImports(s,o,l,h,c,u,d,p,g,f,m,y,v,x,b,C,S,w,k,A,D,M,T,F,_,P,V,null)}).call(this,i(37))}}]);
//# sourceMappingURL=chartiq-79387f.smartcharts.js.map