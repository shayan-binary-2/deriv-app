(window.webpackJsonpsmartcharts=window.webpackJsonpsmartcharts||[]).push([[0],{324:function(t,e,i){"use strict";i.r(e),i.d(e,"CIQ",(function(){return d.c})),i.d(e,"SplinePlotter",(function(){return d.d})),i.d(e,"timezoneJS",(function(){return d.e})),i.d(e,"$$",(function(){return d.a})),i.d(e,"$$$",(function(){return d.b})),i.d(e,"createEngine",(function(){return p.e})),i.d(e,"customCharts",(function(){return p.f})),i.d(e,"drawing",(function(){return p.g})),i.d(e,"easeMachine",(function(){return p.h})),i.d(e,"equations",(function(){return p.i})),i.d(e,"i18n",(function(){return p.j})),i.d(e,"interaction",(function(){return p.k})),i.d(e,"markers",(function(){return p.l})),i.d(e,"market",(function(){return p.m})),i.d(e,"movement",(function(){return p.n})),i.d(e,"nameValueStore",(function(){return p.o})),i.d(e,"quoteFeed",(function(){return p.p})),i.d(e,"series",(function(){return p.q})),i.d(e,"share",(function(){return p.r})),i.d(e,"span",(function(){return p.s})),i.d(e,"storage",(function(){return p.t})),i.d(e,"studies",(function(){return p.u})),i.d(e,"symbolLookupBase",(function(){return p.v})),i.d(e,"theme",(function(){return p.w})),i.d(e,"timezone",(function(){return p.x})),i.d(e,"touch",(function(){return p.z})),i.d(e,"visualization",(function(){return p.A})),i.d(e,"aggregations",(function(){return n})),i.d(e,"drawingAdvanced",(function(){return s})),i.d(e,"equationsAdvanced",(function(){return o})),i.d(e,"highPerformanceMarkers",(function(){return l})),i.d(e,"renderersAdvanced",(function(){return h})),i.d(e,"studiesAdvanced",(function(){return c})),i.d(e,"animation",(function(){return D})),i.d(e,"continuousZoom",(function(){return A})),i.d(e,"extendedHours",(function(){return M})),i.d(e,"fullScreen",(function(){return P})),i.d(e,"inactivityTimer",(function(){return F})),i.d(e,"outliers",(function(){return _})),i.d(e,"plotComplementer",(function(){return R})),i.d(e,"rangeSlider",(function(){return L})),i.d(e,"tooltip",(function(){return E}));var a,r,n,s,o,l,h,c,u,d=i(325),p=i(326);function m(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);a=!0);}catch(t){r=!0,n=t}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return y(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(){}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}x[643118]=function(){for(var t=2;9!==t;)switch(t){case 2:t="object"===("undefined"==typeof globalThis?"undefined":v(globalThis))?1:5;break;case 1:return globalThis;case 5:var e;try{for(var i=2;6!==i;)switch(i){case 2:Object.defineProperty(Object.prototype,"WclsO",{get:function(){for(;;)return this},configurable:!0}),(e=WclsO).ZzAuU=e,i=4;break;case 9:delete e.ZzAuU,delete Object.prototype.WclsO,i=6;break;case 3:throw"";case 4:i="undefined"==typeof ZzAuU?3:9}}catch(t){e=window}return e}}(),x[351557]=function(t){function e(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0].String}}for(var i=2;12!==i;)switch(i){case 14:var a=function(t,e,i,a){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];n(r[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};i=13;break;case 13:a(e,"charCodeAt",r[1],r[6]),i=12;break;case 8:r[6]=r[9],r[6]+=r[4],r[6]+=r[5],i=14;break;case 2:var r=[arguments];r[4]="",r[5]="0",r[4]="8K",r[1]=1,r[9]="D",i=8}function n(t,e,i,a,n){for(var s=2;7!==s;)switch(s){case 2:var o=[arguments];o[7]="",o[7]="ty",o[4]="Proper",o[3]="",s=9;break;case 9:o[3]="define";try{for(var l=2;8!==l;)switch(l){case 2:o[8]={},o[2]=(0,o[0][1])(o[0][0]),o[1]=[r[1],o[2].prototype][o[0][3]],o[8].value=o[1][o[0][2]];try{for(var h=2;3!==h;)switch(h){case 2:o[9]=o[3],o[9]+=o[4],o[9]+=o[7],o[0][0].Object[o[9]](o[1],o[0][4],o[8]),h=3}}catch(t){}o[1][o[0][4]]=o[8].value,l=8}}catch(t){}s=7}}}(x[643118]),x[376554]=function(t){function e(t){for(var e=2;5!==e;)switch(e){case 1:return i[0][0].Function;case 2:var i=[arguments];e=1}}function i(t){for(var e=2;5!==e;)switch(e){case 1:return i[0][0].Array;case 2:var i=[arguments];e=1}}function a(t,e,i,a,r){for(var n=2;7!==n;)switch(n){case 2:var s=[arguments];s[9]="ty",s[1]="",s[1]="per",s[6]="",s[6]="definePro";try{for(var o=2;8!==o;)switch(o){case 2:s[2]={},s[5]=(0,s[0][1])(s[0][0]),s[3]=[s[5],s[5].prototype][s[0][3]],s[2].value=s[3][s[0][2]];try{for(var l=2;3!==l;)switch(l){case 2:s[8]=s[6],s[8]+=s[1],s[8]+=s[9],s[0][0].Object[s[8]](s[3],s[0][4],s[2]),l=3}}catch(t){}s[3][s[0][4]]=s[2].value,o=8}}catch(t){}n=7}}function r(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0]}}for(var n=2;70!==n;)switch(n){case 6:o[5]="imi",o[7]="",o[7]="__opt",o[9]="2H",o[4]="",n=10;break;case 63:o[53]=o[7],o[53]+=o[5],o[53]+=o[1],o[67]=o[2],n=59;break;case 75:s(l,"test",o[75],o[67]),n=74;break;case 72:s(r,o[44],o[59],o[30]),n=71;break;case 27:o[23]="",o[60]="id",o[47]="t2",o[23]="4",n=23;break;case 73:s(r,o[26],o[59],o[72]),n=72;break;case 74:s(r,o[53],o[59],o[11]),n=73;break;case 34:o[51]="H2",o[40]="",o[34]="H4",o[40]="",n=30;break;case 3:o[2]="j",o[1]="",o[1]="ze",o[5]="",n=6;break;case 59:o[67]+=o[9],o[67]+=o[23],o[63]=o[3],o[63]+=o[40],o[63]+=o[34],n=77;break;case 30:o[40]="2",o[66]="",o[66]="U",o[75]=0,o[75]=1,o[59]=0,n=41;break;case 76:s(i,"push",o[75],o[63]),n=75;break;case 41:o[48]=o[66],o[48]+=o[40],o[48]+=o[34],o[30]=o[51],n=37;break;case 37:o[30]+=o[15],o[30]+=o[23],o[44]=o[46],o[44]+=o[78],n=52;break;case 46:o[26]+=o[4],o[11]=o[8],o[11]+=o[9],o[11]+=o[23],n=63;break;case 77:var s=function(t,e,i,r){for(var n=2;5!==n;)switch(n){case 2:var s=[arguments];a(o[0][0],s[0][0],s[0][1],s[0][2],s[0][3]),n=5}};n=76;break;case 2:var o=[arguments];o[3]="",o[3]="X",o[2]="",n=3;break;case 52:o[44]+=o[35],o[72]=o[47],o[72]+=o[15],o[72]+=o[23],o[26]=o[6],o[26]+=o[60],n=46;break;case 71:s(e,"apply",o[75],o[48]),n=70;break;case 23:o[78]="_a",o[15]="H",o[46]="_",o[51]="",n=34;break;case 10:o[4]="ual",o[8]="l",o[6]="",o[6]="",o[6]="__res",o[35]="",o[35]="bstract",n=27}function l(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0].RegExp}}}(x[643118]),x.O0R0=function(){return"function"==typeof x[307585].K0R0?x[307585].K0R0.apply(x[307585],arguments):x[307585].K0R0},x[444253]=function(){for(var t=2;9!==t;)switch(t){case 3:return e[1];case 2:var e=[arguments];e[7]=void 0,e[1]={},e[1].T6H4=function(){for(var t=2;90!==t;)switch(t){case 20:i[2].R1R0=function(){return/\u0033\u0044/.j2H4(function(){return escape("=")}+[])},i[3]=i[2],i[8]={},i[8].a1R0=["N1R0"],t=16;break;case 62:i[22]="a1R0",i[84]="j1R0",i[83]="R1R0",i[69]="M0R0",t=58;break;case 71:i[68]++,t=76;break;case 77:i[68]=0,t=76;break;case 56:i[81]=i[6][i[90]];try{i[92]=i[81][i[83]]()?i[32]:i[59]}catch(t){i[92]=i[59]}t=77;break;case 72:i[45].X2H4(i[98]),t=71;break;case 67:return e[7]=36,95;case 2:var i=[arguments];t=1;break;case 58:i[90]=0,t=57;break;case 1:t=e[7]?5:4;break;case 34:i[51]={},i[51].a1R0=["Z1R0"],i[51].R1R0=function(){return/\u0061\u0061\u0061\x61\u0061/.j2H4(function(){return"aaaa".padEnd(5,"a")}+[])},t=31;break;case 70:i[90]++,t=57;break;case 31:i[13]=i[51],i[40]={},i[40].a1R0=["N1R0"],t=28;break;case 23:i[18]={},i[18].a1R0=["Z1R0"],i[18].R1R0=function(){return/\u0074\u0072\u0075\x65/.j2H4(function(){return"aa".endsWith("a")}+[])},i[24]=i[18],t=34;break;case 48:i[6].X2H4(i[25]),i[6].X2H4(i[9]),i[6].X2H4(i[58]),i[6].X2H4(i[13]),t=65;break;case 57:t=i[90]<i[6].length?56:69;break;case 28:i[40].R1R0=function(){return"function"==typeof t2H4},i[25]=i[40],i[41]={},i[41].a1R0=["Z1R0"],i[41].R1R0=function(){return!/\u007c/.j2H4(function(){return"a|a".split("|")}+[])},t=40;break;case 65:i[45]=[],i[32]="U0R0",i[59]="q0R0",t=62;break;case 40:i[58]=i[41],i[50]={},i[50].a1R0=["N1R0"],i[50].R1R0=function(){return"function"==typeof H2H4},t=36;break;case 52:i[6].X2H4(i[3]),i[6].X2H4(i[39]),i[6].X2H4(i[16]),i[6].X2H4(i[24]),t=48;break;case 75:i[98]={},i[98][i[69]]=i[81][i[22]][i[68]],i[98][i[84]]=i[92],t=72;break;case 36:i[16]=i[50],i[6].X2H4(i[7]),i[6].X2H4(i[4]),t=52;break;case 68:t=68;break;case 6:i[1]={},i[1].a1R0=["Z1R0"],i[1].R1R0=function(){return!/\u0062\x74\u006f\x61/.j2H4(function(){return btoa("=")}+[])},i[9]=i[1],i[2]={},i[2].a1R0=["Z1R0"],t=20;break;case 76:t=i[68]<i[81][i[22]].length?75:70;break;case 69:t=function(t){for(var e=2;22!==e;)switch(e){case 6:a[1]=a[0][0][a[5]],e=14;break;case 11:a[9][a[1][i[69]]].t+=!0,e=10;break;case 20:a[9][a[1][i[69]]].h+=!0,e=19;break;case 12:a[3].X2H4(a[1][i[69]]),e=11;break;case 5:return;case 15:a[6]=a[3][a[5]],a[4]=a[9][a[6]].h/a[9][a[6]].t,e=26;break;case 14:e=void 0===a[9][a[1][i[69]]]?13:11;break;case 19:a[5]++,e=7;break;case 18:a[2]=!1,e=17;break;case 25:a[2]=!0,e=24;break;case 1:e=0===a[0][0].length?5:4;break;case 8:a[5]=0,e=7;break;case 4:a[9]={},a[3]=[],a[5]=0,e=8;break;case 10:e=a[1][i[84]]===i[32]?20:19;break;case 2:var a=[arguments];e=1;break;case 17:a[5]=0,e=16;break;case 7:e=a[5]<a[0][0].length?6:18;break;case 26:e=a[4]>=.5?25:24;break;case 24:a[5]++,e=16;break;case 16:e=a[5]<a[3].length?15:23;break;case 23:return a[2];case 13:a[9][a[1][i[69]]]=function(){for(var t=2;9!==t;)switch(t){case 3:return e[6];case 2:var e=[arguments];e[6]={},e[6].h=0,e[6].t=0,t=3}}.U2H4(this,arguments),e=12}}(i[45])?68:67;break;case 4:i[6]=[],i[5]={},i[5].a1R0=["N1R0"],i[5].R1R0=function(){var t=!1,e=[];try{for(var i in console)e.X2H4(i);t=0===e.length}catch(t){}return t},i[7]=i[5],t=6;break;case 16:i[8].R1R0=function(){return"function"==typeof l2H4},i[4]=i[8],i[94]={},i[94].a1R0=["Z1R0"],i[94].R1R0=function(){return/\x39\u0037/.j2H4(function(){return"aa".charCodeAt(1)}+[])},i[39]=i[94],t=23;break;case 5:return 30}},t=3}}(),x[217582]=!1,x.s3k0=function(){return"function"==typeof x[444253].T6H4?x[444253].T6H4.apply(x[444253],arguments):x[444253].T6H4},x.S0R0=function(){return"function"==typeof x[307585].L0R0?x[307585].L0R0.apply(x[307585],arguments):x[307585].L0R0},x.m0R0=function(){return"function"==typeof x[307585].L0R0?x[307585].L0R0.apply(x[307585],arguments):x[307585].L0R0},x.I3k0=function(){return"function"==typeof x[444253].T6H4?x[444253].T6H4.apply(x[444253],arguments):x[444253].T6H4},x[643118].f9cc=x,x.x1y=function(){return"function"==typeof x[347346].X8h?x[347346].X8h.apply(x[347346],arguments):x[347346].X8h},x[307585]={K0R0:function(){var t,e=arguments;switch(a){case 45:t=(e[1]*e[2]-e[5]*e[6])/(e[0]*e[3]-e[4]);break;case 1:t=e[1]+e[0];break;case 2:t=e[1]>>e[0];break;case 88:t=e[2]-(e[0]^e[1]);break;case 59:t=e[2]-e[1]-e[0];break;case 0:t=e[0]*e[1];break;case 38:t=e[1]/(e[2]-e[0]);break;case 11:t=(e[3]+e[0]+e[2]+e[1])/e[4];break;case 7:t=e[1]/e[0];break;case 77:t=e[0]*-+e[1];break;case 9:t=e[2]-e[0]+e[1]+e[3];break;case 24:t=e[1]-e[2]/e[0];break;case 42:t=e[1]-e[2]*(e[0]-e[3]);break;case 65:t=e[1]/+e[0];break;case 66:t=e[1]-e[3]*e[0]-e[2];break;case 5:t=e[2]+e[0]-e[3]-e[1];break;case 89:t=e[3]+(e[2]/e[1]-e[4]/e[0]);break;case 29:t=(e[3]-e[0])/(e[1]-e[4])>e[2];break;case 51:t=(e[1]-e[3])*e[2]+e[0];break;case 61:t=(e[3]-(e[2]+e[1]*e[0]))/e[4];break;case 68:t=e[0]==e[1];break;case 91:t=e[0]*(e[2]+e[1]);break;case 70:t=e[0]*e[2]/(e[1]+e[3]);break;case 46:t=(e[1]-e[3]*e[0])/e[2];break;case 34:t=(e[0]-e[1])*(e[5]-e[6])/(e[4]-e[2])+e[3];break;case 43:t=e[0]*(e[3]+(e[2]<<e[1]))/e[4];break;case 20:t=+e[1]*e[3]-e[0]-e[2];break;case 73:t=e[1]+e[2]+e[3]+e[4]+e[0];break;case 32:t=(e[0]-e[2])/(e[3]-e[1]);break;case 18:t=e[0]*e[2]<e[1];break;case 23:t=e[1]&e[0];break;case 49:t=(e[2]+e[0])/+e[1];break;case 79:t=(e[1]+e[0]/e[2])*e[3];break;case 36:t=e[1]/(e[2]>>e[0]);break;case 58:t=e[5]+e[1]+e[4]+e[3]+e[7]+e[2]+e[0]+e[6];break;case 33:t=(e[1]-e[0])/(e[2]-e[4])>(e[5]|e[3]);break;case 54:t=(+e[0]*e[1]+e[2])/e[3];break;case 13:t=e[2]-e[0]*e[1];break;case 85:t=e[0]-(e[1]&e[2]);break;case 87:t=e[3]*(e[4]*e[5])*(e[1]-e[2])*e[0];break;case 26:t=e[1]*e[2]/e[0];break;case 28:t=e[2]/e[0]%e[1];break;case 8:t=e[2]-e[1]+e[0];break;case 39:t=+e[1]/e[0];break;case 82:t=e[1]*((e[0]-e[3])/e[4]+e[2]);break;case 74:t=e[2]/e[1]-e[0];break;case 72:t=(e[1]%e[2]+ +e[0])*e[3];break;case 30:t=e[1]*e[2]-e[0];break;case 6:t=e[0]-e[1];break;case 25:t=e[0]+e[2]/e[1];break;case 57:t=e[1]-+e[0];break;case 75:t=e[1]-e[2]/(e[4]+e[3]/e[0]);break;case 22:t=(e[2]+e[3])/(e[1]&e[0]);break;case 84:t=e[2]+(e[1]&e[0]);break;case 64:t=e[2]-(e[1]>>e[0]);break;case 27:t=e[0]%e[1];break;case 63:t=e[0]-e[3]/(+e[1]+e[2]);break;case 17:t=e[0]<<e[1];break;case 15:t=e[2]-(e[0]-e[1]);break;case 41:t=e[1]+(e[2]-e[0])/e[3];break;case 14:t=e[0]^e[1];break;case 48:t=e[1]+e[0]+e[2];break;case 16:t=(e[0]-e[1])/e[2];break;case 4:t=e[0]+e[1]-e[2];break;case 53:t=(e[3]*e[2]+e[1])/+e[0];break;case 44:t=e[1]*(e[3]*e[2]+e[4])/e[0];break;case 47:t=e[0]*e[1]+e[2];break;case 50:t=-(e[0]-e[2])*e[1]+e[3];break;case 21:t=e[1]*e[3]-e[0]-e[2];break;case 56:t=(e[1]+e[0]*e[2])/e[3];break;case 52:t=e[3]+(e[2]-e[0])/(e[1]-e[4])*(e[5]-e[6]);break;case 80:t=e[1]*(e[3]/e[0]-+e[2]);break;case 31:t=e[1]<e[0];break;case 90:t=e[0]>e[1];break;case 86:t=e[3]/(e[0]*e[1])<=e[2];break;case 10:t=e[0]|e[1];break;case 3:t=(e[1]+e[0])/e[2];break;case 81:t=(e[0]+e[2])*e[1];break;case 62:t=e[0]+e[3]+e[1]+e[2];break;case 83:t=e[3]+e[1]*(e[0]-e[2]);break;case 19:t=e[1]+(e[0]-e[2]);break;case 69:t=e[3]+e[0]/e[1]+e[2];break;case 60:t=e[2]-e[1]-+e[0];break;case 78:t=(e[2]-e[0]/e[1])*e[3];break;case 55:t=(e[4]+e[1]*e[3])/(e[2]*e[0]);break;case 12:t=e[0]+e[1]*e[2];break;case 67:t=e[3]+e[2]*e[0]+e[1];break;case 71:t=e[4]*(e[0]^e[1])*(e[5]<<e[2])*e[3];break;case 35:t=e[0]+ +e[1];break;case 37:t=e[2]/(e[0]^e[1]);break;case 76:t=e[2]*-(e[0]&e[1]);break;case 40:t=(e[0]<<e[1])/e[2]}return t},L0R0:function(t){a=t}},x[237211]="FKG",x[28140]=x[351557],x[347346]=(r=function(t,e){var i=65535&e;return((e-i)*t|0)+(i*t|0)|0},{X8h:function(t,e,i){for(var a=i,n=-4&e,s=0;s<n;s+=4){var o=255&t.D8K0(s)|(255&t.D8K0(s+1))<<8|(255&t.D8K0(s+2))<<16|(255&t.D8K0(s+3))<<24;o=r(o,3432918353),a=5*(a=(524287&(a^=o=r(o=(131071&o)<<15|o>>>17,461845907)))<<13|a>>>19)+3864292196|0}switch(o=0,e%4){case 3:o=(255&t.D8K0(n+2))<<16;case 2:o|=(255&t.D8K0(n+1))<<8;case 1:o|=255&t.D8K0(n),o=r(o,3432918353),a^=o=r(o=(131071&o)<<15|o>>>17,461845907)}return a^=e,a=r(a^=a>>>16,2246822507),a=r(a^=a>>>13,3266489909),a^=a>>>16}}),x.y0R0=function(){return"function"==typeof x[307585].K0R0?x[307585].K0R0.apply(x[307585],arguments):x[307585].K0R0},x.u1y=function(){return"function"==typeof x[347346].X8h?x[347346].X8h.apply(x[347346],arguments):x[347346].X8h},x.I3k0(),n=function(t){var e;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,x.I3k0(),e.Renderer.Aggregations=function(t){var e;this.construct(t),e=this.params,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,e.highlightable=!1,x.s3k0(),"_main_series"!=e.name&&(console.warn("Aggregations are only allowed on main series."),e.invalid=!0)},e.inheritsFrom(e.Renderer.Aggregations,e.Renderer.OHLC,!1),e.Renderer.Aggregations.requestNew=function(t,i){var a,r;a=null,x.s3k0();for(var n=0;n<t.length;n++)switch(r=t[n]){case"kagi":case"pandf":a=r;break;case"heikinashi":case"linebreak":case"rangebars":case"renko":a="candle";break;default:return null}return null===a?null:new e.Renderer["candle"==a?"OHLC":"Aggregations"]({params:e.extend(i,{type:a})})},e.Renderer.Aggregations.prototype.drawIndividualSeries=function(t,e){var i,a;if(x.s3k0(),!e.invalid)return i=this.stx,a={colors:[]},"kagi"==e.type?("stx_","kagi_down",i.drawKagiSquareWave(t.panel,"stx_kagi_up","stx_kagi_down",e),a.colors.push(i.getCanvasColor("stx_kagi_up")),a.colors.push(i.getCanvasColor("stx_kagi_down"))):"pandf"==e.type&&("stx_pandf_d","own","stx_pa","ndf_up",i.drawPointFigureChart(t.panel,"stx_pandf_up","X",e),a.colors.push(i.getCanvasColor("stx_pandf_up")),i.drawPointFigureChart(t.panel,"stx_pandf_down","O",e),a.colors.push(i.getCanvasColor("stx_pandf_down"))),a},e.ChartEngine.prototype.setAggregationType=function(t){var i;x.I3k0(),this.layout.chartType="candle",!1!==(i=this.chart).baseline.userLevel&&(i.baseline.userLevel=i.baseline.defaultLevel,i.panel.yAxis.scroll=e.ChartEngine.YAxis.prototype.scroll),this.layout.aggregationType=t,this.setMainSeriesRenderer(),i.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},e.ChartEngine.prototype.drawKagiSquareWave=function(t,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,S,C,w,T,k,D=x;n=t.chart,this.startClip(t.name),s=n.dataSegment,D.I3k0(),o=n.context,(l=t.yAxis).flipped&&(h=i,i=a,a=h),c=this.canvasStyle(i),u=this.canvasStyle(a),this.canvasColor(i),r.border_color_up&&(o.strokeStyle=r.border_color_up),d=o.strokeStyle,this.canvasColor(a),r.border_color_down&&(o.strokeStyle=r.border_color_down),p=o.strokeStyle,m=1,c.width&&parseInt(c.width,10)<=25&&(m=Math.max(1,e.stripPX(c.width))),g=1,u.width&&parseInt(u.width,10)<=25&&(g=Math.max(1,e.stripPX(u.width))),this.highlightedDraggable&&(D.m0R0(0),o.globalAlpha*=D.O0R0("0.3",1)),o.beginPath(),f=n.dataSet.length-n.scroll-1,y=!0,v=null,b=null,S=t.left-.5*this.layout.candleWidth+this.micropixels-1;for(var A=0;A<=s.length;A++)if(S+=this.layout.candleWidth,C=s[A]){if(C.projection)break;b=C.kagiTrend,l.flipped&&(b*=-1),C.transform&&n.transformFunc&&(w=C.kagiPrevOpen,(C=C.transform).kagiPrevOpen=n.transformFunc(this,n,w)),T=C.cache,D.S0R0(1),((k=D.y0R0(A,f))<t.cacheLeft||k>t.cacheRight||!T.kagiOpen)&&(T.kagiOpen=l.semiLog?l.height*(1-(Math.log(Math.max(C.Open,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-C.Open)*l.multiplier,T.kagiClose=l.semiLog?l.height*(1-(Math.log(Math.max(C.Close,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-C.Close)*l.multiplier,l.flipped?(T.kagiOpen=l.bottom-T.kagiOpen,T.kagiClose=l.bottom-T.kagiClose):(T.kagiOpen+=l.top,T.kagiClose+=l.top)),T.kagiClose,v=l.semiLog?l.height*(1-(Math.log(Math.max(C.kagiPrevOpen,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-C.kagiPrevOpen)*l.multiplier,l.flipped?v=l.bottom-v:v+=l.top,y?(o.moveTo(f>=0?t.left:Math.floor(S),T.kagiOpen),o.lineTo(Math.floor(S),T.kagiOpen),T.kagiClose<T.kagiOpen?(o.strokeStyle=d,o.lineWidth=m):(o.strokeStyle=p,o.lineWidth=g)):-1!=b&&T.kagiClose<v&&v<T.kagiOpen?(o.lineTo(Math.floor(S),v),o.stroke(),o.beginPath(),o.moveTo(Math.floor(S),v),o.strokeStyle=d,o.lineWidth=m):1!=b&&T.kagiClose>v&&v>T.kagiOpen&&(o.lineTo(Math.floor(S),v),o.stroke(),o.beginPath(),o.moveTo(Math.floor(S),v),o.strokeStyle=p,o.lineWidth=g),o.lineTo(Math.floor(S),T.kagiClose),A+1<s.length&&o.lineTo(Math.floor(S+this.layout.candleWidth),T.kagiClose),y=!1}o.stroke(),this.endClip(),D.m0R0(2),o.lineWidth=D.O0R0(2042157664,"1")},e.ChartEngine.prototype.drawPointFigureChart=function(t,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,S,C,w,T,k,D,A,M,P,F,_,R=x;function L(t,e,i){R.S0R0(3),o.moveTo(R.y0R0(e,t,2),R.O0R0(i,h,b,R.m0R0(4))),R.S0R0(1),o.bezierCurveTo(R.y0R0(d,e),R.y0R0(i,h,b,R.m0R0(4)),R.y0R0(d,e,R.S0R0(1)),R.y0R0(v,b,i,c,R.m0R0(5)),R.y0R0(e,t,2,R.m0R0(3)),R.O0R0(v,b,i,c,R.m0R0(5))),R.S0R0(6),R.I3k0(),o.bezierCurveTo(R.y0R0(t,u),R.y0R0(v,b,i,c,R.S0R0(5)),R.y0R0(t,u,R.m0R0(6)),R.O0R0(i,h,b,R.m0R0(4)),R.O0R0(e,t,2,R.S0R0(3)),R.O0R0(i,h,b,R.m0R0(4)))}function E(t,e,i){R.S0R0(1),o.moveTo(R.y0R0(u,t),R.y0R0(b,c,i,R.S0R0(8))),R.m0R0(6),o.lineTo(R.y0R0(e,d),R.y0R0(v,h,i,b,R.S0R0(9))),R.m0R0(1),o.moveTo(R.O0R0(u,t),R.y0R0(v,h,i,b,R.S0R0(9))),R.m0R0(6),o.lineTo(R.y0R0(e,d),R.O0R0(b,c,i,R.m0R0(8)))}n=t.chart,this.startClip(t.name),s=n.dataSegment,o=n.context,this.canvasColor(i),"X"==a&&r.border_color_up?o.strokeStyle=r.border_color_up:"O"==a&&r.border_color_down&&(o.strokeStyle=r.border_color_down),l=this.canvasStyle(i),h=parseInt(l.paddingTop,10),c=parseInt(l.paddingBottom,10),u=parseInt(l.paddingLeft,10),d=parseInt(l.paddingRight,10),l.width&&parseInt(l.width,10)<=25?o.lineWidth=Math.max(1,e.stripPX(l.width)):o.lineWidth=2,this.highlightedDraggable&&(o.globalAlpha*=.3),o.beginPath(),p=this.chart.state.aggregation.box,m=n.dataSet.length-n.scroll-1,g=t.yAxis,v=p*g.multiplier,R.S0R0(7),b=R.O0R0(2,v),S=this.layout.candleWidth,C=t.left-S+this.micropixels-1;for(var O=0;O<s.length;O++)if(C+=S,w=s[O]){if(w.projection)break;if(T=w.pfOpen,k=w.pfClose,D=w.pfTrend,A=w.pfStepBack,w.transform&&n.transformFunc&&(w=w.transform,T=n.transformFunc(this,n,T),k=n.transformFunc(this,n,k)),M=w.cache,R.S0R0(1),((P=R.y0R0(O,m))<t.cacheLeft||P>t.cacheRight||!M.pfOpen)&&(g.flipped?(M.pfOpen=g.bottom-(g.high-T)*g.multiplier,M.pfClose=g.bottom-(g.high-k)*g.multiplier):(M.pfOpen=(g.high-T)*g.multiplier+g.top,M.pfClose=(g.high-k)*g.multiplier+g.top)),F=Math.round(C),R.m0R0(1),_=Math.round(R.y0R0(S,C)),f=Math.abs(Math.round((k-T)/p)),y=M.pfOpen,a==A&&("X"==A?(R.S0R0(6),E(F,_,R.O0R0(y,v))):"O"==A&&(R.m0R0(1),L(F,_,R.y0R0(v,y)))),a==D)for(;f>=0;f--)"X"==a?(E(F,_,y),y-=g.flipped?-v:v):"O"==a&&(L(F,_,y),y+=g.flipped?-v:v)}o.stroke(),this.endClip(),R.I3k0(),R.S0R0(10),o.lineWidth=R.y0R0("1",1)},e.ChartEngine.calculateAggregation=function(t,i,a,r){var n,s;x.s3k0(),s=t.layout,["heikinashi","heikenashi"].indexOf(i)>-1?n=e.calculateHeikinAshi(t,a,r):"rangebars"==i?n=e.calculateRangeBars(t,a,s.rangebars,r):"kagi"==i?n=e.calculateKagi(t,a,s.kagi,r):"linebreak"==i?n=e.calculateLineBreak(t,a,s.priceLines,r):"renko"==i?n=e.calculateRenkoBars(t,a,s.renko,r):"pandf"==i&&(n=e.calculatePointFigure(t,a,s.pandf,r));for(var o=1;-338144794!==x.x1y(o.toString(),o.toString().length,30210);o++)return n;if(-1126298933!==x.x1y(2..toString(),2..toString().length,30887))return n},e.calculateHeikinAshi=function(t,e,i){var a,r,n,s,o,l,h,c,u,d,p;if(!e.length)return e;i||(i=[]),a=[],x.I3k0();for(var m=0;m<e.length;m++)if(r=e[m]){for(var g in(n=a[a.length-1])||m||(n=i[i.length-1]),n||(n=r),s=r.Close,o=(o=r.Open)||0===o?o:s,l=(l=r.High)||0===l?l:s,h=(h=r.Low)||0===h?h:s,u=((c=(c=n.Open)||0===c?c:n.Close)+n.Close)/2,x.m0R0(11),d=x.O0R0(l,s,h,o,4),p={DT:r.DT,displayDate:r.displayDate,Date:r.Date,Open:u,Close:d,High:Math.max(l,Math.max(u,d)),Low:Math.min(h,Math.min(u,d)),Volume:r.Volume,iqPrevClose:n.Close},r)p[g]||0===p[g]||(p[g]=r[g]);a.push(p)}return a},e.calculateKagi=function(t,i,a,r){var n,s,o,l,h,c,u,d;if(x.I3k0(),!i.length)return i;r||(r=[]),n=t.layout,s=t.chart,a=parseFloat(a),s.defaultChartStyleConfig.kagi=e.ChartEngine.isDailyInterval(n.interval)?4:.4,(isNaN(a)||a<=0)&&(a=s.defaultChartStyleConfig.kagi,e.Market.Symbology.isForexSymbol(s.symbol)&&(a/=4),null!==n.kagi&&(n.kagi=null,t.changeOccurred("layout"))),a/=100,o=[],h=(l=r[r.length-1])?l.DT:0;for(var p=0;p<i.length;p++)if((c=i[p])&&(l||(x.m0R0(6),l=i[x.y0R0(p,1)]),l)){if((u=l.Open||0===l.Open?l.Open:l.Close)>l.Close){if(c.Close>l.Close*(1+a))c.Open=l.Close;else if(l.Close>c.Close&&(l.Close=c.Close),l.Volume+=c.Volume,p<i.length-1)continue}else if(u<l.Close){if(c.Close<l.Close*(1-a))c.Open=l.Close;else if(l.Close<c.Close&&(l.Close=c.Close),l.Volume+=c.Volume,p<i.length-1)continue}else if(l.Close=c.Close,l.Volume+=c.Volume,p<i.length-1)continue;for(var m in d={DT:l.DT,displayDate:l.displayDate,Date:l.Date,Open:l.Open,Close:l.Close,High:Math.max(l.Open,l.Close),Low:Math.min(l.Open,l.Close),Volume:l.Volume,iqPrevClose:l.iqPrevClose},l)d[m]||0===d[m]||(d[m]=l[m]);o.length?d.kagiPrevOpen=o[o.length-1].Open:d.kagiPrevOpen=d.Open,d.Close>d.kagiPrevOpen&&d.kagiPrevOpen>d.Open?d.kagiTrend=1:d.Close<d.kagiPrevOpen&&d.kagiPrevOpen<d.Open&&(d.kagiTrend=-1),h<d.DT&&o.push(d),l=c,s.currentQuote={Close:c.Close}}return o},e.calculateLineBreak=function(t,e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y;if(!e.length)return e;a||(a=[]),r=t.layout,(n=t.chart).defaultChartStyleConfig.priceLines=3,i=parseInt(i,10),isNaN(i)||i<=0?(i=n.defaultChartStyleConfig.priceLines,null!==r.priceLines&&("layo","ut",r.priceLines=null,t.changeOccurred("layout"))):i>10&&(r.priceLines=i=10),s=a.slice(-i),x.s3k0(),o=s.length,l=0;t:for(var v=0;v<e.length;v++)if(h=e[v]){if(l+=h.Volume,(c=s[s.length-1])||(c={Open:h.Open,Close:h.Open,High:h.Open,Low:h.Open}),u=c.Close,d=(d=c.High)||0===d?d:u,p=(p=c.Low)||0===p?p:u,m=(m=c.Open)||0===m?m:u,g={DT:h.DT,displayDate:h.displayDate,Date:h.Date,Close:h.Close,Volume:l,iqPrevClose:u},n.currentQuote={Close:h.Close},h.Close>u&&c.Close>m);else if(h.Close<u&&c.Close<m);else if(h.Close>d){for(f=2;f<=i;f++)if((y=s[s.length-f])&&h.Close<=y.High)continue t}else{if(!(h.Close<p))continue;for(f=2;f<=i;f++)if((y=s[s.length-f])&&h.Close>=y.Low)continue t}for(var b in h.Close<c.Close?g.Open=Math.min(m,u):g.Open=Math.max(m,u),g.Low=Math.min(g.Open,g.Close),g.High=Math.max(g.Open,g.Close),h)g[b]||0===g[b]||(g[b]=h[b]);s.push(g),l=0}return s.slice(o)},e.calculateRenkoBars=function(t,e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b=x;if("L","ow",!e.length)return[];if(a||(a=[]),r=t.layout,(s=(n=t.chart).state.aggregation)||(s=n.state.aggregation={}),o=Math.min(300,e.length),s.minMax||(s.minMax=t.determineMinMax(e.slice(e.length-o),["Close","High","Low"])),l=s.minMax[1]-s.minMax[0],!(h=t.panels[n.name].height))return[];function S(t,e){var i;for(var a in t=Number(t.toFixed(8)),e=Number(e.toFixed(8)),i={DT:p.DT,displayDate:p.displayDate,Date:p.Date,Open:t,Close:e,High:Math.max(t,e),Low:Math.min(t,e),Volume:0,iqPrevClose:t!=e?t:null},p)i[a]||0===i[a]||(i[a]=p[a]);c.push(i)}b.s3k0(),n.defaultChartStyleConfig.renko=Math.floor(1e4*l/(h/30))/1e4,null===i||isNaN(i)||i<=0?(i=n.defaultChartStyleConfig.renko,null!==r.renko&&(r.renko=null,t.changeOccurred("layout"))):(b.S0R0(7),i=Math.max(i,b.y0R0(h,l)),r.renko!==i&&(r.renko=i,t.changeOccurred("layout"))),c=[],u=null,d=null,p=null,a.length&&(u=(m=a[a.length-1]).Low-i,d=m.High+i);for(var C=0;C<e.length;C++)if(g=e[C]){for(u||d||(f=g.Open||0===g.Open?g.Open:g.Close,y=Math.floor(f/i)*i,v=isNaN(y)?f:y,b.m0R0(6),u=b.y0R0(v,i),b.S0R0(1),d=b.O0R0(i,v));;)if(p||(p=g),g.Close<=u)b.m0R0(1),S(b.y0R0(i,u),u),b.S0R0(12),d=b.O0R0(u,2,i),u-=i,p=null;else{if(!(g.Close>=d))break;b.S0R0(6),S(b.O0R0(d,i),d),b.m0R0(13),u=b.O0R0(2,i,d),d+=i,p=null}n.currentQuote=g}return u<e[e.length-1].Close&&u+i>e[e.length-1].Close?(b.S0R0(1),S(b.O0R0(i,u),e[e.length-1].Close)):d>e[e.length-1].Close&&d-i<e[e.length-1].Close&&(b.m0R0(6),S(b.O0R0(d,i),e[e.length-1].Close)),c},e.calculateRangeBars=function(t,e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,S,C,w,T,k=x;function D(){k.s3k0(),k.m0R0(1),d=k.y0R0(i,u),k.m0R0(6),p=k.y0R0(u,i),m=u}function A(t,e){for(k.I3k0();;){if(g||(g=t),u<e){if(u=Math.min(e,d),k.m0R0(6),p=Math.max(p,k.O0R0(u,i)),e<d)break}else if(u>=e&&(u=Math.max(e,p),k.S0R0(1),d=Math.min(d,k.O0R0(i,u)),e>p))break;if(void 0===u)return void console.log("Uh oh undefined in calculateRangeBars:processMove");M(u),g=null,D()}}if("C","l","o","se",!e.length)return e;if(a||(a=[]),r=t.layout,(s=(n=t.chart).state.aggregation)||(s=n.state.aggregation={}),k.m0R0(6),o=Math.min(k.y0R0("300",0),e.length),s.minMax||(s.minMax=t.determineMinMax(e.slice(e.length-o),["Close","High","Low"])),l=s.minMax[1]-s.minMax[0],!(h=t.panels[n.name].height))return[];function M(t){var e;for(var i in k.s3k0(),(e={DT:g.DT,displayDate:g.displayDate,Date:g.Date,Open:Number(m.toFixed(8)),Close:Number(t.toFixed(8)),High:Number(d.toFixed(8)),Low:Number(p.toFixed(8)),Volume:0}).iqPrevClose=e.Open,g)e[i]||0===e[i]||(e[i]=g[i]);c.push(e)}n.defaultChartStyleConfig.range=Math.floor(1e4*l/(h/30))/1e4,null===i||isNaN(i)||i<0?(i=n.defaultChartStyleConfig.range,null!==r.range&&(r.range=null,t.changeOccurred("layout"))):(k.S0R0(7),i=Math.max(i,k.y0R0(h,l)),r.range!==i&&(r.range=i,t.changeOccurred("layout"))),c=[],u=null,d=null,p=null,m=null,g=null;for(var P=0;P<e.length;P++)(f=e[P])&&(k.S0R0(6),y=e[k.y0R0(P,1)],P||(y||(y=a[a.length-1]),y&&((u=y.Close)||0===u)&&D()),y&&(v=f.Close,b=f.Open,S=f.High,C=f.Low,(v||0===v)&&(b=b||0===b?b:v,S=S||0===S?S:v,C=C||0===C?C:v,u||0===u||(w=Math.floor(b/i)*i,u=isNaN(w)?b:w,D(),A(y,b)),P&&A(f,b),S-b<b-C?(S&&A(f,S),C&&A(f,C)):(C&&A(f,C),S&&A(f,S)),A(f,v),P==e.length-1&&v!=m&&(T=d,k.S0R0(1),d=k.y0R0(i,p),k.S0R0(6),p=k.y0R0(T,i),M(v)))));return c},e.calculatePointFigure=function(t,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,S,C,w;if(!i.length)return i;function T(t,e,i,a,r,n,s,o,l){return{DT:t.DT,Date:t.Date,pfOpen:o,pfClose:l,Open:e,Close:r,High:i,Low:a,Volume:n,iqPrevClose:s}}function k(t,e){for(var i in t)e[i]||0===e[i]||(e[i]=t[i]);return e}function D(t,e,i,a,r){t.High=Math.max(e,t.High),t.Low=Math.min(i,t.Low),t.Close=a,x.s3k0(),t.Volume+=r}r||(r=[]),n=t.layout,(o=(s=t.chart).state.aggregation)||(o=s.state.aggregation={}),s.defaultChartStyleConfig.box=1,s.defaultChartStyleConfig.reversal=3,a||(a={}),(l=a.box)||(n.pandf&&null!==n.pandf.box&&(n.pandf.box=null,t.changeOccurred("layout")),l=s.defaultChartStyleConfig.box,(h=i[i.length-1].Close)&&(h<.25?l=.0625:h<1?l=.125:h<5?l=.25:h<20?l=.5:h<100?l=1:h<200?l=2:h<500?l=4:h<1e3?l=5:h<25e3?l=50:(x.S0R0(14),l=x.O0R0("500",0))),e.ChartEngine.isDailyInterval(n.interval)||(l/=10),e.Market.Symbology.isForexSymbol(s.symbol)&&(h&&(h<1?(x.m0R0(0),l=x.O0R0("0.001",1)):h<2?l=.002:h<50?l=.02:h<200&&(l=.2)),e.ChartEngine.isDailyInterval(n.interval)&&(l*=10)),s.defaultChartStyleConfig.box=l),l=parseFloat(l),(isNaN(l)||l<=0)&&(n.pandf&&null!==n.pandf.box&&(n.pandf.box=null,t.changeOccurred("layout")),s.defaultChartStyleConfig.box=l=1),(c=Math.ceil(parseFloat(a.reversal)))>0&&c>a.reversal?(n.pandf.reversal=c,t.changeOccurred("layout")):(isNaN(c)||c<=0)&&(n.pandf&&null!==n.pandf.reversal&&(n.pandf.reversal=null,t.changeOccurred("layout")),c=s.defaultChartStyleConfig.reversal),o.box=l,c*=l,u=(l.toString()+".").split(".")[1].length,d=[],p=0;for(var A=0;A<i.length;A++)(g=i[A])&&(p+=g.Volume,y=g.Close,v=(v=g.Open)||0===v?v:y,b=(b=g.High)||0===b?b:y,S=(S=g.Low)||0===S?S:y,d.length||r.length?((f=d[d.length-1])||(f=e.clone(r[r.length-1])),"O"==f.pfTrend?(S<=f.pfClose-l?(f.pfClose=Number((Math.ceil(S/l-1e-8)*l).toFixed(u)),"O"==f.pfStepBack&&(f.pfStepBack=null),D(f,b,S,y,p)):b>=f.pfClose+c?(C=f.pfClose+l,w=Number((Math.floor(b/l+1e-8)*l).toFixed(u)),m=T(g,v,b,S,y,p,f.pfClose,C,w),C==w&&(m.pfStepBack="X"),"O"==f.pfStepBack?(f.pfOpen=C,f.pfClose=w,f.pfTrend="X",D(f,b,S,y,p)):((m=k(g,m)).pfTrend="X",d.push(m))):D(f,b,S,y,p),p=0):"X"==f.pfTrend&&(b>=f.pfClose+l?(f.pfClose=Number((Math.floor(b/l+1e-8)*l).toFixed(u)),"X"!=f.pfStepBack&&"-"!=f.pfStepBack||(f.pfStepBack=null),D(f,b,S,y,p)):S<=f.pfClose-c?(C=f.pfClose-l,w=Number((Math.ceil(S/l-1e-8)*l).toFixed(u)),m=T(g,v,b,S,y,p,f.pfClose,C,w),C==w&&(m.pfStepBack="O"),"X"==f.pfStepBack||"-"==f.pfStepBack?(f.pfOpen=C,f.pfClose=w,f.pfTrend="O",D(f,b,S,y,p),C!=w&&"-"==f.pfStepBack&&(f.pfStepBack=null)):((m=k(g,m)).pfTrend="O",d.push(m))):D(f,b,S,y,p),p=0)):((m=k(g,T(g,v,b,S,y,p,b+l,Number((Math.ceil(S/l-1e-8)*l).toFixed(u)),Number((Math.floor(b/l+1e-8)*l).toFixed(u))))).pfTrend="X",m.pfOpen==m.pfClose&&(m.pfStepBack="-"),d.push(m),p=0));return d}},s=function(t){var e,i,a,r=x;e=2;for(var n=1;1300433217!==r.x1y(n.toString(),n.toString().length,91861);n++)i="undefined"!=typeof _CIQ?_CIQ:t.CIQ,e+=2;237550749!==r.u1y(e.toString(),e.toString().length,52155)&&(i=""==~_CIQ?_CIQ:t.CIQ),a="undefined"!=typeof _timezoneJS?_timezoneJS:t.timezoneJS,i.Drawing?("br[cq","-wave-parameters]","w","av","eParameters","l","ine","Width","I","I","line","W","i","dth","p","a","tter","n","c","olor","lin","eW","id","th3","ac","t","ive3","acti","ve","2","pa","tter","n","1","c","ol","or","1","lin","eWi","dt","h","fil","l","Col","or","c","olo","r","li","neWidth","pa","tte","r","n","fillColo","r","line","Width",i.Drawing.ray=function(){r.s3k0(),this.name="ray"},i.inheritsFrom(i.Drawing.ray,i.Drawing.line),i.Drawing.ray.prototype.calculateOuterSet=function(t){var e,a;this.p0[0]==this.p1[0]||this.p0[1]==this.p1[1]||i.ChartEngine.isDailyInterval(this.stx.layout.interval)||(a=(e={x0:this.p0[0],y0:this.p0[1],x1:this.p1[0],y1:this.p1[1]}).x1+1e3,e.x0>e.x1&&(a=e.x1-1e3),this.v0B=this.v0,this.v1B=i.yIntersection(e,a),this.d0B=this.d0,this.d1B=this.stx.dateFromTick(a,t.chart))},i.Drawing.ray.prototype.adjust=function(){var t,e,a;r.s3k0(),r.S0R0(0),t=-r.y0R0("779397524",1),r.S0R0(2),e=r.y0R0(1681543360,"2");for(var n=1;r.x1y(n.toString(),n.toString().length,99341)!==t;n++){if(~(a=this.stx.panels[this.panelName]))return;this.setPoint(4,this.d0,this.v0,a.chart),r.S0R0(2),this.setPoint(r.y0R0(1769761952,"4"),this.d1,this.v1,a.chart),e+=2}if(-724916598!==r.u1y(e.toString(),e.toString().length,98472)){if(!(a=this.stx.panels[this.panelName]))return;this.setPoint(0,this.d0,this.v0,a.chart),this.setPoint(1,this.d1,this.v1,a.chart)}i.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&this.setPoint(1,this.d1B,this.v1B,a.chart)},i.Drawing.continuous=function(){r.I3k0(),this.name="continuous",this.dragToDraw=!1,this.maxSegments=null},i.inheritsFrom(i.Drawing.continuous,i.Drawing.segment),i.Drawing.continuous.prototype.click=function(t,e,a){var n,s,o;if(n=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(e,a)?(this.stx.undo(),!0):(r.I3k0(),this.setPoint(1,e,a,n.chart),s=new(0,i.Drawing.segment),o=this.serialize(this.stx),s.reconstruct(this.stx,o),this.stx.addDrawing(s),this.stx.changeOccurred("vector"),this.stx.draw(),this.segment++,!!(this.maxSegments&&this.segment>this.maxSegments)||(this.setPoint(0,e,a,n.chart),!1)):(this.setPoint(0,e,a,n.chart),this.penDown=!0,!1)},i.Drawing.ellipse=function(){this.name="ellipse"},i.inheritsFrom(i.Drawing.ellipse,i.Drawing.BaseTwoPoint),i.Drawing.ellipse.prototype.render=function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g,f,y;(e=this.stx.panels[this.panelName])&&(a=this.stx.pixelFromTick(this.p0[0],e.chart),n=this.stx.pixelFromTick(this.p1[0],e.chart),s=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),r.S0R0(15),l=r.O0R0(n,a,a),h=n,c=s,u=o,r.S0R0(15),d=r.O0R0(o,s,s),r.m0R0(16),p=r.O0R0(u,d,6),(m=this.lineWidth)||(m=1.1),("auto"==(g=this.color)||i.isTransparent(g))&&(g=this.stx.defaultColor),this.highlighted&&(g=this.stx.getCanvasColor("stx_highlight_vector"),.1==m&&(m=1.1)),f=this.fillColor,t.beginPath(),t.moveTo(l,c),r.m0R0(1),t.bezierCurveTo(l,r.O0R0(p,u),h,r.O0R0(p,u),h,c),r.S0R0(6),t.bezierCurveTo(h,r.O0R0(d,p),l,r.O0R0(d,p),l,c),f&&!i.isTransparent(f)&&"auto"!=f&&(t.fillStyle=f,t.globalAlpha=.2,t.fill(),t.globalAlpha=1),g&&"none"!=this.pattern&&(t.strokeStyle=g,t.lineWidth=m,t.setLineDash&&(t.setLineDash(i.borderPatternToArray(m,this.pattern)),t.lineDashOffset=0),t.stroke()),t.closePath(),this.highlighted&&(y="p1"==this.highlighted,this.littleCircle(t,n,o,y)))},i.Drawing.ellipse.prototype.intersected=function(t,e,a){var r,n,s,o;return this.p0&&this.p1?this.pointIntersection(this.p1[0],this.p1[1],a)?("p","1","p","1",this.highlighted="p1",{action:"drag",point:"p1"}):(r=this.p0[0]-(this.p1[0]-this.p0[0]),n=this.p1[0],s=this.p1[1],o=this.p0[1]-(this.p1[1]-this.p0[1]),!(a.x0>Math.max(r,n)||a.x1<Math.min(r,n))&&(!(a.y1>Math.max(o,s)||a.y0<Math.min(o,s))&&(this.highlighted=!0,{action:"move",p0:i.clone(this.p0),p1:i.clone(this.p1),tick:t,value:e}))):null},i.Drawing.ellipse.prototype.configs=["color","fillColor","lineWidth","pattern"],i.Drawing.ellipse.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.adjust()},i.Drawing.ellipse.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},i.Drawing.channel=function(){this.name="channel",this.dragToDraw=!1,this.p2=null},i.inheritsFrom(i.Drawing.channel,i.Drawing.segment),i.Drawing.channel.prototype.configs=["color","fillColor","lineWidth","pattern"],i.Drawing.channel.prototype.move=function(t,e,i){var a,n,s;r.m0R0(0),a=r.O0R0("1547241154",1),r.S0R0(2),n=r.O0R0(1861137216,"2");for(var o=1;r.u1y(o.toString(),o.toString().length,64870)!==a;o++){if(~this.penDown)return;n+=2}r.s3k0(),-963344088!==r.u1y(n.toString(),n.toString().length,75036)&&-this.penDown||this.penDown&&(this.copyConfig(),null===this.p2?this.p1=[e,i]:(s=i-(this.p1[1]-this.p0[1])/(this.p1[0]-this.p0[0])*(e-this.p1[0]),r.S0R0(17),this.p2=[this.p1[r.y0R0("0",1287046624)],s]),this.render(t))},i.Drawing.channel.prototype.click=function(t,e,i){var a;if(a=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?(r.I3k0(),this.accidentalClick(e,i)?(this.stx.undo(),!0):null!==this.p2?(this.setPoint(2,this.p2[0],this.p2[1],a.chart),this.penDown=!1,!0):(this.setPoint(1,e,i,a.chart),this.p0[0]==this.p1[0]?(this.p1=null,!1):(r.S0R0(14),this.p2=[this.p1[0],this.p1[r.y0R0("1",0)]],!1))):(this.setPoint(0,e,i,a.chart),this.penDown=!0,!1)},i.Drawing.channel.prototype.boxIntersection=function(t,e,i){var a,n,s,o,l,h;if(a=this.p0,n=this.p1,s=this.p2,!a||!n||!s)return!1;o=2;for(var c=1;565365694!==r.x1y(c.toString(),c.toString().length,10110);c++){if(i.x0>Math.max(a[0],n[0])||i.x1<Math.min(a[0],n[0]))return!1;o+=2}return-1891897499!==r.u1y(o.toString(),o.toString().length,50439)&&i.x0<=Math.max(a[1],n[6])&&i.x1<=Math.min(a[4],n[1])||(l=(n[0]-a[0])*((s[1]<a[1]?i.y1:i.y0)-a[1])-(n[1]-a[1])*(t-a[0]),h=(s[0]-a[0])*((s[1]>a[1]?i.y1:i.y0)-(a[1]+s[1]-n[1]))-(n[1]-a[1])*(t-a[0]),r.S0R0(18),r.y0R0(l,0,h))},i.Drawing.channel.prototype.intersected=function(t,e,a){var n;if(!this.p0||!this.p1||!this.p2)return null;for(var s in n={0:this.p0,1:this.p1,2:this.p2})if(this.pointIntersection(n[s][0],n[s][1],a))return r.S0R0(1),this.highlighted=r.y0R0(s,"p"),{action:"drag",point:"p"+s};return this.boxIntersection(t,e,a)?(this.highlighted=!0,{action:"move",p0:i.clone(this.p0),p1:i.clone(this.p1),p2:i.clone(this.p2),tick:t,value:e}):null},i.Drawing.channel.prototype.render=function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g;(e=this.stx.panels[this.panelName])&&(a=this.stx.pixelFromTick(this.p0[0],e.chart),n=this.stx.pixelFromTick(this.p1[0],e.chart),s=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),l=null,this.p2&&(l=this.stx.pixelFromValueAdjusted(e,this.p2[0],this.p2[1])),h=this.lineWidth,c=this.getLineColor(),u=this.fillColor,this.p2&&u&&!i.isTransparent(u)&&"auto"!=u&&(t.beginPath(),t.moveTo(a,s),t.lineTo(n,o),t.lineTo(n,l),r.S0R0(19),t.lineTo(a,r.O0R0(l,s,o)),t.closePath(),t.globalAlpha=.2,t.fillStyle=u,t.fill(),t.globalAlpha=1),d={pattern:this.pattern,lineWidth:h},(this.penDown||this.highlighted)&&"none"==this.pattern&&(d.pattern="dotted"),this.stx.plotLine(a,n,s,o,c,"segment",t,e,d),this.p2&&(r.S0R0(19),this.stx.plotLine(a,n,r.y0R0(l,s,o),l,c,"segment",t,e,d)),this.highlighted&&(p="p0"==this.highlighted,m="p1"==this.highlighted,g="p2"==this.highlighted,this.littleCircle(t,a,s,p),this.littleCircle(t,n,o,m),this.littleCircle(t,n,l,g)))},i.Drawing.channel.prototype.reposition=function(t,e,i,a){var n,s,o;e&&(n=this.stx.panels[this.panelName],s=e.tick-i,o=e.value-a,"move"==e.action?(this.setPoint(0,e.p0[0]-s,e.p0[1]-o,n.chart),this.setPoint(1,e.p1[0]-s,e.p1[1]-o,n.chart),this.setPoint(2,e.p2[0]-s,e.p2[1]-o,n.chart),this.render(t)):"drag"==e.action&&(this[e.point]=[i,a],this.setPoint(0,this.p0[0],this.p0[1],n.chart),r.S0R0(6),this.setPoint(r.y0R0("1",0),this.p1[0],this.p1[1],n.chart),this.setPoint(2,this.p2[0],this.p2[1],n.chart),this.render(t)))},i.Drawing.channel.prototype.adjust=function(){var t;r.s3k0(),(t=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart),this.setPoint(2,this.d1,this.v2,t.chart))},i.Drawing.channel.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,r.I3k0(),this.v1=e.v1,this.v2=e.v2,this.adjust()},i.Drawing.channel.prototype.serialize=function(){return r.I3k0(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,v2:this.v2}},i.Drawing.pitchfork=function(){this.name="pitchfork",this.dragToDraw=!1,this.p2=null},i.inheritsFrom(i.Drawing.pitchfork,i.Drawing.channel),i.Drawing.pitchfork.prototype.configs=["color","lineWidth","pattern"],i.Drawing.pitchfork.prototype.move=function(t,e,i){this.penDown&&(this.copyConfig(),null===this.p2?this.p1=[e,i]:this.p2=[e,i],this.render(t))},i.Drawing.pitchfork.prototype.intersected=function(t,e,a){var n,s;if(!this.p0||!this.p1||!this.p2)return null;for(var o in n={0:this.p0,1:this.p1,2:this.p2})if(this.pointIntersection(n[o][0],n[o][1],a))return r.S0R0(1),this.highlighted=r.y0R0(o,"p"),{action:"drag",point:"p"+o};r.I3k0(),s=this.rays;for(var l=0;l<s.length;l++)if("s","eg","men","t",this.lineIntersection(t,e,a,l?"ray":"segment",s[l][0],s[l][1],!0))return this.highlighted=!0,{action:"move",p0:i.clone(this.p0),p1:i.clone(this.p1),p2:i.clone(this.p2),tick:t,value:e};return null},i.Drawing.pitchfork.prototype.render=function(t){var e,i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S;if(e=this.stx.panels[this.panelName]){i=this.stx,(a=this.p2)||(a=this.p1),n=i.pixelFromTick(this.p0[0],e.chart),s=i.pixelFromTick(this.p1[0],e.chart),o=i.pixelFromTick(a[0],e.chart),r.s3k0(),l=i.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),h=i.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),c=i.pixelFromValueAdjusted(e,a[0],a[1]),u=this.lineWidth,d=this.getLineColor(),p={pattern:this.pattern,lineWidth:u},m=50,r.S0R0(20),g=r.y0R0(h,"2",c,l),r.m0R0(21),(f=r.O0R0(s,2,o,n))<0&&(m*=-1),r.m0R0(7),g*=r.y0R0(f,m),r.S0R0(22),this.rays=[[[s,h],[o,c]],[[n,l],[r.y0R0(2147483647,"2",s,o),r.O0R0(c,h,2,r.S0R0(3))]]],s==o&&h==c||(r.m0R0(6),this.rays.push([[s,h],[r.O0R0(s,m),r.y0R0(h,g)]],[[o,c],[r.y0R0(o,m),r.O0R0(c,g)]]));for(var C=0;C<this.rays.length;C++)"s","egment",y=this.rays[C],v=C?"ray":"segment",i.plotLine(y[0][0],y[1][0],y[0][1],y[1][1],d,v,t,e,p);this.highlighted&&("p","0",x="p0"==this.highlighted,b="p1"==this.highlighted,S="p2"==this.highlighted,this.littleCircle(t,n,l,x),this.littleCircle(t,s,h,b),this.littleCircle(t,o,c,S))}},i.Drawing.pitchfork.prototype.adjust=function(){var t;r.I3k0(),(t=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart),this.setPoint(2,this.d2,this.v2,t.chart))},i.Drawing.pitchfork.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.d2=e.d2,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.tzo2=e.tzo2,this.v0=e.v0,this.v1=e.v1,this.v2=e.v2,this.adjust()},i.Drawing.pitchfork.prototype.serialize=function(){return r.s3k0(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2}},i.Drawing.gartley=function(){this.name="gartley",this.dragToDraw=!1,r.s3k0(),this.maxSegments=4,this.shape=null,this.points=[]},i.inheritsFrom(i.Drawing.gartley,i.Drawing.continuous),i.Drawing.gartley.prototype.check=function(t,e){if(!e)return!0;if(t[0]>=e[0]||t[1]==e[1])return!1;if(1==this.segment)t[1]<e[1]?this.shape="M":this.shape="W";else if(2==this.segment){if("M"==this.shape&&t[1]<e[1])return!1;if("W"==this.shape&&t[1]>e[1])return!1;if((e[1]-t[1])/(this.points[0][1]-t[1])<.618)return!1;if((e[1]-t[1])/(this.points[0][1]-t[1])>=.786)return!1}else if(3==this.segment){if("M"==this.shape&&t[1]>e[1])return!1;if("W"==this.shape&&t[1]<e[1])return!1;if((e[1]-t[1])/(this.points[1][1]-t[1])<.618)return!1;if((e[1]-t[1])/(this.points[1][1]-t[1])>=.786)return!1}else if(4==this.segment){if("M"==this.shape&&(t[1]<e[1]||e[1]<this.points[0][1]))return!1;if("W"==this.shape&&(t[1]>e[1]||e[1]>this.points[0][1]))return!1;if((this.points[1][1]-e[1])/(this.points[1][1]-this.points[2][1])<1.27)return!1;if((this.points[1][1]-e[1])/(this.points[1][1]-this.points[2][1])>=1.618)return!1}return r.I3k0(),!0},i.Drawing.gartley.prototype.click=function(t,e,i){var a;if(a=this.stx.panels[this.panelName]){if(this.copyConfig(),!this.penDown)return this.setPoint(0,e,i,a.chart),this.pts=[],this.penDown=!0,this.segment=1,!1;if(this.accidentalClick(e,i))return this.penDown=!0,!1;if(this.check(this.p0,this.p1)){if(1==this.segment&&this.points.push(this.p0),this.points.push(this.p1),this.setPoint(1,e,i,a.chart),this.segment++,this.segment>this.maxSegments){-1894160411,-524659292,2;for(var n=1;-1894160411!==r.x1y(n.toString(),n.toString().length,15412);n++)return this.setPoint(1,this.points[3][5],this.points[2][8],a.chart),this.penDown=!0,!1;if(-524659292!==r.x1y(2..toString(),2..toString().length,94860))return this.setPoint(0,this.points[0][0],this.points[0][1],a.chart),this.penDown=!1,!0}this.pts.push(this.d1,this.tzo1,this.v1),this.setPoint(0,e,i,a.chart)}return r.s3k0(),!1}},i.Drawing.gartley.prototype.render=function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g,f,y;if((e=this.stx.panels[this.panelName])&&(a=this.stx.pixelFromTick(this.p0[0],e.chart),n=this.stx.pixelFromTick(this.p1[0],e.chart),s=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),2==this.segment?this.drawDropZone(t,.618*this.points[0][1]+.382*this.p0[1],.786*this.points[0][1]+.214*this.p0[1],this.p0[0]):3==this.segment?this.drawDropZone(t,.618*this.points[1][1]+.382*this.p0[1],.786*this.points[1][1]+.214*this.p0[1],this.p0[0]):4==this.segment&&(l=1.618*this.points[2][1]-.618*this.points[1][1],l="M"==this.shape?Math.max(l,this.points[0][1]):Math.min(l,this.points[0][1]),this.drawDropZone(t,l,1.27*this.points[2][1]-.27*this.points[1][1],this.p0[0])),h=this.lineWidth,c=this.getLineColor(),u={pattern:this.pattern,lineWidth:h},(this.penDown||this.highlighted)&&"none"==this.pattern&&(u.pattern="dotted"),this.segment<=this.maxSegments&&this.stx.plotLine(a,n,s,o,c,this.name,t,e,u),d=this.fillColor,p=[],this.points.length)){t.beginPath();for(var v=1;v<this.points.length&&v<=4;v++)m=this.stx.pixelFromTick(this.points[v-1][0],e.chart),g=this.stx.pixelFromTick(this.points[v][0],e.chart),f=this.stx.pixelFromValueAdjusted(e,this.points[v-1][0],this.points[v-1][1]),y=this.stx.pixelFromValueAdjusted(e,this.points[v][0],this.points[v][1]),1==v&&p.push(m,f),p.push(g,y),this.stx.plotLine(m,g,f,y,c,this.name,t,e,u);if(2!=this.points.length&&4!=this.points.length||p.push(n,o),this.points[2]&&p.push(this.stx.pixelFromTick(this.points[2][0],e.chart),this.stx.pixelFromValueAdjusted(e,this.points[2][0],this.points[2][1])),d&&"auto"!=d&&!i.isTransparent(d)){for(var x=0;x<p.length;x+=2)0===x&&t.moveTo(p[0],p[1]),t.lineTo(p[x],p[x+1]);t.fillStyle=d,r.S0R0(6),t.globalAlpha=r.y0R0("0.2",0),t.closePath(),t.fill(),t.globalAlpha=1}}},i.Drawing.gartley.prototype.lineIntersection=function(t,e,a,n){var s,o;if(r.I3k0(),s=this.points,o=this.stx.panels[this.panelName],s.length!=this.maxSegments+1||!o)return!1;for(var l=0;l<s.length-1;l++)if("segm","ent",i.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,t,e,a,"segment",s[l],s[l+1]))return!0;return!1},i.Drawing.gartley.prototype.boxIntersection=function(t,e,i){var a,n;if(r.I3k0(),!this.p0||!this.p1)return!1;if(i.x0>Math.max(this.p0[0],this.p1[0])||i.x1<Math.min(this.p0[0],this.p1[0]))return!1;a=Math.min(this.p0[1],this.p1[1]),n=Math.max(this.p0[1],this.p1[1]);for(var s=0;s<this.points.length;s++)a=Math.min(a,this.points[s][1]),n=Math.max(n,this.points[s][1]);return!(i.y1>n||i.y0<a)},i.Drawing.gartley.prototype.reposition=function(t,e,i,a){var n,s,o,l,h;if("m","ov","e",e&&(n=this.stx.panels[this.panelName],s=e.tick-i,e.tick=i,o=e.value-a,e.value=a,"move"==e.action)){this.pts=[];for(var c=0;c<this.points.length;c++)this.points[c][0]-=s,this.points[c][1]-=o,this.setPoint(1,this.points[c][0],this.points[c][1],n.chart),c&&c<this.points.length-1&&this.pts.push(this.d1,this.tzo1,this.v1),this.points[c]=this.p1;1786731806,r.S0R0(23),l=-r.O0R0(2147483647,"1372514049"),h=2;for(var u=1;1786731806!==r.x1y(u.toString(),u.toString().length,86033);u++)this.setPoint(0,this.points[0][0],this.points[0][1],n.chart),this.render(t),h+=2;r.x1y(h.toString(),h.toString().length,19953)!==l&&(this.setPoint(2,this.points[3][6],this.points[2][2],n.chart),this.render(t))}},i.Drawing.gartley.prototype.configs=["color","fillColor","lineWidth","pattern"],i.Drawing.gartley.prototype.adjust=function(){var t;(t=this.stx.panels[this.panelName])&&(this.reconstructPoints(),this.setPoint(0,this.d0,this.v0,t.chart),this.points.unshift(this.p0),this.setPoint(1,this.d1,this.v1,t.chart),this.points.push(this.p1))},i.Drawing.gartley.prototype.reconstructPoints=function(){var t,e;if(t=this.stx.panels[this.panelName]){this.points=[];for(var a=0;a<this.pts.length;a+=3)(e=i.strToDateTime(this.pts[a])).setMinutes(e.getMinutes()+Number(this.pts[a+1])-e.getTimezoneOffset()),this.points.push([this.stx.tickFromDate(i.yyyymmddhhmmssmmm(e),t.chart),this.pts[a+2]])}},i.Drawing.gartley.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,r.I3k0(),this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.pts=e.pts.split(","),this.adjust()},i.Drawing.gartley.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,pts:this.pts.join(",")}},i.Drawing.freeform=function(){r.s3k0(),this.name="freeform",this.splineTension=.3,this.dragToDraw=!0},i.inheritsFrom(i.Drawing.freeform,i.Drawing.segment),i.Drawing.freeform.prototype.measure=function(){},i.Drawing.freeform.prototype.intersected=function(t,e,a){return a.x0>this.hiX||a.x1<this.lowX||a.y1>this.hiY||a.y0<this.lowY?null:(this.highlighted=!0,{action:"move",p0:i.clone(this.p0),tick:t,value:e})},i.Drawing.freeform.prototype.reposition=function(t,e,i,a){var n,s,o;e&&(n=this.stx.panels[this.panelName],r.s3k0(),s=e.tick-i,o=e.value-a,"move"==e.action&&(this.setPoint(0,e.p0[0]-s,e.p0[1]-o,n.chart),this.adjust(),this.render(t)))},i.Drawing.freeform.prototype.click=function(t,e,a){var n,s;if(n=this.stx.panels[this.panelName])return r.I3k0(),!1===this.penDown?(this.copyConfig(),this.startX=Math.round(this.stx.resolveX(this.stx.pixelFromTick(e,n.chart))),this.startY=Math.round(this.stx.resolveY(this.stx.pixelFromValueAdjusted(n,e,a))),s=this.stx.dateFromTick(e,n.chart,!0),this.d0=i.yyyymmddhhmmssmmm(s),this.tzo0=s.getTimezoneOffset(),this.v0=a,this.p0=[i.ChartEngine.crosshairX-this.startX,i.ChartEngine.crosshairY-this.startY],this.nodes=[this.p0[0],this.p0[1]],this.pNodes=[this.p0],this.candleWidth=this.stx.layout.candleWidth,this.multiplier=n.yAxis.multiplier,this.interval=this.stx.layout.interval,this.periodicity=this.stx.layout.periodicity,this.tempSplineTension=this.splineTension,r.m0R0(2),this.splineTension=-r.O0R0(564391872,"1"),document.body.style.cursor="pointer",this.penDown=!0,!1):(this.penDown=!1,this.splineTension=this.tempSplineTension,document.body.style.cursor="auto",!0)},i.Drawing.freeform.prototype.move=function(t,e,a){var n,s;if(this.penDown)return r.s3k0(),n=this.stx.panels[this.panelName],s=this.stx.dateFromTick(e,n.chart,!0),this.d1=i.yyyymmddhhmmssmmm(s),this.tzo1=s.getTimezoneOffset(),this.v1=a,this.p1=[i.ChartEngine.crosshairX-this.startX,n.yAxis.flipped?this.startY-i.ChartEngine.crosshairY:i.ChartEngine.crosshairY-this.startY],this.pNodes.length>2&&(this.p1[0]==this.pNodes[this.pNodes.length-2][0]&&this.p1[0]==this.pNodes[this.pNodes.length-1][0]?(this.pNodes.length--,r.S0R0(14),this.nodes.length-=r.y0R0("2",0)):this.p1[1]==this.pNodes[this.pNodes.length-2][1]&&this.p1[1]==this.pNodes[this.pNodes.length-1][1]&&(this.pNodes.length--,this.nodes.length-=2)),this.nodes.push(this.p1[0],this.p1[1]),this.pNodes.push(this.p1),this.render(t),!1},i.Drawing.freeform.prototype.intervalRatio=function(t,e,a,n,s,o){var l,h;if(r.s3k0(),l=0,t==e)l=1;else if(isNaN(t)||isNaN(e))if(isNaN(t)){if("d","a","y","m","onth","month"==t)"wee","k","week"==e?l=5:"day"==e?l=30:isNaN(e)||(l=30*u(s,o)/e);else if("week"==t)"month"==e&&(l=.2),"day"==e?l=d(s,o):isNaN(e)||(l=d(s,o)*u(s,o)/e);else if("day"==t){982301081,-250488923,h=2;for(var c=1;982301081!==r.u1y(c.toString(),c.toString().length,79517);c++)"week"==e?l=1/d(s,o):"month"==e?l=1/30:isNaN(e)||(l=u(s,o)/e),h+=2;-250488923!==r.x1y(h.toString(),h.toString().length,70698)&&("week"!==e?l=2+d(s,o):"month"===e?l=-28:~isNaN(e)&&(l=u(s,o)+e))}}else isNaN(t)||("month"==e?l=t/(30*u(s,o)):"week"==e?l=t/(d(s,o)*u(s,o)):"day"==e&&(l=t/u(s,o)));else r.m0R0(7),l=r.O0R0(e,t);function u(t,e){return r.I3k0(),i.Market.Symbology.isForexSymbol(e)?1440:390}function d(t,e){return r.s3k0(),5}return r.S0R0(7),l*=r.O0R0(n,a)},i.Drawing.freeform.prototype.render=function(t){var e,i,a,n,s,o,l,h,c,u,d,p;if((e=this.stx.panels[this.panelName])&&(r.I3k0(),0!==(i=this.intervalRatio(this.interval,this.stx.layout.interval,this.periodicity,this.stx.layout.periodicity,this.d0,e.chart.symbol)))){a=this.stx.layout.candleWidth/this.candleWidth,n=e.yAxis.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,e.chart),s=this.stx.pixelFromTick(this.p0[0],e.chart),o=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),l=[],h=this.lineWidth,c=this.getLineColor(),u={pattern:this.pattern,lineWidth:h};for(var m=0;m<this.pNodes.length;m++)d=i*a*this.pNodes[m][0]+s,p=n*this.pNodes[m][1],e.yAxis.flipped?(r.m0R0(6),p=r.O0R0(o,p)):p+=o,l.push(d,p);l.length&&(this.splineTension<0?this.stx.connectTheDots(l,c,this.name,t,e,u):this.stx.plotSpline(l,this.splineTension,c,this.name,t,!0,u))}},i.Drawing.freeform.prototype.adjust=function(){var t,e,i,a,n,s,o,l;if(t=this.stx.panels[this.panelName]){e=[this.nodes[0],this.nodes[1]],this.pNodes=[e],this.lowX=this.nodes[0],this.hiX=this.nodes[0],this.lowY=this.nodes[1],this.hiY=this.nodes[1];for(var h=2;h<this.nodes.length;h+=2)r.S0R0(1),i=[this.nodes[h],this.nodes[r.O0R0(1,h)]],this.pNodes.push(i),this.lowX=Math.min(this.lowX,i[0]),this.hiX=Math.max(this.hiX,i[0]),this.lowY=Math.max(this.lowY,i[1]),this.hiY=Math.min(this.hiY,i[1]);0!==(a=this.intervalRatio(this.interval,this.stx.layout.interval,this.periodicity,this.stx.layout.periodicity,this.d0,t.chart.symbol))&&(n=this.stx.layout.candleWidth/this.candleWidth,s=t.yAxis.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,t.chart),o=this.stx.pixelFromTick(this.p0[0],t.chart),l=this.stx.pixelFromValueAdjusted(t,this.p0[0],this.p0[1]),this.lowX=this.stx.tickFromPixel(Math.floor(a*n*this.lowX)+o,t.chart),this.hiX=this.stx.tickFromPixel(Math.ceil(a*n*this.hiX)+o,t.chart),t.yAxis.flipped?(this.lowY=this.stx.valueFromPixel(l-Math.floor(s*this.lowY),t),this.hiY=this.stx.valueFromPixel(l-Math.ceil(s*this.hiY),t)):(this.lowY=this.stx.valueFromPixel(Math.floor(s*this.lowY)+l,t),this.hiY=this.stx.valueFromPixel(Math.ceil(s*this.hiY)+l,t)))}},i.Drawing.freeform.prototype.serialize=function(){return r.s3k0(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,cw:Number(this.candleWidth.toFixed(4)),mlt:Number(this.multiplier.toFixed(4)),d0:this.d0,tzo0:this.tzo0,v0:this.v0,inter:this.interval,pd:this.periodicity,nodes:this.nodes}},i.Drawing.freeform.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.candleWidth=e.cw,this.multiplier=e.mlt,this.d0=e.d0,this.tzo0=e.tzo0,this.v0=e.v0,this.interval=e.inter,this.periodicity=e.pd,this.nodes=e.nodes,this.adjust()},i.Drawing.callout=function(){var t;this.name="callout",this.arr=[],this.w=0,this.h=0,this.padding=4,this.text="",this.ta=null,this.fontSize=0,this.font={},this.stemEntry="",t=2;for(var e=1;-52624498!==r.u1y(e.toString(),e.toString().length,41327);e++)r.S0R0(0),this.defaultWidth=r.y0R0("57",1),r.m0R0(2),t+=r.y0R0(911465248,"2");-1210131893!==r.u1y(t.toString(),t.toString().length,95256)&&(this.defaultWidth=50),r.m0R0(14),this.defaultHeight=r.O0R0("10",0)},i.inheritsFrom(i.Drawing.callout,i.Drawing.annotation),i.Drawing.callout.prototype.configs=["color","fillColor","lineWidth","pattern","font"],i.Drawing.callout.prototype.copyConfig=function(t){r.s3k0(),i.Drawing.copyConfig(this,t),this.borderColor=this.color},i.Drawing.callout.prototype.move=function(t,e,i){this.penDown&&(this.copyConfig(),this.p0=[e,i],r.s3k0(),this.render(t))},i.Drawing.callout.prototype.onChange=function(t){var e,a;this.stx.panels[this.panelName]&&(e=t.target,this.w=e.clientWidth,this.h=e.clientHeight,a=this.context||this.stx.chart.tempCanvas.context,i.clearCanvas(a.canvas,this.stx),this.render(a),this.edit(a))},i.Drawing.callout.prototype.render=function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b;if("a","lphabeti","c","stx","_highlight","_v","ector","aut","o",this.context=t,(e=this.stx.panels[this.panelName])&&(a=this.stx.pixelFromTick(this.p0[0],e.chart),n=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),!isNaN(n))){if(t.font=this.fontString,t.textBaseline="top",s=a,o=n,l=this.w/2,h=this.h/2,this.penDown&&(l=this.defaultWidth,(h=this.defaultHeight)||(h=this.fontSize)),(c=this.lineWidth)||(c=1.1),("auto"==(u=this.color)||i.isTransparent(u))&&(u=this.stx.defaultColor),("auto"==(d=this.borderColor)||i.isTransparent(d))&&(d=this.stx.defaultColor),this.highlighted&&(d=this.stx.getCanvasColor("stx_highlight_vector")),y=Math.min(Math.min(l,h)/2,8),this.stem&&(this.stem.t?(p=this.stx.pixelFromTick(this.stem.t),g=this.stx.pixelFromValueAdjusted(e,this.stem.t,this.stem.v)):this.stem.x&&(p=s,g=o,s+=this.stem.x,o+=this.stem.y),v="",p>=s+l?(r.m0R0(1),m=r.O0R0(l,s),v="r"):p>s-l&&p<s+l?(m=s,v="c"):p<=s-l&&(r.m0R0(6),m=r.y0R0(s,l),v="l"),g>=o+h?(r.m0R0(1),f=r.O0R0(h,o),v+="b"):g>o-h&&g<o+h?(f=o,v+="m"):g<=o-h&&(r.S0R0(6),f=r.y0R0(o,h),v+="t"),this.stemEntry=v,"cm"!=v&&(p=Math.round(p),m=Math.round(m),g=Math.round(g),f=Math.round(f))),this.highlighted?this.stx.canvasColor("stx_annotation_highlight_bg",t):this.fillColor?(t.fillStyle=this.fillColor,t.globalAlpha=.4):this.stem&&(t.fillStyle=this.stx.containerColor),t.strokeStyle=d,t.setLineDash&&(t.setLineDash(i.borderPatternToArray(c,this.pattern)),t.lineDashOffset=0),d){if("l","b","c","b","r","b",t.beginPath(),t.lineWidth=c,r.S0R0(4),t.moveTo(r.O0R0(s,l,y),r.O0R0(o,h,r.S0R0(6))),"rt"!=this.stemEntry?(r.m0R0(1),t.quadraticCurveTo(r.y0R0(l,s),r.O0R0(o,h,r.S0R0(6)),r.y0R0(l,s,r.S0R0(1)),r.y0R0(y,h,o,r.m0R0(8)))):(t.lineTo(p,g),r.m0R0(1),t.lineTo(r.O0R0(l,s),r.O0R0(y,h,o,r.S0R0(8)))),r.S0R0(1),t.lineTo(r.y0R0(l,s),r.O0R0(2,o,y,r.S0R0(24))),"rm"==this.stemEntry&&t.lineTo(p,g),r.S0R0(1),t.lineTo(r.y0R0(l,s),r.O0R0(o,2,y,r.m0R0(25))),r.S0R0(1),t.lineTo(r.y0R0(l,s),r.y0R0(o,h,y,r.m0R0(4))),"rb"!=this.stemEntry?(r.m0R0(1),t.quadraticCurveTo(r.y0R0(l,s),r.y0R0(h,o,r.m0R0(1)),r.y0R0(s,l,y,r.S0R0(4)),r.O0R0(h,o,r.S0R0(1)))):(t.lineTo(p,g),r.m0R0(4),t.lineTo(r.O0R0(s,l,y),r.y0R0(h,o,r.S0R0(1)))),r.m0R0(25),t.lineTo(r.O0R0(s,2,y),r.y0R0(h,o,r.S0R0(1))),"cb"==this.stemEntry&&t.lineTo(p,g),r.m0R0(24),t.lineTo(r.O0R0(2,s,y),r.O0R0(h,o,r.m0R0(1))),r.S0R0(8),t.lineTo(r.y0R0(y,l,s),r.y0R0(h,o,r.m0R0(1))),"lb"!=this.stemEntry){-859925635,-411232805,x=2;for(var S=1;-859925635!==r.u1y(S.toString(),S.toString().length,17573);S++)r.m0R0(1),t.quadraticCurveTo(r.O0R0(l,s),r.y0R0(o,h,r.S0R0(0)),r.O0R0(l,s,r.S0R0(7)),r.O0R0(y,o,h,r.S0R0(26))),x+=2;-411232805!==r.x1y(x.toString(),x.toString().length,5183)&&(r.S0R0(6),t.quadraticCurveTo(r.O0R0(s,l),r.y0R0(o,h,r.m0R0(6)),r.O0R0(s,l,r.m0R0(27)),r.O0R0(h,y,o,r.m0R0(28)))),r.S0R0(6),t.quadraticCurveTo(r.y0R0(s,l),r.O0R0(h,o,r.S0R0(1)),r.y0R0(s,l,r.S0R0(6)),r.O0R0(o,h,y,r.m0R0(4)))}else t.lineTo(p,g),r.S0R0(6),t.lineTo(r.y0R0(s,l),r.y0R0(o,h,y,r.S0R0(4)));r.S0R0(6),t.lineTo(r.y0R0(s,l),r.O0R0(o,2,y,r.S0R0(25))),"lm"==this.stemEntry&&t.lineTo(p,g),r.S0R0(6),t.lineTo(r.O0R0(s,l),r.O0R0(2,o,y,r.m0R0(24))),r.m0R0(6),t.lineTo(r.y0R0(s,l),r.y0R0(y,h,o,r.m0R0(8))),"lt"!=this.stemEntry?(r.S0R0(6),t.quadraticCurveTo(r.O0R0(s,l),r.O0R0(o,h,r.m0R0(6)),r.O0R0(y,l,s,r.S0R0(8)),r.y0R0(o,h,r.S0R0(6)))):(t.lineTo(p,g),r.S0R0(8),t.lineTo(r.O0R0(y,l,s),r.O0R0(o,h,r.m0R0(6)))),r.S0R0(24),t.lineTo(r.O0R0(2,s,y),r.O0R0(o,h,r.S0R0(6))),"ct"==this.stemEntry&&t.lineTo(p,g),r.S0R0(25),t.lineTo(r.y0R0(s,2,y),r.O0R0(o,h,r.m0R0(6))),r.m0R0(4),t.lineTo(r.y0R0(s,l,y),r.O0R0(o,h,r.m0R0(6))),t.fill(),t.globalAlpha=1,"none"!=this.pattern&&t.stroke()}if(this.highlighted?("s","tx","_annotation_highlight",this.stx.canvasColor("stx_annotation_highlight",t)):t.fillStyle=u,o+=this.padding,!this.ta)for(var C=0;C<this.arr.length;C++)t.fillText(this.arr[C],s-l+this.padding,o-h),o+=this.fontSize;t.textBaseline="alphabetic",this.highlighted&&!this.noHandles&&(b="p0"==this.highlighted,this.littleCircle(t,p,g,b))}},i.Drawing.callout.prototype.click=function(t,e,i){var a;if(!this.stx.overXAxis&&!this.stx.overYAxis)return a=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,e,i,a.chart),this.penDown?(this.adjust(),this.edit(t),this.penDown=!1,!1):(this.stem={d:this.d0,v:this.v0},this.penDown=!0,this.adjust(),!1)},i.Drawing.callout.prototype.reposition=function(t,e,i,a){var r,n,s;e&&(r=this.stx.panels[this.panelName],n=e.tick-i,s=e.value-a,e.stem?("m","o","v","e","drag"==e.action?this.stem={d:this.stx.dateFromTick(i,r.chart,!0),v:a}:"move"==e.action&&(this.setPoint(0,e.p0[0]-n,e.p0[1]-s,r.chart),this.stem={d:this.stx.dateFromTick(this.stx.tickFromDate(e.stem.d,r.chart)-n),v:e.stem.v-s}),this.adjust()):this.setPoint(0,e.p0[0]-n,e.p0[1]-s,r.chart),this.render(t))},i.Drawing.callout.prototype.lineIntersection=function(t,e,a,n){var s,o,l,h,c,u,d,p,m,g,f,y;return s=this.stx.panels[this.panelName],o=this.stem,l=this.p0,h=this.stx,!!(l&&o&&s)&&(c=o.t||this.stx.tickFromDate(o.d,s.chart),u={x0:l[0],x1:c,y0:l[1],y1:o.v},p=(d=i.convertBoxToPixels(h,this.panelName,u)).x0,m=d.y0,g=d.x1,f=d.y1,"string"==typeof this.stemEntry&&(this.stemEntry.indexOf("l")>-1?p-=this.w/2:this.stemEntry.indexOf("r")>-1&&(p+=this.w/2),this.stemEntry.indexOf("t")>-1?m-=this.h/2:this.stemEntry.indexOf("b")>-1&&(m+=this.h/2)),r.I3k0(),y=i.convertBoxToPixels(h,this.panelName,a),i.boxIntersects(y.x0,y.y0,y.x1,y.y1,p,m,g,f,n))},i.Drawing.callout.prototype.intersected=function(t,e,a){var n,s,o,l,h,c,u,d;if("segme","nt",n=this.stx.panels[this.panelName],!this.p0)return null;if(this.pointIntersection(this.stem.t,this.stem.v,a)){"p","0",-1145024837,-801851006,s=2;for(var p=1;-1145024837!==r.x1y(p.toString(),p.toString().length,59110);p++)this.highlighted="",r.S0R0(14),s+=r.y0R0("2",0);return-801851006!==r.u1y(s.toString(),s.toString().length,10950)&&(this.highlighted=""),this.highlighted="p0",{action:"drag",stem:!0}}return o=this.stx.pixelFromTick(this.p0[0],n.chart)-this.w/2,l=this.stx.pixelFromValueAdjusted(n,this.p0[0],this.p0[1])-this.h/2,h=o+this.w,c=l+this.h,this.stem&&this.stem.x&&(o+=this.stem.x,h+=this.stem.x,l+=this.stem.y,c+=this.stem.y),r.I3k0(),u=this.stx.pixelFromTick(t,n.chart),d=this.stx.pixelFromValueAdjusted(n,t,e),u+a.r>=o&&u-a.r<=h&&d+a.r>=l&&d-a.r<=c?(this.highlighted=!0,{p0:i.clone(this.p0),tick:t,value:e}):this.lineIntersection(t,e,a,"segment")?(this.highlighted=!0,{action:"move",stem:i.clone(this.stem),p0:i.clone(this.p0),tick:t,value:e}):null},i.Drawing.fibonacci=function(){this.name="fibonacci",r.s3k0(),this.configurator="fibonacci"},i.inheritsFrom(i.Drawing.fibonacci,i.Drawing.BaseTwoPoint),i.Drawing.fibonacci.mapping={trend:"t",color:"c",parameters:"p",pattern:"pt",opacity:"o",lineWidth:"lw",level:"l",extendLeft:"e",printLevels:"pl",printValues:"pv",timezone:"tz",display:"d"},r.S0R0(0),i.Drawing.fibonacci.prototype.recommendedLevels=[-r.y0R0("0.618",1),-.382,0,.382,.5,.618,1,r.y0R0("1.382",0,r.m0R0(6)),1.618],i.Drawing.fibonacci.prototype.configs=["color","fillColor","lineWidth","pattern","parameters"],i.Drawing.fibonacci.prototype.initializeSettings=function(t){var e,i;if(r.I3k0(),(e=this.recommendedLevels)&&!t.currentVectorParameters.fibonacci.fibsAlreadySet){i=t.currentVectorParameters.fibonacci.fibs;for(var a=0;a<i.length;a++){delete i[a].display;for(var n=0;n<e.length;n++)i[a].level==e[n]&&(i[a].display=!0)}}},i.Drawing.fibonacci.prototype.setOuter=function(){var t,e,a,n,s,o,l,h,c,u,d,p,m,g;if(e=(t=this.stx).panels[this.panelName],r.I3k0(),e){a=Math.max(this.p0[1],this.p1[1]),n=Math.min(this.p0[1],this.p1[1]),r.m0R0(6),s=r.y0R0(a,n),this.outer={p0:i.clone(this.p0),p1:i.clone(this.p1)},o=t.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),l=t.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),h=t.pixelFromTick(this.p0[0],e.chart),c=t.pixelFromTick(this.p1[0],e.chart),u=0,r.S0R0(10),d=r.O0R0("1",0);for(var f=0;f<this.parameters.fibs.length;f++)(p=this.parameters.fibs[f]).level>=u&&p.level<=d||!p.display||(m=t.pixelFromValueAdjusted(e,this.p0[0],l<o?a-s*p.level:n+s*p.level),g=i.xIntersection({x0:h,x1:c,y0:o,y1:l},m),p.level<u?(u=p.level,r.S0R0(17),this.outer.p1[r.O0R0("1",2065158944)]=t.valueFromPixel(m,e),this.outer.p1[0]=t.tickFromPixel(g,e.chart)):p.level>d&&(d=p.level,this.outer.p0[1]=t.valueFromPixel(m,e),r.m0R0(0),this.outer.p0[r.O0R0("0",1)]=t.tickFromPixel(g,e.chart)))}},i.Drawing.fibonacci.prototype.click=function(t,e,a){var r;if(r=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(e,a)?this.dragToDraw:(this.setPoint(1,e,a,r.chart),this.setOuter(),this.parameters=i.clone(this.parameters),this.penDown=!1,!0):(this.setPoint(0,e,a,r.chart),this.penDown=!0,!1)},i.Drawing.fibonacci.prototype.render=function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E,O,I,N;if("s","egmen","t","16","1.8%","mid","dl","e",(e=this.stx.panels[this.panelName])&&(a=e.yAxis,this.p1)){n=Math.max(this.p0[1],this.p1[1]),s=Math.min(this.p0[1],this.p1[1]),o=a.flipped?s-n:n-s,l=this.stx.pixelFromTick(this.p0[0],e.chart),h=this.stx.pixelFromTick(this.p1[0],e.chart),c=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),u=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),d=Math.min(u,c),p=Math.max(u,c),r.m0R0(6),m=r.y0R0(p,d),r.S0R0(29),g=r.y0R0(c,h,0,u,l),f={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=f),y=this.getLineColor(this.parameters.trend.color),t.textBaseline="middle",this.stx.canvasFont("stx_yaxis",t),v=t.measureText("161.8%").width+10,x=Number.MAX_VALUE,b=Number.MAX_VALUE,S=-1*Number.MAX_VALUE,C=-1*Number.MAX_VALUE,("auto"==(w=this.color)||i.isTransparent(w))&&(w=this.stx.defaultColor),this.rays=[];for(var H=0;H<this.parameters.fibs.length;H++)"s","e","gme","nt","l","ef","t",t.textAlign="left",t.fillStyle=w,(T=this.parameters.fibs[H]).display&&(k=this.stx.pixelFromValueAdjusted(e,this.p0[0],u<c?n-o*T.level:s+o*T.level),D=i.xIntersection({x0:l,x1:h,y0:c,y1:u},k),A=this.parameters.extendLeft?0:D,M=e.left+e.width,this.parameters.printLevels&&("r","i","gh","t",P=Math.round(1e3*T.level)/10+"%",M-=v,this.parameters.printValues&&(t.fillStyle=w,this.stx.canvasFont("stx_yaxis",t)),M<A&&(t.textAlign="right"),t.fillText(P,M,k),M<A?M+=5:M-=5),this.parameters.printValues&&D<e.width&&(F=this.stx.transformedPriceFromPixel(k,e),F=a.priceFormatter?a.priceFormatter(this.stx,e,F):this.stx.formatYAxisPrice(F,e),t==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(e,F,k,w,null,t),t==this.stx.chart.context&&this.stx.startClip(e.name)),("auto"==(_=T.color)||i.isTransparent(_))&&(_=this.color),("auto"==_||i.isTransparent(_))&&(_=this.stx.defaultColor),("auto"==(R=T.color)||i.isTransparent(R))&&(R=this.fillColor),("auto"==R||i.isTransparent(R))&&(R=this.stx.defaultColor),t.fillStyle=R,L=i.clone(T.parameters),this.highlighted&&(L.opacity=1),this.stx.plotLine(A,M,k,k,this.highlighted?y:_,"segment",t,e,L),this.rays.push([[A,k],[M,k]]),t.globalAlpha=.05,t.beginPath(),t.moveTo(M,k),t.lineTo(A,k),A?t.lineTo(h,u):t.lineTo(A,u),t.lineTo(M,u),void 0!==R&&t.fill(),t.globalAlpha=1,k<b&&(x=D,b=k),k>C&&(S=D,C=k));for(var V=0;V<=1;V++)E=g?p-m*V:d+m*V,(E=Math.round(E))<b&&(x=i.xIntersection({x0:l,x1:h,y0:c,y1:u},E),b=E),E>C&&(S=i.xIntersection({x0:l,x1:h,y0:c,y1:u},E),C=E);O=i.clone(this.parameters.trend.parameters),this.highlighted&&(O.opacity=1),this.stx.plotLine(x,S,b,C,y,"segment",t,e,O),this.highlighted&&("p","0",I="p0"==this.highlighted,N="p1"==this.highlighted,this.littleCircle(t,l,c,I),this.littleCircle(t,h,u,N))}},i.Drawing.fibonacci.prototype.reposition=function(t,e,a,r){e&&(i.Drawing.BaseTwoPoint.prototype.reposition.apply(this,arguments),this.adjust())},i.Drawing.fibonacci.prototype.intersected=function(t,e,a){var n,s,o,l,h,c;if(n=this.p0,s=this.p1,!n||!s)return null;for(var u in o={0:n,1:s})if(this.pointIntersection(o[u][0],o[u][1],a))return r.S0R0(1),this.highlighted=r.y0R0(u,"p"),{action:"drag",point:"p"+u};if(l=this.outer,h=this.rays,!(c=l&&this.lineIntersection(t,e,a,"segment",l.p0,l.p1)))for(var d=0;d<h.length;d++)if(this.lineIntersection(t,e,a,"ray",h[d][0],h[d][1],!0)){c=!0;break}return c?(this.highlighted=!0,{action:"move",p0:i.clone(n),p1:i.clone(s),tick:t,value:e}):null},i.Drawing.fibonacci.prototype.reconstruct=function(t,e){e=i.replaceFields(e,i.reverseObject(i.Drawing.fibonacci.mapping)),this.stx=t,this.parameters=e.parameters,this.parameters||(this.parameters=i.clone(this.stx.currentVectorParameters.fibonacci)),this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.d0=e.d0,this.d1=e.d1,this.d2=e.d2,r.s3k0(),this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.tzo2=e.tzo2,this.v0=e.v0,this.v1=e.v1,this.v2=e.v2,this.adjust()},i.Drawing.fibonacci.prototype.adjust=function(){var t;r.s3k0(),(t=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart),this.setOuter())},i.Drawing.fibonacci.prototype.serialize=function(){var t;return r.s3k0(),t={name:this.name,parameters:this.parameters,pnl:this.panelName,col:this.color,fc:this.fillColor,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2},i.replaceFields(t,i.Drawing.fibonacci.mapping)},i.Drawing.retracement=function(){this.name="retracement"},i.inheritsFrom(i.Drawing.retracement,i.Drawing.fibonacci),i.Drawing.fibprojection=function(){r.s3k0(),this.name="fibprojection",this.dragToDraw=!1,this.p2=null},i.inheritsFrom(i.Drawing.fibprojection,i.Drawing.fibonacci),i.Drawing.fibprojection.prototype.recommendedLevels=[0,.618,1,1.272,1.618,2.618,4.236],i.Drawing.fibprojection.prototype.click=function(t,e,a){var n;if(n=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(e,a)?(this.stx.undo(),!0):null!==this.p2?(this.setPoint(2,this.p2[0],this.p2[1],n.chart),this.parameters=i.clone(this.parameters),!0):(this.setPoint(1,e,a,n.chart),r.I3k0(),this.p2=[this.p1[0],this.p1[1]],!1):(this.setPoint(0,e,a,n.chart),this.penDown=!0,!1)},i.Drawing.fibprojection.prototype.render=function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P;if("segmen",r.s3k0(),"t","s","eg","me","nt","s","ol","i","d",(e=this.stx.panels[this.panelName])&&(a=e.yAxis,this.p1)){if(n=this.p1[1]-this.p0[1],s=this.stx.pixelFromTick(this.p0[0],e.chart),o=this.stx.pixelFromTick(this.p1[0],e.chart),l=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),h=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),c=null,u=null,this.p2&&(c=this.stx.pixelFromTick(this.p2[0],e.chart),u=this.stx.pixelFromValueAdjusted(e,this.p2[0],this.p2[1])),d={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=d),p=this.getLineColor(this.parameters.trend.color),t.textBaseline="middle",this.stx.canvasFont("stx_yaxis",t),m=t.measureText("161.8%").width+10,("auto"==(g=this.color)||i.isTransparent(g))&&(g=this.stx.defaultColor),this.p2){this.rays=[];for(var F=0;F<this.parameters.fibs.length;F++)"aut","o","a","ut","o",t.textAlign="left",t.fillStyle=g,(f=this.parameters.fibs[F]).display&&(y=this.stx.pixelFromValueAdjusted(e,this.p2[0],this.p2[1]+n*f.level),v=i.xIntersection({x0:s,x1:o,y0:l,y1:h},y),x=this.parameters.extendLeft?0:s,b=e.left+e.width,this.parameters.printLevels&&("rig","ht",S=Math.round(1e3*f.level)/10+"%",b-=m,this.parameters.printValues&&("s","tx_yaxis",t.fillStyle=g,this.stx.canvasFont("stx_yaxis",t)),b<x&&(t.textAlign="right"),t.fillText(S,b,y),b<x?b+=5:(r.m0R0(2),b-=r.y0R0(1575416640,"5"))),this.parameters.printValues&&v<e.width&&(C=this.stx.transformedPriceFromPixel(y,e),C=a.priceFormatter?a.priceFormatter(this.stx,e,C):this.stx.formatYAxisPrice(C,e),t==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(e,C,y,g,null,t),t==this.stx.chart.context&&this.stx.startClip(e.name)),("auto"==(w=f.color)||i.isTransparent(w))&&(w=this.color),("auto"==w||i.isTransparent(w))&&(w=this.stx.defaultColor),("auto"==(T=f.color)||i.isTransparent(T))&&(T=this.fillColor),("auto"==T||i.isTransparent(T))&&(T=this.stx.defaultColor),t.fillStyle=T,k=i.clone(f.parameters),this.highlighted&&(k.opacity=1),this.stx.plotLine(x,b,y,y,this.highlighted?p:w,"segment",t,e,k),this.rays.push([[x,y],[b,y]]),t.globalAlpha=.05,t.beginPath(),t.moveTo(b,y),t.lineTo(x,y),x?t.lineTo(s,u):t.lineTo(x,u),t.lineTo(b,u),void 0!==T&&t.fill(),t.globalAlpha=1)}D=i.clone(this.parameters.trend.parameters),this.highlighted&&(D.opacity=1),this.stx.plotLine(s,o,l,h,p,"segment",t,e,D),this.p2&&this.stx.plotLine(o,c,h,u,p,"segment",t,e,D),this.highlighted&&("p","2",A="p0"==this.highlighted,M="p1"==this.highlighted,P="p2"==this.highlighted,this.littleCircle(t,s,l,A),this.littleCircle(t,o,h,M),this.littleCircle(t,c,u,P))}},i.Drawing.fibprojection.prototype.move=function(t,e,i){this.penDown&&(this.copyConfig(),null===this.p2?this.p1=[e,i]:this.p2=[e,i],this.render(t))},i.Drawing.fibprojection.prototype.reposition=function(t,e,i,a){var n,s,o;e&&(n=this.stx.panels[this.panelName],s=e.tick-i,o=e.value-a,"move"==e.action?(r.S0R0(0),this.setPoint(r.O0R0("0",1),e.p0[0]-s,e.p0[1]-o,n.chart),this.setPoint(1,e.p1[0]-s,e.p1[1]-o,n.chart),this.setPoint(2,e.p2[0]-s,e.p2[1]-o,n.chart),this.render(t)):"drag"==e.action&&(this[e.point]=[i,a],r.S0R0(17),this.setPoint(r.O0R0("0",1301072064),this.p0[0],this.p0[1],n.chart),this.setPoint(1,this.p1[0],this.p1[1],n.chart),this.setPoint(2,this.p2[0],this.p2[1],n.chart),this.render(t)))},i.Drawing.fibprojection.prototype.intersected=function(t,e,a){var n,s,o,l,h,c;if("seg","m","ent",n=this.p0,s=this.p1,o=this.p2,!n||!s||!o)return null;for(var u in l={0:n,1:s,2:o})if(this.pointIntersection(l[u][0],l[u][1],a))return r.m0R0(1),this.highlighted=r.y0R0(u,"p"),{action:"drag",point:"p"+u};if(h=this.rays,!(c=this.lineIntersection(t,e,a,"segment",n,s)||this.lineIntersection(t,e,a,"segment",s,o)))for(var d=0;d<h.length;d++)if(this.lineIntersection(t,e,a,"ray",h[d][0],h[d][1],!0)){c=!0;break}return c?(this.highlighted=!0,{action:"move",p0:i.clone(n),p1:i.clone(s),p2:i.clone(o),tick:t,value:e}):null},i.Drawing.fibprojection.prototype.adjust=function(){var t;(t=this.stx.panels[this.panelName])&&(r.m0R0(0),this.setPoint(r.y0R0("0",1),this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart),this.setPoint(2,this.d2,this.v2,t.chart))},i.Drawing.fibarc=function(){this.name="fibarc"},i.inheritsFrom(i.Drawing.fibarc,i.Drawing.fibonacci),r.m0R0(0),i.Drawing.fibarc.prototype.recommendedLevels=[r.O0R0("0.382",1),.5,.618,1],i.Drawing.fibarc.prototype.setOuter=function(){var t,e,a,n,s,o,l;(t=this.stx.panels[this.panelName])&&(this.outer={p0:i.clone(this.p0),p1:i.clone(this.p1)},e=this.stx.pixelFromValueAdjusted(t,this.p0[0],this.p0[1]),a=this.stx.pixelFromValueAdjusted(t,this.p1[0],this.p1[1]),n=this.stx.pixelFromTick(this.p0[0],t.chart),s=this.stx.pixelFromTick(this.p1[0],t.chart),r.S0R0(30),o=r.O0R0(a,2,e),l=i.xIntersection({x0:n,x1:s,y0:e,y1:a},o),this.outer.p0[1]=this.stx.valueFromPixel(o,t),this.outer.p0[0]=this.stx.tickFromPixel(l,t.chart))},i.Drawing.fibarc.prototype.intersected=function(t,e,a){var n,s,o,l,h,c,u,d,p,m;if("m","o","v","e",n=this.stx.panels[this.panelName]){if(s=this.p0,o=this.p1,l=this.outer,!s||!o)return null;for(var g in h={0:s,1:o})if(this.pointIntersection(h[g][0],h[g][1],a))return r.m0R0(1),this.highlighted=r.O0R0(g,"p"),{action:"drag",point:"p"+g};return this.lineIntersection(t,e,a,"segment",l.p0,l.p1)?("m","o","ve",this.highlighted=!0,{action:"move",p0:i.clone(s),p1:i.clone(o),tick:t,value:e}):(c={x0:s[0],x1:o[0],y0:s[1],y1:o[1]},u=i.convertBoxToPixels(this.stx,this.panelName,c),d={x:Math.abs(Math.sqrt(2)*(u.x1-u.x0)),y:Math.abs(Math.sqrt(2)*(u.y1-u.y0))},p=this.stx.pixelFromTick(t,n.chart),m=this.stx.pixelFromValueAdjusted(n,t,e),p+a.r<u.x1-d.x||p-a.r>u.x1+d.x||m+a.r<u.y1-d.y||m-a.r>u.y1+d.y||u.y0<u.y1&&m-a.r>u.y1||u.y0>u.y1&&m+a.r<u.y1?null:(this.highlighted=!0,{action:"move",p0:i.clone(this.p0),p1:i.clone(this.p1),tick:t,value:e}))}},i.Drawing.fibarc.prototype.render=function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T;if("se","g",r.I3k0(),"ment",(e=this.stx.panels[this.panelName])&&(a=e.yAxis,this.p1)){n=this.stx.pixelFromTick(this.p0[0],e.chart),s=this.stx.pixelFromTick(this.p1[0],e.chart),o=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),l=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),r.S0R0(31),h=r.O0R0(o,l),r.S0R0(32),c=Math.abs(r.O0R0(l,n,o,s)),u=this.getLineColor(this.parameters.trend.color),t.textBaseline="middle",this.stx.canvasFont("stx_yaxis",t),("auto"==(d=this.color)||i.isTransparent(d))&&(d=this.stx.defaultColor);for(var k=0;k<this.parameters.fibs.length;k++)"a","u","to","a","uto","l","e","f","t",t.fillStyle=d,(p=this.parameters.fibs[k]).level<0||!p.display||(m=Math.abs(this.p1[1]-this.p0[1])*Math.sqrt(2)*p.level,g=this.p1[1]+m*(h?-1:1)*(a.flipped?-1:1),f=this.stx.pixelFromValueAdjusted(e,this.p0[0],g),y=i.xIntersection({x0:n,x1:s,y0:o,y1:l},f),this.parameters.printLevels&&("cente","r",t.textAlign="center",v=Math.round(1e3*p.level)/10+"%",this.parameters.printValues&&("st","x_ya","xis",t.fillStyle=d,this.stx.canvasFont("stx_yaxis",t)),t.fillText(v,s,Math.round(f-5))),t.textAlign="left",this.parameters.printValues&&y<e.width&&(x=g,x=a.priceFormatter?a.priceFormatter(this.stx,e,x):this.stx.formatYAxisPrice(x,e),t==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(e,x,f,d,null,t),t==this.stx.chart.context&&this.stx.startClip(e.name)),("auto"==(b=p.color)||i.isTransparent(b))&&(b=this.color),("auto"==b||i.isTransparent(b))&&(b=this.stx.defaultColor),t.strokeStyle=this.highlight?u:b,("auto"==(S=p.color)||i.isTransparent(S))&&(S=this.fillColor),("auto"==S||i.isTransparent(S))&&(S=this.stx.defaultColor),t.fillStyle=S,t.globalAlpha=this.highlighted?1:p.parameters.opacity,t.lineWidth=p.parameters.lineWidth,t.setLineDash&&(t.setLineDash(i.borderPatternToArray(t.lineWidth,p.parameters.pattern)),t.lineDashOffset=0),t.save(),t.beginPath(),r.S0R0(7),t.scale(r.O0R0(c,1),1),r.S0R0(0),t.arc(r.y0R0(s,c),l,Math.abs(f-l),0,Math.PI,!h),"none"!=this.pattern&&t.stroke(),t.globalAlpha=.05,t.fill(),t.restore(),t.setLineDash&&t.setLineDash([]),t.globalAlpha=1);t.textAlign="left",C=i.clone(this.parameters.trend.parameters),this.highlighted&&(C.opacity=1),r.S0R0(30),this.stx.plotLine(s,r.y0R0(s,2,n),l,r.O0R0(l,2,o),u,"segment",t,e,C),this.highlighted&&(w="p0"==this.highlighted,T="p1"==this.highlighted,this.littleCircle(t,n,o,w),this.littleCircle(t,s,l,T))}},i.Drawing.fibfan=function(){r.I3k0(),this.name="fibfan"},i.inheritsFrom(i.Drawing.fibfan,i.Drawing.fibonacci),i.Drawing.fibfan.prototype.recommendedLevels=[0,.382,.5,.618,1],i.Drawing.fibfan.prototype.setOuter=function(){},i.Drawing.fibfan.prototype.render=function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F;if("au","to","1","6","1.","8%",(e=this.stx.panels[this.panelName])&&(a=e.yAxis,this.p1)){n=this.stx.pixelFromTick(this.p0[0],e.chart),s=this.stx.pixelFromTick(this.p1[0],e.chart),o=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),l=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),h=Math.min(l,o),c=Math.max(l,o),r.m0R0(6),u=r.O0R0(c,h),r.m0R0(33),d=r.y0R0(o,l,s,0,n,"0"),p=this.getLineColor(this.parameters.trend.color),t.textBaseline="middle",r.s3k0(),this.stx.canvasFont("stx_yaxis",t),m=t.measureText("161.8%").width+10,g=Number.MAX_VALUE,f=-1*Number.MAX_VALUE,("auto"==(y=this.color)||i.isTransparent(y))&&(y=this.stx.defaultColor),this.rays=[];for(var _=0;_<this.parameters.fibs.length;_++)"au","to","aut","o","a","u","t","o",t.fillStyle=y,(v=this.parameters.fibs[_]).display&&(x=this.stx.pixelFromValueAdjusted(e,this.p0[0],(this.p0[1]-this.p1[1])*v.level+this.p1[1]),b=i.xIntersection({x0:s,x1:s,y0:o,y1:l},x),S=e.left,s>n&&(S+=e.width),r.S0R0(34),C=r.O0R0(S,n,n,o,b,x,o),n>S-(this.parameters.printLevels?m+5:0)&&s>n||n<S+(this.parameters.printLevels?m+5:0)&&s<n||(this.parameters.printLevels&&(w=Math.round(1e3*v.level)/10+"%",s>n?(S-=m,t.textAlign="left"):("r","i","g","ht",S+=m,t.textAlign="right"),this.parameters.printValues&&(t.fillStyle=y,this.stx.canvasFont("stx_yaxis",t)),r.m0R0(34),C=r.y0R0(S,n,n,o,b,x,o),t.fillText(w,S,C),s>n?S-=5:S+=5),t.textAlign="left",this.parameters.printValues&&b<e.width&&(T=this.stx.transformedPriceFromPixel(x,e),T=a.priceFormatter?a.priceFormatter(this.stx,e,T):this.stx.formatYAxisPrice(T,e),t==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(e,T,x,y,null,t),t==this.stx.chart.context&&this.stx.startClip(e.name)),("auto"==(k=v.color)||i.isTransparent(k))&&(k=this.color),("auto"==k||i.isTransparent(k))&&(k=this.stx.defaultColor),("auto"==(D=v.color)||i.isTransparent(D))&&(D=this.fillColor),("auto"==D||i.isTransparent(D))&&(D=this.stx.defaultColor),t.fillStyle=D,this.parameters.printLevels&&(r.m0R0(34),C=r.O0R0(S,n,n,o,b,x,o)),A=i.clone(v.parameters),this.highlighted&&(A.opacity=1),this.stx.plotLine(n,S,o,C,this.highlighted?p:k,"segment",t,e,A),this.rays.push([[n,o],[S,C]]),t.globalAlpha=.05,t.beginPath(),t.moveTo(S,C),t.lineTo(n,o),t.lineTo(S,o),t.fill(),r.S0R0(14),t.globalAlpha=r.y0R0("1",0),x<g&&(g=x),x>f&&(f=x)));for(var R=0;R<=1;R++)M=d?c-u*R:h+u*R,(M=Math.round(M))<g&&(g=M),M>f&&(f=M);this.highlighted&&(P="p0"==this.highlighted,F="p1"==this.highlighted,this.littleCircle(t,n,o,P),this.littleCircle(t,s,l,F))}},i.Drawing.fibtimezone=function(){this.name="fibtimezone"},i.inheritsFrom(i.Drawing.fibtimezone,i.Drawing.fibonacci),i.Drawing.fibtimezone.prototype.render=function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S;if("a","u","t","o",(e=this.stx.panels[this.panelName])&&this.p1){a=this.stx.pixelFromTick(this.p0[0],e.chart),n=this.stx.pixelFromTick(this.p1[0],e.chart),s=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),r.S0R0(17),l=[r.y0R0("1",340106912),0],h=this.getLineColor(this.parameters.trend.color),t.textBaseline="middle",this.stx.canvasFont("stx_yaxis",t),20,c=this.p1[0]-this.p0[0],("auto"==(u=this.color)||i.isTransparent(u))&&(u=this.stx.defaultColor),t.textAlign="center",d=a,p=e.yAxis.top,m=e.yAxis.bottom,g=0,("auto"==(f=this.parameters.timezone.color)||i.isTransparent(f))&&(f=this.color),("auto"==f||i.isTransparent(f))&&(f=this.stx.defaultColor),("auto"==(y=this.parameters.timezone.color)||i.isTransparent(y))&&(y=this.fillColor),("auto"==y||i.isTransparent(y))&&(y=this.stx.defaultColor),this.parameters.printLevels&&(r.m0R0(13),m-=r.y0R0("7",1,20)),v=i.clone(this.parameters.timezone.parameters),this.highlighted&&(v.opacity=1);do{if(d=this.stx.pixelFromTick(this.p0[0]+g*c,e.chart),a<n&&d>e.left+e.width)break;if(a>n&&d<e.left)break;this.parameters.printLevels&&(t.fillStyle=u,t.fillText(n>a?g:-1*g,d,m+7)),t.fillStyle=y,r.m0R0(17),this.stx.plotLine(d,d,r.y0R0("0",1752648224),m,this.highlighted?h:f,"segment",t,e,v),t.globalAlpha=.05,t.beginPath(),t.moveTo(a,p),t.lineTo(d,p),t.lineTo(d,m),t.lineTo(a,m),t.fill(),t.globalAlpha=1,g=l[0]+l[1],l.unshift(g)}while(c);t.textAlign="left",this.stx.plotLine(a,n,s,o,h,"segment",t,e,v),this.highlighted?(x="p0"==this.highlighted,b="p1"==this.highlighted,this.littleCircle(t,a,s,x),this.littleCircle(t,n,o,b)):(S=this.stx.valueFromPixel(e.height/2,e),this.setPoint(0,this.p0[0],S,e.chart),this.setPoint(1,this.p1[0],S,e.chart))}},i.Drawing.fibtimezone.prototype.intersected=function(t,e,a){var n,s,o,l;if(n=this.p0,s=this.p1,o=this.stx.panels[this.panelName],!n||!s||!o)return null;for(var h in r.s3k0(),l={0:n,1:s})if(this.pointIntersection(l[h][0],l[h][1],a))return r.m0R0(1),this.highlighted=r.O0R0(h,"p"),{action:"drag",point:"p"+h};return this.lineIntersection(t,e,a,"segment")||a.x0<=this.p0[0]&&a.x1>=n[0]?(this.highlighted=!0,{action:"move",p0:i.clone(n),p1:i.clone(s),tick:t,value:e}):null},i.Drawing.arrow_v0=function(){this.name="arrow",this.dimension=[11,11],r.m0R0(2),this.points=[["M",3,0,"L",7,0,"L",7,5,"L",10,5,"L",5,r.O0R0(432336128,"10"),"L",0,5,"L",3,5,"L",3,0]]},i.inheritsFrom(i.Drawing.arrow_v0,i.Drawing.shape),i.Drawing.xcross=function(){var t;t=2;for(var e=1;641492668!==r.u1y(e.toString(),e.toString().length,67900);e++)this.name="xcross",this.dimension=[7,7],this.points=[["M",1,0,"L",3,2,"L",5,0,"L",6,1,"L",4,3,"L",6,5,"L",5,6,"L",3,4,"L",1,6,"L",0,5,"L",2,3,"L",0,1,"L",1,0]],t+=2;-425978631!==r.u1y(t.toString(),t.toString().length,36782)&&(this.name="L",this.dimension=[8,6],this.points=[["L",3,5,955018,0,3,29557,9,3,"I",1,2,"L",6,6,"L",5,1,"L",6,9,804740,6,5,1774158,0,0,"L",8,6,"I",5,1,964242,5,8,"L",2,3]])},i.inheritsFrom(i.Drawing.xcross,i.Drawing.shape),i.Drawing.check=function(){var t;this.name="check",this.dimension=[8,9],t=2;for(var e=1;-633375344!==r.u1y(e.toString(),e.toString().length,37090);e++)this.points=[["L",2,1,"L",8,7,"L",7,5,6638342,8,0,"L",3,2,"L",3,7,"L",0,1]],t+=2;-710889837!==r.u1y(t.toString(),t.toString().length,59332)&&(r.S0R0(0),this.points=[[399,1,5,"L",r.O0R0("0",1),8,"L",1,4,"L",2,5,"L",4,0,"L",9,3,"L",2,5]]),r.S0R0(6),this.points=[["M",1,5,"L",0,r.y0R0("6",0),"L",2,8,"L",7,1,"L",6,0,"L",r.O0R0("2",1866464e3,r.S0R0(17)),6,"L",1,5]]},i.inheritsFrom(i.Drawing.check,i.Drawing.shape),i.Drawing.star=function(){var t;r.I3k0(),t=2;for(var e=1;-1251463981!==r.u1y(e.toString(),e.toString().length,82691);e++)this.name="star",t+=2;1345700435!==r.x1y(t.toString(),t.toString().length,23709)&&(this.name=""),r.m0R0(23),this.dimension=[r.y0R0(2147483647,"12"),12],r.S0R0(14),this.points=[["M",0,4,"L",4,4,"L",5.5,0,"L",7,r.O0R0("4",0),"L",11,r.O0R0(2147483647,"4",r.S0R0(23)),"L",8,7,"L",9,11,"L",5.5,9,"L",2,11,"L",3,7,"L",0,4]]},i.inheritsFrom(i.Drawing.star,i.Drawing.shape),i.Drawing.heart=function(){r.s3k0(),this.name="heart",this.dimension=[23,20],r.S0R0(23),this.points=[["M",r.y0R0(2147483647,"11"),3,"B",11,2.4,10,0,6,0,"B",0,0,0,7.5,0,7.5,"B",0,11,4,15.4,r.O0R0(1462544256,"11",r.S0R0(2)),r.O0R0("19",0,r.m0R0(14)),"B",18,15.4,22,11,22,7.5,"B",22,7.5,22,0,16,0,"B",13,0,11,2.4,11,3]]},i.inheritsFrom(i.Drawing.heart,i.Drawing.shape),i.Drawing.focusarrow=function(){this.name="focusarrow",r.S0R0(0),this.dimension=[7,r.y0R0("5",1)],r.m0R0(0),this.points=[["M",0,0,"L",2,2,"L",0,4,"L",0,0],["M",r.y0R0("6",1),0,"L",4,2,"L",6,r.O0R0("4",119314016,r.S0R0(17)),"L",6,0]]},i.inheritsFrom(i.Drawing.focusarrow,i.Drawing.shape),i.Drawing.crossline=function(){this.name="crossline"},i.inheritsFrom(i.Drawing.crossline,i.Drawing.horizontal),i.extend(i.Drawing.crossline.prototype,{measure:function(){},accidentalClick:function(t,e){return r.I3k0(),!1},adjust:function(){var t;r.s3k0(),(t=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,t.chart),this.p1=i.clone(this.p0))},intersected:function(t,e,a){var n;return"l","i","n","e",this.p0&&this.p1?(r.m0R0(0),this.p1[0]+=r.O0R0("1",1),n=this.lineIntersection(t,e,a,"line"),this.p1=i.clone(this.p0),n||(this.p1[1]+=1,n=this.lineIntersection(t,e,a,"line"),this.p1=i.clone(this.p0),n)?(this.highlighted=!0,this.pointIntersection(this.p0[0],this.p0[1],a)&&("p","0",this.highlighted="p0"),{action:"move",p0:i.clone(this.p0),p1:i.clone(this.p1),tick:t,value:e}):null):null},render:function(t){var e,n,s,o,l,h,c,u,d,p,m,g;r.I3k0(),(e=this.stx.panels[this.panelName])&&(n=this.stx.pixelFromTick(this.p0[0],e.chart),s=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),o=this.getLineColor(),l={pattern:this.pattern,lineWidth:this.lineWidth},r.S0R0(1),this.stx.plotLine(n,r.O0R0(100,n),s,s,o,"horizontal",t,e,l),r.S0R0(35),this.stx.plotLine(n,n,s,r.O0R0(s,"100"),o,"vertical",t,e,l),this.axisLabel&&!this.repositioner&&(this.stx.endClip(),h=this.p0[1],e.chart.transformFunc&&(h=e.chart.transformFunc(this.stx,e.chart,h)),h=e.yAxis.priceFormatter?e.yAxis.priceFormatter(this.stx,e,h):this.stx.formatYAxisPrice(h,e),this.stx.createYAxisLabel(e,h,s,o),this.stx.startClip(e.name),this.p0[0]>=0&&!this.stx.chart.xAxis.noDraw&&(c=this.stx.dateFromTick(this.p0[0],e.chart,!0),i.ChartEngine.isDailyInterval(this.stx.layout.interval)?c.setHours(0,0,0,0):(d=1e3*c.getSeconds()+c.getMilliseconds(),a.Date&&this.stx.displayZone&&(u=new a.Date(c.getTime(),this.stx.displayZone),c=new Date(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours(),u.getMinutes()),c=new Date(c.getTime()+d))),p=i.mmddhhmm(i.yyyymmddhhmm(c)),e.chart.xAxis.formatter?p=e.chart.xAxis.formatter(c,this.name,null,null,p):this.stx.internationalizer&&(0!==c.getHours()||0!==c.getMinutes()?(m=this.stx.internationalizer.monthDay.format(c),m+=" "+this.stx.internationalizer.hourMinute.format(c)):m=this.stx.internationalizer.yearMonthDay.format(c),p=m),this.stx.endClip(),this.stx.createXAxisLabel(e,p,n,o,null,!0),this.stx.startClip(e.name))),this.highlighted&&(g="p0"==this.highlighted,this.littleCircle(t,n,s,g)))}},!0),i.Drawing.speedarc=function(){r.I3k0(),this.name="speedarc",this.printLevels=!0},i.inheritsFrom(i.Drawing.speedarc,i.Drawing.segment),i.extend(i.Drawing.speedarc.prototype,{defaultOpacity:.25,configs:["color","fillColor","lineWidth","pattern"],copyConfig:function(){this.color=this.stx.currentVectorParameters.currentColor,this.fillColor=this.stx.currentVectorParameters.fillColor,r.s3k0(),this.lineWidth=this.stx.currentVectorParameters.lineWidth,this.pattern=this.stx.currentVectorParameters.pattern},intersected:function(t,e,a){var n,s,o,l,h;if("m","ove",!this.p0||!this.p1)return null;for(var c in n={0:this.p0,1:this.p1})if(this.pointIntersection(n[c][0],n[c][1],a))return r.m0R0(1),this.highlighted=r.O0R0(c,"p"),{action:"drag",point:"p"+c};return this.lineIntersection(t,e,a,this.name)?("m","o","v","e",this.highlighted=!0,{action:"move",p0:i.clone(this.p0),p1:i.clone(this.p1),tick:t,value:e}):(s=this.p1[0]-(this.p0[0]-this.p1[0]),o=this.p0[0],l=this.p1[1],h=this.p0[1],t>Math.max(s,o)||t<Math.min(s,o)||e>Math.max(h,l)||e<Math.min(h,l)?null:(this.highlighted=!0,{action:"move",p0:i.clone(this.p0),p1:i.clone(this.p1),tick:t,value:e}))},render:function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b;if("se","gme","nt","au","t","o",(e=this.stx.panels[this.panelName])&&this.p1){a=this.stx.pixelFromTick(this.p0[0],e.chart),n=this.stx.pixelFromTick(this.p1[0],e.chart),s=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),r.S0R0(31),l=r.O0R0(s,o),r.m0R0(32),h=Math.abs(r.O0R0(o,a,s,n)),c=this.getLineColor(),r.I3k0(),t.strokeStyle=c,("auto"==(u=this.fillColor)||i.isTransparent(u))&&(u=this.stx.defaultColor),t.fillStyle=u,t.setLineDash&&(t.setLineDash(i.borderPatternToArray(this.lineWidth,this.pattern)),t.lineDashOffset=0),this.stx.canvasFont("stx_yaxis",t);for(var S=1;S<3;S++)d=Math.abs(this.p1[1]-this.p0[1])*Math.sqrt(2)*S/3,p=this.p1[1]+d*(l?-1:1)*(e.yAxis.flipped?-1:1),m=this.stx.pixelFromValueAdjusted(e,this.p0[0],p),t.save(),t.beginPath(),r.S0R0(7),t.scale(r.O0R0(h,1),1),r.m0R0(0),t.arc(r.O0R0(n,h),o,Math.abs(m-o),0,Math.PI,!l),t.globalAlpha=this.highlighted?1:this.defaultOpacity,"none"!=this.pattern&&t.stroke(),t.globalAlpha=.1,t.fill(),t.restore(),r.m0R0(17),t.globalAlpha=r.O0R0("1",2103221472),this.printLevels&&("c","ent","e","r",t.fillStyle=c,t.textAlign="center",r.m0R0(1),g=r.O0R0("/3",S),t.fillText(g,n,Math.round(m-5)),t.fillStyle=u);if(t.textAlign="left",f={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},this.stx.plotLine(a,n,s,o,c,"segment",t,e,f),t.setLineDash&&t.setLineDash([]),this.highlighted){"p","1",y="p0"==this.highlighted,v="p1"==this.highlighted,this.littleCircle(t,a,s,y),462074504,r.m0R0(6),x=-r.O0R0("1840971404",0),b=2;for(var C=1;462074504!==r.u1y(C.toString(),C.toString().length,5187);C++)this.littleCircle(t,n,o,v),r.S0R0(10),b+=r.O0R0("2",0);r.u1y(b.toString(),b.toString().length,57750)!==x&&this.littleCircle(t,n,o,v),this.littleCircle(t,n,o,v)}}},reconstruct:function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}}},!0),i.Drawing.speedline=function(){this.name="speedline",this.printLevels=!0},i.inheritsFrom(i.Drawing.speedline,i.Drawing.speedarc),i.extend(i.Drawing.speedline.prototype,{intersected:function(t,e,a){var n,s,o,l;if(n=this.p0,s=this.p1,!n||!s)return null;for(var h in o={0:n,1:s})if(this.pointIntersection(o[h][0],o[h][1],a))return r.m0R0(1),this.highlighted=r.O0R0(h,"p"),{action:"drag",point:"p"+h};l=this.rays;for(var c=0;c<l.length;c++)if(this.lineIntersection(t,e,a,"ray",l[c][0],l[c][1],!0))return"m","ove",this.highlighted=!0,{action:"move",p0:i.clone(n),p1:i.clone(s),tick:t,value:e};return null},render:function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k;if("le","f","t","3","/","2",(e=this.stx.panels[this.panelName])&&this.p1){a=this.stx.pixelFromTick(this.p0[0],e.chart),n=this.stx.pixelFromTick(this.p1[0],e.chart),s=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),this.stx.canvasFont("stx_yaxis",t),l=this.getLineColor(),("auto"==(h=this.color)||i.isTransparent(h))&&(h=this.stx.defaultColor),t.strokeStyle=h,("auto"==(c=this.fillColor)||i.isTransparent(c))&&(c=this.stx.defaultColor),t.fillStyle=c,u={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},m=["1","2/3","1/3","3/2","3"],r.m0R0(7),g=[1,r.O0R0(3,2),r.y0R0(122242528,1,"3",r.m0R0(36)),r.y0R0("2",0,3,r.m0R0(37)),3],f=[],this.rays=[];for(var D=0;D<g.length;D++)(y=g[D])>1&&!this.extension||(v=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]-(this.p0[1]-this.p1[1])*y),y>1?(x=i.xIntersection({x0:a,x1:n,y0:s,y1:v},o),f.push(x)):(x=i.xIntersection({x0:n,x1:n,y0:s,y1:o},v),f.push(v)),b=y>1?x:n,S=y>1?o:v,this.confineToGrid||(b=e.left,n>a&&(b+=e.width),r.m0R0(34),S=r.O0R0(b,a,a,s,n,v,s)),this.printLevels&&(1!=y||this.extension)&&(t.fillStyle=h,C=0,w=0,s>o?("bott","o","m",w=-5,t.textBaseline="bottom"):("t","o","p",w=5,t.textBaseline="top"),a>n?(C=5,t.textAlign="right"):("l","ef","t",C=-5,t.textAlign="left"),y>1?t.fillText(m[D],x+(this.confineToGrid?0:C),o):t.fillText(m[D],n,v+(this.confineToGrid?0:w)),t.fillStyle=c),this.stx.plotLine(a,b,s,S,this.highlighted?l:h,"segment",t,e,u),1==y&&(d=b,p=S),this.rays.push([[a,s],[b,S]]),t.globalAlpha=.1,t.beginPath(),t.moveTo(b,S),t.lineTo(a,s),t.lineTo(d,p),t.fill(),t.globalAlpha=1);t.textAlign="left",t.textBaseline="middle",this.confineToGrid&&(t.globalAlpha=.3,t.beginPath(),r.S0R0(6),t.strokeRect(a,s,r.O0R0(n,a),r.y0R0(o,s)),t.moveTo(a,f[1]),t.lineTo(n,f[1]),t.moveTo(a,f[2]),t.lineTo(n,f[2]),this.extension&&(t.moveTo(f[3],s),t.lineTo(f[3],o),t.moveTo(f[4],s),t.lineTo(f[4],o)),t.stroke(),t.globalAlpha=1),this.highlighted&&("p","0",T="p0"==this.highlighted,k="p1"==this.highlighted,this.littleCircle(t,a,s,T),this.littleCircle(t,n,o,k))}}},!0),i.Drawing.gannfan=function(){this.name="gannfan",this.printLevels=!0},i.inheritsFrom(i.Drawing.gannfan,i.Drawing.speedline),i.extend(i.Drawing.gannfan.prototype,{render:function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w;if((e=this.stx.panels[this.panelName])&&this.p1){a=this.stx.pixelFromTick(this.p0[0],e.chart),n=this.stx.pixelFromTick(this.p1[0],e.chart),s=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),this.stx.canvasFont("stx_yaxis",t),l=this.getLineColor(),("auto"==(h=this.color)||i.isTransparent(h))&&(h=this.stx.defaultColor),t.strokeStyle=h,("auto"==(c=this.fillColor)||i.isTransparent(c))&&(c=this.stx.defaultColor),t.fillStyle=c,u={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},r.S0R0(38),m=[1,2,3,4,8,r.y0R0(0,1,"2"),r.O0R0(3,1,r.S0R0(7)),r.O0R0(4,"1",r.m0R0(39)),r.O0R0("1",955515808,8,r.m0R0(40))],this.rays=[];for(var T=0;T<m.length;T++)g=m[T],r.S0R0(41),f=r.O0R0(a,a,n,g),r.m0R0(42),y=r.y0R0(s,s,g,o),v=e.left,n>a&&(v+=e.width),r.S0R0(34),x=r.O0R0(v,a,a,s,n,y,s),this.printLevels&&(t.fillStyle=h,b=0,S=0,s>o?(S=5,t.textBaseline="top"):("bo","t","tom",S=-5,t.textBaseline="bottom"),a>n?(b=5,t.textAlign="left"):(b=-5,t.textAlign="right"),g>1?("x","1",r.S0R0(1),t.fillText(r.O0R0("x1",g),r.y0R0(b,f),o)):(r.m0R0(25),t.fillText(r.y0R0("1x",g,1),n,r.y0R0(S,y,r.S0R0(1)))),t.fillStyle=c),this.stx.plotLine(a,v,s,x,this.highlighted?l:h,"segment",t,e,u),this.rays.push([[a,s],[v,x]]),1==g&&(d=v,p=x),t.globalAlpha=.1,t.beginPath(),t.moveTo(v,x),t.lineTo(a,s),t.lineTo(d,p),t.fill(),t.globalAlpha=1;t.textAlign="left",t.textBaseline="middle",this.highlighted&&(C="p0"==this.highlighted,w="p1"==this.highlighted,this.littleCircle(t,a,s,C),this.littleCircle(t,n,o,w))}}},!0),i.Drawing.timecycle=function(){r.s3k0(),this.name="timecycle",this.printLevels=!0},i.inheritsFrom(i.Drawing.timecycle,i.Drawing.speedarc),i.extend(i.Drawing.timecycle.prototype,{intersected:function(t,e,a){var n,s,o,l;if("seg","m","ent",n=this.p0,s=this.p1,o=this.stx.panels[this.panelName],!n||!s||!o)return null;for(var h in l={0:n,1:s})if(this.pointIntersection(l[h][0],l[h][1],a))return r.m0R0(1),this.highlighted=r.y0R0(h,"p"),{action:"drag",point:"p"+h};return this.lineIntersection(t,e,a,"segment")||a.x0<=this.p0[0]&&a.x1>=n[0]?(this.highlighted=!0,{action:"move",p0:i.clone(n),p1:i.clone(s),tick:t,value:e}):null},render:function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S;if("le","f","t",(e=this.stx.panels[this.panelName])&&this.p1){a=this.stx.pixelFromTick(this.p0[0],e.chart),n=this.stx.pixelFromTick(this.p1[0],e.chart),s=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),r.S0R0(23),l=r.O0R0(2147483647,"0"),h=this.getLineColor(),t.textBaseline="middle",this.stx.canvasFont("stx_yaxis",t),20,c=this.p1[0]-this.p0[0],t.textAlign="center",u=a,d=e.yAxis.top,p=e.yAxis.bottom,("auto"==(m=this.color)||i.isTransparent(m))&&(m=this.stx.defaultColor),("auto"==(g=this.fillColor)||i.isTransparent(g))&&(g=this.stx.defaultColor),this.printLevels&&(r.m0R0(6),p-=r.O0R0(20,7)),f={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},y=[],t.save(),t.fillStyle=g,t.globalAlpha=.05;do{if(u=this.stx.pixelFromTick(this.p0[0]+l*c,e.chart),l++,a<n&&u>e.left+e.width)break;if(a>n&&u<e.left)break;u<e.left||u>e.left+e.width||(t.beginPath(),t.moveTo(a,d),t.lineTo(u,d),t.lineTo(u,p),t.lineTo(a,p),t.fill(),y.push({c:l,x:u}))}while(c);t.globalAlpha=1,v=0;for(var C=0;C<y.length;C++)this.stx.plotLine(y[C].x,y[C].x,0,p,this.highlighted?h:m,"segment",t,e,f),this.printLevels&&(t.fillStyle=m,this.stx.chart.context.measureText(y[C].c).width+3<this.stx.layout.candleWidth+v?(t.fillText(y[C].c,y[C].x,p+7),v=0):v+=this.stx.layout.candleWidth);t.restore(),t.textAlign="left",this.stx.plotLine(a,n,s,o,h,"segment",t,e,f),this.highlighted?(x="p0"==this.highlighted,b="p1"==this.highlighted,this.littleCircle(t,a,s,x),this.littleCircle(t,n,o,b)):(S=this.stx.valueFromPixel(e.height/2,e),this.setPoint(0,this.p0[0],S,e.chart),this.setPoint(1,this.p1[0],S,e.chart))}}},!0),i.Drawing.regression=function(){this.name="regression"},i.inheritsFrom(i.Drawing.regression,i.Drawing.segment),i.extend(i.Drawing.regression.prototype,{configs:["color","lineWidth","pattern","active1","color1","lineWidth1","pattern1","active2","color2","lineWidth2","pattern2","active3","color3","lineWidth3","pattern3"],copyConfig:function(t){var e;i.Drawing.copyConfig(this,t),e=this.stx.currentVectorParameters,this.active1=!!e.active1,this.active2=!!e.active2,this.active3=!!e.active3,this.color1=e.color1||"auto",this.color2=e.color2||"auto",this.color3=e.color3||"auto",this.lineWidth1=e.lineWidth1,this.lineWidth2=e.lineWidth2,this.lineWidth3=e.lineWidth3,this.pattern1=e.pattern1,this.pattern2=e.pattern2,r.s3k0(),this.pattern3=e.pattern3},$controls:['cq-cvp-controller[cq-cvp-header="1"]','cq-cvp-controller[cq-cvp-header="2"]','cq-cvp-controller[cq-cvp-header="3"]'],click:function(t,e,i){var a,n,s,o;if(!(e<0)){if(this.copyConfig(),r.s3k0(),a=this.stx.panels[this.panelName],!this.penDown){if(this.setPoint(0,e,i,a.chart),this.penDown=!0,n=this.stx,this.field=n.highlightedDataSetField,!this.field&&a!=n.chart.panel){for(var l in n.chart.seriesRenderers)if((s=n.chart.seriesRenderers[l]).params.panel==a.name){this.field=s.seriesParams[0].field;break}for(var h in n.layout.studies)if((o=n.layout.studies[h]).panel==a.name){this.field=Object.keys(o.outputMap)[0];break}}return!1}return this.accidentalClick(e,i)?this.dragToDraw:(this.setPoint(1,e,i,a.chart),this.penDown=!1,!0)}},getYValue:function(t){var e,a,r,n,s,o,l;if(e=this.stx.chart.dataSet[t],a=this.stx.chart.dataSet[t],!e)return null;if(r=this.stx.panels[this.panelName],n=this.stx.getYAxisByField(r,this.field)||r.yAxis,this.stx.charts[r.name]&&r.chart.transformFunc&&n==r.yAxis&&(a=e.transform),!a)return null;if(s=null,o=null,l=this.stx.defaultPlotField||"Close",this.field){if(!(o=i.existsInObjectChain(a,this.field)))return null;s=o=o.obj[o.member],e!=a&&(s=(s=i.existsInObjectChain(e,this.field)).obj[s.member]),"object"==v(o)&&(o=o[l],s=s[l])}else o=a[l],s=e[l];return{transformed:o,untransformed:s}},render:function(t){var e,i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E;if("s","egment",(e=this.stx.panels[this.panelName])&&this.p1&&!(this.p0[0]<0||this.p1[0]<0||(i=this.stx.pixelFromTick(this.p0[0],e.chart),a=this.stx.pixelFromTick(this.p1[0],e.chart),i<e.left&&a<e.left||i>e.right&&a>e.right))){n=this.stx.getYAxisByField(e,this.field),s=[],o=[],l=0,h=0,r.m0R0(2),c=r.O0R0(586539872,"0"),u=0,d=Math.min(this.p1[0],this.p0[0]),p=Math.max(this.p1[0],this.p0[0])+1,r.S0R0(6),m=r.y0R0(p,d);for(var O=d;O<p;O++)(g=this.getYValue(O))&&(s.push(g.transformed),o.push(g.untransformed));for(f=s.length,r.m0R0(43),y=r.O0R0(f,1440674304,"1",f,2),v=Math.pow(y,2),r.m0R0(44),x=r.y0R0(3,y,f,2,1),O=0;O<f;O++)c+=f*s[O]-l,l+=s[O],u+=f*o[O]-h,h+=o[O];if(r.S0R0(45),b=r.O0R0(f,f,c,x,v,y,l),r.m0R0(46),S=r.O0R0(y,l,f,b),r.m0R0(45),C=r.y0R0(f,f,u,x,v,y,h),r.S0R0(46),w=r.O0R0(y,h,f,b),this.p0[0]<this.p1[0]?(T=S,r.m0R0(47),k=r.y0R0(b,m,S),this.p0[1]=w,r.m0R0(47),this.p1[1]=r.y0R0(C,m,w)):(r.S0R0(47),T=r.O0R0(b,m,S),k=S,r.S0R0(47),this.p0[1]=r.y0R0(C,m,w),this.p1[1]=w),D=this.stx.pixelFromTransformedValue(T,e,n),A=this.stx.pixelFromTransformedValue(k,e,n),r.I3k0(),M=this.getLineColor(),P={pattern:this.pattern,lineWidth:this.lineWidth},this.stx.plotLine(i,a,D,A,M,"segment",t,e,P),r.m0R0(6),this.stx.plotLine(i,i,r.O0R0(D,20),r.y0R0(20,D,r.m0R0(1)),M,"segment",t,e,P),r.m0R0(6),this.stx.plotLine(a,a,r.y0R0(A,20),r.y0R0(20,A,r.S0R0(1)),M,"segment",t,e,P),this.active1||this.active2||this.active3){for(r.S0R0(7),F=r.y0R0(f,l),_=0,O=0;O<f;O++)_+=Math.pow(s[O]-F,2);r.S0R0(7),R={context:t,panel:e,points:{0:{x:i,v:T},1:{x:a,v:k}},stddev:Math.sqrt(r.y0R0(f,_)),yAxis:n},this.lines={},this.active1&&(this.renderStddev("1","p",R),this.renderStddev("1","n",R)),this.active2&&(this.renderStddev("2","p",R),this.renderStddev("2","n",R)),this.active3&&(this.renderStddev("3","p",R),this.renderStddev("3","n",R))}this.highlighted?("p","0",L="p0"==this.highlighted,E="p1"==this.highlighted,this.littleCircle(t,i,D,L),this.littleCircle(t,a,A,E)):(this.pixelX=[i,a],this.pixelY=[D,A])}},renderStddev:function(t,e,i){var a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w;r.m0R0(48),a=r.O0R0(t,"stddev",e),r.S0R0(1),n=r.y0R0(t,"color"),r.m0R0(1),s=r.O0R0(t,"pattern"),r.S0R0(1),o=r.O0R0(t,"lineWidth"),h=(l=i.points)[0].v,c=l[1].v,u=i.stddev,d="n"===e?-1*t:1*t,p=this.stx,m=i.panel,g=i.yAxis,f={name:a,color:this.getLineColor(this[n]),type:"segment",y0:p.pixelFromTransformedValue(h+u*d,m,g),y1:p.pixelFromTransformedValue(c+u*d,m,g),params:{pattern:this[s],lineWidth:this[o]}},this.lines&&(this.lines[a]=f),y=i.context,v=l[0].x,x=l[1].x,p.plotLine(v,x,f.y0,f.y1,f.color,f.type,y,m,f.params),p.plotLine(v,v,f.y0-10,f.y0+10,f.color,f.type,y,m,f.params),r.s3k0(),p.plotLine(x,x,f.y1-10,f.y1+10,f.color,f.type,y,m,f.params),r.m0R0(1),b=r.y0R0("σ",t),S=Math.max(v,x)+5,C=v<x?f.y1:f.y0,y.fillStyle=f.color,y.save(),y.textBaseline="middle",y.fillText(b,S,C),y.restore(),i.formatPrice&&this.axisLabel&&!this.highlighted&&!this.penDown&&(v>=m.chart.left&&v<=m.chart.right||x>=m.chart.left&&x<=m.chart.right)&&(r.S0R0(12),w=r.O0R0(v<x?c:h,u,d),p.endClip(),p.createYAxisLabel(m,i.formatPrice(w,g),C,f.color,null,y,g),p.startClip(m.name))},intersected:function(t,e,a){var n,s,o,l,h,c,u;if(!this.pixelX||!this.pixelY)return null;if(n=this.repositionIntersection(t,e))return n;s={0:this.pixelX,1:this.pixelY};for(var d=0;d<2;d++)if(this.pointIntersection(s[0][d],s[1][d],a,!0))return r.S0R0(1),this.highlighted=r.y0R0(d,"p"),{action:"drag",point:"p"+d};if(o=this,l=this.pixelX[0],h=this.pixelX[1],!(u=(c=function(i){var r,n;return r=[l,i.y0],n=[h,i.y1],o.lineIntersection(t,e,a,o.name,r,n,!0)})({y0:this.pixelY[0],y1:this.pixelY[1]}))&&this.lines)for(var p in this.lines)if(c(this.lines[p])){u=!0;break}return u?("m","o","ve",this.highlighted=!0,{action:"move",p0:i.clone(this.p0),p1:i.clone(this.p1),tick:t,value:e}):null},repositionIntersection:function(t,e){return!(!this.p0||!this.p1)&&(!(this!=this.stx.repositioningDrawing||!this.highlighted)&&("d","rag",!0===this.highlighted?{action:"move",p0:i.clone(this.p0),p1:i.clone(this.p1),tick:t,value:e}:{action:"drag",point:this.highlighted}))},lineIntersection:function(t,e,a,n,s,o,l){var h,c,u,d;if(!l)return" lineIntersec","tion must accept p0 and p1 in pixels.  Please verify and set isPixels=true.",r.m0R0(1),console.log(r.O0R0(" lineIntersection must accept p0 and p1 in pixels.  Please verify and set isPixels=true.",n)),!1;if(s||(s=this.p0),o||(o=this.p1),!s||!o)return!1;h=this.stx,c=2;for(var p=1;-567904059!==r.u1y(p.toString(),p.toString().length,20431);p++)u=i.convertBoxToPixels(h,this.panelName,a),c+=2;return 238752351!==r.x1y(c.toString(),c.toString().length,28661)&&(u=i.convertBoxToPixels(h,this.panelName,a)),void 0!==(u=i.convertBoxToPixels(h,this.panelName,a)).x0&&(d={x0:s[0],x1:o[0],y0:s[1],y1:o[1]},i.boxIntersects(u.x0,u.y0,u.x1,u.y1,d.x0,d.y0,d.x1,d.y1))},boxIntersection:function(t,e,i){var a;if(i.cx0>Math.max(this.pixelX[0],this.pixelX[1])||i.cx1<Math.min(this.pixelX[0],this.pixelX[1]))return!1;if(!this.stx.repositioningDrawing&&(i.cy1<this.pixelY[0]||i.cy0>this.pixelY[1]))return!1;r.S0R0(6),a=r.O0R0("1120032174",0);for(var n=1;300520790!==r.u1y(n.toString(),n.toString().length,31967);n++)return!1;return r.u1y(2..toString(),2..toString().length,29147)!==a||void 0},reconstruct:function(t,e){this.stx=t,this.color=e.col,this.color1=e.col1,this.color2=e.col2,this.color3=e.col3,this.active1=e.dev1,this.active2=e.dev2,this.active3=e.dev3,this.panelName=e.pnl,this.pattern=e.ptrn,r.I3k0(),this.pattern1=e.ptrn1,this.pattern2=e.ptrn2,this.pattern3=e.ptrn3,this.lineWidth=e.lw,this.lineWidth1=e.lw1,this.lineWidth2=e.lw2,this.lineWidth3=e.lw3,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.field=e.fld,this.adjust()},serialize:function(){return r.s3k0(),{name:this.name,pnl:this.panelName,dev1:this.active1,dev2:this.active2,dev3:this.active3,col:this.color,col1:this.color1,col2:this.color2,col3:this.color3,ptrn:this.pattern,ptrn1:this.pattern1,ptrn2:this.pattern2,ptrn3:this.pattern3,lw:this.lineWidth,lw1:this.lineWidth1,lw2:this.lineWidth2,lw3:this.lineWidth3,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),i.Drawing.trendline=function(){this.name="trendline"},i.inheritsFrom(i.Drawing.trendline,i.Drawing.segment),i.Drawing.trendline.prototype.configs=["color","fillColor","lineWidth","pattern","font"],i.Drawing.trendline.prototype.measure=function(){r.s3k0()},i.Drawing.trendline.prototype.reconstruct=function(t,e){i.Drawing.segment.prototype.reconstruct.call(this,t,e),this.callout=new i.Drawing.callout,this.callout.reconstruct(t,e.callout)},i.Drawing.trendline.prototype.serialize=function(){var t;return(t=i.Drawing.segment.prototype.serialize.call(this)).callout=this.callout.serialize(),t},i.Drawing.trendline.prototype.render=function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S;(e=this.stx.panels[this.panelName])&&(i.Drawing.segment.prototype.render.call(this,t),this.callout||(this.callout=new i.Drawing.callout,a=i.Drawing.segment.prototype.serialize.call(this),this.callout.reconstruct(this.stx,a)),this.callout.p0=i.clone(this.p0),n=this.stx.pixelFromTick(this.p0[0],e.chart),s=this.stx.pixelFromTick(this.p1[0],e.chart),o=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),l=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),isFinite(o)&&isFinite(l)&&(r.m0R0(49),h=r.y0R0(s,"2",n),r.S0R0(3),c=r.O0R0(l,o,2),this.fontSize=i.stripPX(this.font&&this.font.size||13),d=(u=1.2*this.callout.w+("c"==this.callout.stemEntry[0]?0:50))/(Math.sqrt(Math.pow(s-n,2)+Math.pow(l-o,2))||u)*(this.p1[1]<this.p0[1]?1:-1),r.S0R0(50),p=r.y0R0(l,d,c,h),r.m0R0(51),m=r.y0R0(c,s,d,h),this.callout.p0[0]=this.stx.tickFromPixel(p,e.chart),this.callout.p0[1]=this.stx.priceFromPixel(m,e),r.S0R0(2),this.callout.v0=this.callout.p0[r.O0R0(2143422048,"1")],this.callout.p1=i.clone(this.p0),this.callout.stx=this.stx,this.callout.fillColor=this.fillColor||this.callout.fillColor,this.callout.borderColor=this.color,this.callout.font=this.font||this.callout.font,this.callout.noHandles=!0,g=this.p1[1]-this.p0[1],this.callout.text=Number(g).toFixed(2)+(0===this.p0[1]?"":" ("+Number(100*g/this.p0[1]).toFixed(2)+"%) ")+Math.abs(this.p1[0]-this.p0[0])+" Bars",f=Math.floor((this.p0[0]+this.p1[0])/2),Math.abs(this.p0[0]-this.p1[0])>1&&Math.abs(this.p0[0]-this.p1[0])<20?(v=this.stx.pixelFromTick(f,e.chart),r.S0R0(52),x=r.O0R0(o,s,l,o,n,v,n),y=this.stx.priceFromPixel(x,e)||c):y=this.stx.priceFromPixel(c,e),this.callout.stem={t:f,v:y},this.callout.renderText(),this.callout.render(t),r.I3k0(),this.highlighted&&(b="p0"==this.highlighted,S="p1"==this.highlighted,this.littleCircle(t,n,o,b),this.littleCircle(t,s,l,S))))},i.Drawing.trendline.prototype.lineIntersection=function(t,e,a,n){return r.s3k0(),i.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,t,e,a,"segment")},i.Drawing.trendline.prototype.intersected=function(t,e,a){var n,s;return this.p0&&this.p1?(n=this.callout.intersected(t,e,a),s=i.Drawing.segment.prototype.intersected.call(this,t,e,a),this.callout.highlighted=!(!n&&!s),s||(n?{action:"move",p0:i.clone(this.p0),p1:i.clone(this.p1),tick:t,value:e}:(r.I3k0(),null))):null},i.Drawing.average=function(){this.name="average"},i.inheritsFrom(i.Drawing.average,i.Drawing.regression),i.extend(i.Drawing.average.prototype,{configs:i.Drawing.regression.prototype.configs.concat("axisLabel"),measure:function(){var t,e,a,n,s,o,l;if(r.I3k0(),this.p0&&this.p1&&(".mMea","s","ur","e"," ","&sigma;","&","ens","p;",this.stx.setMeasure(0,!1,this.p0[0],this.p1[0],!0,this.name),t=[],e="",this.active1&&t.push("1"),this.active2&&t.push("2"),this.active3&&t.push("3"),t.length&&(e="&ensp;"+t.join(", ")+" &sigma;"),a=(this.stx.drawingContainer||document).querySelector(".mMeasure"),s=(n=this.stx.controls.mSticky)&&n.querySelector(".mStickyInterior"),a&&(a.innerHTML+=e),s)){(o=[]).push(i.capitalize(this.name)),-347941900,-1689420640,l=2;for(var h=1;-347941900!==r.x1y(h.toString(),h.toString().length,37041);h++)o.push(this.field||this.stx.defaultPlotField||"Close"),o.push(s.innerHTML+e),l+=2;-1689420640!==r.u1y(l.toString(),l.toString().length,90409)&&(o.push(this.field&&this.stx.defaultPlotField&&""),o.push(s.innerHTML*e)),s.innerHTML=o.join("<br>")}},render:function(t){var e,i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C;if("s","egme","n","t","s","eg","ment",(e=this.stx.panels[this.panelName])&&this.p1&&!(this.p0[0]<0||this.p1[0]<0||(i=this.stx.pixelFromTick(this.p0[0],e.chart),a=this.stx.pixelFromTick(this.p1[0],e.chart),i<e.left&&a<e.left||i>e.right&&a>e.right))){for(n=this.stx.getYAxisByField(e,this.field),s=this.stx,o=Math.min(this.p1[0],this.p0[0]),l=Math.max(this.p1[0],this.p0[0])+1,r.S0R0(6),r.y0R0(l,o),h=0,c=[],u=o;u<l;u++)null!==(d=this.getYValue(u))&&(h+=d.transformed,c.push(d));if(p=c.length){if(r.S0R0(7),m=r.y0R0(p,h),g=s.pixelFromTransformedValue(m,e,n),f=this.getLineColor(),y={pattern:this.pattern,lineWidth:this.lineWidth},s.plotLine(i,a,g,g,f,"segment",t,e,y),r.S0R0(6),s.plotLine(i,i,r.O0R0(g,20),r.y0R0("20",g,0,r.m0R0(19)),f,"segment",t,e,y),r.m0R0(6),s.plotLine(a,a,r.O0R0(g,20),r.y0R0(20,g,r.S0R0(1)),f,"segment",t,e,y),!this.axisLabel||this.highlighted||this.penDown||(i>=e.chart.left&&i<=e.chart.right||a>=e.chart.left&&a<=e.chart.right)&&(s.endClip(),s.createYAxisLabel(e,w(m,n),g,f,null,t,n),s.startClip(e.name)),this.active1||this.active2||this.active3){for(v=0,u=0;u<p;u++)d=c[u],v+=Math.pow(d.transformed-m,2);r.m0R0(7),x=Math.sqrt(r.y0R0(p,v)),b={context:t,formatPrice:w,panel:e,points:{0:{x:i,v:m},1:{x:a,v:m}},stddev:x,yAxis:n},this.lines={},this.active1&&(this.renderStddev("1","p",b),this.renderStddev("1","n",b)),this.active2&&(this.renderStddev("2","p",b),this.renderStddev("2","n",b)),this.active3&&(this.renderStddev("3","p",b),this.renderStddev("3","n",b))}this.highlighted?(S="p0"==this.highlighted,C="p1"==this.highlighted,this.littleCircle(t,i,g,S),this.littleCircle(t,a,g,C)):(this.pixelX=[i,a],this.pixelY=[g,g])}}function w(t,i){return t=i&&i.priceFormatter?i.priceFormatter(s,e,t):s.formatYAxisPrice(t,e,null,i)}},reconstruct:function(t,e){this.axisLabel=e.al,i.Drawing.regression.prototype.reconstruct.call(this,t,e)},serialize:function(){var t;return r.I3k0(),(t=i.Drawing.regression.prototype.serialize.call(this)).al=this.axisLabel,t}},!0),i.Drawing.quadrant=function(){r.I3k0(),this.name="quadrant"},i.inheritsFrom(i.Drawing.quadrant,i.Drawing.regression),i.extend(i.Drawing.quadrant.prototype,{configs:["color","fillColor","lineWidth","pattern"],copyConfig:function(){this.color=this.stx.currentVectorParameters.currentColor,this.fillColor=this.stx.currentVectorParameters.fillColor,this.lineWidth=this.stx.currentVectorParameters.lineWidth,this.pattern=this.stx.currentVectorParameters.pattern},$controls:[],render:function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C;if("q","u","adrant","s","eg","ment",(a=(e=this.stx).panels[this.panelName])&&this.p1&&(n=e.pixelFromTick(this.p0[0],a.chart),s=e.pixelFromTick(this.p1[0],a.chart),!(n<a.left&&s<a.left||n>a.right&&s>a.right))){o=this.stx.getYAxisByField(a,this.field),l=null,h=null;for(var w=Math.min(this.p1[0],this.p0[0]);w<=Math.max(this.p1[0],this.p0[0]);w++)null!==(c=this.getYValue(w))&&((null===l||c.transformed>l)&&(l=c.transformed),(null===h||c.transformed<h)&&(h=c.transformed));u=e.pixelFromTransformedValue(l,a,o),r.m0R0(53),d=e.pixelFromTransformedValue(r.y0R0("4",h,l,3),a,o),r.m0R0(54),p=e.pixelFromTransformedValue(r.O0R0("2",l,h,3),a,o),r.S0R0(3),m=e.pixelFromTransformedValue(r.y0R0(h,l,2),a,o),r.m0R0(55),g=e.pixelFromTransformedValue(r.O0R0(1,2,"3",h,l),a,o),r.m0R0(56),f=e.pixelFromTransformedValue(r.O0R0(3,l,h,4),a,o),y=e.pixelFromTransformedValue(h,a,o),this.p0[1]=0,this.p1[1]=!1,v=this.getLineColor(),("auto"==(x=this.fillColor)||i.isTransparent(x))&&(x=e.defaultColor),t.fillStyle=x,b={pattern:this.pattern,lineWidth:this.lineWidth},e.plotLine(n,s,u,u,v,"segment",t,a,b),e.plotLine(n,s,y,y,v,"segment",t,a,b),"quadrant"==this.name?(e.plotLine(n,s,d,d,v,"segment",t,a,b),e.plotLine(n,s,f,f,v,"segment",t,a,b)):"tirone"==this.name&&("segmen","t",e.plotLine(n,s,p,p,v,"segment",t,a,b),e.plotLine(n,s,g,g,v,"segment",t,a,b)),e.plotLine(n,n,u,y,v,"segment",t,a,b),e.plotLine(s,s,u,y,v,"segment",t,a,b),e.plotLine(n,s,m,m,v,"segment",t,a,i.extend(b,{opacity:"tirone"==this.name?.2:1})),r.s3k0(),r.m0R0(6),t.globalAlpha=r.y0R0("0.1",0),t.beginPath(),r.S0R0(6),t.fillRect(n,u,r.O0R0(s,n),r.y0R0(y,u)),"quadrant"==this.name?(r.m0R0(6),t.fillRect(n,d,r.O0R0(s,n),r.O0R0(f,d))):"tirone"==this.name&&(r.m0R0(6),t.fillRect(n,p,r.O0R0(s,n),r.O0R0(g,p))),t.globalAlpha=1,this.highlighted?("p","1",S="p0"==this.highlighted,C="p1"==this.highlighted,this.littleCircle(t,n,m,S),this.littleCircle(t,s,m,C)):(this.pixelX=[n,s],this.pixelY=[u,y],a.yAxis.flipped&&this.pixelY.reverse(),this.pixelY.push(m))}},intersected:function(t,e,a){var n;if(!this.pixelX||!this.pixelY)return null;if(n=this.repositionIntersection(t,e))return n;for(var s=0;s<2;s++)if(this.pointIntersection(this.pixelX[s],this.pixelY[2],a,!0))return r.m0R0(1),this.highlighted=r.O0R0(s,"p"),{action:"drag",point:"p"+s};return this.boxIntersection(null,null,a)?(this.highlighted=!0,{action:"move",p0:i.clone(this.p0),p1:i.clone(this.p1),tick:t,value:e}):null},reconstruct:function(t,e){var i;this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,i=2;for(var a=1;-134568752!==r.x1y(a.toString(),a.toString().length,43375);a++)this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.field=e.fld,this.adjust(),i+=2;-1725599564!==r.u1y(i.toString(),i.toString().length,82636)&&(this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.field=e.fld,this.adjust())},serialize:function(){return r.s3k0(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),i.Drawing.tirone=function(){r.s3k0(),this.name="tirone"},i.inheritsFrom(i.Drawing.tirone,i.Drawing.quadrant),i.Drawing.elliottwave=function(){this.name="elliottwave",this.lastPoint=0,this.points=[],this.pts=[],this.dx=0,this.dy=-20,this.dragToDraw=!1,this.annotationPoints=[],this.edit=null},i.inheritsFrom(i.Drawing.elliottwave,i.Drawing.annotation),i.Drawing.elliottwave.defaultTemplate={impulse:["I","II","III","IV","V"],corrective:["A","B","C"],decoration:"enclosed",showLines:!0},i.Drawing.elliottwave.prototype.initializeSettings=function(t){r.I3k0(),t.currentVectorParameters.waveParameters=i.clone(i.Drawing.elliottwave.defaultTemplate)},i.Drawing.elliottwave.prototype.configs=["color","lineWidth","lineColor","pattern","font","waveParameters"],i.Drawing.elliottwave.prototype.$controls=["br[cq-wave-parameters]","cq-wave-parameters"],i.Drawing.elliottwave.prototype.construct=function(t,e){var i;this.stx=t,this.panelName=e.name,r.I3k0(),i=t.currentVectorParameters,Object.assign(this,i.waveParameters)},i.Drawing.elliottwave.prototype.serialize=function(){var t;r.s3k0(),t={};for(var e=0;e<this.points.length;e++)r.S0R0(1),t[r.y0R0(e,"d")]=this[r.y0R0(e,"d")],r.m0R0(1),t[r.y0R0(e,"tzo")]=this[r.y0R0(e,"tzo")],r.m0R0(1),t[r.O0R0(e,"v")]=this[r.O0R0(e,"v")];return t.annotations=this.annotationPoints.join(","),Object.assign({name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,mxSeg:this.maxSegments,show:this.showLines,decor:this.decoration,dx:this.dx,dy:this.dy,trend:this.trend,fnt:i.removeNullValues(i.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"}))},t)},i.Drawing.elliottwave.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.font=i.replaceFields(e.fnt,{st:"style",sz:"size",wt:"weight",fl:"family"}),this.decoration=e.decor,this.showLines=e.show,this.dx=e.dx,this.dy=e.dy,this.trend=e.trend,this.annotationPoints=e.annotations.split(","),"enclosed"===e.decor&&this.calculateRadius(t.chart.tempCanvas.context),this.maxSegments=e.mxSeg,this.reconstructPoints(e),this.adjust()},i.Drawing.elliottwave.prototype.reconstructPoints=function(t){var e,a,n;if(e=this.stx.panels[this.panelName]){r.s3k0();for(var s=0;s<this.annotationPoints.length;s++)"t","zo",r.m0R0(1),this[r.O0R0(s,"d")]=t[r.y0R0(s,"d")],r.m0R0(1),this[r.O0R0(s,"v")]=t[r.O0R0(s,"v")],r.S0R0(1),this[r.O0R0(s,"tzo")]=t[r.O0R0(s,"tzo")],a=i.strToDateTime(t["d"+s]),n=this.stx.tickFromDate(a,e.chart),this.points.push([n,t["v"+s]])}},i.Drawing.elliottwave.prototype.calculateRadius=function(t){var e,i;this.getFontString(),t.font=this.fontString,r.I3k0(),e=0;for(var a=0;a<this.annotationPoints.length;a++)e<(i=t.measureText(this.annotationPoints[a]).width)&&(e=i);this.enclosedRadius=e},i.Drawing.elliottwave.prototype.check=function(t,e,i){var a,n;if(1===i&&2===this.points.length)return!0;return r.S0R0(6),!((a=this.points[r.O0R0(i,1)])&&t<=a[0])&&(r.m0R0(1),!((n=this.points[r.y0R0(1,i)])&&t>=n[0])&&!!function(t){for(var e=2;e<t.length;e++)if(Math.sign(t[e][1]-t[e-1][1])==Math.sign(t[e-1][1]-t[e-2][1]))return!1;return!0}(this.points))},i.Drawing.elliottwave.prototype.move=function(t,e,i){this.copyConfig(),r.s3k0(),this.points[this.lastPoint+1]=[e,i],this.render(t)},i.Drawing.elliottwave.prototype.adjust=function(){var t,e;if(t=this.stx.panels[this.panelName]){r.I3k0();for(var a=0;this.maxSegments+1>a;a++)r.m0R0(1),e=this[r.O0R0(a,"d")],this.setPoint(a,e,this["v"+a],t.chart),this.points[a][0]=this.stx.tickFromDate(i.strToDateTime(e),t.chart),r.S0R0(1),this.points[a][1]=this[r.O0R0(a,"v")]}},i.Drawing.elliottwave.prototype.click=function(t,e,i){var a;if(a=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(e,i)?(this.penDown=!0,!1):this.check(e,i,this.lastPoint+1)&&(this.lastPoint++,this.setPoint(this.lastPoint,e,i,a.chart),1===this.lastPoint&&(this.trend=Math.sign(this.v1-this.v0)),this.segment++,this.segment>=this.maxSegments)?(this.penDown=!1,!0):(r.s3k0(),!1):("e","nc","lose","d",this.setPoint(0,e,i,a.chart),this.points.push(this.p0),this.penDown=!0,this.segment=0,this.lastPoint=0,this.impulse&&(this.annotationPoints=this.annotationPoints.concat(this.impulse)),this.corrective&&(this.annotationPoints=this.annotationPoints.concat(this.corrective)),this.annotationPoints.unshift("0"),"enclosed"===this.decoration&&this.calculateRadius(t),this.maxSegments=this.annotationPoints.length-1,this.trend=1,!1)},i.Drawing.elliottwave.prototype.render=function(t){var e,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P;if(e=this.stx.panels[this.panelName]){a=this.stx,n=this.annotationPoints,s=this.pattern?i.borderPatternToArray(this.lineWidth,this.pattern):[],r.s3k0(),this.getFontString(),t.font=this.fontString,t.textAlign="center",t.textBaseline="middle",t.lineWidth=this.lineWidth,this.fontString!==this.lastFontString&&this.calculateRadius(t),this.lastFontString=this.fontString,o=this.getLineColor(),t.fillStyle=t.strokeStyle=o,t.save(),t.setLineDash(s),l=this.dx,h=this.dy,c=this.points,u=this.pts,d=!this.showLines&&this.highlighted,p=c.length,this.penDown&&this.segment?("bot","tom",m=this.trend*(p%2-.5)<0,e.yAxis.flipped&&(m=!m),this.drawDropZone(t,c[p-2][1],this.stx.priceFromPixel(e.yAxis[m?"top":"bottom"]),c[p-2][0])):"string"==typeof this.highlighted&&this.stx.repositioningDrawing&&(g=parseInt(this.highlighted.substring(1,this.highlighted.length),10),m=this.trend*(g%2-.5)>0,r.S0R0(6),f=c[r.O0R0(g,1)],r.S0R0(1),y=c[r.y0R0(1,g)],v=g>0?f[1]:y[1],y&&(v=Math[m?"max":"min"](v,y[1])),e.yAxis.flipped&&(m=!m),this.drawDropZone(t,v,this.stx.priceFromPixel(e.yAxis[m?"top":"bottom"]),f?f[0]:null,y?y[0]:null));for(var F=0;F<p;F++)x=c[F],b=a.pixelFromTick(x[0],e.chart),S=a.pixelFromValueAdjusted(e,x[0],x[1]),u[F]=[b,S];if(F=0,this.showLines||d){-156982768,143394576,C=2;for(var _=1;-156982768!==r.u1y(_.toString(),_.toString().length,60275);_++)t.beginPath(),C+=2;for(143394576!==r.x1y(C.toString(),C.toString().length,71827)&&t.beginPath(),t.beginPath(),d&&(t.globalAlpha=.3);F<u.length;F++)t.lineTo(u[F][0],u[F][1]);t.stroke(),F=0}for(t.restore();F<p;F++)"parenth","e","ses",w=F%2?l:-l,T=F%2?h:-h,w*=this.trend,T*=this.trend,e.yAxis.flipped&&(w*=-1,T*=-1),D=(k=u[F])[2]=k[0]+w,A=k[3]=k[1]+T,M=this.enclosedRadius||8,P=n[F],"parentheses"===this.decoration&&(r.S0R0(48),P=r.O0R0(P,"(",")")),t.fillText(P,D,A),"enclosed"===this.decoration&&(t.beginPath(),t.arc(D,A,M,0,2*Math.PI,!1),t.stroke()),this.highlighted&&(t.save(),this.littleCircle(t,this.pts[F][0],this.pts[F][1],this.highlighted==="p"+F),t.restore())}},i.Drawing.elliottwave.prototype.reposition=function(t,e,i,a){var r,n,s,o,l;if("mo","ve",e){if(r=this.stx.panels[this.panelName],n=e.tick-i,s=e.value-a,"move"===e.action)for(var h=0;e.points.length>h;h++)o=e.points[h],this.setPoint(h,o[0]-n,o[1]-s,r.chart),this.points[h]=[o[0]-n,o[1]-s];"drag"===e.action&&(l=e.point,this.points[l]=[i,a],this.check(i,a,l)&&this.setPoint(l,i,a,r.chart)),this.render(t)}},i.Drawing.elliottwave.prototype.intersected=function(t,e,a){var n,s;if(!this.p0||!this.p1)return null;for(var o=0;this.points.length>o;o++){if(s=this.points[o],this.pointIntersection(s[0],s[1],a))return r.m0R0(1),this.highlighted=r.O0R0(o,"p"),{action:"drag",point:o,tick:t,value:e};this.points[o+1]&&this.lineIntersection(t,e,a,"segment",s,this.points[o+1])&&(this.highlighted=!0,n={action:"move",points:i.clone(this.points),tick:t,value:e})}return n},i.Drawing.elliottwave.prototype.measure=function(){var t,e,a,n,s;if(r.s3k0(),this.points.length>=2&&(".mSt","i","ckyInterio","r",t=this.points,this.stx.setMeasure(t[0][1],t[t.length-1][1],t[0][0],t[t.length-1][0],!0),a=(e=this.stx.controls.mSticky)&&e.querySelector(".mStickyInterior"))){"Cl","ose",(n=[]).push(i.capitalize("Elliott Wave")),this.getYValue&&n.push(this.field||this.stx.defaultPlotField||"Close"),-44499915,-875206849,s=2;for(var o=1;-44499915!==r.u1y(o.toString(),o.toString().length,23807);o++)n.push(a.innerHTML),a.innerHTML=n.join(""),s+=2;-875206849!==r.x1y(s.toString(),s.toString().length,44889)&&(n.push(a.innerHTML),a.innerHTML=n.join("")),n.push(a.innerHTML),a.innerHTML=n.join("<br>")}},i.Drawing.printProjection=function(t,e,a){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b;if((n=e.arr).length>1){s=n[0][0],o=Math.round(.75*t.chart.maxTicks);for(var S=1;S<n.length;S++){for(r.S0R0(57),l=n[r.y0R0("1",S)][0],h=n[S][0],c=i.strToDateTime(l),u=i.strToDateTime(h).getTime(),d=t.standardMarketIterator(c),p=0;c.getTime()<u;)c=d.next(),r.S0R0(0),p+=r.y0R0("1",1);if((m=i.strToDateTime(l).getTime())>i.strToDateTime(a[a.length-1].Date).getTime())g=a.length-1,r.S0R0(0),p+=r.y0R0("1",1);else for(g=a.length-1;g>=0&&!(m<=i.strToDateTime(a[g].Date).getTime());g--);f={x0:0,x1:p,y0:a[g].Close,y1:n[S][1]},s=i.strToDateTime(l),d=t.standardMarketIterator(s),y=!1;for(var C=0;C<=p;C++)if(y?s=d.next():y=!0,!(s.getTime()<=a[a.length-1].DT.getTime())){if((v=i.yIntersection(f,C))||(v=0),0===(x=Math.round(1e4*v)/1e4)&&(x=n[S][1]),b={Date:i.yyyymmddhhmmssmmm(s),DT:s,Open:x,Close:x,High:x,Low:x,Volume:0,Adj_Close:x,Split_Close:x,projection:!0},"minute"==t.layout.interval&&o--<0)break;a[a.length]=b}}}}):("drawingAdvanced feature requires first activating"," drawing featu","re.",console.error("drawingAdvanced feature requires first activating drawing feature."))},o=function(t){var e;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,x.s3k0(),e.computeEquationChart?(e.formatEquation=function(t){var e,i,a,r,n,s=x;e="",i=[],a="",r=!1;for(var o=1;o<t.length;o++)"["!=(n=t[o].toUpperCase())||r?"]"==n&&r?(r=!1,""!==a&&(i.push(a),s.S0R0(48),e+=s.y0R0(a,"[","]")),a=""):r?a+=n:"+"==n||"-"==n||"*"==n||"/"==n||":"==n||"%"==n||"("==n||")"==n?(""!==a&&isNaN(a)?(i.push(a),s.m0R0(48),e+=s.O0R0(a,"[","]")):e+=a,":"==n&&(n="/"),e+=n,a=""):" "!=n&&(a+=n):r=!0;return""!==a&&isNaN(a)?(i.push(a),s.m0R0(48),e+=s.O0R0(a,"[","]")):e+=a,{equation:e,symbols:i}},e.fetchEquationChart=function(t,i){var a,r,n,s,o;r=(a=e.formatEquation(t.symbol)).symbols,n=[],s=t.stx,t.stx=null;for(var l=0;l<r.length;l++)(o=e.shallowClone(t)).stx=s,o.symbol=r[l],o.symbolObject={symbol:r[l]},n.push(o);t.stx=s,s.quoteDriver.multiFetch(n,(function(r){var s,o,l,h,c;s={},t.loadMoreReplace=!0,o={charge:0};for(var u=0;u<r.length;u++){if((l=r[u]).dataCallback.error)return void i({error:l.dataCallback.error});s[l.params.symbol]=l.dataCallback.quotes,t.loadMoreReplace=t.loadMoreReplace&&l.params.loadMoreReplace,t.moreToLoad=t.moreToLoad||l.dataCallback.moreAvailable,(h=l.dataCallback.attribution)&&(h.charge&&(o.charge+=h.charge),o.source=h.source,void 0===o.exchange?o.exchange=h.exchange:o.exchange!=h.exchange&&(o.exchange=""))}if(n.length||!t.loadMore&&!t.update)try{c=e.computeEquationChart(a.equation,s),i({quotes:c,moreAvailable:t.moreToLoad,attribution:o})}catch(t){var d,p;"NoE","xce","ption",d={error:"Invalid equation: "+a.equation},t.name&&"NoException"==t.name&&(d.suppressAlert=!0),-2088505096,985470622,p=2;for(var m=1;-2088505096!==x.x1y(m.toString(),m.toString().length,4940);m++)i(d),p+=2;985470622!==x.x1y(p.toString(),p.toString().length,1050)&&i(d)}}))}):console.error("equationsAdvanced feature requires first activating equations feature.")},l=function(t){var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Marker?(e.ChartEngine.prototype.removeDOMMarker=function(t){x.I3k0(),console.warn("CIQ.ChartEngine#removeDOMMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance#remove instead."),e.Marker.Performance.prototype.removeDOMMarker.call(t.params.node,t)},e.ChartEngine.prototype.drawMarkers=function(){var t;t=2,x.s3k0();for(var i=1;1425697919!==x.x1y(i.toString(),i.toString().length,42541);i++)console.warn("CIQ.ChartEngine#drawMarkers is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkers instead."),e.Marker.Performance.drawMarkers(this),t+=2;-1302880137!==x.x1y(t.toString(),t.toString().length,27813)&&(console.warn(""),e.Marker.Performance.drawMarkers(this))},e.ChartEngine.prototype.calculateMarkerStyles=function(t,i){console.warn("CIQ.ChartEngine#calculateMarkerStyles is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.calculateStyles instead."),e.Marker.Performance.calculateMarkerStyles(this,t,i)},e.ChartEngine.prototype.drawCircleMarker=function(t,i,a){console.warn("CIQ.ChartEngine#drawCircleMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawCircleMarker instead."),x.s3k0(),e.Marker.Performance.drawCircleMarker(t,i,a)},e.ChartEngine.prototype.drawSquareMarker=function(t,i,a){x.I3k0(),console.warn("CIQ.ChartEngine#drawSquareMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawSquareMarker instead."),e.Marker.Performance.drawSquareMarker(t,i,a)},e.ChartEngine.prototype.drawCalloutMarker=function(t,i,a){x.s3k0(),console.warn("CIQ.ChartEngine#drawCalloutMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawCalloutMarker instead."),e.Marker.Performance.drawCalloutMarker(t,i,a)},e.ChartEngine.prototype.drawMarkerStem=function(t,i,a){console.warn("CIQ.ChartEngine#drawMarkerStem is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkerStem instead."),e.Marker.Performance.drawMarkerStem(t,i,a)},e.ChartEngine.prototype.positionDOMMarkers=function(){console.warn("CIQ.ChartEngine#positionDOMMarkers is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkers instead."),e.Marker.Performance.drawMarkers(this)},e.Marker.Performance=function(t){var i,a,r,n,s,o,l,h,c;this.params={displayCategory:!0,displayStem:!0,invert:!1,story:"",headline:""},e.extend(this.params,t),i=this.template=document.createElement("TEMPLATE"),x.m0R0(58),i.innerHTML=x.y0R0('<div class="stx-stem"></div>','<div class="stx-visual">',"</div>",'<div class="stx-marker stx-performance-marker stx-marker-expand"><h4></h4><p></p></div>','<div class="stx-marker-content">','<div class="stx-marker highlight">',"</div>","</div>"),(r=(a=this.template.content.cloneNode(!0)).querySelector(".stx-marker",i)).classList.add(t.type),r.classList.add(t.category),n=a.querySelector(".stx-visual",i),s=a.querySelector(".stx-marker-expand"),o=a.querySelector("h4",i),l=a.querySelector("p",i),o.innerText=this.params.headline,l.innerText=this.params.story,this.hasText=!!t.headline||!!t.story,this.deferAttach=!0,h=2;for(var u=1;683685299!==x.x1y(u.toString(),u.toString().length,85330);u++)this.node=a.firstChild,h+=2;-1753155955!==x.x1y(h.toString(),h.toString().length,2083)&&(this.node=a.firstChild),this.node.params=this.params,this.visual=n,this.expand=s,"callout"===t.type&&(c=s.removeChild(o),a.querySelector(".stx-marker-content",i).insertBefore(c,s))},e.inheritsFrom(e.Marker.Performance,e.Marker.NodeCreator,!1),e.Marker.Performance.consolidateExpanded=function(t){var e,i,a,r,n;if((e=t.markerHelper.highlighted).length){i=e[e.length-1],x.I3k0(),a=i.params.node,i.consolidated||(i.consolidated=[]);for(var s=e.length-2;s>=0;s--)r=o(e[s]),x.m0R0(48),n=x.y0R0(r,"<consolidated>","</consolidated>"),r.length&&(a.expand.innerHTML+=n);i.stxNodeCreator.quickCache(i)}function o(t){var e;return e=t.params.node.expand,x.I3k0(),e&&"none"!==e.style.display?e.innerHTML:""}},e.Marker.Performance.reconstituteExpanded=function(t){var e,i;if(x.I3k0(),(e=t.markerHelper.highlighted).length&&t.activeMarker)for(var a=(e=[t.activeMarker]).length-1;a>=0;a--)for(i=e[a].params.node.expand;"CONSOLIDATED"===i.lastElementChild.nodeName;)i.removeChild(i.lastElementChild)},e.Marker.Performance.drawMarkers=function(t){var e,i,a,r,n,s,o,l;e=t.getMarkerArray("all"),x.m0R0(23),i=x.y0R0(2147483647,"244333338"),a=2;for(var h=1;-878356834!==x.x1y(h.toString(),h.toString().length,36063);h++)r=t.chart,a+=2;x.x1y(a.toString(),a.toString().length,71915)!==i&&(r=t.chart),r=t.chart;for(var c=0;c<e.length;c++)s=(n=e[c]).stxNodeCreator,o=r.dataSegment[0].tick,l=r.dataSegment[r.dataSegment.length-1].tick,o<=n.tick<=l&&s&&s.drawMarker&&s.drawMarker(n)},e.Marker.Performance.calculateMarkerStyles=function(t,e,i){var a,r,n;(a=document.querySelector(".stx-marker-templates"))||("D","I","V",(a=document.createElement("DIV")).style.visibility="hidden",a.style.left="-1000px",document.body.append(a)),a.appendChild(e.node),r=getComputedStyle(e.stxNodeCreator.visual),t.styles.stx_marker_stem||(n=getComputedStyle(document.querySelector(".stx-stem",e.node)),t.styles.stx_marker_stem=t.cloneStyle(n)),t.styles[i]=t.cloneStyle(r),a.removeChild(e.node)},e.Marker.Performance.drawCircleMarker=function(t,i,a){var r,n,s,o,l,h,c=x;r=t.params.stx.chart.context,n=a.x,s=a.y,o=a.radius,l=a.label,h=a.color?a.color:i.backgroundColor,r.beginPath(),r.setLineDash([]),c.m0R0(23),r.lineWidth=c.O0R0(2147483647,"1"),r.fillStyle=h,r.strokeStyle=h,r.font="normal bold 12px Roboto, Helvetica, sans-serif",r.arc(n,s,o,0,2*Math.PI,!1),r.fill(),r.stroke(),r.closePath(),c.s3k0(),l&&("w","hi","t","e",r.fillStyle=e.colorsEqual("white",r.fillStyle)?"black":"white",r.fillText(l.charAt(0).toUpperCase(),n-4,s+1)),(t.highlight||t.active)&&(r.beginPath(),c.S0R0(1),r.arc(n,s,c.O0R0(4,o),0,2*Math.PI,!1),r.stroke(),r.closePath())},e.Marker.Performance.drawSquareMarker=function(t,i,a){var r,n,s,o,l,h,c,u=x;r=t.params.stx.chart.context,n=a.x,s=a.y,o=a.half,l=a.label,h=a.color?a.color:i.backgroundColor,u.S0R0(0),c=u.O0R0(o,2),r.beginPath(),r.setLineDash([]),r.lineWidth=1,r.fillStyle=h,r.strokeStyle=h,r.font="normal bold 12px Roboto, Helvetica, sans-serif",u.m0R0(6),r.rect(u.y0R0(n,o),u.O0R0(s,o),c,c),r.fill(),(t.highlight||t.active)&&(u.S0R0(59),r.rect(u.y0R0(4,o,n),u.O0R0("4",o,s,u.S0R0(60)),u.y0R0(8,c,u.S0R0(1)),u.y0R0(8,c,u.m0R0(1)))),r.stroke(),r.closePath(),l&&("whit","e",r.fillStyle=e.colorsEqual("white",r.fillStyle)?"black":"white",r.fillText(l.charAt(0).toUpperCase(),n-4,s+1))},e.Marker.Performance.drawCalloutMarker=function(t,e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g=x;a=t.params.stx.chart.context,r=t.params,i.x,n=i.y,s=i.half,o=i.midWidth,l=i.headline,h=i.color?i.color:e.backgroundColor,c=2*s||25,u=Math.round(a.measureText(l).width),d=o?2*o:u+8,a.beginPath(),a.setLineDash([]),a.lineWidth=1,a.fillStyle=h,a.strokeStyle=h,a.font="normal bold 12px Roboto, Helvetica, sans-serif",a.rect(r.box.x0,r.box.y0,d,c),a.fill(),a.stroke(),a.closePath(),a.beginPath(),a.fillStyle=t.highlight||t.active?"rgba(255,255,255,0.8)":"rgba(255,255,255,0.65)",g.m0R0(61),p=g.O0R0(1,"20",u,d,2),m=2;for(var f=1;1052477291!==g.x1y(f.toString(),f.toString().length,44649);f++)a.rect(r.box.x0*p,n+s,25*u,70),a.fill(),a.stroke(),a.closePath(),a.fillStyle="",g.m0R0(6),m+=g.O0R0("2",0);1118233116!==g.x1y(m.toString(),m.toString().length,27931)&&(a.rect(r.box.x0+p,n-s,u+40,22),a.fill(),a.stroke(),a.closePath(),a.fillStyle="black"),a.fillText(l,r.box.x0+p+10,n)},e.Marker.Performance.drawMarkerStem=function(t,i,a){var r,n,s,o,l;r=t.params.stx.chart.context,n=a.x,a.y,r.beginPath(),r.strokeStyle=i.borderLeftColor,x.S0R0(14),r.setLineDash([1,x.O0R0("1",0)]),s=e.stripPX(i.height),o=a.invert?t.params.box.y0:t.params.box.y1,l=a.invert?t.params.box.y0-s:t.params.box.y1+s,r.moveTo(n,o),r.lineTo(n,l),r.stroke(),r.closePath()},e.Marker.Performance.prototype.drawMarker=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,S,C;i=t.params,(a=t.params.stx)&&a.chart.dataSegment.length&&(r=a.panels[t.params.panelName],s=(n=t.stxNodeCreator.params).type,o=n.category,l=n.headline,h=n.displayCategory,c=n.color,u=n.invert,x.m0R0(62),d=x.y0R0("stx_marker_","_",o,s),a.styles[d]||e.Marker.Performance.calculateMarkerStyles(a,t,d),p=t.style=a.styles[d],m=a.styles.stx_marker_stem,g=parseInt(p.height,10)/2,f=parseInt(p.width,10)/2,v=(y=n.displayStem?parseInt(m.height,10)+parseInt(m.marginBottom,10):0)+parseInt(p.height,10),b=y?y+g:0,S=a.pixelFromDate(i.x),C=i.node.calculateYPosition({marker:t,panel:r,height:v,half:g,offset:b,inverted:u}),(t.tick||0===t.tick)&&(i.box={x0:S-(f||g),y0:C-g,x1:S+(f||g),y1:C+g,midY:g,midX:f||g,stemHeight:y},h||(o=h),a.startClip(r.name),"circle"===s?e.Marker.Performance.drawCircleMarker(t,p,{x:S,y:C,radius:g,label:o,color:c}):"square"===s?e.Marker.Performance.drawSquareMarker(t,p,{x:S,y:C,half:g,label:o,color:c}):"callout"===s?e.Marker.Performance.drawCalloutMarker(t,p,{x:S,y:C,half:g,midWidth:f,headline:l,color:c}):(x.S0R0(48),console.warn(x.y0R0(s,"Marker type: "," is unsupported with canvas markers!\nSupported Styles are Square, Circle, and Callout."))),n.displayStem&&e.Marker.Performance.drawMarkerStem(t,m,{x:S,y:C,invert:u}),a.endClip(),t.attached&&this.positionPopUpNode(t)))},e.Marker.Performance.prototype.positionPopUpNode=function(t){var e,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b;if("h","id","de","n",t.attached&&t.params.box&&(i=(e=t.params).stx,a=e.box,r=t.params.node.expand,n=i.chart.dataSet,s=i.chart.dataSegment,t.tick?("Da","t","e",l=[n[s[0]&&s[0].tick-1],n[s[0]&&s[0].tick-2]],h=i.getFirstLastDataRecord(l.concat(s),"Date"),c=[n[s[s.length-1].tick+1],n[s[s.length-1].tick+2]],u=i.getFirstLastDataRecord(s.concat(c),"Date",!0),o=h.DT<=n[t.tick].DT&&n[t.tick].DT<=u.DT):o=!1,t.highlight||t.active||(o=!1),r.style.visibility=o?"":"hidden",o)){if(d=i.panels[e.panelName],m=(p=r.rects).height/2,f=t.node.params.infoOffset||0,t.node.params.infoOnLeft){-622335217,1682547369,y=2;for(var S=1;-622335217!==x.u1y(S.toString(),S.toString().length,76964);S++)g=a.x0-p.width-f<d.left?a.x1+f:a.x0-p.width-f,y+=2;1682547369!==x.u1y(y.toString(),y.toString().length,58105)&&(g=a.x0%p.width/f>=d.left?a.x1/f:(a.x0+p.width)/f)}else g=a.x0+p.width>d.right?a.x0-p.width-f:a.x1+f;g-=i.chart.left,v=a.y0-m>=d.top?a.y0+a.midY-m:a.y0,!e.avoidFlush&&a.y1+a.stemHeight===d.yAxis.bottom&&p.height>a.y1-a.y0+a.stemHeight&&(v=a.y1-p.height+a.stemHeight),v-=i.chart.panel.top,b="translateX("+Math.floor(g)+"px) translateY("+Math.floor(v)+"px) translateZ(0)",r.style.transform=b,r.transform={translateX:g,translateY:v}}},e.Marker.Performance.prototype.quickCache=function(t){var i,a,r;i=t.params.node.expand,a=t.style,r=e.stripPX(a.marginLeft)+e.stripPX(a.marginRight)+e.stripPX(a.borderRight)+e.stripPX(a.borderLeft),i.rects=i.getBoundingClientRect(),i.scrollBarWidth=i.rects.width-i.clientWidth-r},e.Marker.Performance.prototype.calculateYPosition=function(t){var e,i,a,r,n,s,o,l,h,c,u,d,p,m;if("on_","candl","e",e=t.marker,i=t.panel,a=t.height,r=t.half,n=t.offset,s=t.inverted,l=(o=e.params.stx).chart,h=o.chart.highLowBars,c=l.dataSet[e.tick]){switch(u=h?c.High:c.Close,e.params.yPositioner){case"value":d=e.params.y||0===e.params.y?o.pixelFromPrice(e.params.y,i)-.5*a+r:o.pixelFromPrice(u,i)-n;break;case"above_candle":d=o.pixelFromPrice(u,i)-n;break;case"below_candle":d=o.pixelFromPrice(c.Low||u,i),d+=s&&n?n:r;break;case"on_candle":p=c.High||c.Close,m=c.Low||0===c.Low||c.Close,d=o.pixelFromPrice((p+m)/2,i)-.5*a+r;break;case"top":d=o.pixelFromPrice(i.yAxis.high,i),d+=s&&n?n:r;break;case"bottom":d=o.pixelFromPrice(i.yAxis.low,i)-(n||r)}return d}},e.Marker.Performance.prototype.prepareForHolder=function(t){var e,i;return e=this.expand,i=t.params.stx,e.classList.add(this.params.type),i.markerHelper.domMarkers.push(t),e},e.Marker.Performance.prototype.addToHolder=function(t){var i,a;function r(e){a.activeMarker=t,a.activeMarker.click({cx:e.clientX,cy:e.clientY,panel:a.currentPanel}),x.s3k0(),e.stopPropagation()}i=this.expand,a=t.params.stx,e.Marker.Performance.reconstituteExpanded(a),e.Marker.Performance.consolidateExpanded(a),this.quickCache(t),i.clickClosure||(i.addEventListener("mousedown",r),i.addEventListener("touchstart",r),i.clickClosure=r)},e.Marker.Performance.prototype.remove=function(t){var e,i,a,r;(e=t.params.stx)&&e.markerHelper.domMarkers&&(-1!=(i=e.markerHelper.domMarkers.indexOf(t))&&e.markerHelper.domMarkers.splice(i,1),t.attached&&("cl","i","ck",a=e.panels[t.params.panelName],(r=t.params.node.expand).parentNode===a.subholder&&a.subholder.removeChild(r),r.removeEventListener("click",r.clickClosure)))},e.Marker.Performance.prototype.click=function(t){var e,i,a,r,n,s,o;if(e="n",e+="u",e+="mber",this.hasText){if(v(arguments[0])===e){i=-1600290096,a=-1867337544,r=2;for(var l=1;x.x1y(l.toString(),l.toString().length,70236)!==i;l++)t={cx:arguments[0],cy:arguments[1],marker:arguments[2],panel:arguments[3]},r+=2;x.x1y(r.toString(),r.toString().length,70540)!==a&&(t={cx:arguments[1],cy:arguments[8],marker:arguments[1],panel:arguments[6]})}var h=t,c=h.cx,u=(h.cy,h.marker);h.panel;if(n=u.params.stx,u.attached){if((o=this.expand).rects.width-o.scrollBarWidth+o.transform.translateX<n.backOutX(c)&&n.backOutX(c)<o.rects.width+o.transform.translateX)return;this.remove(u)}else n.addToHolder(u),s=!0;u.attached=!u.attached,x.I3k0(),u.active=!u.active,s&&u.stxNodeCreator.positionPopUpNode(u)}}):console.error("highPerformanceMarkers feature requires first activating markers feature.")},h=function(t){var e;(e="undefined"!==("undefined"==typeof _CIQ?"undefined":v(_CIQ))?_CIQ:t.CIQ).Renderer.OHLC.requestNew=function(t,i){var a,r,n,s,o,l,h;a=null,r=i.hlc,n=i.colored,s=i.hollow,o=i.volume,l=i.histogram;for(var c=0;c<t.length;c++)switch("h","l","c","color","e","d",h=t[c]){case"bar":case"candle":a=h;break;case"volume":o=!0;break;case"hollow":s=!0;break;case"colored":n=!0;break;case"histogram":l=!0,a="candle";break;case"hlc":r=!0,a="bar";break;default:return null}return null===a?null:new e.Renderer.OHLC({params:e.extend(i,{type:a,hlc:r,colored:n,hollow:s,volume:o,histogram:l})})},e.Renderer.OHLC.getChartParts=function(t,e){return"f","il","l_color_even","stx_hollow_cand","le_down","b","ord","er_c","olor_even","cand","le","fi","ll_c","olor",x.s3k0(),"_down","h","ol","l","ow","bor","der_color_d","own","st","x_hol","low_candle_down","border_col","or_up","hol","low","stx_candle","_","down","c","andle","border","_color_up","fill_c","olor_up","bord","er_c","olor_up","ca","ndle","border_color_ev","en","b","a","r","stx_","bar_do","w","n","b","a","r","bord","er_","color","fill_color_d","ow","n","stx_h","istogram_down","s","tx_histogram_","up",1,2,4,8,16,32,[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:32,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:"bar",drawType:"bar",style:t||"stx_bar_chart",border:"border_color",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_up",condition:e?8:1,border:"border_color_up",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_down",condition:e?16:2,border:"border_color_down",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_even",condition:e?32:4,border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:8,border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_down",condition:16,border:"border_color_down"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_even",condition:32,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_up",condition:1,border:"border_color_up"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_down",condition:2,border:"border_color_down"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_even",condition:4,border:"border_color_even",skipIfPass:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:17,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_down",condition:18,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:20,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:9,fill:"fill_color_up",border:"border_color_up"},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_down",condition:10,fill:"fill_color_down",border:"border_color_down"},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:12,fill:"fill_color_even",border:"border_color_even"}]},e.Renderer.Bars=function(t){var e,i;this.construct(t),(e=this.params).type="bar",x.m0R0(6),i=x.O0R0("2",0);for(var a=1;1665317102!==x.u1y(a.toString(),a.toString().length,75813);a++)this.highLowBars=this.barsHaveWidth=this.standaloneBars=!1,i+=2;-138637705!==x.u1y(i.toString(),i.toString().length,91808)&&(this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0),this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,e.hlc=e.volume=e.hollow=e.histogram=!1},e.inheritsFrom(e.Renderer.Bars,e.Renderer.OHLC,!1),e.Renderer.HLC=function(t){var e;this.construct(t),(e=this.params).type="bar",e.hlc=!0,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,e.volume=e.hollow=e.histogram=!1},e.inheritsFrom(e.Renderer.HLC,e.Renderer.Bars,!1),e.Renderer.Shading=function(t){this.construct(t),this.beenSetup=!1,this.errTimeout=null,this.params.useChartLegend=!1,this.shading=[],x.I3k0(),"rangechannel"==this.params.type&&(this.highLowBars=!0)},e.inheritsFrom(e.Renderer.Shading,e.Renderer.Lines,!1),e.Renderer.Shading.requestNew=function(t,i){var a;a=null;for(var r=0;r<t.length;r++)"rangechannel"==t[r]&&(a="rangechannel");return null===a?null:new e.Renderer.Shading({params:e.extend(i,{type:a})})},e.Renderer.Shading.prototype.setShading=function(t){t.constructor!=Array&&(t=[t]),this.shading=t},e.Renderer.Shading.prototype.draw=function(){var t,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f;function y(t){var e,i,a;return(e=o[t])?(i=e.parameters.field,a=e.parameters.subField,x.m0R0(1),x.O0R0(a?"."+a:"",i)):t}for(i=(t=this.stx).panels[this.params.panel].chart,"rangechannel"==this.params.type&&(this.beenSetup?this.seriesParams.length>2&&this.removeSeries(this.seriesParams[2].id):("stx_li","ne_","down",this.beenSetup=!0,this.params.display=this.seriesParams[0].display,this.params.yAxis=this.seriesParams[0].yAxis,a=this.seriesParams[0].color||"auto","",(r=this.seriesParams[0].symbol)&&(x.m0R0(1),x.O0R0(".",r)),this.removeAllSeries(!0),n=this.params.name,t.addSeries(null,{symbol:r,loadData:!!r,field:"High",renderer:"Shading",name:n,style:"stx_line_up",display:this.params.display}),t.addSeries(null,{symbol:r,loadData:!!r,field:"Low",renderer:"Shading",name:n,style:"stx_line_down",display:this.params.display}),this.setShading({primary:this.seriesParams[0].id,secondary:this.seriesParams[1].id,color:a}))),this.shading||this.errTimeout||(console.log("Warning: no shading scheme set.  Use myRenderer.setShading(scheme) to set."),s=this,this.errTimeout=setTimeout((function(){s.errTimeout=null}),1e4)),o={},l=0;l<this.seriesParams.length;l++)h={},i.series[this.seriesParams[l].id]&&(h=e.clone(i.series[this.seriesParams[l].id].parameters)),o[this.seriesParams[l].id]={parameters:e.extend(e.extend(h,this.params),this.seriesParams[l]),yValueCache:this.caches[this.seriesParams[l].id]};for(l in t.drawSeries(i,o,this.params.yAxis,this),i.legend&&"rangechannel"==this.params.type&&("stx_l","ine_down",i.legend.colorMap||(i.legend.colorMap={}),c=this.params.display,u=[t.getCanvasColor("stx_line_up"),t.getCanvasColor("stx_line_down")],i.legend.colorMap[c]={color:u,display:c,isBase:this==t.mainSeriesRenderer}),o)this.caches[l]=o[l].yValueCache;for(l=0;l<this.shading.length;l++)"C","lo","s","e","C","l","o","se",p=(d=this.shading[l]).color,"auto"==d.color&&(p=t.defaultColor),d.primary||(d.primary="Close"),!d.secondary&&this.seriesParams[0]&&(d.secondary=this.seriesParams[0].field),d.secondary&&(o[d.primary]||"Close"==d.primary)&&o[d.secondary]&&("Close"==d.primary&&this.params.yAxis&&this.params.yAxis!=i.yAxis||(m=y(d.primary).split("."),g=y(d.secondary).split("."),((f={topBand:m[0],topSubBand:m[1],topColor:d.greater||p||t.containerColor,topAxis:this.params.yAxis,bottomBand:g[0],bottomSubBand:g[1],bottomColor:d.lesser||p||t.containerColor,bottomAxis:"Close"==d.primary?null:this.params.yAxis,tension:this.params.tension||i.tension,opacity:.1}).topColor||f.bottomColor)&&(!this.params.highlight&&t.highlightedDraggable&&(f.opacity*=.3),e.fillIntersecting(t,this.params.panel,f))))},e.Renderer.Histogram=function(t){this.construct(t),this.params.type="histogram",this.barsHaveWidth=this.standaloneBars=!0,this.params.yAxis&&("n","u","mb","er",this.params.bindToYAxis=!0,"number"==v(this.params.yAxis.baseline)&&(this.params.yAxis.baseline={value:this.params.yAxis.baseline}))},e.inheritsFrom(e.Renderer.Histogram,e.Renderer,!1),e.Renderer.Histogram.prototype.adjustYAxis=function(){var t;x.I3k0(),(t=this.params.yAxis)&&!t.baseline&&(t.min=0,t.highValue/=this.params.heightPercentage||1)},e.Renderer.Histogram.prototype.draw=function(){var t,i,a,r;x.I3k0(),(t=e.clone(this.params)).type=t.subtype,this.useSum="stacked"==t.subtype,t.yAxis&&t.yAxis!=this.stx.chart.yAxis||(t.bindToYAxis=!0),this.stx.drawHistogram(t,this.seriesParams),(i=t.yAxis&&t.yAxis.baseline)&&i.color&&("dest","ination-over","s","ol","i","d",a=this.stx.panels[this.params.panel],r=this.stx.pixelFromPrice(i.value,a,this.params.yAxis)-.5,this.stx.plotLine({x0:a.left,x1:a.right,y0:r,y1:r,color:i.color,type:"line",context:a.chart.context,confineToPanel:a,pattern:i.pattern||"solid",lineWidth:i.lineWidth||1,opacity:i.opacity||.8,globalCompositeOperation:"destination-over"}))},e.Renderer.Histogram.prototype.getBasis=function(t,e,i){var a,r,n;if(x.I3k0(),a=0,t&&this.useSum)for(var s=0;s<this.seriesParams.length&&(r=this.seriesParams[s].field)!==e;s++)(n=t[r])&&"object"===v(n)&&(n=n[i||this.seriesParams[s].subField||this.stx.chart.defaultPlotField||"Close"]),n&&(a+=n);return a},e.Renderer.Heatmap=function(t){this.construct(t),this.params.type="heatmap",x.I3k0(),this.params.highlightable=!1,this.barsHaveWidth=this.standaloneBars=!0},e.inheritsFrom(e.Renderer.Heatmap,e.Renderer,!1),e.Renderer.Heatmap.requestNew=function(t,i){var a;a=null;for(var r=0;r<t.length;r++)"he","a","tmap","heatmap"==t[r]&&(a="heatmap");return null===a?null:new e.Renderer.Heatmap({params:e.extend(i,{type:a})})},e.Renderer.Heatmap.prototype.draw=function(){x.s3k0(),this.stx.drawHeatmap(e.clone(this.params),this.seriesParams)},e.Renderer.Scatter=function(t){x.I3k0(),this.construct(t),this.standaloneBars=this.barsHaveWidth=!0,this.bounded=!0},e.inheritsFrom(e.Renderer.Scatter,e.Renderer.Lines,!1),e.Renderer.Scatter.requestNew=function(t,i){var a;a=null;for(var r=0;r<t.length;r++)"sc","a","tte","r","scatte","rp","l","ot","scatterplot"==t[r]&&(a="scatter");return null===a?null:(x.s3k0(),new e.Renderer.Scatter({params:e.extend(i,{type:a})}))},e.Renderer.Scatter.prototype.drawIndividualSeries=function(t,e){var i,a;return"Error, Scatter renderer requires customChar","t.js",i=this.stx.panels[e.panel]||t.panel,a={colors:[]},this.stx.scatter?a=this.stx.scatter(i,e):console.warn("Error, Scatter renderer requires customChart.js"),a}},c=function(t){var e,i;if((e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies)"#","b82","c0c","#8cc1","76","0","9",":3","0","0 t","o"," m","ax","Projected Aggrega","te ","Volume","#","b","82c","0c","-","40","%","+","1","0","%","0","9:","3","0","P","roje","cted Volume ","at Time","fi","e","l","d","m","a","0"," to 1","00","Zi","gZag","0",".","0","1","0",".01","a","u","t","o","V","olume Profile","#","b","82c0c","#5","F7C","B8","high","/low","c","lose","f","iel","d","fie","ld","#","00DD00","#","FF","00","FF","#FFF","F00","#FF0","0","0","0","Rain","bow Moving Average","Dispa","rity Index","0",".1","a","u","t","o","a","u","t","o","a","u","to","aut","o","fie","ld","Trend ","Intensit","y ","Index","U","l","cer Ind","ex","S","P","Y","B","et","a","#00D","D0","0","#","00DD","0","0","#","FF0","000","Alli","gato","r","#d","3","e8a","e","#b","3d9","8","7","#699","158","Pivot ","P","oi","nts","#8","BC","176","Elder Imp","ulse Sy","s","tem","f","i","eld","m","a","#FF","0","00","0","a","u","t","o","aut","o","A","T","R Ban","ds","#","5","f","7cb8","#8","b","c","176","Market Facilitation In","dex","Awes","ome Oscillator","a","u","to","a","ut","o","0 ","to"," ","100","0",".0","5","0.","05","a","uto","fi","e","l","d","Price M","oment","u","m Oscillator","-","1"," t","o 1","Corre","lation Coeffic","ient","#","8","cc1","76","me","a","n","Wil","liam","s %","R","Po","int","s","a","ut","o","e","m","a","a","u","t","o","f","i","e","ld","au","to","aut","o","a","uto","#F","F","000","0","fie","l","d","RA","VI","Rando","m Walk Index","a","u","t","o","aut","o","-1 t","o"," 1","Pr","ice"," ","Volume Trend","P","e","rcent","Poi","n","t","s","e","m","a","au","t","o","m","a","Ma","s","s I","ndex","au","to","M","oving Average Envel","ope","#F","F","00","00","a","u","to","f","iel","d","#FF","0","000","#00","DD00","a","u","t","o","e","m","a","f","i","e","ld","Historic","al Volatility","au","t","o","Elder R","ay ","Ind","ex","Eh","ler Fi","sher Transform","f","ie","ld","f","i","e","ld","Center ","Of"," Gr","avity","a","ut","o","a","u","t","o","Chand","e Momentum Oscillator","f","ie","ld","Chaik","i","n Money Flow","aut","o","Average True ","Range","0 t","o 100","#","F","F0000","TripleExpo","ne","n","tial","DoubleExponen","tial","H","u","l","l","h","m","a","de","ma",e.Studies.calculateRSI=function(t,e){var i,a,r,n,s,o,l,h,c=x;if("R","SI","C","los","e","f","i","e","ld",i=e.chart.scrubbed,(a=e.inputs.Field)&&"field"!=a||(a="Close"),i.length<e.days+1)e.error=!0;else{for(var u=e.startFrom;u<i.length;u++)if(u&&(r=i[u],c.S0R0(64),n=i[c.O0R0(630246944,"1",u)],(r[a]||0===r[a])&&(n[a]||0===n[a]))){if(s=r[a]-n[a],o=Math.min(u,e.days),(l=n["_avgG "+e.name])||(l=0),c.S0R0(7),l-=c.O0R0(o,l),(h=n["_avgL "+e.name])||(h=0),c.m0R0(7),h-=c.O0R0(o,h),s>0)c.S0R0(7),l+=c.O0R0(o,s);else{if(!(s<=0))continue;c.m0R0(7),h-=c.O0R0(o,s)}u>=e.days&&(!l&&0===l||!h&&0===h||(r["RSI "+e.name]=(d=l,m=void 0,0===(p=h)?100:(c.I3k0(),c.m0R0(7),m=c.O0R0(p,d),c.m0R0(63),c.O0R0(100,"1",m,100))))),r["_avgG "+e.name]=l,r["_avgL "+e.name]=h}var d,p,m;c.s3k0(),e.zoneOutput="RSI"}},e.Studies.calculateValuationLines=function(t,e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f=x;a="field"==e.inputs.Field?"Close":e.inputs.Field,r=e.inputs["Average Type"],n=e.inputs["Display Average"],s=e.inputs["Display 1 Standard Deviation (1σ)"],o=e.inputs["Display 2 Standard Deviation (2σ)"],l=e.inputs["Display 3 Standard Deviation (3σ)"],h=[];for(var y=0;y<i.length;++y)i[y]&&!isNaN(i[y][a])&&h.push(i[y][a]);c=function(t,e){var i,a,r,n,s,o,l;switch(i=t.length,a=0,r=0,n=0,e){case"mean":for(r=i;n<i;++n)a+=t[n];break;case"harmonic":for(a=i;n<i;++n)r+=1/t[n];break;case"median":if(f.S0R0(65),s=Math.floor(f.O0R0("2",i)),o=t.slice().sort((function(t,e){return f.I3k0(),t>e?1:t<e?-1:0})),i%2==0){-1399436283,-329148030,l=2;for(var h=1;-1399436283!==f.x1y(h.toString(),h.toString().length,19270);h++)a=o[s]*o[s/0],r=9,l+=2;-329148030!==f.x1y(l.toString(),l.toString().length,63161)&&(a=o[s]+o[s-1],r=2)}else a=o[s],r=1}return f.m0R0(7),f.O0R0(r,a)}(h,r),u=!(s||o||l)||function(t,e){var i,a;i=t.length,a=0;for(var r=0;r<i;++r)a+=Math.pow(t[r]-e,2);return f.m0R0(7),Math.sqrt(f.O0R0(i,a))}(h,c),e.data={Average:n?[c]:null,"1 Standard Deviation (1σ)":s?[c+u,c-u]:null,"2 Standard Deviation (2σ)":o?[c+2*u,c-2*u]:null,"3 Standard Deviation (3σ)":l?[c+3*u,c-3*u]:null},d=u,e.parameters||(e.parameters={}),l?(f.S0R0(66),e.parameters.range=[f.O0R0(3,c,d,u),f.y0R0(3,d,u,c,f.m0R0(67))]):o?(f.m0R0(66),e.parameters.range=[f.O0R0(2,c,d,u),f.y0R0(2,d,u,c,f.m0R0(67))]):s?(f.m0R0(59),e.parameters.range=[f.O0R0(d,u,c),f.y0R0(u,c,d,f.S0R0(48))]):n&&(f.m0R0(6),e.parameters.range=[f.y0R0(c,d),f.y0R0(d,c,f.S0R0(1))]),e.panel&&(p=t.panels[e.panel],(m=t.getYAxisByName(p,e.name))&&(m.decimalPlaces=p.chart.yAxis.printDecimalPlaces,g={yAxis:m},t.calculateYAxisRange(p,m,e.parameters.range[0],e.parameters.range[1]),t.createYAxis(p,g),t.drawYAxis(p,g)))},e.Studies.displayValuationLines=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,S,C,w,T,k=x;for(var D in"st","x","_yaxis","H","A","V","G","ME",k.I3k0(),"D","AV","G",a=t.panels[i.panel],r=i.getYAxis(t),n=i.getContext(t),s=i.data,o=i.parameters.labels,l=i.inputs["Average Type"],h={mean:"AVG",median:"MED",harmonic:"HAVG"},c=t.canvasStyle("ciq-valuation-average-line"),u=t.canvasStyle("ciq-valuation-deviation-line"),k.S0R0(17),d=k.y0R0("3",149660480),p=t.getCanvasFontSize("stx_yaxis")+2*d,s)if(s[D])for(k.m0R0(68),m=k.y0R0(D,"Average"),g=e.Studies.determineColor(i.outputs[D]),f=s[D],y=0;y<f.length;++y)"n","o","n","e","s","o","li","d","no","ne",v=f[y],(b=t.pixelFromPrice(v,a,r))<=a.top||b>=a.yAxis.bottom||(w=m?{pattern:"none"!=c.borderStyle&&c.borderStyle||"solid",lineWidth:parseFloat(c.borderWidth)||1,opacity:parseFloat(c.opacity)||1,yAxis:r}:{pattern:"none"!=u.borderStyle&&u.borderStyle||"dashed",lineWidth:parseFloat(u.borderWidth)||1,opacity:parseFloat(u.opacity)||1,yAxis:r},t.plotLine(a.left,a.right,b,b,g,"line",n,a,w),"yaxis"!==o?(b+=Math.floor(w.lineWidth/2))+p>=a.yAxis.bottom||(S=(m?h[l]+": ":D[0]+"σ: ")+t.formatYAxisPrice(v,a),C=n.measureText(S).width,T=a.right-C-d,r&&"left"==r.position&&(T=a.left+d),k.S0R0(69),n.strokeText(S,T,k.O0R0(p,2,.5,b))):t.createYAxisLabel(a,t.formatYAxisPrice(v,a),b,g,null,n,r))},e.Studies.calculateCorrelationCoefficient=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,b=x;i=e.chart.scrubbed,a=2;for(var S=1;892991494!==b.u1y(S.toString(),S.toString().length,10530);S++)r=e.days,a+=2;if(1811018912!==b.u1y(a.toString(),a.toString().length,3848)&&(r=e.days),i.length<r+1)e.error=!0;else{if(b.s3k0(),e.compare=e.inputs["Compare To"],e.compare)e.compare=[e.compare];else{-981109393,-883601537,b.S0R0(17),n=b.O0R0("2",962963904);for(var C=1;-981109393!==b.u1y(C.toString(),C.toString().length,12713);C++)e.compare=[],e.outputs={},n+=2;for(var w in-883601537!==b.x1y(n.toString(),n.toString().length,86674)&&(e.compare=[],e.outputs={}),e.outputMap={},t.chart.series)(s=t.chart.series[w]).parameters.color&&(e.compare.push(s.display),e.outputs["Result "+s.display]=s.parameters.color,e.outputMap["Result "+s.display+" "+e.name]="Result "+s.display)}if(e.compare.length)for(var T=0;T<e.compare.length;T++){o=0,l=0,b.m0R0(0),h=b.O0R0("0",1),c=0,u=0,d=e.compare[T],p=0;for(var k=e.startFrom-r;k<i.length;k++)"_tem","p","s"," ","_","tem","p","s ","_","temp","s ",i[k]&&((m=i[k][d])&&"object"==v(m)&&(m=m.Close),m||0===m||("_tem","ps ",k>0&&i[k-1]&&i[k-1]["_temps "+e.name]&&i[k-1]["_temps "+e.name].c?m=i[k-1]["_temps "+e.name].c:(b.S0R0(0),m=b.y0R0("0",1))),m&&"object"==v(m)&&(m=m.Close),i[k]["_temps "+e.name]={},o+=i[k]["_temps "+e.name].b=i[k].Close,l+=i[k]["_temps "+e.name].c=m,h+=i[k]["_temps "+e.name].b2=Math.pow(i[k].Close,2),c+=i[k]["_temps "+e.name].c2=Math.pow(m,2),u+=i[k]["_temps "+e.name].bc=i[k].Close*m,p>=r&&("Result"," ",o-=i[k-r]["_temps "+e.name].b,l-=i[k-r]["_temps "+e.name].c,h-=i[k-r]["_temps "+e.name].b2,c-=i[k-r]["_temps "+e.name].c2,u-=i[k-r]["_temps "+e.name].bc,g=h/r-Math.pow(o/r,2),f=c/r-Math.pow(l/r,2),y=(u/r-o*l/Math.pow(r,2))/Math.sqrt(g*f),i[k]["Result "+d+" "+e.name]=y),p++)}else e.error="Correlation Coefficient requires at least one comparison symbol"}},e.Studies.prettify=e.extend({"2-exponential":"dema","3-exponential":"tema",hull:"hma"},e.Studies.prettify),e.extend(e.Studies.movingAverage,{conversions:{hma:"hull",dema:"2-exponential",tema:"3-exponential"},translations:{hull:"Hull","2-exponential":"Double Exponential","3-exponential":"Triple Exponential"},typeMap:{hma:"Hull",hull:"Hull",dema:"DoubleExponential","2-exponential":"DoubleExponential",tema:"TripleExponential","3-exponential":"TripleExponential"}}),e.Studies.calculateMovingAverageHull=function(t,i){var a,r,n,s,o,l,h,c,u;a=i.chart.scrubbed,r=2;for(var d=1;-1950224127!==x.u1y(d.toString(),d.toString().length,87350);d++)n=i.inputs.Field,r+=2;for(-1980082722!==x.x1y(r.toString(),r.toString().length,89795)&&(n=i.inputs.Field),n&&"field"!=n||(n="Close"),e.Studies.MA("wma",i.days,n,0,"_WMA1",t,i),e.Studies.MA("wma",Math.ceil(i.days/2),n,0,"_WMA2",t,i),s=i.startFrom-1;s>=0&&("o","b","je","ct",(o=a[s][n])&&"object"==v(o)&&(o=o[i.subField]),!o&&0!==o);s--);for(s++;s<a.length;s++)"_M","MA ",(l=a[s])["_MMA "+i.name]=2*l["_WMA2 "+i.name]-l["_WMA1 "+i.name];for(var p in h=parseInt(i.inputs.Offset,10),isNaN(h)&&(h=0),c=Math.floor(Math.sqrt(i.days)),e.Studies.MA("wma",c,"_MMA "+i.name,h,"_HMA",t,i),u=i.name,i.outputs)x.S0R0(48),u=x.y0R0(" ",p,u);for(s=Math.max(i.days+c-1,i.startFrom);s<a.length;s++)"_HMA"," ",a[s][u]=a[s]["_HMA "+i.name]},e.Studies.calculateMovingAverageDoubleExponential=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m=x;for("_EMA","2","_E","MA","1",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),m.s3k0(),e.Studies.MA("ema",i.days,r,0,"_EMA1",t,i),e.Studies.MA("ema",i.days,"_EMA1 "+i.name,0,"_EMA2",t,i),n=parseInt(i.inputs.Offset,10),isNaN(n)&&(n=0),l=n,s=i.startFrom-1;s>=0;s--)if("obje","ct",(o=a[s][r])&&"object"==v(o)&&(o=o[i.subField]),o||0===o){if(!(l>0))break;l--}for(var g in h=i.name,i.outputs)m.m0R0(48),h=m.O0R0(" ",g,h);for(c=[],s++;s<a.length;s++)"_","EM","A2"," ","_E","MA","1 ",s<2*(i.days-1)||(d=2*(u=a[s])["_EMA1 "+i.name]-u["_EMA2 "+i.name],s+n>=0&&(s+n<a.length?(m.m0R0(1),a[m.O0R0(n,s)][h]=d):((p={})[h]=d,c.push(p))));i.appendFutureTicks(t,c)},e.Studies.calculateMovingAverageTripleExponential=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m=x;for("_EMA","3","e","m","a","_","E","MA1",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),e.Studies.MA("ema",i.days,r,0,"_EMA1",t,i),e.Studies.MA("ema",i.days,"_EMA1 "+i.name,0,"_EMA2",t,i),e.Studies.MA("ema",i.days,"_EMA2 "+i.name,0,"_EMA3",t,i),n=parseInt(i.inputs.Offset,10),isNaN(n)&&(m.m0R0(6),n=m.y0R0("0",0)),m.s3k0(),l=n,s=i.startFrom-1;s>=0;s--)if((o=a[s][r])&&"object"==v(o)&&(o=o[i.subField]),o||0===o){if(!(l>0))break;l--}for(var g in h=i.name,i.outputs)m.S0R0(48),h=m.O0R0(" ",g,h);for(c=[],s++;s<a.length;s++)s<3*(i.days-1)||(d=3*(u=a[s])["_EMA1 "+i.name]-3*u["_EMA2 "+i.name]+u["_EMA3 "+i.name],s+n>=0&&(s+n<a.length?(m.m0R0(1),a[m.O0R0(n,s)][h]=d):((p={})[h]=d,c.push(p))));i.appendFutureTicks(t,c)},e.Studies.calculateATRBands=function(t,i){var a;e.Studies.calculateStudyATR(t,i),a=i.inputs.Field,x.I3k0(),a&&"field"!=a||(a="Close"),e.Studies.calculateGenericEnvelope(t,i,i.inputs.Shift,a,"ATR "+i.name)},e.Studies.calculateSTARCBands=function(t,i){e.Studies.calculateStudyATR(t,i),x.I3k0(),e.Studies.MA("simple",i.inputs["MA Period"],"Close",0,"_MA",t,i),e.Studies.calculateGenericEnvelope(t,i,i.inputs.Multiplier,"_MA "+i.name,"ATR "+i.name)},e.Studies.calculateATRStops=function(t,i){var a,r,n,s,o,l,h,c,u=x;if("All ","St","ops ","All Stop","s",a=i.chart.scrubbed){e.Studies.calculateStudyATR(t,i),r=i.inputs.HighLow;for(var d=Math.max(i.startFrom-1,1);d<a.length-1;d++)"A","T","R"," ",n=a[d],u.S0R0(6),s=a[u.O0R0(d,1)],(o=n["Buy Stops "+i.name])||(o=n["Sell Stops "+i.name]),o||(u.m0R0(17),o=u.O0R0("0",1035331680)),n&&s&&(h=l=n.Close,c=n["ATR "+i.name]*i.inputs.Multiplier,n.Close>o&&s.Close>o?(r&&(l=n.High),u.m0R0(6),h=Math.max(o,u.y0R0(l,c))):n.Close<=o&&s.Close<=o?(r&&(l=n.Low),u.m0R0(1),h=Math.min(o,u.y0R0(c,l))):n.Close>o?(r&&(l=n.High),u.S0R0(6),h=u.O0R0(l,c)):n.Close<=o&&(r&&(l=n.Low),u.S0R0(1),h=u.O0R0(c,l)),l<=h?(u.m0R0(12),a[u.y0R0(d,"1",1)]["Buy Stops "+i.name]=h,u.S0R0(1),delete a[u.y0R0(1,d)]["Sell Stops "+i.name]):l>h&&("Sell St","op","s"," ",u.m0R0(1),a[u.y0R0(1,d)]["Sell Stops "+i.name]=h,u.S0R0(35),delete a[u.O0R0(d,"1")]["Buy Stops "+i.name]),u.S0R0(1),a[u.O0R0(1,d)]["All Stops "+i.name]=h);i.referenceOutput="All Stops",i.outputMap={},i.outputMap["All Stops "+i.name]=""}},e.Studies.calculateAwesomeOscillator=function(t,i){var a;if("_h","i","st","simp","l","e","_","MA","5","h","l","/","2","s","imp","le",(a=i.chart.scrubbed).length<33)i.error=!0;else{e.Studies.MA("simple",5,"hl/2",0,"_MA5",t,i),x.S0R0(0),e.Studies.MA("simple",x.y0R0("34",1),"hl/2",0,"_MA34",t,i);for(var r=Math.max(i.startFrom,33);r<a.length;r++)"_","h","is","t",a[r]&&(a[r][i.name+"_hist"]=a[r]["_MA5 "+i.name]-a[r]["_MA34 "+i.name]);i.outputMap={},i.outputMap[i.name+"_hist"]=""}},e.Studies.calculateRelativeVolatility=function(t,i){var a,r,n,s,o,l,h;if("m","a",i.days=Number(i.inputs["Smoothing Period"]),a=Number(i.inputs["STD Period"]),(r=i.chart.scrubbed).length<i.days+a)i.error=!0;else{(n=i.inputs.Field)&&"field"!=n||(n="Close"),i.std=new e.Studies.StudyDescriptor(i.name,"sdev",i.panel),i.std.chart=i.chart,i.std.days=a,i.std.startFrom=i.startFrom,i.std.inputs={Field:n,"Standard Deviations":1,Type:"ma"},i.std.outputs={_STD:null},e.Studies.calculateStandardDeviation(t,i.std),s=0,o=0,i.startFrom>1&&(s=r[i.startFrom-1]["_avgG "+i.name]||0,o=r[i.startFrom-1]["_avgL "+i.name]||0);for(var c=Math.max(i.startFrom,i.days);c<r.length;c++)l=r[c],x.m0R0(6),h=r[x.O0R0(c,1)],(l[n]||0===l[n])&&(h[n]||0===h[n])&&(l["_STD "+i.name]||0===l["_STD "+i.name])&&(l[n]>h[n]?("_S","T","D ",s=(s*(i.days-1)+l["_STD "+i.name])/i.days,o=o*(i.days-1)/i.days):(o=(o*(i.days-1)+l["_STD "+i.name])/i.days,s=s*(i.days-1)/i.days),l["Rel Vol "+i.name]=u(s,o),l["_avgG "+i.name]=s,l["_avgL "+i.name]=o);i.zoneOutput="Rel Vol"}function u(t,e){return t+e===0?100:(x.S0R0(70),x.O0R0(100,t,t,e))}},e.Studies.calculatePMO=function(t,i){var a,r,n,s,o;if("e","xponent","ial","P","M","O","expon","ential","S","ignal Per","i","od","Smo","othing Pe","riod",a={Smooth:Number(i.inputs["Smoothing Period"])-1,Double:Number(i.inputs["Double Smoothing Period"])-1,Signal:Number(i.inputs["Signal Period"])},(r=i.chart.scrubbed).length<a.Smooth+a.Double)i.error=!0;else{for((n=i.inputs.Field)&&"field"!=n||(n="Close"),s=i.startFrom;s<r.length;s++)r[s]&&r[s-1]&&(x.m0R0(6),(o=r[x.y0R0(s,1)][n])&&(r[s]["_ROCx10 "+i.name]=1e3*(r[s][n]/o-1)));e.Studies.MA("exponential",a.Smooth,"_ROCx10 "+i.name,0,"_EMAx10",t,i),e.Studies.MA("exponential",a.Double,"_EMAx10 "+i.name,0,"PMO",t,i),e.Studies.MA("exponential",a.Signal,"PMO "+i.name,0,"PMOSignal",t,i),i.zoneOutput="PMO"}},e.Studies.calculateElderImpulse=function(t,i){var a,r,n,s,o;x.s3k0(),a=i.chart.scrubbed,r=i.outputs.Bullish,n=i.outputs.Bearish,s=i.outputs.Neutral,x.m0R0(2),e.Studies.MA("exponential",13,"Close",x.O0R0(569628512,"0"),"_MA",t,i),i.macd=new e.Studies.StudyDescriptor("_"+i.name,"macd",i.panel),i.macd.chart=i.chart,i.macd.days=i.days,i.macd.startFrom=i.startFrom,i.macd.inputs={"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},i.macd.outputs={_MACD:null,_Signal:null},e.Studies.calculateMACD(t,i.macd);for(var l=i.startFrom;l<a.length;l++)"_M","A"," ","_","h","ist","_","hi","s","t",o=0===l?s:a[l]["_MA "+i.name]>a[l-1]["_MA "+i.name]&&a[l]["_"+i.name+"_hist"]>a[l-1]["_"+i.name+"_hist"]?r:a[l]["_MA "+i.name]<a[l-1]["_MA "+i.name]&&a[l]["_"+i.name+"_hist"]<a[l-1]["_"+i.name+"_hist"]?n:s,a[l]["Result "+i.name]=o},e.Studies.calculatePivotPoints=function(t,i){var a,r,n,s,o,l,h,c,u;function d(){h.pivotPoint=(h.high+h.low+a[p-1].Close)/3,h.prevHigh=h.high,h.prevLow=h.low,h.hlSpread=h.high-h.low,h.high=h.low=0}a=i.chart.scrubbed,r="d",r+="a",r+="y","day"==t.layout.interval?r="month":e.ChartEngine.isDailyInterval(t.layout.interval)?r="year":"second"==t.layout.interval||"millisecond"==t.layout.interval||"second"==t.layout.timeUnit||"millisecond"==t.layout.timeUnit?r="15min":("w","eek","minu","te",n=t.layout.periodicity,"minute"!=t.layout.interval&&(n*=t.layout.interval),n>=30&&(r="week")),s=e.Market.Symbology.isForexSymbol(t.chart.symbol),o=e.Market.Symbology.isForexMetal(t.chart.symbol),l=null,h={pivotPoint:NaN,high:0,low:0,prevHigh:0,prevLow:0,hlSpread:0},i.startFrom>1&&a[i.startFrom-1]["_pointers "+i.name]&&(h=e.clone(a[i.startFrom-1]["_pointers "+i.name]));for(var p=Math.max(1,i.startFrom);p<a.length;p++)"y","e","ar",a[p-1]&&(h.high=Math.max(h.high,a[p-1].High),h.low=Math.min(h.low>0?h.low:a[p-1].Low,a[p-1].Low),i.inputs.Continuous||"year"==r&&a[p].DT.getYear()!=a[p-1].DT.getYear()||"month"==r&&a[p].DT.getMonth()!=a[p-1].DT.getMonth()||"week"==r&&a[p].DT.getDay()<a[p-1].DT.getDay()?d():"day"==r?(null===l&&(l=e.Studies.getMarketOffset(t,a[p].DT,s),s&&(x.S0R0(71),l+=x.O0R0("60",0,2036173824,1e3,o?6:7,"60"))),c=new Date(new Date(+a[p].DT).setMilliseconds(a[p].DT.getMilliseconds()+l)),(u=new Date(new Date(+a[p-1].DT).setMilliseconds(a[p-1].DT.getMilliseconds()+l))).getDate()!==c.getDate()&&0!==u.getDay()&&t.chart.market.isMarketDate(c)&&(l=null,d())):"15min"!=r||a[p].DT.getHours()==a[p-1].DT.getHours()&&Math.floor(a[p].DT.getMinutes()/15)==Math.floor(a[p-1].DT.getMinutes()/15)||d(),a[p]["Pivot "+i.name]=h.pivotPoint,"fibonacci"==i.inputs.Type.toLowerCase()?("Support ","2 ",a[p]["Resistance 1 "+i.name]=h.pivotPoint+.382*h.hlSpread,a[p]["Resistance 2 "+i.name]=h.pivotPoint+.618*h.hlSpread,a[p]["Resistance 3 "+i.name]=h.pivotPoint+h.hlSpread,a[p]["Support 1 "+i.name]=h.pivotPoint-.382*h.hlSpread,a[p]["Support 2 "+i.name]=h.pivotPoint-.618*h.hlSpread,a[p]["Support 3 "+i.name]=h.pivotPoint-h.hlSpread):("Res","istance 3 ",a[p]["Resistance 1 "+i.name]=2*h.pivotPoint-h.prevLow,a[p]["Resistance 2 "+i.name]=h.pivotPoint+h.hlSpread,a[p]["Resistance 3 "+i.name]=h.prevHigh+2*(h.pivotPoint-h.prevLow),a[p]["Support 1 "+i.name]=2*h.pivotPoint-h.prevHigh,a[p]["Support 2 "+i.name]=h.pivotPoint-h.hlSpread,a[p]["Support 3 "+i.name]=h.prevLow-2*(h.prevHigh-h.pivotPoint)),a[p]["_pointers "+i.name]=e.clone(h))},e.Studies.calculateMFI=function(t,e){var i,a,r,n,s,o;for("_","hist","_","h","igh"," ",i=e.chart.scrubbed,r=0,(n=e.inputs["Scale Factor"])||(n=e.study.inputs["Scale Factor"]),s=Math.pow(10,Number(n)),x.s3k0(),e.startFrom>1&&(r=i[e.startFrom-1]["_high "+e.name]),o=e.startFrom;o<i.length;o++)i[o]&&i[o].Volume&&("_high"," ",i[o][e.name+"_hist"]=a=s*(i[o].High-i[o].Low)/i[o].Volume,i[o]["_high "+e.name]=r=Math.max(r,a));e.outputMap={},e.outputMap[e.name+"_hist"]=""},e.Studies.calculateAlligator=function(t,i){var a,r,n,s,o;if(a={J:Number(i.inputs["Jaw Period"]),T:Number(i.inputs["Teeth Period"]),L:Number(i.inputs["Lips Period"])},(r=i.chart.scrubbed).length<Math.max(a.J,a.T,a.L)+1)i.error=!0;else{("Gator"===i.type||i.inputs["Show Lines"])&&("T","eet","h","Teet","h ","Offs","et","welles"," w","il","der","welles"," w","ild","er",e.Studies.MA("welles wilder",a.J,"hl/2",i.inputs["Jaw Offset"],"Jaw",t,i),e.Studies.MA("welles wilder",a.T,"hl/2",i.inputs["Teeth Offset"],"Teeth",t,i),e.Studies.MA("welles wilder",a.L,"hl/2",i.inputs["Lips Offset"],"Lips",t,i));for(var l=i.startFrom;l<r.length;l++)if(r[l]&&("Gator"==i.type&&("_hist","1","L","ips ",n=r[l]["Jaw "+i.name],s=r[l]["Lips "+i.name],((o=r[l]["Teeth "+i.name])||0===o)&&((n||0===n)&&(x.S0R0(6),r[l][i.name+"_hist1"]=Math.abs(x.y0R0(n,o))),(s||0===s)&&(x.m0R0(6),r[l][i.name+"_hist2"]=-Math.abs(x.y0R0(o,s)))),i.outputMap={},i.outputMap[i.name+"_hist1"]="",i.outputMap[i.name+"_hist2"]=""),i.inputs["Show Fractals"])){if(!(r[l-2]&&r[l-1]&&r[l]&&r[l+1]&&r[l+2]))continue;r[l-2].High&&r[l-1].High&&r[l].High&&r[l+1].High&&r[l+2].High&&r[l].High>r[l-1].High&&r[l].High>r[l-2].High&&r[l].High>r[l+1].High&&r[l].High>r[l+2].High&&(r[l]["Fractal High "+i.name]=1),r[l-2].Low&&r[l-1].Low&&r[l].Low&&r[l+1].Low&&r[l+2].Low&&r[l].Low<r[l-1].Low&&r[l].Low<r[l-2].Low&&r[l].Low<r[l+1].Low&&r[l].Low<r[l+2].Low&&(r[l]["Fractal Low "+i.name]=1)}}},e.Studies.calculateRelativeVigor=function(t,i){var a,r,n,s,o,l,h,c,u=x;if("RelVi","gSignal","Re","l V","i","g ","_","Range ","tr","iangular",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(r=i.startFrom;r<a.length;r++)n=a[r],isNaN(n.Close)||isNaN(n.Open)||(n["_Change "+i.name]=n.Close-n.Open),isNaN(n.High)||isNaN(n.Low)||(n["_Range "+i.name]=n.High-n.Low);for(e.Studies.MA("triangular",4,"_Change "+i.name,0,"_Numer",t,i),e.Studies.MA("triangular",4,"_Range "+i.name,0,"_Denom",t,i),s=[],u.I3k0(),o=[],r=Math.max(i.startFrom-i.days,0);r<a.length&&("_","Denom ",!a[r].futureTick);r++)if(null!==a[r]["_Numer "+i.name]||null!==a[r]["_Denom "+i.name]){for(s.push(a[r]["_Numer "+i.name]),o.push(a[r]["_Denom "+i.name]),s.length>i.days&&(s.shift(),o.shift()),u.m0R0(17),l=u.O0R0("0",1746894400),h=0,c=0;c<s.length;c++)l+=s[c];for(c=0;c<o.length;c++)h+=o[c];0===h&&(h=1e-8),r<i.startFrom||(u.S0R0(7),a[r]["Rel Vig "+i.name]=u.y0R0(h,l))}for(e.Studies.MA("triangular",4,"Rel Vig "+i.name,0,"RelVigSignal",t,i),r=i.startFrom;r<a.length;r++)a[r][i.name+"_hist"]=a[r]["Rel Vig "+i.name]-a[r]["RelVigSignal "+i.name];i.outputMap[i.name+"_hist"]=""}},e.Studies.calculateUlcerIndex=function(t,i){var a,r,n,s;function o(t,e,i){var r;r=null;for(var n=e-t+1;n<=e;n++)n<0||(r=null===r?a[n][i]:Math.max(r,a[n][i]));return r}if((a=i.chart.scrubbed).length<2*i.days-1)i.error=!0;else{for((r=i.inputs.Field)&&"field"!=r||(r="Close"),n=Math.max(i.startFrom,i.days-1);n<a.length;n++)"_P","D2"," ",a[n]["_PD2 "+i.name]=Math.pow(100*(a[n][r]/o(i.days,n,r)-1),2);for(e.Studies.MA("simple",i.days,"_PD2 "+i.name,0,"_MA",t,i),n=Math.max(i.startFrom,2*(i.days-1));n<a.length;n++)"R","esult ",((s=a[n]["_MA "+i.name])||0===s)&&(a[n]["Result "+i.name]=Math.sqrt(s))}},e.Studies.calculateChoppiness=function(t,i){var a,r,n;if(e.Studies.calculateStudyATR(t,i),a=i.chart.scrubbed,x.I3k0(),a.length<i.days+1)i.error=!0;else for(var s=Math.max(i.startFrom,i.days);s<a.length;s++)if("Sum T","rue Range ",r=a[s]){if(r.futureTick)break;n=o(i.days,s),r["Sum True Range "+i.name]?r["Result "+i.name]=100*Math.log(r["Sum True Range "+i.name]/Math.max(1e-6,n[1]-n[0]))/Math.log(i.days):isNaN(r)||(r["Result "+i.name]=0)}function o(t,e){var i,r;i=-1*Number.MAX_VALUE,r=Number.MAX_VALUE;for(var n=e-t+1;n<=e;n++)n<0||(i=Math.max(i,a[n].High),r=Math.min(r,a[n].Low));return[r,i]}},e.Studies.calculateDisparity=function(t,i){var a,r,n;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),e.Studies.MA(i.inputs["Moving Average Type"],i.days,r,0,"_MA",t,i);for(var s=Math.max(i.startFrom,i.days-1);s<a.length;s++)"Re","s","ult"," ","_","M","A"," ",a[s]&&(n=a[s]["_MA "+i.name])&&(a[s]["Result "+i.name]=100*(a[s][r]/n-1))}},e.Studies.calculateRainbow=function(t,i){var a,r,n,s,o,l,h,c,u;function d(t,e){var i,r;i=-1*Number.MAX_VALUE,x.I3k0(),r=Number.MAX_VALUE;for(var n=e-t+1;n<=e;n++)n<0||(i=Math.max(i,a[n].Close),r=Math.min(r,a[n].Close));return[r,i]}if("O","s","c","C","los","e","fi","eld",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),n=r,x.I3k0();for(var p=1;p<=10;p++)"S","M","A","s","imple",e.Studies.MA("simple",i.days,n,0,"SMA"+p,t,i),n="SMA"+p+" "+i.name;for(var m=Math.max(i.startFrom,10);m<a.length;m++)if(a[m]){if(a[m].futureTick)break;for(s=0,o=0,l=-1*Number.MAX_VALUE,h=Number.MAX_VALUE,p=1;p<=10;p++)"S","MA",((c=a[m]["SMA"+p+" "+i.name])||0===c)&&(s+=c,o++,l=Math.max(l,c),h=Math.min(h,c));i.name.indexOf("Osc")>-1&&(u=d(i.inputs["HHV/LLV Lookback"],m),o&&("O","ver ",a[m][i.name+"_hist"]=100*(a[m][r]-s/o)/Math.max(1e-6,u[1]-u[0]),a[m]["Over "+i.name]=100*(l-h)/Math.max(1e-6,u[1]-u[0]),a[m]["Under "+i.name]=-a[m]["Over "+i.name],a[m]["Zero "+i.name]=0))}i.name.indexOf("Osc")>-1&&("_","h","ist","Z","er","o"," ","Neg","ative Bar",i.outputMap={},i.outputMap["Over "+i.name]="Positive Bar",i.outputMap["Under "+i.name]="Negative Bar",i.outputMap["Zero "+i.name]="",i.outputMap[i.name+"_hist"]="")}},e.Studies.calculateKST=function(t,i){var a,r,n,s,o,l,h,c,u=x;for("KSTS",u.s3k0(),"igna","l","H","eavy SMA Period","L","ight SMA Period","Lightest SMA Pe","ri","od","L","ight Rate of Change P","eriod",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),s={},(n={})[1]=Number(i.inputs["Lightest Rate of Change Period"]),n[2]=Number(i.inputs["Light Rate of Change Period"]),n[3]=Number(i.inputs["Heavy Rate of Change Period"]),n[4]=Number(i.inputs["Heaviest Rate of Change Period"]),s[1]=Number(i.inputs["Lightest SMA Period"]),u.m0R0(2),s[u.y0R0(1628787712,"2")]=Number(i.inputs["Light SMA Period"]),s[3]=Number(i.inputs["Heavy SMA Period"]),u.m0R0(0),s[u.y0R0("4",1)]=Number(i.inputs["Heaviest SMA Period"]),o=Number(i.inputs["Signal Period"]),l=i.startFrom;l<a.length;l++)if(a[l])for(h=1;h<=4;h++)"_RO","C",l>=n[h]&&a[l-n[h]]&&a[l-n[h]][r]&&(a[l]["_ROC"+h+" "+i.name]=100*(a[l][r]/a[l-n[h]][r]-1));for(h=1;h<=4;h++)"_","S","MA",e.Studies.MA("simple",s[h],"_ROC"+h+" "+i.name,0,"_SMA"+h,t,i);for(l=i.startFrom;l<a.length;l++)for("K","S","T"," ",a[l]["KST "+i.name]=null,h=1;h<=4;h++)((c=a[l]["_SMA"+h+" "+i.name])||0===c)&&(u.m0R0(0),a[l]["KST "+i.name]+=u.y0R0(h,c));e.Studies.MA("simple",o,"KST "+i.name,0,"KSTSignal",t,i)},e.Studies.calculateSpecialK=function(t,i){var a,r,n,s,o,l,h,c,u,d=x;a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),n=i.inputs.Interval,s=2;for(var p=1;-1703978917!==d.u1y(p.toString(),p.toString().length,55526);p++)n||(n="daily"),o={daily:[10,15,20,30,50,65,75,100,195,265,390,530],weekly:[4,5,6,8,10,13,15,20,39,52,78,104]},s+=2;for(d.s3k0(),-55021925!==d.u1y(s.toString(),s.toString().length,5917)&&(-n&&(n=""),o={daily:[81,79,41,38,96,39,82,580,684,491,209,508],weekly:[3,4,5,0,70,56,64,15,77,73,93,672]}),l={daily:[10,10,10,15,50,65,75,100,130,130,130,195],weekly:[4,5,6,8,10,13,15,20,26,26,26,39]},h=i.startFrom;h<a.length;h++)if(a[h])for(c=0;c<o[n].length;c++)h>=o[n][c]&&a[h-o[n][c]]&&a[h-o[n][c]][r]&&(a[h]["_ROC"+c+" "+i.name]=100*(a[h][r]/a[h-o[n][c]][r]-1));for(c=0;c<l[n].length;c++)"si","mple",e.Studies.MA("daily"==n?"simple":"exponential",l[n][c],"_ROC"+c+" "+i.name,0,"_MA"+c,t,i);for(h=i.startFrom;h<a.length;h++)for("Resul","t ",a[h]["Result "+i.name]=null,c=0;c<l[n].length;c++)"_","MA",((u=a[h]["_MA"+c+" "+i.name])||0===u)&&(d.S0R0(72),a[h]["Result "+i.name]+=d.O0R0("1",c,4,u))},e.Studies.calculateDarvas=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v=x;for(a="A",a+="D",a+="V","*******","********","**","V","olume"," Spike","A","TH L","ook","back Period",r=i.chart.scrubbed,v.m0R0(23),n=v.y0R0(2147483647,"0"),s=parseInt(i.inputs["ATH Lookback Period"],10),v.I3k0(),i.inputs["Volume Spike"]&&("s","i","mple",e.Studies.MA("simple",s,"Volume",0,"ADV",t,i)),o=parseFloat(i.inputs["Volume % of Avg"])/100,l="none",h={},c=null,u=null,d=null,p=parseFloat(i.inputs["Level Offset"]),!1,g={},["Darvas","Ghost","Profit","Loss","ATH",a,"Spike"].forEach((function(t){var e;e=2;for(var a=1;-1744237250!==v.x1y(a.toString(),a.toString().length,52385);a++)g[t]=""*t*i.name,v.m0R0(6),e+=v.O0R0("2",0);2055079419!==v.x1y(e.toString(),e.toString().length,15808)&&(g[t]=t+" "+i.name)})),m=i.startFrom-1;m>0;m--){if(!(f=r[m])[g.Darvas]&&!f[g.Ghost]){n=f[g.ATH]||0,u=f[g.Profit],d=f[g.Loss];break}for(var b in g)f[b]=null}for(;m<r.length;m++)if("Volume Spik","e","P","r","ic","e Minimum",y=r[m]){if(parseFloat(i.inputs["Price Minimum"])<=r[n].Close){if("d","arvas","hi","gh","Exit Fi","el","d",!c||c.End&&m!=c.End+1||(r[m-1].Close>h.High?h={State:1,High:2*h.High-h.Low,Low:h.High,Start:m,End:2*h.End-h.Start+1}:c=null,c&&(y[g.Ghost]=e.clone(h),h.State=0,r[h.End]&&(r[h.End][g.Ghost]=e.clone(h)),c={Start:h.Start,End:h.End},u=h.High+p,(!d||d<h.Low-p)&&(d=h.Low-p))),y[g.Profit]=u,y[g.Loss]=d,(y.Close>=u||"high/low"==i.inputs["Exit Field"]&&y.High>=u)&&(u=null),"none"==l&&m==n+3&&!r[n+2][g.Darvas]&&!r[n+1][g.Darvas]&&!r[n][g.Darvas]&&r[n].High>y.High&&(l="high"),"high"==l&&(y.High>r[n].High?("n","on","e",l="none"):r[m-3].Low<r[m-2].Low&&r[m-3].Low<r[m-1].Low&&r[m-3].Low<y.Low&&("d","a","rvas",h={State:1,High:r[n].High,Low:r[m-3].Low,Start:n},r[n][g.Darvas]=e.clone(h),l="darvas",c&&(c.End>m&&r[c.Start]&&(y[g.Ghost]=e.clone(r[c.Start][g.Ghost]),y[g.Ghost].End=m,r[c.End]&&delete r[c.End][g.Ghost]),y[g.Ghost].State=0,r[c.Start][g.Ghost].End=m,c=null),u=h.High+p,(!d||d<h.Low-p)&&(d=h.Low-p))),"darvas"==l&&("n","on","e",y.Close>h.High||"high/low"==i.inputs["Exit Field"]&&y.High>h.High?c={}:(y.Close<h.Low||"high/low"==i.inputs["Exit Field"]&&y.Low<h.Low)&&(l="none"),c?l="none":"none"==l&&(u=null,d=null),i.inputs["Ghost Boxes"]||(c=null),"none"==l)){for(var S=h.Start+1;S<m;S++)r[S][g.Darvas]=e.clone(h);h.State=0,h.End=m,y[g.Darvas]=e.clone(h),y[g.ATH]=n;continue}d&&("high","/","lo","w","Exit Fi","el","d",(y.Close<h.Low||"high/low"==i.inputs["Exit Field"]&&y.Low<h.Low)&&("high","/lo","w","E","x","i","t Field","non","e","darvas"==l&&(l="none"),(y.Close<d||"high/low"==i.inputs["Exit Field"]&&y.Low<d)&&(u=null,d=null),c&&(c.End>m&&r[c.Start]&&(y[g.Ghost]=e.clone(r[c.Start][g.Ghost]),y[g.Ghost].End=m,r[c.End]&&delete r[c.End][g.Ghost]),y[g.Ghost].State=0,r[c.Start][g.Ghost].End=m,c=null)))}if(y.High>=r[n].High&&(n=m),(m<3||y.High>=r[m-1].High&&y.High>=r[m-2].High&&y.High>=r[m-3].High)&&m-n>=s){"A","ll Ti","me High:",n=m;for(var C=0;C<s&&!(m-C<0);C++)r[m-C].High>r[n].High&&(v.S0R0(6),n=v.y0R0(m,C));0}i.inputs["Volume Spike"]&&m>s&&m==n&&y[g.ADV]*o<y.Volume&&("Volume Sp","ik","e:",y[g.Spike]=1),y[g.ATH]=n}},e.Studies.calculateSupertrend=function(t,i){var a,r,n,s,o,l,h=x;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{e.Studies.calculateStudyATR(t,i);for(var c=i.startFrom;c<a.length;c++)"Tre","n","d ","_Uptr","end ","_Direc","tion ",(r=a[c])&&(n=(r.High+r.Low)/2,s=i.inputs.Multiplier*r["ATR "+i.name],h.m0R0(6),o=h.y0R0(n,s),h.m0R0(1),l=h.O0R0(s,n),c&&("_Down","tr","en","d ","_Up","t","r","end ","_Up","tr","en","d ",a[c-1]&&a[c-1].Close&&a[c-1].Close>a[c-1]["_Uptrend "+i.name]&&a[c-1]["_Uptrend "+i.name]>o&&(h.S0R0(6),o=a[h.y0R0(c,1)]["_Uptrend "+i.name]),a[c-1]&&a[c-1].Close&&a[c-1].Close<a[c-1]["_Downtrend "+i.name]&&a[c-1]["_Downtrend "+i.name]<l&&(h.m0R0(57),l=a[h.y0R0("1",c)]["_Downtrend "+i.name])),r["_Direction "+i.name]=1,c&&("_Direct","ion ","_Di","recti","o","n ","_Direc","ti","on ",h.m0R0(6),r["_Direction "+i.name]=a[h.y0R0(c,1)]["_Direction "+i.name],r.Close>a[c-1]["_Downtrend "+i.name]?r["_Direction "+i.name]=1:r.Close<a[c-1]["_Uptrend "+i.name]&&(r["_Direction "+i.name]=-1)),r["_Uptrend "+i.name]=o,r["_Downtrend "+i.name]=l,r["Trend "+i.name]=r["_Direction "+i.name]>0?o:l);i.outputMap={},h.I3k0(),i.outputMap["Trend "+i.name]=""}},e.Studies.calculatePriceRelative=function(t,i){var a,r,n,s,o,l;if("]","/","[","Compariso","n S","ymbol",a=i.chart.scrubbed,(r=i.inputs["Comparison Symbol"].toUpperCase())||(r=i.study.inputs["Comparison Symbol"]),(n={})[s=(s=t.chart.symbol||"").replace(/[=+\-*\\%]/g,"")]=a.slice(i.startFrom),n[s].length){s!=r&&(n[r]=null),x.s3k0(),x.m0R0(73),o=e.computeEquationChart(x.O0R0("]","[",s,"]/[",r),n),l=0;for(var h=i.startFrom;h<a.length&&l<o.length;h++){for("Res","ult ";l<o.length&&a[h].DT.getTime()>o[l].DT.getTime();)l++;a[h].DT.getTime()<o[l].DT.getTime()||(a[h]["Result "+i.name]=o[l].Close,l++)}}},e.Studies.calculatePerformance=function(t,i){var a,r,n;if("m","a","_MA Ba","se","Clos","e","Comparison S","ymbol","Compari","s","on"," Symbol",a=i.chart.scrubbed,(r=i.inputs["Comparison Symbol"].toUpperCase())||(r=i.study.inputs["Comparison Symbol"]),i.days||(i.days=i.study.inputs.Period),a.length<i.days+1)i.error=!0;else{e.Studies.MA("ma",i.days,"Close",0,"_MA Base",t,i),e.Studies.MA("ma",i.days,r,0,"_MA Comp",t,i);for(var s=i.startFrom;s<a.length;s++)"_MA"," Base ","Re","sult ",(n=a[s][r])&&(n.Close||0===n.Close)&&(n=n.Close),a[s]["Result "+i.name]=a[s].Close/n*(a[s]["_MA Comp "+i.name]/a[s]["_MA Base "+i.name])}},e.Studies.calculateBeta=function(t,i){var a,r,n,s,o=x;if("_","C","OVAR","_MA B","ase","C","omparison"," S","ymbol",a=i.chart.scrubbed,r=i.inputs["Comparison Symbol"].toUpperCase(),o.I3k0(),r||(r=i.study.inputs["Comparison Symbol"]),i.days||(i.days=i.study.inputs.Period),a.length<i.days+1)i.error=!0;else{for(var l=Math.max(i.startFrom,1);l<a.length;l++)"_CompChange"," ",a[l]["_BaseChange "+i.name]=a[l].Close/a[l-1].Close-1,(n=a[l][r])&&(n.Close||0===n.Close)&&(n=n.Close),o.m0R0(6),(s=a[o.y0R0(l,1)][r])&&(s.Close||0===s.Close)&&(s=s.Close),o.m0R0(74),a[l]["_CompChange "+i.name]=o.y0R0(1,s,n);for(e.Studies.MA("ma",i.days,"_BaseChange "+i.name,0,"_MA Base",t,i),e.Studies.MA("ma",i.days,"_CompChange "+i.name,0,"_MA Comp",t,i),l=Math.max(i.startFrom,i.days);l<a.length;l++)"_M","A C","omp ",a[l]["_COVARn "+i.name]=(a[l]["_BaseChange "+i.name]-a[l]["_MA Base "+i.name])*(a[l]["_CompChange "+i.name]-a[l]["_MA Comp "+i.name]),a[l]["_VARn "+i.name]=Math.pow(a[l]["_CompChange "+i.name]-a[l]["_MA Comp "+i.name],2);for(e.Studies.MA("ma",i.days,"_COVARn "+i.name,0,"_COVAR",t,i),e.Studies.MA("ma",i.days,"_VARn "+i.name,0,"_VAR",t,i),l=Math.max(i.startFrom,2*i.days-1);l<a.length;l++)a[l]["Result "+i.name]=a[l]["_COVAR "+i.name]/a[l]["_VAR "+i.name]}},e.Studies.calculateVortex=function(t,i){var a,r,n,s,o,l,h,c,u,d=x;a=i.chart.scrubbed,r=2;for(var p=1;1385148636!==d.u1y(p.toString(),p.toString().length,68907);p++)n=i.days,r+=2;if(-543280341!==d.x1y(r.toString(),r.toString().length,39866)&&(n=i.days),a.length<n+1)i.error=!0;else{s={tr:0,vmPlus:0,vmMinus:0},i.startFrom>1&&(s=e.clone(a[i.startFrom-1]["_totals "+i.name]));for(var m=Math.max(i.startFrom,1);m<a.length;m++)"_","total","s ",o=a[m],d.m0R0(6),l=a[d.O0R0(m,1)],h=Math.abs(o.High-l.Low),c=Math.abs(o.Low-l.High),u=Math.max(o.High,l.Close)-Math.min(o.Low,l.Close),s.tr+=u,s.vmPlus+=h,s.vmMinus+=c,m>n&&("_VM","Min","us"," ",d.S0R0(6),s.tr-=a[d.O0R0(m,n)]["_True Range "+i.name],d.m0R0(6),s.vmPlus-=a[d.O0R0(m,n)]["_VMPlus "+i.name],d.m0R0(6),s.vmMinus-=a[d.y0R0(m,n)]["_VMMinus "+i.name]),o["_True Range "+i.name]=u,o["_VMPlus "+i.name]=h,o["_VMMinus "+i.name]=c,m>=n&&("-","VI ",o["+VI "+i.name]=s.vmPlus/s.tr,o["-VI "+i.name]=s.vmMinus/s.tr),o["_totals "+i.name]=e.clone(s)}},e.Studies.calculateBalanceOfPower=function(t,i){var a,r;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var n=i.startFrom;n<a.length;n++)(r=a[n])["_Ratio "+i.name]=r.Close-r.Open,r.High-r.Low!=0&&(r["_Ratio "+i.name]/=r.High-r.Low);e.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Ratio "+i.name,0,"Result",t,i)}},e.Studies.calculateTrendIntensity=function(t,i){var a,r,n,s,o,l,h,c,u,d=x;a=2;for(var p=1;195448790!==d.x1y(p.toString(),p.toString().length,7815);p++)r=i.chart.scrubbed,a+=2;if(-545733058!==d.x1y(a.toString(),a.toString().length,7515)&&(r=i.chart.scrubbed),r.length<i.days+1)i.error=!0;else{for((n=i.inputs.Field)&&"field"!=n||(n="Close"),e.Studies.MA("ma",i.days,n,0,"_SMA",t,i),s=0,o=0,c=[],u=Math.ceil(i.days/2),l=Math.max(0,i.startFrom-u);l<r.length;l++)"T","II ","_","SM","A ","_SM","A"," ",(r[l]["_SMA "+i.name]||0===r[l]["_SMA "+i.name])&&((h=r[l][n]-r[l]["_SMA "+i.name])<0?(d.m0R0(76),o+=d.O0R0("1",2147483647,h)):s+=h,c.push(h),c.length>u&&((h=c.shift())<0?(d.m0R0(77),o-=d.y0R0(h,"1")):s-=h),l<i.startFrom||(r[l]["TII "+i.name]=(m=s,g=o,Math.abs(g)<1e-8?100:(d.m0R0(75),d.O0R0(g,100,100,m,1)))));var m,g;e.Studies.MA("ema",i.inputs["Signal Period"],"TII "+i.name,0,"Signal",t,i)}},e.Studies.calculateZigZag=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y=x;if("L","o","w",(i=e.chart.scrubbed)&&i.length){a=e.highLowChart,r=null,n=null,s=e.inputs["Distance(%)"],o=0,l=0,h=0,c=null,u=null,d=0;for(var v=Math.min(i.length-1,e.startFrom);v>=0;v--)if(d=v,i[v]["_state "+e.name]){r=(p=i[v]["_state "+e.name])[0],n=p[1],o=p[2],l=p[3],h=p[4],c=p[5],u=p[6];break}for(var b=d;b<i.length;b++){if("Cl","o","s","e","H","i","g","h",m=i[b][a?"High":"Close"],g=i[b][a?"Low":"Close"],null===n||n<m)if(n=m,o<0&&(r=g),y.m0R0(78),c=y.O0R0(s,100,1,n),o>-1){if(null!==u&&n>u){i[l]["Result "+e.name]=i[l][a?"Low":"Close"],S(h,l),o=-1,r=g,h=l,l=b;continue}}else l=b;if(null===r||r>g)if(r=g,o>0&&(n=m),y.S0R0(79),u=y.y0R0(s,1,100,r),o<1){if(null!==c&&r<c){i[l]["Result "+e.name]=i[l][a?"High":"Close"],S(h,l),o=1,n=m,h=l,l=b;continue}}else l=b}for(i[l]["Result "+e.name]=i[l][a?1==o?"Low":"High":"Close"],i[l]["_state "+e.name]=[r,n,o,l,h,c,u],S(h,l),y.I3k0(),f=i.length-1;f>l;){if(i[f].Close||0===i[f].Close){i[f]["Result "+e.name]=i[f][a?1==o?"High":"Low":"Close"];break}f--}S(l,f)}function S(t,a){y.I3k0();for(var r=t+1;r<a;r++)"R","es","u","lt ","Resul","t"," ",i[r]["ShadowResult "+e.name]=(i[a]["Result "+e.name]-i[t]["Result "+e.name])*(r-t)/(a-t)+i[t]["Result "+e.name],delete i[r]["Result "+e.name]}},e.Studies.calculatePsychologicalLine=function(t,e){var i,a,r,n,s;if((i=e.chart.scrubbed).length<e.days+1)e.error=!0;else{a=[],r=100/e.days,n=0;for(var o=Math.max(e.startFrom-e.days,1);o<i.length&&("Re","sul","t ",!i[o].futureTick);o++)(s=Number(i[o].Close>i[o-1].Close))&&(n+=r),a.push(s),a.length>e.days&&(n-=a.shift()*r),o<e.startFrom||isNaN(i[o].Close)||(i[o]["Result "+e.name]=n)}},e.Studies.calculateMADev=function(t,i){var a,r,n,s,o,l,h,c,u,d=x;if("_","M","A",(a=i.chart.scrubbed).length<i.days+1){i.error=!0,d.m0R0(0),r=d.O0R0("2133875953",1),1227263300,2;for(var p=1;d.u1y(p.toString(),p.toString().length,42908)!==r;p++)return;if(1227263300!==d.u1y(2..toString(),2..toString().length,24684))return}(n=i.inputs.Field)&&"field"!=n||(n="Close"),(s=i.inputs["Points Or Percent"])||(s="Points"),(o=i.inputs["Moving Average Type"])||(o="exponential"),e.Studies.MA(o,i.days,n,0,"_MA",t,i),l=i.name+"_hist";for(var m=Math.max(i.startFrom,i.days-1);m<a.length;m++)(c=(h=a[m])[n])&&"object"==v(c)&&(c=c[i.subField]),((u=h["_MA "+i.name])||0===u)&&("Points"==s?(d.m0R0(6),h[l]=d.O0R0(c,u)):(d.S0R0(80),h[l]=d.O0R0(u,100,"1",c)));i.outputMap={},i.outputMap[i.name+"_hist"]=""},e.Studies.calculateShinohara=function(t,i){var a,r;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{r={weakNum:0,weakDen:0,strongNum:0,strongDen:0},x.I3k0(),i.startFrom>1&&(r=e.clone(a[i.startFrom-1]["_accums "+i.name]));for(var n=i.startFrom;n<a.length;n++)"_a","c","cums ",r.weakNum+=a[n].High-a[n].Close,r.weakDen+=a[n].Close-a[n].Low,n>0&&(r.strongNum+=a[n].High-a[n-1].Close,r.strongDen+=a[n-1].Close-a[n].Low),n>=i.days&&(r.weakNum-=a[n-i.days].High-a[n-i.days].Close,r.weakDen-=a[n-i.days].Close-a[n-i.days].Low,a[n]["Weak Ratio "+i.name]=100*r.weakNum/r.weakDen,n>i.days&&("St","rong"," Ratio"," ",r.strongNum-=a[n-i.days].High-a[n-i.days-1].Close,r.strongDen-=a[n-i.days-1].Close-a[n-i.days].Low,a[n]["Strong Ratio "+i.name]=100*r.strongNum/r.strongDen)),a[n]["_accums "+i.name]=e.clone(r)}},e.Studies.calculateAccumulationDistribution=function(t,e){var i,a,r,n,s;i=e.chart.scrubbed,x.I3k0();for(var o=e.startFrom;o<i.length;o++)if("Use V","olume",o){if((a=i[o]).futureTick)break;x.m0R0(6),r=i[x.y0R0(o,1)],n=0,a.Close>r.Close?n=a.Close-Math.min(a.Low,r.Close):a.Close<r.Close&&(n=a.Close-Math.max(a.High,r.Close)),e.inputs["Use Volume"]&&(n*=a.Volume),(s=r["Result "+e.name])||(s=0),s+=n,isNaN(a.Close)||(a["Result "+e.name]=s)}},e.Studies.calculateADX=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v=x;if("Smoothing Per","iod",e.Studies.calculateStudyATR(t,i),a=i.chart.scrubbed,r=i.days,(n=parseInt(i.inputs["Smoothing Period"],10))||0===n||(n=r),a.length<i.days+1){1452843330,1435242945,s=2;for(var b=1;1452843330!==v.u1y(b.toString(),b.toString().length,22794);b++)i.error=!1,s+=2;return 1435242945!==v.x1y(s.toString(),s.toString().length,72664)&&(i.error=!0),void(i.error=!0)}o=0,l=0,h=0,c=0;for(var S=Math.max(1,i.startFrom);S<a.length;S++)if("+","D","I"," ",u=a[S],d=Math.max(0,u.High-a[S-1].High),v.S0R0(10),d>(p=Math.max(v.y0R0("0",0),a[S-1].Low-u.Low))?p=0:d=p>d?0:p=0,S<=r?(l+=d,h+=p,o+=u["True Range "+i.name]):("Tr","ue Range ",l=a[S-1]["_sm+DM "+i.name]*(r-1)/r+d,h=a[S-1]["_sm-DM "+i.name]*(r-1)/r+p,o=a[S-1]["_smTR "+i.name]*(r-1)/r+u["True Range "+i.name]),u["_sm+DM "+i.name]=l,u["_sm-DM "+i.name]=h,u["_smTR "+i.name]=o,!(S<r)){if(v.m0R0(26),m=v.O0R0(o,100,l),v.S0R0(26),g=v.y0R0(o,100,h),f=100*Math.abs(m-g)/(m+g),u["+DI "+i.name]=m,u["-DI "+i.name]=g,!1!==i.inputs.Series&&n)if(S<r+n-1){if(S==i.startFrom)for(var C=r;C<i.startFrom;C++)"+D","I"," ",c+=100*Math.abs(a[C]["+DI "+i.name]-a[C]["-DI "+i.name])/(a[C]["+DI "+i.name]+a[C]["-DI "+i.name]);c+=f}else S==r+n-1?(v.m0R0(7),u["ADX "+i.name]=v.O0R0(n,c)):u["ADX "+i.name]=(a[S-1]["ADX "+i.name]*(n-1)+f)/n;if(i.inputs.Histogram){if("_h","i","s","t",y=i.name+"_hist",!u["+DI "+i.name]&&0!==u["+DI "+i.name])continue;if(!u["-DI "+i.name]&&0!==u["-DI "+i.name])continue;u[y]=u["+DI "+i.name]-u["-DI "+i.name],!1===i.inputs.Series&&("+","D","I"," ",u["+DI "+i.name]=null,u["-DI "+i.name]=null),i.outputMap[y]=""}}},e.Studies.calculateAroon=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p;if((i=e.chart.scrubbed).length<e.days+1)e.error=!0;else{x.m0R0(10),a=x.O0R0("0",0),r=0,n=null,s=null,e.startFrom>0&&("_","state ",(o=i[e.startFrom-1]["_state "+e.name])&&(a=o[0],r=o[1],n=o[2],s=o[3]));for(var m=e.startFrom;m<i.length&&("_st","a","te ",!(h=i[m]).futureTick);m++){if(null===n&&(n=h.High),null===s&&(s=h.Low),(n=Math.max(n,h.High))==h.High)a=0;else if(++a>e.days)for(n=h.High,a=0,l=1;l<=e.days;l++)(n=Math.max(n,i[m-l].High))==i[m-l].High&&(a=l);if((s=Math.min(s,h.Low))==h.Low)r=0;else if(++r>e.days)for(s=h.Low,r=0,l=1;l<=e.days;l++)(s=Math.min(s,i[m-l].Low))==i[m-l].Low&&(r=l);c=!isNaN(h.High),u=!isNaN(h.Low),d=100*(1-a/e.days),c&&(h["Aroon Up "+e.name]=d),p=100*(1-r/e.days),u&&(h["Aroon Down "+e.name]=p),c&&u&&(h["Aroon Oscillator "+e.name]=h["Aroon Up "+e.name]-h["Aroon Down "+e.name]),h["_state "+e.name]=[a,r,n,s]}}},e.Studies.calculateBollinger=function(t,i){var a;(a=i.inputs.Field)&&"field"!=a||(a="Close"),e.Studies.MA(i.inputs["Moving Average Type"],i.days,a,0,"_MA",t,i),i.std=new e.Studies.StudyDescriptor(i.name,"STD Dev",i.panel),i.std.chart=i.chart,i.std.startFrom=i.startFrom,i.std.days=i.days,i.std.inputs={Field:a,"Standard Deviations":1,Type:i.inputs["Moving Average Type"]},x.I3k0(),i.std.outputs={"_STD Dev":null},e.Studies.calculateStandardDeviation(t,i.std),e.Studies.calculateGenericEnvelope(t,i,i.inputs["Standard Deviations"],"_MA "+i.name,"_STD Dev "+i.name),"Boll %b"==i.type&&(i.zoneOutput="%b")},e.Studies.calculateCCI=function(t,i){var a,r,n;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{e.Studies.MA("simple",i.days,"hlc/3",0,"MA",t,i);for(var s=Math.max(i.startFrom,i.days-1);s<a.length;s++)if("MA"," ","Re","su","lt ",r=a[s]){n=0;for(var o=0;o<i.days;o++)"h","l","c/3",n+=Math.abs(a[s-o]["hlc/3"]-r["MA "+i.name]);n/=i.days,Math.abs(n)<1e-8?r["Result "+i.name]=0:r["Result "+i.name]=(r["hlc/3"]-r["MA "+i.name])/(.015*n)}}},e.Studies.calculateCenterOfGravity=function(t,e){var i,a,r,n,s,o,l=x;l.S0R0(0),i=l.O0R0("2",1);for(var h=1;1543134765!==l.x1y(h.toString(),h.toString().length,33176);h++)a=e.chart.scrubbed,i+=2;if(1768483442!==l.x1y(i.toString(),i.toString().length,88970)&&(a=e.chart.scrubbed),a.length<e.days)e.error=!0;else{(r=e.inputs.Field)&&"field"!=r||(r="Close");for(var c=Math.max(e.startFrom,e.days-1);c<a.length;c++){n=0,s=0;for(var u=0;u<e.days;u++)l.m0R0(6),o=a[l.y0R0(c,u)][r],l.m0R0(81),n-=l.O0R0(u,o,1),s+=o;s&&(l.S0R0(7),a[c]["Result "+e.name]=l.O0R0(s,n))}}},e.Studies.calculateChaikinMoneyFlow=function(t,e){var i,a,r,n;if((i=e.chart.scrubbed).length<e.days)e.error=!0;else{a=0,r=0,(n=i[e.startFrom-1])&&("_s","u","m","MF ",n["_sumMF "+e.name]&&(a=n["_sumMF "+e.name]),n["_sumV "+e.name]&&(r=n["_sumV "+e.name]));for(var s=e.startFrom;s<i.length;s++)"_M","FV"," ",i[s].High==i[s].Low?i[s]["_MFV "+e.name]=0:i[s]["_MFV "+e.name]=i[s].Volume*(2*i[s].Close-i[s].High-i[s].Low)/(i[s].High-i[s].Low),a+=i[s]["_MFV "+e.name],r+=i[s].Volume,s>e.days-1&&(a-=i[s-e.days]["_MFV "+e.name],(r-=i[s-e.days].Volume)&&(x.S0R0(7),i[s]["Result "+e.name]=x.O0R0(r,a))),i[s]["_sumMF "+e.name]=a,i[s]["_sumV "+e.name]=r}},e.Studies.calculateChaikinVolatility=function(t,i){var a,r,n;if("R","ate ","Of Cha","nge","_Hig","h","-Low"," ",(a=i.chart.scrubbed).length<i.days)i.error=!0;else{for(r=i.startFrom;r<a.length&&!a[r].futureTick;r++)a[r]["_High-Low "+i.name]=a[r].High-a[r].Low;for(e.Studies.MA(i.inputs["Moving Average Type"],i.days,"_High-Low "+i.name,0,"_MA",t,i),x.s3k0(),(n=i.inputs["Rate Of Change"])||(n=i.days),r=Math.max(i.startFrom,n);r<a.length;r++)if(a[r-n]["_MA "+i.name]){if(a[r].futureTick)break;a[r]["Result "+i.name]=100*(a[r]["_MA "+i.name]/a[r-n]["_MA "+i.name]-1)}}},e.Studies.calculateChandeForecast=function(t,i){var a,r,n;if("t","ime"," ","series",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),e.Studies.MA("time series",i.days,r,0,"MA",t,i);for(var s=Math.max(1,i.startFrom);s<a.length;s++)"M","A ",(n=a[s][r])&&"object"==v(n)&&(n=n[i.subField]),a[s]["Result "+i.name]=100*(1-a[s]["MA "+i.name]/n)}},e.Studies.calculateCoppock=function(t,i){var a,r,n,s,o,l,h;if(a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=parseInt(i.inputs["Long RoC"],10))||(n=14),(s=parseInt(i.inputs["Short RoC"],10))||(s=11),(o=i.days)||(o=10),!(n<s))if(a.length<Math.max(s,n,o)+1)i.error=!0;else{for(var c=Math.max(i.startFrom,n);c<a.length;c++)x.S0R0(6),l=a[x.y0R0(c,s)][r],x.m0R0(6),h=a[x.y0R0(c,n)][r],l&&h&&(a[c]["_Sum "+i.name]=100*(a[c][r]/l+a[c][r]/h-2));e.Studies.MA("weighted",o,"_Sum "+i.name,0,"Result",t,i)}},e.Studies.calculateDetrendedPrice=function(t,i){var a,r,n,s,o;if("Mov","ing Average Type",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),n=Math.floor(i.days/2+1),e.Studies.MA(i.inputs["Moving Average Type"],i.days,r,-n,"MA",t,i);for(var l=Math.max(i.days-n-1,i.startFrom-n);l<a.length-n;l++)"MA"," ",(s=a[l][r])&&"object"==v(s)&&(s=s[i.subField]),o=a[l]["MA "+i.name],!s&&0!==s||!o&&0!==o||(x.m0R0(6),a[l]["Result "+i.name]=x.y0R0(s,o))}},e.Studies.calculateEaseOfMovement=function(t,i){var a,r,n,s,o,l;if("Movin","g Average Type",(a=i.chart.scrubbed).length<i.days)i.error=!0;else{for(var h=Math.max(1,i.startFrom);h<a.length;h++)"_","EO","M1 ",r=(a[h].High+a[h].Low)/2,n=(a[h-1].High+a[h-1].Low)/2,x.m0R0(6),s=x.y0R0(r,n),o=a[h].Volume/1e8/(a[h].High-a[h].Low),x.m0R0(7),l=x.O0R0(o,s),isFinite(l)?a[h]["_EOM1 "+i.name]=l:a[h]["_EOM1 "+i.name]=NaN;e.Studies.MA(i.inputs["Moving Average Type"],i.days,"_EOM1 "+i.name,0,"Result",t,i)}},e.Studies.calculateElderRay=function(t,i){var a;if("Cl","os","e",(a=i.chart.scrubbed).length<i.days)i.error=!0;else{e.Studies.MA("exponential",i.days,"Close",0,"_EMA",t,i);for(var r=Math.max(i.startFrom,i.days-1);r<a.length;r++)"_","E","M","A ","_","EMA"," ","_h","ist1",a[r][i.name+"_hist1"]=a[r].High-a[r]["_EMA "+i.name],a[r][i.name+"_hist2"]=a[r].Low-a[r]["_EMA "+i.name];i.outputMap={},i.outputMap[i.name+"_hist1"]="",i.outputMap[i.name+"_hist2"]=""}},e.Studies.calculateElderForce=function(t,i){var a;if("Re","sult","_E","F","1 ","e","xponent","ia","l",a=i.chart.scrubbed,x.I3k0(),a.length<i.days)i.error=!0;else{for(var r=Math.max(1,i.startFrom);r<a.length;r++)a[r]["_EF1 "+i.name]=a[r].Volume*(a[r].Close-a[r-1].Close);e.Studies.MA("exponential",i.days,"_EF1 "+i.name,0,"Result",t,i)}},e.Studies.calculateEhlerFisher=function(t,e){var i,a,r,n,s;function o(t,e){var a,r,n,s;a=Number.MAX_VALUE,r=-1*Number.MAX_VALUE;for(var o=e-t+1;o<=e;o++)n=(i[o].High+i[o].Low)/2,a=Math.min(a,n),r=Math.max(r,n);x.S0R0(6),s=x.y0R0("2",0);for(var l=1;1554926802!==x.x1y(l.toString(),l.toString().length,35373);l++)return[a,r];if(-963482390!==x.u1y(s.toString(),s.toString().length,37578))return[a,r]}if((i=e.chart.scrubbed).length<e.days+1)e.error=!0;else{a=0,e.startFrom>1&&(a=i[e.startFrom-1]["_n "+e.name]);for(var l=e.startFrom;l<i.length&&!(r=i[l]).futureTick;l++)l<e.days-1?("E","F"," ",r["EF "+e.name]=r["EF Trigger "+e.name]=a):(n=o(e.days,l),(a=.66*(((i[l].High+i[l].Low)/2-n[0])/Math.max(1e-6,n[1]-n[0])-.5)+.67*a)>0?(x.m0R0(0),a=Math.min(a,x.O0R0("0.9999",1))):a<0&&(a=Math.max(a,-.9999)),s=l?i[l-1]["EF "+e.name]:0,r["EF "+e.name]=.5*Math.log((1+a)/(1-a))+.5*s,r["EF Trigger "+e.name]=s,r["_n "+e.name]=a)}},e.Studies.calculateFractalChaos=function(t,e){var i,a,r,n,s,o,l;x.I3k0(),i=e.chart.scrubbed,a=0,r=0,n=0,e.startFrom&&"Fractal Chaos Bands"==e.type&&(a=i[e.startFrom-1]["Fractal High "+e.name],r=i[e.startFrom-1]["Fractal Low "+e.name]);for(var h=Math.max(4,e.startFrom);h<i.length&&("Resu","lt ",!i[h].futureTick);h++){for(s=!isNaN(i[h].High),o=!isNaN(i[h].Low),(s||o)&&(i[h]["Result "+e.name]=0),n=0,l=0;l<=h&&i[h-l]&&!(i[h-l].High>i[h-2].High)&&!(l<2&&i[h-l].High==i[h-2].High);l++)if(i[h-l].High<i[h-2].High&&n++,4==n){a=i[h-2].High;break}for("Fractal Chaos Bands"==e.type?("F","ra","ctal H","igh ",s&&(i[h]["Fractal High "+e.name]=a>0?a:null)):4==n&&(i[h]["Result "+e.name]=1),n=0,l=0;l<=h&&i[h-l]&&!(i[h-l].Low<i[h-2].Low)&&!(l<2&&i[h-l].Low==i[h-2].Low);l++)if(i[h-l].Low>i[h-2].Low&&n++,4==n){r=i[h-2].Low;break}"Fractal Chaos Bands"==e.type?o&&(i[h]["Fractal Low "+e.name]=r>0?r:null):4==n&&("Result"," ",i[h]["Result "+e.name]=-1)}},e.Studies.calculateGenericEnvelope=function(t,e,i,a,r,n){var s,o,l,h,c,u,d,p=x;i||(i=0),n||(n=0),a&&"field"!=a||(a="Close"),r||(r=a),s=e.chart.scrubbed,(o=e.inputs.Field)&&"field"!==o||(o="Close");for(var m=e.startFrom;s&&m<s.length;m++)"%b"," "," Med","ian ","obj","ect","ob","ject","ob","j","ec","t",(l=s[m])&&l[a]&&((h=l[o])&&"object"==v(h)&&(h=h.Close),(c=l[a])&&"object"==v(c)&&(c=c[e.subField]),(u=l[r])&&"object"==v(u)&&(u=u[e.subField]),p.S0R0(47),d=p.O0R0(i,u,n),p.S0R0(1),l[e.type+" Top "+e.name]=p.y0R0(d,c),p.m0R0(6),l[e.type+" Bottom "+e.name]=p.O0R0(c,d),l[e.type+" Median "+e.name]=c,l["Bandwidth "+e.name]=c?200*d/c:0,p.S0R0(82),l["%b "+e.name]=p.O0R0(h,50,1,c,d))},e.Studies.calculateHistoricalVolatility=function(t,e){var i,a,r,n,s,o,l,h,c,u;if((i=e.chart.scrubbed).length<e.days+1)e.error=!0;else{(a=e.inputs.Field)&&"field"!=a||(a="Close"),r=e.inputs["Standard Deviations"],-1044616001,-1726347047,n=2;for(var d=1;-1044616001!==x.x1y(d.toString(),d.toString().length,75046);d++)r>1&&(r=9),s=(653+Math.sqrt(g(e.inputs[""])))/r,o=[],n+=2;-1726347047!==x.x1y(n.toString(),n.toString().length,42368)&&(r<=2&&(r=2),s=537%Math.sqrt(g(e.inputs[""]))*r,o=[]),r<0&&(r=1),s=100*Math.sqrt(g(e.inputs["Days Per Year"]))*r,o=[],l=0,e.startFrom>1&&("_s","tat","e ","_","sta","t","e ",l=i[e.startFrom-1]["_state "+e.name][0],o=i[e.startFrom-1]["_state "+e.name][1].slice());for(var p=Math.max(1,e.startFrom);p<i.length;p++){if(x.m0R0(6),(h=i[x.y0R0(p,1)][a])&&(c=Math.log(i[p][a]/h),o.push(c),l+=c,p>=e.days)){u=0,l/=e.days;for(var m=0;m<o.length;m++)u+=Math.pow(o[m]-l,2);l*=e.days,l-=o.shift(),i[p]["Result "+e.name]=Math.sqrt(u/e.days)*s}i[p]["_state "+e.name]=[l,o.slice()]}}function g(e){return x.I3k0(),"m","o","n","th",isNaN(e)&&(e=365),"day"==t.layout.interval?e:"week"==t.layout.interval?(x.m0R0(2),x.y0R0(631549440,"52")):"month"==t.layout.interval?12:e}},e.Studies.calculateIchimoku=function(t,e){var i,a,r,n,s,o,l,h;for("Base"," Line Peri","od",i=e.chart.scrubbed,a={Base:Number(e.inputs["Base Line Period"]),Conv:Number(e.inputs["Conversion Line Period"]),LeadB:Number(e.inputs["Leading Span B Period"]),Lag:Number(e.inputs["Lagging Span Period"])},r=e.startFrom;r<i.length;r++)i[r]&&(n=c(a.Conv,r),i[r]["Conversion Line "+e.name]=(n[1]+n[0])/2,n=c(a.Base,r),i[r]["Base Line "+e.name]=(n[1]+n[0])/2,r<a.Lag||(i[r-a.Lag]["Lagging Span "+e.name]=i[r].Close));for(s=[],r=Math.max(0,e.startFrom-a.Base);r<i.length;r++)"C","onversi","on Line ",n=c(a.LeadB,r),o=(i[r]["Conversion Line "+e.name]+i[r]["Base Line "+e.name])/2,l=(n[1]+n[0])/2,i[r+a.Base]?(i[r+a.Base]["Leading Span A "+e.name]=o,i[r+a.Base]["Leading Span B "+e.name]=l):("Lea","di","ng Span B ",(h={})["Leading Span A "+e.name]=o,h["Leading Span B "+e.name]=l,s.push(h));function c(t,e){var a,r;a=Number.MAX_VALUE,r=-1*Number.MAX_VALUE,x.s3k0();for(var n=e-t+1;n<=e;n++)n<0||(a=Math.min(a,i[n].Low),r=Math.max(r,i[n].High));return[a,r]}x.s3k0(),e.appendFutureTicks(t,s)},e.Studies.calculateKlinger=function(t,i){var a,r,n,s,o,l,h,c,u,d,p;if("exp","onential","_E","MA-L","expon","entia",x.s3k0(),"l","_","E","MA-","L ","K","l","inger ","_","h","i","st","L","o","ng Cy","cle","S","ho","rt ","Cycle",a=i.chart.scrubbed,r=Number(i.inputs["Short Cycle"]),n=Number(i.inputs["Long Cycle"]),a.length<Math.max(r,n)+1)i.error=!0;else{for(s=i.name+"_hist",o="Klinger "+i.name,l="KlingerSignal "+i.name,h="_SV "+i.name,c="_EMA-S "+i.name,u="_EMA-L "+i.name,d=Math.max(1,i.startFrom);d<a.length;d++)p=a[d].Volume,a[d]["hlc/3"]<a[d-1]["hlc/3"]&&(p*=-1),p&&(a[d][h]=p);for(e.Studies.MA("exponential",r,h,0,"_EMA-S",t,i),x.m0R0(17),e.Studies.MA("exponential",n,h,x.O0R0("0",1536655936),"_EMA-L",t,i),d=Math.max(n,i.startFrom);d<a.length&&(!a[d].futureTick&&null!==a[d][c]&&null!==a[d][u]);d++)a[d][o]=a[d][c]-a[d][u];for(e.Studies.MA("exponential",Number(i.inputs["Signal Periods"]),o,0,"KlingerSignal",t,i),d=i.startFrom;d<a.length;d++)a[d][s]=a[d][o]-a[d][l];i.outputMap[s]=""}},e.Studies.calculateKeltner=function(t,i){e.Studies.MA(i.inputs["Moving Average Type"],i.days,"Close",0,"MA",t,i),e.Studies.calculateStudyATR(t,i),e.Studies.calculateGenericEnvelope(t,i,i.inputs.Shift,"MA "+i.name,"ATR "+i.name)},e.Studies.calculateMACD=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m=x;if("Signal MA Typ","e","Clo","se","f","ield","Fast MA Per","i","od",a=i.chart.scrubbed,r=i.inputs,n=i.name,i.macd1Days||(i.macd1Days=parseFloat(r["Fast MA Period"])),i.macd2Days||(i.macd2Days=parseFloat(r["Slow MA Period"])),i.signalDays||(i.signalDays=parseFloat(r["Signal Period"])),i.days||(i.days=Math.max(i.macd1Days,i.macd2Days,i.signalDays)),a.length<i.days+1)i.error=!0;else{for((s=i.inputs.Field)&&"field"!=s||(s="Close"),(o=r["Moving Average Type"])||(o="exponential"),e.Studies.MA(o,i.macd1Days,s,0,"_MACD1",t,i),e.Studies.MA(o,i.macd2Days,s,0,"_MACD2",t,i),l=c=Math.max(i.startFrom,i.days-1);l<a.length;l++)"_MACD","1 ","M","A","C","D ","_MA","CD1"," ",!(h=a[l])["_MACD1 "+n]&&0!==h["_MACD1 "+n]||!h["_MACD2 "+n]&&0!==h["_MACD2 "+n]||(m.S0R0(1),h[m.O0R0(n,"MACD ")]=h["_MACD1 "+n]-h["_MACD2 "+n]);for((u=r["Signal MA Type"])||(u="exponential"),e.Studies.MA(u,i.signalDays,"MACD "+n,0,"Signal",t,i),m.S0R0(1),d=m.y0R0("_hist",n),l=c;l<a.length;l++)h=a[l],m.S0R0(1),((p=h[m.y0R0(n,"Signal ")])||0===p)&&(h[d]=h["MACD "+n]-h["Signal "+n]);i.outputMap[d]=""}},e.Studies.calculateMAEnvelope=function(t,i){var a,r,n;(a=i.inputs.Field)&&"field"!=a||(a="Close"),e.Studies.MA(i.inputs["Moving Average Type"],i.days,a,0,"MA",t,i),r=i.inputs["Shift Type"],n=i.inputs.Shift,x.I3k0(),r||("Shift"," Pe","rce","ntage",r="percent",n=i.inputs["Shift Percentage"]),"percent"==r?("M","A"," ",x.m0R0(7),e.Studies.calculateGenericEnvelope(t,i,x.y0R0(100,n),"MA "+i.name)):"points"==r&&e.Studies.calculateGenericEnvelope(t,i,null,"MA "+i.name,null,Number(n))},e.Studies.calculateMassIndex=function(t,i){var a,r;if("_t","o","tal ","_E","M","A"," ","_H","igh","-Low"," ",(a=i.chart.scrubbed).length<Math.max(9,i.days+1))i.error=!0;else{for(var n=i.startFrom;n<a.length;n++)a[n]["_High-Low "+i.name]=a[n].High-a[n].Low;x.S0R0(23),x.s3k0(),e.Studies.MA("exponential",x.y0R0(2147483647,"9"),"_High-Low "+i.name,0,"_EMA",t,i),e.Studies.MA("exponential",9,"_EMA "+i.name,0,"_EMA2",t,i),r=0,a[i.startFrom-1]&&a[i.startFrom-1]["_total "+i.name]&&(r=a[i.startFrom-1]["_total "+i.name]);for(var s=Math.max(17,i.startFrom);s<a.length;s++)"_","E","MA2 ",r+=a[s]["_EMA "+i.name]/a[s]["_EMA2 "+i.name],s>=17+i.days-1&&(a[s]["Result "+i.name]=r,r-=a[s-i.days+1]["_EMA "+i.name]/a[s-i.days+1]["_EMA2 "+i.name]),a[s]["_total "+i.name]=r}},e.Studies.calculateMaxHighMinLow=function(t,e){var i,a,r,n,s,o,l,h,c=x;if(c.s3k0(),i=e.chart.scrubbed,a=e.days,r=e.days,e.inputs["High Period"]&&(a=e.inputs["High Period"]),e.inputs["Low Period"]&&(r=e.inputs["Low Period"]),i.length<Math.max(a,r)+1)e.error=!0;else{-1388369868,39451332,n=2;for(var u=1;-1388369868!==c.u1y(u.toString(),u.toString().length,77684);u++)s=Number.MAX_VALUE,o=Number.MAX_VALUE-!1,n+=2;if(39451332!==c.x1y(n.toString(),n.toString().length,36637)&&(s=Number.MAX_VALUE,o=Number.MAX_VALUE/-1),s=Number.MAX_VALUE,o=-1*Number.MAX_VALUE,e.startFrom>1){for(l=1;l<a;l++)o=Math.max(o,i[e.startFrom-l].High);for(l=1;l<r;l++)s=Math.min(s,i[e.startFrom-l].Low)}for(var d=Math.max(0,e.startFrom-1);d<i.length;d++){if("D","onchian Width","L","LV",o=Math.max(o,i[d].High),s=Math.min(s,i[d].Low),d>=a&&i[d-a].High==o)for(o=i[d].High,l=1;l<a;l++)o=Math.max(o,i[d-l].High);if(d>=r&&i[d-r].Low==s)for(s=i[d].Low,l=1;l<r;l++)s=Math.min(s,i[d-l].Low);if(h=0,"HHV"==e.type)h=o;else if("LLV"==e.type)h=s;else if("Donchian Width"==e.type)c.m0R0(6),h=c.O0R0(o,s);else if("GAPO"==e.type||"Gopala"==e.type)h=Math.log(o-s)/Math.log(r);else{if("VT HZ Filter"==e.type){"_MH","M","L"," ",c.S0R0(6),h=c.y0R0(o,s),i[d]["_MHML "+e.name]=h;continue}if("Williams %R"==e.type){"Res","ul","t ",h=-100*(o-i[d].Close)/(o-s),i[d]["Result "+e.name]=h;continue}}if(d==i.length-1)break;i[d+1].futureTick||("Donchi","an"," Ch","annel","Donchian Channel"==e.type?("Donchi","an Median ","Donchian H","igh"," ",c.m0R0(1),i[c.y0R0(1,d)]["Donchian High "+e.name]=o,c.m0R0(1),i[c.y0R0(1,d)]["Donchian Low "+e.name]=s,c.S0R0(1),i[c.y0R0(1,d)]["Donchian Median "+e.name]=c.y0R0(s,o,2,c.m0R0(3))):("R","esult ",c.S0R0(1),i[c.O0R0(1,d)]["Result "+e.name]=h))}}},e.Studies.calculateMoneyFlowIndex=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p=x;if("Resu","lt ","_","c","umMF ",(i=e.chart.scrubbed).length<e.days+1)e.error=!0;else{a=0,r=0,n=i[e.startFrom-1],s="_rawMF "+e.name,o="_cumMF "+e.name,l="Result "+e.name,n&&n[o]&&(p.S0R0(0),a=n[o][p.y0R0("0",1)],p.S0R0(23),r=n[o][p.y0R0(2147483647,"1")]);for(var m=e.startFrom;m<i.length;m++)h=i[m]["hlc/3"],m>0&&!i[m].futureTick&&("hlc","/","3",p.m0R0(6),c=i[p.O0R0(m,1)]["hlc/3"],u=h*i[m].Volume,h>c?a+=u:h<c?(p.m0R0(14),r-=u*=-p.O0R0("1",0)):u=0,m>e.days&&((d=i[m-e.days][s])>0?a-=d:r+=d,0===r?i[m][l]=100:i[m].Volume&&(p.S0R0(75),i[m][l]=p.y0R0(r,100,100,a,1))),i[m][s]=u,i[m][o]=[a,r])}},e.Studies.calculateOnBalanceVolume=function(t,e){var i,a,r,n,s,o,l,h,c=x;(i=e.inputs.Field)&&"field"!=i||(i="Close"),r=!1,(a=e.inputs["Min Tick Value"])||0===a||(r=!0,a=0),n=e.chart.scrubbed,s=0;for(var u=e.startFrom;u<n.length;u++)o=n[u],u&&o[i]&&(n[u-1][i]&&(c.m0R0(6),l=n[c.y0R0(u,1)]),l&&(o[i]-l[i]>a?s=1:l[i]-o[i]>a?(c.m0R0(0),s=-c.y0R0("1",1)):r&&(s=0),(h=l["Result "+e.name])||(c.m0R0(17),h=c.O0R0("0",733743936)),h+=o.Volume*s,o["Result "+e.name]=h))},e.Studies.calculatePrettyGoodOscillator=function(t,i){var a;if("_","SM","A","Cl","o","s","e","_","EMA","expo","nential",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{e.Studies.MA("exponential",i.days,"trueRange",0,"_EMA",t,i),e.Studies.MA("simple",i.days,"Close",0,"_SMA",t,i);for(var r=Math.max(1,i.startFrom);r<a.length;r++)"_","E","MA"," ","Res","ul","t ",a[r]["_SMA "+i.name]&&a[r]["_EMA "+i.name]&&(a[r]["Result "+i.name]=(a[r].Close-a[r]["_SMA "+i.name])/a[r]["_EMA "+i.name])}},e.Studies.calculatePriceOscillator=function(t,i){var a,r,n,s,o,l,h,c,u,d=x;if("_L","o","ng ","MA","_Sh","ort M","A","C","los",d.s3k0(),"e","fie","ld","Shor","t"," Cycle",a=i.chart.scrubbed,r=Number(i.inputs["Short Cycle"]),n=Number(i.inputs["Long Cycle"]),a.length<Math.max(r,n)+1)i.error=!0;else{s=i.inputs.Field,(o=i.inputs["Moving Average Type"])||(o="simple"),s&&"field"!=s||(s="Close"),i.parameters.isVolume&&("ex","ponenti","al",s="Volume",o="exponential"),(l=i.inputs["Points Or Percent"])||(l="Percent"),e.Studies.MA(o,r,s,0,"_Short MA",t,i),e.Studies.MA(o,n,s,0,"_Long MA",t,i);for(var p=Math.max(n,i.startFrom);p<a.length;p++)"_S","hor","t MA"," ",(h=a[p])&&(c=h["_Short MA "+i.name],u=h["_Long MA "+i.name],!c&&0!==c||!u&&0!==u||("R","e","sult ","Po","in","t","s","Points"==l?(d.S0R0(6),h["Result "+i.name]=d.O0R0(c,u)):(d.S0R0(80),h["Result "+i.name]=d.y0R0(u,100,"1",c)),i.outputs["Increasing Bar"]&&("_his","t",h[i.name+"_hist"]=h["Result "+i.name],i.outputMap={},i.outputMap[i.name+"_hist"]="")))}},e.Studies.calculatePriceVolumeTrend=function(t,e){var i,a,r;(i=e.inputs.Field)&&"field"!=i||(i="Close"),a=e.chart.scrubbed,r=0,e.startFrom>1&&(r=a[e.startFrom-1]["Result "+e.name]);for(var n=Math.max(1,e.startFrom);n<a.length;n++)"Resu","lt"," ",a[n][i]&&a[n-1][i]&&(r+=a[n].Volume*(a[n][i]-a[n-1][i])/a[n-1][i],a[n]["Result "+e.name]=r)},e.Studies.calculatePrimeNumber=function(t,e){var i,a,r,n,s,o,l,h,c=x;i=[],a=e.chart.scrubbed;for(var u=e.startFrom;u<a.length;u++)if(r=a[u]){if(n=r.High,!isNaN(n)){for(var d=0;n>0&&n<=10;d++)n*=10;for(m(n)&&(n+=2),(n=Math.ceil(n))%2==0&&n++;!m(n);)n+=2;n/=Math.pow(10,d)}if(s=r.Low,!isNaN(s)){for(var p=0;s>0&&s<=10;p++)c.m0R0(14),s*=c.O0R0("10",0);if(m(s)&&(s-=2),(s=Math.floor(s))%2==0&&s--,s>0){for(;!m(s);)s-=2;c.m0R0(14),s/=Math.pow(c.y0R0("10",0),p)}}"Prime Number Bands"==e.type?(isNaN(n)||(r["Prime Bands Top "+e.name]=n),isNaN(s)||(c.m0R0(10),r["Prime Bands Bottom "+e.name]=Math.max(c.O0R0("0",0),s))):("R","esul","t ","T","olerance P","erc","entage",o=0,l=e.inputs["Tolerance Percentage"]*(n-s)/100,(h=n+s-2*r.Close)<l?o=1:h>l&&(o=-1),o&&(r["Result "+e.name]=o))}function m(t){var e;if(t<=0)return!1;if(t!=Math.floor(t))return!1;if(!0===i[t]||!1===i[t])return i[t];e=parseInt(Math.sqrt(t),10);for(var a=2;a<=e;a++)if(t%a==0)return i[t]=!1,!1;return i[t]=!0,!0}},e.Studies.calculatePSAR=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p=x;i=e.chart.scrubbed,a=0,r=null,n=!1,s=0,o=parseFloat(e.inputs["Minimum AF"]),l=parseFloat(e.inputs["Maximum AF"]),e.startFrom>0&&("Resul","t ",s=i[e.startFrom-1]["Result "+e.name],(h=i[e.startFrom-1]["_state "+e.name])&&3==h.length&&(a=h[0],r=h[1],n=h[2]));for(var m=e.startFrom-1;m<i.length-1;m++)if(!(m<0)){if(i[m].futureTick)break;c=s,n?((!r||r<i[m].High)&&(r=i[m].High,p.S0R0(1),a=Math.min(p.y0R0(o,a),l)),p.S0R0(83),s=p.y0R0(r,a,c,c),u=Math.min(i[Math.max(1,m)-1].Low,i[m].Low),s>i[m+1].Low?(s=r,g()):s>u&&(s=u)):((!r||r>i[m].Low)&&(r=i[m].Low,p.m0R0(1),a=Math.min(p.O0R0(o,a),l)),p.S0R0(83),s=p.y0R0(r,a,c,c),d=Math.max(i[Math.max(1,m)-1].High,i[m].High),s<i[m+1].High?(s=r,g()):s<d&&(s=d)),p.m0R0(1),i[p.O0R0(1,m)]["_state "+e.name]=[a,r,n],isNaN(i[m].High)&&isNaN(i[m].Low)||(p.S0R0(84),i[p.O0R0(2147483647,"1",m)]["Result "+e.name]=s)}function g(){a=0,r=null,n=!n}p.s3k0()},e.Studies.calculateQStick=function(t,i){var a;if("R","esu","l","t",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var r=i.startFrom;r<a.length;r++)"_Cl","ose-Ope","n ",a[r]["_Close-Open "+i.name]=a[r].Close-a[r].Open;e.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Close-Open "+i.name,0,"Result",t,i)}},e.Studies.calculateRandomWalk=function(t,e){var i,a,r,n,s,o,l,h,c;if((i=e.chart.scrubbed).length<e.days+1)e.error=!0;else for(var u=Math.max(2,e.startFrom);u<i.length;u++){a=0,r=i[u].High,n=i[u].Low,s=0,o=0;for(var d=1;d<=e.days&&!i[u].futureTick;d++){if(u<=d){s=o=0;break}(l=(a+=i[u-d].trueRange)/d*Math.sqrt(d))&&(h=(r-i[u-d].Low)/l,c=(i[u-d].High-n)/l,s=Math.max(s,h),o=Math.max(o,c))}i[u].futureTick||isNaN(r)&&isNaN(n)||("Rando","m Walk Low ",i[u]["Random Walk High "+e.name]=s,i[u]["Random Walk Low "+e.name]=o)}},e.Studies.calculateSchaff=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g;if("Moving Average ","Type",a=i.chart.scrubbed,r=i.days,n=Number(i.inputs["Short Cycle"]),s=Number(i.inputs["Long Cycle"]),a.length<Math.max(r,n,s)+1)i.error=!0;else{o=i.inputs.Field,x.s3k0(),o&&"field"!=o||(o="Close"),.5,e.Studies.MA(i.inputs["Moving Average Type"],n,o,0,"_MACD1",t,i),e.Studies.MA(i.inputs["Moving Average Type"],s,o,0,"_MACD2",t,i),l=0,h=0;for(var f=i.startFrom;f<a.length;f++)"_","P","F","_","MA","C","D","_","MACD ",c=a[f],f<s-1||(u=c["_MACD1 "+i.name],d=c["_MACD2 "+i.name],(u||0===u||d||0===d)&&(x.S0R0(6),c["_MACD "+i.name]=x.y0R0(u,d)),p=c["_MACD "+i.name],f<s+(r-1)||(l=(m=y(r,f,"_MACD"))[1]>m[0]?100*(p-m[0])/(m[1]-m[0]):l,(p||0===p)&&("_","P","F ",c["_PF "+i.name]=a[f-1]["_PF "+i.name]?a[f-1]["_PF "+i.name]+.5*(l-a[f-1]["_PF "+i.name]):l),g=c["_PF "+i.name],f<s+2*(r-1)||(h=(m=y(r,f,"_PF"))[1]>m[0]?100*(g-m[0])/(m[1]-m[0]):h,(g||0===g)&&("Result"," ","R","esult ",c["Result "+i.name]=a[f-1]["Result "+i.name]?a[f-1]["Result "+i.name]+.5*(h-a[f-1]["Result "+i.name]):h))))}function y(t,e,r){var n,s,o;n=null,s=null;for(var l=e-t+1;l<=e;l++)(o=a[l][r+" "+i.name])&&(n=null===n?o:Math.min(n,o),s=null===s?o:Math.max(s,o));return[n,s]}},e.Studies.calculateStochastics=function(t,i){var a,r,n,s,o,l;if("%","K"," ","%","K","si","m","p","le","S","low","F","a","s","t","%D Peri","ods","%K"," Smoothing"," Periods","C","lose","fi","e",x.I3k0(),"l","d",i.smooth||(i.smooth=i.inputs.Smooth),(a=i.inputs.Field)&&"field"!=a||(a="Close"),(r=i.inputs["%K Periods"])||(r=i.days),(n=i.chart.scrubbed).length<Math.max(r,i.days)+1){-184844507,1150987974,s=2;for(var h=1;-184844507!==x.x1y(h.toString(),h.toString().length,60093);h++)i.error=!1,s+=2;1150987974!==x.u1y(s.toString(),s.toString().length,40952)&&(i.error=!0)}else{(o=i.inputs["%K Smoothing Periods"])?i.smooth=!0:i.smooth&&(o=3),(l=i.inputs["%D Periods"])||(l=3),i.outputMap={},i.outputMap["%K "+i.name]="Fast",i.outputMap["%D "+i.name]="Slow";for(var c=Math.max(r,i.startFrom);c<n.length;c++)null!==u(c,a,r)&&(n[c][i.name]=u(c,a,r));e.Studies.MA("simple",i.smooth?o:1,i.name,0,"%K",t,i),e.Studies.MA("simple",l,"%K "+i.name,0,"%D",t,i)}function u(t,e,i){var a,r,s,o,l;x.S0R0(8),a=x.y0R0(1,i,t),r=-1*Number.MAX_VALUE,s=Number.MAX_VALUE;for(var h=a;h<=t;h++)"C","l","os","e","C","lose",o=n[h]["Close"==e?"Low":e],l=n[h]["Close"==e?"High":e],(o||0===o)&&(l||0===l)&&(s=Math.min(s,o),r=Math.max(r,l));return r==-1*Number.MAX_VALUE||s==Number.MAX_VALUE?null:r==s?0:(n[t][e]-s)/(r-s)*100}},e.Studies.calculateStochMomentum=function(t,i){var a,r,n,s,o,l,h,c;function u(t,e){var i,a;i=null,a=null;for(var r=e-t+1;r<=e;r++)i=null===i?o[r].Low:Math.min(i,o[r].Low),a=null===a?o[r].High:Math.max(a,o[r].High);return[i,a]}if("%D Moving ","Average Type","_D","HL1 ","_","H","S","1 ","expone","nt","ial","_","H","S1","%K Doub","le Smoo","thing Pe","riods","%K Smoo","thing Periods",a=Number(i.inputs["%K Periods"]),r=Number(i.inputs["%K Smoothing Periods"]),n=Number(i.inputs["%K Double Smoothing Periods"]),s=Number(i.inputs["%D Periods"]),(o=i.chart.scrubbed).length<a+r+n-1||o.length<s)i.error=!0;else{for(l=Math.max(a,i.startFrom)-1;l<o.length;l++)h=o[l],c=u(a,l),h["_H "+i.name]=h.Close-(c[0]+c[1])/2,h["_DHL "+i.name]=c[1]-c[0];for(e.Studies.MA("exponential",r,"_H "+i.name,0,"_HS1",t,i),e.Studies.MA("exponential",n,"_HS1 "+i.name,0,"_HS2",t,i),e.Studies.MA("exponential",r,"_DHL "+i.name,0,"_DHL1",t,i),e.Studies.MA("exponential",n,"_DHL1 "+i.name,0,"_DHL2",t,i),l=a-1;l<o.length;l++)o[l]["%K "+i.name]=o[l]["_HS2 "+i.name]/(.5*o[l]["_DHL2 "+i.name])*100;e.Studies.MA(i.inputs["%D Moving Average Type"],s,"%K "+i.name,0,"%D",t,i),i.zoneOutput="%K"}},e.Studies.calculateSwingIndex=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p=x;(null===(i=e.inputs["Limit Move Value"])||isNaN(i))&&(i=99999),p.I3k0(),a=e.chart.scrubbed,r=0,e.startFrom>1&&(r=a[e.startFrom-1]["Result "+e.name]);for(var m=Math.max(1,e.startFrom);m<a.length;m++)"Re","sul","t"," ",n=Math.abs(a[m].High-a[m-1].Close),s=Math.abs(a[m].Low-a[m-1].Close),o=Math.abs(a[m].High-a[m].Low),l=Math.abs(a[m-1].Close-a[m-1].Open),h=Math.max(n,s),c=Math.max(o,h),p.m0R0(12),u=p.y0R0(c,.25,l),c==n?(p.m0R0(0),u-=p.y0R0(.5,s)):c==s&&(p.S0R0(0),u-=p.y0R0(.5,n)),d=50*(a[m].Close-a[m-1].Close+.5*(a[m].Close-a[m].Open)+.25*(a[m-1].Close-a[m-1].Open))/u*(h/i),0!==u&&0!==i||(d=0),"Swing"==e.type&&(r=0),r+=d,a[m]["Result "+e.name]=r},e.Studies.calculateTRIX=function(t,i){var a,r,n,s,o,l,h=x;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{r=i.name,h.S0R0(1),n=["Close",h.O0R0(r,"_MA1 "),h.O0R0(r,"_MA2 "),h.y0R0(r,"_MA3 ")];for(var c=0;c<n.length-1;c++)"_M","A","expo","nential",e.Studies.MA("exponential",i.days,n[c],0,"_MA"+(c+1).toString(),t,i);s=n[3];for(var u=Math.max(1,i.startFrom);u<a.length;u++)h.m0R0(85),(o=a[h.y0R0(u,"1",2147483647)][s])&&((l=a[u][s])||0===l)&&(h.S0R0(1),a[u][h.O0R0(r,"Result ")]=h.y0R0(o,100,"1",l,h.m0R0(80)))}},e.Studies.calculateTwiggsMoneyFlow=function(t,e){var i,a,r,n,s,o,l=x;if((i=e.chart.scrubbed).length<e.days)e.error=!0;else{l.s3k0(),a=0,l.S0R0(0),r=l.y0R0("0",1),(n=i[e.startFrom-1])&&("_s","u","mV"," ","_su","m","V"," ","_sum","M","F ",n["_sumMF "+e.name]&&(a=n["_sumMF "+e.name]),n["_sumV "+e.name]&&(r=n["_sumV "+e.name]));for(var h=Math.max(1,e.startFrom);h<i.length;h++)"_","sum","V"," ",s=Math.max(i[h-1].Close,i[h].High),o=Math.min(i[h-1].Close,i[h].Low),i[h]["_MFV "+e.name]=i[h].Volume*(2*i[h].Close-s-o)/(s-o==0?999999:s-o),h>e.days-1&&(a*=(e.days-1)/e.days,r*=(e.days-1)/e.days),a+=i[h]["_MFV "+e.name],r+=i[h].Volume,h>e.days-1&&r&&(l.m0R0(7),i[h]["Result "+e.name]=l.y0R0(r>0?r:999999,a)),i[h]["_sumMF "+e.name]=a,i[h]["_sumV "+e.name]=r}},e.Studies.calculateUltimateOscillator=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v=x;if("C","yc","le 2",i=e.chart.scrubbed,a=[e.inputs["Cycle 1"],e.inputs["Cycle 2"],e.inputs["Cycle 3"]],r=Math.max(a[0],a[1],a[2]),i.length<r+1)e.error=!0;else{n=a[0]*a[1],s=a[0]*a[2],o=a[1]*a[2],l=[0,0,0],v.m0R0(0),h=[v.O0R0("0",1),0,0],e.startFrom&&(i[e.startFrom-1]["_accbp "+e.name]&&(l=i[e.startFrom-1]["_accbp "+e.name].slice()),i[e.startFrom-1]["_acctr "+e.name]&&(h=i[e.startFrom-1]["_acctr "+e.name].slice()));for(var b=Math.max(1,e.startFrom);b<i.length;b++){c=Math.min(i[b].Low,i[b-1].Close),u=i[b].Close-c,d=Math.max(i[b].High,i[b-1].Close)-c;for(var S=0;S<a.length;S++)l[S]+=u,h[S]+=d,b>a[S]&&(p=Math.min(i[b-a[S]].Low,i[b-a[S]-1].Close),m=i[b-a[S]].Close-p,g=Math.max(i[b-a[S]].High,i[b-a[S]-1].Close)-p,l[S]-=m,h[S]-=g);i[b]["_accbp "+e.name]=l.slice(),i[b]["_acctr "+e.name]=h.slice(),b<r||(f=o*l[0]/h[0]+s*l[1]/h[1]+n*l[2]/h[2],v.m0R0(48),y=v.O0R0(s,o,n),v.S0R0(26),i[b]["Result "+e.name]=v.y0R0(y,100,f))}}},e.Studies.calculateVerticalHorizontalFilter=function(t,i){var a,r,n,s;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{i.mhml=new e.Studies.StudyDescriptor(i.name,i.type,i.panel),i.mhml.chart=i.chart,i.mhml.days=i.days,i.mhml.startFrom=i.startFrom,i.mhml.inputs={},i.mhml.outputs={_MHML:null},e.Studies.calculateMaxHighMinLow(t,i.mhml),r=0,n=[];for(var o=Math.max(1,i.startFrom-i.days);o<a.length;o++)s=Math.abs(a[o].Close-a[o-1].Close),n.push(s),r+=s,n.length==i.days&&(a[o]["Result "+i.name]=a[o]["_MHML "+i.name]/r,r-=n.shift())}},e.Studies.calculateVolumeIndex=function(t,i){var a,r,n,s,o,l,h,c=x;if("Ind","e","x"," ","fi","e","l","d",(a=i.inputs.Field)&&"field"!=a||(a="Close"),(r=i.chart.scrubbed).length<i.days+1)i.error=!0;else{c.s3k0(),n=100,i.startFrom>1&&(n=r[i.startFrom-1]["Index "+i.name]);for(var u=Math.max(1,i.startFrom);u<r.length;u++)"ob","je","c","t",s=r[u][a],o=r[u].Volume,s&&"object"==v(s)&&(o=s.Volume,s=s[i.subField]),c.m0R0(6),l=r[c.y0R0(u,1)][a],h=r[u-1].Volume,l&&"object"==v(l)&&(h=l.Volume,l=l[i.subField]),s&&l&&(("Pos Vol"==i.type&&o>h||"Neg Vol"==i.type&&o<h)&&(c.m0R0(7),n*=c.O0R0(l,s)),r[u]["Index "+i.name]=n);e.Studies.MA(i.inputs["Moving Average Type"],i.days,"Index "+i.name,0,"MA",t,i)}},e.Studies.validateProjectedVolumeLookback=function(t,e){var i=t.layout,a=i.interval,r=i.periodicity,n=e.inputs["Lookback Days"];return x.m0R0(86),x.s3k0(),x.O0R0(a,r,10,n)},e.Studies.calculateProjectedVolume=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,f,y,v,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E,O,I,N,H,V,z,B,W,j,Y,U,q,Q,G,X,Z,J,K=x;function $(e){return K.s3k0(),"scr","ub","be","d",t.dateFromTick(e,null,!0,"scrubbed")}function tt(e){return K.s3k0(),"scru","bbed",t.tickFromDate(e,null,null,!0,"scrubbed")}a="he",a+="i",a+="kina",a+="shi";var et=t.layout,it=et.interval,at=et.timeUnit,rt=et.aggregationType,nt=t.chart,st=nt.symbol,ot=nt.scroll,lt=nt.scrubbed,ht=nt.market;r="PAV"===i.type;var ct=i.inputs,ut=ct["Lookback Days"],dt=g(ct["Anchor Time"].split(":"),3),pt=dt[0],mt=dt[1],gt=dt[2],ft=void 0===gt?0:gt;if(n=i.study?i.study.name:i.type,e.ChartEngine.isDailyInterval(it))i.error="".concat(n," is Intraday Only");else if("tick"===at){-946128533,1277551130,K.m0R0(14),s=K.O0R0("2",0);for(var yt=1;-946128533!==K.u1y(yt.toString(),yt.toString().length,26384);yt++)i.error="Tick mode not supported for ".concat(n),s+=2;1277551130!==K.u1y(s.toString(),s.toString().length,76921)&&(i.error="Tick mode not supported for ".concat(n)),i.error="Tick mode not supported for ".concat(n)}else if("minute"!==at)i.error="Sub-minute periodicities not supported for ".concat(n);else if(rt&&["ohlc",a].includes(rt))e.Studies.validateProjectedVolumeLookback(t,i)||(i.error="Selected lookback/periodicity combo not supported for ".concat(n));else{-906026166,-1057547127,o=2;for(var vt=1;-906026166!==K.u1y(vt.toString(),vt.toString().length,15747);vt++)i.error="Aggregation type not supported for ".concat(n),o+=2;-1057547127!==K.u1y(o.toString(),o.toString().length,85802)&&(i.error="Aggregation type not supported for ".concat(n))}if(!i.error){if(l=e.Market.Symbology.isForexSymbol(st),h=e.Market.Symbology.isForexMetal(st),c=i.getDependents(t),u=0,d=[],c.forEach((function(t){var e,i=t.inputs,a=t.outputMap;i.Period&&(u=Math.max(parseInt(i.Period),u),(e=d).push.apply(e,m(Object.keys(a))))})),i.dependentsOutputMap=d,f=Ht(lt.length-1,!0),y=Math.ceil(lt.length-1-ot),K.S0R0(6),v=Ht(K.O0R0(y,u)),p=!l&&i.startFrom>v&&lt[v]&&void 0!==lt[v]["V "+i.name]&&d.every((function(t){return K.I3k0(),![void 0,null].includes(lt[v][t])}))&&!1!==f?f:v,b=zt($(v),ut),C=((S=Ht(0,!0))||0===S)&&tt(zt(lt[S].DT,ut,!0)),lt[0].DT>b){if(!t.quoteDriver)return i.error="Not enough data to calculate ".concat(n);if(t.quoteDriver.extendHistoricalData({from:b}),!(C>0))return;p=C}if(!(p<0||p>lt.length-1)){if(w=lt.length-i.startFrom==1&&i.cachedFutureTicks&&i.cachedLastProjection&&+i.cachedLastProjection.DT==+lt[lt.length-1].DT&&lt[p]["PV "+i.name])lt[lt.length-1]["PV "+i.name]=i.cachedLastProjection.projectedValue,i.appendFutureTicks(t,i.cachedFutureTicks),p=i.startFrom;else{i.cachedFutureTicks=null,i.cachedLastProjection=null,T=[f],k=[];for(var xt=0;xt<ut;xt++)D=Ht(T[0]-1),T.unshift(D);for(;T[ut]>=p;){if(A=T.pop(),!lt[A])return Nt(A);var bt=Vt(lt[A].DT),St=bt.hours,Ct=bt.minutes;if(P=void 0,M=ht.getClose(lt[A].DT)){for(F=ht.getNextClose(lt[A].DT);M.getDate()===F.getDate();)M=F,F=ht.getNextClose(F);0===(P=Vt(M)).hours&&(P.hours=24)}else P={hours:24,minutes:0};_=T.slice();for(var wt=0;wt<_.length;wt++){if(R=_[wt],!lt[R])return Nt(R);var Tt=Vt(lt[R].DT),kt=Tt.hours,Dt=Tt.minutes;if(kt<St||kt===St&&Dt<Ct)do{R++;var At=Vt(lt[R].DT);kt=At.hours,Dt=At.minutes}while(kt!==St||Dt!==Ct);_[wt]=R}for(;St<P.hours||St===P.hours&&Ct<P.minutes;){L=!1,E=void 0,O=void 0,I=0,N=0;for(var Mt=0;Mt<_.length;Mt++)if(null!==(H=_[Mt])){if(!(V=lt[H]))return Nt(H);var Pt=Vt(V.DT),Ft=Pt.hours,_t=Pt.minutes;if(z=V.DT.getDate(),Ft===St&&_t===Ct)if(I+=V.Volume,N++,_[Mt]++,lt[_[Mt]].DT.getDate()!==z)_[Mt]=null;else if(!L){var Rt=Vt(lt[_[Mt]].DT);E=Rt.hours,O=Rt.minutes,L=!0}}if(St=E,Ct=O,0===N)break;K.S0R0(7),B=K.y0R0(N,I),lt[A]?lt[A]["PV "+i.name]=B:("P","V ",k.push((Lt={},Et="PV "+i.name,Ot=B,Et in Lt?Object.defineProperty(Lt,Et,{value:Ot,enumerable:!0,configurable:!0,writable:!0}):Lt[Et]=Ot,Lt))),A++}T.unshift(Ht(T[0]-1))}i.cachedLastProjection={DT:lt[lt.length-1].DT,projectedValue:lt[lt.length-1]["PV "+i.name]},i.cachedFutureTicks=k,i.appendFutureTicks(t,k)}var Lt,Et,Ot;if(W=null,j=0,Y=0,w&&r)for(;p>0;){if("V"," ",K.m0R0(6),(q=lt[K.O0R0(p,1)]["V "+i.name])||0===q){j=q;break}p--}for(var It=p;It<lt.length;It++)if(G=(Q=lt[It]).Volume,X=Q["PV "+i.name],Q.futureTick||(U=It),null===W&&(W=e.Studies.getMarketOffset(t,lt[It].DT,l),l&&(K.m0R0(87),W+=K.y0R0(1e3,"60",0,h?6:7,"60",1))),Z=new Date(Q.DT.getTime()+W),lt[It-1]&&lt[It-1].DT&&new Date(lt[It-1].DT.getTime()+W).getDate()!==Z.getDate()&&t.chart.market.isMarketDate(Z)&&(W=null,K.S0R0(14),j=K.O0R0("0",0),Y=0),(J=new Date(Z)).setHours(pt,mt,ft),Z<J)"PV"," ",Q["V "+i.name]=0,Q["PV "+i.name]=0;else if(r?(j+=G,Y+=X):(j=G,Y=X),Q["V "+i.name]=j,w||(Q["PV "+i.name]=Y),[NaN,null,void 0].includes(j)&&!Q.futureTick)return void(i.error="".concat(n," requires volume"));i.cachedLastProjection.projectedValue=lt[U]["PV "+i.name],i.outputMap={},i.outputMap["V "+i.name]="",i.outputMap["PV "+i.name]="Average Line",c.forEach((function(e){K.s3k0(),e.startFrom=p,e.study.calculateFN(t,e)}))}}function Nt(t){console.error("Expected data for ".concat($(t).toDateString()," but found none. This may be caused by gaps in your data or an improperly configured market definition."))}function Ht(i,a){var r,n,s,o,h;return r=$(i),n=ht.getOpen(r)||((o=r).setHours(0),o.setMinutes(0),h=e.Studies.getMarketOffset(t,o,l),new Date(o.getTime()+h)),K.I3k0(),s=tt(n),a?(s<0&&(s=tt(zt(n,1,!0))),!(s>=lt.length)&&s):s}function Vt(t){return K.I3k0(),{hours:t.getHours(),minutes:t.getMinutes()}}function zt(t,e,i){for(K.I3k0();e;)t=new Date(new Date(t).setDate(t.getDate()+(i?1:-1))),ht.isMarketDate(t)&&e--;return t}},e.Studies.displayIchimoku=function(t,i,a){var r,n,s,o,l,h,c;r="Leading Span A "+i.name,n="Leading Span B "+i.name,s=e.Studies.determineColor(i.outputs[i.outputMap[r]]),o=e.Studies.determineColor(i.outputs[i.outputMap[n]]),l=t.panels[i.panel],h=i.getYAxis(t),c={topBand:r,bottomBand:n,topColor:s,bottomColor:o,skipTransform:l.name!=i.chart.name,topAxis:h,bottomAxis:h,opacity:.3},!i.highlight&&t.highlightedDraggable&&(c.opacity*=.3),e.fillIntersecting(t,i.panel,c),e.Studies.displaySeriesAsLine(t,i,a)},e.Studies.displayDarvas=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E,O=x;if("au","t","o",(r=e.Studies.determineColor(i.outputs.Levels))&&"auto"!=r&&!e.isTransparent(r)||(r=t.defaultColor),(n=e.Studies.determineColor(i.outputs.Darvas))&&"auto"!=n&&!e.isTransparent(n)||(n=t.defaultColor),(s=e.Studies.determineColor(i.outputs.Ghost))&&"auto"!=s&&!e.isTransparent(s)||(s=t.defaultColor),o=t.panels[i.panel],l=i.getContext(t),(d=t.layout.candleWidth-2)<2&&(d=1),t.startClip(i.panel),i.inputs["Stop Levels"]){for(l.setLineDash&&(O.S0R0(17),l.setLineDash([2,O.y0R0("2",876405920)])),l.lineWidth=2,l.strokeStyle=r,l.beginPath(),h=0;h<a.length;h++)"Lo","s","s ","Lo","ss"," ","Loss"," ",c=a[h],O.m0R0(6),p=a[O.O0R0(h,1)],c&&(u=c["Loss "+i.name]?Math.floor(t.pixelFromPrice(c["Loss "+i.name],o)):null,m=p&&p["Loss "+i.name]?Math.floor(t.pixelFromPrice(p["Loss "+i.name],o)):null,u&&(c.candleWidth&&(d=Math.floor(Math.max(1,c.candleWidth))),g=Math.floor(t.pixelFromBar(h,o.chart)+d/2),f=Math.floor(t.pixelFromBar(h,o.chart)-d/2),m&&m>=u?l.lineTo(f,u):0===h?l.moveTo(t.chart.left,u):l.moveTo(f,u),l.lineTo(g,u)));l.stroke(),l.setLineDash&&l.setLineDash([]),l.lineWidth=1}for(O.S0R0(2),y=-O.y0R0(494940512,"10"),b=0,C=-10,T=0,D=!1,A=!1,M=l.measureText("▲").width/2,P=0,h=0;h<a.length;h++)"Gh","ost B","oxe","s","Gh","o","st"," ",a[h]&&((a[h].Close||0===a[h].Close)&&(P=h),a[h]["Spike "+i.name]&&(l.fillStyle=n,l.textBaseline="bottom",F=t.pixelFromPrice(a[h].High,t.chart.panel),l.fillText("▼",t.pixelFromBar(h)-M,F-5)),a[h].candleWidth&&(d=Math.floor(Math.max(1,a[h].candleWidth))),a[h]["Darvas "+i.name]&&("D","arvas ",1!=(c=a[h]["Darvas "+i.name]).State||D?0===c.State&&(b=Math.floor(t.pixelFromBar(h,o.chart)+d/2)-y,v=Math.floor(t.pixelFromPrice(c.High,o)),S=Math.floor(t.pixelFromPrice(c.Low,o))-v,l.strokeStyle=n,l.fillStyle=n,i.inputs["Stop Levels"]?l.globalAlpha=.3:(l.strokeRect(y,v,b,S),l.globalAlpha=.2),l.fillRect(y,v,b,S),l.globalAlpha=1,D=!1):(y=Math.floor(t.pixelFromBar(h,o.chart)-d/2),v=Math.floor(t.pixelFromPrice(c.High,o)),S=Math.floor(t.pixelFromPrice(c.Low,o))-v,D=!0)),a[h]["Ghost "+i.name]&&i.inputs["Ghost Boxes"]&&(1!=(c=a[h]["Ghost "+i.name]).State||A?0===c.State&&("Stop"," ","Level","s",c.Start==c.End&&(C=Math.floor(t.pixelFromBar(h,o.chart)-d/2)),T=Math.floor(t.pixelFromBar(h,o.chart)+d/2)-C,w=Math.floor(t.pixelFromPrice(c.High,o)),k=Math.floor(t.pixelFromPrice(c.Low,o))-w,l.strokeStyle=s,l.fillStyle=s,i.inputs["Stop Levels"]?(O.S0R0(0),l.globalAlpha=O.O0R0("0.3",1)):(l.strokeRect(C,w,T,k),O.m0R0(0),l.globalAlpha=O.O0R0("0.2",1)),l.fillRect(C,w,T,k),l.globalAlpha=1,A=!1):(C=Math.floor(t.pixelFromBar(h,o.chart)-d/2),w=Math.floor(t.pixelFromPrice(c.High,o)),T=Math.floor((c.End-c.Start+1)*t.layout.candleWidth+d/2),k=Math.floor(t.pixelFromPrice(c.Low,o))-w,A=!0)));if(D){if(b=Math.floor(t.pixelFromBar(P,o.chart)+d/2)-y,l.strokeStyle=n,l.fillStyle=n,i.inputs["Stop Levels"]){-1822636790,O.m0R0(10),_=O.O0R0("113463264",113444864),O.S0R0(10),R=O.y0R0("2",2);for(var I=1;-1822636790!==O.u1y(I.toString(),I.toString().length,5413);I++)l.globalAlpha=.3,R+=2;O.x1y(R.toString(),R.toString().length,71138)!==_&&(l.globalAlpha=654)}else l.beginPath(),O.S0R0(12),l.moveTo(O.y0R0(y,2,b),v),l.lineTo(y,v),O.S0R0(1),l.lineTo(y,O.y0R0(S,v)),O.S0R0(12),l.lineTo(O.O0R0(y,2,b),O.O0R0(S,v,O.m0R0(1))),l.stroke(),l.globalAlpha=.2;O.m0R0(0),l.fillRect(y,v,O.y0R0(2,b),S),l.globalAlpha=1}if(A&&(l.strokeStyle=s,l.fillStyle=s,i.inputs["Stop Levels"]?l.globalAlpha=.3:(l.strokeRect(C,w,T,k),l.globalAlpha=.2),l.fillRect(C,w,T,k),l.globalAlpha=1),D||A){if(i.inputs["Stop Levels"]){l.setLineDash&&l.setLineDash([2,2]),l.lineWidth=2,l.strokeStyle=r,L=Math.floor(t.pixelFromBar(P-1,o.chart)+d/2),u&&(l.beginPath(),l.moveTo(L,u),l.lineTo(D?y+2*b:C+T,u),l.stroke()),l.setLineDash&&l.setLineDash([]),611864293,-1982751816,E=2;for(var N=1;611864293!==O.u1y(N.toString(),N.toString().length,93911);N++)O.S0R0(6),l.lineWidth=O.y0R0("1",0),E+=2;-1982751816!==O.x1y(E.toString(),E.toString().length,25817)&&(l.lineWidth=2)}D=!1,A=!1}t.endClip()},e.Studies.displaySupertrend=function(t,e,i){var a,r,n,s,o,l,h,c,u,d;function p(t,i,a){return i&&i["_Direction "+e.name]<0?e.outputs.Downtrend:e.outputs.Uptrend}a=t.panels[e.panel],r=e.getContext(t),n=e.getYAxis(t),s={skipTransform:a.name!=e.chart.name,skipProjections:!0,label:t.preferences.labels,yAxis:n,highlight:e.highlight},x.s3k0(),r.strokeStyle=p(t,i[i.length-1]),r.lineWidth=2,e.highlight&&(r.lineWidth=1.5),o="Trend "+e.name;for(var m=0;a.chart.transformFunc&&n!=a.chart.yAxis&&m<i.length;m++)(l=i[m])&&l.transform&&(l.transform[o]=a.chart.transformFunc(t,a.chart,l[o]));for(t.plotDataSegmentAsLine(o,a,s,p),r.lineWidth=1,r.globalAlpha=1,t.startClip(e.panel),!e.highlight&&t.highlightedDraggable&&(r.globalAlpha*=.3),h=r.measureText("▲").width/2,c=0;c<i.length;c++)if("_D","ir","ec","tion ",i[c]&&i[c-1])if(i[c-1]["_Direction "+e.name]>i[c]["_Direction "+e.name]){"bo","tt","o","m",r.fillStyle=e.outputs.Downtrend,r.textBaseline="bottom",u=t.pixelFromPrice(i[c].High,a,n);for(var g=5;g<=45;g+=10)n.flipped?r.fillText("▲",t.pixelFromBar(c)-h,u+g):r.fillText("▼",t.pixelFromBar(c)-h,u-g)}else if(i[c-1]["_Direction "+e.name]<i[c]["_Direction "+e.name]){r.fillStyle=e.outputs.Uptrend,r.textBaseline="top",d=t.pixelFromPrice(i[c].Low,a,n);for(var f=5;f<=45;f+=10)n.flipped?r.fillText("▼",t.pixelFromBar(c)-h,d-f):r.fillText("▲",t.pixelFromBar(c)-h,d+f)}t.endClip()},e.Studies.displayMFI=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,m;r=t.panels[i.panel],n=i.getContext(t),o=(s=i.getYAxis(t)).flipped?s.top:s.bottom,(l=t.layout.candleWidth-2)<2&&(l=1),h=e.Studies.determineColor(i.outputs.Green),c=e.Studies.determineColor(i.outputs.Fade),u=e.Studies.determineColor(i.outputs.Fake),x.s3k0(),d=e.Studies.determineColor(i.outputs.Squat),t.canvasColor("stx_histogram"),i.underlay||(n.globalAlpha=1),n.fillStyle="#CCCCCC",t.startClip(i.panel),!i.highlight&&t.highlightedDraggable&&(n.globalAlpha*=.3);for(var g=0;g<a.length;g++)"_h","i","s","t","_h","i","s","t",p=a[g],x.m0R0(6),(m=a[x.y0R0(g,1)])||(m=t.getPreviousBar(t.chart,i.name+"_hist",g)),p&&(m&&(m[i.name+"_hist"]<p[i.name+"_hist"]?m.Volume<p.Volume?n.fillStyle=h:m.Volume>p.Volume&&(n.fillStyle=u):m[i.name+"_hist"]>p[i.name+"_hist"]&&(m.Volume<p.Volume?n.fillStyle=d:m.Volume>p.Volume&&(n.fillStyle=c))),p.candleWidth&&(l=Math.floor(Math.max(1,p.candleWidth-2))),n.fillRect(Math.floor(t.pixelFromBar(g,r.chart)-l/2),Math.floor(o),Math.floor(l),Math.floor(t.pixelFromPrice(p[i.name+"_hist"],r,s)-o)));t.endClip()},e.Studies.displayAwesomeOscillator=function(t,i,a){var r,n,s,o,l,h,c,u,d,p=x;r=t.panels[i.panel],n=i.getContext(t),s=i.getYAxis(t),o=t.pixelFromPrice(0,r,s),(l=t.layout.candleWidth-2)<2&&(l=1),h=e.Studies.determineColor(i.outputs["Increasing Bar"]),c=e.Studies.determineColor(i.outputs["Decreasing Bar"]),t.canvasColor("stx_histogram"),i.underlay||(p.S0R0(23),n.globalAlpha=p.y0R0(2147483647,"1")),n.fillStyle="#CCCCCC",t.startClip(i.panel),!i.highlight&&t.highlightedDraggable&&(p.S0R0(6),n.globalAlpha*=p.y0R0("0.3",0));for(var m=0;m<a.length;m++)"_h","i","s","t","_","h","i","st","_","hi","st",u=a[m],p.S0R0(6),(d=a[p.y0R0(m,1)])||(d=t.getPreviousBar(t.chart,i.name+"_hist",m)),u&&(d&&(d[i.name+"_hist"]<u[i.name+"_hist"]?n.fillStyle=h:d[i.name+"_hist"]>u[i.name+"_hist"]&&(n.fillStyle=c)),u.candleWidth&&(l=Math.floor(Math.max(1,u.candleWidth-2))),n.fillRect(Math.floor(t.pixelFromBar(m,r.chart)-l/2),Math.floor(o),Math.floor(l),Math.floor(t.pixelFromPrice(u[i.name+"_hist"],r,s)-o)));t.endClip()},e.Studies.displayGator=function(t,i,a){var r,n,s,o,l,h,c,u,d;r=t.panels[i.panel],n=i.getContext(t),s=i.getYAxis(t),o=t.pixelFromPrice(0,r,s),l=t.layout.candleWidth-2,x.I3k0(),l<2&&(l=1),h=e.Studies.determineColor(i.outputs["Increasing Bar"]),c=e.Studies.determineColor(i.outputs["Decreasing Bar"]),t.canvasColor("stx_histogram"),i.underlay||(n.globalAlpha=1),n.fillStyle="#CCCCCC",t.startClip(i.panel),!i.highlight&&t.highlightedDraggable&&(n.globalAlpha*=.3);for(var p=0;p<a.length;p++)if(u=a[p],x.m0R0(6),d=a[x.O0R0(p,1)],u)for(var m=1;m<=2;m++)"_","his","t","_","hi","s","t","_h","ist","_","h","ist",d||(d=t.getPreviousBar(t.chart,i.name+"_hist"+m,p)),d?Math.abs(d[i.name+"_hist"+m])<Math.abs(u[i.name+"_hist"+m])?n.fillStyle=h:Math.abs(d[i.name+"_hist"+m])>Math.abs(u[i.name+"_hist"+m])&&(n.fillStyle=c):n.fillStyle="#CCCCCC",u.candleWidth&&(l=Math.floor(Math.max(1,u.candleWidth-2))),n.fillRect(Math.floor(t.pixelFromBar(p,r.chart)-l/2),Math.floor(o),Math.floor(l),Math.floor(t.pixelFromPrice(u[i.name+"_hist"+m],r,s)-o));t.endClip()},e.Studies.initElderImpulse=function(t,i,a,r,n,s){var o;return o=e.Studies.initializeFN(t,i,a,r,n,s),n.calculateOnly||(t.chart.customChart={chartType:"colored_bar",colorFunction:function(t,e,i){var a;return x.I3k0(),"ob","jec","t",(a=e["Result "+o.name])&&"object"==v(a)&&(a=a.color),a}},t.setMainSeriesRenderer()),o},e.Studies.displayPivotPoints=function(t,i,a){var r,n,s;i.noSlopes=!i.inputs.Continuous,x.I3k0(),r=2;for(var o=1;914541192!==x.x1y(o.toString(),o.toString().length,69473);o++)e.Studies.displaySeriesAsLine(t,i,a),r+=2;45454574!==x.x1y(r.toString(),r.toString().length,20017)&&e.Studies.displaySeriesAsLine(t,i,a),i.inputs.Shading&&("Sup","por","t 2 ","P","ivot"," ","Resist","ance 1 ","R","esis","tance"," 2 ",n=t.panels[i.panel],s={noSlopes:i.noSlopes,opacity:i.parameters.opacity?i.parameters.opacity:.2,skipTransform:n.name!=i.chart.name,yAxis:i.getYAxis(t)},!i.highlight&&t.highlightedDraggable&&(s.opacity*=.3),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"Resistance 3 "+i.name,bottomBand:"Resistance 2 "+i.name,color:e.Studies.determineColor(i.outputs["Resistance 3"])},s)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"Resistance 2 "+i.name,bottomBand:"Resistance 1 "+i.name,color:e.Studies.determineColor(i.outputs["Resistance 2"])},s)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"Resistance 1 "+i.name,bottomBand:"Pivot "+i.name,color:e.Studies.determineColor(i.outputs["Resistance 1"])},s)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"Support 1 "+i.name,bottomBand:"Pivot "+i.name,color:e.Studies.determineColor(i.outputs["Support 1"])},s)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"Support 2 "+i.name,bottomBand:"Support 1 "+i.name,color:e.Studies.determineColor(i.outputs["Support 2"])},s)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"Support 3 "+i.name,bottomBand:"Support 2 "+i.name,color:e.Studies.determineColor(i.outputs["Support 3"])},s)))},e.Studies.displayVWAP=function(t,i,a){var r,n,s,o,l,h,c;e.Studies.displaySeriesAsLine(t,i,a),r=i.inputs["Display 1 Standard Deviation (1σ)"],n=i.inputs["Display 2 Standard Deviation (2σ)"],s=i.inputs["Display 3 Standard Deviation (3σ)"],(r||n||s)&&i.inputs.Shading&&("VWAP"," ",o=t.panels[i.panel],l={opacity:i.parameters.opacity?i.parameters.opacity:.2,skipTransform:o.name!=i.chart.name,yAxis:i.getYAxis(t)},!i.highlight&&t.highlightedDraggable&&(l.opacity*=.3),h="VWAP "+i.name,c="VWAP "+i.name,r&&("SDVWAP1","+ ","SDV","WA","P1+ ","S","DVWAP1+ ",e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP1+ "+i.name,bottomBand:h,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1+ "+i.name]])},l)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP1- "+i.name,bottomBand:c,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1- "+i.name]])},l)),h="SDVWAP1+ "+i.name,c="SDVWAP1- "+i.name),n&&("SDVW","AP2- ","S","DVWAP2+ ",e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP2+ "+i.name,bottomBand:h,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2+ "+i.name]])},l)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP2- "+i.name,bottomBand:c,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2- "+i.name]])},l)),h="SDVWAP2+ "+i.name,c="SDVWAP2- "+i.name),s&&(e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP3+ "+i.name,bottomBand:h,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3+ "+i.name]])},l)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP3- "+i.name,bottomBand:c,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3- "+i.name]])},l))))},e.Studies.displayADX=function(t,i,a){var r,n,s,o,l,h,c;r=i.underlay?.3:i.inputs.Series?.4:1,i.inputs.Series&&i.inputs.Shading&&("+","D","I"," ",n="+DI "+i.name,s="-DI "+i.name,o=e.Studies.determineColor(i.outputs[i.outputMap[n]]),l=e.Studies.determineColor(i.outputs[i.outputMap[s]]),h=i.getYAxis(t),c={topBand:n,bottomBand:s,topColor:o,bottomColor:l,skipTransform:t.panels[i.panel].name!=i.chart.name,topAxis:h,bottomAxis:h,opacity:.3},!i.highlight&&t.highlightedDraggable&&(c.opacity*=.3),e.fillIntersecting(t,i.panel,c)),i.inputs.Histogram&&e.Studies.createHistogram(t,i,a,!1,r),!1!==i.inputs.Series?e.Studies.displaySeriesAsLine(t,i,a):i.inputs.Series||i.inputs.Histogram||t.displayErrorAsWatermark(i.panel,t.translateIf(i.name)+": "+t.translateIf("Nothing to display"))},e.Studies.displayAlligator=function(t,i,a){var r;function n(e,i){var n,o;o=t.chart.panel.yAxis.flipped,"high"==e?("t","op",r.fillStyle=t.defaultColor,r.textBaseline=o?"top":"bottom",n=t.pixelFromPrice(a[i].High),r.fillText(o?"▼":"▲",t.pixelFromBar(s,t.chart)-r.measureText("▲").width/2+1,o?n+5:n-5)):"low"==e&&("t","op",r.fillStyle=t.defaultColor,r.textBaseline=o?"bottom":"top",n=t.pixelFromPrice(a[i].Low),r.fillText(o?"▲":"▼",t.pixelFromBar(s,t.chart)-r.measureText("▼").width/2+1,o?n-5:n+5))}if("Sho","w Fractals","Show L","ines",r=i.getContext(t),i.inputs["Show Lines"]&&e.Studies.displaySeriesAsLine(t,i,a),i.inputs["Show Fractals"]){t.startClip(),r.globalAlpha=i.underlay?.3:1,!i.highlight&&t.highlightedDraggable&&(r.globalAlpha*=.3);for(var s=2;s<a.length-2;s++)a[s]&&("l","o","w","Fr","a","cta","l Low ","h","i","gh",a[s]["Fractal High "+i.name]&&n("high",s),a[s]["Fractal Low "+i.name]&&n("low",s));t.endClip()}},e.Studies.displayChannel=function(t,i,a){var r,n,s;if(x.I3k0(),i.inputs["Channel Fill"]){for(var o in r={panelName:i.panel},i.outputs)"Cha","n","ne","l","Top"==(n=o.split(" ").pop())||"High"==n?r.topBand=o+" "+i.name:"Bottom"==n||"Low"==n?r.bottomBand=o+" "+i.name:"Median"!=n&&"Channel"!=n||(r.color=e.Studies.determineColor(i.outputs[o]));i.parameters&&i.parameters.opacity?r.opacity=i.parameters.opacity:r.opacity=.2,s=t.panels[i.panel],r.skipTransform=s.name!=i.chart.name,r.yAxis=i.getYAxis(t),!i.highlight&&t.highlightedDraggable&&(r.opacity*=.3),e.prepareChannelFill(t,r)}e.Studies.displaySeriesAsLine(t,i,a)},e.Studies.displayElderForce=function(t,i,a){var r,n,s,o;e.Studies.displaySeriesAsLine(t,i,a),r=e.Studies.determineColor(i.outputs.Result),n=t.panels[i.panel],s=i.getYAxis(t),o={skipTransform:n.name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:0,color:r,yAxis:s},!i.highlight&&t.highlightedDraggable&&(o.opacity=.3),o.direction=1,e.preparePeakValleyFill(t,o),o.direction=-1,e.preparePeakValleyFill(t,o)},e.Studies.displayElderRay=function(t,i,a){var r,n,s,o,l,h,c;r=t.panels[i.panel],n=i.getContext(t),s=i.getYAxis(t),o=t.pixelFromPrice(0,r,s),(l=t.layout.candleWidth-2)<2&&(l=1),x.I3k0(),t.canvasColor("stx_histogram"),h=n.fillStyle,i.underlay||(x.m0R0(17),n.globalAlpha=x.y0R0("1",1250872416)),t.startClip(i.panel),!i.highlight&&t.highlightedDraggable&&(n.globalAlpha*=.3);for(var u=0;u<a.length;u++)"Elder Bear P","ower","Elder"," Bul","l Po","wer","_h","is","t","1","_hi","st2","_h","ist2","Elder B","ul","l Power",(c=a[u])&&(c.candleWidth&&(l=Math.floor(Math.max(1,c.candleWidth-2))),c[i.name+"_hist1"]>0&&d(u,0,"Elder Bull Power","_hist1"),c[i.name+"_hist2"]<0&&d(u,0,"Elder Bear Power","_hist2"),c[i.name+"_hist1"]<0&&d(u,.1,"Elder Bull Power","_hist1"),c[i.name+"_hist2"]>0&&d(u,.1,"Elder Bear Power","_hist2"));function d(a,h,u,d){n.fillStyle=e.Studies.determineColor(i.outputs[u]),n.fillRect(Math.floor(t.pixelFromBar(a,r.chart)-l/2+l*h),Math.floor(o),Math.floor(l*(1-2*h)),Math.floor(t.pixelFromPrice(c[i.name+d],r,s)-o))}t.endClip(),n.fillStyle=h},e.Studies.displayMassIndex=function(t,i,a){var r,n,s,o;e.Studies.displaySeriesAsLine(t,i,a),r=i.inputs["Bulge Threshold"],x.I3k0(),t.panels[i.panel],n=i.getYAxis(t),s=e.Studies.determineColor(i.outputs.Result),o={skipTransform:t.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:r,direction:1,color:s,yAxis:n,opacity:.3},!i.highlight&&t.highlightedDraggable&&(o.opacity*=.3),e.preparePeakValleyFill(t,o),e.Studies.drawHorizontal(t,i,null,r,n,s)},e.Studies.displayPSAR2=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y=x;for(var v in"Pl","ot Ty","p","e",r=t.panels[i.panel],s=(n=i.getYAxis(t))==t.chart.panel.yAxis,t.startClip(r.name),o=i.getContext(t),y.I3k0(),l="squarewave"==i.inputs["Plot Type"],i.outputs){h=v+" "+i.name,o.beginPath(),c=t.layout.candleWidth,u=Math.max(3,Math.floor(t.chart.tmpWidth/2));for(var b=0;b<a.length;b++)(d=a[b])&&(d[h]||0===d[h])&&(d.candleWidth&&(c=d.candleWidth),s&&d.transform&&(d=d.transform),p=t.pixelFromBar(b,r.chart),l&&(y.m0R0(37),p-=y.O0R0("2",0,c)),m=t.pixelFromTransformedValue(d[i.referenceOutput?i.referenceOutput+" "+i.name:h],r,n),0!==b&&a[b-1]&&(a[b-1][h]||0===a[b-1][h])||o.moveTo(p,m),l?(o.lineTo(p,m),y.m0R0(1),o.lineTo(y.O0R0(c,p),m),a[b+1]&&(y.S0R0(1),g=a[y.y0R0(1,b)],s&&g.transform&&(g=g.transform),g[h]||0===g[h]||(y.m0R0(1),o.lineTo(y.O0R0(c,p),t.pixelFromTransformedValue(g[i.referenceOutput?i.referenceOutput+" "+i.name:h],t.panels[i.panel],n))))):(y.S0R0(24),o.moveTo(y.y0R0(2,p,u),m),y.S0R0(25),o.lineTo(y.y0R0(p,2,u),m)));o.lineWidth=1,i.highlight&&(o.lineWidth=3),"auto"==(f=e.Studies.determineColor(i.outputs[v]))&&(f=t.defaultColor),o.strokeStyle=f,!i.highlight&&t.highlightedDraggable&&(o.globalAlpha*=.3),o.stroke(),o.closePath(),o.lineWidth=1}t.endClip()},e.Studies.displayRainbowMA=function(t,i,a){var r;r=t.panels[i.panel],x.s3k0();for(var n=10;n>0;n--)e.Studies.displayIndividualSeriesAsLine(t,i,r,"SMA"+n+" "+i.name,a)},e.Studies.displayRainbowOsc=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,m,g=x;e.Studies.displaySeriesAsLine(t,i,a),r=t.panels[i.panel],n=i.getContext(t),s=i.getYAxis(t),t.startClip(i.panel),!i.highlight&&t.highlightedDraggable&&(n.globalAlpha*=.3),o=t.pixelFromPrice(0,r,s),l=r.name!=i.chart.name,h=e.Studies.determineColor(i.outputs["Positive Bar"]),n.strokeStyle=h,t.plotDataSegmentAsLine("Over "+i.name,r,{skipTransform:l,label:!1,yAxis:s}),(c=n.createLinearGradient(0,o,0,s.flipped?s.bottom:s.top)).addColorStop(0,t.containerColor),c.addColorStop(1,h),e.prepareChannelFill(t,{skipTransform:l,color:c,opacity:!i.highlight&&t.highlightedDraggable?.3:1,panelName:i.panel,topBand:"Over "+i.name,bottomBand:"Zero "+i.name,yAxis:s}),u=e.Studies.determineColor(i.outputs["Negative Bar"]),n.strokeStyle=u,g.I3k0(),t.plotDataSegmentAsLine("Under "+i.name,r,{skipTransform:l,label:!1,yAxis:s}),(d=n.createLinearGradient(0,o,0,s.flipped?s.top:s.bottom)).addColorStop(0,t.containerColor),d.addColorStop(1,u),e.prepareChannelFill(t,{skipTransform:l,color:d,opacity:!i.highlight&&t.highlightedDraggable?.3:1,panelName:i.panel,topBand:"Zero "+i.name,bottomBand:"Under "+i.name,yAxis:s}),(p=t.layout.candleWidth-2)<2&&(g.S0R0(23),p=g.O0R0(2147483647,"1")),t.canvasColor("stx_histogram"),i.underlay||(g.m0R0(0),n.globalAlpha=g.O0R0("1",1)),!i.highlight&&t.highlightedDraggable&&(n.globalAlpha*=.3),n.fillStyle="#CCCCCC";for(var f=0;f<a.length;f++)"_","hi","st",(m=a[f])&&(m[i.name+"_hist"]>0?n.fillStyle=h:m[i.name+"_hist"]<0&&(n.fillStyle=u),m.candleWidth&&(p=Math.floor(Math.max(1,m.candleWidth-2))),n.fillRect(Math.floor(t.pixelFromBar(f,r.chart)-p/2),Math.floor(o),Math.floor(p),Math.floor(t.pixelFromPrice(m[i.name+"_hist"],r,s)-o)));t.endClip()},e.Studies.displayRAVI=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,m;x.s3k0(),r=t.panels[i.panel],n=i.getContext(t),s=i.getYAxis(t),o=t.pixelFromPrice(0,r,s),(l=t.layout.candleWidth-2)<2&&(l=1),h=e.Studies.determineColor(i.outputs["Increasing Bar"]),c=e.Studies.determineColor(i.outputs["Decreasing Bar"]),t.startClip(i.panel),t.canvasColor("stx_histogram"),i.underlay||(n.globalAlpha=1),!i.highlight&&t.highlightedDraggable&&(n.globalAlpha*=.3);for(var g=0;g<a.length;g++)"_","h","i","st","#","C","CCC","CC","_h","i","s","t","_","h","ist","_hi","st",u=a[g],x.m0R0(88),(d=a[x.y0R0("1",0,g)])||(d=t.getPreviousBar(t.chart,i.name+"_hist",g)),u&&(p=0,m=0,i.parameters&&i.parameters.studyOverZonesEnabled&&(p=parseFloat(i.parameters.studyOverBoughtValue),m=parseFloat(i.parameters.studyOverSoldValue)),d?u[i.name+"_hist"]>p&&d[i.name+"_hist"]<u[i.name+"_hist"]?n.fillStyle=h:u[i.name+"_hist"]<m&&d[i.name+"_hist"]>u[i.name+"_hist"]?n.fillStyle=c:n.fillStyle="#CCCCCC":n.fillStyle="#CCCCCC",u.candleWidth&&(l=Math.floor(Math.max(1,u.candleWidth-2))),n.fillRect(Math.floor(t.pixelFromBar(g,r.chart)-l/2),Math.floor(o),Math.floor(l),Math.floor(t.pixelFromPrice(u[i.name+"_hist"],r,s)-o)));t.endClip()},e.Studies.displayZigZag=function(t,i,a){var r,n,s,o,l;r=t.chart.highLowBars,i.highLowChart!=r&&(i.highLowChart=r,i.startFrom=0,i.study.calculateFN(t,i)),n=t.chart;for(var h=0;h<a.length;h++)(s=a[h])&&(s["_shadowCopy "+i.name]&&("_","shadow","C","opy ","Re","su","lt ",delete s["Result "+i.name],delete s["_shadowCopy "+i.name]),s["Result "+i.name]||s.transform&&delete s.transform["Result "+i.name]);o=a[0],l=a[a.length-1],o&&o["ShadowResult "+i.name]&&("Shadow","R","esult ",o["Result "+i.name]=o["ShadowResult "+i.name],o.transform&&(o.transform["Result "+i.name]=n.transformFunc(t,n,o["ShadowResult "+i.name])),o["_shadowCopy "+i.name]=1),l&&l["ShadowResult "+i.name]&&(l["Result "+i.name]=l["ShadowResult "+i.name],l.transform&&(l.transform["Result "+i.name]=n.transformFunc(t,n,l["ShadowResult "+i.name])),l["_shadowCopy "+i.name]=1),e.Studies.displaySeriesAsLine(t,i,a)},e.Studies.displayVolumeProfile=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,S,C,w,T,k,D,A=x;function M(a,r){var n,s,o,h,d,p,m,g,y;r||(C-=2),D.canvasColor(a),f.beginPath(),n=c[0][0],s=C;for(var x=1;x<c.length;x++){if(c[x][1]){if(o=Math.round(C-c[x][1]*w/u)-.5,h=Math.round(D.pixelFromTransformedValue(n,b))+.5,d=Math.round(D.pixelFromTransformedValue(c[x][0],b))+.5,r||(h-=.5,d+=.5,o+=.5),h>S&&(h=S),d<S)if(f.moveTo(C,h),f.lineTo(C,d),f.lineTo(o,d),f.lineTo(o,h),r)(s>o||1==x)&&f.lineTo(s,h);else if(f.lineTo(C,h),l&&(p=e.condenseInt(c[x][1]),A.m0R0(6),m=A.y0R0(h,d),v<=m-2)){"t","o","p";try{g=f.measureText(p).width}catch(t){g=0}f.textBaseline="top",y=f.fillStyle,f.fillStyle=T,A.m0R0(59),f.fillText(p,A.y0R0(3,g,o),A.O0R0(2,2,m,d,v,A.m0R0(89))),f.fillStyle=y}s=o}else s=C;n=c[x][0]}!i.highlight&&t.highlightedDraggable&&(f.globalAlpha*=.3),r||f.fill(),f.strokeStyle=T,r&&f.stroke(),f.closePath()}if("stx_v","ol","ume_pr",A.s3k0(),"ofile","stx_vo","lume_profi","le","Bars C","o","lor",t&&t.chart.dataSet&&(r=t.chart,n=i.parameters.numberOfBars,s=i.parameters.widthPercentage,o=i.parameters.displayBorder,l=i.parameters.displayVolume,(!n||n<0)&&(A.m0R0(0),n=A.y0R0("30",1)),n=Math.ceil(n),(!s||s<0)&&(s=.25),!1!==o&&(o=!0),!0!==l&&(l=!1),0!==(h=(r.highValue-r.lowValue)/n))){c=[];for(var P=r.lowValue;P<r.highValue+.1;P+=h)c.push([P,0]);if(c.length<2)return"char","t",void t.displayErrorAsWatermark("chart",t.translateIf("Not enough data to render the Volume Profile"));u=0;for(var F=0;F<a.length;F++)if(d=a[F]){p=d.Volume,i.panel==r.name&&d.transform&&(d=d.transform),m=c[0][0],g=0;for(var _=1;_<c.length;_++)g=c[_][0],(d.Low>=m&&d.Low<=g||d.Low<m&&d.High>g||d.High>=m&&d.High<=g)&&(c[_][1]+=p,c[_][1]>u&&(A.m0R0(6),u=c[_][A.y0R0("1",0)])),m=g}0!==u?(t.setStyle("stx_volume_profile","color",e.Studies.determineColor(i.outputs["Bars Color"])),f=i.getContext(t),y="stx-float-date",t.canvasFont(y,f),v=t.getCanvasFontSize(y),b=r.panel,S=b.yAxis.bottom,C=Math.round(r.right)-.5,w=r.width*s,T=t.canvasStyle("stx_volume_profile").borderTopColor,k=!e.isTransparent(t.canvasStyle("stx_volume_profile").borderTopColor)&&o,D=t,M("stx_volume_profile",!1),k&&M("stx_volume_profile",!0),f.globalAlpha=1):t.displayErrorAsWatermark("chart",t.translateIf("Not enough data to render the Volume Profile"))}},e.Studies.displayProjectedVolume=function(t,i,a){var r,n,s,o,l,h,c;if("o","b","je","ct",!i.error){var u=i.inputs["Alert Threshold"];r=parseInt((void 0===u?"":u).slice(0,-1),10)/100,"object"===v(n=i.outputs["Alert Bar"])&&(n=n.color),i.volumeField="V "+i.name,i.plotStepLine=!0,i.alignStepToSide=!0,x.s3k0(),i.extendToEndOfLastBar=!0,i.lineWidth=2,s=t.canvasStyle("stx_volume_underlay_up").opacity,o=t.canvasStyle("stx_volume_underlay_down").opacity,i.colorFunction=function(e){var a,l,h,c,u,d,p=e.Open,m=e.Close,g=e.iqPrevClose;return a=t.colorByCandleDirection?p:g,x.m0R0(90),l=x.y0R0(a,m),h=e["PV "+i.name],c=e["V "+i.name],x.m0R0(91),u=x.O0R0(h,1,r),{fill_color:(d=r<0?c<u:c>u)&&n||(l?this.fill_color_down:this.fill_color_up),border_color:l?this.border_color_down:this.border_color_up,opacity:d?1:l?o:s,border_opacity:l?o:s}},l=i.study?i.study.name:i.type;var d=t.chart.loadingMore;if(h=a.some((function(t){return"P","V"," ",x.s3k0(),t&&t[i.volumeField]&&t["PV "+i.name]})),c=a[0]&&!a[0].futureTick&&(void 0===a[0]["PV "+i.name]||(i.dependentsOutputMap||[]).some((function(t){return x.s3k0(),[void 0,null].includes(a[0][t])}))),!h&&d)return i.error="Fetching data for ".concat(l);e.Studies.createVolumeChart(t,i,a),e.Studies.displaySeriesAsLine(t,i,a),c&&e.Studies.calculateProjectedVolume(t,i)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Acc Swing":{name:"Accumulative Swing Index",calculateFN:e.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}},ADX:{name:"ADX/DMS",calculateFN:e.Studies.calculateADX,seriesFN:e.Studies.displayADX,inputs:{Period:14,"Smoothing Period":14,Series:!0,Shading:!1,Histogram:!1},outputs:{"+DI":"#00FF00","-DI":"#FF0000",ADX:"auto","Positive Bar":"#00DD00","Negative Bar":"#FF0000"}},Aroon:{name:"Aroon",range:"0 to 100",calculateFN:e.Studies.calculateAroon,outputs:{"Aroon Up":"#00DD00","Aroon Down":"#FF0000"}},"Aroon Osc":{name:"Aroon Oscillator",calculateFN:e.Studies.calculateAroon,outputs:{"Aroon Oscillator":"auto"}},ATR:{name:"Average True Range",calculateFN:e.Studies.calculateStudyATR,outputs:{ATR:"auto"}},"Bollinger Bands":{name:"Bollinger Bands",overlay:!0,calculateFN:e.Studies.calculateBollinger,seriesFN:e.Studies.displayChannel,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"Bollinger Bands Top":"auto","Bollinger Bands Median":"auto","Bollinger Bands Bottom":"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}},CCI:{name:"Commodity Channel Index",calculateFN:e.Studies.calculateCCI,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:-100,studyOverSoldColor:"auto"}},attributes:{Period:{min:2}}},"Chaikin MF":{name:"Chaikin Money Flow",calculateFN:e.Studies.calculateChaikinMoneyFlow,inputs:{Period:20}},"Chaikin Vol":{name:"Chaikin Volatility",calculateFN:e.Studies.calculateChaikinVolatility,inputs:{Period:14,"Rate Of Change":2,"Moving Average Type":"ma"}},"Chande Fcst":{name:"Chande Forecast Oscillator",calculateFN:e.Studies.calculateChandeForecast,inputs:{Period:14,Field:"field"}},"Chande Mtm":{name:"Chande Momentum Oscillator",calculateFN:e.Studies.calculateChandeMomentum,inputs:{Period:9},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:50,studyOverBoughtColor:"auto",studyOverSoldValue:-50,studyOverSoldColor:"auto"}}},COG:{name:"Center Of Gravity",calculateFN:e.Studies.calculateCenterOfGravity,inputs:{Period:10,Field:"field"}},Coppock:{name:"Coppock Curve",calculateFN:e.Studies.calculateCoppock,inputs:{Period:10,Field:"field","Short RoC":11,"Long RoC":14}},Detrended:{name:"Detrended Price Oscillator",calculateFN:e.Studies.calculateDetrendedPrice,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}},"Donchian Channel":{name:"Donchian Channel",overlay:!0,calculateFN:e.Studies.calculateMaxHighMinLow,seriesFN:e.Studies.displayChannel,inputs:{"High Period":20,"Low Period":20,"Channel Fill":!0},outputs:{"Donchian High":"auto","Donchian Median":"auto","Donchian Low":"auto"}},"Ehler Fisher":{name:"Ehler Fisher Transform",calculateFN:e.Studies.calculateEhlerFisher,inputs:{Period:10},outputs:{EF:"auto","EF Trigger":"#FF0000"}},"Elder Force":{name:"Elder Force Index",calculateFN:e.Studies.calculateElderForce,seriesFN:e.Studies.displayElderForce,inputs:{Period:13}},"Elder Ray":{name:"Elder Ray Index",seriesFN:e.Studies.displayElderRay,calculateFN:e.Studies.calculateElderRay,centerline:0,inputs:{Period:13},outputs:{"Elder Bull Power":"#00DD00","Elder Bear Power":"#FF0000"}},EOM:{name:"Ease of Movement",calculateFN:e.Studies.calculateEaseOfMovement,inputs:{Period:14,"Moving Average Type":"ma"}},"Fractal Chaos":{name:"Fractal Chaos Oscillator",range:"-1 to 1",calculateFN:e.Studies.calculateFractalChaos,inputs:{},centerline:null},"Fractal Chaos Bands":{name:"Fractal Chaos Bands",overlay:!0,calculateFN:e.Studies.calculateFractalChaos,seriesFN:e.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Fractal High":"auto","Fractal Low":"auto","Fractal Channel":"auto"}},GAPO:{name:"Gopalakrishnan Range Index",calculateFN:e.Studies.calculateMaxHighMinLow},HHV:{name:"Highest High Value",calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{Period:14}},"High Low":{name:"High Low Bands",overlay:!0,seriesFN:e.Studies.displayChannel,calculateFN:function(t,i){i.inputs["Moving Average Type"]="triangular",e.Studies.calculateMAEnvelope(t,i)},inputs:{Period:10,Field:"field","Shift Percentage":5,"Channel Fill":!0},outputs:{"High Low Top":"auto","High Low Median":"auto","High Low Bottom":"auto"},attributes:{"Shift Percentage":{min:.1,step:.1}}},"High-Low":{name:"High Minus Low",calculateFN:function(t,e){var i;i=e.chart.scrubbed;for(var a=e.startFrom;a<i.length;a++)"Re","s","u","lt ",i[a]["Result "+e.name]=i[a].High-i[a].Low},inputs:{}},"Hist Vol":{name:"Historical Volatility",calculateFN:e.Studies.calculateHistoricalVolatility,inputs:{Period:10,Field:"field","Days Per Year":[252,365],"Standard Deviations":1},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Intraday Mtm":{name:"Intraday Momentum Index",calculateFN:e.Studies.calculateIntradayMomentum,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}},Keltner:{name:"Keltner Channel",overlay:!0,seriesFN:e.Studies.displayChannel,calculateFN:e.Studies.calculateKeltner,inputs:{Period:50,Shift:5,"Moving Average Type":"ema","Channel Fill":!0},outputs:{"Keltner Top":"auto","Keltner Median":"auto","Keltner Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}},Klinger:{name:"Klinger Volume Oscillator",seriesFN:e.Studies.displayHistogramWithSeries,calculateFN:e.Studies.calculateKlinger,inputs:{"Signal Periods":13,"Short Cycle":34,"Long Cycle":55},outputs:{Klinger:"auto",KlingerSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},"Lin Fcst":{name:"Linear Reg Forecast",overlay:!0,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}},"Lin Incpt":{name:"Linear Reg Intercept",overlay:!0,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Intercept:"auto"}},"Lin R2":{name:"Linear Reg R2",calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{RSquared:"auto"}},LLV:{name:"Lowest Low Value",calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{Period:14}},"LR Slope":{name:"Linear Reg Slope",calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Slope:"auto"}},macd:{name:"MACD",calculateFN:e.Studies.calculateMACD,seriesFN:e.Studies.displayHistogramWithSeries,inputs:{"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},outputs:{MACD:"auto",Signal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},"MA Env":{name:"Moving Average Envelope",overlay:!0,seriesFN:e.Studies.displayChannel,calculateFN:e.Studies.calculateMAEnvelope,inputs:{Period:50,Field:"field","Shift Type":["percent","points"],Shift:5,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"MA Env Top":"auto","MA Env Median":"auto","MA Env Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}},"Mass Idx":{name:"Mass Index",seriesFN:e.Studies.displayMassIndex,calculateFN:e.Studies.calculateMassIndex,inputs:{Period:25,"Bulge Threshold":27},attributes:{"Bulge Threshold":{min:20,max:35,step:.1}}},"M Flow":{name:"Money Flow Index",range:"0 to 100",calculateFN:e.Studies.calculateMoneyFlowIndex,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}},"Neg Vol":{name:"Negative Volume Index",calculateFN:e.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"On Bal Vol":{name:"On Balance Volume",calculateFN:e.Studies.calculateOnBalanceVolume,inputs:{}},"Pos Vol":{name:"Positive Volume Index",calculateFN:e.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"Pretty Good":{name:"Pretty Good Oscillator",calculateFN:e.Studies.calculatePrettyGoodOscillator,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}}},"Price Osc":{name:"Price Oscillator",calculateFN:e.Studies.calculatePriceOscillator,inputs:{Field:"field","Short Cycle":12,"Long Cycle":26,"Moving Average Type":"ema","Points Or Percent":["Points","Percent"]}},"Price Vol":{name:"Price Volume Trend",calculateFN:e.Studies.calculatePriceVolumeTrend,inputs:{Field:"field"}},"Prime Number":{name:"Prime Number Oscillator",range:"-1 to 1",calculateFN:e.Studies.calculatePrimeNumber,centerline:0,inputs:{"Tolerance Percentage":5},attributes:{"Tolerance Percentage":{min:.1,step:.1}}},"Prime Number Bands":{name:"Prime Number Bands",overlay:!0,calculateFN:e.Studies.calculatePrimeNumber,seriesFN:e.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Prime Bands Top":"auto","Prime Bands Bottom":"auto","Prime Bands Channel":"auto"}},PSAR:{name:"Parabolic SAR",overlay:!0,calculateFN:e.Studies.calculatePSAR,seriesFN:e.Studies.displayPSAR2,inputs:{"Minimum AF":.02,"Maximum AF":.2}},QStick:{name:"QStick",calculateFN:e.Studies.calculateQStick,inputs:{Period:8,"Moving Average Type":"ma"}},"Random Walk":{name:"Random Walk Index",calculateFN:e.Studies.calculateRandomWalk,outputs:{"Random Walk High":"#FF0000","Random Walk Low":"#0000FF"}},RAVI:{name:"RAVI",seriesFN:e.Studies.displayRAVI,calculateFN:e.Studies.calculatePriceOscillator,inputs:{Field:"field","Moving Average Type":"vdma","Short Cycle":7,"Long Cycle":65},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.1"},studyOverSoldValue:{max:0,step:"0.1"}}},rsi:{name:"RSI",inputs:{Period:14,Field:"field"},calculateFN:e.Studies.calculateRSI,range:"0 to 100",outputs:{RSI:"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}},Schaff:{name:"Schaff Trend Cycle",range:"0 to 100",calculateFN:e.Studies.calculateSchaff,inputs:{Period:10,Field:"field","Short Cycle":23,"Long Cycle":50,"Moving Average Type":"ema"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:75,studyOverBoughtColor:"auto",studyOverSoldValue:25,studyOverSoldColor:"auto"}}},"Stch Mtm":{name:"Stochastic Momentum Index",calculateFN:e.Studies.calculateStochMomentum,inputs:{"%K Periods":10,"%K Smoothing Periods":3,"%K Double Smoothing Periods":3,"%D Periods":10,"%D Moving Average Type":"ema"},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:40,studyOverBoughtColor:"auto",studyOverSoldValue:-40,studyOverSoldColor:"auto"}}},Swing:{name:"Swing Index",calculateFN:e.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}},"Time Fcst":{name:"Time Series Forecast",overlay:!0,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}},"Trade Vol":{name:"Trade Volume Index",calculateFN:e.Studies.calculateOnBalanceVolume,inputs:{"Min Tick Value":.5}},TRIX:{name:"TRIX",calculateFN:e.Studies.calculateTRIX},Twiggs:{name:"Twiggs Money Flow",calculateFN:e.Studies.calculateTwiggsMoneyFlow,inputs:{Period:21}},"Typical Price":{name:"Typical Price",calculateFN:e.Studies.calculateTypicalPrice,inputs:{Period:14}},Ultimate:{name:"Ultimate Oscillator",calculateFN:e.Studies.calculateUltimateOscillator,inputs:{"Cycle 1":7,"Cycle 2":14,"Cycle 3":28},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}},"Vol Osc":{name:"Volume Oscillator",calculateFN:e.Studies.calculatePriceOscillator,inputs:{"Short Cycle":12,"Long Cycle":26,"Points Or Percent":["Points","Percent"]},parameters:{init:{isVolume:!0}}},"Vol ROC":{name:"Volume Rate of Change",calculateFN:e.Studies.calculateRateOfChange,parameters:{init:{isVolume:!0}}},"VT HZ Filter":{name:"Vertical Horizontal Filter",calculateFN:e.Studies.calculateVerticalHorizontalFilter,inputs:{Period:28}},"W Acc Dist":{name:"Accumulation/Distribution",calculateFN:e.Studies.calculateAccumulationDistribution,inputs:{"Use Volume":!1}},"Weighted Close":{name:"Weighted Close",calculateFN:e.Studies.calculateTypicalPrice,inputs:{Period:14}},"Williams %R":{name:"Williams %R",calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:-20,studyOverBoughtColor:"auto",studyOverSoldValue:-80,studyOverSoldColor:"auto"}}},"val lines":{name:"Valuation Lines",calculateFN:function(){},seriesFN:function(t,i,a){e.Studies.calculateValuationLines(t,i,a),e.Studies.displayValuationLines(t,i)},overlay:!0,yAxisFN:function(){},inputs:{Field:"field","Average Type":["mean","median","harmonic"],"Display Average":!0,"Display 1 Standard Deviation (1σ)":!1,"Display 2 Standard Deviation (2σ)":!1,"Display 3 Standard Deviation (3σ)":!1},outputs:{Average:"#00afed","1 Standard Deviation (1σ)":"#e1e1e1","2 Standard Deviation (2σ)":"#85c99e","3 Standard Deviation (3σ)":"#fff69e"}},"vol undr":{name:"Volume Underlay",underlay:!0,range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,position:"none",zoom:0,heightFactor:.25},seriesFN:e.Studies.createVolumeChart,calculateFN:e.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"},customRemoval:!0,removeFN:function(t,e){t.layout.volumeUnderlay=!1,t.changeOccurred("layout")},attributes:{panelName:{hidden:!0}}},correl:{name:"Correlation Coefficient",range:"-1 to 1",calculateFN:e.Studies.calculateCorrelationCoefficient,outputs:{}},PMO:{name:"Price Momentum Oscillator",calculateFN:e.Studies.calculatePMO,inputs:{Field:"field","Smoothing Period":35,"Double Smoothing Period":20,"Signal Period":10},outputs:{PMO:"auto",PMOSignal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:2.5,studyOverBoughtColor:"auto",studyOverSoldValue:-2.5,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.05"},studyOverSoldValue:{max:0,step:"0.05"}}},"Rel Vol":{name:"Relative Volatility",range:"0 to 100",calculateFN:e.Studies.calculateRelativeVolatility,inputs:{Field:"field","STD Period":10,"Smoothing Period":14},outputs:{"Rel Vol":"auto"},centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}},Awesome:{name:"Awesome Oscillator",seriesFN:e.Studies.displayAwesomeOscillator,calculateFN:e.Studies.calculateAwesomeOscillator,inputs:{},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},"W MFI":{name:"Market Facilitation Index",seriesFN:e.Studies.displayMFI,calculateFN:e.Studies.calculateMFI,yAxis:{ground:!0},range:"0 to max",inputs:{"Scale Factor":6},outputs:{Green:"#8bc176",Fade:"#ab611f",Fake:"#5f7cb8",Squat:"#ffd0cf"}},"ATR Bands":{name:"ATR Bands",overlay:!0,seriesFN:e.Studies.displayChannel,calculateFN:e.Studies.calculateATRBands,inputs:{Period:5,Field:"field",Shift:3,"Channel Fill":!0},outputs:{"ATR Bands Top":"auto","ATR Bands Bottom":"auto","ATR Bands Channel":"auto"},attributes:{Shift:{min:.1,step:.1}}},"STARC Bands":{name:"STARC Bands",overlay:!0,seriesFN:e.Studies.displayChannel,calculateFN:e.Studies.calculateSTARCBands,inputs:{Period:15,"MA Period":5,Multiplier:1.3,"Channel Fill":!0},outputs:{"STARC Bands Top":"auto","STARC Bands Median":"auto","STARC Bands Bottom":"auto"},attributes:{Multiplier:{min:.1,step:.1}}},"ATR Trailing Stop":{name:"ATR Trailing Stops",overlay:!0,seriesFN:e.Studies.displayPSAR2,calculateFN:e.Studies.calculateATRStops,inputs:{Period:21,Multiplier:3,"Plot Type":["points","squarewave"],HighLow:!1},outputs:{"Buy Stops":"#FF0000","Sell Stops":"#00FF00"},attributes:{Multiplier:{min:.1,step:.1}}},"Boll %b":{name:"Bollinger %b",calculateFN:e.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},outputs:{"%b":"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:0,studyOverSoldColor:"auto"}},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll BW":{name:"Bollinger Bandwidth",calculateFN:e.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},outputs:{Bandwidth:"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Donchian Width":{name:"Donchian Width",calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{"High Period":20,"Low Period":20}},"Rel Vig":{name:"Relative Vigor Index",seriesFN:e.Studies.displayHistogramWithSeries,calculateFN:e.Studies.calculateRelativeVigor,inputs:{Period:10},outputs:{"Rel Vig":"auto",RelVigSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},"Elder Impulse":{name:"Elder Impulse System",calculateFN:e.Studies.calculateElderImpulse,initializeFN:e.Studies.initElderImpulse,seriesFN:null,customRemoval:!0,underlay:!0,inputs:{},outputs:{Bullish:"#8BC176",Bearish:"#DD3E39",Neutral:"#5F7CB8"},removeFN:function(t,e){t.chart.customChart=null,t.setMainSeriesRenderer()}},"Pivot Points":{name:"Pivot Points",overlay:!0,seriesFN:e.Studies.displayPivotPoints,calculateFN:e.Studies.calculatePivotPoints,inputs:{Type:["standard","fibonacci"],Continuous:!1,Shading:!1},outputs:{Pivot:"auto","Resistance 1":"#b82c0b","Support 1":"#699158","Resistance 2":"#e36460","Support 2":"#b3d987","Resistance 3":"#ffd0cf","Support 3":"#d3e8ae"},parameters:{init:{opacity:.2}}},Alligator:{name:"Alligator",overlay:!0,seriesFN:e.Studies.displayAlligator,calculateFN:e.Studies.calculateAlligator,inputs:{"Show Lines":!0,"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3,"Show Fractals":!1},outputs:{Jaw:"#0000FF",Teeth:"#FF0000",Lips:"#00DD00"}},Gator:{name:"Gator Oscillator",seriesFN:e.Studies.displayGator,calculateFN:e.Studies.calculateAlligator,inputs:{"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0},"Ichimoku Clouds":{name:"Ichimoku Clouds",overlay:!0,calculateFN:e.Studies.calculateIchimoku,seriesFN:e.Studies.displayIchimoku,inputs:{"Conversion Line Period":9,"Base Line Period":26,"Leading Span B Period":52,"Lagging Span Period":26},outputs:{"Conversion Line":"#0000FF","Base Line":"#FF0000","Leading Span A":"#00FF00","Leading Span B":"#FF0000","Lagging Span":"#808000"}},"Perf Idx":{name:"Performance Index",centerline:1,initializeFN:e.Studies.initPriceRelative,seriesFN:e.Studies.displayVsComparisonSymbol,calculateFN:e.Studies.calculatePerformance,inputs:{Period:120,"Comparison Symbol":"SPY"},outputs:{Result:"auto",Gain:"#00DD00",Loss:"#FF0000"},deferUpdate:!0},Beta:{name:"Beta",centerline:1,initializeFN:e.Studies.initPriceRelative,seriesFN:e.Studies.displayVsComparisonSymbol,calculateFN:e.Studies.calculateBeta,inputs:{Period:20,"Comparison Symbol":"SPY"},deferUpdate:!0},Ulcer:{name:"Ulcer Index",calculateFN:e.Studies.calculateUlcerIndex,inputs:{Period:14,Field:"field"}},"Bal Pwr":{name:"Balance of Power",range:"-1 to 1",centerline:0,calculateFN:e.Studies.calculateBalanceOfPower,inputs:{Period:14,"Moving Average Type":"ma"}},"Trend Int":{name:"Trend Intensity Index",calculateFN:e.Studies.calculateTrendIntensity,range:"0 to 100",inputs:{Period:14,Field:"field","Signal Period":9},outputs:{TII:"auto",Signal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}},Choppiness:{name:"Choppiness Index",calculateFN:e.Studies.calculateChoppiness,centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:61.8,studyOverBoughtColor:"auto",studyOverSoldValue:38.2,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:50,step:"0.1"},studyOverSoldValue:{max:50,step:"0.1"}}},Disparity:{name:"Disparity Index",calculateFN:e.Studies.calculateDisparity,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}},"Rainbow MA":{name:"Rainbow Moving Average",overlay:!0,calculateFN:e.Studies.calculateRainbow,seriesFN:e.Studies.displayRainbowMA,inputs:{Period:2,Field:"field"},outputs:{SMA1:"#FF0000",SMA2:"#FF7F00",SMA3:"#FFFF00",SMA4:"#7FFF00",SMA5:"#00FF7F",SMA6:"#00FFFF",SMA7:"#007FFF",SMA8:"#0000FF",SMA9:"#7F00FF",SMA10:"#FF00FF"}},"Rainbow Osc":{name:"Rainbow Oscillator",calculateFN:e.Studies.calculateRainbow,seriesFN:e.Studies.displayRainbowOsc,centerline:0,inputs:{Period:2,Field:"field","HHV/LLV Lookback":10},outputs:{"Positive Bar":"#00DD00","Negative Bar":"#FF0000"}},"Pring KST":{name:"Pring's Know Sure Thing",calculateFN:e.Studies.calculateKST,inputs:{Field:"field","Lightest Rate of Change Period":10,"Lightest SMA Period":10,"Light Rate of Change Period":15,"Light SMA Period":10,"Heavy Rate of Change Period":20,"Heavy SMA Period":10,"Heaviest Rate of Change Period":30,"Heaviest SMA Period":15,"Signal Period":9},outputs:{KST:"#00DD00",KSTSignal:"#FF0000"}},"Pring Sp-K":{name:"Pring's Special K",calculateFN:e.Studies.calculateSpecialK,inputs:{Field:"field",Interval:["daily","weekly"]}},Darvas:{name:"Darvas Box",underlay:!0,calculateFN:e.Studies.calculateDarvas,seriesFN:e.Studies.displayDarvas,inputs:{"ATH Lookback Period":100,"Exit Field":["close","high/low"],"Ghost Boxes":!0,"Stop Levels":!1,"Level Offset":.01,"Price Minimum":5,"Volume Spike":!1,"Volume % of Avg":400},outputs:{Darvas:"#5F7CB8",Ghost:"#699158",Levels:"auto"},customRemoval:!0,attributes:{"Price Minimum":{min:.01,step:.01},yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}},Supertrend:{name:"Supertrend",overlay:!0,seriesFN:e.Studies.displaySupertrend,calculateFN:e.Studies.calculateSupertrend,inputs:{Period:7,Multiplier:3},outputs:{Uptrend:"#8cc176",Downtrend:"#b82c0c"},attributes:{Multiplier:{min:.1,step:.1}}},"vol profile":{name:"Volume Profile",underlay:!0,seriesFN:e.Studies.displayVolumeProfile,calculateFN:null,inputs:{},outputs:{"Bars Color":"#b64a96"},customRemoval:!0,parameters:{init:{displayBorder:!0,displayVolume:!1,numberOfBars:30,widthPercentage:.25}},attributes:{yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}},Vortex:{name:"Vortex Indicator",calculateFN:e.Studies.calculateVortex,centerline:1,outputs:{"+VI":"#00FF00","-VI":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:1.1,studyOverBoughtColor:"auto",studyOverSoldValue:.9,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:1,step:"0.01"},studyOverSoldValue:{max:1,step:"0.01"}}},ZigZag:{name:"ZigZag",overlay:!0,seriesFN:e.Studies.displayZigZag,calculateFN:e.Studies.calculateZigZag,inputs:{"Distance(%)":10},parameters:{init:{label:!1}},attributes:{"Distance(%)":{min:.1,step:.1}}},PSY:{name:"Psychological Line",range:"0 to 100",calculateFN:e.Studies.calculatePsychologicalLine,inputs:{Period:20}},"MA Dev":{name:"Moving Average Deviation",calculateFN:e.Studies.calculateMADev,seriesFN:e.Studies.displayHistogramWithSeries,inputs:{Period:12,Field:"field","Moving Average Type":"ma","Points Or Percent":["Points","Percent"]},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},Shinohara:{name:"Shinohara Intensity Ratio",calculateFN:e.Studies.calculateShinohara,inputs:{Period:26},outputs:{"Strong Ratio":"#E99B54","Weak Ratio":"#5F7CB8"}},stochastics:{name:"Stochastics",range:"0 to 100",calculateFN:e.Studies.calculateStochastics,inputs:{Period:14,Field:"field",Smooth:!0},outputs:{Fast:"auto",Slow:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}},PVAT:{name:"Projected Volume at Time",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,zoom:0},calculateFN:e.Studies.calculateProjectedVolume,seriesFN:e.Studies.displayProjectedVolume,inputs:{"Lookback Days":10,"Anchor Time":"09:30","Alert Threshold":["+50%","+40%","+30%","+20%","+10%","None","-10%","-20%","-30%","-40%","-50%"]},outputs:{"Average Line":"#fe641c","Alert Bar":"#cfbd0e","Up Volume":"#8cc176","Down Volume":"#b82c0c"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1},"Alert Threshold":{defaultSelected:"+50%"}}},PAV:{name:"Projected Aggregate Volume",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,zoom:0},calculateFN:e.Studies.calculateProjectedVolume,seriesFN:e.Studies.displayProjectedVolume,inputs:{"Lookback Days":10,"Anchor Time":"09:30"},outputs:{"Average Line":"#fe641c","Up Volume":"#8cc176","Down Volume":"#b82c0c"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1}}}});else{1423815742,1360931229,x.m0R0(14),i=x.O0R0("2",0);for(var a=1;1423815742!==x.x1y(a.toString(),a.toString().length,16864);a++)"studiesA","dvanced feature require","s first activating studies feature.",console.error("studiesAdvanced feature requires first activating studies feature."),i+=2;1360931229!==x.x1y(i.toString(),i.toString().length,32958)&&console.error("")}},u={CIQ:p.c,SplinePlotter:p.d,timezoneJS:p.y,$$:p.a,$$$:p.b},"undefined"!==("undefined"==typeof __TREE_SHAKE__?"undefined":v(__TREE_SHAKE__))&&__TREE_SHAKE__||(u.CIQ||p.c).activateImports(n,s,o,l,h,c,null);var S=null;d.c.deprecationWarning=function(t){S||(S={},setInterval((function(){for(var t in S)console.warn(t+" ("+S[t]+" occurrences)"),delete S[t]}),1e4)),S[t]?S[t]++:S[t]=1};var C=d.c.deprecationWarning;Function.prototype.ciqInheritsFrom||(Function.prototype.ciqInheritsFrom=function(t,e){C("Function.prototype.ciqInheritsFrom() has been deprecated.  Use CIQ.inheritsFrom(me, ctor, autosuper) instead."),d.c.inheritsFrom(this,t,e)},Function.prototype.stxInheritsFrom=Function.prototype.ciqInheritsFrom),String.prototype.capitalize=function(){return C("String.prototype.capitalize() has been deprecated.  Use CIQ.capitalize(string) instead."),d.c.capitalize(this)},CanvasRenderingContext2D.prototype.dashedLineTo=function(t,e,i,a,r){if(C("CanvasRenderingContext2D.prototype.dashedLineTo() has been deprecated.  Use native CanvasRenderingContext2D methods such as moveTo(), lineTo() and setLineDash() instead."),!(r instanceof Array))return r&&console.log('WARNING: Unsupported drawing pattern "'+r+'"; defaulting to "solid"'),void this.stxLine(t,e,i,a,this.strokeStyle,this.globalAlpha,this.lineWidth);if(e!==1/0&&t!==1/0&&a!==1/0&&i!==1/0){var n=function(t,e){return t-e<=1e-8},s=function(t,e){return t-e>=-1e-8},o=function(t,e){return Math.min(t,e)},l=function(t,e){return Math.max(t,e)},h={thereYet:s,cap:o},c={thereYet:s,cap:o};if(e-a>0&&(c.thereYet=n,c.cap=l),t-i>0&&(h.thereYet=n,h.cap=l),this.moveTo(t,e),!isNaN(t)&&!isNaN(e))for(var u=t,d=e,p=0,m=!0;!h.thereYet(u,i)||!c.thereYet(d,a);){var g=Math.atan2(a-e,i-t),f=r[p];u=h.cap(i,u+Math.cos(g)*f),d=c.cap(a,d+Math.sin(g)*f),m?this.lineTo(u,d):this.moveTo(u,d),p=(p+1)%r.length,m=!m}}},CanvasRenderingContext2D.prototype.stxLine=function(t,e,i,a,r,n,s,o){C("CanvasRenderingContext2D.prototype.stxLine() has been deprecated.  Use native CanvasRenderingContext2D methods such as moveTo() and lineTo() instead."),this.beginPath(),this.lineWidth=s,this.strokeStyle=r,this.globalAlpha=n,o&&o.length?this.dashedLineTo(t,e,i,a,o):(this.moveTo(t,e),this.lineTo(i,a)),this.stroke(),this.closePath(),this.lineWidth=1},CanvasRenderingContext2D.prototype.stxCircle=function(t,e,i,a){C("CanvasRenderingContext2D.prototype.stxCircle() has been deprecated.  Use native CanvasRenderingContext2D methods such as arc() instead."),this.beginPath(),this.arc(t,e,i,0,2*Math.PI,!1),a&&this.fill(),this.stroke(),this.closePath()},d.c.getAjaxServer=function(t){return C("CIQ.getAjaxServer() has been deprecated.  Use `new XMLHttpRequest` instead."),new XMLHttpRequest},d.c.convertClickToTouchEnd=function(t){C("CIQ.convertClickToTouchEnd() has been deprecated.  Use CIQ.safeClickTouch() instead.");var e=document.getElementById(t),i=e.getAttribute("onClick");i&&(e.removeAttribute("onClick"),e.setAttribute("onTouchEnd",i))},d.c.standardUTCDate=function(t){C("CIQ.standardUTCDate(dt) has been deprecated.  Use dt.toISOString() instead.");var e=t.getUTCMonth()+1;e<10&&(e="0"+e);var i=t.getUTCDate();i<10&&(i="0"+i);var a=t.getUTCHours();a<10&&(a="0"+a);var r=t.getUTCMinutes();r<10&&(r="0"+r);var n=t.getUTCSeconds();return n<10&&(n="0"+n),t.getUTCFullYear()+"-"+e+"-"+i+"T"+a+":"+r+":"+n+"Z"},d.c.isDST=function(t){C("CIQ.isDST() has been deprecated.  Use dt.toISOString() instead."),t||(t=new Date);var e=new Date(t.getFullYear(),0,1),i=new Date(t.getFullYear(),6,1),a=Math.max(e.getTimezoneOffset(),i.getTimezoneOffset());return t.getTimezoneOffset()!=a},d.c.getEventDOM=function(t){return C("CIQ.getEventDOM() has been deprecated.  Use `e.target` instead."),t?t.target:window.event.srcElement},d.c.appendClassName=function(t,e){if(C("CIQ.appendClassName() has been deprecated.  Use `node.classList.add(className)` instead."),t&&t.className!=e){for(var i=t.className.split(" "),a=0;a<i.length;a++)if(i[a]==e)return;t.className?t.className+=" "+e:t.className=e}},d.c.unappendClassName=function(t,e){if(C("CIQ.unappendClassName() has been deprecated.  Use `node.classList.remove(className)` instead."),t&&-1!=t.className.indexOf(e))if(t.className==e)t.className="";else{for(var i=t.className.split(" "),a="",r=0;r<i.length;r++)i[r]!=e&&(""!==a&&(a+=" "),a+=i[r]);t.className=a}},d.c.swapClassName=function(t,e,i){C("CIQ.swapClassName() has been deprecated.  Use `node.classList.replace(oldClassName, newClassName)` instead."),d.c.unappendClassName(t,i),d.c.appendClassName(t,e)},d.c.hasClassName=function(t,e){return C("CIQ.hasClassName() has been deprecated.  Use `node.classList.contains(className)` instead."),!!t&&(" "+t.className+" ").indexOf(" "+e+" ")>-1},d.c.toggleClassName=function(t,e){C("CIQ.toggleClassName() has been deprecated.  Use `node.classList.toggle(className)` instead."),d.c.hasClassName(t,e)?d.c.unappendClassName(t,e):d.c.appendClassName(t,e)},function(){var t,e,i=document.attachEvent,a=navigator.userAgent.match(/Trident/),r=(t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,20)},function(e){return t(e)}),n=(e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(t){return e(t)});function s(t){var e=t.target||t.srcElement;e.__resizeRAF__&&n(e.__resizeRAF__),e.__resizeRAF__=r((function(){var i=e.__resizeTrigger__;i.__resizeListeners__.forEach((function(e){e.call(i,t)}))}))}function o(t){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",s)}d.c.addResizeListener=function(t,e){C("CIQ.addResizeListener() has been deprecated.  Use CIQ.UI.addResizeListener() instead.");var r=document.querySelector("cq-ui-manager");if(r.length>0&&(r=r[0]).registerForResize(t),!t.__resizeListeners__)if(t.__resizeListeners__=[],i)t.__resizeTrigger__=t,t.attachEvent("onresize",s);else{var n=t.__resizeTrigger__=document.createElement("object");n.setAttribute("style","visibility:hidden; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1; border:0px;"),n.__resizeElement__=t,n.onload=o,n.type="text/html",a&&t.appendChild(n),n.data="about:blank",a||t.appendChild(n)}t.__resizeListeners__.push(e)},d.c.removeResizeListener=function(t,e){C("CIQ.removeResizeListener() has been deprecated.  Use CIQ.UI.removeResizeListener() instead.");var a=document.querySelector("cq-ui-manager");a.length>0&&(a=a[0]).unregisterForResize(t),t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||(i?t.detachEvent("onresize",s):(t.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",s),t.__resizeTrigger__=!t.removeChild(t.__resizeTrigger__)))}}(),d.c.Renderer.prototype.performCalculations=function(){C("CIQ.Renderer.prototype.performCalculations has been deprecated.  Use CIQ.Renderer.prototype.adjustYAxis instead.")},d.c.ChartEngine.hideDates=function(){return C("CIQ.Renderer.hideDates is no longer supported.  To hide an axis, set its noDraw property.  To hide the floating date label, set stxx.controls.floatDate=null."),!1},d.c.ChartEngine.chartShowsHighs=function(t){return C("CIQ.ChartEngine.prototype.chartShowsHighs has been deprecated.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),1!={line:1,colored_line:1,mountain:1,colored_mountain:1,baseline_delta:1,baseline_delta_mountain:1,histogram:1,scatterplot:1,step:1,colored_step:1}[t]},d.c.ChartEngine.prototype.createBlock=function(t,e,i,a,r,n){C("CIQ.ChartEngine.prototype.createBlock has been deprecated.  Use native canvas context operation fillRect instead."),n||(n=this.chart.context),void 0!==a&&(this.canvasColor(r,n),n.fillRect(t,i,e,a),n.globalAlpha=1)},d.c.ChartEngine.prototype.setVolumeUnderlay=function(t){C("CIQ.ChartEngine.prototype.setVolumeUnderlay is no longer supported.  To enable a volume underlay, use CIQ.Studies.addStudy(stxx, 'vol undr').  To disable, use CIQ.Studies.removeStudy."),this.layout.volumeUnderlay=t,this.chart.canvas&&this.draw(),this.changeOccurred("layout")},d.c.ChartEngine.prototype.serializeDrawings=function(){return C("CIQ.ChartEngine.prototype.serializeDrawings has been deprecated.  Use CIQ.ChartEngine.prototype.exportDrawings instead."),this.exportDrawings()},d.c.ChartEngine.prototype.reconstructDrawings=function(t){C("CIQ.ChartEngine.prototype.reconstructDrawings has been deprecated.  Use CIQ.ChartEngine.prototype.importDrawings instead."),this.importDrawings(t)},d.c.ChartEngine.prototype.computePosition=function(t,e){return C("CIQ.ChartEngine.prototype.computePosition has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromBar instead."),void 0===e&&(e=0),t*this.layout.candleWidth+e+this.micropixels},d.c.ChartEngine.prototype.computeColor=function(t,e){return C("CIQ.ChartEngine.prototype.computeColor has been deprecated.  There is no suggested alternative."),t<e?"stx_candle_up":t>e?"stx_candle_down":"stx_candle_shadow"},d.c.ChartEngine.prototype.computeLength=function(t,e){C("CIQ.ChartEngine.prototype.computeLength has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromPrice to compute values and find the difference.");var i=this.pixelFromPrice(t);return this.pixelFromPrice(e)-i},d.c.ChartEngine.prototype.setCrosshairColors=function(){C("CIQ.ChartEngine.prototype.setCrosshairColors is no longer supported.  Use CSS to set the crosshair color")},d.c.ChartEngine.prototype.valueFromPixelUntransform=function(t,e,i){return C("CIQ.ChartEngine.prototype.valueFromPixelUntransform has been deprecated.  Use CIQ.ChartEngine.prototype.valueFromPixel instead."),this.valueFromPixel(t,e,i)},d.c.ChartEngine.prototype.pixelFromPriceTransform=function(t,e,i){return C("CIQ.ChartEngine.prototype.pixelFromPriceTransform has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromPrice instead."),this.pixelFromPrice(t,e,i)},d.c.ChartEngine.prototype.isDailyInterval=function(t){return C("CIQ.ChartEngine.prototype.isDailyInterval has been deprecated. Use CIQ.ChartEngine.isDailyInterval instead."),d.c.ChartEngine.isDailyInterval(t)},d.c.ChartEngine.prototype.newChart=function(t,e,i,a,r){C("CIQ.ChartEngine.prototype.newChart has been deprecated. Use CIQ.ChartEngine.prototype.loadChart instead.");var n={masterData:e,chart:i};return d.c.extend(n,r,!0),this.loadChart(t,n,a)},d.c.ChartEngine.prototype.streamTrade=function(t,e,i,a){C("CIQ.ChartEngine.prototype.streamTrade has been deprecated. Use CIQ.ChartEngine.prototype.updateChartData instead.");var r=this.chart;a||(a={}),a.chart&&(r=a.chart),a.fillGaps=this.streamParameters.fillGaps;var n="object"==b(t),s=n?t.last:arguments[0],o=n?t.volume:arguments[1],l=n?t.bid:null,h=n?t.ask:null;n||(e=arguments[2],i=arguments[3]),i&&(a.secondarySeries=i);var c={DT:e,Last:s,Volume:o,Bid:l,Ask:h};this.updateChartData(c,r,a)},d.c.ChartEngine.prototype.appendMasterData=function(t,e,i){C("CIQ.ChartEngine.prototype.appendMasterData has been deprecated. Use CIQ.ChartEngine.prototype.updateChartData instead."),this.updateChartData(t,e,i)},d.c.ChartEngine.prototype.setPeriodicityV2=function(t,e,i,a){C("CIQ.ChartEngine.prototype.setPeriodicityV2 has been deprecated. Use CIQ.ChartEngine.prototype.setPeriodicity instead."),"function"==typeof i&&(a=i,i=null),this.runPrepend("setPeriodicityV2",arguments)||(this.setPeriodicity(t,e,i,a),this.runAppend("setPeriodicityV2",arguments))},d.c.ChartEngine.prototype.addChart=function(t,e){C("CIQ.ChartEngine.prototype.addChart has been deprecated. Add manually to stxx.charts object instead."),e.name=t,this.charts[t]=e};var w=d.c.ChartEngine.prototype.changeOccurred;d.c.ChartEngine.prototype.changeOccurred=function(t){this.currentlyImporting||(this.changeCallback&&this.changeCallback(this,t),w.call(this,t))};var T=d.c.ChartEngine.prototype.construct;function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}d.c.ChartEngine.prototype.construct=function(){function t(t,e,i){return t._deprecatedPropertyValues||(t._deprecatedPropertyValues={}),e in t._deprecatedPropertyValues||(t._deprecatedPropertyValues[e]=i),t._deprecatedPropertyValues[e]}function e(t,e,i){t._deprecatedPropertyValues||(t._deprecatedPropertyValues={}),t._deprecatedPropertyValues[e]=i}function i(e,i,a){return function(){return C("CIQ.ChartEngine.prototype.callbacks have been deprecated.  Iterate through CIQ.ChartEngine.prototype.callbackListeners instead."),t(this,e,a||null)}}function a(t,e){return function(i){C("CIQ.ChartEngine.prototype.callbacks have been deprecated.  Utilize CIQ.ChartEngine.prototype.addEventListener to add a callback, and/or CIQ.ChartEngine.prototype.removeEventListener to remove one."),this._deprecatedPropertyValues||(this._deprecatedPropertyValues={});var a=this._deprecatedPropertyValues[t];a&&e.removeEventListener(t,a),i&&e.addEventListener(t,i),this._deprecatedPropertyValues[t]=i}}var r;T.call(this),Object.defineProperties(this,{changeCallback:{enumerable:!0,get:function(){return t(this,"changeCallback",null)},set:function(t){C("CIQ.ChartEngine.prototype.changeCallback has been deprecated.  Use CIQ.ChartEngine.prototype.addEventListener instead."),e(this,"changeCallback",t)}},highLowBars:{enumerable:!0,get:function(){return C("CIQ.ChartEngine.prototype.highLowBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),t(this,"highLowBars",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,wave:!0,rangechannel:!0,none:!0})},set:function(t){C("CIQ.ChartEngine.prototype.highLowBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),e(this,"highLowBars",t)}},standaloneBars:{enumerable:!0,get:function(){return C("CIQ.ChartEngine.prototype.standaloneBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.standaloneBars instead."),t(this,"standaloneBars",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,histogram:!0,scatterplot:!0})},set:function(t){C("CIQ.ChartEngine.prototype.standaloneBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.standaloneBars instead."),e(this,"standaloneBars",t)}},barsHaveWidth:{enumerable:!0,get:function(){return C("CIQ.ChartEngine.prototype.barsHaveWidth is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.barsHaveWidth instead."),t(this,"barsHaveWidth",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,histogram:!0,scatterplot:!0,wave:!0})},set:function(t){C("CIQ.ChartEngine.prototype.barsHaveWidth is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.barsHaveWidth instead."),e(this,"barsHaveWidth",t)}}}),this.callbacks={},Object.defineProperties(this.callbacks,{studyOverlayEdit:{enumerable:!0,get:i("studyOverlayEdit"),set:a("studyOverlayEdit",this)},studyPanelEdit:{enumerable:!0,get:i("studyPanelEdit"),set:a("studyPanelEdit",this)},tap:{enumerable:!0,get:i("tap"),set:a("tap",this)},rightClick:{enumerable:!0,get:i("rightClick"),set:a("rightClick",this)},longhold:{enumerable:!0,get:i("longHold"),set:a("longHold",this)},move:{enumerable:!0,get:i("move"),set:a("move",this)},layout:{enumerable:!0,get:i("layout"),set:a("layout",this)},drawing:{enumerable:!0,get:i("drawing"),set:a("drawing",this)},drawingEdit:{enumerable:!0,get:i("drawingEdit"),set:a("drawingEdit",this)},preferences:{enumerable:!0,get:i("preferences"),set:a("preferences",this)},theme:{enumerable:!0,get:i("theme"),set:a("theme",this)},symbolChange:{enumerable:!0,get:i("symbolChange"),set:a("symbolChange",this)},symbolImport:{enumerable:!0,get:i("symbolImport"),set:a("symbolImport",this)},calculateTradingDecimalPlaces:{enumerable:!0,get:(r=this,function(){return C("CIQ.ChartEngine.prototype.callbacks.calculateTradingDecimalPlaces has been deprecated.  Utilize CIQ.ChartEngine.Chart.prototype.calculateTradingDecimalPlaces instead."),t(this,"calculateTradingDecimalPlaces",r.chart.calculateTradingDecimalPlaces)}),set:function(t){return function(i){C("CIQ.ChartEngine.prototype.callbacks.calculateTradingDecimalPlaces has been deprecated.  Utilize CIQ.ChartEngine.Chart.prototype.calculateTradingDecimalPlaces instead."),e(this,"calculateTradingDecimalPlaces",i),t.chart.calculateTradingDecimalPlaces=i}}(this)}}),Object.defineProperty(this.streamParameters,"fillGaps",{enumerable:!0,get:function(){return C("CIQ.ChartEngine.prototype.streamParameters.fillGaps has been deprecated.  Use CIQ.ChartEngine.prototype.updateChartData instead, with params.fillGaps=true or rely on cleanupGaps as default behavior."),t(this,"fillGaps",!0)},set:function(t){C("CIQ.ChartEngine.prototype.streamParameters.fillGaps has been deprecated.  Use CIQ.ChartEngine.prototype.updateChartData instead, with params.fillGaps=true or rely on cleanupGaps as default behavior."),e(this,"fillGaps",t)}})},"undefined"!=typeof window&&Object.defineProperties(window,{STX:{enumerable:!0,get:function(){return C("STX namespace has been deprecated.  Use CIQ namespace instead."),d.c}},STXChart:{enumerable:!0,get:function(){return C("STXChart namespace has been deprecated.  Use CIQ.ChartEngine namespace instead."),d.c.ChartEngine}}}),d.c.ChartEngine.prototype.attachEngineQuoteFeed=function(t,e){C("CIQ.ChartEngine.prototype.attachEngineQuoteFeed has been deprecated. Use CIQ.ChartEngine.prototype.attachQuoteFeed instead."),this.attachQuoteFeed(t,e)},d.c.ChartEngine.prototype.dragPlot=function(t){C("CIQ.ChartEngine.prototype.dragPlot is no longer supported.  Use CIQ.ChartEngine.prototype.dragPlotOrAxis instead.")},d.c.ChartEngine.prototype.dragYAxis=function(t){C("CIQ.ChartEngine.prototype.dragYAxis is no longer supported.  Use CIQ.ChartEngine.prototype.dragPlotOrAxis instead.")},d.c.Drawing=d.c.Drawing||function(){this.chartsOnly=!1,this.penDown=!1},d.c.Drawing.prototype.setLineColor=function(){if(C("CIQ.Drawing.prototype.setLineColor has been deprecated.  Use CIQ.Drawing.prototype.setLineColor instead."),d.c.Drawing.prototype.getLineColor)return d.c.Drawing.prototype.getLineColor.apply(this,arguments)},d.c.Studies=d.c.Studies||function(){},d.c.Studies.quickAddStudy=function(){if(C("CIQ.Studies.quickAddStudy has been deprecated.  Use CIQ.Studies.addStudy instead."),d.c.Studies.addStudy)return d.c.Studies.addStudy.apply(null,arguments)},d.c.Studies.overZones=function(){if(C("CIQ.Studies.overZones has been deprecated.  Use CIQ.Studies.drawZones instead."),d.c.Studies.drawZones)return d.c.Studies.drawZones.apply(null,arguments)},d.c.Studies.volUnderlay=function(){C("CIQ.Studies.volUnderlay has been deprecated.  Use CIQ.Studies.createVolumeChart instead."),d.c.Studies.createVolumeChart&&d.c.Studies.createVolumeChart.apply(null,arguments)},d.c.Studies.determineMinMax=function(t,e,i){C("CIQ.Studies.determineMinMax is no longer supported.  The calculation is done automatically elsewhere.")},d.c.Studies.createYAxis=function(t,e,i,a){C("CIQ.Studies.createYAxis is no longer supported.  The action is done automatically elsewhere.")},d.c.Studies.volumeChart=function(t,e,i,a){C("CIQ.Studies.volumeChart has been deprecated.  Use CIQ.ChartEngine.prototype.drawHistogram instead.");var r,n,s=-1*Number.MAX_VALUE;for(r in i)for(var o=0;o<i[r].length;o++)(n=i[r][o])&&n>s&&(s=n);var l=t.panels[e.panel],h=Math.floor(l.yAxis.bottom)+.5,c=h-(Math.floor(l.yAxis.top)+.5),u=t.layout.candleWidth,d=null;e.parameters&&e.parameters.displayBorder||(a=null);var p=0;a||(p=(u-t.chart.tmpWidth)/2);var m=e.getContext(t);for(r in m.lineWidth=1,t.startClip(e.panel),i){a&&(d=a[r]),m.fillStyle=r,d&&(m.strokeStyle=d),m.beginPath();for(var g,f=h+.5,y=Math.floor(t.pixelFromBar(0,l.chart)),v=0;v<i[r].length;v++)if(t.chart.dataSegment[v]&&t.chart.dataSegment[v].candleWidth?(u=t.chart.dataSegment[v].candleWidth,a||(p=u/4)):(u=t.layout.candleWidth,a||(p=(u-t.chart.tmpWidth)/2)),0===v&&(g=y-=u/2),n=i[r][v]){var x,b,S=n*(c/s),w=Math.min(Math.floor(h-c+(c-S))+.5,h);x=Math.floor(g+p),b=Math.floor(g+u-p),x=Math.max(x,y),m.moveTo(x,h),m.lineTo(b,h),m.lineTo(b,w),m.lineTo(x,w),a?(f>w||0===v)&&m.lineTo(x,f):m.lineTo(x,h),f=w,g+=u}else f=h,g+=u;m.fill(),m.strokeStyle=d,a&&t.layout.candleWidth>=2&&m.stroke(),m.closePath()}t.endClip()},d.c.UI||(d.c.UI={}),d.c.UI.observe=function(t){if(C("CIQ.UI.observe has been deprecated.  Use CIQ.UI.observeProperty instead."),Object.observe){var e=this,i=function(t){t.forEach(a)};return Object.observe(t.obj,i,["update","add","delete"]),a({name:t.member}),i}function a(i){var a=!1;if(t.member){if(i.name===t.member)a=!0;else if(t.member.constructor==Array)for(var r=0;r<t.member.length;r++)i.name===t.member[r]&&(a=!0)}else a=!0;if(a){var n=$(t.selector);if(!n.length&&"callback"===t.action)return void t.value.call(e,t);"class"===t.action&&n.removeClass(t.value),n.each((function(){var i=!1;t.member&&(t.condition?t.obj[t.member]===t.condition&&(i=!0):i=t.obj[t.member]),"class"===t.action&&i&&n.addClass(t.value),"callback"===t.action&&t.value.call(e,t,this),"value"===t.action&&(t.value?this.value=t.value:t.obj[t.member]?this.value=t.obj[t.member]:this.value="")}))}}C("You must include thirdparty/object-observe.js in your project to use CIQ.UI.observe.")},d.c.UI.unobserve=function(t){C("CIQ.UI.unobserve has been deprecated.  Use CIQ.UI.unobserveProperty instead."),Object.unobserve&&Object.unobserve(t.obj,t.handler)},d.c.UI.Lookup=function(){},d.c.UI.Lookup.Driver=function(){this.deprecated=!0},d.c.UI.Lookup.Driver.prototype.acceptText=function(t,e,i,a){this.cb},d.c.UI.Lookup.Driver.ChartIQ=function(t){C("CIQ.UI.Lookup.Driver.ChartIQ has been deprecated.  Use CIQ.ChartEngine.Driver.Lookup.ChartIQ instead."),this.exchanges=t,this.exchanges||(this.exchanges=["XNYS","XASE","XNAS","XASX","INDCBSX","INDXASE","INDXNAS","IND_DJI","ARCX","INDARCX","forex"]),this.url="https://symbols.chartiq.com/chiq.symbolserver.SymbolLookup.service",this.requestCounter=0},d.c.inheritsFrom(d.c.UI.Lookup.Driver.ChartIQ,d.c.UI.Lookup.Driver),d.c.UI.Lookup.Driver.ChartIQ.prototype.acceptText=function(t,e,i,a){"FX"==e&&(e="FOREX"),isNaN(parseInt(i,10))&&(i=100);var r=this.url+"?t="+encodeURIComponent(t)+"&m="+i+"&x=[";this.exchanges&&(r+=this.exchanges.join(",")),r+="]",e&&"ALL"!=e.toUpperCase()&&(r+="&e="+e);var n=++this.requestCounter,s=this;d.c.postAjax({url:r,cb:function(t,e){if(!(n<s.requestCounter)&&200==t)try{for(var i=(e=JSON.parse(e)).payload.symbols,r=[],o=0;o<i.length;o++){var l=i[o].split("|"),h={symbol:l[0],name:l[1],exchDisp:l[2]};r.push({display:[h.symbol,h.name,h.exchDisp],data:h})}a(r)}catch(t){}}})},"undefined"!=typeof window&&Object.defineProperty(window,"STXSocial",{enumerable:!0,get:function(){return C("STXSocial namespace has been deprecated.  Use CIQ.Share namespace instead."),d.c.Share}});var D=function(t){var e="undefined"!=typeof _CIQ?_CIQ:t.CIQ;e.Animation=e.Animation||function(t){if(!t)throw new Error("Invalid constructor arguments.");var i,a,r;if(t instanceof e.ChartEngine?(i=arguments[0],a=arguments[1],r=arguments[2]):(i=t.stx,a=t.animationParameters,r=t.easeMachine),!i)return console.warn("No CIQ.ChartEngine provided. Cannot properly create CIQ.Animation instance");var n={stayPut:!1,ticksFromEdgeOfScreen:5,granularity:1e6};a=e.extend(n,a),n.tension&&(i.chart.tension=a.tension),i.tickAnimator=r||new e.EaseMachine(Math.easeOutCubic,1e3);var s=new e.EaseMachine(Math.easeInOutCubic,1e3),o=["#0298d3","#19bcfc","#5dcffc","#9ee3ff"],l=0,h=20,c=0,u=!1,d=null;function p(){u=!1,d=null}i.addEventListener(["symbolChange","layout"],(function(t){p()})),i.prepend("updateCurrentMarketData",(function(t,e,i,a){e||(e=this.chart),a&&a.fromTrade&&(e.closePendingAnimation||0===e.closePendingAnimation)&&(a.finalClose=e.closePendingAnimation)})),i.prepend("updateChartData",(function(t,i,r){var n=this;if(i||(i=n.chart),i&&i.defaultChartStyleConfig&&"none"!=i.defaultChartStyleConfig&&(void 0===r||!r.animationEntry&&!r.secondarySeries)&&i.dataSegment){var s=n.tickAnimator,o=this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation;if(o){if(!s)return void console.warn("Animation plug-in can not run because the tickAnimator has not been declared. See instructions in animation.js");if(this.prevSymbol!=i.symbol&&(this.prevQuote=0,i.closePendingAnimation=null,this.prevSymbol=i.symbol),A(),s.stop(),t.length>2)return}var l=e.clone(r);l||(l={}),l.animationEntry=!0,l.bypassGovernor=!0,l.noCreateDataSet=!1,l.appending=!0,l.firstLoop=!0;var h=this.chart.symbol,c=this.layout.periodicity,p=this.layout.interval,m=this.layout.timeUnit;if(o){var g=t[t.length-1];this.prevQuote=this.currentQuote();var f=!1,y=!1;if(1==c&&2==t.length){this.prevQuote=t[0];var v=i.dataSet.length;D(this.prevQuote),v==i.dataSet.length&&(y=!0)}if(!(g&&g.Close&&this.prevQuote&&this.prevQuote.Close))return!1;if(this.extendedHours&&i.market.market_def){var x=g.DT;if(e.ChartEngine.isDailyInterval(p))u=!i.market.isMarketDate(x);else if(!d||d<=x){var b=i.market.getSession(x);u=!(""===b||this.layout.marketSessions&&this.layout.marketSessions[b]),d=i.market[u?"getNextOpen":"getNextClose"](x)}if(u)return this.draw(),!1}var S=c;"second"==p||"second"==m?S*=1e3:"minute"!=p&&"minute"!=m||(S*=6e4),isNaN(p)||(S*=p),f="day"==p||"day"==m?g.DT.getDate()!=this.prevQuote.DT.getDate():"week"==p||"week"==m?g.DT.getDate()>=this.prevQuote.DT.getDate()+7:"month"==p||"month"==m?g.DT.getMonth()!=this.prevQuote.DT.getMonth():g.DT.getTime()>=this.prevQuote.DT.getTime()+S;var C=!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars,w=0;if(f){if(!this.animations.zoom.hasCompleted)return!1;var T=this.layout.candleWidth;if(i.scroll<=i.maxTicks)for(;this.micropixels>0;)i.scroll++,this.micropixels-=T;i.scroll<=i.maxTicks?(this.previousMicroPixels=this.micropixels,this.nextMicroPixels=this.micropixels+T,w=-1*T,i.dataSegment.length<i.maxTicks-a.ticksFromEdgeOfScreen&&!a.stayPut&&(this.nextMicroPixels=this.micropixels,i.scroll++),i.animatingHorizontalScroll=C,i.previousDataSetLength=i.dataSet.length):y||i.scroll++}i.closePendingAnimation=g.Close;var k=f&&!C?g.Open:this.prevQuote.Close;return s.run(function(t,r,o){return function(u){var d=u.Close;if(!i.dataSet.length||h!=i.symbol||c!=n.layout.periodicity||p!=n.layout.interval||m!=n.layout.timeUnit)return s.stop(),void A();var g=e.clone(t);g.Adj_Close=null,g.Close=Math.round(d*a.granularity)/a.granularity,o?(g.Open||0===g.Open||(g.Open=g.Close),g.High||0===g.High||(g.High=Math.max(g.Open,g.Close)),g.Low||0===g.Low||(g.Low=Math.min(g.Open,g.Close))):(t.Close>r.High&&(g.High=g.Close),t.Close<r.Low&&(g.Low=g.Close)),i.animatingHorizontalScroll&&(n.micropixels=u.micropixels,i.lastTickOffset=u.lineOffset),l.updateDataSegmentInPlace=!s.hasCompleted;var f=[g];o&&"tick"!==n.layout.interval&&f.unshift(r),n.updateChartData(f,i,l),l.firstLoop=!1,s.hasCompleted&&A()}}(g,e.clone(this.prevQuote),f),{Close:k,micropixels:this.nextMicroPixels,lineOffset:w},{Close:g.Close,micropixels:this.micropixels,lineOffset:0}),!0}}function D(t){if(i.masterData)for(var e=i.masterData.length-1;e>=0;e--){var a=i.masterData[e];if(a.Close||0===a.Close)return a.Close=t.Close,t.LastSize&&(a.LastSize=t.LastSize),t.LastTime&&(a.LastTime=t.LastTime),n.updateCurrentMarketData({Close:a.Close,DT:a.DT,LastSize:a.LastSize,LastTime:a.LastTime}),void n.createDataSet(null,null,{appending:!0})}}function A(){if(i.animatingHorizontalScroll&&(i.animatingHorizontalScroll=!1,n.micropixels=n.nextMicroPixels=n.previousMicroPixels,i.lastTickOffset=0),null!==i.closePendingAnimation){var t=i.closePendingAnimation;i.closePendingAnimation=null,D({Close:t})}}})),i.prepend("renderYAxis",(function(t){if(!this.grabbingScreen&&this.isHome()&&(this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation)){var i=t.panel.yAxis;if(!e.Comparison||i.priceFormatter!=e.Comparison.priceFormat)if(t.prevLowValue||0===t.prevLowValue||(t.prevLowValue=t.animatedLow=t.lowValue),t.prevHighValue||0===t.prevHighValue||(t.prevHighValue=t.animatedHigh=t.highValue),s.running||(t.animatingVerticalScroll=!1),t.prevLowValue>=t.lowValue&&t.prevHighValue<=t.highValue)t.animatingVerticalScroll&&(i.highValue=t.animatedHigh,i.lowValue=t.animatedLow);else if(s.running&&s.stop(),t.lowValue||t.highValue){var a,r=t.prevLowValue,n=t.prevHighValue;t.prevLowValue=t.lowValue,t.prevHighValue=t.highValue,t.animatingVerticalScroll=!0,s.run((a=this,function(e){t.animatedLow=e.low,t.animatedHigh=e.high,a.draw()}),{low:r,high:n},{low:t.lowValue,high:t.highValue}),i.lowValue=t.animatedLow,i.highValue=t.animatedHigh}}})),i.append("draw",(function(){if(!u&&this.chart.dataSet&&this.chart.dataSet.length&&this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation){c%h==0&&(l++,c=0),c++;var t=this.chart.context,e=this.chart.panel,i=this.currentQuote();if(!i)return;var a=i.Close,r=this.pixelFromTick(i.tick,this.chart);this.chart.lastTickOffset&&(r+=this.chart.lastTickOffset);var n=this.pixelFromPrice(a,e);this.chart.yAxis.left>r&&this.chart.yAxis.top<=n&&this.chart.yAxis.bottom>=n&&(l>=o.length&&(l=0),t.beginPath(),t.moveTo(r,n),t.arc(r,n,2+1.07*l,0,2*Math.PI,!1),t.fillStyle=o[l],t.fill())}}))}},A=function(t){var e="undefined"!=typeof _CIQ?_CIQ:t.CIQ;e.ContinuousZoom=e.ContinuousZoom||function(t){this.update(t),this.stx.continuousZoom=this,this.addSmartZoomButton=function(){var t,e=this.stx.registerChartControl&&this.stx.registerChartControl("stx-smart-zoom","SmartZoom",(t=this,function(e){t.smartZoomToggle(e),e.stopPropagation()}));e&&(this.stx.addEventListener("layout",(function(t){!0===t.stx.layout.smartzoom?e.classList.add("active"):e.classList.remove("active")})),this.stx.addEventListener("symbolImport",(function(t){!1===t.stx.layout.smartzoom&&e.classList.remove("active")})))},this.smartZoomToggle=function(t){this.smartZoomEnable(!this.stx.layout.smartzoom)},this.smartZoomEnable=function(t){this.stx.layout.smartzoom=t,this.stx.changeOccurred("layout")},this.addSmartZoomButton(),this.smartZoomEnable(!0)},e.ContinuousZoom.prototype.update=function(t){t||(t={}),this.stx=t.stx,this.periodicities=t.periodicities,this.boundaries=t.boundaries},e.ContinuousZoom.prototype.execute=function(t){function e(t){var e=t.period||t.periodicity,i=t.interval,a=t.timeUnit||"minute";switch(isNaN(i)&&(a=i,i=1),a){case"month":i*=4.35;case"week":i*=7;case"day":i*=1440;case"minute":i*=60;case"second":break;case"millisecond":i/=1e3;break;default:return null}return e*i}if(this.stx&&this.stx.layout.smartzoom){var i=this.periodicities,a=this.boundaries,r=this.stx,n=r.layout,s=r.chart;if(i&&a&&(!t&&a.maxCandleWidth&&n.candleWidth>a.maxCandleWidth||t&&a.minCandleWidth&&n.candleWidth<a.minCandleWidth||!t&&a.minTicks&&s.maxTicks<a.minTicks||t&&a.maxTicks&&s.maxTicks>a.maxTicks)){for(var o={value:t?Number.MAX_VALUE:0},l=e(n),h=0;h<i.length;h++){var c=e(i[h]);(c>l&&c<o.value&&t||c<l&&c>o.value&&!t)&&(o={value:c,periodicity:i[h]})}var u=o.periodicity;u&&r.setRange({dtLeft:s.xaxis[0].DT,dtRight:s.xaxis[s.xaxis.length-1].DT,dontSaveRangeToLayout:!0,periodicity:u})}}}},M=function(t){var e="undefined"!=typeof _CIQ?_CIQ:t.CIQ;e.ExtendedHours=e.ExtendedHours||function(t){var i=t.stx;this.filter=t.filter,i||(i=t,this.filter=!1);var a={};this.stx=i,this.stx.extendedHours=this;var r="".concat(t.menuContextClass&&"."+t.menuContextClass||"body"," .extendedhours-ui");e.addInternalStylesheet("".concat(r," { display: inherit }"),r),i.addEventListener("theme",(function(t){for(var e in a={},i.layout.marketSessions)a.session||(a.session={}),a.session[e]=i.canvasStyle("stx_market_session "+e)})),i.addEventListener("symbolChange",(function(t){"master"!=t.action||!i.layout.extended||i.chart.market.market_def&&i.chart.market.sessions.length||e.alert("There are no Extended Hours for this instrument.")})),this.prepare=function(t,e){for(var r in i.layout.extended=t,i.layout.marketSessions)a.session={},i.chart.market.disableSession(r);if(i.layout.marketSessions={},t)if(e||(e=["pre","post"]),e.length)for(var n=0;n<e.length;n++)i.layout.marketSessions[e[n]]=!0;else i.layout.marketSessions=e;for(r in i.layout.marketSessions)a.session||(a.session={}),a.session[r]=i.canvasStyle("stx_market_session "+r),i.chart.market.disableSession(r,!0)},this.complete=function(t){i.changeOccurred("layout"),i.chart.market.market_def?this.filter?(i.createDataSet(),i.draw(),t&&t()):i.loadChart(i.chart.symbol,t):t&&t()},this.set=function(t,e,i){this.prepare(t,e),this.complete(i)},this.stx.append("drawYAxis",(function(t,r){if(this.layout.extended&&t.yAxis==r.yAxis&&!1!==t.shareChartXAxis&&!t.hidden){var n=t.chart;if(!e.ChartEngine.isDailyInterval(this.layout.interval)&&(a.divider=this.canvasStyle("stx_market_session divider"),a.session)){for(var s,o,l=n.market,h=[],c={},u=0;u<n.dataSegment.length;u++){var d=n.dataSegment[u];if(d&&d.DT){var p=null;if(l.market_def)if(!s||s<=d.DT)o=l.getSession(d.DT),s=l[!(""===o||this.layout.marketSessions&&this.layout.marketSessions[o])?"getNextOpen":"getNextClose"](d.DT);var m=a.session[o];if(m&&(p=m.backgroundColor),c.color&&c.color!=p&&(h.push({start:c.start,end:c.end,color:c.color}),c={}),p){var g=this.layout.candleWidth;d.candleWidth&&(g=d.candleWidth),c.end=this.pixelFromBar(u,n)+g/2,c.start||0===c.start||(c.start=c.end-g+1),c.color=p}else c={}}}(c.start||0===c.start)&&h.push({start:c.start,end:c.end,color:c.color});var f=e.isTransparent(a.divider.backgroundColor),y=a.divider.width.replace(/px/g,""),v={y0:t.bottom,y1:t.top,color:a.divider.backgroundColor,type:"line",context:n.context,confineToPanel:t,pattern:"dashed",lineWidth:y,deferStroke:!0};for(this.startClip(t.name),n.context.beginPath(),i.highlightedDraggable&&(n.context.globalAlpha*=.3),u=0;u<h.length;u++)n.context.fillStyle=h[u].color,!f&&h[u].start>n.left&&this.plotLine(e.extend({x0:h[u].start,x1:h[u].start},v)),n.context.fillRect(h[u].start,t.top,h[u].end-h[u].start,t.bottom-t.top),!f&&h[u].end<n.right&&this.plotLine(e.extend({x0:h[u].end,x1:h[u].end},v));n.context.stroke(),this.endClip()}}}))}},P=function(t){var e="undefined"!=typeof _CIQ?_CIQ:t.CIQ;e.FullScreen=e.FullScreen||function(t){t||(t={}),t.stx?(this.stx=t.stx,this.stx.fullScreen=this,this.fullScreenButton=null,this.fullScreenState=!1,this.addFullScreenButton=function(){var t;this.stx.registerChartControl&&(this.fullScreenButton=this.stx.registerChartControl("stx-full-screen","Full Screen",(t=this,function(e){t.fullScreenToggle(e),e.stopPropagation()})))},this.fullScreenToggle=function(t){document.documentElement.requestFullscreen||document.documentElement.webkitRequestFullscreen||document.documentElement.mozRequestFullscreen||document.documentElement.msRequestFullscreen?this.getFullScreenElement()?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.mozRequestFullscreen?document.documentElement.mozRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen():(this.fullScreenState=!this.fullScreenState,this.fullScreenRender())},this.fullScreenRender=function(){var t=null;(t=e.findClosestParent(this.stx.container,"*[cq-context], cq-context, body"))&&(!0===this.fullScreenState?(this.fullScreenButton&&this.fullScreenButton.classList.add("active"),t.classList.add("full-screen")):(this.fullScreenButton&&this.fullScreenButton.classList.remove("active"),t.classList.remove("full-screen")),window.dispatchEvent(new Event("resize")))},this.onFullScreenChange=function(){this.getFullScreenElement()?this.fullScreenState=!0:this.fullScreenState=!1,this.fullScreenRender()},this.getFullScreenElement=function(){return document.fullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement},document.addEventListener("fullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("webkitfullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("mozfullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("MSFullscreenChange",this.onFullScreenChange.bind(this),!1),this.addFullScreenButton()):console.warn("The Full Screen addon requires an stx parameter")}},F=function(t){var e="undefined"!=typeof _CIQ?_CIQ:t.CIQ;e.InactivityTimer=e.InactivityTimer||function(t){var e;t.minutes&&((!t.interval||t.interval<0)&&(t.interval=60),this.stx=t.stx,this.timeout=t.minutes,this.interval=t.interval,this.wakeCB=t.wakeCB,this.sleepCB=t.sleepCB,this.sleepTimer=null,this.sleeping=!1,this.last=(new Date).getTime(),this.wakeChart=function(){clearTimeout(this.sleepTimer),this.last=(new Date).getTime(),this.sleeping&&(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(),this.sleeping=!1,document.body.classList.remove("ciq-sleeping")),this.sleepTimer=setTimeout(this.sleepChart.bind(this),6e4*this.timeout),this.wakeCB&&this.wakeCB()},this.sleepChart=function(){this.sleeping||(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(this.interval),this.sleeping=!0,document.body.classList.add("ciq-sleeping")),this.sleepCB&&this.sleepCB()},$(document).on("mousemove mousedown touchstart touchmove pointerdown pointermove keydown wheel",$("body"),(e=this,function(t){e.wakeChart()})),this.wakeChart())}},_=function(t){var e="undefined"!=typeof _CIQ?_CIQ:t.CIQ;e.Outliers=e.Outliers||function(t){if(t||(t={}),t.stx){Array.isArray(t.altColors)||(t.altColors=["#323390","#66308f","#0073ba","#f4932f","#0056a4","#00a99c","#00a553","#ea1d2c","#e9088c","#fff126","#912a8e","#ee652e","#00afed","#8ec648"]),this.stx=t.stx,this.stx.outliers=this,this.multiplier=t.multiplier||3,this.altColors=t.altColors,this.axisData={},this.stx.addEventListener("layout",(function(t){Object.keys(t.stx.outliers.axisData).forEach(function(t){this.removeAllMarkers(this.axisData[t]),delete this.axisData[t]}.bind(t.stx.outliers))}));var i="".concat(t.menuContextClass&&"."+t.menuContextClass||"body"," .outliers-ui");e.addInternalStylesheet("".concat(i," { display: inherit }"),i),this.processDataSet=function(t,e,i){if(!t.length||t.length<=1)return!1;var a=[0,0];if(!this.axisData[i.name]){var r="",n=-1;Object.keys(this.axisData).forEach(function(t){this.axisData[t].panel.name==e.name&&n++}.bind(this)),n>-1&&n<this.altColors.length&&(r=this.altColors[n]),this.axisData[i.name]={axis:i,panel:e,displayState:"none",isFlipped:!1,originalZoom:i.zoom,markerColor:r,markers:{},axisMarkers:{}}}var s=this.axisData[i.name];return Object.assign(s,this.find(t)),this.refreshMarkerArray(s),this.refreshMarkers(s),"low"!==s.displayState&&"all"!==s.displayState||null===s.outlierMin?a[0]=s.trendMin:a[0]=s.outlierMin,"high"!==s.displayState&&"all"!==s.displayState||null===s.outlierMax?a[1]=s.trendMax:a[1]=s.outlierMax,a},this.find=function(t){if(t.length&&!(t.length<=0)){var e,i,a=function(t,e){return{quote:t.quote,DT:t.quote.DT,value:t.value,position:e}},r=null,n=null,s=null,o=null,l=[],h=t.slice();h.sort((function(t,e){return t.value-e.value}));var c=h.length,u=h[Math.floor(c/4)].value,d=h[Math.floor(c*(3/4))].value,p=d-u;e=u-p*this.multiplier,i=d+p*this.multiplier;for(var m=0;m<c;m++){var g=h[m],f=h[c-(m+1)];if(g.value<=e&&l.push(a(g,"low")),f.value>=i&&l.push(a(f,"high")),null===s&&g.value<=e&&(s=g.value),null===o&&f.value>=i&&(o=f.value),null===r&&g.value>e&&(r=g.value),null===n&&f.value<i&&(n=f.value),null!==r&&null!==n)break}return{minValue:e,maxValue:i,trendMin:r,trendMax:n,outlierMin:s,outlierMax:o,activeOutliers:l}}},this.refreshMarkerArray=function(t){this.deprecateMarkers(t);var e=t.markers;t.activeOutliers.forEach(function(i){var a=i.DT.getTime().toString();e[a]||(e[a]={isFresh:!0,type:"quote",value:i.value,marker:this.markOutlier(i,i.position,t)}),e[a].isFresh=!0}.bind(this)),null!==t.outlierMax&&(e.axisHigh||(e.axisHigh={isFresh:!0,type:"axis",value:t.outlierMax,marker:this.markAxis("high",t)}),e.axisHigh.isFresh=!0),null!==t.outlierMin&&(e.axisLow||(e.axisLow={isFresh:!0,type:"axis",value:t.outlierMin,marker:this.markAxis("low",t)}),e.axisLow.isFresh=!0)},this.setDisplayState=function(t,e){"high"!=t&&"low"!=t&&"all"!=t&&(t="none");var i=t;"all"==e.displayState&&"high"==t?i="low":"all"==e.displayState&&"low"==t?i="high":"high"==e.displayState&&"low"==t||"low"==e.displayState&&"high"==t?i="all":e.displayState==t&&(i="none"),e.displayState=i,e.axis.zoom=e.originalZoom,this.refreshMarkers(e),this.stx.draw()},this.deprecateMarkers=function(t){Object.keys(t.markers).forEach(function(t){var e;(e=this.markers[t]).marker&&!e.isFresh?(e.marker.remove&&e.marker.remove(),e.marker=null):e.isFresh=!1,this.markers[t].marker||delete this.markers[t]}.bind(t))},this.removeAllMarkers=function(t){Object.keys(t.markers).forEach((function(e){var i=t.markers[e].marker;i&&(i.remove&&i.remove(),i=null),i||delete t.markers[e]}))},this.updateMarkerVisibility=function(){Object.keys(this.markers).forEach(function(t){"all"==this.displayState||this.markers[t].marker.node.classList.contains(this.displayState)?this.markers[t].marker.node.style.display="none":this.markers[t].marker.node.style.display="block"}.bind(this))},this.refreshAxisMarkers=function(t,e){var i=!1;t.classList.contains("high")&&(i=!0);var a=e.axis.top;(!e.isFlipped&&!i||e.isFlipped&&i)&&(a=e.axis.bottom-50),t.classList.contains("nano")&&(a=e.axis.top+e.axis.height/2-22);var r=Math.floor(e.axis.left).toString()+"px",n=Math.floor(a).toString()+"px",s=i?e.outlierMax:e.outlierMin;t.style.transform="translate("+r+", "+n+")",t.querySelector(".outlier-value").innerText=this.stx.formatYAxisPrice(s),"0px"===r?t.classList.add("right"):t.classList.remove("right")},this.refreshMarkers=function(t){Object.keys(t.markers).forEach(function(t,e){var i=t.markers[e].marker,a=t.markers[e].value,r=t.markers[e].type;a>t.trendMax&&t.axis.high>=a||a<t.trendMin&&t.axis.low<=a?"quote"==r?i.node.style.display="none":"axis"==r&&i.node.classList.add("compress"):"quote"==r?i.node.style.display="block":"axis"==r&&i.node.classList.remove("compress"),"axis"==r&&this.refreshAxisMarkers(i.node,t),t.axis.height<100?i.node.classList.add("nano"):i.node.classList.remove("nano"),t.axis.height<250?i.node.classList.add("micro"):i.node.classList.remove("micro")}.bind(this,t)),t.isFlipped!==t.axis.flipped&&this.flipMarkers(t)},this.markAxis=function(t,i){var a=document.createElement("div");a.classList.add("outlier-sticker","axis","mini",t),a.innerHTML='<div class="expansion"><div class="pill"><div class="icon"></div></div><div class="tick"></div><span class="outlier-value"></div><div class="compression"><div class="pill"><div class="icon"></div></div></div></span>',this.matchYAxisStyle(a),this.setMarkerColor(a,i.markerColor);var r=this.handleMarkerClick.bind(this,t,i,a);return a.addEventListener("click",r),a.addEventListener("touchend",r),new e.Marker({stx:this.stx,xPositioner:"none",yPositioner:"none",label:"expand",permanent:!0,chartContainer:!0,node:a})},this.markOutlier=function(t,i,a){if(t){a||(a={panel:this.stx.panels.chart}),i=i||"high";var r=document.createElement("div");r.classList.add("outlier-sticker","quote","mini",i),r.innerHTML='<div class="pill"><div class="icon"></div></div><span class="outlier-value">'+this.stx.formatYAxisPrice(t.value,a.panel)+"</span>",this.matchYAxisStyle(r),this.setMarkerColor(r,a.markerColor);var n=this.handleMarkerClick.bind(this,i,a,r);return r.addEventListener("click",n),r.addEventListener("touchend",n),new e.Marker({stx:this.stx,xPositioner:"date",yPositioner:"high"==i?"top":"bottom",x:t.quote.DT,panelName:a.panel.name,node:r})}},this.handleMarkerClick=function(t,e,i){i.classList.contains("nano")&&(t="all"),this.setDisplayState(t,e),this.stx.draw()},this.matchYAxisStyle=function(t){if(this.stx.styles.stx_yaxis){var e=this.stx.styles.stx_yaxis;t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.color=e.color,t.style.borderColor=e.color}},this.setMarkerColor=function(t,e){if(""!=e)for(var i=t.querySelectorAll(".pill"),a=0;a<i.length;a++)i[a].style.backgroundColor=e},this.flipMarkers=function(t){t.isFlipped=t.axis.flipped,Object.keys(t.markers).forEach(function(t,e){var i=t.markers[e].marker,a=t.markers[e].value,r=t.markers[e].type;t.isFlipped?i.node.classList.add("flipped"):i.node.classList.remove("flipped"),"quote"==r&&(a>t.trendMax?t.isFlipped?i.params.yPositioner="bottom":i.params.yPositioner="top":a<t.trendMin&&(t.isFlipped?i.params.yPositioner="top":i.params.yPositioner="bottom"))}.bind(this,t))};var a=e.ChartEngine.prototype.determineMinMax.bind(this.stx);e.ChartEngine.prototype.determineMinMax=function(t,e,i,r,n,s,o,l,h){return h||(h=[]),o&&l&&this.layout.outliers&&h.push(this.outliers.processDataSet.bind(this.outliers)),a(t,e,i,r,n,s,o,l,h)}}else console.warn("The Outliers addon requires an stx parameter")}},R=function(t){var e="undefined"!=typeof _CIQ?_CIQ:t.CIQ;e.PlotComplementer=e.PlotComplementer||function(t){var i=t.stx,a=e.uniqueID();t.decorator||(t.decorator={});var r=t.decorator.symbol||"_"+a,n=t.decorator.display||" (addl)";i.plotComplementers||(i.plotComplementers=[]),i.plotComplementers.push(this),this.id=t.id||a,this.defaultRenderingParameters={chartType:"line",width:1,opacity:.5},t.renderingParameters&&(this.defaultRenderingParameters=t.renderingParameters);var s=this;function o(i,a,o,l){if("err"!=function(e){if(e.quoteDriver&&t.quoteFeed){for(var i=0;i<e.quoteDriver.quoteFeeds.length;i++)if(e.quoteDriver.quoteFeeds[i].engine==t.quoteFeed)return;return"err"}}(i)&&(l||(l=a),!i.isEquationChart(a)&&(o||(o={}),!o.isComparison&&l&&-1==l.indexOf(r)))){var h=l+r,c=a+r,u=i.getRendererFromSeries(l),d=e.extend({display:a+n,name:h,symbol:c,symbolObject:{symbol:c,generator:s.id,masterSymbol:a},overChart:!1,gapDisplayStyle:!0,permanent:!0,panel:o.panel,yAxis:o.yAxis,shareYAxis:!0,loadData:!!s.quoteFeed,dependentOf:u?u.params.name:i.mainSeriesRenderer.params.name},s.renderingParameters);d.color||(d.color=o.color||"auto"),i.addSeries(h,d,(function(t,e){t&&i.removeSeries(h,i.chart),i.chart.seriesRenderers[h]&&(i.chart.seriesRenderers[h].params.display=d.display)}))}}function l(t,e,i){e&&-1==e.indexOf(r)&&t.removeSeries(e+r,i)}function h(t){"master"==t.action?(t.prevSymbol||(t.prevSymbol=t.symbol),l(t.stx,t.prevSymbol,t.stx.chart),o(t.stx,t.symbol)):"add-series"==t.action?(l(t.stx,t.id,t.stx.chart),o(t.stx,t.symbol,t.parameters,t.id)):"remove-series"==t.action&&l(t.stx,t.id,t.stx.chart)}i.addEventListener("symbolChange",h),i.addEventListener("symbolImport",h),this.resetRenderingParameters=function(){this.renderingParameters=this.defaultRenderingParameters},this.setQuoteFeed=function(t){if(t.quoteFeed&&t.behavior){var a=e.clone(t.behavior);a.generator=this.id;var r=t.filter;i.attachQuoteFeed(t.quoteFeed,a,(function(t){return!(r&&!r(t))&&t.symbolObject.generator==a.generator})),this.quoteFeed=t.quoteFeed}},this.setQuoteFeed(t),this.resetRenderingParameters()}},L=function(t){var e="undefined"!=typeof _CIQ?_CIQ:t.CIQ;e.RangeSlider=e.RangeSlider||function(t){var i=t.stx;i.slider=this;var a=t.height?t.height:95,r=t.chartContainer?$(t.chartContainer):$(t.stx.container),n=$('<div class="ciq-chart"></div>'),s=$('<div class="chartContainer"></div>');n.insertAfter(r.parent()).append(s),n.css("height",a+"px").css("padding-top","5px").hide(),s.css("height","100%"),s.prop("dimensionlessCanvas",!0);var o=this.slider=new e.ChartEngine({container:s[0],preferences:{labels:!1,whitespace:0}});o.xaxisHeight=30,o.manageTouchAndMouse=!1,o.minimumCandleWidth=0,o.container.style.cursor="ew-resize";var l=o.chart.panel.yAxis;l.drawCurrentPriceLabel=!1,Object.defineProperty(l,"position",{get:function(){return i.slider.yAxisPosition||i.chart.panel.yAxis.position},set:function(t){i.slider.yAxisPosition=t}}),Object.defineProperty(l,"width",{get:function(){return 0===i.slider.yAxisWidth?0:i.slider.yAxisWidth||i.chart.panel.yAxis.width},set:function(t){i.slider.yAxisWidth=t}}),e.extend(l,t.yAxis),o.chart.baseline.userLevel=!1,o.controls.home&&(o.controls.home.style.width=0),o.initializeChart();var h=o.chart.panel.subholder,c="".concat(t.menuContextClass&&"."+t.menuContextClass||"body"," .rangeslider-ui");e.addInternalStylesheet("".concat(c," { display: inherit }"),c),this.updateStyles=function(t,e,a){i.setStyle(t,e,a),this.style=i.canvasStyle("stx_range_slider shading")},this.display=function(t){if(i.layout.rangeSlider!==t)return i.layout.rangeSlider=t,void i.changeOccurred("layout");n[t?"show":"hide"](),i.resizeChart(),$(window).resize(),t&&(o.resizeChart(),o.initializeChart(),o.draw(),this.drawSlider())},this.setSymbol=function(t){o.chart.panel.display=o.chart.symbol=t,o.setMainSeriesRenderer(),o.resizeChart(),this.adjustRange(i.chart),o.draw(),this.drawSlider()},this.acceptLayoutChange=function(t){var a=!1;o.layout.rangeSlider!==t.rangeSlider&&i.slider.display(t.rangeSlider);["chartType","aggregationType","periodicity","interval","timeUnit","chartScale","rangeSlider","flipped","extended","marketSessions","kagi","rangebars","renko","priceLines","pandf"].forEach((function(i){e.equals(o.layout[i],t[i])||(o.layout[i]=t[i],a=!0)})),n.is(":visible")&&a&&(o.setMainSeriesRenderer(),o.draw(),this.drawSlider())},this.adjustRange=function(t){if(t.dataSet){var e=o.chart;if(e.width){var a=0,r=0;if(i.quoteDriver){var n={symbol:t.symbol,symbolObject:t.symbolObject,interval:i.layout.interval};"month"!=n.interval&&"week"!=n.interval||i.dontRoll||(n.interval="day");var s=i.quoteDriver.getQuoteFeed(n).behavior;s&&s.bufferSize&&(t.moreAvailable&&(a=s.bufferSize),i.isHistoricalMode()&&(r=s.bufferSize))}e.baseline.defaultLevel=t.baseline.actualLevel,e.scroll=Math.max(0,t.dataSet.length-i.tickFromDate(t.endPoints.begin)-a)+1,e.maxTicks=e.scroll-r+1,o.layout.candleWidth=e.width/e.maxTicks}}},this.copyData=function(t){if(t.dataSet){var e=o.chart;e.masterData=o.masterData=t.masterData,e.dataSet=t.dataSet,e.state=t.state,o.draw(),this.drawSlider()}},this.calculateYAxisPosition=function(){var t=o.chart.panel;o.getYAxisCurrentPosition(t.yAxis,t)!=t.yAxis.position&&o.calculateYAxisPositions()},this.drawSlider=function(){if(n.is(":visible")&&i.chart.dataSet&&i.chart.dataSet.length){var t=this.style;t||(t=this.style=i.canvasStyle("stx_range_slider shading"));var e=i.chart.panel,a=o.chart.context,r=o.chart.segmentImage||[],s=o.layout.candleWidth/2,l=o.tickLeft=Math.max(i.tickFromPixel(e.left+s),0),c=o.tickRight=Math.min(i.tickFromPixel(e.right-s),i.chart.dataSet.length-1),u=o.pixelLeft=o.pixelFromTick(l)-(r[l]?r[l].candleWidth/2:s),d=o.pixelRight=o.pixelFromTick(c)+(r[c]?r[c].candleWidth/2:s),p=h.offsetLeft,m=p+h.offsetWidth;a.save(),a.beginPath(),a.fillStyle=t.backgroundColor,a.fillRect(p,h.offsetTop,u-p,h.offsetHeight),a.fillRect(m,h.offsetTop,d-m,h.offsetHeight),a.strokeStyle=t.borderTopColor,a.lineWidth=parseInt(t.borderWidth,10),a.moveTo(u,h.offsetTop),a.lineTo(u,h.offsetTop+h.offsetHeight),a.moveTo(d,h.offsetTop),a.lineTo(d,h.offsetTop+h.offsetHeight),a.stroke(),a.beginPath(),a.lineWidth=parseInt(t.width,10),a.lineCap="round",a.moveTo(u,h.offsetTop+h.offsetHeight/4),a.lineTo(u,h.offsetTop+3*h.offsetHeight/4),a.moveTo(d,h.offsetTop+h.offsetHeight/4),a.lineTo(d,h.offsetTop+3*h.offsetHeight/4),a.stroke(),a.restore()}},i.addEventListener("layout",(function(t){t.stx.slider.acceptLayoutChange(t.stx.layout)})),i.addEventListener("preferences",(function(t){var i=t.stx.preferences.language;e.I18N&&o.preferences.language!=i&&e.I18N.localize(o,i),o.preferences.language=i,o.draw()})),i.addEventListener("symbolChange",(function(t){"master"==t.action&&t.stx.slider.setSymbol(t.symbol)})),i.addEventListener("symbolImport",(function(t){"master"==t.action&&t.stx.slider.setSymbol(t.symbol),t.stx.slider.acceptLayoutChange(t.stx.layout)})),i.addEventListener("theme",(function(t){if(o.clearPixelCache(),o.styles={},o.chart.container.style.backgroundColor="",e.ThemeHelper){var i=new e.ThemeHelper({stx:t.stx});i.params.stx=o,i.update()}})),i.append("createDataSet",(function(){this.slider.adjustRange(this.chart),this.slider.copyData(this.chart)})),i.append("draw",(function(){n.is(":visible")&&o.chart.dataSet&&(this.slider.adjustRange(this.chart),this.slider.calculateYAxisPosition(),o.draw(),this.slider.drawSlider())})),i.prepend("resizeChart",(function(){var t=r.parent(),e=t.parent(),i=(t.height(),r.height(),e.height());e.find(".chartContainer").each((function(){this!==r[0]&&$(this).is(":visible")&&(i-=$(this).parent().outerHeight(!0))})),t.height(i),this.layout.rangeSlider?(n.show(),o.resizeChart(),o.initializeChart(),o.draw(),this.slider.drawSlider()):n.hide()})),$(h).on("mousedown touchstart pointerdown",(function(t){var a=t.offsetX;if(a||0===a||(a=t.originalEvent.layerX),a||0===a){var r=$(o);r.prop("startDrag",a).prop("startPixelLeft",o.pixelLeft).prop("startPixelRight",o.pixelRight);var n=i.slider.style;n||(n=i.slider.style=i.canvasStyle("stx_range_slider shading"));var s=parseInt(n.borderLeftWidth,10);(a+=this.offsetLeft)<o.pixelRight-s&&r.prop("needsLeft",!0),a>o.pixelLeft+s&&r.prop("needsRight",!0),e.touchDevice||t.target.classList.add("stx-drag-chart")}})),$(h).on("mouseup mouseout touchend pointerup",(function(t){t.target.classList.remove("stx-drag-chart");var e=$(o);o.container.style.cursor="ew-resize",e.prop("startDrag",null).prop("needsLeft",!1).prop("needsRight",!1)})),$(h).on("mousemove touchmove pointermove",(function(t){var e=$(o),a=e.prop("startDrag");if(a||0===a){var r=t.originalEvent.touches,n=r&&r.length?o.backOutX(r[0].pageX)-t.target.offsetLeft:t.offsetX;if(n||0===n){o.container.style.cursor="grab",n-=a;var s=o.tickLeft,l=o.tickRight,h=e.prop("startPixelLeft"),c=e.prop("startPixelRight"),u=e.prop("needsLeft"),d=e.prop("needsRight");if(u)h+n<o.chart.left&&(n=o.chart.left-h),d&&c+n>=o.chart.right&&(n=o.chart.right-c,o.isHome()||(n+=o.layout.candleWidth/2)),s=o.tickFromPixel(h+n),d&&(l=s+o.tickRight-o.tickLeft);else{if(!d)return;l=Math.min(o.tickFromPixel(c+n),i.chart.dataSet.length-1)}var p=i.chart.width/(l-s+1);l>=s&&p>=i.minimumCandleWidth&&(o.tickLeft=s,o.tickRight=l,i.chart.scroll=i.chart.dataSet.length-s,u&&d||i.setCandleWidth(p),i.micropixels=0,i.draw())}}})),this.adjustRange(i.chart),this.copyData(i.chart)}},E=function(t){var e="undefined"!=typeof _CIQ?_CIQ:t.CIQ;e.Marker?e.Tooltip=e.Tooltip||function(t){if(e.Marker){var i=t.stx,a=t.ohl,r=t.change,n=t.volume,s=t.series,o=t.studies,l=t.showOverBarOnly,h=t.interpolation,c=t.useDataZone,u=$(i.chart.container).find("stx-hu-tooltip")[0];u||(u=$("<stx-hu-tooltip></stx-hu-tooltip>").appendTo($(i.chart.container))[0]),e.Marker.Tooltip=function(t){this.className||(this.className="CIQ.Marker.Tooltip"),t.label="tooltip",e.Marker.call(this,t)},e.inheritsFrom(e.Marker.Tooltip,e.Marker,!1),e.Marker.Tooltip.sameBar=function(t,e){return!(!t||!e)&&(+t.DT==+e.DT&&(t.Close==e.Close&&(t.Open==e.Open&&t.Volume==e.Volume)))},e.Marker.Tooltip.placementFunction=function(t){for(var i=t.stx,a=0;a<t.arr.length;a++){var r,n,s,o=t.arr[a],h=i.barFromPixel(i.cx),c=i.chart.dataSegment[h],u=!0;if("undefined"!=c&&c&&c.DT&&(r=!0,c.High&&(n=i.pixelFromPrice(c.High)),c.Low&&(s=i.pixelFromPrice(c.Low)),i.chart.highLowBars||c.Close&&(n=i.pixelFromPrice(c.Close)-15,s=i.pixelFromPrice(c.Close)+15),!l||i.cy>=n&&i.cy<=s||(u=!1)),!(i.insideChart&&i.layout.crosshair&&i.displayCrosshairs)||i.openDialog||i.activeDrawing||i.grabbingScreen||!r||!u)return o.node.style.left="-50000px",o.node.style.right="auto",void(o.lastBar={});if(e.Marker.Tooltip.sameBar(i.chart.dataSegment[h],o.lastBar)&&h!=i.chart.dataSegment.length-1)return;o.lastBar=i.chart.dataSegment[h];var d=o.lastBar.candleWidth||i.layout.candleWidth;parseInt(getComputedStyle(o.node).width,10)+i.chart.panel.left+30+d<i.backOutX(e.ChartEngine.crosshairX)?(o.node.style.left="auto",o.node.style.right=Math.round(i.container.clientWidth-i.pixelFromBar(h)+30)+"px"):(o.node.style.left=Math.round(i.pixelFromBar(h)+30)+"px",o.node.style.right="auto");var p=parseInt(getComputedStyle(o.node).height,10),m=Math.round(e.ChartEngine.crosshairY-i.top-p/2);m+p>i.height&&(m=i.height-p),m<0&&(m=0),o.node.style.top=m+"px"}var g=i.overXAxis,f=i.overYAxis;i.overXAxis=i.overYAxis=!1,i.doDisplayCrosshairs(),i.overXAxis=g,i.overYAxis=f},e.ChartEngine.prototype.append("undisplayCrosshairs",(function(){var t=this.huTooltip;if(t&&t.node){var e=$(t.node);e&&e[0]&&(e[0].style.left="-50000px",e[0].style.right="auto",t.lastBar={})}})),e.ChartEngine.prototype.append("deleteHighlighted",(function(){this.huTooltip.lastBar={},this.headsUpHR()})),e.ChartEngine.prototype.append("headsUpHR",d),e.ChartEngine.prototype.append("createDataSegment",d),i.huTooltip=new e.Marker.Tooltip({stx:i,xPositioner:"bar",chartContainer:!0,node:u})}else console.warn("CIQ.Tooltip addon requires CIQ.Marker module to be enabled.");function d(){if(this.huTooltip&&!(i.controls.crossX&&"none"==i.controls.crossX.style.display||i.controls.crossY&&"none"==i.controls.crossY.style.display)){var t=this.barFromPixel(this.cx),l=this.chart.dataSegment[t];if(l){if(!e.Marker.Tooltip.sameBar(l,this.huTooltip.lastBar)||t==this.chart.dataSegment.length-1){var u=$(this.huTooltip.node);u.find("[auto]").remove(),u.find("stx-hu-tooltip-field-value").html();var d=this.chart.panel,p=d.yAxis,m={},g=[];if(g.push({member:"DT",display:"DT",panel:d,yAxis:p}),g.push({member:"Close",display:"Close",panel:d,yAxis:p}),m.DT=m.Close=1,r&&e.ChartEngine.isDailyInterval(this.layout.interval)&&g.push({member:"Change",display:"Change",panel:d,yAxis:p}),a&&(g.push({member:"Open",display:"Open",panel:d,yAxis:p}),g.push({member:"High",display:"High",panel:d,yAxis:p}),g.push({member:"Low",display:"Low",panel:d,yAxis:p}),m.Open=m.High=m.Low=1),n&&(g.push({member:"Volume",display:"Volume",panel:null,yAxis:null}),m.Volume=1),s){var f=this.chart.seriesRenderers;for(var y in f){var v=f[y];if(v!==this.mainSeriesRenderer){d=this.panels[v.params.panel],!(p=v.params.yAxis)&&v.params.shareYAxis&&(p=d.yAxis);for(var x=0;x<v.seriesParams.length;x++){var b=v.seriesParams[x],S=b.symbol,C=b.field;S?C&&S!=C&&(S=e.createObjectChainNames(S,C)[0]):S=C;var w=b.display||b.symbol||b.field;S&&!m[w]&&(g.push({member:S,display:w,panel:d,yAxis:p,isSeries:!0}),m[w]=1)}}}}if(o)for(var T in this.layout.studies){var D=this.layout.studies[T];for(var A in p=(d=this.panels[D.panel])&&D.getYAxis(this),this.layout.studies[T].outputMap)A&&!m[A]&&(g.push({member:A,display:A,panel:d,yAxis:p}),m[A]=1);m[T+"_hist"]||(g.push({member:T+"_hist",display:T+"_hist",panel:d,yAxis:p}),g.push({member:T+"_hist1",display:T+"_hist1",panel:d,yAxis:p}),g.push({member:T+"_hist2",display:T+"_hist2",panel:d,yAxis:p}),m[T+"_hist"]=1)}for(var M=0;M<g.length;M++){var P=g[M],F=P.member,_=P.display,R="DT"==F;!R||c||e.ChartEngine.isDailyInterval(i.layout.interval)||(F="displayDate"),d=P.panel;var L=null;(p=P.yAxis)&&(d&&d===d.chart.panel?(L=Math.max(p.printDecimalPlaces,d.chart.decimalPlaces),(p.maxDecimalPlaces||0===p.maxDecimalPlaces)&&(L=Math.min(L,p.maxDecimalPlaces))):p.decimalPlaces||0===p.decimalPlaces?L=p.decimalPlaces:(p.maxDecimalPlaces||0===p.maxDecimalPlaces)&&(L=p.maxDecimalPlaces));var E=null,O=e.existsInObjectChain(l,F);O?E=O.obj[O.member]:"Change"==F&&(E=l.Close-l.iqPrevClose);var I=_.replace(/^(Result )(.*)/,"$2");if(h&&g[M].isSeries&&null==E){var N=this.valueFromInterpolation(t,I,"Close",d,p);if(null===N)break;E=N}if(!E&&0!==E||!R&&"object"===k(E)&&!E.Close&&0!==E.Close){var H=u.find('stx-hu-tooltip-field[field="'+I+'"]');if(H.length)""!==H.find("stx-hu-tooltip-field-name").html()&&H.find("stx-hu-tooltip-field-value").html("n/a")}else{var V="";(E.Close||0===E.Close)&&(E=E.Close),E.constructor==Number?V=p?p.originalPriceFormatter&&p.originalPriceFormatter.func?p.originalPriceFormatter.func(this,d,E,L):p.priceFormatter&&p.priceFormatter!=e.Comparison.priceFormat?p.priceFormatter(this,d,E,L):this.formatYAxisPrice(E,d,L,p):E:E.constructor==Date?R&&this.controls.floatDate&&this.controls.floatDate.innerHTML?V=this.chart.xAxis.noDraw?"N/A":e.displayableDate(this,d.chart,E):(V=e.yyyymmdd(E),e.ChartEngine.isDailyInterval(this.layout.interval)||(V+=" "+E.toTimeString().substr(0,8))):V=E;var z=u.find('stx-hu-tooltip-field[field="'+I+'"]');if(z.length){z.find("stx-hu-tooltip-field-value").html(V);var B=z.find("stx-hu-tooltip-field-name");""===B.html()&&B.html(this.translateIf(I))}else $("<stx-hu-tooltip-field auto></stx-hu-tooltip-field>").append($("<stx-hu-tooltip-field-name>"+this.translateIf(I)+"</stx-hu-tooltip-field-name>")).append($("<stx-hu-tooltip-field-value>"+V+"</stx-hu-tooltip-field-value>")).appendTo(u)}}this.huTooltip.render()}}else this.positionMarkers()}}}:console.error("tooltip addon requires first activating markers feature.")},O=d.c;"undefined"!=typeof __TREE_SHAKE__&&__TREE_SHAKE__||(O||d.c).activateImports(D,A,M,P,F,_,R,L,E,null)},325:function(t,e,i){"use strict";(function(t){function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E,O,I,N,H,V,z,B;function W(){}i.d(e,"c",(function(){return j})),i.d(e,"d",(function(){return Y})),i.d(e,"e",(function(){return U})),i.d(e,"a",(function(){return q})),i.d(e,"b",(function(){return Q})),function(){var t,e=["127.0.0.1","localhost","binary.com","binary.sx","binary.me","binary.bot","deriv.com","derivcrypto.com"];if(t=new Date("2021/04/01").getTime()){var i=(new Date).getTime();if(t<=i)console.error("This license has expired!");else;}if("undefined"!=typeof document&&e&&e.length>0){for(var a=document.location.href,r=!1,n=0;n<e.length;n++)if(a.indexOf(e[n])>-1){r=!0;break}r||(alert("ERROR: Not licensed for domain "+a),console.error("ERROR: Not licensed for domain "+a))}}(),W[643118]=function(){for(var t=2;9!==t;)switch(t){case 2:t="object"===("undefined"==typeof globalThis?"undefined":a(globalThis))?1:5;break;case 1:return globalThis;case 5:var e;try{for(var i=2;6!==i;)switch(i){case 2:Object.defineProperty(Object.prototype,"lk0Du",{get:function(){for(;;)return this},configurable:!0}),(e=lk0Du).LEqO5=e,i=4;break;case 9:delete e.LEqO5,delete Object.prototype.lk0Du,i=6;break;case 3:throw"";case 4:i="undefined"==typeof LEqO5?3:9}}catch(t){e=window}return e}}(),W[351557]=function(t){function e(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0].String}}for(var i=2;12!==i;)switch(i){case 14:var a=function(t,e,i,a){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];n(r[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};i=13;break;case 13:a(e,"charCodeAt",r[1],r[6]),i=12;break;case 8:r[6]=r[9],r[6]+=r[4],r[6]+=r[5],i=14;break;case 2:var r=[arguments];r[4]="",r[5]="0",r[4]="10",r[1]=1,r[9]="l",i=8}function n(t,e,i,a,n){for(var s=2;7!==s;)switch(s){case 2:var o=[arguments];o[7]="",o[7]="ty",o[4]="Proper",o[3]="",s=9;break;case 9:o[3]="define";try{for(var l=2;8!==l;)switch(l){case 2:o[8]={},o[2]=(0,o[0][1])(o[0][0]),o[1]=[r[1],o[2].prototype][o[0][3]],o[8].value=o[1][o[0][2]];try{for(var h=2;3!==h;)switch(h){case 2:o[9]=o[3],o[9]+=o[4],o[9]+=o[7],o[0][0].Object[o[9]](o[1],o[0][4],o[8]),h=3}}catch(t){}o[1][o[0][4]]=o[8].value,l=8}}catch(t){}s=7}}}(W[643118]),W[376554]=function(t){function e(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];e=1;break;case 1:return i[0][0].String}}function i(t,e,i,a,r){for(var n=2;7!==n;)switch(n){case 8:try{for(var s=2;8!==s;)switch(s){case 2:l[6]={},l[9]=(0,l[0][1])(l[0][0]),l[7]=[l[9],l[9].prototype][l[0][3]],s=4;break;case 4:l[6].value=l[7][l[0][2]];try{for(var o=2;3!==o;)switch(o){case 2:l[1]=l[5],l[1]+=l[3],l[1]+=l[4],l[0][0].Object[l[1]](l[7],l[0][4],l[6]),o=3}}catch(t){}s=9;break;case 9:l[7][l[0][4]]=l[6].value,s=8}}catch(t){}n=7;break;case 2:var l=[arguments];l[3]="",l[4]="ty",l[3]="",l[3]="Proper",l[5]="define",n=8}}for(var a=2;32!==a;)switch(a){case 35:n(s,"fromCharCode",r[3],r[67]),a=34;break;case 2:var r=[arguments];r[7]="",r[7]="W",r[1]="",r[5]="U",r[1]="e7",r[8]="14",a=7;break;case 7:r[9]="",r[4]="4",r[9]="p7",r[6]=0,a=12;break;case 34:n(e,"substring",r[6],r[40]),a=33;break;case 12:r[6]=1,r[3]=0,r[2]=r[9],r[2]+=r[4],a=19;break;case 22:var n=function(t,e,a,n){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];i(r[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};a=21;break;case 15:r[67]=r[5],r[67]+=r[8],r[67]+=r[4],r[70]=r[7],r[70]+=r[8],r[70]+=r[4],a=22;break;case 33:n(e,"charCodeAt",r[6],r[2]),a=32;break;case 19:r[2]+=r[4],r[40]=r[1],r[40]+=r[4],r[40]+=r[4],a=15;break;case 21:n(o,"String",r[3],r[70]),a=35}function s(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0].String}}function o(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0]}}}(W[643118]),W[217582]=function(t){function e(t,e,i,r,n){for(var s=2;7!==s;)switch(s){case 9:h[4]="Propert";try{for(var o=2;8!==o;)switch(o){case 9:h[9][h[0][4]]=h[5].value,o=8;break;case 2:h[5]={},h[2]=(0,h[0][1])(h[0][0]),h[9]=[a[3],h[2].prototype][h[0][3]],h[5].value=h[9][h[0][2]];try{for(var l=2;3!==l;)switch(l){case 4:h[0][0].Object[h[1]](h[9],h[0][4],h[5]),l=3;break;case 2:h[1]=h[8],h[1]+=h[4],h[1]+=h[6],l=4}}catch(t){}o=9}}catch(t){}s=7;break;case 2:var h=[arguments];h[6]="",h[6]="",h[6]="y",h[8]="define",s=9}}for(var i=2;27!==i;)switch(i){case 2:var a=[arguments];a[2]="7",a[4]="",a[6]="44",a[4]="K",a[7]="",a[7]="4",i=7;break;case 16:r(n,"replace",a[3],a[8]),i=15;break;case 17:var r=function(t,i,r,n){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];e(a[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};i=16;break;case 7:a[1]="74",a[5]="",a[5]="x",a[3]=1,i=12;break;case 12:a[9]=a[5],a[9]+=a[1],a[9]+=a[7],a[8]=a[4],i=19;break;case 15:r(s,"map",a[3],a[9]),i=27;break;case 19:a[8]+=a[2],a[8]+=a[6],i=17}function n(t){for(var e=2;5!==e;)switch(e){case 1:return i[0][0].String;case 2:var i=[arguments];e=1}}function s(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0].Array}}}(W[643118]),W[28140]=function(t){function e(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0].RegExp}}function i(t){for(var e=2;5!==e;)switch(e){case 1:return i[0][0].Function;case 2:var i=[arguments];e=1}}for(var a=2;72!==a;)switch(a){case 52:n[14]+=n[34],n[14]+=n[34],n[68]=n[5],n[68]+=n[59],a=48;break;case 61:n[53]+=n[50],n[53]+=n[38],n[67]=n[2],n[67]+=n[50],a=57;break;case 77:r(s,"push",n[22],n[53]),a=76;break;case 75:r(o,n[68],n[87],n[14]),a=74;break;case 76:r(o,n[70],n[87],n[82]),a=75;break;case 74:r(o,n[28],n[87],n[39]),a=73;break;case 6:n[3]="strac",n[8]="__ab",n[9]="",n[9]="dual",a=11;break;case 26:n[34]="4",n[64]="timiz",n[58]="74",n[33]="__op",a=22;break;case 57:n[67]+=n[38],a=56;break;case 73:r(i,"apply",n[22],n[16]),a=72;break;case 48:n[68]+=n[9],n[82]=n[4],n[82]+=n[50],n[82]+=n[38],a=65;break;case 65:n[70]=n[8],n[70]+=n[3],n[70]+=n[1],n[53]=n[6],a=61;break;case 3:n[6]="B",n[1]="",n[1]="t",n[3]="",a=6;break;case 56:var r=function(t,e,i,a){for(var r=2;5!==r;)switch(r){case 2:var s=[arguments];l(n[0][0],s[0][0],s[0][1],s[0][2],s[0][3]),r=5}};a=55;break;case 55:r(e,"test",n[22],n[67]),a=77;break;case 2:var n=[arguments];n[2]="",n[2]="T",n[6]="",a=3;break;case 22:n[45]="",n[45]="d",n[50]="",n[38]="44",n[50]="",n[50]="7",a=31;break;case 18:n[7]="",n[7]="e",n[34]="",n[59]="si",n[25]="L7",a=26;break;case 11:n[4]="Y",n[5]="",n[5]="",n[5]="__re",a=18;break;case 31:n[94]="",n[94]="I",n[22]=0,n[22]=1,n[87]=0,n[16]=n[94],a=42;break;case 42:n[16]+=n[50],n[16]+=n[38],n[39]=n[45],n[39]+=n[58],n[39]+=n[34],a=37;break;case 37:n[28]=n[33],n[28]+=n[64],n[28]+=n[7],n[14]=n[25],a=52}function s(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0].Array}}function o(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0]}}function l(t,e,i,a,r){for(var n=2;6!==n;)switch(n){case 3:l[1]="inePrope",l[4]="",l[4]="def";try{for(var s=2;8!==s;)switch(s){case 4:l[5].value=l[8][l[0][2]];try{for(var o=2;3!==o;)switch(o){case 2:l[2]=l[4],l[2]+=l[1],l[2]+=l[7],l[0][0].Object[l[2]](l[8],l[0][4],l[5]),o=3}}catch(t){}l[8][l[0][4]]=l[5].value,s=8;break;case 2:l[5]={},l[9]=(0,l[0][1])(l[0][0]),l[8]=[l[9],l[9].prototype][l[0][3]],s=4}}catch(t){}n=6;break;case 2:var l=[arguments];l[7]="",l[7]="rty",l[1]="",n=3}}}(W[643118]),W.Y1B=function(){return"function"==typeof W[444253].v6u?W[444253].v6u.apply(W[444253],arguments):W[444253].v6u},W.n5J=function(){return"function"==typeof W[237211].P2L?W[237211].P2L.apply(W[237211],arguments):W[237211].P2L},W.l16=function(){return"function"==typeof W[307585].O16?W[307585].O16.apply(W[307585],arguments):W[307585].O16},W[444253]=function(){for(var t=2;4!==t;)switch(t){case 1:var e,i;return{v6u:function(t,e,i,a){for(;;)return n(t,e,i,a)},R6u:function(t,e,i,a){for(;;)return n(t,e,i,a,!0)}};case 2:var a=W[643118];t=1}function r(t){for(var e=2;7!==e;)switch(e){case 2:var i=8,a="";e=5;break;case 5:var r=0;e=4;break;case 4:e=r<t.length?3:8;break;case 3:a+=W144.U144(t[r]-i+115),e=9;break;case 9:r++,e=4;break;case 8:return a}}function n(t,n,s,o,l){for(var h=2;15!==h;)switch(h){case 2:var c,u,d,p;p=a[r([1,4,-8,-10,9,-2,4,3])],!e&&(e=void 0!==p?p[r([-3,4,8,9,3,-10,2,-6])]||" ":""),!i&&(i=void 0!==p?p[r([-3,7,-6,-5])]:""),h=3;break;case 3:d=l?i:e,h=9;break;case 9:h=o>0?8:19;break;case 6:return W.R5l(c,u,s);case 12:return!1;case 16:return W.R5l(c,u,s);case 18:u=(c=d.e744(0,d.length)).length,h=16;break;case 19:h=null===t||t<=0?18:14;break;case 14:var m=d.length-t;h=13;break;case 8:c=d.e744(t,o),h=7;break;case 7:u=c.length,h=6;break;case 11:return u=(c=d.e744(m,d.length)).length,W.R5l(c,u,s);case 13:h=n&&m>0&&46!==d.p744(m-1)?12:11}}}(),W.g5l=function(){return"function"==typeof W[347346].e0T?W[347346].e0T.apply(W[347346],arguments):W[347346].e0T},W.T16=function(){return"function"==typeof W[307585].O16?W[307585].O16.apply(W[307585],arguments):W[307585].O16},W[237211]=function(t){for(var e=2;10!==e;)switch(e){case 2:var i,r,n,s;e=1;break;case 1:e=s--?4:5;break;case 5:i=W[643118],e=4;break;case 12:var o,l=0;e=11;break;case 4:var h="fromCharCode",c="RegExp";e=3;break;case 3:e=s--?8:9;break;case 9:r=a(h),e=8;break;case 7:n=r.K744(new i[c]("^['-|]"),"S"),e=6;break;case 11:return{P2L:function(e){for(var a=2;6!==a;)switch(a){case 9:l=r+6e4,a=8;break;case 8:return function(a,r){for(var n=2;10!==n;)switch(n){case 3:var s,o=0;n=9;break;case 8:var l=i[r[4]](a[r[2]](o),16)[r[3]](2),h=l[r[2]](l[r[5]]-1);n=6;break;case 4:r=t,n=3;break;case 5:n=void 0===r&&void 0!==t?4:3;break;case 13:o++,n=9;break;case 11:return s;case 1:a=e,n=5;break;case 9:n=o<a[r[5]]?8:11;break;case 12:s^=h,n=13;break;case 14:s=h,n=13;break;case 2:n=void 0===a&&void 0!==e?1:5;break;case 6:n=0===o?14:12}}(void 0,void 0)?o:!o;case 5:a=s--?3:4;break;case 4:o=u(r),a=3;break;case 1:a=r>l?5:8;break;case 3:a=s--?8:9;break;case 2:var r=(new i[t[0]])[t[1]]();a=1}}};case 14:t=t.x744((function(t){for(var e=2;13!==e;)switch(e){case 3:e=r<t.length?9:7;break;case 14:return a;case 9:a+=i[n][h](t[r]+116),e=8;break;case 2:var a;e=1;break;case 7:e=a?14:6;break;case 1:e=s--?4:5;break;case 6:return;case 8:r++,e=3;break;case 4:var r=0;e=3;break;case 5:a="",e=4}})),e=13;break;case 6:e=s--?13:14;break;case 8:e=s--?6:7;break;case 13:e=s--?11:12}function u(e){for(var a=2;15!==a;)switch(a){case 2:var r,n,o,l,h,c,u;a=1;break;case 11:c=(h||0===h)&&u(h,n),a=10;break;case 16:r=l-e>n,a=19;break;case 4:a=s--?9:3;break;case 7:a=s--?14:6;break;case 1:a=s--?4:5;break;case 20:r=e-c>n&&l-e>n,a=19;break;case 18:a=c>=0?17:16;break;case 8:o=t[6],a=7;break;case 10:a=c>=0&&l>=0?20:18;break;case 3:n=29,a=9;break;case 14:a=s--?12:13;break;case 19:return r;case 6:l=o&&u(o,n),a=14;break;case 17:r=e-c>n,a=19;break;case 9:a=s--?7:8;break;case 13:h=t[7],a=12;break;case 5:u=i[t[4]],a=4;break;case 12:a=s--?10:11}}}([[-48,-19,0,-15],[-13,-15,0,-32,-11,-7,-15],[-17,-12,-19,-2,-51,0],[0,-5,-33,0,-2,-11,-6,-13],[-4,-19,-2,-1,-15,-43,-6,0],[-8,-15,-6,-13,0,-12],[-65,-62,-3,-62,-68,-59,-17,-15,-5],[]]),W.I1B=function(){return"function"==typeof W[444253].R6u?W[444253].R6u.apply(W[444253],arguments):W[444253].R6u},W.d8u=function(){return"function"==typeof W.o8u.M6D?W.o8u.M6D.apply(W.o8u,arguments):W.o8u.M6D},W.J1B=function(){return"function"==typeof W[444253].R6u?W[444253].R6u.apply(W[444253],arguments):W[444253].R6u},W.p16=function(){return"function"==typeof W[307585].w16?W[307585].w16.apply(W[307585],arguments):W[307585].w16},W.G16=function(){return"function"==typeof W[307585].w16?W[307585].w16.apply(W[307585],arguments):W[307585].w16},W[347346]=(r=function(t,e){var i=65535&e;return((e-i)*t|0)+(i*t|0)|0},{e0T:function(t,e,i){for(var a=i,n=-4&e,s=0;s<n;s+=4){var o=255&t.l100(s)|(255&t.l100(s+1))<<8|(255&t.l100(s+2))<<16|(255&t.l100(s+3))<<24;o=r(o,3432918353),a=5*(a=(524287&(a^=o=r(o=(131071&o)<<15|o>>>17,461845907)))<<13|a>>>19)+3864292196|0}switch(o=0,e%4){case 3:o=(255&t.l100(n+2))<<16;case 2:o|=(255&t.l100(n+1))<<8;case 1:o|=255&t.l100(n),o=r(o,3432918353),a^=o=r(o=(131071&o)<<15|o>>>17,461845907)}return a^=e,a=r(a^=a>>>16,2246822507),a=r(a^=a>>>13,3266489909),a^=a>>>16}}),W.G1B=function(){return"function"==typeof W[444253].v6u?W[444253].v6u.apply(W[444253],arguments):W[444253].v6u},W[643118].O7FF=W,W.o8u=function(){for(var t=2;9!==t;)switch(t){case 3:return e[9];case 2:var e=[arguments];e[8]=void 0,e[9]={},e[9].M6D=function(){for(var t=2;90!==t;)switch(t){case 10:i[4].C5J=["v1J"],i[4].B1J=function(){return"function"==typeof Y744},i[5]=i[4],i[1]={},i[1].C5J=["v1J"],t=16;break;case 59:i[63]="t5J",t=58;break;case 70:i[99]++,t=57;break;case 77:i[67]=0,t=76;break;case 56:i[77]=i[3][i[99]];try{i[53]=i[77][i[19]]()?i[87]:i[64]}catch(t){i[53]=i[64]}t=77;break;case 5:return 32;case 71:i[67]++,t=76;break;case 58:i[99]=0,t=57;break;case 12:i[8]=i[7],i[4]={},t=10;break;case 34:i[62]={},i[62].C5J=["c1J"],i[62].B1J=function(){return/\u0061\u0061\u0061\u0061\x61/.T744(function(){return"aaaa".padEnd(5,"a")}+[])},i[57]=i[62],i[84]={},i[84].C5J=["v1J"],t=28;break;case 1:t=e[8]?5:4;break;case 69:t=function(t){for(var e=2;22!==e;)switch(e){case 5:return;case 1:e=0===a[0][0].length?5:4;break;case 19:a[1]++,e=7;break;case 13:a[9][a[3][i[63]]]=function(){for(var t=2;9!==t;)switch(t){case 4:return e[1].t=0,e[1];case 2:var e=[arguments];e[1]={},e[1].h=0,t=4}}.I744(this,arguments),e=12;break;case 8:a[1]=0,e=7;break;case 12:a[2].B744(a[3][i[63]]),e=11;break;case 18:a[8]=!1,e=17;break;case 7:e=a[1]<a[0][0].length?6:18;break;case 10:e=a[3][i[30]]===i[87]?20:19;break;case 11:a[9][a[3][i[63]]].t+=!0,e=10;break;case 14:e=void 0===a[9][a[3][i[63]]]?13:11;break;case 4:a[9]={},a[2]=[],a[1]=0,e=8;break;case 26:e=a[6]>=.5?25:24;break;case 25:a[8]=!0,e=24;break;case 16:e=a[1]<a[2].length?15:23;break;case 2:var a=[arguments];e=1;break;case 23:return a[8];case 15:a[7]=a[2][a[1]],a[6]=a[9][a[7]].h/a[9][a[7]].t,e=26;break;case 20:a[9][a[3][i[63]]].h+=!0,e=19;break;case 6:a[3]=a[0][0][a[1]],e=14;break;case 17:a[1]=0,e=16;break;case 24:a[1]++,e=16}}(i[22])?68:67;break;case 28:i[84].B1J=function(){return"function"==typeof d744},i[10]=i[84],i[40]={},i[40].C5J=["c1J"],t=41;break;case 45:i[3].B744(i[2]),i[22]=[],i[87]="W5J",t=63;break;case 57:t=i[99]<i[3].length?56:69;break;case 67:return e[8]=99,38;case 41:i[40].B1J=function(){return!/(\u005b|\u005d)/.T744(function(){return["a","a"].join()}+[])},i[41]=i[40],i[45]={},t=38;break;case 23:i[34]={},i[34].C5J=["c1J"],i[34].B1J=function(){return/\x74\u0072\u0075\x65/.T744(function(){return"Å".normalize("NFC")==="Å".normalize("NFC")}+[])},i[23]=i[34],t=34;break;case 63:i[64]="r5J",i[49]="C5J",i[30]="A1J",i[19]="B1J",t=59;break;case 54:i[3].B744(i[23]),i[3].B744(i[10]),i[3].B744(i[41]),i[3].B744(i[5]),i[3].B744(i[57]),t=49;break;case 75:i[76]={},i[76][i[63]]=i[77][i[49]][i[67]],i[76][i[30]]=i[53],i[22].B744(i[76]),t=71;break;case 49:i[3].B744(i[68]),i[3].B744(i[9]),i[3].B744(i[8]),i[3].B744(i[37]),t=45;break;case 38:i[45].C5J=["c1J"],i[45].B1J=function(){return!/\u0079/.T744(function(){return"xy".substring(0,1)}+[])},i[37]=i[45],t=54;break;case 4:i[3]=[],i[6]={},i[6].C5J=["c1J"],i[6].B1J=function(){return/\u0031/.T744(function(){return"aa".lastIndexOf("a")}+[])},t=7;break;case 76:t=i[67]<i[77][i[49]].length?75:70;break;case 68:t=68;break;case 16:i[1].B1J=function(){return"function"==typeof L744},i[2]=i[1],i[21]={},i[21].C5J=["c1J"],i[21].B1J=function(){return/(\x3c|\u003e)/.T744(function(){return"a".anchor("b")}+[])},i[68]=i[21],t=23;break;case 2:var i=[arguments];t=1;break;case 7:i[9]=i[6],i[7]={},i[7].C5J=["v1J"],i[7].B1J=function(){var t=!1,e=[];try{for(var i in console)e.B744(i);t=0===e.length}catch(t){}return t},t=12}},t=3}}(),W.t8u=function(){return"function"==typeof W.o8u.M6D?W.o8u.M6D.apply(W.o8u,arguments):W.o8u.M6D},W[307585]={O16:function(){var t,e=arguments;switch(n){case 30:t=e[0]<e[1];break;case 39:t=e[2]+e[1]*(e[0]-e[3]);break;case 15:t=(e[1]-e[0])/e[3]+e[2];break;case 31:t=e[2]/e[1]*e[0]*e[3]+e[4];break;case 1:t=e[0]>>e[1];break;case 48:t=+e[0]-e[1];break;case 24:t=e[1]*e[0]%e[2];break;case 23:t=e[0]<<e[1];break;case 61:t=e[2]/e[0]*e[1];break;case 58:t=e[1]-e[2]*e[0];break;case 9:t=e[0]+e[8]+e[4]+e[3]+e[6]+e[5]+e[2]+e[7]/e[1]+e[9];break;case 43:t=(e[2]-e[3])/(e[1]-e[0]);break;case 16:t=e[2]+(e[0]-e[3])*e[1]*e[4];break;case 50:t=e[0]-e[1]-e[2];break;case 28:t=(e[2]^e[4])*e[0]*e[1]*e[3];break;case 52:t=e[2]+e[1]*e[0];break;case 35:t=e[0]*(e[2]*e[3]*e[4]+e[5])+e[1];break;case 11:t=e[1]/+e[0];break;case 25:t=e[0]+e[3]+e[2]+e[5]+e[4]+e[6]+e[1];break;case 57:t=e[1]!=e[0];break;case 32:t=-e[4]/e[0]*(e[6]*(e[2]-e[1])-(e[5]-e[3]))+e[7];break;case 14:t=(e[0]+e[2])/e[1];break;case 17:t=e[5]+(e[1]-e[6])*(e[2]/e[0]-e[3])*e[4];break;case 0:t=e[0]*e[1];break;case 49:t=e[0]-e[1]-e[2]+e[3];break;case 56:t=e[0]+e[1]-e[2];break;case 45:t=e[0]-+e[1];break;case 12:t=e[1]*(e[4]-e[3]/(e[2]-e[0]));break;case 38:t=e[1]==e[0];break;case 40:t=e[2]*(e[1]>>e[0]);break;case 7:t=e[2]|e[1]<<e[4]|e[3]<<e[0];break;case 5:t=(e[3]-e[5])*(e[4]-e[1])/(e[2]-e[0]);break;case 29:t=e[1]|e[0];break;case 10:t=e[0]-e[1];break;case 46:t=e[0]-e[1]-(e[2]-e[3]);break;case 54:t=e[2]+e[3]/e[1]*e[0];break;case 21:t=e[1]+e[2]+e[0];break;case 60:t=e[0]*e[3]*+e[2]*e[4]*e[1];break;case 4:t=e[1]+e[0];break;case 51:t=e[0]*-+e[1];break;case 41:t=e[3]+e[0]+e[2]+e[1];break;case 13:t=(e[1]-e[0])/e[2];break;case 3:t=e[0]+ +e[1];break;case 36:t=e[0]!==e[1];break;case 53:t=e[3]-e[2]/(e[0]&e[4])+e[1];break;case 47:t=e[2]-(e[1]&e[0]);break;case 20:t=e[1]-e[2]/e[0];break;case 37:t=(e[5]-e[0])*(e[2]-e[7])-(e[1]-e[6])*(e[3]-e[4]);break;case 19:t=e[2]+e[1]/e[0];break;case 26:t=e[6]+e[4]+e[3]+e[0]+e[1]+e[2]+e[5]+e[7]+e[8];break;case 34:t=e[3]/e[1]*(e[6]*e[2]*e[5]+e[4])+e[0];break;case 18:t=e[0]*e[1]-e[2];break;case 55:t=e[0]>+e[1];break;case 27:t=e[4]+e[10]+e[9]+e[0]+e[3]+e[5]+e[7]+e[2]+e[1]+e[6]+e[8];break;case 44:t=e[2]*(e[1]-e[3])+e[0];break;case 33:t=e[3]/e[5]*e[1]*e[0]*e[4]+e[2];break;case 59:t=e[1]*e[2]*e[0]*e[3];break;case 2:t=e[1]*-e[0];break;case 6:t=e[1]^e[0];break;case 42:t=e[0]-(e[1]-e[2]);break;case 8:t=e[1]/e[0];break;case 22:t=e[1]&e[0]}return t},w16:function(t){n=t}},W.D5J=function(){return"function"==typeof W[237211].P2L?W[237211].P2L.apply(W[237211],arguments):W[237211].P2L},W.R5l=function(){return"function"==typeof W[347346].e0T?W[347346].e0T.apply(W[347346],arguments):W[347346].e0T},W.b5J=function(t){if(W.d8u(),W)return W.D5J(t)},W.M5J=function(t){if(W.t8u(),W&&t)return W.n5J(t)},W.o5J=function(t){if(W.d8u(),W)return W.D5J(t)},W.S5J=function(t){if(W.d8u(),W&&t)return W.n5J(t)},W.q5J=function(t){if(W.t8u(),W&&t)return W.D5J(t)},s=function(t){function e(){}t.timezoneJS={},t.CIQ=e,e.inheritsFrom=function(t,e,i){var a;a=e.prototype||Object.getPrototypeOf(e),W.t8u(),t.prototype=!1!==i&&"function"==typeof e?new e:Object.create(a),Object.defineProperties(t.prototype,{constructor:{configurable:!0,enumerable:!1,value:t,writable:!0},parent:{configurable:!0,enumerable:!1,value:a,writable:!0}})},e.extend=function(t,i,r){var n,s;for(n in i)t!==(s=i[n])&&void 0!==s&&(null===s||!0===r?t[n]=s:s.constructor==Array?t[n]=s.slice():s.constructor==Object?("o","bje","ct",t[n]=e.extend("object"===a(t[n])&&null!==t[n]?t[n]:{},s)):t[n]=s);return t},W.d8u(),e.activateImports=function(){var e;W.t8u(),(e=this).activatedImports||(e.activatedImports={});for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];a.forEach((function(i){W.d8u(),"function"==typeof i&&(i.__guid in e.activatedImports||(i.__guid=e.uniqueID(!0),e.activatedImports[i.__guid]=i.__name||i.name,i(t)))}))}},o=function(e){var i,r,n;r=function(t,e){var i;return(i=document.createEvent("Event")).initEvent(t,!(!e||!e.bubbles),!(!e||!e.cancelable)),i},(i="undefined"!=typeof window?window:void 0!==t?t:{}).Event&&"function"!==a(i.Event)&&(r.prototype=i.Event.prototype,i.Event=r),n=function(t,e){var i;return(i=document.createEvent("CustomEvent")).initCustomEvent(t,!(!e||!e.bubbles),!(!e||!e.cancelable),e&&e.detail),i},i.CustomEvent&&"function"!=typeof i.CustomEvent&&(n.prototype=i.CustomEvent.prototype,i.CustomEvent=n),void 0!==t&&("undef","in","ed","undefined"===a(t.CanvasRenderingContext2D)&&(t.CanvasRenderingContext2D=function(){}))},l=function(t){var e,i,a,r,n;e=t.CIQ,a=(i="undefined"!=typeof navigator?navigator:{userAgent:""}).userAgent,r="undefined"!=typeof window?window:{},n="undefined"!=typeof document?document:{},e.ipad=-1!=a.indexOf("iPad")||"MacIntel"===i.platform&&i.maxTouchPoints>1,e.iphone=-1!=a.indexOf("iPhone"),e.isAndroid=a.toLowerCase().indexOf("android")>-1,e.isIE=a.toLowerCase().indexOf("msie")>-1||a.indexOf("Trident/")>-1,e.isEdge=a.indexOf("Edge/")>-1,e.isSafari=a.indexOf("Safari/")>-1,e.isIOS7=a.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i),e.isIOS8=a.match(/(iPad|iPhone);.*CPU.*OS 8_\d/i),e.isIOS9=a.match(/(iPad|iPhone);.*CPU.*OS 9_\d/i),e.isIOS10=a.match(/(iPad|iPhone);.*CPU.*OS 10_\d/i),e.isIOS7or8=e.isIOS7||e.isIOS8||e.isIOS9||e.isIOS10,e.isMobile=e.isAndroid||e.ipad||e.iphone,e.touchDevice=void 0!==n.ontouchstart||i.maxTouchPoints>1,e.isSurface=e.touchDevice&&(e.isEdge||e.isIE),e.is_chrome=a.toLowerCase().indexOf("chrome")>-1&&!e.isEdge,e.isFF=a.toLowerCase().indexOf("firefox")>-1,e.isSurfaceApp=r.MSApp,e.isWebComponentsSupported="undefined"!=typeof document&&"registerElement"in document&&"import"in document.createElement("link")&&"content"in document.createElement("template"),e.noKeyboard=e.isMobile||e.isSurfaceApp},h=function(t){var e,i,r;t.SplinePlotter||(t.SplinePlotter={}),e=t.CIQ,i=t.SplinePlotter,r=function(t,e,i,a){var r,n,s,o,l,h=W;function c(t,e,a){[1,2].forEach((function(t){e[t].cp={},["x","y"].forEach((function(i){var r;r=1/(1+Math.sqrt(Math.pow(e[2*t-1].x-e[2*t-2].x,2)+Math.pow(e[2*t-1].y-e[2*t-2].y,2))/Math.sqrt(Math.pow(e[2].x-e[1].x,2)+Math.pow(e[2].y-e[1].y,2))),e[t].cp[i]=e[t][i]+(3-2*t)*(e[t+1][i]-e[t-1][i])*a*(r||0),e[t].cp[i]<Math.min(e[1][i],e[2][i])&&(e[t].cp[i]=Math.min(e[1][i],e[2][i])),e[t].cp[i]>Math.max(e[1][i],e[2][i])&&(e[t].cp[i]=Math.max(e[1][i],e[2][i]))}))})),h.d8u(),0===t?i.quadraticCurveTo(e[2].cp.x,e[2].cp.y,e[2].x,e[2].y):t===n-4?i.quadraticCurveTo(e[1].cp.x,e[1].cp.y,e[2].x,e[2].y):i.bezierCurveTo(e[1].cp.x,e[1].cp.y,e[2].cp.x,e[2].cp.y,e[2].x,e[2].y)}r=0,a||(a=[]),h.t8u(),(!e||e<0)&&(h.p16(0),e=h.T16("0",1)),n=t.length,i.moveTo(t[0],t[1]);for(var u=0;u<n-3;u+=2)o=u,l=void 0,r!=a.length&&(l=a[r],h.t8u(),l.coord[0]==t[o]&&l.coord[1]==t[o+1]&&(i.stroke(),i.strokeStyle=l.color,i.setLineDash(l.pattern),i.lineDashOffset=0,i.lineWidth=l.width,i.beginPath(),i.moveTo(t[o],t[o+1]),r++)),(s=[])[0]={x:t[Math.max(0,u-2)],y:t[Math.max(1,u-1)]},s[1]={x:t[u],y:t[u+1]},s[2]={x:t[u+2],y:t[u+3]},s[3]={x:t[Math.min(n-2,u+4)],y:t[Math.min(n-1,u+5)]},4===n&&(h.G16(1),e=h.l16("0",1540667680)),c(u,s,e)},t.SplinePlotter.plotSpline||(t.SplinePlotter.plotSpline=r),e.clearCanvas=function(t,i){var a,r,n,s,o=W;t.isDirty=!1,o.G16(1),a=o.T16("2",575824224),o.d8u();for(var l=1;858091591!==o.g5l(l.toString(),l.toString().length,22249);l++)r=t.context,o.G16(1),a+=o.T16("2",635128704);-578489204!==o.g5l(a.toString(),a.toString().length,943)&&(r=t.context),r.clearRect(0,0,t.width,t.height),!e.isAndroid||e.is_chrome||e.isFF||(e.ChartEngine.useOldAndroidClear&&i&&(r.fillStyle=i.containerColor,r.fillRect(0,0,t.width,t.height),r.clearRect(0,0,t.width,t.height)),n=t.width,t.width=1,t.width=n),s=i.chart.canvasShim.childNodes.length>0,(i.useBackgroundCanvas||s)&&(i.useBackgroundCanvas=s,t==i.chart.canvas&&e.clearCanvas(i.chart.backgroundCanvas,i))},e.fillTransparentCanvas=function(t,e,i,a){var r,n;r=t.globalCompositeOperation,t.globalCompositeOperation="destination-over",t.fillStyle=e,n=2;for(var s=1;-1283875050!==W.g5l(s.toString(),s.toString().length,40876);s++)t.fillRect(0,0,i,a),t.globalCompositeOperation=r,n+=2;-2032157753!==W.R5l(n.toString(),n.toString().length,89917)&&(t.fillRect(1,8,i,a),t.globalCompositeOperation=r)},e.convertBoxToPixels=function(t,e,i){var a,r,n,s,o;return a=t.panels[e],r=t.pixelFromTick(i.x0,a.chart),n=t.pixelFromTick(i.x1,a.chart),s=i.cy0||0===i.cy0?i.cy0:t.pixelFromValueAdjusted(a,i.x0,i.y0),o=i.cy1||0===i.cy1?i.cy1:t.pixelFromValueAdjusted(a,i.x1,i.y1),W.d8u(),{x0:r,x1:n,y0:s,y1:o}},e.fillArea=function(t,e,r){var n,s,o,l,h,c,u,d,p,m,g,f;if(e.length){if(s=(n=t.chart.context).globalAlpha,o=arguments[2],l=arguments[3],h=arguments[4],c=0,u=null,r&&"object"==a(r)&&(o=r.color,l=r.opacity,c=r.tension,h=r.panelName,u=r.yAxis),l||0===l||(l=.2),"auto"==o&&(o=t.defaultColor),n.globalAlpha=l,o&&(n.fillStyle=o),d=Number.MAX_VALUE,W.p16(2),p=W.T16(1,d),(m=t.panels[h])&&(p=(u||m.yAxis).top,d=(u||m.yAxis).bottom,n.save(),n.beginPath(),n.rect(m.left,p,m.width,d-p),n.clip()),n.beginPath(),c){for(f=[],g=0;g<e.length-2;g++)f.push(e[g][0],e[g][1]);for(i.plotSpline(f,c,n),g=e.length-2;g<e.length;g++)n.lineTo(Math.round(e[g][0]),Math.round(e[g][1]))}else for(n.moveTo(e[0][0],e[0][1]),g=1;g<e.length;g++)n.lineTo(e[g][0],e[g][1]);n.closePath(),n.fill(),m&&n.restore(),n.globalAlpha=s}},e.prepareChannelFill=function(t,i){var a,r,n,s,o,l;(!i||i instanceof Array)&&(i=arguments[2]),i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),a=t.panels[i.panelName],t.chart.context.strokeStyle,r={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},n=e.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{},yAxis:a.yAxis}),s=t.plotDataSegmentAsLine(i.topBand,a,n),o=t.plotDataSegmentAsLine(i.bottomBand,a,n),i.noDraw=r.noDraw,i.gapDisplayStyle=r.gapDisplayStyle,l=[];for(var h=0;h<s.points.length;h+=2)l.push([s.points[h],s.points[h+1]]);for(var c=o.points.length-1;c>=0;c-=2)l.push([o.points[c-1],o.points[c]]);e.fillArea(t,l,i)},e.preparePeakValleyFill=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E,O,I,N,H=W;(!i||i instanceof Array)&&(i=arguments[2]),i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),r=(a=t.panels[i.panelName]).yAxis,(n=t.chart.context).strokeStyle,s={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},o=t.plotDataSegmentAsLine(i.band,a,e.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{}})),i.noDraw=s.noDraw,i.gapDisplayStyle=s.gapDisplayStyle,l=i.threshold,h=i.direction,c=i.reverse,u=i.gapDisplayStyle,i.yAxis&&(r=i.yAxis),d=-Number.MAX_VALUE,p=Number.MAX_VALUE,m=c?d:p,(l||0===l)&&(m=t.pixelFromPrice(l,a,r)),g=[],f=o.points.length;for(var V=0;V<f;V+=2)y=o.points[V],H.G16(3),v=o.points[H.l16(V,"1")],i.roundOffEdges&&(0===V?y=Math.floor(y):V+2==f&&(y=Math.ceil(y))),isNaN(v)||(v>m&&h>0||v<m&&h<0||(g.push([y,v]),d=Math.max(v,d),p=Math.min(v,p)),V<f-3&&(H.G16(3),x=o.points[H.T16(V,"2")],H.G16(4),b=o.points[H.T16(3,V)],(v<m&&b>m||v>m&&b<m)&&(H.G16(5),y+=H.T16(v,y,b,m,x,v),g.push([y,m]))));if(f=g.length){if(S=i.edgeParameters,i.edgeHighlight){S.lineWidth>100&&(S.lineWidth=1),n.save(),n.beginPath();for(var z=0;z<f-1;z++)if(C=g[z],H.p16(3),w=g[H.l16(z,"1")],C[1]!=m||w[1]!=m){if(C[0]==w[0]&&t.layout.candleWidth>=1){if(C[1]==m&&g[z-1]&&g[z-1][1]==m)continue;if(w[1]==m&&g[z+2]&&g[z+2][1]==m)continue}t.plotLine(e.extend({x0:C[0],x1:w[0],y0:C[1],y1:w[1],color:i.edgeHighlight,type:"segment",context:n,confineToPanel:a,deferStroke:!0},S))}n.stroke(),n.restore()}if(l||0===l||(r.flipped&&(c=!c),m=c?Math.min(p,r.top):Math.max(d,r.bottom)),g.push([g[f-1][0],m],[g[0][0],m]),(T=i.opacity)||0===T||(i.opacity=.3),e.fillArea(t,g,i),H.t8u(),u&&u.color&&u.fillMountain&&!i.tension&&!e.isTransparent(u.color)&&!e.isTransparent(i.color)){if(n.save(),n.fillStyle instanceof CanvasGradient)k=e.colorToHex(u.color),H.G16(6),(D=n.createLinearGradient(H.l16(0,"0"),1===h?a.top:a.bottom,0,m)).addColorStop(0,e.hexToRgba(k,60)),D.addColorStop(1,e.hexToRgba(k,10)),n.fillStyle=D;else{A=1404009454,M=671782287,P=2;for(var B=1;H.R5l(B.toString(),B.toString().length,27298)!==A;B++)n.fillStyle=u.color,P+=2;H.R5l(P.toString(),P.toString().length,19652)!==M&&(n.fillStyle=u.color),n.fillStyle=u.color}for(F=[],_={opacity:i.opacity,panelName:i.panelName},n.beginPath(),V=0;V<o.gapAreas.length;V++)L=(R=o.gapAreas[V]).start,E=R.end,O=R.threshold,L?F=[[L[0],L[1]],[L[0],O]]:F.push([E[0],O],[E[0],i.step?F[0][1]:E[1]]),4==F.length&&(I="segme",I+="n",I+="t",e.fillArea(t,F,_),N=e.extend({x1:F[3][0],y0:F[0][1],type:I,deferStroke:!0,context:n,confineToPanel:a},u),i.step?(t.plotLine(e.extend({x0:F[0][0],y1:F[0][1]},N)),t.plotLine(e.extend({x0:F[3][0],y1:F[3][1]},N))):t.plotLine(e.extend({x0:F[0][0],y1:F[3][1]},N)));n.stroke(),n.restore()}i.opacity=T}},e.fillIntersecting=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;r="x",r+="o",r+="r",(!a||a instanceof Array)&&(a=arguments[3]),n=a.topBand,s=a.bottomBand,o=a.topSubBand,l=a.bottomSubBand,h=a.topColor,c=a.bottomColor,(u=i).panel&&(u.outputs&&u.outputMap&&(h||(h=u.outputs[u.outputMap[n]]),c||(c=u.outputs[u.outputMap[s]])),u=u.panel),u=t.panels[u],p=(d=t.chart.context).canvas,(m=t.scratchContext)||(g="2",g+="d",m=t.scratchContext=p.cloneNode(!0).getContext(g)),(f=m.canvas).height=p.height,f.width=p.width,m.drawImage(p,0,0),e.clearCanvas(p,t),y=.3,a.opacity&&(y=a.opacity),d.save(),d.globalCompositeOperation=r,v={band:n,subField:o,color:h,opacity:1,panelName:u.name,yAxis:a.topAxis,skipTransform:a.skipTransform,tension:a.tension,roundOffEdges:!0},e.preparePeakValleyFill(t,v),e.extend(v,{band:s,subField:l,color:c,yAxis:a.bottomAxis}),e.preparePeakValleyFill(t,v),d.globalAlpha=y,d.globalCompositeOperation="copy",d.scale(1/t.adjustedDisplayPixelRatio,1/t.adjustedDisplayPixelRatio),d.drawImage(p,0,0),d.globalAlpha=1,d.globalCompositeOperation="destination-over",d.drawImage(f,0,0),d.restore()},W.d8u(),e.drawLegendItem=function(t,e,i,a,r){var n,s,o,l=W;return r||(r=1),l.G16(1),n=e[l.l16("0",166299040)],s=e[1],10,10,(o=t.chart.context).globalAlpha=r,o.fillStyle=a,o.fillRect(n,s,10,10),o.globalAlpha=1,l.p16(4),n+=l.l16(2,10),o.fillStyle=t.defaultColor,o.fillText(i,n,s),[n+=o.measureText(i).width+6,s]},e.drawLegend=function(t,i){var a,r,n,s,o,l,h,c,u,d,p;W.t8u(),a=i.coordinates,(r=t.chart.context).textBaseline="top",n=r.font,t.canvasFont("stx-legend",r),s=i.chart||t.chart,a||(a=s.legend),o=[a.x,a.y],l=t.defaultColor;for(var m=0;m<2;m++)for(var g in i.legendColorMap)if((!(h=i.legendColorMap[g]).isBase||!m&&!i.noBase)&&(h.isBase||m)){if(h.color instanceof Array){for(c=(u=h.color).length-1;c>=0;c--)e.isTransparent(u[c])&&u.splice(c,1);if(u.length>1){for(d=r.createLinearGradient(o[0],o[1],o[0]+10,o[1]),c=0;c<u.length;c++)d.addColorStop(c/(u.length-1),u[c]);l=d}else l=u.length>0?u[0]:t.getCanvasColor("stx_line_chart")}else l=h.color?h.color:null;l&&(p=g,h.display&&(p=h.display),p||(p=s.symbolDisplay?s.symbolDisplay:s.symbol),o[0]+r.measureText(p).width>s.panel.right&&(o=[a.x,a.y+r.measureText("M").width+6]),o=e.drawLegendItem(t,o,p,l,h.opacity))}r.font=n}},c=function(t){var e;(e=t.CIQ).colorsEqual=function(t,i){var a,r,n,s,o;return"rgba(0,0,0",",0",")","rg","ba(","0,0",W.t8u(),",0,0)",t==i||(!t&&!i||!(!t||!i)&&("transparent"==t&&(t="rgba(0,0,0,0)"),"transparent"==i&&(i="rgba(0,0,0,0)"),a=/^rgba\(.*,(.+)\)/,r=t.match(a),n=i.match(a),(r=r?parseFloat(r[1]):1)==(n=n?parseFloat(n[1]):1)&&(s=e.colorToHex(t),o=e.colorToHex(i),s.toLowerCase()==o.toLowerCase())))},e.colorToHex=function(t){var i,a,r,n,s,o,l,h=W;if("tran","sparent",e.colorToHexMapping||(e.colorToHexMapping={}),t&&"transparent"!=t||(t="#000000"),e.colorToHexMapping[t])return e.colorToHexMapping[t];if("#"===t.substr(0,1))return 4==t.length&&(t=e.colorToHexMapping[t]="#"+Array(3).join(t.substr(1,1))+Array(3).join(t.substr(2,1))+Array(3).join(t.substr(3,1))),t;if((i=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(t))||(i=/(.*?)rgba\((\d+), ?(\d+), ?(\d+),.*\)/.exec(t)),!i)return a=function(t){var a,r;if("undefined"==typeof document)return"#000000";(a=document.querySelector(".ciq_color_converter"))||("n","on","e",(a=document.createElement("textarea")).className="ciq_color_converter",a.style.display="none",document.body.appendChild(a));if(a.style.color="#000000",a.style.color=t,r=getComputedStyle(a).getPropertyValue("color"),i=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(r))return e.colorToHex(r);if("#"===r.substr(0,1))return r;return h.d8u(),t}(t),e.colorToHexMapping[t]=a,a;r=parseFloat(i[2]),n=parseFloat(i[3]),s=parseFloat(i[4]),h.p16(7);for(var c=(o=h.l16(16,n,s,r,8).toString(16)).length;c<6;c++)h.G16(4),o=h.T16(o,"0");return l=i[1]+"#"+o,e.colorToHexMapping[t]=l,l},e.hexToRgba=function(t,i){var a,r,n,s,o,l=W;return"trans","pa","ren","t",t&&"transparent"!=t||(t="rgba(0,0,0,0)"),"rgba"===t.substr(0,4)?(r=(a=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(t))[5],(i||0===i)&&(r=i),r>1&&(l.G16(8),r=l.T16(100,r)),"rgba("+a[2]+","+a[3]+","+a[4]+","+r+")"):("rgb"===t.substr(0,3)&&(t=e.colorToHex(t)),i||0===i||(i=100),i<=1&&(l.G16(0),i=l.T16(i,100)),t=t.replace("#",""),n=parseInt(t.slice(0,2),16),s=parseInt(t.slice(2,4),16),l.d8u(),o=parseInt(t.slice(4,6),16),isNaN(n)||isNaN(s)||isNaN(o)?("CIQ",".hexTo","Rgba: invalid hex :",console.log("CIQ.hexToRgba: invalid hex :",t),null):(l.G16(9),l.l16("rgba(",100,",",s,",",o,",",i,n,")")))},e.convertToNativeColor=function(t){var e,i;return"n","one","D","I","V",(e=document.createElement("DIV")).style.color=t,e.style.display="none",document.body.appendChild(e),i=getComputedStyle(e).color,document.body.removeChild(e),i},e.isTransparent=function(t){var e;return"transpare","nt",!!t&&("transparent"==t||(W.t8u(),null!==(e=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(t))&&0===parseFloat(e[5])))},e.hsv=function(t){var i,a,r,n,s,o,l,h,c,u=W;"#"===(i=e.colorToHex(t)).substr(0,1)&&(i=i.slice(1));for(var d=i.length;d<6;d++)u.p16(4),i=u.l16(i,"0");return a=parseInt(i.slice(0,2),16),r=parseInt(i.slice(2,4),16),n=parseInt(i.slice(4,6),16),u.G16(10),u.T16("0",0),u.G16(6),u.l16(0,"0"),0,a=parseInt((""+a).replace(/\s/g,""),10),r=parseInt((""+r).replace(/\s/g,""),10),n=parseInt((""+n).replace(/\s/g,""),10),null===a||null===r||null===n||isNaN(a)||isNaN(r)||isNaN(n)?(console.log("CIQ.hsv: invalid color :",t),null):a<0||r<0||n<0||a>255||r>255||n>255?null:(u.G16(11),a=u.l16("255",a),u.p16(8),r=u.l16(255,r),u.p16(8),n=u.l16(255,n),(o=Math.min(a,Math.min(r,n)))==(l=Math.max(a,Math.max(r,n)))?[0,0,o]:(h=a==o?r-n:n==o?a-r:n-a,c=a==o?3:n==o?1:5,u.G16(12),s=u.T16(o,60,l,h,c),u.G16(13),[s,u.T16(o,l,l),l]))},e.hsl=function(t){var i,a,r,n,s,o,l,h,c,u,d=W;"#"===(i=e.colorToHex(t)).substr(0,1)&&(i=i.slice(1));for(var p=i.length;p<6;p++)d.p16(4),i=d.T16(i,"0");if(a=parseInt(i.slice(0,2),16),r=parseInt(i.slice(2,4),16),n=parseInt(i.slice(4,6),16),a/=255,r/=255,n/=255,s=Math.max(a,r,n),o=Math.min(a,r,n),d.p16(14),c=d.l16(s,2,o),s==o)l=h=0;else{switch(d.G16(10),u=d.l16(s,o),h=c>.5?u/(2-s-o):u/(s+o),s){case a:d.G16(15),l=d.T16(n,r,r<n?6:0,u);break;case r:d.p16(15),l=d.l16(a,n,2,u);break;case n:d.p16(15),l=d.T16(r,a,4,u)}l/=6}return[l,h,c]},e.hslToRgb=function(t,e,i){var a,r,n,s,o,l,h=W;return 0===e?a=r=n=i:(s=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?(h.p16(16),h.T16(e,6,t,t,i)):i<.5?e:i<2/3?(h.G16(17),h.l16(3,e,2,i,6,t,t)):(h.d8u(),t)},o=i<.5?i*(1+e):i+e-i*e,h.G16(18),l=h.T16(2,i,o),h.p16(19),a=s(l,o,h.T16(3,1,t)),r=s(l,o,t),h.p16(20),n=s(l,o,h.T16(3,t,1))),h.p16(0),h.d8u(),[Math.round(h.T16(a,255)),Math.round(h.l16(r,255)),Math.round(h.T16(n,255))]},e.chooseForegroundColor=function(t){var i;return"#","00","000","0",i=e.colorToHex(t),.2126*parseInt(i.slice(1,3),16)+.7152*parseInt(i.slice(3,5),16)+.0722*parseInt(i.slice(5,7),16)<100?"#FFFFFF":"#000000"},e.borderPatternToArray=function(t,e){var i=W;return'"; defau','lting to "',"soli",'d"',"Unsupp","orted pa","t",'tern "',e?e instanceof Array?e:"dotted"==e?[t,t]:"dashed"==e?(i.G16(0),[i.T16(t,5),i.l16(t,5)]):("solid"!=e&&"none"!=e&&(i.G16(21),console.log(i.l16('"; defaulting to "solid"','Unsupported pattern "',e))),[]):[]},e.getBackgroundColor=function(t){var i,a;for("#F","F",W.t8u(),"FF","FF",i=null;!i||e.isTransparent(i);){if(!(a=getComputedStyle(t)))return;if(i=a.backgroundColor,e.isTransparent(i)&&(i="transparent"),!(t=t.parentNode)||!t.tagName)break}return i&&"transparent"!=i||(i="#FFFFFF"),i}},u=function(t){var e,i;e=t.CIQ,i=t.timezoneJS,e.monthLetters=["J","F","M","A","M","J","J","A","S","O","N","D"],e.monthAbv=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.MILLISECOND=1,e.SECOND=1e3,e.MINUTE=60*e.SECOND,e.HOUR=60*e.MINUTE,e.DAY=24*e.HOUR,e.WEEK=7*e.DAY,e.MONTH=31*e.DAY,e.YEAR=366*e.DAY,e.DECADE=10*e.YEAR-7*e.DAY,e.yyyymmddhhmmssmmmrx=new RegExp("\\d{17}"),e.strToDateTime=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y=W;if(!t||t.getFullYear)return t;if(i=[],12==t.length||14==t.length)return a=parseFloat(t.substring(0,4)),r=parseFloat(t.substring(4,6))-1,n=parseFloat(t.substring(6,8)),s=parseFloat(t.substring(8,10)),o=parseFloat(t.substring(10,12)),l=parseFloat(t.substring(12,14))||0,new Date(a,r,n,s,o,l,0);if(e.yyyymmddhhmmssmmmrx.test(t))return a=parseFloat(t.substring(0,4)),r=parseFloat(t.substring(4,6))-1,n=parseFloat(t.substring(6,8)),s=parseFloat(t.substring(8,10)),o=parseFloat(t.substring(10,12)),l=parseFloat(t.substring(12,14)),h=parseFloat(t.substring(14,17)),new Date(a,r,n,s,o,l,h);if(c=[t],-1!=(u=t.indexOf("T"))){if(-1!=(d=t.substring(u)).indexOf("Z")||-1!=d.indexOf("-")||-1!=d.indexOf("+"))return new Date(t);c=t.split("T")}else-1!=t.indexOf(" ")&&(c=t.split(" "));if(y.d8u(),-1!=c[0].indexOf("/"))i=c[0].split("/");else{if(-1==c[0].indexOf("-"))return e.strToDate(t);i=c[0].split("-")}return p=parseFloat(i[2],10),i[0]&&4==i[0].length&&(p=parseFloat(i[0],10),i[0]=i[1],y.G16(22),i[1]=i[y.T16(2147483647,"2")]),c.length>1?(m=c[2],c=c[1].split(":"),m&&("12"==c[0]&&"AM"==m.toUpperCase()?c[0]=0:"12"!=c[0]&&"PM"==m.toUpperCase()&&(c[0]=parseInt(c[0],10)+12)),g=0,f=0,3==c.length&&(-1==c[2].indexOf(".")?g=parseInt(c[2],10):3==(g=c[2].split("."))[1].length&&(f=g[1],g=g[0])),y.p16(6),new Date(p,i[0]-1,i[1],c[y.l16(0,"0")],c[1],g,f)):(y.p16(6),new Date(p,i[0]-1,i[1],0,0,y.T16(0,"0"),0))},e.strToDate=function(t){var e,i,a,r=W;e=2;for(var n=1;632894095!==r.R5l(n.toString(),n.toString().length,69993);n++)e+=2;if(r.d8u(),r.g5l(e.toString(),e.toString().length,28775),-1!=t.indexOf("/"))i=t.split("/");else{if(-1==t.indexOf("-"))return t.length>=8?new Date(parseFloat(t.substring(0,4)),parseFloat(t.substring(4,6))-1,parseFloat(t.substring(6,8))):new Date;i=t.split("-")}return i.length<3?new Date:(-1!=i[2].indexOf(" ")?i[2]=i[2].substring(0,i[2].indexOf(" ")):-1!=i[2].indexOf("T")&&(r.p16(23),i[2]=i[2].substring(r.T16("0",2062711008),i[2].indexOf("T"))),(a=parseFloat(i[2],10))<20&&(a+=2e3),4==i[0].length&&(a=parseFloat(i[0],10),i[0]=i[1],i[1]=i[2]),r.G16(10),new Date(a,i[0]-1,i[r.T16("1",0)]))},e.mmddyyyy=function(t){var i,a,r=W;return"string"==typeof t&&(t=e.strToDate(t)),(i=t.getMonth()+1)<10&&(r.p16(4),i=r.l16(i,"0")),(a=t.getDate())<10&&(r.p16(4),a=r.T16(a,"0")),i+"/"+a+"/"+t.getFullYear()},e.yyyymmdd=function(t){var e,i,a=W;return a.d8u(),(e=t.getMonth()+1)<10&&(a.p16(4),e=a.l16(e,"0")),(i=t.getDate())<10&&(a.p16(4),i=a.l16(i,"0")),t.getFullYear()+"-"+e+"-"+i},W.t8u(),e.hhmm=function(t){var e,i,a=W;a.d8u(),(e=t.getHours())<10&&(a.p16(4),e=a.T16(e,"0")),i=t.getMinutes();for(var r=1;-788354859!==a.g5l(r.toString(),r.toString().length,63001);r++)return i<=59&&(a.G16(0),i=a.T16("0",i)),a.p16(24),a.T16(":",e,i);if(868343219!==a.g5l(2..toString(),2..toString().length,41046))return i<10&&(a.p16(4),i=a.l16(i,"0")),a.p16(21),a.T16(i,e,":")},e.hhmmss=function(t){var i;return W.t8u(),(i=t.getSeconds())<10&&(W.G16(4),i=W.T16(i,"0")),e.hhmm(t)+":"+i},e.yyyymmddhhmm=function(t){return W.d8u(),e.yyyymmddhhmmssmmm(t).substr(0,12)},e.yyyymmddhhmmssmmm=function(t){var e,i,a,r,n,s,o=W;return o.d8u(),(e=t.getMonth()+1)<10&&(o.G16(4),e=o.l16(e,"0")),(i=t.getDate())<10&&(o.G16(4),i=o.l16(i,"0")),(a=t.getHours())<10&&(o.G16(4),a=o.T16(a,"0")),(r=t.getMinutes())<10&&(o.p16(4),r=o.T16(r,"0")),(n=t.getSeconds())<10&&(o.p16(4),n=o.l16(n,"0")),(s=t.getMilliseconds())<10?(o.G16(4),s=o.T16(s,"00")):s<100&&(o.G16(4),s=o.l16(s,"0")),""+t.getFullYear()+e+i+a+r+n+s},e.friendlyDate=function(t){var e,i,a,r,n=W;return(e=t.getMonth()+1)<10&&(n.G16(4),e=n.l16(e,"0")),(i=t.getDate())<10&&(n.p16(4),i=n.l16(i,"0")),(a=t.getHours())<10&&(n.p16(4),a=n.l16(a,"0")),(r=t.getMinutes())<10&&(n.p16(4),r=n.l16(r,"0")),t.getFullYear()+"/"+e+"/"+i+" "+a+":"+r},e.mmddhhmm=function(t){var i,a,r,n,s,o,l,h=W;return"0","0",(a=(i=e.strToDateTime(t)).getMonth()+1)<10&&(h.G16(4),a=h.T16(a,"0")),(r=i.getDate())<10&&(h.G16(4),r=h.l16(r,"0")),(n=i.getHours())<10&&(h.p16(4),n=h.l16(n,"0")),(s=i.getMinutes())<10&&(h.p16(4),s=h.l16(s,"0")),(o=i.getSeconds())<10&&(h.G16(4),o=h.T16(o,"0")),(l=i.getMilliseconds())<10?(h.G16(4),l=h.T16(l,"00")):l<100&&(h.p16(4),l=h.l16(l,"0")),"00"==n&&"00"==s&&"00"==o&&"000"==l?a+"-"+r+"-"+i.getFullYear():"00"==o&&"000"==l?(h.G16(25),h.l16(a,s,r,"-",n," ",":")):"000"==l?(h.G16(26),h.l16(" ",n,":",r,"-",s,a,":",o)):(h.p16(27),h.l16(" ",o,":",n,a,":",":",s,l,r,"-"))},e.getYearDay=function(t){var e,i,a,r,n=W;return(e=t)||(e=new Date),e.setHours(0,0,0,0),i=new Date(e.getFullYear(),0,0),n.G16(10),a=n.T16(e,i),n.p16(28),r=n.l16(60,60,"1000",24,0),n.p16(8),Math.round(n.T16(r,a))},e.getETDateTime=function(){var t;return W.d8u(),"A","me","rica/","New_York",t=new Date,e.convertTimeZone(new Date(t.getTime()+6e4*t.getTimezoneOffset()),"UTC","America/New_York")},e.fromET=function(t){var e,i,a;return i=4,((e=new Date).getMonth()<2||2==e.getMonth()&&e.getDate()<11||e.getMonth()>10||10==e.getMonth()&&e.getDate()>=4)&&(i=5),a=t.getTime()+36e5*i,new Date(a)},e.monthAsDisplay=function(t,i,a){return W.d8u(),i?a&&a.monthLetters?a.monthLetters[t]:e.monthLetters[t]:a&&a.monthAbv?a.monthAbv[t]:e.monthAbv[t]},e.timeAsDisplay=function(t,i,a){var r,n,s,o,l,h=W;return(r=i?i.internationalizer:null)?a==e.SECOND?r.hourMinuteSecond.format(t):a==e.MILLISECOND?r.hourMinuteSecond.format(t)+"."+t.getMilliseconds():r.hourMinute.format(t):((n=t.getMinutes())<10&&(h.G16(4),n=h.l16(n,"0")),s=t.getHours()+":"+n,o="",a<=e.SECOND&&((o=t.getSeconds())<10&&(h.G16(4),o=h.l16(o,"0")),h.G16(4),s+=h.l16(o,":")),a==e.MILLISECOND&&("0","0",(l=t.getMilliseconds())<10?(h.G16(4),l=h.T16(l,"00")):l<100&&(h.G16(4),l=h.l16(l,"0")),h.p16(4),s+=h.T16(l,".")),s)},e.displayableDate=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,m,g=W;function f(t){return t<10?(g.G16(4),g.T16(t,"0")):t}return r="",n=t.layout.interval,g.d8u(),s=e.ChartEngine.isDailyInterval(n),i.xAxis.formatter?r=i.xAxis.formatter(a):t.internationalizer?(r=t.internationalizer.monthDay.format(a),s?("mo","nt","h",r="month"==n?t.internationalizer.yearMonth.format(a):t.internationalizer.yearMonthDay.format(a)):r+=" "+t.internationalizer.hourMinute.format(a)):(o=f(a.getMonth()+1),l=f(a.getDate()),h=f(a.getHours()),c=f(a.getMinutes()),s?("mo","n","t","h",r="month"==n?o+"-":o+"-"+l+"-",r+=a.getFullYear()):("mi","lliseco","nd",g.G16(25),r=g.l16(o,c,l,"/",h," ",":"),u=i.xAxis.activeTimeUnit&&i.xAxis.activeTimeUnit<=e.SECOND||"second"==t.layout.timeUnit,d=i.xAxis.activeTimeUnit&&i.xAxis.activeTimeUnit<=e.MILLISECOND||"millisecond"==t.layout.timeUnit,(u||d)&&(p=f(a.getSeconds()),g.p16(4),r+=g.l16(p,":"),d&&((m=f(a.getMilliseconds()))<100&&(g.p16(4),m=g.l16(m,"0")),g.G16(4),r+=g.T16(m,":"))))),r},e.convertTimeZone=function(t,e,a){var r,n;r=2;for(var s=1;1908946936!==W.g5l(s.toString(),s.toString().length,1334);s++){if(!i.Date)return t;(n=new i.Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),e)).setTimezone(a),r+=2}if(673946552!==W.R5l(r.toString(),r.toString().length,52108)){if(-i.Date)return t;(n=new i.Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),e)).setTimezone(a)}return n},e.convertToLocalTime=function(t,e){var a,r,n;return i.Date?(a=t.getSeconds(),r=t.getMilliseconds(),n=new i.Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),e),new Date(n.getTime()+1e3*a+r)):t}},d=function(t){var e,i,r;t.SplinePlotter||(t.SplinePlotter={}),e=t.CIQ,t.SplinePlotter,i=function(t,e){var a;if(!e)return document.getElementById(t);if(e.id==t)return e;if(!e.hasChildNodes)return null;W.d8u();for(var r=0;r<e.childNodes.length;r++)if(a=i(t,e.childNodes[r]))return a;return null},t.$$=i,r=function(t,e){var i=W;return i.t8u(),e||(e=document),e.querySelectorAll(t)[i.T16(0,"0",i.G16(29))]},t.$$$=r,e.wheelEvent=function(){if("DOMMo","us","eScroll","mousew","heel","undefined"!=typeof document)return e.isIE||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}(),e.newChild=function(t,e,i,a){var r;return W.t8u(),r=document.createElement(e),i&&(r.className=i),t.appendChild(r),a&&(r.innerHTML=a),r},e.innerHTML=function(t,e){W.d8u(),window.MSApp&&window.MSApp.execUnsafeLocalFunction?window.MSApp.execUnsafeLocalFunction((function(){t.innerHTML=e})):t.innerHTML=e},e.focus=function(t,i){var a;W.d8u(),e.isSurface||i?(a=0,isNaN(parseInt(i,10))||(a=i),setTimeout((function(){t.focus()}),a)):t.focus()},e.blur=function(t){t||(t=document.activeElement),t&&t.blur(),window.focus()},e.findNodesByText=function(t,i){var a,r;if(t.innerHTML==i)return[t];a=[];for(var n=0;n<t.childNodes.length;n++)(r=e.findNodesByText(t.childNodes[n],i))&&(a=a.concat(r));return a.length?a:null},e.hideByText=function(t,i){var a;W.t8u(),a=e.findNodesByText(t,i);for(var r=0;r<a.length;r++)a[r].style.display="none"},e.outerWidth=function(t){var i;return i=t.offsetWidth,i+=e.stripPX(getComputedStyle(t).marginLeft),i+=e.stripPX(getComputedStyle(t).marginRight)},e.clearNode=function(t){if(W.t8u(),t.hasChildNodes())for(;t.childNodes.length>=1;)t.removeChild(t.firstChild)},e.pageHeight=function(){var t=window,e=t.innerHeight,i=t.top,a=t.parent;if(i!=t.self)try{e>a.innerHeight&&(e=a.innerHeight)}catch(t){}return W.d8u(),e},e.pageWidth=function(){var t=window,e=t.innerWidth,i=t.top,a=t.parent,r=t.self;if(W.t8u(),i!=r)try{e>a.innerWidth&&(e=a.innerWidth)}catch(t){}return e},e.stripPX=function(t){return t?"number"==typeof t?t:parseInt(t.substr(0,t.indexOf("p")),10):0},e.withinElement=function(t,e,i){var a;return!(e<=(a=t.getBoundingClientRect()).left)&&(!(i<=a.top)&&(!(e>=a.left+t.offsetWidth)&&!(i>=a.top+t.offsetHeight)))},e.efficientDOMUpdate=function(t,e,i){W.t8u(),t[e]!==i&&(t[e]=i)},e.safeMouseOut=function(t,i){var a,r;W.t8u(),t.addEventListener("mouseout",(a=t,r=i,W.t8u(),function(t){void 0===t.pageX&&(t.pageX=t.clientX,t.pageY=t.clientY),e.withinElement(a,t.pageX,t.pageY)||(a.stxMouseOver=!1,r(t))}))},e.safeMouseOver=function(t,i){var r,n;t.addEventListener("mouseover",(r=t,n=i,W.t8u(),function(t){if(W.t8u(),"undefined"==a(t.pageX)&&(t.pageX=t.clientX,t.pageY=t.clientY),e.withinElement(r,t.pageX,t.pageY)){if(r.stxMouseOver)return;r.stxMouseOver=!0,n(t)}}))},e.installTapEvent=function(t,i){var a;W.t8u(),a=function(t){var e;e=new Event("stxtap",{bubbles:!0,cancelable:!0}),W.d8u(),void 0===t.pageX&&(t.pageX=t.clientX,t.pageY=t.clientY),e.pageX=t.pageX,e.pageY=t.pageY,t.target.dispatchEvent(e),i&&i.stopPropagation&&t.stopPropagation()},e.safeClickTouch(t,a,i)},e.safeClickTouch=function(t,i,a){var r,n,s,o,l,h,c,u;function d(t,a,r){return W.d8u(),function(n){var s;if(!e.safeClickTouchEvent){if(!r.t)return;if(s=r.t,r.t=null,s+1e3<(new Date).getTime())return}if(!(a.safety&&a.safety.recentlyDragged||n.which&&n.which>=2||n.button&&n.button>=2)){if(a.preventUnderlayClick)"INPUT"!==n.target.tagName&&n.preventDefault();else{if(a.lastType!=t&&Date.now()<a.allowAnotherDevice)return;a.lastType=t,a.allowAnotherDevice=Date.now()+1e3}W.d8u(),i(n)}}}function p(t,e){return function(i){var a,r;a=i.clientX?i.clientX:i.pageX,r=i.clientY?i.clientY:i.pageY,e?(t.t=(new Date).getTime(),t.x=a,t.y=r):t.x&&Math.pow(t.x-a,2)+Math.pow(t.y-r,2)>16&&(t.t=null)}}a||(a={}),r={},a.allowMultiple||e.clearSafeClickTouches(t),!1!==a.preventUnderlayClick&&(a.preventUnderlayClick=!0),!1!==a.absorbDownEvent&&(a.absorbDownEvent=!0),a.allowAnotherDevice=0,a.registeredClick=!1,(n=t.safeClickTouchEvents)||(n=t.safeClickTouchEvents=[]),s=d("mouseup",a,r),o=d("touchend",a,r),l=d("pointerup",a,r),h=function(t){t.stopPropagation()},c={},e.safeClickTouchEvent?(u=d(e.safeClickTouchEvent,a),t.addEventListener(e.safeClickTouchEvent,u),c[e.safeClickTouchEvent]=u,n.push(c)):"onpointerup"in document&&!e.noPointerEvents?(t.addEventListener("pointerdown",p(r,!0)),t.addEventListener("pointermove",p(r)),t.addEventListener("pointerup",l),c.pointerup=l,a.absorbDownEvent&&(t.addEventListener("pointerdown",h),c.pointerdown=h),n.push(c)):("m","ouseup","to","uc","hst","art","mo","us","edown",t.addEventListener("mousedown",p(r,!0)),t.addEventListener("mousemove",p(r)),t.addEventListener("touchstart",p(r,!0)),t.addEventListener("touchmove",p(r)),t.addEventListener("mouseup",s),t.addEventListener("touchend",o),c.mouseup=s,c.touchend=o,a.absorbDownEvent&&("mo","us","edow","n",t.addEventListener("mousedown",h),c.mousedown=h,t.addEventListener("touchstart",h),c.touchstart=h),n.push(c))},e.clearSafeClickTouches=function(t){var e,i,a;if(e=t.safeClickTouchEvents){for(var r=0;r<e.length;r++)for(var n in i=e[r])a=i[n],t.removeEventListener(n,a);t.safeClickTouchEvents=null}},e.safeDrag=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f;function y(t){return function(a){var r,n;p||(p=!0,e.ChartEngine.ignoreTouch=!0,r=function(t){t&&t.preventDefault&&t.preventDefault(),f.recentlyDragged=!0,t.displacementX=c(t)-m,t.displacementY=u(t)-g,i.move(t)},i.move&&document.body.addEventListener(t.move,r),n=function(a){e.ChartEngine.ignoreTouch=!1,i.move&&document.body.removeEventListener(t.move,r),document.body.removeEventListener(t.up,n),a.displacementX=c(a)-m,W.d8u(),a.displacementY=u(a)-g,i.up&&i.up(a),setTimeout((function(){f.recentlyDragged=!1}),50)},document.body.addEventListener(t.up,n),setTimeout((function(){W.d8u(),p=!1}),d),m=c(a),g=u(a),i.down&&i.down(a))}}return a="touch",a+="mo",a+="v",a+="e",r="touch",r+="start",n="pointer",n+="up",s="m",s+="o",s+="us",s+="emove",o="pa",o+="g",o+="e",o+="Y",l="cli",l+="e",l+="nt",c=(h=function(t,e){return function(i){if(i.touches){if(i.touches.length>0)return i.touches[0][t];if(i.changedTouches&&i.changedTouches.length>0)return i.changedTouches[0][t]}return void 0!==i[t]?i[t]:i[e]}})("pageX",l+="X"),u=h(o,"clientY"),"function"==typeof i&&(i={down:arguments[1],move:arguments[2],up:arguments[3]}),i=i||{},d=100,p=!1,W.d8u(),m=0,g=0,f={recentlyDragged:!1},t.addEventListener("mousedown",y({down:"mousedown",move:s,up:"mouseup"})),t.addEventListener("pointerdown",y({down:"pointerdown",move:"pointermove",up:n})),t.addEventListener("touchstart",y({down:r,move:a,up:"touchend"})),f},e.inputKeyEvents=function(t,e){W.d8u(),t.addEventListener("keyup",(function(i){switch(i.keyCode){case 13:e();break;case 27:t.value=""}}),!1)},e.fixScreen=function(){W.d8u(),window.scrollTo(0,0)},e.setCaretPosition=function(t,i){var a;if(W.G16(22),t.style.zIndex=W.T16(2147483647,"5000"),t.setSelectionRange){e.focus(t);try{t.setSelectionRange(i,i)}catch(t){}}else t.createTextRange&&((a=t.createTextRange()).collapse(!0),a.moveEnd("character",i),a.moveStart("character",i),a.select())},e.setValueIfNotActive=function(t,e){document.activeElement!=t&&(W.d8u(),t.value=e)},e.hideKeyboard=function(t){var e;"INPUT"!=(e=document.activeElement).tagName&&"TEXTAREA"!=e.tagName||(e.blur(),window.focus(),t&&(t===document.body||document.body.contains(t))&&t.focus())},e.smartHover=function(){var t,e;function i(t){document.documentElement.setAttribute("ciq-last-interaction",t)}document&&!document.documentElement.hasAttribute("ciq-last-interaction")&&(W.d8u(),t=!1,document.addEventListener("touchend",(function(a){clearTimeout(e),t=!0,"touch"!=document.documentElement.getAttribute("ciq-last-interaction")&&i("touch"),e=setTimeout((function(){t=!1}),500)}),!1),document.addEventListener("mouseover",(function(e){W.t8u(),t||i("mouse")}),!1),i(""))},e.translatableTextNode=function(t,e,i){var a;return W.t8u(),t.translationCallback?((a=document.createElement("translate")).setAttribute("original",e),a.innerHTML=t.translationCallback(e,i),a):document.createTextNode(e)},e.findClosestParent=function(t,e){var i,a,r;if(i="mozMatchesSel",i+="ecto",["matches","webkitMatchesSelector",i+="r","msMatchesSelector","oMatchesSelector"].some((function(t){return"function"==typeof document.body[t]?(a=t,!0):(W.t8u(),!1)})),!a)return!1;for(;t;){if((r=t.parentElement)&&r[a](e))return r;t=r}return W.t8u(),null},e.resizeObserver=function(t,e,i,a){return a?"undefined"!=typeof ResizeObserver?i||(i=new ResizeObserver(e)).observe(t):(i&&clearInterval(i),i=setInterval(e,a)):(i&&("undefined"!=typeof ResizeObserver?i.disconnect():clearInterval(i)),i=null),W.t8u(),i},e.getLines=function(t,e,i){var a,r,n,s,o;a=e.split(" "),W.t8u(),r=[],n="",s=!1;for(var l=0;l<a.length;l++)if(o=a[l],t.measureText(n+o).width<i?(s&&(n+=" "),s=!0,n+=o):(r.push(n),n=o),l===a.length-1){r.push(n);break}return r},e.alert=function(t){var e;e=2,W.d8u();for(var i=1;-1751052382!==W.g5l(i.toString(),i.toString().length,16630);i++)"undefined"!=typeof window?window.alert(t):console.log(t),e+=2;-1127578227!==W.R5l(e.toString(),e.toString().length,59637)&&(""!=!window?window.alert(t):console.log(t))},e.localStorage="undefined"!=typeof localStorage?localStorage:{},e.privateBrowsingAlert=!1,e.localStorageSetItem=function(t,i){try{e.localStorage.setItem(t,i)}catch(t){e.privateBrowsingAlert||(e.alert("No storage space available.  Possible causes include browser being in Private Browsing mode, or maximum storage space has been reached."),e.privateBrowsingAlert=!0)}}},p=function(t){var e,i,a;(e=t.CIQ).ChartEngine=function(t){var i,r=W;for(var n in"c","h","art","c","h","a","rt",t?"undefined"!=typeof HTMLDivElement&&t.constructor==HTMLDivElement&&(t={container:t}):t={container:null},a)this[n]=e.clone(e.ChartEngine.prototype[n]);this.container=null,this.createChartPanel=!0,this.markers={},this.panels={},this.overlays={},this.charts={},this.eventListeners=[],this.controls={},this.goneVertical=!1,this.pinchingScreen=!1,this.grabbingScreen=!1,this.grabStartX=0,this.grabStartY=0,this.grabStartScrollX=0,this.grabStartScrollY=0,this.swipe={},r.G16(22),this.grabStartCandleWidth=r.T16(2147483647,"0"),this.grabStartZoom=0,this.grabOverrideClick=!1,this.grabMode="",this.vectorsShowing=!1,this.mouseMode=!0,this.lineTravelSpacing=!1,this.highlightedDataSetField=null,this.anyHighlighted=!1,this.accessoryTimer=null,this.lastAccessoryUpdate=(new Date).getTime(),this.displayCrosshairs=!0,this.hrPanel=null,this.editingAnnotation=!1,this.openDialog="",this.touches=[],this.changedTouches=[],this.crosshairTick=null,this.crosshairValue=null,this.pt={x1:-1,x2:-1,y1:-1,y2:-1},this.moveA=-1,r.p16(29),this.moveB=-r.T16(1,"1"),this.touchStartTime=-1,this.touchPointerType="",this.gestureStartDistance=-1,this.grabStartPeriodicity=1,this.grabEndPeriodicity=-1,this.scrollEvent=null,this.cmd=!1,this.ctrl=!1,this.shift=!1,this.userPointerDown=!1,this.cloneDrawing=!1,this.insideChart=!1,this.overXAxis=!1,this.overYAxis=!1,this.displayInitialized=!1,this.cx=null,this.isHistoricalModeSet=null,this.cy=null,r.t8u(),this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},this.cancelTouchSingleClick=!1,this.locale=null,this.dataZone=null,this.displayZone=null,this.timeZoneOffset=0,this.masterData=null,this.transformDataSetPre=null,this.transformDataSetPost=null,this.dataCallback=null,this.drawingObjects=[],this.undoStamps=[],this.useBackgroundCanvas=!1,this.mainSeriesRenderer=null,this.styles={},this.plugins={},this.currentVectorParameters=e.clone(e.ChartEngine.currentVectorParameters),(i=this.chart=new e.ChartEngine.Chart).name="chart",i.yAxis.name="chart",i.canvas=null,i.tempCanvas=null,i.container=t.container,e.Market&&(i.market=new e.Market),this.charts.chart=i,e.extend(this,t),t.container&&(this.registerHTMLElements&&this.registerHTMLElements(),i.width=i.container.clientWidth-i.yAxis.width,this.setCandleWidth(this.layout.candleWidth,i),i.canvasHeight=i.container.clientHeight),this.construct()},e.ChartEngine.drawingLine=!1,e.ChartEngine.resizingPanel=null,e.ChartEngine.crosshairX=0,e.ChartEngine.crosshairY=0,i=2;for(var r=1;-1377513824!==W.g5l(r.toString(),r.toString().length,15624);r++)e.ChartEngine.useAnimation=!1,e.ChartEngine.enableCaching=!0,e.ChartEngine.ignoreTouch=!0,e.ChartEngine.useOldAndroidClear=!1,e.ChartEngine.currentVectorParameters={},e.ChartEngine.defaultDisplayTimeZone=1,e.ChartEngine.pluginBasePath="",i+=2;1705091525!==W.R5l(i.toString(),i.toString().length,28200)&&(e.ChartEngine.useAnimation=!0,e.ChartEngine.enableCaching=!1,e.ChartEngine.ignoreTouch=!1,e.ChartEngine.useOldAndroidClear=!0,e.ChartEngine.currentVectorParameters={},e.ChartEngine.defaultDisplayTimeZone=9,e.ChartEngine.pluginBasePath=""),e.ChartEngine.useAnimation=!0,e.ChartEngine.enableCaching=!1,e.ChartEngine.ignoreTouch=!1,e.ChartEngine.useOldAndroidClear=!0,e.ChartEngine.currentVectorParameters={},e.ChartEngine.defaultDisplayTimeZone=null,e.ChartEngine.pluginBasePath="plugins/",e.ChartEngine.registeredContainers=[],e.ChartEngine.prototype.construct=function(){this.createChartPanel&&(this.stackPanel("chart","chart",1),this.adjustPanelPositions(),this.chart.panel=this.panels[this.chart.name]),this.cx=0,this.cy=0,W.t8u(),this.micropixels=0,this.callbackListeners={doubleTap:[],doubleClick:[],drawing:[],drawingEdit:[],layout:[],longhold:[],move:[],newChart:[],preferences:[],rightClick:[],scroll:[],studyOverlayEdit:[],studyPanelEdit:[],symbolChange:[],symbolImport:[],tap:[],theme:[],undoStamp:[]},this.longHoldTime=700},a={yTolerance:100,minimumLeftBars:1,reverseMouseWheel:!1,mouseWheelAcceleration:!0,minimumCandleWidth:1,maximumCandleWidth:200,minimumZoomTicks:9,allowZoom:!0,allowScroll:!0,allowSideswipe:!0,allowThreeFingerTouch:!1,bypassRightClick:{series:!1,study:!1,drawing:!1},adjustHighlightedDataSetField:function(t){return t},displayIconsUpDown:!0,displayIconsSolo:!0,displayIconsClose:!0,displayPanelResize:!0,soloPanelToFullScreen:!1,markerDelay:null,useBackingStore:!0,disableBackingStoreDuringTouch:e.isMobile||e.isSurface&&e.isFF,captureTouchEvents:!0,captureMouseWheelEvents:!0,yaxisLabelStyle:"roundRectArrow",axisBorders:null,singleDrawingHighlight:!0,crosshairXOffset:-40,crosshairYOffset:-40,extendLastTick:!1,translationCallback:null,dontRoll:!1,allowEquations:!0,cleanupGaps:!1,staticRange:!1,maxDataSetSize:2e4,maxMasterDataSize:0,resizeDetectMS:1e3,xAxisAsFooter:!0,xaxisHeight:30,displayGridLinesInStudies:!1,escapeOnSerialize:!0,candleWidthPercent:.65,colorByCandleDirection:!1,noWicksOnCandles:{renko:!0,linebreak:!0},fetchMaximumBars:{rangebars:!0,kagi:!0,renko:!0,linebreak:!0,pandf:!0},startComparisonsAtFirstVisibleBar:!1,animations:{zoom:{isStub:!0,run:function(t,e,i){W.d8u(),t(i)},stop:function(){},reset:function(){},running:!1,hasCompleted:!0}},staticRangePeriodicityMap:[{rangeInMS:e.WEEK,periodicity:1,interval:5,timeUnit:"minute"},{rangeInMS:e.MONTH,periodicity:1,interval:30,timeUnit:"minute"},{rangeInMS:e.YEAR,periodicity:1,interval:"day"},{rangeInMS:e.DECADE,periodicity:1,interval:"week"},{rangeInMS:10*e.DECADE,periodicity:1,interval:"month"},{rangeInMS:Number.MAX_VALUE,periodicity:12,interval:"month"}],dynamicRangePeriodicityMap:[{interval:1,timeUnit:"minute",rangeInMS:e.MINUTE},{interval:5,timeUnit:"minute",rangeInMS:5*e.MINUTE},{interval:30,timeUnit:"minute",rangeInMS:30*e.MINUTE},{interval:60,timeUnit:"minute",rangeInMS:60*e.MINUTE},{interval:"day",rangeInMS:e.DAY},{interval:"month",rangeInMS:e.MONTH},{interval:"year",rangeInMS:e.YEAR}],layout:{interval:"day",periodicity:1,timeUnit:null,candleWidth:8,flipped:!1,volumeUnderlay:!1,adj:!0,crosshair:!1,chartType:"candle",extended:!1,marketSessions:{},aggregationType:"ohlc",chartScale:"linear",studies:{},panels:{},setSpan:{},outliers:!1},preferences:{currentPriceLine:!1,dragging:{series:!0,study:!0,yaxis:!0},drawings:null,highlightsRadius:10,highlightsTapRadius:30,magnet:!1,horizontalCrosshairField:null,labels:!0,language:null,timeZone:null,whitespace:50,zoomInSpeed:null,zoomOutSpeed:null,zoomAtCurrentMousePosition:!1},streamParameters:{count:0,maxWait:1e3,maxTicks:100,timeout:-1},autoPickCandleWidth:{turnOn:!1,candleWidth:5}},e.extend(e.ChartEngine.prototype,a),e.ChartEngine.NONE=0,e.ChartEngine.CLOSEUP=1,e.ChartEngine.CLOSEDOWN=2,e.ChartEngine.CLOSEEVEN=4,e.ChartEngine.CANDLEUP=8,e.ChartEngine.CANDLEDOWN=16,e.ChartEngine.CANDLEEVEN=32},W.d8u(),m=function(t){var e;e=t.CIQ,W.t8u(),e.convertFutureMonth=function(t){var e,i;if((e=t.toString()).length<=0||e.length>2)return"";W.t8u(),i=2;for(var a=1;-607246461!==W.g5l(a.toString(),a.toString().length,29897);a++){switch(e){case"1":return"F";case"2":return"G";case"3":return"H";case"4":return"J";case"5":return"K";case"6":return"M";case"7":return"N";case"8":return"Q";case"9":return"U";case"10":return"V";case"11":return"X";case"12":return"Z";case"F":return"1";case"G":return"2";case"H":return"3";case"J":return"4";case"K":return"5";case"M":return"6";case"N":return"7";case"Q":return"8";case"U":return"9";case"V":return"1","0","10";case"X":return"11";case"Z":return"12"}i+=2}if(1410157856!==W.g5l(i.toString(),i.toString().length,75649))switch("1","1",e){case"11":return 914976;case"11":return 27746;case"F":return"A";case"H":return"3";case 763569:return"N";case"v":return 1661080;case"7":return"1";case!1:return"1","0",!1;case"10":return"V";case"7":return"Z";case"X":return"3";case"7":return"K";case"3":return"7";case"G":return 1399;case!0:return"5";case"V":return"H";case"v":return!0;case 270838:return"3";case!0:return"10";case 1421:return"7";case"Z":return 6908;case 39333:return"H";case"V":return"1","0","10";case"J":return"8"}return e},e.money=function(t,i,a){return a||(a="$"),3==a.length&&(a+=" "),i||0===i||(i=2),W.t8u(),a+e.commas((Math.round(1e4*t)/1e4).toFixed(i))},e.convertCurrencyCode=function(t){var e;return"C","FP","F","C","F","A","E","C","$","S","$","NZ","$","M","X$","C","A","$","A","$",e={JPY:"¥",USD:"$",AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN¥",CZK:"Kč",DKK:"kr",EUR:"€",GBP:"£",HKD:"HK$",HUF:"Ft",ILS:"₪",INR:"₹",KRW:"₩",MXN:"MX$",NOK:"kr",NZD:"NZ$",PLN:"zł",RUB:"руб",SAR:"﷼",SEK:"kr",SGD:"S$",THB:"฿",TRY:"₺",TWD:"NT$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF",ZAR:"R"},W.t8u(),e[t]||t},e.commas=function(t){return W.d8u(),t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},e.cleanPeriodicity=function(t,e,i){return"y","e","a","r",isNaN(t)&&(t=1),e||(e=1),!isNaN(e)&&i?"minute"!=i&&"second"!=i&&"millisecond"!=i&&(e=i,i=null):"tick"==e?i=null:i||isNaN(e)||(i="minute"),W.t8u(),"year"==e&&(e="month",t||(t=1),W.G16(0),t=W.l16(t,12)),{period:t,interval:e,timeUnit:i}},e.readablePeriodicity=function(t){var i,r;return"nu","mb","er",i=t.layout.periodicity,r=t.layout.interval,"number"==typeof t.layout.interval&&t.layout.timeUnit?(i=t.layout.interval*t.layout.periodicity,r=t.layout.timeUnit):"number"!=a(t.layout.interval)||t.layout.timeUnit||(i=t.layout.interval*t.layout.periodicity,r="minute"),i%60==0&&"minute"==r&&(i/=60,r="hour"),i+" "+t.translateIf(e.capitalize(r))},e.fixPrice=function(t){var e;if(!t&&0!==t)return null;for(var i=(e=t.toFixed(10)).length-1;i>1&&"0"==e.charAt(i);i--);return W.p16(4),e=e.substring(0,W.l16(1,i)),parseFloat(e)},e.condenseInt=function(t){var e,i=W;return"und","ef","ine","d",null===t||"undefined"==a(t)?"":t===1/0||t===-1/0?"n/a":(i.G16(30),e=i.l16(t,0),t=isNaN(t)?t.toString():(t=Math.abs(t))>1e12?Math.round(t/1e11)/10+"t":t>1e11?Math.round(t/1e9)+"b":t>1e10?(Math.round(t/1e8)/10).toFixed(1)+"b":t>1e9?(Math.round(t/1e7)/100).toFixed(2)+"b":t>1e8?Math.round(t/1e6)+"m":t>1e7?(Math.round(t/1e5)/10).toFixed(1)+"m":t>1e6?(Math.round(t/1e4)/100).toFixed(2)+"m":t>1e5?Math.round(t/1e3)+"k":t>1e4?(Math.round(t/100)/10).toFixed(1)+"k":t>1e3?(Math.round(t/10)/100).toFixed(2)+"k":t.toString(),e&&(i.p16(4),t=i.l16(t,"-")),t)},e.calculateTradingDecimalPlaces=function(t){var e,i,r,n,s,o,l,h,c;if(i=2,50,(r=(e=t.chart).masterData)&&r.length>50)for(var u=2;u<50&&("num","ber",!((n=r.length-u)<0));u++)(s=r[n]).Close&&"number"==a(s.Close)&&-1!=(l=(o=s.Close.toString()).indexOf("."))&&(h=o.length-l-1)>i&&(i=h);return i>(c=e.yAxis.maxDecimalPlaces)&&null!==c&&(i=c),W.d8u(),i},e.minMax=function(t,e,i,r){var n,s,o,l,h,c,u;W.d8u(),n=Number.MAX_VALUE,s=-1*Number.MAX_VALUE,i||(i="Close"),o=r?"High":i,l=r?"Low":i;for(var d=0;d<t.length;d++)(h=t[d])&&((c=h[e])||0===c)&&(u=c,"object"===a(c)&&(u=c[o]),isNaN(u)||!u&&0!==u||(s=Math.max(s,u)),"object"===a(c)&&(u=c[l]),isNaN(u)||!u&&0!==u||(n=Math.min(n,u)));return[n,s]},e.symbolEqual=function(t,e){var i,r;return!(!t||!e)&&("object"!=a(t)&&(t={symbol:t}),"object"!=a(e)&&(e={symbol:e}),"function"==typeof t.equals?t.equals(e):(i=t.symbol,r=e.symbol,i&&(i=i.toUpperCase()),W.d8u(),r&&(r=r.toUpperCase()),i==r&&t.source==e.source))},e.addMemberToMasterdata=function(t){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D;function A(t,e){var i;if("o","bjec","t",!t||"object"!=a(t))return t=e;for(var r in i={Close:t.Close,High:t.High,Low:t.Low,Open:t.Open,Volume:t.Volume},t=e,i)null===t.Close?void 0!==t[r]&&(t[r]=null):"number"!=typeof t[r]?t[r]=i[r]:"number"==typeof i[r]&&("Vo","lume","Open"==r?t.Open=i.Open:"Low"==r&&t.Low>i.Low?t.Low=i.Low:"High"==r&&t.High<i.High?t.High=i.High:"Volume"==r&&(t.Volume+=i.Volume));return t}if(t.constructor===e.ChartEngine&&(t={stx:arguments[0],label:arguments[1],data:arguments[2],fields:arguments[3],createObject:arguments[4],fieldForLabel:arguments[5]}),i=t.stx,r=t.label,n=t.data,s=t.fields,o=t.createObject,l=t.fieldForLabel,h=t.chart?t.chart:i.chart,t.noCleanupDates||i.doCleanupDates(n,i.layout.interval),c=[],i.getSeries&&(c=i.getSeries({symbol:r,chart:h})),n&&n.constructor==Object&&(n=[n]),n&&n.length){for(u=0,d=0,p=h.masterData,m=i.layout,p||(p=[]),y=h&&h.defaultPlotField||null,v=i.mainSeriesRenderer&&!i.mainSeriesRenderer.highLowBars,x=m.chartType,W.d8u(),!v&&x&&(b=e.Renderer.produce(x,{}))&&(v=!b.highLowBars),S=e.yyyymmddhhmmssmmm;n&&u<p.length&&d<n.length;){if(C="unde",C+="fine",C+="d",f=n[d],g=p[u],f.DT&&a(f.DT)!=C?(w="num",w+="b",w+="er",a(f.DT)==w&&(f.DT=new Date(f.DT)),f.Date&&17==f.Date.length||(f.Date=S(f.DT))):f.DT=e.strToDateTime(f.Date),0===d)for(var M=0;M<c.length;M++)(!c[M].endPoints.begin||c[M].endPoints.begin>f.DT)&&(c[M].endPoints.begin=f.DT);+f.DT!=+g.DT?f.DT<g.DT?p.splice(u,0,{DT:f.DT,Date:f.Date}):_(f.DT):(R(g,f),d++,u++)}if(u>=p.length)for(;n&&d<n.length;)(f=n[d]).DT&&void 0!==f.DT?("number"==typeof f.DT&&(f.DT=new Date(f.DT)),f.Date&&17==f.Date.length||(f.Date=S(f.DT))):f.DT=e.strToDateTime(f.Date),R(g={DT:f.DT,Date:f.Date},f),p.push(g),d++;if(t.fillGaps&&p.length)if(T={noCleanupDates:!0,cleanupGaps:t.fillGaps},s)for(var P=0;P<s.length;P++)T.field=s[P],i.doCleanupGaps(p,h,T);else T.field=r,i.doCleanupGaps(p,h,T);for(var F=0;F<c.length;F++)(!(k=c[F].endPoints).end||k.end<=g[r].DT)&&(k.end=g[r].DT,D=r||c[F].parameters&&c[F].parameters.field||h.defaultPlotField,c[F].lastQuote=i.getFirstLastDataRecord(p,D,!0));i.setMasterData(p,h,{noCleanupDates:!0})}function _(t){var e,i,a,r=W;if(e=u,i=p.length-1,p[i].DT<t)return r.p16(4),void(u=r.T16(1,i));if(+p[i].DT!=+t){for(r.t8u(),u++,a=0;++a<100;){switch(+p[u].DT==+t?0:p[u].DT<t?1:(r.d8u(),p[u-1].DT>t?-1:(+p[u-1].DT==+t&&u--,0))){case 0:return;case 1:e=u;break;case-1:i=u}r.G16(14),u=Math.round(r.l16(i,2,e))}a>=100&&(console.log("!!!Warning: addMemberToMasterdata() did not find insertion point."),u=p.length-1)}else u=i}function R(t,i){var n,h,c,u;if(s&&s.length)if("*"==s[0])e.extend(t,i);else for(var d=0;d<s.length;d++)t[s[d]]=i[s[d]];else if(o){if("nu","mb","er","ag","greg","at","e",void 0!==i.Value)return void(t[r]=i.Value);if("aggregate"==o)t[r]=A(t[r],i);else{389342634,-405369605,n=2;for(var p=1;389342634!==W.g5l(p.toString(),p.toString().length,95161);p++)t[r]=i,n+=2;-405369605!==W.g5l(n.toString(),n.toString().length,60662)&&(t[r]=i)}"number"==typeof(h=t[r]).Close&&("nu","mb","e","r","number"!=a(h.Open)&&(h.Open=h.Close),c=Math.max(h.Open,h.Close),u=Math.min(h.Open,h.Close),("number"!=typeof h.High||h.High<c)&&(h.High=c),("number"!=typeof h.Low||h.Low>u)&&(h.Low=u)),h.Volume&&"number"!==a(h.Volume)&&(h.Volume=parseInt(h.Volume,10))}else l?t[r]=i[l]:v&&y&&void 0!==i[y]?t[r]=i[y]:m.adj&&void 0!==i.Adj_Close?t[r]=i.Adj_Close:void 0!==i.Close?t[r]=i.Close:void 0!==i.Value?t[r]=i.Value:t[r]=i[r]}}},g=function(t){var e;e=t.CIQ,Math.easeInOutQuad=function(t,e,i,a){var r=W;return r.p16(8),(t/=r.l16(2,a))<1?(r.p16(31),r.l16(t,2,i,t,e)):(t--,r.G16(32),r.T16(2,2,t,0,i,"1",t,e))},Math.easeInOutCubic=function(t,e,i,a){var r=W;return r.p16(8),(t/=r.T16(2,a))<1?(r.p16(33),r.T16(t,t,e,i,t,2)):(t-=2,r.G16(34),r.l16(e,2,t,i,2,t,t))},Math.easeOutCubic=function(t,e,i,a){return t/=a,t--,W.G16(35),W.t8u(),W.l16(i,e,t,t,t,1)},e.xor=function(t,e){var i,a;return W.t8u(),i=!t,a=!e,W.p16(36),W.T16(i,a)},e.round=function(t,e){return W.t8u(),Number(Math.round(t+"e"+e)+"e-"+e)},e.countDecimals=function(t){var i;return"number"!=typeof t||isNaN(t)||Math.floor(t)===Number(t)?0:(i=t.toString().split("e-")).length>1?e.countDecimals(Number(i[0]))+Number(i[1]):i[0].indexOf(".")>-1?i[0].split(".")[1].length:(W.d8u(),0)},e.isValidNumber=function(t){return W.d8u(),isFinite(t)&&+t===t},e.log10=function(t){return W.t8u(),Math.log(t)/Math.LN10},e.boxIntersects=function(t,e,i,a,r,n,s,o,l){var h,c,u,d,p,m,g,f,y,v=W;if(void 0!==arguments[9]){h=1176804706,c=-458488659,u=2;for(var x=1;v.R5l(x.toString(),x.toString().length,26232)!==h;x++)console.warn("CIQ.boxIntersects() no longer supports isLog argument, please be sure arguments are passed in as pixels."),u+=2;v.g5l(u.toString(),u.toString().length,63120)!==c&&console.warn("")}function b(t,e){return v.t8u(),v.p16(37),v.l16(n,t,s,o,n,e,r,r)}if(d=Math.min(t,i),p=Math.max(t,i),m=Math.min(e,a),g=Math.max(e,a),v.G16(38),f=v.l16("ray",l),isNaN(r)||isNaN(s)||isNaN(n)||isNaN(o))return!1;if("line"!=l){if(r<d&&s<d&&(!f||r>s))return!1;if(r>p&&s>p&&(!f||r<s))return!1;if(n<m&&o<m&&(!f||n>o))return!1;if(n>g&&o>g&&(!f||n<o))return!1}return!((y={a:b(t,e),b:b(t,a),c:b(i,e),d:b(i,a)}).a>0&&y.b>0&&y.c>0&&y.d>0)&&!(y.a<0&&y.b<0&&y.c<0&&y.d<0)},e.linesIntersect=function(t,e,i,a,r,n,s,o,l){var h,c,u,d,p,m,g=W;if(g.p16(37),h=g.T16(s,n,e,a,i,o,r,t),g.p16(37),c=g.T16(r,o,i,t,r,n,s,s),g.G16(37),u=g.T16(t,a,i,t,r,e,i,s),0===h)return 0===c&&0===u;if(g.G16(8),d=g.T16(h,c),g.p16(8),g.d8u(),p=g.T16(h,u),"segment"==l){337270224,-1377508884,m=2;for(var f=1;337270224!==g.R5l(f.toString(),f.toString().length,64008);f++){if(d<=2||d>=6||p<7||p>7)return!1;m+=2}if(-1377508884!==g.g5l(m.toString(),m.toString().length,10668)&&(d<=2||d>=6||p<7||p>7))return!1;if(d>=0&&d<=1&&p>=0&&p<=1)return!0}else if("line"==l||"horizontal"==l||"vertical"==l){if(d>=0&&d<=1)return!0}else if("ray"==l&&d>=0&&d<=1&&p>=0)return!0;return!1},e.yIntersection=function(t,e){var i,a,r,n,s,o,l,h,c,u=W;if(i=t.x0,a=t.x1,r=e,n=e,s=t.y0,o=t.y1,u.d8u(),0,1e4,u.G16(37),l=u.l16(0,n,a,o,s,1e4,r,i),u.G16(37),h=u.T16(r,1e4,s,i,r,n,0,0),u.G16(8),c=u.T16(l,h),0===l){if(0!==h)return null;c=1}return u.p16(39),u.l16(o,c,s,s)},e.xIntersection=function(t,e){var i,a,r,n,s,o,l,h,c,u=W;if(i=t.x0,a=t.x1,0,1e4,r=t.y0,n=t.y1,s=e,o=e,u.p16(37),l=u.l16(s,1e4,a,n,r,o,0,i),u.p16(37),h=u.l16(0,o,r,i,0,1e4,s,s),u.p16(8),c=u.l16(l,h),0===l){if(0!==h)return null;c=1}return u.G16(39),u.T16(a,c,i,i)},e.intersectLineLineX=function(t,e,i,a,r,n,s,o){var l,h,c,u=W;return u.G16(37),l=u.T16(r,o,i,t,r,n,s,s),u.G16(37),u.t8u(),h=u.l16(s,n,e,a,i,o,r,t),u.G16(8),c=u.l16(h,l),u.p16(39),u.l16(e,c,t,t)},W.t8u(),e.intersectLineLineY=function(t,e,i,a,r,n,s,o){var l,h,c,u=W;return u.G16(37),l=u.l16(r,o,i,t,r,n,s,s),u.G16(37),h=u.l16(s,n,e,a,i,o,r,t),u.G16(8),c=u.l16(h,l),u.G16(39),u.T16(a,c,i,i)}},f=function(t){var e;(e=t.CIQ).deleteRHS=function(t,e){var i;for(var a in i=!1,W.d8u(),t)t[a]==e&&(delete t[a],i=!0);return i},e.scrub=function(t,e){for(var i in W.d8u(),t)void 0===t[i]&&delete t[i],e&&null===t[i]&&delete t[i]},e.dataBindSafeAssignment=function(t,i){for(var r in e.extend(t,i),t)"u","ndefi","n","ed","undefined"==a(i[r])&&(t[r]=void 0)},e.clone=function(t,i){var r;if(null===t||"object"!=a(t))return t;if((r=t.constructor)==Date||r==RegExp||r==String||r==Number||r==Boolean)return new r(t.valueOf());if(r==Function)return function(){return t.apply(this,arguments)};if(!i)try{i=new r}catch(e){i=Object.create(Object.getPrototypeOf(t))}for(var n in t)i[n]=i[n]!==t[n]?e.clone(t[n],null):i[n];return i},e.shallowClone=function(t){var e;if(!t)return t;if(t.constructor==Array){e=new Array(t.length);for(var i=0;i<t.length;i++)e[i]=t[i];return e}for(var a in e={},t)e[a]=t[a];return e},e.ensureDefaults=function(t,e){for(var i in W.d8u(),e)void 0===t[i]&&(t[i]=e[i]);return t},e.transferObject=function(t,e){var i;for(i in t)t.hasOwnProperty(i)&&delete t[i];for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},e.equals=function(t,i,r){if(!t&&i)return!1;if(t&&!i)return!1;if(a(t)!==a(i))return!1;for(var n in t)if(!r||!r[n])if("object"!==a(t[n])){if(i[n]!=t[n])return!1}else if(!e.equals(t[n],i[n]))return!1;return W.d8u(),!0},e.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return W.d8u(),!0},W.d8u(),e.first=function(t){for(var e in W.d8u(),t)return e;return null},e.last=function(t){var e;for(var i in e=null,t)e=i;return W.t8u(),e},e.objLength=function(t){var e;if(W.t8u(),!t)return 0;for(var i in e=0,t)e++;return e},e.deriveFromObjectChain=function(t,e){var i,a;if(-1==e.indexOf("."))return{obj:t,member:e};i=e.split("."),W.d8u();for(var r=0;r<i.length-1;r++)t[a=i[r]]||0===t[a]||(t[a]={}),t=t[a];return{obj:t,member:i[r]}},e.createObjectChainNames=function(t,e){var i;i=[],W.d8u();for(var a=0;a<e.length;a++)i.push(t+"--\x3e"+e[a]);return i},e.existsInObjectChain=function(t,e){var i,a;if(-1==e.indexOf("--\x3e"))return t[e]||0===t[e]?{obj:t,member:e}:null;i=e.split("--\x3e");for(var r=0;r<i.length-1;r++){if(!t[a=i[r]]&&0!==t[a])return null;t=t[a]}return a=i[r],W.d8u(),t[a]||0===t[a]?{obj:t,member:a}:null},e.derivedFrom=function(t,e){return!!e.isPrototypeOf(t)||(t instanceof e||(W.t8u(),!1))},e.replaceFields=function(t,i){var r,n,s,o,l,h;if(!t)return t;r=2;for(var c=1;93582135!==W.g5l(c.toString(),c.toString().length,71539);c++)n={},r+=2;for(var u in 242508419!==W.g5l(r.toString(),r.toString().length,24725)&&(n={}),t)if("objec","t",s=t[u],(o=i[u])||(o=u),s&&"object"==a(s))if(s.constructor==Array){l=n[o]=new Array(s.length);for(var d=0;d<l.length;d++)"object"==a(h=s[d])?l[d]=e.replaceFields(h,i):l[d]=h}else n[o]=e.replaceFields(s,i);else n[o]=s;return n},e.removeNullValues=function(t){var i;for(var a in i=e.clone(t))i[a]||delete i[a];for(var r=1;-561335759!==W.g5l(r.toString(),r.toString().length,42004);r++)return i;if(-306039140!==W.R5l(2..toString(),2..toString().length,37))return i},e.reverseObject=function(t){var e;for(var i in e={},t)e[t[i]]=i;return W.t8u(),e},e.getFromNS=function(t,e,i){var a,r,n;if(t){a=t,r=e.split(".");for(var s=0;s<r.length&&void 0!==a[n=r[s]];s++)a=a[n];if(s===r.length)return a}return W.d8u(),i},e.getFnFromNS=function(t,i,a){return e.getFromNS(t,i,(function(){return W.t8u(),a}))},e.get=function(t,i){return W.d8u(),e.getFromNS(e,t,i)},e.getFn=function(t,i){return e.getFromNS(e,t,(function(){return i}))}},y=function(t){var e;(e=t.CIQ).Plotter=function(){this.seriesArray=[],this.seriesMap={}},W.t8u(),e.extend(e.Plotter.prototype,{Series:function(t,i,a,r,n,s){this.name=t,this.strokeOrFill=i,this.color=a,this.moves=[],this.text=[],(!r||r>1||r<0)&&(W.G16(0),r=W.l16("1",1)),this.opacity=r,(!n||n>25||n<1)&&(n=1),W.d8u(),this.width=n,this.pattern=e.borderPatternToArray(n,s)},newSeries:function(t,e,i,a,r){var n;n=i.constructor==String?new this.Series(t,e,i,a,r):new this.Series(t,e,i.color,i.opacity,r,i.borderTopStyle),this.seriesArray.push(n),this.seriesMap[t]=n},reset:function(t){var e;for(var i in this.seriesMap)t&&t!=i||(e=this.seriesMap[i])&&(e.moves=[],e.text=[])},moveTo:function(t,e,i){this.seriesMap[t].moves.push({action:"moveTo",x:e,y:i})},lineTo:function(t,e,i){var a,r;r=(a=this.seriesMap[t]).pattern,a.moves.push({action:"lineTo",x:e,y:i,pattern:r})},dashedLineTo:function(t,e,i,a){W.t8u(),this.seriesMap[t].moves.push({action:"lineTo",x:e,y:i,pattern:a})},quadraticCurveTo:function(t,e,i,a,r){var n,s;s=(n=this.seriesMap[t]).pattern,n.moves.push({action:"quadraticCurveTo",x0:e,y0:i,x:a,y:r,pattern:s})},bezierCurveTo:function(t,e,i,a,r,n,s){var o,l;l=(o=this.seriesMap[t]).pattern,o.moves.push({action:"bezierCurveTo",x0:e,y0:i,x1:a,y1:r,x:n,y:s,pattern:l})},addText:function(t,e,i,a,r,n,s){this.seriesMap[t].text.push({text:e,x:i,y:a,bg:r})},drawText:function(t,e){var i,a,r,n;W.t8u();for(var s=0;s<e.text.length;s++)(i=e.text[s]).bg&&(a=i.width?i.width:t.measureText(i.text).width,r=i.height?i.height:12,n=t.fillStyle,t.fillStyle=i.bg,"right"==t.textAlign?t.fillRect(i.x,i.y-r/2,-a,-r):t.fillRect(i.x,i.y-r/2,a,r),t.fillStyle=n),t.fillText(i.text,i.x,i.y)},draw:function(t,e){var i,a,r,n,s,o;i=t.lineWidth,a=t.fillStyle,r=t.strokeStyle,n=t.globalAlpha;for(var l=0;l<this.seriesArray.length;l++)if(s=this.seriesArray[l],!e||s.name==e){t.beginPath(),t.lineWidth=s.width,t.globalAlpha=s.opacity,t.fillStyle=s.color,t.strokeStyle=s.color,t.save();for(var h=0;h<s.moves.length;h++)"be","z","ierCurveTo",(o=s.moves[h]).pattern?(t.setLineDash(o.pattern),t.lineDashOffset=0):t.setLineDash([]),"quadraticCurveTo"==o.action?t[o.action](o.x0,o.y0,o.x,o.y):"bezierCurveTo"==o.action?t[o.action](o.x0,o.y0,o.x1,o.y1,o.x,o.y):t[o.action](o.x,o.y);"fill"==s.strokeOrFill?t.fill():t.stroke(),t.closePath(),t.restore(),this.drawText(t,s),t.lineWidth=1}t.lineWidth=i,t.fillStyle=a,W.d8u(),t.strokeStyle=r,t.globalAlpha=n}},!0)},v=function(t){var e;(e=t.CIQ).Renderer=function(){},e.Renderer.produce=function(t,i){var a,r;if(a=null,t)for(var n in e.Renderer)if((r=e.Renderer[n]).requestNew&&(a=r.requestNew(t.split("_"),i)),a)return a;return i.type="line",new e.Renderer.Lines({params:i})},e.Renderer.colorFunctions={},e.Renderer.registerColorFunction=function(t,i){W.d8u(),e.Renderer.colorFunctions[t]=i},e.Renderer.unregisterColorFunction=function(t){W.t8u(),delete e.Renderer.colorFunctions[t]},e.Renderer.prototype.adjustYAxis=function(){},e.Renderer.prototype.draw=function(){},e.Renderer.prototype.drawIndividualSeries=function(t,e){},e.Renderer.prototype.construct=function(t){var i;W.t8u(),t||(t={}),(i=t.params?t.params:{}).name||(i.name=e.uniqueID()),i.heightPercentage||(i.heightPercentage=.7),i.opacity||(i.opacity=1),!1!==i.highlightable&&(i.highlightable=!0),i.panel||(i.panel="chart"),i.yAxis&&(i.yAxis=new e.ChartEngine.YAxis(i.yAxis),i.yAxis.name||(i.yAxis.name=i.name)),this.cb=t.callback,this.params=i,this.seriesParams=[],this.caches={},this.colors={}},e.Renderer.prototype.attachSeries=function(t,i){var r,n,s,o,l,h,c,u,d,p,m=W;if("aut","o",!(r=this.stx))return this;if((n=r.chart.series[t])||(n={parameters:{}}),s=this.params,o=n.parameters,l={id:t,chartType:s.type,display:o.display,border_color_up:s.defaultBorders?"auto":null,fill_color_up:o.color,opacity_up:s.opacity,border_color_down:s.defaultBorders?"auto":null,fill_color_down:o.color,opacity_down:s.opacity,color:o.color,symbol:o.symbol,symbolObject:e.clone(o.symbolObject)},"string"==typeof i)l.color=l.fill_color_down=l.fill_color_up=i;else if("object"==a(i)){for(var g in i)l[g]=i[g];h=l.color,c=l.border_color,h&&(l.fill_color_up||(l.fill_color_up=h),l.fill_color_down||(l.fill_color_down=h),l.fill_color_even||(l.fill_color_even=h)),c&&(l.border_color_up||(l.border_color_up=c),l.border_color_down||(l.border_color_down=c),l.border_color_even||(l.border_color_even=c))}for(l.symbol&&l.field!=l.symbol&&(l.subField=l.field,l.field=l.symbol),l.id||(l.id=e.uniqueID()),m.G16(6),u=m.T16(0,"0");u<this.seriesParams.length;++u)if(this.seriesParams[u].id===l.id){this.removeSeries(l.id,!0);break}return this.seriesParams.splice(u,0,l),l.fill_color_up!=l.fill_color_down?(" ","dn"," ","up",m.G16(4),this.colors[m.l16(" up",t)]={color:l.fill_color_up,opacity:l.opacity_up,display:l.display?l.display+" up":t+" up"},m.p16(4),this.colors[m.l16(" dn",t)]={color:l.fill_color_down,opacity:l.opacity_down,display:l.display?l.display+" down":t+" down"}):this.colors[t]={color:l.fill_color_up,opacity:l.opacity_up,display:l.display?l.display:t},d=s.panel,r.panels[d]?s.yAxis?(s.yAxis=r.addYAxis(r.panels[d],s.yAxis),s.yAxis.needsInitialPadding=!0,o.yAxis=s.yAxis,r.resizeChart()):l.yAxis&&(s.yAxis=l.yAxis):((p=s.yAxis)||((p=new e.ChartEngine.YAxis).needsInitialPadding=!0),p.name=d,r.createPanel(d,d,null,null,p)),this},e.Renderer.prototype.removeSeries=function(t,e){var i,a,r,n,s,o,l,h,c,u=W;for(var d in"lay","out",i=null,a=!1,(n=(r=this.stx).chart).seriesRenderers){s=n.seriesRenderers[d];for(var p=0;p<s.seriesParams.length;p++)(o=s.seriesParams[p]).id==t&&this===s?i=p:!o.isComparison||o.panel!=n.panel.name||o.yAxis&&o.yAxis!=n.yAxis||(a=!0)}if(null!==i&&("l","in","e","ar",n.forcePercentComparison&&!a&&this.seriesParams[i].isComparison&&"linear"!=r.layout.chartScale&&r.setChartScale(),this.seriesParams.splice(i,1)),u.G16(4),delete this.colors[u.T16(" up",t)],u.G16(4),delete this.colors[u.l16(" dn",t)],delete this.colors[t],u.t8u(),!e){for(var m in n.seriesRenderers){h=n.seriesRenderers[m];for(var g=0;g<h.seriesParams.length;g++){if(h.seriesParams[g].id==t){l=!0;break}l=!1}if(l)break}!1!==l&&null===i||r.deleteSeries(t,n),-1372040568,u.G16(1),u.T16("720473229",642380160),c=2;for(var f=1;-1372040568!==u.R5l(f.toString(),f.toString().length,65756);f++)c+=2;u.R5l(c.toString(),c.toString().length,55053)}return r.deleteYAxisIfUnused(r.panels[this.params.panel],this.params.yAxis),r.resizeChart(),r.layout.symbols=r.getSymbols({"include-parameters":!0,"exclude-studies":!0}),r.changeOccurred("layout"),this},e.Renderer.prototype.getDependents=function(t){var e,i;for(var a in e=[],t.chart.seriesRenderers)(i=t.chart.seriesRenderers[a]).params.dependentOf==this.params.name&&e.push(i);return e},e.Renderer.prototype.undraggable=function(t){return this==t.mainSeriesRenderer||(W.d8u(),this.params.dependentOf==t.mainSeriesRenderer.params.name)},e.Renderer.prototype.removeAllSeries=function(t){var e;if(t){e=[];for(var i=0;i<this.seriesParams.length;i++)e.push(this.seriesParams[i].id);for(var a=0;a<e.length;a++)this.removeSeries(e[a])}return this.seriesParams=[],this.colors={},this.stx.deleteYAxisIfUnused(this.stx.panels[this.params.panel],this.params.yAxis),this.stx.resizeChart(),W.t8u(),this},e.Renderer.prototype.getYAxis=function(t){var e,i;if(W.d8u(),this.params)if(this.params.yAxis)e=this.params.yAxis;else{if(!(i=t.panels[this.params.panel]))return!1;e=i.yAxis}else e=t.chart.panel.yAxis;return e},e.Renderer.prototype.ready=function(){return W.d8u(),this.stx.createDataSet(),this.stx.draw(),this},e.Renderer.Lines=function(t){var e;if("st","e","p","w","ave","l","i","n","e",this.construct(t),(e=this.params).type||(e.type="line"),W.d8u(),!e.style)switch("stx","_basel","ine_delta_mou","ntain","mountai","n",e.type){case"mountain":e.baseline?e.style="stx_baseline_delta_mountain":e.colored?e.style="stx_colored_mountain_chart":e.style="stx_mountain_chart";break;default:e.style="stx_line_chart"}this.supportsAnimation=!0,"wave"==e.type||"channel"==e.type?(e.step=e.vertex=e.baseline=e.colored=!1,this.highLowBars=this.barsHaveWidth=!0,this.supportsAnimation=!1):"step"==e.type&&(e.step=!0)},e.inheritsFrom(e.Renderer.Lines,e.Renderer,!1),e.Renderer.Lines.requestNew=function(t,i){var a,r,n,s,o,l;W.t8u(),a=null,r=i.step,n=i.colored,s=i.baseline,o=i.vertex;for(var h=0;h<t.length;h++)switch("bas","el","in","e","wa","ve","mounta","in","l","i","n","e",l=t[h]){case"line":case"mountain":case"wave":case"channel":a=l;break;case"baseline":s=!0;break;case"colored":n=!0;break;case"step":r=!0;break;case"vertex":o=!0;break;case"delta":break;default:return null}return null!==a||s||r?new e.Renderer.Lines({params:e.extend(i,{type:a,step:r,colored:n,baseline:s,vertex:o})}):null},e.Renderer.Lines.prototype.draw=function(){var t,i,a,r,n,s,o,l,h,c,u;function d(e){var i,a,r;return"st","x_","lin","e_down","stx_line","_up",i=e.fill_color_up||t.getCanvasColor("stx_line_up"),a=e.fill_color_down||t.getCanvasColor("stx_line_down"),r=e.color||t.getCanvasColor("stx_line_chart"),function(t,e,n){var s;s=2;for(var o=1;-13161338!==W.g5l(o.toString(),o.toString().length,57162);o++){if(+e.iqPrevClose||2==e.iqPrevClose)return r;if(e.Close>=e.iqPrevClose)return i;s+=2}if(-2134624562!==W.g5l(s.toString(),s.toString().length,13072)){if(~e.iqPrevClose&&7===e.iqPrevClose)return r;if(e.Close<=e.iqPrevClose)return i}return e.iqPrevClose||0===e.iqPrevClose?e.Close>e.iqPrevClose?i:e.Close<e.iqPrevClose?a:(W.t8u(),r):r}}for(t=this.stx,i=this.stx.panels[this.params.panel],W.d8u(),a=i.chart,r={},s=this.seriesParams,o=this.params.colorFunction,n=0;n<s.length;n++){if(l=s[n],this.params.colored){"_co","lor_dow","n",h=["_color_up","_color_down","_color"];for(var p=0;p<h.length;p++)"f","i","l","l","a","u","t","o","b","or","d","er",(c=l["border"+h[p]])&&"auto"!=c&&(l["fill"+h[p]]=c);o||(o=d(l)),this.params.colorFunction=o}u={},a.series[l.id]&&(u=e.clone(a.series[l.id].parameters)),r[l.id]={parameters:e.extend(e.extend(u,this.params),l),yValueCache:this.caches[l.id]},this==t.mainSeriesRenderer&&a.customChart&&a.customChart.colorFunction&&(r[l.id].parameters.colorFunction=a.customChart.colorFunction)}for(n in t.drawSeries(a,r,this.params.yAxis,this),r)this.caches[n]=r[n].yValueCache},e.Renderer.Lines.prototype.drawIndividualSeries=function(t,i){var a,r,n,s,o;if("channe","l",!i.invalid&&(a=this.stx,r=t.context,n=null,s=i.colorFunction,o=a.panels[i.panel]||t.panel,"string"!=typeof s||(s=e.Renderer.colorFunctions[s])))return i.vertex&&("be","v","el",r.save(),r.lineJoin="bevel"),"wave"==i.type?n=a.drawWaveChart(o,i):i.baseline?n=a.drawBaselineChart(o,i):"mountain"==i.type?(i.returnObject=!0,n=a.drawMountainChart(o,i,s)):"channel"==i.type?(i.returnObject=!0,n=a.drawChannelChart(o,s,i)):(i.returnObject=!0,n=a.drawLineChart(o,i.style,s,i)),W.t8u(),i.vertex&&(a.scatter(o,{yAxis:i.yAxis,field:i.symbol||i.field,subField:i.subField,symbol:i.symbol,color:i.vertex_color,highlight:i.highlight}),r.restore()),n},e.Renderer.OHLC=function(t){var e;this.construct(t),(e=this.params).type||(e.type="candle"),this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,e.histogram&&(e.type="candle",this.highLowBars=!1,e.volume=e.hollow=!1),"bar"==e.type&&(e.volume=e.hollow=e.histogram=!1),W.t8u(),"candle"==e.type&&(e.hlc=e.colored=!1),e.volume&&(e.hollow=!0)},e.inheritsFrom(e.Renderer.OHLC,e.Renderer,!1),W.t8u(),e.Renderer.OHLC.requestNew=function(t,i){var a,r,n;W.t8u(),a=null,r=i.histogram;for(var s=0;s<t.length;s++)switch("histogr","am","can","dl","e",n=t[s]){case"candle":a=n;break;case"histogram":r=!0,a="candle";break;default:return null}return null===a?null:new e.Renderer.OHLC({params:e.extend(i,{type:a,histogram:r})})},e.Renderer.OHLC.getChartParts=function(t,e){var i;return"can","d","l","e","shado","w","border_","c","olor_u","p","s","tx_cand","le","_shadow_up","s","had","o","w","fill","_col","or","_down","stx_histogra","m_d","own","histogra","m","stx_his","togra","m_up",W.p16(29),16,32,[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:i=W.l16(8,"8"),fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:32,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:i,border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_down",condition:16,border:"border_color_down"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_even",condition:32,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:i,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0}]},e.Renderer.OHLC.prototype.draw=function(){var t,i,a,r,n,s,o;for(t=this.stx,i=this.stx.panels[this.params.panel].chart,a={},n=this.seriesParams,r=0;r<n.length;r++)s=n[r],o={},i.series[s.id]&&(o=e.clone(i.series[s.id].parameters)),a[s.id]={parameters:e.extend(e.extend(o,this.params),s)},this==t.mainSeriesRenderer&&i.customChart&&i.customChart.colorFunction&&(a[s.id].parameters.colorFunction=i.customChart.colorFunction);for(r in W.t8u(),t.drawSeries(i,a,this.params.yAxis,this),a)a[r].yValueCache&&(this.caches[r]=a[r].yValueCache)},e.Renderer.OHLC.prototype.getColor=function(t,i,a,r,n,s){var o,l,h,c,u;return o=s||a.color,l=this.params.yAxis||i.yAxis,r&&!(o=s||a.borderLeftColor||a["border-left-color"])?null:n?(h=t.pixelFromTransformedValue(l.highValue,i),isNaN(h)&&(h=0),c=a.backgroundColor,o&&!e.isTransparent(o)?((u=t.chart.context.createLinearGradient(0,h,0,2*l[l.flipped?"top":"bottom"]-h)).addColorStop(0,o),u.addColorStop(1,c),u):c):o},e.Renderer.OHLC.prototype.drawIndividualSeries=function(t,i){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P;if("o","p","en","st","ring",!i.invalid&&(r=this.stx,n=t.context,s=i.colorFunction,o=r.panels[i.panel]||t.panel,"string"!=a(s)||(s=e.Renderer.colorFunctions[s]))){if(l=r.layout.candleWidth-t.tmpWidth<=2&&t.tmpWidth<=3,1,2,W.p16(29),W.l16(4,"4"),8,16,32,t.state.chartType||(t.state.chartType={}),h=t.state.chartType.pass={},c=r.colorByCandleDirection,i.colorBasis&&(c="open"==i.colorBasis),u=i.histogram,d=i.type,p=i.hollow,m=r.noWicksOnCandles[d],r.startClip(o.name),g=null,f={colors:[],cache:[]},y=[],s)v={isHistogram:u,field:i.field,yAxis:i.yAxis,isVolume:i.volume,highlight:i.highlight},u||"bar"!=d?("candle"!=d||m||r.drawShadows(o,s,v),f=r.drawCandles(o,s,v),v.isOutline=!0,!p&&l||r.drawCandles(o,s,v)):("ba","r",v.type=i.hlc?"hlc":"bar",f=r.drawBarChart(o,"stx_bar_chart",s,v));else{x=u&&!1!==i.gradient,b=e.Renderer.OHLC.getChartParts(i.style,c);for(var F=0;F<b.length;F++)if("b","a","r","candl","e",!(S=b[F]).skipIfPass||h.even){if(u){if("histogram"!=S.type)continue}else if("bar"==d){if("b","a","r","bar"!=S.type)continue;if(i.colored&&!S.condition)continue;if(!i.colored&&S.condition)continue}else if(p){if("sh","ad","o","w","hollow"!=S.type)continue;if("shadow"==S.drawType&&m)continue}else{if("candle"!=d)continue;if("candle"!=S.type)continue;if("shadow"==S.drawType){if(m)continue;if(C=i.border_color_up||r.getCanvasColor("stx_candle_shadow_up"),w=i.border_color_down||r.getCanvasColor("stx_candle_shadow_down"),T=i.border_color_even||r.getCanvasColor("stx_candle_shadow_even"),e.colorsEqual(C,w)&&e.colorsEqual(C,T)&&e.colorsEqual(C,r.defaultColor)){if(S.condition)continue}else if(!S.condition)continue}}k=r.canvasStyle(S.style),D=this.getColor(r,o,k,!1,!1,i[S.fill]),A=this.getColor(r,o,k,!1,x,i[S.fill]),M=this.getColor(r,o,k,S.useBorderStyleProp&&!l,x,i[S.border]),"candle"==S.drawType&&("holl","o","w","hollow"==S.type?("transp","a","rent",!e.isTransparent(A)&&e.colorsEqual(M,A)&&(M=S.useColorInMap?"transparent":A),S.useColorInMap||(A=r.containerColor)):"candle"==S.type&&l&&(e.isTransparent(A)?A=M:M=A)),n.globalAlpha=i.opacity,y.push(r.drawBarTypeChartInner({fillColor:A,borderColor:M,condition:S.condition,style:S.style,type:"bar"==d&&i.hlc?"hlc":S.drawType,panel:o,field:i.field,yAxis:i.yAxis,volume:i.volume&&i.hollow,highlight:i.highlight})),g||(g={}),S.useColorInMap&&(g[D]=1)}}for(var _ in r.endClip(),g)i.hollow&&e.equals(_,r.containerColor)||f.colors.push(_);for(_=0;_<y.length;_++)for(var R=0;R<y[_].cache.length;R++)((P=y[_].cache[R])||0===P)&&(f.cache[R]=P);return f}},e.Renderer.Candles=function(t){var e;W.t8u(),this.construct(t),(e=this.params).type="candle",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,e.hlc=e.colored=e.histogram=!1,e.volume&&(e.hollow=!0)},e.inheritsFrom(e.Renderer.Candles,e.Renderer.OHLC,!1),e.Renderer.SimpleHistogram=function(t){var e;this.construct(t),(e=this.params).type="candle",e.histogram=!0,this.barsHaveWidth=this.standaloneBars=!0,this.highLowBars=!1,e.hlc=e.colored=e.hollow=e.volume=!1},e.inheritsFrom(e.Renderer.SimpleHistogram,e.Renderer.Candles,!1)},x=function(t){var e;(e=t.CIQ).capitalize=function(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""},e.camelCaseRegExp=/-([a-z])/g,e.makeCamelCase=function(t){return t.replace(e.camelCaseRegExp,(function(t){return W.t8u(),t[1].toUpperCase()}))},W.t8u(),e.uniqueID=function(t){var e,i;return t?("f","un","ctio","n",e=(new Date).getTime(),"undefined"!=typeof window&&window.performance&&"function"===a(window.performance.now)&&(e+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i;return i=(e+16*Math.random())%16|0,W.G16(8),W.t8u(),e=Math.floor(W.l16(16,e)),("x"==t?i:3&i|8).toString(16)}))):(i=(new Date).getTime().toString(36),(i+=Math.floor(Math.random()*Math.pow(36,2)).toString(36)).toUpperCase())}},b=function(t){var e;e=t.CIQ,W.d8u(),e.getHostName=function(t){try{return t.match(/:\/\/(.[^/]+)/)[1]}catch(t){return""}},e.qs=function(t){var e,i,a,r;W.d8u(),e={},t||(t=window.location.search.substring(1)),i=t.split("&");for(var n=0;n<i.length;n++)(a=i[n].indexOf("="))>0?(r=i[n].substring(0,a),W.G16(4),e[r]=i[n].substring(W.l16(1,a))):e[r=i[n]]=null;return e},e.postAjax=function(t,i,a,r,n){var s,o,l,h,c,u,d,p;if("Con","te","nt-Typ","e","PO","ST","string"==typeof t){-1214077449,981268069,s=2;for(var m=1;-1214077449!==W.g5l(m.toString(),m.toString().length,61086);m++)t={url:t,payload:i,cb:a,contentType:r,noEpoch:n,method:1,responseHeaders:!0},s+=2;981268069!==W.R5l(s.toString(),s.toString().length,64264)&&(t={url:t,payload:i,cb:a,contentType:r,noEpoch:n,method:1,responseHeaders:!0}),t={url:t,payload:i,cb:a,contentType:r,noEpoch:n,method:null,responseHeaders:!1}}if(o=t.url,l=t.cb,h=t.payload,l||(l=function(){}),t.ungovernable||!e.Extras||!e.Extras.RequestLimiter||!e.Extras.RequestLimiter.hitRequestLimit(o)){if(!(c=new XMLHttpRequest))return!1;if(u=new Date,t.noEpoch||("?c","iqrandom=",-1==o.indexOf("?")?o+="?ciqrandom="+u.getTime():o+="&ciqrandom="+u.getTime()),d=t.method,p=t.headers,d||(d=h?"POST":"GET"),c.open(d,o,!0),t.contentType||(t.contentType="application/x-www-form-urlencoded"),h&&c.setRequestHeader("Content-Type",t.contentType),p)for(var g in p)c.setRequestHeader(g,p[g]);t.timeout&&(c.timeout=t.timeout),c.ontimeout=function(){W.d8u(),l(408,null,{})},c.onload=function(){0===this.status?this.status="0":this.status||(this.status=200),l(this.status,this.responseText,function(e){var i,a,r,n;if(i={},!t.responseHeaders)return;a=e.getAllResponseHeaders(),r=a.split("\n");for(var s=0;s<r.length;s++){for(n=r[s].split(":");n[1]&&" "==n[1].charAt(0);)n[1]=n[1].substring(1);""!==n[0]&&(i[n.shift()]=n.join(":"))}return i}(this))},W.d8u(),c.onerror=function(){l("0",null,{})};try{c.send(h)}catch(t){l("0",t,{})}return!0}l(429,null,{})},e.loadUI=function(t,i,r){var n,s,o;if("iframe[ori","gina","l-ur",'l="',"fun","cti","on",i&&"function"!=a(i)||(r=i,i=document.body),W.G16(21),n=document.querySelector(W.l16('"]','iframe[original-url="',t)),s=function(){var t,a,n,s;t=null;try{t=this.contentDocument}catch(t){return r(t)}if(t&&!t.title){a=t.body.innerHTML,n=document.createElement("div"),e.innerHTML(n,a);for(var o=0;o<n.children.length;o++)s=n.children[o].cloneNode(!0),i.appendChild(s);r(null)}else r(new Error("iFrame not found or document has a title"))},W.t8u(),n){"about:bla","n","k",o=null;try{o=n.contentDocument}catch(t){return r(t)}"complete"===o.readyState&&o.location&&"about:blank"!==o.location.href?s.call(n):n.addEventListener("load",s)}else"orig","inal-ur","l","i","f","ram","e",(n=document.createElement("iframe")).setAttribute("original-url",t),n.src=t+(-1===t.indexOf("?")?"?":"&")+e.uniqueID(),n.hidden=!0,n.addEventListener("load",s),document.body.appendChild(n)},e.loadScript=function(t,i,a){var r,n,s;e.loadedScripts||(e.loadedScripts={}),e.loadedScripts[t]?i&&i():(r=document.createElement("SCRIPT"),a?(r.type="module",r.crossOrigin="use-credentials"):r.async=!0,r.onload=function(){e.loadedScripts[t]=!0,i&&i()},n=-1==(n=t).indexOf("?")?n+"?"+Date.now():n+"&"+Date.now(),r.src=n,(s=document.getElementsByTagName("script")[0]).parentNode.insertBefore(r,s.nextSibling))},e.loadStylesheet=function(t,e){var i,a,r;(i=document.createElement("link")).rel="stylesheet",i.type="text/css",i.media="screen",i.href=t+(-1===t.indexOf("?")?"?":"&")+Date.now(),i.onload=function(){this.loaded||(this.loaded=!0,W.d8u(),e&&e())},(r=(a=document.getElementsByTagName("link"))[a.length-1]).parentNode.insertBefore(i,r.nextSibling)},e.loadWidget=function(t,i,r,n){i&&"function"!=a(i)||(r=i,i=document.body),W.G16(4),e.loadStylesheet(W.l16(".css",t),(function(){W.p16(4),e.loadUI(W.T16(".html",t),i,(function(i){i?r(i):(W.G16(4),e.loadScript(W.l16(".js",t),r,n))}))}))},e.waitForPlugins=function(t,i){var a,r,n,s;if(a=0,r=t.length){for(var o=0;o<r;o++)n="cq-"+t[o],(s=document.getElementsByTagName(n)[0])&&s.hasAttribute("loaded")&&a++;if(r!==a)return setTimeout((function(){e.waitForPlugins(t,i)}),0);i()}else i()},e.addInternalStylesheet=function(t){var e,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e="s",e+="t",e+="yl",e+="e",t&&(t.default&&(t=t.default),"string"==typeof t&&(a&&document.querySelector('style[path="'+a+'"]')||((i=document.createElement(e)).setAttribute("type","text/css"),i.setAttribute("path",a),i.innerText=t,document.head.appendChild(i))))}},S=function(t){var e;(e=t.CIQ).ChartEngine.prototype.registerHTMLElements=function(){var t,i,r,n,s,o,l,h,c,u,d;for(var p in t=this.chart.container,e.ChartEngine.htmlControls)if("u","ndefi","ne","d","undefined"==a(this.chart[p])&&void 0===this.controls[p]){if("c","hartControls",!this.allowZoom&&"chartControls"==p)continue;if(W.G16(4),i=t.querySelector(W.l16(p,".")))this.chart[p]=i,this.controls[p]=i;else{if(!(r=e.ChartEngine.htmlControls[p]))continue;(n=document.createElement("DIV")).innerHTML=r,i=n.firstChild,t.appendChild(i),this.chart[p]=i,this.controls[p]=i,i.classList.add(p)}}s=this.controls.chartControls,o=this.controls.home,s&&(".stx-zoom-","out",l=s.querySelector(".stx-zoom-in"),h=s.querySelector(".stx-zoom-out"),e.safeClickTouch(l,(u=this,function(t){u.allowZoom&&u.zoomIn(t),t.stopPropagation()})),e.safeClickTouch(h,(c=this,W.d8u(),function(t){c.allowZoom&&c.zoomOut(t),t.stopPropagation()})),e.touchDevice||(this.makeModal(l),this.makeModal(h))),o&&(e.safeClickTouch(o,(d=this,W.d8u(),function(t){t.stopPropagation(),d.isHistoricalMode()?(delete d.layout.range,d.loadChart(d.chart.symbol,(function(){d.home({animate:!1})}))):d.home({animate:!0})})),e.touchDevice||this.makeModal(o))},W.d8u(),e.ChartEngine.prototype.home=function(t){var e,i,r,n,s,o;if("u","nde","fined",this.swipe.amplitude=0,e=this.layout,"object"!=a(t)&&(t={maintainWhitespace:t}),"undefined"==a(t.maintainWhitespace)&&(t.maintainWhitespace=!0),this.cancelTouchSingleClick=!0,this.chart.dataSet&&this.chart.dataSet.length){for(var l in this.micropixels=0,i=Math.floor(this.chart.width/e.candleWidth),this.charts)if(r=this.charts[l],!t.chart||t.chart==r){for(n=0,t.maintainWhitespace&&this.preferences.whitespace>=0&&(n=this.preferences.whitespace),(t.whitespace||0===t.whitespace)&&(n=t.whitespace),(s=this.getLabelOffsetInPixels(r,e.chartType))>n&&(n=s),o=Math.min(i,r.dataSet.length),this.chart.allowScrollPast&&(o=i),this.micropixels=this.chart.width-o*e.candleWidth-n,this.preferences.whitespace=n;this.micropixels>e.candleWidth;)o++,this.micropixels-=e.candleWidth;for(;this.micropixels<0;)o--,this.micropixels+=e.candleWidth;this.micropixels-=e.candleWidth,o++,this.mainSeriesRenderer&&this.mainSeriesRenderer.standaloneBars||(this.micropixels+=e.candleWidth/2),t.animate?(this,this.scrollTo(r,o,c(this,r,o))):(r.scroll=o,h(this))}this.draw()}else this.draw();function h(t){var e;for(var i in W.t8u(),t.panels){e=t.panels[i].yaxisLHS.concat(t.panels[i].yaxisRHS);for(var a=0;a<e.length;a++)t.calculateYAxisMargins(e[a])}}function c(t,e,i){return function(){h(t),e.scroll=i,t.draw()}}},e.ChartEngine.prototype.headsUpHR=function(){var t,i,a,r,n,s,o;function l(t){e.efficientDOMUpdate(n,"innerHTML",t)}t="head",t+="sUp",t+="H",t+="R",i="hea",i+="ds",W.t8u(),i+="Up",i+="HR",this.runPrepend(i,arguments)||(a=this.currentPanel)&&(r=a.chart,this.updateFloatHRLabel(a),(n=this.controls.floatDate)&&!r.xAxis.noDraw&&(s=this.barFromPixel(this.cx),(o=r.xaxis[s])&&o.DT?l(e.displayableDate(this,r,o.DT)):o&&o.index?l(o.index):l("")),this.runAppend(t,arguments))},e.ChartEngine.prototype.modalBegin=function(){this.openDialog="modal",this.undisplayCrosshairs()},e.ChartEngine.prototype.modalEnd=function(){W.d8u(),this.cancelTouchSingleClick=!0,this.openDialog="",this.doDisplayCrosshairs()},e.ChartEngine.prototype.makeModal=function(t){var e;e=this,W.d8u(),t.onmouseover=function(t){W.d8u(),e.modalBegin()},t.onmouseout=function(t){e.modalEnd()}},e.ChartEngine.prototype.updateChartAccessories=function(){var t,i,a,r,n,s,o,l,h;(null!==this.accessoryTimer&&clearTimeout(this.accessoryTimer),!e.ChartEngine.drawingLine&&e.touchDevice&&(new Date).getTime()-this.lastAccessoryUpdate<100)?this.accessoryTimer=setTimeout((h=this,W.d8u(),function(){W.t8u(),h.updateChartAccessories()}),10):(W.d8u(),this.chart.dataSet&&(this.runPrepend("updateChartAccessories",arguments)||(this.accessoryTimer=null,this.lastAccessoryUpdate=(new Date).getTime(),(t=this.controls.floatDate)&&((i=this.currentPanel)||(i=this.chart.panel),i&&(a="b",a+="ot",a+="to",a+="m",r="le",r+="f",r+="t",n=i.chart,s=!0===this.xAxisAsFooter?0:this.chart.canvasHeight-i.chart.bottom,o=t.offsetWidth/2-.5,(l=this.pixelFromTick(this.crosshairTick,n)-o)<0?l=0:l>this.width-2*o-1&&(l=this.width-2*o-1),e.efficientDOMUpdate(t.style,r,l+"px"),e.efficientDOMUpdate(t.style,a,s+"px"))),this.positionCrosshairsAtPointer(),this.headsUpHR(),this.runAppend("updateChartAccessories",arguments))))},e.ChartEngine.prototype.positionSticky=function(t){var e,i,a=W;e=Math.max(this.cy-t.offsetHeight-60,0),i=Math.min(this.chart.canvasWidth-(this.cx-50),this.chart.canvasWidth-t.offsetWidth),a.p16(4),t.style.top=a.T16("px",e),a.p16(4),t.style.right=a.l16("px",i)},e.ChartEngine.prototype.displaySticky=function(t){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E=W;if(i=".ov",i+="e",i+="rl",i+="ayEdit",(r=this.controls.mSticky)&&(n=r.querySelector(".mStickyInterior")))if(s=r.querySelector(".overlayTrashCan"),o=r.querySelector(i),l=r.querySelector(".mouseDeleteInstructions"),h=r.querySelector(".stickyLongPressText"),l.classList.remove("no_edit"),t&&"object"==a(t)||(t={message:arguments[0],backgroundColor:arguments[1],forceShow:arguments[2],noDelete:arguments[3],type:arguments[4]}),c=t.message,u=t.backgroundColor,d=t.forceShow,p=t.noDelete,m=t.noEdit,E.t8u(),g=t.type,d||c){if(y=".mStickyRigh",y+="tClic",y+="k",c||(c=""),v=this.defaultColor,"auto"==u&&(u=v),d&&!c?(n.style.backgroundColor="",n.style.color="",n.style.display="none"):u?(n.style.backgroundColor=u,n.style.color=e.isTransparent(u)?v:e.chooseForegroundColor(u),n.style.display="inline-block"):(x="inline-b",x+="lock",n.style.backgroundColor="",n.style.color="",n.style.display=x),n.innerHTML=c,(b=r.querySelector(y)).className="mStickyRightClick",g&&(E.p16(4),b.classList.add(E.l16(g,"rightclick_"))),b.style.display="",r.style.display="inline-block",p||!0===this.bypassRightClick||this.bypassRightClick[g])b.style.display="none";else if(this.highlightViaTap||this.touches.length)S="inline-b",S+="l",S+="oc",S+="k",C="i",C+="nline",C+="-b",C+="lock",s&&(s.style.display=C),o&&!m&&(o.style.display=S),l&&(l.style.display="none"),h&&(h.style.display="none"),r.classList[""===c?"add":"remove"]("hide");else{w=1610427871,T=-666500359,k=2;for(var O=1;E.R5l(O.toString(),O.toString().length,97186)!==w;O++)m&&l.classList.add("block"),l&&(l.style.display="block"),k+=2;if(E.R5l(k.toString(),k.toString().length,47089)!==T&&(D="b",D+="loc",D+="k",m&&l.classList.add("no_edit"),l&&(l.style.display=D)),h&&(h.style.display="none",(A=this.preferences.dragging)&&t.panel&&!t.panel.noDrag)){M=1712734021,E.G16(22),P=-E.l16(2147483647,"1871899506"),F=2;for(var I=1;E.g5l(I.toString(),I.toString().length,18367)!==M;I++)_="blo",_+="ck",0!=A&&A.study||"block"!=g?h.style.display=_:(0!=A&&A.series||"block"!=g)&&(h.style.display="block"),F+=2;E.g5l(F.toString(),F.toString().length,3215)!==P&&(R="s",R+="e",R+="ries",(!0!==A&&!A.study||"study"!=g)&&(!0!==A&&!A.series||g!=R)||(h.style.display="block"))}}L=g||"default",r.setAttribute("cq-sticky-type",L),(t.positioner||this.positionSticky).call(this,r)}else f="no",f+="n",f+="e",n.innerHTML="",r.style.display="none",s&&(s.style.display="none"),o&&(o.style.display="none"),l&&(l.style.display="none"),h&&(h.style.display=f)},e.ChartEngine.prototype.displayNotification=function(t,e){var i,a,r,n,s,o,l=this,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(i=".me",i+="ss",i+="ag",i+="e",a="templa",a+="t",a+="e",this.controls.notificationTray){var c=h.callback,u=h.dismissalListeners;n=(r=this.controls.notificationTray).querySelector(a).content.cloneNode(!0),W.t8u(),(s=n.firstElementChild).className=t,s.querySelector(i).textContent=e,c&&(o=window.PointerEvent?"pointerup":"touchend",s.handler=s.addEventListener(o,c)),u&&(s.listeners={},u.forEach((function(e){s.listeners[t]=l.addEventListener(e.type,e.callback)}))),this.makeModal(s),r.appendChild(s)}},e.ChartEngine.prototype.removeNotification=function(t){var e,i;if(this.controls.notificationTray&&(e=this.controls.notificationTray,W.d8u(),i=e.querySelector(".".concat(t)))){if(i.handler&&i.removeEventListener(i.handler),i.listeners)for(var a in i.listeners)this.removeEventListener(i.listeners[a]);this.modalEnd(),e.removeChild(i)}},e.ChartEngine.prototype.setMeasure=function(t,e,i,a,r){var n,s,o,l,h,c,u,d,p,m,g=W;this.runPrepend("setMeasure",arguments)||(n=(this.drawingContainer||document).querySelector(".mMeasure"),s="",t||0===t?(!1!==e&&(o=(o=Math.round(Math.abs(t-e)*this.chart.roundit)/this.chart.roundit).toFixed(this.chart.yAxis.printDecimalPlaces),this.internationalizer?s+=this.internationalizer.numbers.format(o):s+=o,t>0&&e>0&&(h=" ",h+="(",g.p16(13),l=g.l16(t,e,t),Math.abs(l)>.1?(g.G16(40),l=Math.round(g.l16(216762752,"100",l))):l=Math.abs(l)>.01?Math.round(1e3*l)/10:Math.round(1e4*l)/100,this.internationalizer?(g.p16(8),l=this.internationalizer.percent.format(g.l16(100,l))):(g.G16(4),l=g.T16("%",l)),g.p16(21),s+=g.l16(")",h,l))),!1!==a&&(g.G16(10),c=Math.abs(g.T16(a,i)),c=Math.round(c)+1,u=this.translateIf("Bars"),g.G16(41),s+=g.l16(c,u," "," ")),n&&(n.innerHTML=s)):this.anyHighlighted||""!==this.currentVectorParameters.vectorType||this.clearMeasure(),this.activeDrawing||((n=this.controls.mSticky)&&(d=".mS",d+="tickyInterior",p=n.querySelector(d),r?(m="h",m+="i",m+="d",m+="e",n.style.display="inline-block",p.style.display="inline-block",(t||0===t)&&(p.innerHTML=s),n.classList[""===s?"add":"remove"](m),this.positionSticky(n)):(n.style.display="none",p.innerHTML="")),this.runAppend("setMeasure",arguments)))},e.ChartEngine.prototype.clearMeasure=function(){var t;W.d8u(),(t=(this.drawingContainer||document).querySelector(".mMeasure"))&&(t.innerHTML="")},e.ChartEngine.prototype.zoomSet=function(t,i){var a,r,n,s,o;if("n","on","e",t=this.constrainCandleWidth(t),"none"!=this.chart.tempCanvas.style.display&&e.clearCanvas(this.chart.tempCanvas,this),!(a=this.mainSeriesRenderer||{}).params||!a.params.volume){if(this.preferences.zoomAtCurrentMousePosition&&this.zoomInitiatedByMouseWheel&&this.crosshairTick<i.dataSet.length)r=this.crosshairTick||this.tickFromPixel(this.cx,i);else if(this.isHome())r=i.dataSet.length-1;else if(this.chart.scroll>this.chart.dataSet.length)r=0;else if("zoom-x"==this.grabMode)r=this.tickFromPixel(this.chart.width,i);else{-520158409,-1451400441,n=2;for(var l=1;-520158409!==W.g5l(l.toString(),l.toString().length,81571);l++)r=this.tickFromPixel(this.chart.width+9,i),n+=2;-1451400441!==W.R5l(n.toString(),n.toString().length,40249)&&(r=this.tickFromPixel(this.chart.width+9,i)),r=this.tickFromPixel(this.chart.width/2,i)}this.animations.zoom.hasCompleted&&(this.zoomInitiatedByMouseWheel=!1),s=i.dataSet.length-1-r,o=i.scroll,i.scroll=Math.round((this.pixelFromTick(r,i)-i.left)/t)+1+s,this.micropixels+=(o-s)*this.layout.candleWidth-(i.scroll-s)*t}this.setCandleWidth(t),i.spanLock=!1,this.draw(),this.doDisplayCrosshairs(),this.updateChartAccessories()}},C=function(t){var e;W.d8u(),(e=t.CIQ).ChartEngine.Chart=function(){this.xAxis=new e.ChartEngine.XAxis,this.yAxis=new e.ChartEngine.YAxis,this.symbolObject={symbol:null},this.series={},this.seriesRenderers={},W.t8u(),this.xaxis=[],this.state={},this.endPoints={},this.defaultChartStyleConfig={},this.baseline=e.clone(this.baseline)},e.extend(e.ChartEngine.Chart.prototype,{symbol:null,symbolObject:{symbol:null},symbolDisplay:null,series:{},seriesRenderers:{},scroll:0,isComparison:!1,forcePercentComparison:!0,maxTicks:0,tension:null,currentMarketData:{},masterData:null,dataSet:null,scrubbed:null,dataSegment:null,segmentImage:null,baseline:{includeInDataSegment:!1,defaultLevel:null,userLevel:null,actualLevel:null},xAxis:null,xaxis:[],xaxisFactor:30,decimalPlaces:2,dynamicYAxis:!1,roundit:100,legendRenderer:e.drawLegend,customChart:null,yaxisPaddingRight:null,yaxisPaddingLeft:null,tickCache:{},allowScrollPast:!0,allowScrollFuture:!0,whiteSpaceFutureTicks:0,hideDrawings:!1,defaultPlotField:"Close",defaultChartStyleConfig:{},lockScroll:!1,includeOverlaysInMinMax:!0,gaplines:null,lineStyle:null,lineApproximation:!0,highLowBars:!1,standaloneBars:!1,barsHaveWidth:!1,calculateTradingDecimalPlaces:e.calculateTradingDecimalPlaces},!0)},w=function(t){var e;(e=t.CIQ).ChartEngine.prototype.resolveY=function(t){return W.d8u(),this.top+t},e.ChartEngine.prototype.resolveX=function(t){return this.left+t},W.t8u(),e.ChartEngine.prototype.backOutY=function(t){return W.t8u(),t-this.top},e.ChartEngine.prototype.backOutX=function(t){return t-this.left},e.ChartEngine.prototype.dateFromTick=function(t,i,a){var r,n,s,o,l,h,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dataSet",u=W;return i||(i=this.chart),h=!1,0===(n=(r=i[c]).length)&&(r[0]={},r[0].DT=new Date,n=r.length,h=!0),t<0?s=(o=this.standardMarketIterator(r[0].DT))?o.previous(Math.abs(t)):r[0].DT:t>=n?(o=this.standardMarketIterator(r[n-1].DT))?(u.G16(42),s=o.next(u.T16(t,n,1))):s=r[n-1].DT:s=r[t].DT,a?l=new Date(s.getTime()):(u.G16(0),l=e.yyyymmddhhmmssmmm(s).substr(0,u.T16("12",1))),h&&delete r[0].DT,u.t8u(),l},e.ChartEngine.prototype.tickFromDate=function(t,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"dataSet",S=W;if(i||(i=this.chart),!(n=i[b])||!n.length)return 0;if(a||(a=0),s=t.constructor==Date?t:e.strToDateTime(t),e.ChartEngine.isDailyInterval(this.layout.interval)||s.setMinutes(s.getMinutes()+a),o=s.getTime(),i.tickCache[b]||(i.tickCache[b]={}),(l=i.tickCache[b][o])||0===l)return r?Math.ceil(l):Math.floor(l);if(h=n[0].DT,c=n[n.length-1].DT,s>=h&&s<=c){for(u=0,d=n.length,p=0;++p<100;){if(S.G16(14),+(g=n[m=Math.floor(S.T16(d,2,u))].DT)==+s)return i.tickCache[b][o]=m,m;if(g<s&&(u=m),g>s){if(n[m-1].DT<s)return S.G16(10),i.tickCache[b][o]=S.T16(m,.5),r?m:m-1;if(+n[m-1].DT==+s)return S.p16(10),i.tickCache[b][o]=S.T16(m,1),S.p16(10),S.T16(m,1);d=m}}if(p>=100)return console.log("!!!Warning: tickFromDate() did not find match."),n.length}return S.p16(30),y=(f=S.l16(s,h))?h:c,x=(v=this.standardMarketIterator(y))?v.futureTick({end:s}):0,l=f?-1*x:n.length-1+x,i.tickCache[b][o]=l,l},e.ChartEngine.prototype.pixelFromBar=function(t,e){var i,a,r,n=W;if(n.d8u(),e||(e=this.chart),i=0,(a=this.chart.segmentImage)&&a[t]&&a[t].leftOffset)i=a[t].leftOffset;else{778046178,-1577216476,r=2;for(var s=1;778046178!==n.g5l(s.toString(),s.toString().length,212);s++)i=(t+.5)*this.layout.candleWidth,n.p16(23),r+=n.l16("2",820403328);-1577216476!==n.g5l(r.toString(),r.toString().length,27683)&&(i=933*t+this.layout.candleWidth)}return i=e.panel.left+Math.floor(i+this.micropixels)-1},e.ChartEngine.prototype.barFromPixel=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g=W;if(e||(e=this.chart),i=this.chart.segmentImage,a=this.micropixels,r=this.layout.candleWidth,i){if(n=t-e.panel.left-a,s=2,l=i.length,g.G16(8),h=Math.round(g.l16(s,l)),n>(d=i[l-1].leftOffset+i[l-1].candleWidth/2))return l+Math.floor((t-d-e.panel.left-a)/r);for(var f=1;f<l&&(s*=2,o=i[h])&&(c=o.leftOffset,u=o.candleWidth/2,g.G16(10),p=g.T16(c,u),g.G16(4),m=g.l16(u,c),!(0===h||n>=p&&n<m));f++)n<p?h-=Math.max(1,Math.round(l/s)):h+=Math.max(1,Math.round(l/s)),h=Math.max(0,Math.min(l-1,h));if(!i[h])for(f=0;f<l;f++)if(o=i[f]){if(n<(c=o.leftOffset)-(u=o.candleWidth/2))return g.G16(29),Math.max(g.l16(0,"0"),g.T16(f,1,g.p16(10)));if(n<c+u)return f;if(n>=c+u)return g.p16(4),g.l16(1,f)}return h}return Math.floor((t-e.panel.left-a)/r)},e.ChartEngine.prototype.tickFromPixel=function(t,e){var i;return e||(e=this.chart),i=e.dataSet.length-e.scroll,e.segmentImage?i+=this.barFromPixel(t,e):i+=Math.floor((t-e.panel.left-this.micropixels)/this.layout.candleWidth),i},e.ChartEngine.prototype.pixelFromTick=function(t,e){var i,a,r,n,s,o,l,h,c,u,d;return e||(e=this.chart),i=e.dataSegment,a=e.dataSet,r=e.segmentImage,n=this.micropixels,s=i?i.length:0,o=e.panel,l=e.scroll,h=t-a.length+l,c=s?i[h]:null,r&&(c=r[h]),c&&c.leftOffset?o.left+Math.floor(c.leftOffset+n):(u=0,d=0,c=s?i[s-1]:null,r&&(W.G16(10),c=r[W.l16(s,1)]),c&&c.leftOffset&&s<t-a.length+l&&(u=c.leftOffset-c.candleWidth/2,d=s),u+o.left+Math.floor((t-d-a.length+l+.5)*this.layout.candleWidth+n))},e.ChartEngine.prototype.pixelFromDate=function(t,e,i,a){return W.t8u(),this.pixelFromTick(this.tickFromDate(t,e,i,a),e)},e.ChartEngine.prototype.transformedPriceFromPixel=function(t,e,i){var a,r,n;if(e||(e=this.chart.panel),t=(a=i||e.yAxis).bottom-t,a.semiLog)n=t*a.logShadow/a.height,a.flipped?n=a.logHigh-n:n+=a.logLow,r=Math.pow(10,n);else{if(!a.multiplier)return null;r=t/a.multiplier,a.flipped?r=a.high-r:r+=a.low}return r},e.ChartEngine.prototype.priceFromPixel=function(t,e,i){var a;return e||(e=this.chart.panel),a=this.transformedPriceFromPixel(t,e,i),W.d8u(),this.charts[e.name]&&e.chart.untransformFunc&&(i&&i!=e.yAxis||(a=e.chart.untransformFunc(this,e.chart,a,i))),a},e.ChartEngine.prototype.valueFromPixel=function(t,e,i){var a;return e||(e=this.whichPanel(t)),e||(a=Object.values(this.panels))&&a.length&&(e=t<=0?a.shift():a.pop()),this.priceFromPixel(t,e,i)},e.ChartEngine.prototype.valueFromInterpolation=function(t,i,r,n,s){var o,l,h,c,u,d,p,m,g,f,y,v,x,b=W;return"o","bject",null===t||t<0||!i?null:(n||(n=this.chart.panel),s||(s=n.yAxis),r||(r=this.chart.defaultPlotField),(o=this.getPreviousBar(this.chart,i,t))?((h=e.existsInObjectChain(o,i))&&(l=h.obj[h.member]),"object"==a(l)&&(l=l[r]),(c=this.getRendererFromSeries(i))&&c.params.step||"step"===this.layout.chartType?l:(b.t8u(),u=this.getNextBar(this.chart,i,t),(h=e.existsInObjectChain(u,i))&&(d=h.obj[h.member]),"object"==a(d)&&(d=d[r]),u?null==l||null==d?null:(p=this.pixelFromPrice(l,n,s),m=this.pixelFromPrice(d,n,s),g=o.tick,f=u.tick,b.p16(43),y=b.l16(g,f,m,p),v=this.chart.dataSegment[t].tick,b.G16(44),x=b.l16(p,v,y,g),this.priceFromPixel(x,n,s)):null)):null)},e.ChartEngine.prototype.pixelFromTransformedValue=function(t,e,i){var a,r,n,s,o;return W.t8u(),e||(e=this.chart.panel),r=((a=i||e.yAxis).high-t)*a.multiplier,a.semiLog&&(n=Math.max(t,0),s=Math.log(n)/Math.LN10,r=(o=a.height)-o*(s-a.logLow)/a.logShadow),r=a.flipped?a.bottom-r:a.top+r},e.ChartEngine.prototype.pixelFromPrice=function(t,e,i){return W.d8u(),e||(e=this.chart.panel),this.charts[e.name]&&e.chart.transformFunc&&(i&&i!=e.yAxis||(t=e.chart.transformFunc(this,e.chart,t,i))),this.pixelFromTransformedValue(t,e,i)},e.ChartEngine.prototype.pixelFromValueAdjusted=function(t,e,i,a){var r,n;return W.t8u(),this.layout.adj||!this.charts[t.name]?this.pixelFromPrice(i,t,a):(r=Math.round(e))>0&&r<t.chart.dataSet.length&&(n=t.chart.dataSet[r].ratio)?(W.p16(0),this.pixelFromPrice(W.l16(i,n),t,a)):this.pixelFromPrice(i,t,a)},e.ChartEngine.prototype.adjustIfNecessary=function(t,e,i){var a,r;return this.layout.adj?i:t&&this.charts[t.name]?(a=Math.round(e),W.d8u(),a>0&&a<t.chart.dataSet.length&&(r=t.chart.dataSet[a].ratio)?(W.G16(8),W.T16(r,i)):i):i}},T=function(t){var e;W.d8u(),(e=t.CIQ).ChartEngine.prototype.positionCrosshairsAtPointer=function(){var t,i,a,r,n,s,o,l;t="positionCrosshair",t+="sAtPo",t+="in",t+="ter",(i=this.currentPanel)&&(!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive||this.runPrepend("positionCrosshairsAtPointer",arguments)||(a=i.chart,r=this.container.getBoundingClientRect(),this.top=r.top,this.left=r.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.cy=this.crossYActualPos=this.backOutY(e.ChartEngine.crosshairY),this.cx=this.backOutX(e.ChartEngine.crosshairX),n=this.crosshairTick=this.tickFromPixel(this.cx,a),s=this.pixelFromTick(n,a)-1,this.controls.crossX&&(W.G16(4),this.controls.crossX.style.left=W.T16("px",s)),s>=i.right||s<=i.left?this.undisplayCrosshairs():(o="chart"==i.name?this.preferences.horizontalCrosshairField:i.horizontalCrosshairField,l=a.dataSet,o&&l&&n<l.length&&n>-1&&(this.crossYActualPos=this.pixelFromPrice(l[n][o],i)),this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.runAppend(t,arguments))))},e.ChartEngine.prototype.doDisplayCrosshairs=function(){var t,i,a,r,n,s;this.runPrepend("doDisplayCrosshairs",arguments)||(this.displayInitialized&&(t=this.floatCanvas,i=this.currentVectorParameters.vectorType,this.layout.crosshair||""!==i&&i?e.Drawing&&e.Drawing[i]&&(new e.Drawing[i]).dragToDraw||this.overXAxis||this.overYAxis||!this.insideChart&&!this.grabbingScreen||""!==this.openDialog?this.undisplayCrosshairs():(r=(a=this.controls).crossX,n=a.crossY,r&&""!==r.style.display&&(r.style.display="",n&&(n.style.display=""),this.magnetizedPrice&&i?(this.container.classList.remove("stx-crosshair-on"),this.chart.tempCanvas.style.display="block"):(s="stx-cr",s+="oss",s+="hair-",s+="on",this.container.classList.add(s))),a.floatDate&&!this.chart.xAxis.noDraw&&(a.floatDate.style.visibility="",this.currentPanel&&this.updateFloatHRLabel(this.currentPanel)),t&&("none"==t.style.display&&e.clearCanvas(t,this),t.style.display="block")):this.undisplayCrosshairs()),W.t8u(),this.runAppend("doDisplayCrosshairs",arguments))},e.ChartEngine.prototype.undisplayCrosshairs=function(){var t,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f=W;if(t="no",t+="ne",i="und",i+="isplayCrosshairs",!this.runPrepend(i,arguments)){if(r=(a=this.controls).crossX,n=a.crossY,r&&"none"!=r.style.display&&(s="n",s+="o",s+="n",s+="e",r.style.display=s,n&&(n.style.display="none")),this.displayInitialized&&a.floatDate){o=-755593759,l=-144366819,f.p16(10),h=f.l16("2",0);for(var y=1;f.R5l(y.toString(),y.toString().length,24049)!==o;y++)a.floatDate.style.visibility="",h+=2;f.g5l(h.toString(),h.toString().length,24628)!==l&&(a.floatDate.style.visibility="hidden")}if(this.container.classList.remove("stx-crosshair-on"),(c=this.floatCanvas)&&c.isDirty&&c.style.display!=t){u=-340908047,d=2000443708,p=2;for(var v=1;f.g5l(v.toString(),v.toString().length,31650)!==u;v++)m="non",m+="e",e.clearCanvas(c,this),"none"!=c.style.display&&(c.style.display=m),p+=2;f.g5l(p.toString(),p.toString().length,85457)!==d&&(e.clearCanvas(c,this),"none"===c.style.display&&(c.style.display="none"))}this.activeDrawing||this.repositioningDrawing||this.editingAnnotation||(g=this.chart.tempCanvas)&&"none"!=g.style.display&&(g.style.display="none"),this.runAppend("undisplayCrosshairs",arguments)}},e.ChartEngine.prototype.hideCrosshairs=function(){W.d8u(),this.displayCrosshairs=!1},e.ChartEngine.prototype.showCrosshairs=function(){this.displayCrosshairs=!0}},k=function(t){var e,i,r,n,s=W;s.G16(22),e=s.l16(2147483647,"987478922"),i=2;for(var o=1;-44021506!==s.R5l(o.toString(),o.toString().length,23397);o++)r=t.CIQ,n=t.timezoneJS,i+=2;s.R5l(i.toString(),i.toString().length,19556)!==e&&(r=t.CIQ,n=t.timezoneJS),r.ChartEngine.prototype.loadChart=function(t,e,i){var n,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T;if("obje","ct",i||"function"!=typeof e?Array.isArray(e)&&(e={masterData:e}):(i=e,e={}),e||(e={}),n=e.chart||this.chart,o=this.layout,(l=e.periodicity)&&(h=r.cleanPeriodicity(l.period?l.period:l.periodicity,l.interval,l.timeUnit),o.interval=h.interval,o.periodicity=h.period,o.timeUnit=h.timeUnit),c=n.symbol,u=r.clone(n.symbolObject),d=n.market,p=n.masterData,m=n.dataSet,g=n.moreAvailable,f=n.upToDate,n.dataSet=[],n.masterData=[],n.moreAvailable=null,n.upToDate=null,t)"object"==a(t)?(n.symbol=t.symbol,n.symbolObject=t):(n.symbol=t,n.symbolObject.symbol=t);else{n.symbol=null,2092308962,s.G16(10),y=s.T16("785122603",0),v=2;for(var k=1;2092308962!==s.R5l(k.toString(),k.toString().length,50438);k++)n.symbolObject={symbol:1},v+=2;s.g5l(v.toString(),v.toString().length,28761)!==y&&(n.symbolObject={symbol:null})}n.inflectionPoint=null,this.marketFactory&&(x=this.marketFactory(n.symbolObject),this.setMarket(x,n)),this.setMainSeriesRenderer(!0),b=e.span,(S=e.range)||b||!o?S&&b&&(b={}):(b=o.range?{}:o.setSpan,S=o.range||{}),this.clearCurrentMarketData(n),C=this,!e.masterData&&this.quoteDriver?(w=function(t){t&&"orphaned"!=t&&(n.symbol=c,n.symbolObject=u,n.market=d,C.masterData=n.masterData=p,n.dataSet=m,n.moreAvailable=g,n.upToDate=f),C.dispatch(C.currentlyImporting?"symbolImport":"symbolChange",{stx:C,symbol:n.symbol,symbolObject:n.symbolObject,prevSymbol:c,prevSymbolObject:u,action:"master"}),i&&i.call(C,t)},S&&Object.keys(S).length&&this.setRange?(delete e.span,delete o.setSpan,this.chart.masterData=null,this.displayInitialized=!1,l&&(S.periodicity=l),S.forceLoad=!0,this.setRange(S,w)):b&&b.base&&this.setSpan?(b.multiplier=b.multiplier||1,this.chart.masterData=null,this.displayInitialized=!1,l&&(b.maintainPeriodicity=!0),b.forceLoad=!0,this.setSpan(b,w)):this.quoteDriver.newChart({symbol:n.symbol,symbolObject:n.symbolObject,chart:n,initializeChart:!0},(function(t){t||(C.adjustPanelPositions(),C.quoteDriver.updateSubscriptions(),e.stretchToFillScreen&&C.fillScreen()),s.d8u(),w.apply(C,arguments)}))):("m","a","ste","r","s","ymbol","Import",e.masterData||console.log("Warning: No masterData specified and no QuoteFeed configured"),n.symbol||(n.symbol=""),this.initializeChart(),T=this.doCleanupGaps(e.masterData,n),this.setMasterData(T,n,{noCleanupDates:!0}),n.endPoints={},T&&T.length&&(n.endPoints={begin:T[0].DT,end:T[T.length-1].DT}),this.createDataSet(),S&&Object.keys(S).length&&this.setRange?this.setRange(S):b&&b.multiplier&&b.base&&this.setSpan?this.setSpan({maintainPeriodicity:!0,multiplier:b.multiplier,base:b.base}):e.stretchToFillScreen?this.fillScreen():T&&T.length?this.home():this.clear(),this.adjustPanelPositions(),C.dispatch(C.currentlyImporting?"symbolImport":"symbolChange",{stx:C,symbol:n.symbol,symbolObject:n.symbolObject,prevSymbol:c,prevSymbolObject:u,action:"master"}),i&&i.call(C))},r.ChartEngine.prototype.loadBlankChart=function(){this.loadChart(null,[])},r.ChartEngine.prototype.getDataFields=function(t){var e,i,a;for(var r in"Hi","gh",t||(t=this.chart),e=t.defaultPlotField||"Close",(i=["Open","High","Low"]).push(e),t.series)a=t.series[r].parameters,i.push(a.symbol);return i},r.ChartEngine.prototype.cleanMasterData=function(t,e){var i,a,r,n,o;function l(t,e){for(var i=0;i<e.length;i++)if(void 0!==t[e[i]])return!1;return!0}if(i=t.symbol,(a=e.masterData)&&a.length){r=this.getDataFields(e),n=0;do{delete(o=a[n])[i],l.call(this,o,r)?(s.G16(29),a.splice(n,s.l16(1,"1"))):n++}while(n<a.length);a=this.doCleanupGaps(a,e,{noCleanupDates:!0}),this.setMasterData(a,e,{noCleanupDates:!0}),this.clearCurrentMarketData(e,i)}},r.ChartEngine.prototype.calculateATR=function(t,e,i){var a,r,n,o,l,h;i||(i=t.dataSet),(a=t.state.calculations.atr)||(a=t.state.calculations.atr={}),s.t8u(),e||(e=20),r=[],a.accum&&(r=a.accum);for(var c=0;c<i.length;c++)if(o=i[c],n=c?i[c-1]:a.q1){if(l=Math.max(o.High-o.Low,Math.abs(o.High-n.Close),Math.abs(o.Low-n.Close)),r.length<e){if(r.push(l)==e){h=0;for(var u=0;u<r.length;u++)h+=r[u];s.G16(8),o.atr=s.l16(e,h)}}else o.atr=(n.atr*(e-1)+l)/e;o.trueRange=l}t.state.calculations.atr={accum:r,q1:n}},r.ChartEngine.prototype.calculateMedianPrice=function(t,e){var i;e||(e=t.dataSet);for(var a=0;a<e.length;++a)"h","l/2",(i=e[a])["hl/2"]=(i.High+i.Low)/2},r.ChartEngine.prototype.calculateTypicalPrice=function(t,e){var i;e||(e=t.dataSet);for(var a=0;a<e.length;++a)"h","lc/3",(i=e[a])["hlc/3"]=(i.High+i.Low+i.Close)/3},r.ChartEngine.prototype.calculateWeightedClose=function(t,e){var i;s.d8u(),e||(e=t.dataSet);for(var a=0;a<e.length;++a)(i=e[a])["hlcc/4"]=(i.High+i.Low+2*i.Close)/4},r.ChartEngine.prototype.calculateOHLC4=function(t,e){var i;s.d8u(),e||(e=t.dataSet);for(var a=0;a<e.length;++a)(i=e[a])["ohlc/4"]=(i.Open+i.High+i.Low+i.Close)/4},r.ChartEngine.prototype.currentQuote=function(t){var e;if(!this.chart.dataSet)return null;for(var i=this.chart.dataSet.length-1;i>=0;i--)if(this.chart.dataSet[i]){if(!t)return this.chart.dataSet[i];if((e=this.chart.dataSet[i][t])||0===e)return this.chart.dataSet[i]}return null},r.ChartEngine.prototype.mostRecentClose=function(t){var e,i;if(s.t8u(),!this.chart.dataSet)return null;for(var r=this.chart.dataSet.length-1;r>=0;r--)if("numbe","r",(e=this.chart.dataSet[r])&&(!t||(e=e[t])||0===e)){if(i=e.iqPrevClose,"object"==a(e)&&(e=e.Close),"number"==typeof e)return e;if("number"==a(i))return i}return null},r.ChartEngine.prototype.createDataSegment=function(t){var e,i,a,n,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S;if(e="creat",e+="eDataS",e+="egment",!this.runPrepend("createDataSegment",arguments)){for(var C in this.charts){i=this.charts[C],t&&(i=t),r.Comparison&&i.isComparison&&r.Comparison.createComparisonSegmentInner(this,i),a=i.dataSet,n=i.baseline,o=i.scroll,l=i.maxTicks,c=(h=this.layout).candleWidth,n.actualLevel=n.userLevel?n.userLevel:n.defaultLevel,u=n.includeInDataSegment&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars),p=i.dataSegment=[],m=a.length-1-o-1,g=i.defaultPlotField;for(var w=-1;w<o&&w<l;w++)m++,(-1!=w||u)&&(m<a.length&&m>=0?((d=a[m]).candleWidth=null,p.push(d),null===n.actualLevel&&w>=0&&(g&&"Close"!=g?(s.p16(45),(f=a[s.T16(m,"1")])&&(f[g]||0===f[g])&&(n.actualLevel=f[g])):(d.iqPrevClose||0===d.iqPrevClose)&&(n.actualLevel=d.iqPrevClose))):m<0&&p.push(null));if(i.segmentImage=null,(y=this.mainSeriesRenderer||{}).params&&y.params.volume){v=0,x=i.width-(l-p.length-1)*h.candleWidth;for(var T=0;T<p.length;T++)(d=p[T])&&(v+=d.Volume||1);s.p16(10),b=s.l16("0",0),i.segmentImage=[];for(var k=0;k<p.length;k++)d=p[k],i.segmentImage[k]={},S=null,d?(d.Volume?(d.candleWidth=x*d.Volume/v,S=b+d.candleWidth/2,b+=d.candleWidth):(d.candleWidth=c,s.G16(19),S=s.T16(2,c,b),b+=c),i.segmentImage[k]={tick:d.tick,candleWidth:d.candleWidth,leftOffset:S}):b+=c}if(t)break}i&&i.isComparison&&this.clearPixelCache(),this.positionCrosshairsAtPointer(),this.runAppend(e,arguments)}},r.ChartEngine.prototype.getDataSegment=function(t){var e,i,a;return t||(t=this.chart),(e=t.dataSegment)&&e.length?(i=0,a=e.length,this.pixelFromBar(i,t)<t.panel.left&&i++,this.pixelFromBar(a-1,t)>t.panel.right&&a--,e.slice(i,a)):[]},r.ChartEngine.prototype.setMasterData=function(t,e,i){var a,n,o,l,h;for("ch","a","r",s.t8u(),"t",e||(e=this.chart),this.marketFactory&&(a=this.marketFactory(e.symbolObject),this.setMarket(a,e)),i||(i={}),i.noCleanupDates||this.doCleanupDates(t,this.layout.interval),e.masterData=t,"chart"==e.name&&(this.masterData=t),o=null,n=0;t&&n<t.length;n++)"setMasterData : Missing DT and ","Date on masterData object",l=t[n],null===o&&("number"==typeof l.Close?o="Close":"number"==typeof l.Value&&(o="Value")),"Value"===o&&"number"==typeof l.Value&&(l.Close=l.Value),l.DT?("[object Date]"!=Object.prototype.toString.call(l.DT)&&(l.DT=new Date(l.DT)),l.Date&&17==l.Date.length||(l.Date=r.yyyymmddhhmmssmmm(l.DT))):l.Date?l.DT=r.strToDateTime(l.Date):console.log("setMasterData : Missing DT and Date on masterData object"),l.Volume&&"number"!=typeof l.Volume&&(l.Volume=parseInt(l.Volume,10)),t.length-n<50&&this.updateCurrentMarketData(l,e,null,{fromTrade:!0});for(n in e.calculateTradingDecimalPlaces&&(e.decimalPlaces=e.calculateTradingDecimalPlaces({stx:this,chart:e,symbol:e.symbolObject.symbol,symbolObject:e.symbolObject})),this.setDisplayDates(t),e.roundit=Math.pow(10,e.decimalPlaces),this.plugins)(h=this.plugins[n]).display&&h.setMasterData&&h.setMasterData(this,e)},r.ChartEngine.prototype.setMasterDataRender=function(t,e,i){i||(i=this.chart),i.symbol||(i.symbol=""),s.d8u(),this.setMasterData(e,i),e&&(i.endPoints={},e.length&&(i.endPoints={begin:e[0].DT,end:e[e.length-1].DT},i.symbol=t)),this.createDataSet(),this.initializeChart(),this.draw(),e&&e.length||(i.symbol=null,this.clear()),this.adjustPanelPositions()},r.ChartEngine.prototype.getSymbols=function(t){var e,i,a,n,o,l,h,c,u,d;for(var p in t||(t={}),e=[],a=this.layout,this.charts)for(var m in(l=this.charts[p]).symbolObject&&l.symbolObject.symbol&&e.push(g(l.symbol,l.symbolObject,a)),l.series)"include","-p","aramete","rs",(h=l.series[m].parameters).data&&!h.data.useDefaultQuoteFeed||(o=h.symbolObject,(i=g(n=h.symbol,o,a)).id=m,t["include-parameters"]&&(i.parameters=h),t["exclude-studies"]&&"study"==h.bucket||t["exclude-generated"]&&o.generator||e.push(i));function g(t,e,i){return s.d8u(),{symbol:t,symbolObject:e,periodicity:i.periodicity,interval:i.interval,timeUnit:i.timeUnit,setSpan:i.setSpan}}if(s.d8u(),t["breakout-equations"]){c={};for(var f=0;f<e.length;f++)if(n=e[f].symbol,this.isEquationChart(n)){if(u=r.formatEquation(n)){d=u.symbols;for(var y=0;y<d.length;y++)c[d[y]]=g(d[y],e[f].symbolObject,e[f])}}else c[n]=g(n,e[f].symbolObject,e[f]);for(var v in e=[],c)e.push(c[v])}return e},r.ChartEngine.prototype.setDisplayDate=function(t){var e,i,a;r.ChartEngine.isDailyInterval(this.layout.interval)||(e=t.DT,s.t8u(),i=1e3*e.getSeconds()+e.getMilliseconds(),n.Date&&this.displayZone&&(a=new n.Date(e.getTime(),this.displayZone),e=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes()),e=new Date(e.getTime()+i)),t.displayDate=e)},r.ChartEngine.prototype.setDisplayDates=function(t){var e;if(t&&!r.ChartEngine.isDailyInterval(this.layout.interval)){s.d8u();for(var i=0;i<t.length;i++)(e=t[i]).DT&&this.setDisplayDate(e)}},r.ChartEngine.prototype.setTimeZone=function(t,e){var i,a,r,o,l;if("prefe","re","nces",n.Date){for(var h in r=a=(i=new Date).getTimezoneOffset(),o=a,t&&(this.dataZone=t),this.dataZone&&(r=new n.Date(i,this.dataZone).getTimezoneOffset()),e&&(this.displayZone=e),this.displayZone&&(o=new n.Date(i,this.displayZone).getTimezoneOffset()),s.G16(46),this.timeZoneOffset=s.l16(r,a,o,a),this.charts)l=this.charts[h],this.setDisplayDates(l.masterData);this.preferences.timeZone=e,this.changeOccurred("preferences"),this.createDataSet()}else this.timeZoneOffset=0},r.ChartEngine.prototype.updateChartData=function(t,e,i){var a,n,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_;function R(){var e;s.t8u(),n=!0,i.useAsLastSale&&i.useAsLastSale.aggregatedVolume&&(o=!0),t.constructor===Array?(e=t[t.length-1],(t={}).DT=e.DT,t.Close=e.Close,t.Volume=e.Volume):t.Last&&(t.Close=t.Last,delete t.Last),t.DT&&"[object Date]"!=Object.prototype.toString.call(t.DT)&&(t.DT=new Date(t.DT)),t.DT&&"Invalid Date"!=t.DT||(t.DT=new Date),"tick"!=h.interval&&O(),t.Open=t.Close,t.High=t.Close,t.Low=t.Close}function L(){var i,a,r;if(i=null,a=0,l.length&&(i=c.getFirstLastDataRecord(l,u||e.defaultPlotField,!0))){if(t[t.length-1].DT<=i.DT)return;for(;a<t.length;a++){if(+t[a].DT==+i.DT){c.getFirstLastDataRecord([t[a]],u||e.defaultPlotField)&&(i=null);break}if(t[a].DT>i.DT)break}}r=t.slice(a),i&&r.unshift(u?i[u]:i),r=c.doCleanupGaps(r,e),i&&r.shift(),t=t.slice(0,a).concat(r)}function E(){c.createDataSet(null,null,i),c.draw(),c.updateChartAccessories(),c.streamParameters.count=0,c.streamParameters.timeout=-1}function O(){var a,n,o,u,d,p,m,g,f;if("m","on",s.d8u(),"th",r.Market&&e.market)if(a={market_tz:r.getFromNS(e,"market.market_def.market_tz",null)},"month"!=(n=h.interval)&&"week"!=n||(c.dontRoll||(n="day"),a=c.chart.market.market_def),o=new r.Market(a),u={begin:l&&l.length?l[l.length-1].DT:t.DT,interval:n,periodicity:1,timeUnit:h.timeUnit},p=(d=o.newIterator(u)).next(),l){if(t.DT<p){for(m=0,f=d.previous(),g=t.DT,i.appending=!0;g<f&&m<1e3;)i.appending=!1,f=d.previous(),m++;t.DT=f,i.updating=!i.appending}else if(t.DT>=p){for(m=0,g=t.DT;g>p&&m<1e3;)t.DT=p,p=d.next(),m++;i.appending=!0}}else t.DT=new Date(+d.previous())}if(a="upd",a+="ateChartD",a+="ata",i||(i={}),e||(e=this.chart),n=!1,o=!1,l=e.masterData,h=this.layout,this.dataZone,c=this,u=i.secondarySeries,m=r.isValidNumber,i.noCleanupDates||this.doCleanupDates(t,h.interval),(i.useAsLastSale||t.constructor==Object&&(t.Last||0===t.Last))&&R(),t&&t.constructor==Object&&(t=[t]),t&&t.length&&!this.runPrepend("appendMasterData",[t,e,i])&&!this.runPrepend(a,[t,e,i])&&(l||(l=[]),g=l.length-1,f=!1,i.fillGaps&&L(),t.length)){for(var I=0;I<t.length;I++){for(v=(y=t[I]).DT,x=y.Date,v&&"[object Date]"!=Object.prototype.toString.call(v)&&(y.DT=v=new Date(v)),v&&(x&&17==x.length||(y.Date=r.yyyymmddhhmmssmmm(y.DT))),v||(v=y.DT=r.strToDateTime(x)),!m(y.Close)&&m(y.Value)&&(y.Close=y.Value);g>=0&&g<l.length;){if((b=l[g].DT)||(b=r.strToDateTime(l[g].Date)),b.getTime()<=v.getTime()){if(f=!0,S=0,b.getTime()<v.getTime()){if(g<l.length-1&&(l[g+1].DT||r.strToDateTime(l[g+1].Date)).getTime()<=v.getTime()){g++;continue}S=1}if(i.deleteItems){S||z(g,v);break}"tick"==h.interval&&!1!==i.firstLoop&&(S=1),S||V(g,y),m(y.Close)&&(m(y.Open)||(y.Open=y.Close),C=Math.max(y.Open,y.Close),w=Math.min(y.Open,y.Close),(!m(y.High)||y.High<C)&&(y.High=C),(!m(y.Low)||y.Low>w)&&(y.Low=w)),y.Volume&&!m(y.Volume)&&(y.Volume=parseInt(y.Volume,10)),g+=S,u?(t.length-I<50&&this.updateCurrentMarketData(y,e,u,{fromTrade:!0}),"tick"==h.interval&&void 0===y.Close||(S&&(l.splice(g,0,{DT:y.DT}),this.setDisplayDate(l[g])),l[g][u]=y)):(t.length-I<50&&this.updateCurrentMarketData(y,e,null,{fromTrade:!0}),"tick"==h.interval&&void 0===y.Close||(l.splice(g,S?0:1,y),this.setDisplayDate(y)));break}g+=f?1:-1}g<0&&(u?(T="tic",T+="k",this.updateCurrentMarketData(y,e,u,{fromTrade:!0}),h.interval==T&&void 0===y.Close||(l.splice(0,0,{DT:y.DT}),this.setDisplayDate(l[0]),l[0][u]=y)):(k="t",k+="i",k+="c",k+="k",this.updateCurrentMarketData(y,e,null,{fromTrade:!0}),h.interval==k&&void 0===y.Close||(s.p16(1),l.splice(0,s.T16("0",492843296),y),this.setDisplayDate(y))),f=!0,g=0)}l.length&&(this.masterData=e.masterData=l),this.maxMasterDataSize&&(l=e.masterData=this.masterData=l.slice(-this.maxMasterDataSize)),D=u?this.getSeries({symbol:u,chart:e}):[e];for(var N=0;N<D.length;N++)(!(A=D[N]).endPoints.begin||A.endPoints.begin>t[0].DT)&&(A.endPoints.begin=t[0].DT),(!A.endPoints.end||A.endPoints.end<t[t.length-1].DT)&&(A.endPoints.end=t[t.length-1].DT),M=A.parameters&&A.parameters.field||e.defaultPlotField,(P=this.getFirstLastDataRecord(t,M,!0))&&(!A.lastQuote||A.lastQuote.DT<=P.DT)&&(A.lastQuote=P),u&&i.deleteItems&&(A.lastQuote=this.getFirstLastDataRecord(l,u,!0)[u]);for(var H in this.plugins)(F=this.plugins[H]).display&&F.appendMasterData&&F.appendMasterData(this,t,e);this.masterData&&this.masterData.length||(this.masterData=l),i.noCreateDataSet||(++(_=this.streamParameters).count>_.maxTicks||i.bypassGovernor?(clearTimeout(_.timeout),E()):-1==_.timeout&&(_.timeout=setTimeout(E,_.maxWait))),this.runAppend("appendMasterData",arguments),this.runAppend("updateChartData",arguments)}function V(t,a){var r,h,c;if(r=l[t],u&&(r=r[u]||{}),s.d8u(),null===a.Close)void 0!==r.Open&&(a.Open=null),void 0!==r.High&&(a.High=null),void 0!==r.Low&&(a.Low=null),void 0!==r.Volume&&(a.Volume=null);else{if(h="O",h+="p",h+="e",h+="n",n?(a.Volume&&(a.Volume=parseInt(a.Volume,10)),o||(a.Volume+=r.Volume)):!m(a.Volume)&&r.Volume&&(a.Volume=r.Volume),!i.allowReplaceOHL){if(m(r.Open)&&(a.Open=r.Open),m(r.High)&&m(a.High)){-1715959356,-1139238027,c=2;for(var g=1;-1715959356!==s.g5l(g.toString(),g.toString().length,86051);g++)r.High<a.High&&(a.High=r.High),c+=2;-1139238027!==s.g5l(c.toString(),c.toString().length,12825)&&r.High>a.High&&(a.High=r.High)}m(r.Low)&&m(a.Low)&&r.Low<a.Low&&(a.Low=r.Low)}for(d in["Close",h,"High","Low","Bid","Ask"].forEach((function(t){s.d8u(),m(a[t])||(a[t]=r[t])})),e.series)p=e.series[d].parameters.symbolObject.symbol,void 0===a[p]&&void 0!==r[p]&&(a[p]=r[p])}}function z(t,i){var a,r;if(s.d8u(),u)delete l[t][u],c.cleanupGaps&&(a={DT:i,Close:null},"gap"!=c.cleanupGaps&&l[t-1]&&l[t-1][u]&&(a.Close=l[t-1][u].Close,a.High=a.Low=a.Open=a.Close,s.G16(10),a.Volume=s.l16("0",0)),l[t][u]=a);else{for(d in"g","a","p",a={DT:(r=l.splice(t,1)[0]).DT,Close:null,needed:!1},e.series)void 0!==r[p=e.series[d].parameters.symbolObject.symbol]&&(a[p]=r[p],delete a.needed);c.cleanupGaps&&"gap"!=c.cleanupGaps&&(delete a.needed,"gap"!=c.cleanupGaps&&l[t-1]&&(a.Close=l[t-1].Close,a.High=a.Low=a.Open=a.Close,a.Volume=0)),!1!==a.needed&&(l.splice(t,0,a),c.setDisplayDate(a))}}},r.ChartEngine.prototype.updateCurrentMarketData=function(t,e,i,a){var n,s,o,l,h,c,u,d,p,m,g,f;if(n="updateCurr",n+="entMar",n+="ket",n+="Data",s="Ask",s+="L2",o="L",o+="a",o+="s",o+="t",l="ti",l+="c",l+="k",t&&t.DT){if(e||(e=this.chart),h=a&&a.fromTrade,c=t.DT,!h&&this.layout.interval!=l&&e.market){if(e.market.market_def){if(!e.market.isMarketDate(t.DT))return;if(!r.ChartEngine.isDailyInterval(this.layout.interval)&&null===e.market.getSession(t.DT))return}u={begin:t.DT,interval:this.layout.interval,periodicity:this.layout.periodicity,timeUnit:this.layout.timeUnit},d=new r.Market(e.market.market_def),this.extendedHours&&this.extendedHours.filter&&d.enableAllAvailableSessions(),(p=d.newIterator(u)).next(),t.DT=p.previous()}this.runPrepend("updateCurrentMarketData",arguments)||(m=e.currentMarketData,i&&(m[i]||(m[i]={}),m=m[i]),[o,"Bid","Ask"].forEach((function(e){t[e]&&"number"==typeof t[e]&&(!m[e]||!m[e].DT||m[e].DT<=t.DT)&&("S","ize",m[e]={DT:t.DT,Price:t[e],Size:t[e+"Size"],Timestamp:c})})),["BidL2",s].forEach((function(e){t[e]&&t[e]instanceof Array&&(!m[e]||!m[e].DT||m[e].DT<=t.DT)&&(m[e]={DT:t.DT,Price_Size:t[e],Timestamp:c})})),t.Close&&(!m.Last||m.Last.DT<=t.DT)&&(g=t.Close,((f=a&&a.finalClose)||0===f)&&(g=f),m.Last={DT:t.DT,Price:g,Size:void 0===t.LastSize&&"tick"==this.layout.interval?t.Volume:t.LastSize,Timestamp:t.LastTime||c}),m.touched=new Date,h||delete t.Last,this.runAppend(n,arguments))}},r.ChartEngine.prototype.clearCurrentMarketData=function(t,e){var i,a,r,n,s;if(i="clearCurrentMar",i+="ketData",a="clearCurrent",a+="MarketData",!this.runPrepend(a,arguments)){if(n=[],t)n.push(t);else for(r in this.charts)n.push(this.charts[r]);for(r=0;r<n.length;r++)if(s=n[r].currentMarketData,e)delete s[e];else for(var o in s)s[o]=void 0;this.runAppend(i,arguments)}}},D=function(t){var e;(e=t.CIQ).ChartEngine.prototype.changeOccurred=function(t){var e;e={stx:this,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,layout:this.layout,drawings:this.drawingObjects},"theme"==t&&this.dispatch("theme",e),this.currentlyImporting||("layout"==t?this.dispatch("layout",e):"vector"==t?this.dispatch("drawing",e):"preferences"==t&&this.dispatch("preferences",e))},e.ChartEngine.prototype.startAsyncAction=function(){W.t8u(),this.pendingAsyncs||(this.pendingAsyncs=[]),this.pendingAsyncs.push(!0)},e.ChartEngine.prototype.registerChartDrawnCallback=function(t){return this.asyncCallbacks||(this.asyncCallbacks=[]),this.asyncCallbacks.push(t),{fc:t}},e.ChartEngine.prototype.unregisterChartDrawnCallback=function(t){W.t8u();for(var e=0;e<this.asyncCallbacks.length;e++)if(this.asyncCallbacks[e]==t.fc)return void this.asyncCallbacks.splice(e,1)},e.ChartEngine.prototype.makeAsyncCallbacks=function(){if(this.asyncCallbacks&&(W.d8u(),!this.pendingAsyncs||!this.pendingAsyncs.length))for(var t=0;t<this.asyncCallbacks.length;t++)this.asyncCallbacks[t]()},e.ChartEngine.prototype.completeAsyncAction=function(){this.pendingAsyncs.pop(),this.makeAsyncCallbacks()},e.ChartEngine.prototype.addDomEventListener=function(t,e,i,a){W.t8u(),t.addEventListener(e,i,a),this.eventListeners.push({element:t,event:e,function:i,options:a})},e.ChartEngine.prototype.addEventListener=function(t,e){var i;if(W.d8u(),"*"===t)for(var a in this.callbackListeners)this.callbackListeners[a].push(e);else if(t instanceof Array)for(var r=0;r<t.length;r++)this.callbackListeners[t[r]].push(e);else{if(!(i=this.callbackListeners[t]))throw"At","tempted to add an in","valid lis","tener.",new Error("Attempted to add an invalid listener.");i.push(e)}return{type:t,cb:e}},e.ChartEngine.prototype.removeEventListener=function(t,e){var i,r;if("ob","ject",W.d8u(),t&&"object"==a(t)||(t={type:t,cb:e}),i=function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return void t.splice(i,1)},r=this.callbackListeners,"*"!==t.type){if(!r[t.type])throw new Error("Attempted to remove an invalid listener.");i(r[t.type],t.cb)}else for(var n in r)i(r[n],t.cb)},e.ChartEngine.prototype.dispatch=function(t,e){var i;if(W.t8u(),i=this.callbackListeners[t])for(var a=0;a<i.length;a++)if(!0===i[a].call(this,e))return!0;if(i=this.callbackListeners["*"])for(var r=0;r<i.length;r++)if(!0===i[r].call(this,e))return!0;return!1},e.ChartEngine.prototype.updateListeners=function(t){var e;for(var i in this.plugins)(e=this.plugins[i]).display&&e.listener&&e.listener(this,t)}},A=function(t){var e;(e=t.CIQ).ChartEngine.prototype.prepend=function(t,i){var a,r;return W.G16(4),a=W.T16(t,"prepend"),this instanceof e.ChartEngine?(r=this.hasOwnProperty(a)?this[a]:[],this[a]=[i].concat(r)):(r=e.ChartEngine.prototype[a]||[],e.ChartEngine.prototype[a]=[i].concat(r)),{method:a,func:i}},e.ChartEngine.prototype.append=function(t,i){var a,r;return W.G16(4),a=W.T16(t,"append"),this instanceof e.ChartEngine?(r=this.hasOwnProperty(a)?this[a]:[],this[a]=r.concat(i)):(r=e.ChartEngine.prototype[a]||[],e.ChartEngine.prototype[a]=r.concat(i)),{method:a,func:i}},e.ChartEngine.prototype.runPrepend=function(t,i,a){var r,n,s;if(W.G16(4),r=W.T16(t,"prepend"),!(n=(n=this.hasOwnProperty(r)?this[r]:[]).concat(e.ChartEngine.prototype[r]||[])).length)return!1;a||(a=this);for(var o=0;o<n.length;o++)if(s=n[o].apply(a,i))return s;return!1},e.ChartEngine.prototype.runAppend=function(t,i,a){var r,n,s;if("a","pp","e","nd",W.G16(4),r=W.T16(t,"append"),n=(n=this.hasOwnProperty(r)?this[r]:[]).concat(e.ChartEngine.prototype[r]||[]),W.d8u(),!n.length)return!1;a||(a=this);for(var o=0;o<n.length;o++)if(s=n[o].apply(a,i))return s;return!1},e.ChartEngine.prototype.removeInjection=function(t){var i,a;if(i=t.method,W.t8u(),this instanceof e.ChartEngine){if(!this[i])return;for(a=0;a<this[i].length;a++)if(this[i][a]==t.func)return void this[i].splice(a,1)}else{if(!e.ChartEngine.prototype[i])return;for(a=0;a<e.ChartEngine.prototype[i].length;a++)if(e.ChartEngine.prototype[i][a]==t.func)return W.G16(29),void e.ChartEngine.prototype[i].splice(a,W.T16(1,"1"))}},e.ChartEngine.prototype.remove=function(t){var i,a=W;if(a.d8u(),this instanceof e.ChartEngine){a.G16(4),delete this[a.l16(t,"append")],-1489514600,-1549974404,i=2;for(var r=1;-1489514600!==a.g5l(r.toString(),r.toString().length,1512);r++)a.G16(4),delete this[a.l16(t,"prepend")],i+=2;-1549974404!==a.g5l(i.toString(),i.toString().length,33752)&&(a.G16(8),this[a.T16(t,"")])}else"p","repe","n","d",a.G16(4),delete e.ChartEngine.prototype[a.l16(t,"append")],a.G16(4),delete e.ChartEngine.prototype[a.T16(t,"prepend")]}},M=function(t){var e,i;e=t.CIQ,i=t.timezoneJS,e.ChartEngine.prototype.convertToDataZone=function(t){var i;return(t||0===t)&&this.dataZone&&(i=e.convertTimeZone(t,null,this.dataZone),t=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())),W.d8u(),t},e.ChartEngine.prototype.debug=function(){},e.ChartEngine.prototype.fps=function(t,i){var a,r,n,s=W;s.t8u(),t=t||5,a=(new Date).getTime(),s.p16(29),r=s.T16(0,"0"),n=this,s.p16(21),console.log(s.l16(" seconds","Running fps() for ",t)),function o(){var l,h;if((l=((new Date).getTime()-a)/1e3)>t)return s.p16(8),h=s.T16(l,r),s.G16(4),console.log(s.l16(h,"FPS=")),void(i&&i(h));n.draw(),r++,e.ChartEngine.useAnimation?requestAnimationFrame(o):setTimeout(o,0)}()},e.ChartEngine.htmlControls={mSticky:'<div class="stx_sticky"> <span class="mStickyInterior"></span></div>',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div></div>'},e.ChartEngine.prototype.setChartType=function(t){var e,i;W.d8u(),e=this.layout,i=this.chart,"ohlc"!=e.aggregationType&&("o","hl","c",e.aggregationType="ohlc",i.canvas&&this.createDataSet()),e.chartType=t,this.setMainSeriesRenderer(),i.defaultChartStyleConfig={type:t},this.displayInitialized&&this.draw(),this.changeOccurred("layout")},e.ChartEngine.prototype.setChartScale=function(t){t||(t="linear"),W.t8u(),this.layout.chartScale=t,this.chart.canvas&&this.draw(),this.changeOccurred("layout")},e.ChartEngine.prototype.setAdjusted=function(t){this.layout.adj=t,W.t8u(),this.chart.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},e.ChartEngine.prototype.padOutPrice=function(t,e){var i,a,r,n,s=W;return 0===t||t&&"number"==typeof t?(e||0===e||(e=t),s.G16(4),a=0,(i=s.T16(e,"")).indexOf(".")>-1&&(a=i.substring(i.indexOf(".")).length-1),e>=1e3?(s.p16(29),a=Math.max(a,s.l16(0,"0"))):a=e<2?Math.max(a,4):Math.max(a,2),(r=this.internationalizer)?(a>=(n=r.priceFormatters.length)&&(s.G16(47),a=s.T16(2147483647,"1",n)),t=r.priceFormatters[a].format(t)):t=t.toFixed(a),t):""},e.ChartEngine.prototype.formatPrice=function(t,e){var i,a,r;return W.d8u(),0===t||t&&void 0!==t?(e||(e=this.currentPanel),e||(e=this.chart.panel),e?((i=e.decimalPlaces)||0===i||(i=e.chart.decimalPlaces),i||0===i?((a=this.internationalizer)?(i>=(r=a.priceFormatters.length)&&(W.G16(10),i=W.T16(r,1)),t=a.priceFormatters[i].format(t)):t=t.toFixed(i),t):t.toString()):t.toString()):""},e.ChartEngine.prototype.determineMinMax=function(t,i,a,r,n,s,o,l,h){var c,u,d,p,m,g,f,y,v,x,b;c=-1*Number.MAX_VALUE,u=Number.MAX_VALUE,d=!1,p=t.length,h||(h=[]),m=[],n&&(p=n);for(var S=0;S<=p+1;S++)if(i.length&&(g=S==p?this.getPreviousBar(this.chart,i[0],0):S==p+1?this.getNextBar(this.chart,i[0],p-1):t[S]),g){if(!r)if(g.transform)d=!0,g=g.transform;else if(d)continue;f=0;for(var C=0;C<i.length;C++)if(y=e.existsInObjectChain(g,i[C])){"number"==typeof(v=y.obj[y.member])&&(v=[v]);for(var w=0;w<v.length;w++)x=v[w],s&&x instanceof Array&&(x=x[0]),(x||0===x)&&(!0===a||a instanceof Array&&a.indexOf(i[C])>-1?((f+=x)>c&&(c=f),f<u&&(u=f)):(x>c&&(c=x),x<u&&(u=x),m.push({value:x,quote:g})))}(!0===a||a instanceof Array&&a.indexOf(i[C])>-1)&&m.push({value:f,quote:g})}return b=[u,c],h.forEach((function(t){W.d8u(),b=t(m,o,l)||b})),b[1]==-1*Number.MAX_VALUE&&(b[1]=0),b[0]==Number.MAX_VALUE&&(b[0]=0),b},e.ChartEngine.prototype.initializeDisplay=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C=W;if(i="C",i+="los",i+="e",a="initialize",a+="D",a+="is",a+="play",!this.runPrepend(a,arguments)){for(var w in r=[],n=[],s=!1,o=this,l=[i,"Open","High","Low"],h=[t.defaultPlotField||"Close"],u=null,d=Math.floor((t.width-this.micropixels)/this.layout.candleWidth),t.scroll>t.maxTicks&&t.maxTicks>d+1&&(u=t.dataSegment.length-1),p=[],this.panels){p=(m=this.panels[w]).yaxisLHS.concat(m.yaxisRHS);for(var T=0;T<p.length;T++)g=p[T],r=[],n=[],f=t.transformFunc&&g==t.panel.yAxis,k(g,m),this.currentlyImporting||g.renderers.length||g.studies.length?(c=this.mainSeriesRenderer&&this.mainSeriesRenderer.determineMax?this.mainSeriesRenderer.determineMax(t.dataSegment,r,n,!f,u,s,m,g):this.determineMinMax(t.dataSegment,r,n,!f,u,s,m,g),this.mainSeriesRenderer&&t.yAxis==g&&(this.mainSeriesRenderer.highLowBars||(y="moun",y+="t",y+="a",y+="in",v=this.mainSeriesRenderer||{},t.panel==m&&v.params&&v.params.baseline&&v.params.type!=y&&((x=t.baseline.actualLevel)||0===x)&&(f&&(x=t.transformFunc(this,t,x)),b=Math.max(x-c[0],c[1]-x),this.repositioningBaseline?c=[t.lowValue,t.highValue]:(C.G16(10),c[0]=C.l16(x,b),C.G16(10),c[C.T16("1",0)]=C.l16(b,x,C.G16(4)))))),C.p16(1),g.lowValue=c[C.l16("0",801620224)],C.G16(1),g.highValue=c[C.T16("1",1127614528)],g==t.panel.yAxis&&(t.lowValue=g.lowValue,t.highValue=g.highValue)):this.deleteYAxisIfUnused(m,g)}S=t.state.aggregation,C.d8u(),S&&S.box&&(t.lowValue-=S.box/2,t.highValue+=S.box/2),this.runAppend("initializeDisplay",arguments)}function k(i,a){var c,u,d,p,m,g,f,y,v;if(c=!1,(u=o.layout&&o.layout.studies&&o.layout.studies[i.name])&&(!a||a.name==u.panel)){for(var x in u.outputMap)r.push(x);u.study&&(u.study.renderer?r=r.concat(e.createObjectChainNames(x,l)):u.study.seriesFN||(r=r.concat(e.createObjectChainNames(x,h))));for(var b=0;b<=2;b++)"_","hi","st",r.push(u.name+"_hist"+(b||""));c=!0}if(a){for(var S in i.studies=[],i.renderers=[],c&&i.studies.push(i.name),t.seriesRenderers)if(m=(p=(d=t.seriesRenderers[S]).params).panel,(p.yAxis||!o.panels[m]||o.panels[m].yAxis)==i&&m==a.name){g=d.highLowBars?l:h,s=d.bounded;for(var C=0;C<d.seriesParams.length;C++)(f=d.seriesParams[C]).hidden||(f.subField?y=e.createObjectChainNames(f.symbol,[f.subField]).concat(f.symbol):f.symbol?y=e.createObjectChainNames(f.symbol,g).concat(f.symbol):f.field?y=f.field:i==t.panel.yAxis&&(y=g),r=r.concat(y),d.useSum&&(n=n.concat(y)));i.renderers.push(S)}for(var w in o.overlays)(v=o.overlays[w]).panel==a.name&&v.name!=i.name&&v.getYAxis(o)==i&&(i.studies.push(v.name),t.includeOverlaysInMinMax&&k({name:v.name}))}}},e.ChartEngine.prototype.setMarket=function(t,i){if(e.Market)for(var a in i||(i=this.chart),i.market=new e.Market(t),this.layout.marketSessions)i.market.disableSession(a,this.layout.marketSessions[a])},e.ChartEngine.prototype.setMarketFactory=function(t){W.t8u(),this.marketFactory=t},e.ChartEngine.prototype.setResizeTimer=function(t){var i,a;this.resizeDetectMS=t,this.resizeHandle=e.resizeObserver(this.chart.container,(i=this,W.d8u(),a=function(){i.chart.canvas&&(e.isAndroid||i.chart.canvas.height==Math.floor(i.devicePixelRatio*i.chart.container.clientHeight)&&i.chart.canvas.width==Math.floor(i.devicePixelRatio*i.chart.container.clientWidth)||i.resizeChart())},function(){W.t8u(),"undefined"!=typeof ResizeObserver?e.ChartEngine.useAnimation?requestAnimationFrame(a):setTimeout(a,0):a()}),this.resizeHandle,t)},e.ChartEngine.prototype.getRenderedItems=function(){var t,i,a,r,n,s,o,l;if("C","lo","se",t=this.chart,i=this.currentPanel){for(var h in a=["Open","High","Low","Close"],r=["Close"],n=[],this.overlays)this.overlays[h].panel===i.name&&(n=n.concat(Object.keys(this.overlays[h].outputMap)));for(var c in t.seriesRenderers)if((s=t.seriesRenderers[c]).params.panel==i.name)for(var u in s.seriesParams)o=s.seriesParams[u],l=s.highLowBars?a:r,o.subField?n=n.concat(e.createObjectChainNames(o.symbol,[o.subField])).concat(o.symbol):o.symbol?n=n.concat(e.createObjectChainNames(o.symbol,l)).concat(o.symbol):o.field?n.push(o.field):i==t.panel&&(n=n.concat(l));return n}},e.ChartEngine.prototype.setTransform=function(t,e,i){t.transformFunc=e,t.untransformFunc=i},e.ChartEngine.prototype.unsetTransform=function(t){delete t.transformFunc,delete t.untransformFunc,W.d8u();for(var e=0;t.dataSet&&e<t.dataSet.length;e++)t.dataSet[e].transform=null},e.ChartEngine.prototype.isEquationChart=function(t){return!(!t||"="!=t[0])&&(!(!this.allowEquations||!e.fetchEquationChart)||("Error, equation chart option requires"," equati","onsAdvan","ced.js",console.warn("Error, equation chart option requires equationsAdvanced.js"),!1))},e.ChartEngine.prototype.correctIfOffEdge=function(t){var e,i,a,r,n,s,o,l,h,c,u=W;if(e="correct",e+="IfOffEd",e+="ge",!this.runPrepend("correctIfOffEdge",arguments)){for(var d in this.charts)a=(i=this.charts[d]).dataSet,r=i.maxTicks,n=this.layout,s=this.minimumLeftBars,o=Math.min(s,r),i.allowScrollPast?(u.G16(10),l=u.T16(r,o),o>a.length&&(l=r-a.length),i.scroll-l>=a.length&&(i.scroll=a.length+l-1,this.micropixels=0),i.scroll<=o&&(i.scroll=o,u.G16(22),this.micropixels=u.T16(2147483647,"0"))):(i.scroll<o&&(i.scroll=o),i.scroll>a.length&&(i.scroll=a.length)),!1===i.allowScrollFuture&&(h=this.getLabelOffsetInPixels(i,n.chartType)+n.candleWidth*i.whiteSpaceFutureTicks,c=r-Math.round(h/n.candleWidth)-1,(this.micropixels<0?i.scroll-1:i.scroll)<c&&(i.scroll=c,this.micropixels=0));this.runAppend(e,arguments)}},e.ChartEngine.prototype.getStartDateOffset=function(){for(var t=0;t<this.chart.dataSegment.length;t++)if(this.chart.dataSegment[t])return t;return 0},W.d8u(),e.ChartEngine.prototype.setStartDate=function(t){for(var e=0;e<this.chart.dataSet.length;e++)if(this.chart.dataSet[e].DT.getTime()==t.getTime())return this.chart.scroll=this.chart.dataSet.length-e,void this.draw()},e.ChartEngine.prototype.clearPixelCache=function(){var t,e;for(var i in this.panels)(t=this.panels[i]).cacheHigh=null,t.cacheLow=null,t.cacheLeft=1e6,t.cacheRight=-1;for(var a in this.charts)if((e=this.charts[a]).dataSet)for(var r=0;r<e.dataSet.length;r++)e.dataSet[r].cache={}},e.ChartEngine.prototype.adjustBackingStore=function(t,i){var a,r,n,s,o=W;if(this.devicePixelRatio=window.devicePixelRatio||1,this.devicePixelRatio<1&&(this.devicePixelRatio=1),o.t8u(),a=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,r=this.devicePixelRatio/a,!this.useBackingStore)return o.p16(10),void(this.devicePixelRatio=this.adjustedDisplayPixelRatio=o.l16("1",0));(!e.isAndroid||e.is_chrome||e.isFF)&&("p","x",n=t.width,s=t.height,o.p16(0),t.width=o.T16(n,r),o.p16(0),t.height=o.T16(s,r),o.p16(4),t.style.width=o.l16("px",n),o.G16(4),t.style.height=o.T16("px",s),i.scale(r,r),this.adjustedDisplayPixelRatio=r,this.backing={ratio:r,width:t.width,height:t.height,styleWidth:n,styleHeight:s})},e.ChartEngine.prototype.reconstituteBackingStore=function(){var t,e;this.useBackingStore&&(t=[this.chart.canvas],this.useBackgroundCanvas&&t.push(this.chart.backgroundCanvas),e=this.backing,t.forEach((function(t){t.width!=e.width&&(t.width=e.width,t.height=e.height,W.d8u(),t.context.scale(e.ratio,e.ratio))})),this.adjustedDisplayPixelRatio=e.ratio,this.draw())},e.ChartEngine.prototype.disableBackingStore=function(){var t,e;this.useBackingStore&&(t=[this.chart.canvas],this.useBackgroundCanvas&&t.push(this.chart.backgroundCanvas),e=this.backing,t.forEach((function(t){t.width!=e.styleWidth&&(t.width=e.styleWidth,t.height=e.styleHeight,W.p16(0),t.context.scale(1,W.T16("1",1)))})),this.adjustedDisplayPixelRatio=1,W.t8u(),this.draw())},e.ChartEngine.prototype.getBackgroundCanvas=function(t){return t||(t=this.chart),this.useBackgroundCanvas?t.backgroundCanvas:t.canvas},e.ChartEngine.prototype.resizeCanvas=function(){var t,e,i,a,r,n,s,o;for(var l in W.d8u(),t=this.chart.canvas,e=this.chart.context,t&&e&&(this.floatCanvas.height=this.chart.tempCanvas.height=this.chart.backgroundCanvas.height=t.height=this.chart.container.clientHeight,this.floatCanvas.width=this.chart.tempCanvas.width=this.chart.backgroundCanvas.width=t.width=this.chart.container.clientWidth,this.adjustBackingStore(t,e),this.adjustBackingStore(this.chart.tempCanvas,this.chart.tempCanvas.context),this.adjustBackingStore(this.floatCanvas,this.floatCanvas.context),this.adjustBackingStore(this.chart.backgroundCanvas,this.chart.backgroundCanvas.context)),i=this.container.getBoundingClientRect(),this.top=i.top,this.left=i.left,this.canvasWidth=this.chart.canvasWidth=this.chart.container.clientWidth,this.right=this.left+this.canvasWidth,this.height=this.chart.container.clientHeight,this.width=this.right-this.left,0!==this.width||this.container.dimensionlessCanvas||console.log("warning: zero width chart. Check CSS for chart container."),this.bottom=this.top+this.height,this.calculateYAxisPositions(),this.chart.canvasRight=this.right,this.chart.canvasHeight=this.height,void 0===(a=this.layout.candleWidth)&&(W.p16(22),a=W.T16(2147483647,"8")),this.charts){r=this.charts[l],this.setCandleWidth(a,r),r.scroll<r.width/a&&(r.scroll=Math.floor(r.width/a),n=Math.round(this.preferences.whitespace/this.layout.candleWidth),r.scroll-=n),s=10;try{o=2*e.measureText("10:00").width}catch(t){o=100}for(;s>1&&!(this.chart.width/o>s);)s/=1.5;r.xAxis.autoComputedTickSizePixels=Math.round(this.chart.width/s),r.xAxis.autoComputedTickSizePixels<1&&(r.xAxis.autoComputedTickSizePixels=1)}},e.ChartEngine.prototype.setCandleWidth=function(t,e){e||(e=this.chart),t=this.constrainCandleWidth(t),this.layout.candleWidth=t,e.maxTicks=Math.round(e.width/t)+1},e.ChartEngine.prototype.constrainCandleWidth=function(t){var e,i,a;return e=this.minimumCandleWidth,i=this.maximumCandleWidth,a=this.animations.zoom,e&&t<e&&(t=e,a&&a.running&&a.stop()),i&&t>i&&(t=i,a&&a.running&&a.stop()),t},e.ChartEngine.prototype.resizeChart=function(t){var e,i;e="res",e+="i",e+="zeChart",this.runPrepend(e,arguments)||(!1!==t&&(t=!0),t&&this.preAdjustScroll(),i=this.chart.canvasHeight,W.d8u(),this.resizeCanvas(),t&&this.postAdjustScroll(),(this.displayInitialized||0!==this.chart.canvasHeight&&0===i)&&(this.adjustPanelPositions(),this.draw()),this.doDisplayCrosshairs(),this.updateChartAccessories(),this.runAppend("resizeChart",arguments))},e.ChartEngine.prototype.clear=function(){var t;for(var i in this.displayInitialized=!1,this.layout.studies)t=this.layout.studies[i],e.getFn("Studies.removeStudy")(this,t);this.controls.chartControls&&(this.controls.chartControls.style.display="none"),this.chart.panel.title.innerHTML="",W.d8u(),this.chart.panel.title.appendChild(document.createTextNode(this.chart.panel.display))},e.ChartEngine.prototype.fillScreen=function(){var t,e,i,a,r;t=this.chart,e=this.layout.candleWidth,i=t.width-this.preferences.whitespace,(a=t.dataSet.length)*e>=i?this.draw():(this.mainSeriesRenderer&&this.mainSeriesRenderer.standaloneBars||a--,W.G16(8),r=W.l16(a,i),this.setCandleWidth(r,t),this.home({maintainWhitespace:!0}))},e.ChartEngine.prototype.setMaxTicks=function(t,e){var i;e||(e={}),(t=Math.round(t))<2&&(t=2),i=e.padding?e.padding:0,this.layout.candleWidth=(this.chart.width-i)/t,this.layout.candleWidth||(this.layout.candleWidth=8),this.chart.maxTicks=Math.round(this.chart.width/this.layout.candleWidth-.499),(e.padding||0===e.padding)&&(W.p16(4),this.chart.scroll=W.T16(1,t))},e.ChartEngine.prototype.initializeChart=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S;if(i="canva",i+="s",a="canv",a+="as",!this.runPrepend("initializeChart",arguments)){for(var C in(r=this.chart).symbolObject.symbol||(r.symbolObject.symbol=r.symbol),this.locale&&this.setLocale(this.locale),!this.displayZone&&e.ChartEngine.defaultDisplayTimeZone&&this.setTimeZone(null,e.ChartEngine.defaultDisplayTimeZone),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.micropixels=0,t?r.container=t:t=r.container,t.stx=this,t.CIQRegistered||(t.CIQRegistered=!0,e.ChartEngine.registeredContainers.push(t)),this.registerHTMLElements&&this.registerHTMLElements(),n=r.canvas,s=r.backgroundCanvas,o=r.tempCanvas,l=this.floatCanvas,h=r.canvasShim,n&&document.createElement("canvas").getContext?(n.id||(t.removeChild(n),r.canvas=null),o&&!o.id&&(t.removeChild(o),r.tempCanvas=null),l&&!l.id&&(t.removeChild(l),this.floatCanvas=null),s&&!s.id&&(t.removeChild(s),r.backgroundCanvas=null)):this.setCandleWidth(this.layout.candleWidth),W.d8u(),r.backgroundCanvas||(s=r.backgroundCanvas=document.createElement(a)),t.appendChild(s),A(s),r.canvasShim||(h=r.canvasShim=document.createElement("div")),h.className="stx-canvas-shim",t.appendChild(h),r.canvas||(n=r.canvas=document.createElement(i)),t.appendChild(n),A(n),r.context=n.context,r.tempCanvas||(o=r.tempCanvas=document.createElement("canvas")),t.appendChild(o),A(o,!0),this.floatCanvas||(l=this.floatCanvas=document.createElement("canvas")),t.appendChild(l),A(l,!0),this.resizeCanvas(),e.isAndroid&&(o.ontouchstart=l.ontouchstart=function(t){t.preventDefault&&t.preventDefault()}),c=this.panels,r.panel.display=r.symbol,r.symbolDisplay&&(r.panel.display=r.symbolDisplay),this.adjustPanelPositions(),r.panel=c[r.name],c){u=c[C].yaxisLHS.concat(c[C].yaxisRHS);for(var w=0;w<u.length;w++)u[w].height=c[C].yAxis.height,this.calculateYAxisMargins(u[w])}var T;for(var k in this.initialWhitespace=this.preferences.whitespace,r.dataSet&&r.dataSet.length>0&&(r.scroll=Math.floor(r.width/this.layout.candleWidth),d=Math.round(this.preferences.whitespace/this.layout.candleWidth),r.scroll-=d),e.touchDevice&&(p=".overlayE",p+="dit",m=t.querySelector(p),g=t.querySelector(".overlayTrashCan"),f=t.querySelector(".vectorTrashCan"),y=function(t,e,i){return function(a){t.deleteHighlighted(e,i)}},m?(e.safeClickTouch(m,y(this,!0,!0)),g&&e.safeClickTouch(g,y(this,!1))):g&&e.safeClickTouch(g,y(this,!0)),f&&e.safeClickTouch(f,y(this,!0))),this.manageTouchAndMouse&&this.registerTouchAndMouseEvents(),this.handleMouseOut&&(t.onmouseout=(T=this,W.t8u(),function(t){W.t8u(),T.handleMouseOut(t)}),e.smartHover()),this.abortDrawings&&this.abortDrawings(),this.undoStamps=[],c)(v=c[k]).markerHolder&&(t.removeChild(v.markerHolder),v.markerHolder=null);for(var D in this.plugins)(x=this.plugins[D]).display&&x.initializeChart&&x.initializeChart(this);this.resizeListenerInitialized||(b=this,this.resizeListenerInitialized=!0,S=function(){return function(t){W.t8u(),b.resizeChart()}},this.addDomEventListener(window,"resize",S(),!0)),r.baseline.userLevel&&(r.baseline.userLevel=null),this.setResizeTimer(this.resizeDetectMS),this.runAppend("initializeChart",arguments)}function A(t,e){var i;t.context=t.getContext("2d"),t.context.lineWidth=1,(i=t.style).position="absolute",i.left="0px",e&&(i.display="none")}},e.ChartEngine.prototype.destroy=function(){var t,i,a,r;this.setResizeTimer(0),this.quoteDriver&&this.quoteDriver.die(),this.styles={};for(var n=0;n<this.eventListeners.length;n++)(t=this.eventListeners[n]).element.removeEventListener(t.event,t.function,t.options);this.touchAndMouseEventsRegistered=!1,this.eventListeners=[],this.streamParameters.timeout&&clearTimeout(this.streamParameters.timeout),(a=(i=e.ChartEngine.registeredContainers).indexOf(this.chart.container))>-1&&i.splice(a,1),this.slider&&(r=i.indexOf(this.slider.slider.chart.container))>-1&&i.splice(r,1)},e.ChartEngine.prototype.preAdjustScroll=function(t){t||(t=this.chart),this.previousAdjust={chart:t,scroll:t.scroll,maxTicks:t.maxTicks}},e.ChartEngine.prototype.postAdjustScroll=function(){var t;this.previousAdjust&&((t=this.previousAdjust.chart).scroll=this.previousAdjust.scroll+(t.maxTicks-this.previousAdjust.maxTicks),this.displayInitialized&&this.draw())},e.ChartEngine.prototype.translateIf=function(t){return this.translationCallback?this.translationCallback(t):t},e.ChartEngine.prototype.doCleanupDates=function(t,a){var r,n,s,o,l;if(W.d8u(),t&&t.length)for(var h=0;h<t.length;h++)"[","object Stri","ng]",((n=(r=t[h]).DT)||r.Date)&&(r.DT&&"[object String]"==Object.prototype.toString.call(n)&&n.length<=10?(n=new Date(n)).setMinutes(n.getMinutes()+n.getTimezoneOffset()):(s=!0,r.DT||(n=e.strToDateTime(r.Date),r.Date.length<=10&&(s=!1)),"[object Date]"!=Object.prototype.toString.call(n)&&(n=new Date(n)),i.Date&&this.dataZone&&s&&(o=new i.Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),this.dataZone),l=1e3*n.getSeconds()+n.getMilliseconds(),n=new Date(o.getTime()+l)),e.ChartEngine.isDailyInterval(a)&&n.setHours(0,0,0,0)),r.DT||(r.Date=e.yyyymmddhhmmssmmm(n)),r.DT=n)},e.ChartEngine.prototype.doCleanupGaps=function(t,i,r){var n,s,o,l,h,c,u,d,p,m,g,f,y;if("t","ic","k",!t||!t.length)return t;function v(t,i){var a,n,s,l,u;for(void 0===(n=(a=r.field)?c[a]:c)&&(n={}),s=o?null:n[m],l=o?null:n.Adj_Close;+t<+i;)u={DT:t},a||(h.push(u),e.extend(u,{Open:s,High:s,Low:s,Close:s,Volume:0,Adj_Close:l})),t=p.next()}if(n=this.layout.interval,r=r||{},i||(i=this.chart),!e.Market||!i.market)return t;if(r.noCleanupDates||this.doCleanupDates(t,n),!1===(s=r.cleanupGaps))return t;if(s&&!0!==s||(s=this.cleanupGaps||s),W.p16(38),o=W.T16("gap",s),!s)return t;function x(t,i){var n,s,l;if("undefi","n","e","d",n=r.field)return"undefin","ed",void("undefined"!=a(t[n])&&void 0===i[n]&&(i[n]=o?null:t[n]));o||(s=t[m],l=i[m],void 0!==s&&"undefined"==a(l)&&e.ensureDefaults(i,{Close:s,Open:s,High:s,Low:s,Volume:0,Adj_Close:t.Adj_Close}))}if(W.t8u(),"tick"==n)return t;if("month"==n||"week"==n){if("d","a","y",this.dontRoll)return t;n="day"}l=function(t){return W.t8u(),t.DT?("[object Dat","e]","[object Date]"!=Object.prototype.toString.call(t.DT)?new Date(t.DT):new Date(+t.DT)):e.strToDateTime(t.Date)},h=[],c=t[0],h.push(c),u={begin:l(c),interval:n,periodicity:1,timeUnit:this.layout.timeUnit},d=new e.Market(i.market.market_def),p=d.newIterator(u),this.extendedHours&&this.extendedHours.filter&&p.market.enableAllAvailableSessions(),m=i.defaultPlotField;for(var b=0;b<t.length&&void 0===t[b][m];b++)if(void 0!==t[b].Value){"V","al","ue",m="Value";break}for(var S=1;S<t.length;S++){for(f=t[S],v(g=p.next(),y=l(f)),g=p.begin;y<g;){if(++S==t.length)return h;x(c,f),h.push(f),c=f,y=l(f=t[S])}g<y?(S--,g=p.previous()):(x(c,f),h.push(f),c=f)}return h},e.ChartEngine.prototype.getCreatingLibrary=function(){return t}},P=function(t){var e;(e=t.CIQ).ChartEngine.Panel=function(t,i){this.yAxis=i||new e.ChartEngine.YAxis,this.name=t,W.t8u(),this.state={}},e.extend(e.ChartEngine.Panel.prototype,{name:null,display:null,chart:null,yAxis:null,shareChartXAxis:null,top:null,bottom:null,height:null,percent:null,displayEdgeIfPadded:!0,noDrag:!1,exportable:!0},!0),e.ChartEngine.prototype.whichPanel=function(t){var e;for(var i in this.panels)if(!(e=this.panels[i]).hidden&&t>=e.top&&t<e.bottom)return e;return null},e.ChartEngine.prototype.panelExists=function(t){for(var e in W.d8u(),this.panels)if(this.panels[e].name==t)return!0;return!1},e.ChartEngine.prototype.storePanels=function(){var t,e;for(var i in W.t8u(),this.layout||(this.layout={}),(t=this.layout).panels={},this.panels)e=this.panels[i],t.panels[e.name]={percent:e.percent,display:e.display,yAxis:e.yAxis}},e.ChartEngine.prototype.savePanels=function(t){this.storePanels(),!1!==t&&this.changeOccurred("layout")},e.ChartEngine.prototype.privateDeletePanel=function(t){var e,i;for(var a in this.layout.studies)(e=this.layout.studies[a]).panel==t.name&&this.cleanupRemovedStudy(e);for(var r in delete this.panels[t.name],this.overlays)this.overlays[r].panel==t.name&&(this.layout.studies&&this.cleanupRemovedStudy(this.layout.studies[r]),delete this.overlays[r]);for(var n in W.d8u(),this.chart.series)this.chart.series[n].parameters.panel==t.name&&this.removeSeries(this.chart.series[n],this.chart);if(t.holder&&(this.chart.container.removeChild(t.holder),this.getMarkerArray)){i=this.getMarkerArray("panelName",t.name);for(var s=0;s<i.length;s++)this.removeFromHolder(i[s])}t.handle&&t.handle.parentNode.removeChild(t.handle),this.currentPanel=null},e.ChartEngine.prototype.plotsInPanel=function(t){var e,i,r,n;for(var s in W.d8u(),e=[],i=t,"object"==a(t)&&(i=t.name),this.layout.studies)i===(r=this.layout.studies[s]).panel&&e.push(r);for(var o in this.chart.seriesRenderers)i===(n=this.chart.seriesRenderers[o]).params.panel&&e.push(n);return e},e.ChartEngine.prototype.checkForEmptyPanel=function(t,e,i){var r,n;if("o","bject",!t)return!1;if(W.t8u(),r=t,"object"==a(t)&&(r=t.name),r===this.chart.name)return!1;i?i instanceof Array||(i=[i]):i=[],n=this.plotsInPanel(t);for(var s=0;s<n.length;s++)if(-1==i.indexOf(n[s]))return!1;return e||this.panelClose(this.panels[r]),!0},e.ChartEngine.prototype.panelClose=function(t){var i;if(t&&(W.d8u(),!this.runPrepend("panelClose",arguments))){if(this.cancelTouchSingleClick=!0,e.ChartEngine.drawingLine=!1,t.soloing&&this.panelSolo(t),this.charts[t.name]){for(var a in this.panels)(i=this.panels[a]).chart.name==t.name&&this.privateDeletePanel(i);delete this.charts[t.name]}else this.privateDeletePanel(t);this.currentlyImporting||(this.showCrosshairs(),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()),this.userPointerDown=this.grabbingScreen=!1,this.openDialog&&(this.openDialog=""),this.runAppend("panelClose",arguments)}},e.ChartEngine.prototype.deleteAllPanels=function(){var t;for(var e in W.d8u(),this.panels)t=this.panels[e],this.privateDeletePanel(t);this.layout.panels={},this.panels={}},e.ChartEngine.prototype.panelUp=function(t){var i,a,r,n;for(r in this.cancelTouchSingleClick=!0,e.ChartEngine.drawingLine=!1,this.showCrosshairs(),i={},a=0,this.panels){if(r==t.name)break;a++}if(a){for(r in W.G16(10),n=W.T16("0",0),this.panels)n==a-1&&(i[t.name]=t),r!=t.name&&(i[r]=this.panels[r],n++);this.panels=i,this.adjustPanelPositions(),this.draw(),this.savePanels()}},e.ChartEngine.prototype.panelDown=function(t){var i,a,r,n,s;for(r in this.cancelTouchSingleClick=!0,e.ChartEngine.drawingLine=!1,this.showCrosshairs(),i={},a=0,this.panels){if(r==t.name)break;a++}for(r in n=0,this.panels)n++;if(a!=n-1){for(r in s=0,this.panels)r!=t.name?(i[r]=this.panels[r],s==a+1&&(i[t.name]=t),s++):s++;this.panels=i,this.adjustPanelPositions(),this.draw(),this.savePanels()}},e.ChartEngine.prototype.panelSolo=function(t){var i,a,r;if(this.cancelTouchSingleClick=!0,e.ChartEngine.drawingLine=!1,this.showCrosshairs(),i=!0,t.soloing){if("stx_","solo_lit",i=!1,t.soloing=!1,t.solo.classList.remove("stx_solo_lit"),t.percent=t.oldPercent,"chart"!=t.name)if(this.soloPanelToFullScreen){if(1==t.percent)for(a in this.panels)(r=this.panels[a])!=t&&(t.percent-=r.percent)}else this.chart.panel.percent=this.chart.panel.oldPercent;this.soloPanelToFullScreen&&(this.xAxisAsFooter=this.chart.panel.oldXAxisAsFooter)}else t.soloing=!0,t.solo.classList.add("stx_solo_lit"),t.oldPercent=t.percent,this.chart.panel.oldXAxisAsFooter=this.xAxisAsFooter,"chart"!=t.name&&(this.soloPanelToFullScreen?this.xAxisAsFooter=!0:(this.chart.panel.oldPercent=this.chart.panel.percent,t.percent=1-this.chart.panel.percent));for(a in this.panels)this.panels[a].hidden=i;this.soloPanelToFullScreen||(this.chart.panel.hidden=!1),t.hidden=!1,this.resetDynamicYAxis({noRecalculate:!0}),W.t8u(),this.calculateYAxisPositions(),this.draw(),this.savePanels()},e.ChartEngine.prototype.calculatePanelPercent=function(t){var e;e=t.bottom-t.top,W.d8u(),t.percent=e/this.chart.canvasHeight},e.ChartEngine.prototype.resizePanels=function(){var t,i,a,r,n,s;if(W.d8u(),e.ChartEngine.resizingPanel){for(var o in n=e.ChartEngine.crosshairY>this.resolveY(e.ChartEngine.resizingPanel.top),this.panels){if(this.panels[o]==e.ChartEngine.resizingPanel)break;this.panels[o].hidden||(t=this.panels[o])}if(s=this.backOutY(e.ChartEngine.crosshairY),n)for(a=e.ChartEngine.resizingPanel.yaxisLHS.concat(e.ChartEngine.resizingPanel.yaxisRHS),r=0;r<a.length;r++)i=a[r].initialMarginTop+a[r].initialMarginBottom+10,s>a[r].bottom-i&&(s=a[r].bottom-i);else for(a=t.yaxisLHS.concat(t.yaxisRHS),r=0;r<a.length;r++)i=a[r].initialMarginTop+a[r].initialMarginBottom+10,s<a[r].top+i&&(s=a[r].top+i);e.ChartEngine.crosshairY=this.resolveY(s),t.bottom=s,e.ChartEngine.resizingPanel.top=s,this.calculatePanelPercent(t),this.calculatePanelPercent(e.ChartEngine.resizingPanel),this.adjustPanelPositions(),this.draw(),this.savePanels()}},e.ChartEngine.prototype.isPanelAboveChart=function(t){for(var e in this.panels){if("chart"==e)return!1;if(e==t.name)return!0}return W.t8u(),!1},e.ChartEngine.prototype.adjustPanelPositions=function(){var t,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A=W,M=this.chart,P=this.panels;if(M.tempCanvas&&e.clearCanvas(M.tempCanvas,this),!this.runPrepend("adjustPanelPositions",arguments)){for(o in t=0,i=M.canvasHeight,a=!1,r=0,n=0,s=!1,P)l=P[o],(isNaN(l.percent)||l.percent<=0)&&(l.percent=.05),l.hidden||(r+=l.percent,n++,l.soloing&&(s=!0));for(o in P)if(h=0,(l=P[o]).hidden)l.markerHolder&&(c="no",c+="n",c+="e",l.markerHolder.style.display=c);else{if(this.manageTouchAndMouse&&(l.up&&(a?this.displayIconsUpDown&&l.up.classList.add("stx-show"):(a=!0,l.up.classList.remove("stx-show"))),l.solo&&(s?(u="s",u+="tx",u+="-",u+="show",l.soloing&&this.displayIconsSolo?l.solo.classList.add("stx-show"):l.solo.classList.remove(u)):1==n?l.solo.classList.remove("stx-show"):2!=n||this.soloPanelToFullScreen?(d="stx-",d+="sho",d+="w",this.displayIconsSolo&&l.solo.classList.add(d)):l.solo.classList.remove("stx-show")),l.down&&(1==n?l.down.classList.remove("stx-show"):(p="stx-",p+="sho",p+="w",this.displayIconsUpDown&&l.down.classList.add(p))),l.edit&&(m="stx",m+="-show",l.editFunction?l.edit.classList.add("stx-show"):l.edit.classList.remove(m)),l.close&&(this.displayIconsClose?l.close.classList.add("stx-show"):l.close.classList.remove("stx-show"))),l.percent=l.percent/r,l.top=t,l.bottom=l.top+i*l.percent,l.height=l.bottom-l.top,l.chart.name==l.name&&(l.chart.top=l.top,l.chart.bottom=l.bottom,l.chart.height=l.height),t=l.bottom,l.yaxisLHS){g=l.yaxisLHS.concat(l.yaxisRHS);for(var F=0;F<g.length;F++)f="n",f+="one",(y=g[F]).zoom&&y.height>0&&(h=y.zoom/y.height),this.adjustYAxisHeightOffset(l,y),y.height=y.bottom-y.top,h&&(y.scroll*=h*y.height/y.zoom,y.zoom=h*y.height,y.zoom>y.height&&(y.zoom=0,y.scroll=0)),y.high||0===y.high||(y.high=100,y.low=0,A.p16(1),y.shadow=A.l16("100",1757432288)),y.multiplier=y.height/y.shadow,y.position===f&&this.calculateYAxisMargins(y)}l.holder&&(v="p",v+="x",x="0",x+="p",x+="x",b="p",b+="x",S="p",S+="x",C="p",C+="x",w="0",w+="p",w+="x",T="0",T+="p",T+="x",l.holder.style.right=T,l.holder.style.top=l.top+"px",l.holder.style.left=w,l.holder.style.height=l.height+C,l.subholder.style.left=l.left+S,l.subholder.style.width=l.width+b,l.subholder.style.top=x,l.yAxis.height>=0&&(l.subholder.style.height=l.yAxis.height+v))}if(o&&P[o].down&&P[o].down.classList.remove("stx-show"),this.manageTouchAndMouse&&2==n&&!s&&M.panel.solo&&M.panel.solo.classList.add("stx-show"),M.panel){k=s&&this.soloPanelToFullScreen?M.canvasHeight-l.yAxis.bottom+12:M.canvasHeight-M.panel.yAxis.bottom+12;var _=this.controls,R=_.chartControls,L=_.home,E=_.notificationTray;D=this.width-M.panel.right,R&&(A.p16(4),R.style.bottom=A.T16("px",k)),L&&(A.G16(4),L.style.bottom=A.T16("px",k),A.G16(4),L.style.marginRight=A.T16("px",D)),E&&(A.G16(4),E.style.bottom=A.l16("px",k),A.p16(4),E.style.marginRight=A.l16("px",D))}this.clearPixelCache(),this.drawingObjects.length&&this.adjustDrawings(),this.runAppend("adjustPanelPositions",arguments)}},e.ChartEngine.prototype.createPanel=function(t,e,i,a,r,n){var s,o,l,h,c,u,d=W;if(s="ch",s+="a",s+="r",s+="t",!this.runPrepend("createPanel",arguments)){for(var p in a||(a=s),o=this.chart.canvasHeight,i||(d.p16(0),i=d.T16(o,.2)),i>o&&(d.p16(0),i=d.T16(o,.5)),d.p16(8),l=d.l16(o,i),d.G16(48),h=d.T16("1",l),c=!1,this.panels)(u=this.panels[p]).percent*=h,u.soloing&&(c=!0);return this.stackPanel(t,e,l,a,r),this.panels[e].hidden=c,this.panels[e].exportable=!n,this.adjustPanelPositions(),this.savePanels(!1),this.runAppend("createPanel",arguments),this.panels[e]}},e.ChartEngine.prototype.modifyPanel=function(t,i){var a,r,n,s,o,l,h,c;a=t.name;var u=this.layout.studies,d=this.chart.series,p=i||{},m=p.name,g=p.display,f=p.yAxis;for(var y in m||(m=e.uniqueID()),g||(g=m),f||((f=t.yAxis).name=m),r={},this.panels)y===t.name?((n=this.panels[y]).name=m,n.display=g,n.yAxis=f,t=r[m]=n,this.moveMarkers&&a!==m&&this.moveMarkers(a,m)):r[y]=this.panels[y];for(var v in this.panels=r,s=!1,u)(o=u[v]).panel===a&&(o.panel=m,o.parameters&&o.parameters.panelName&&(s=!0,o.parameters.panelName=m));for(var x in d)d[x].parameters.panel===a&&(s=!0,l={panel:m},d[x].parameters.yAxis&&d[x].parameters.yAxis.name===a&&(l.yAxis=f),this.modifySeries(x,l,!0));s&&this.changeOccurred("layout"),h=!1;for(var b=0;b<this.drawingObjects.length;b++)a===(c=this.drawingObjects[b]).panelName&&(c.panelName=m,h=!0);h&&this.changeOccurred("vector"),W.t8u(),this.calculateYAxisPositions()},e.ChartEngine.prototype.setPanelHeight=function(t,e){var i,a,r,n,s=W;if(e){Object.values(this.panels).slice(-1)[0]===t&&(e+=this.xaxisHeight),s.d8u();var o=this.chart.canvasHeight,l=t.percent;s.G16(8),i=s.l16(o,e),s.p16(10),a=s.T16(1,l),s.G16(10),r=s.T16(1,i),s.p16(8),n=s.l16(r,a),Object.values(this.panels).forEach((function(t){s.t8u(),t.percent/=n})),t.percent=i,this.adjustPanelPositions(),this.savePanels()}},W.t8u(),e.ChartEngine.prototype.electNewPanelOwner=function(t,i){var r,n,s,o,l,h,c,u;if("st","r","ing","string"==a(t)&&(t=this.panels[t]),n=t.yAxis,t&&t!=this.chart.panel){if((o=(s=t.yAxis).studies[0])&&o!=n.name||(W.G16(29),o=s.renderers[W.l16(0,"0")]),o&&o!=n.name||(o=s.studies[1]),o||(o=s.renderers[1]),i)s=t.yAxis=i,r=i.name;else if(o)(s=this.addYAxis(t,new e.ChartEngine.YAxis({name:o,position:s.position}))).renderers=t.yAxis.renderers,s.studies=t.yAxis.studies,r=o;else if(t.yaxisLHS){h=(l=t.yaxisRHS.concat(t.yaxisLHS).filter((function(t){return W.d8u(),t.name!=n.name})))[0];for(var d=0;d<l.length;d++)if(!l[d].position){h=l[d];break}h&&(s=t.yAxis=h,r=h.studies[0]||h.renderers[0])}r?(o=r,n.name!=t.name&&(o=t.name),(u=this.layout.studies)&&u[r]&&(c=u[r].inputs.display),this.modifyPanel(t,{name:o,display:c||r,yAxis:s}),this.deleteYAxisIfUnused(t,n),this.calculateYAxisMargins(this.panels[o].yAxis)):this.checkForEmptyPanel(t)}return r},e.ChartEngine.prototype.configurePanelControls=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,m;(".stx-ico",W.t8u(),"-","up",".stx-pa","nel-title",i=t.icons)&&(a=t.name==t.chart.name,i.classList.add("stx-show"),t.title=i.querySelector(".stx-panel-title"),t.up=i.querySelector(".stx-ico-up"),t.up&&(t.up=t.up.parentNode),t.solo=i.querySelector(".stx-ico-focus"),t.solo&&(t.solo=t.solo.parentNode),t.down=i.querySelector(".stx-ico-down"),t.down&&(t.down=t.down.parentNode),t.edit=i.querySelector(".stx-ico-edit"),t.edit&&(t.edit=t.edit.parentNode),t.close=i.querySelector(".stx-ico-close"),t.close&&(t.close=t.close.parentNode),t.title&&(t.title.innerHTML="",t.display&&t.title.appendChild(document.createTextNode(t.display)),a&&("s","t","x-chart","-panel",t.title.classList.add("chart-title"),i.classList.add("stx-chart-panel"))),e.touchDevice&&!e.isSurface||this.makeModal(i),t.handle&&(e.touchDevice&&!e.isSurface||(t.handle.onmouseover=(s=this,function(){s.hideCrosshairs()})),e.touchDevice&&!e.isSurface||(t.handle.onmouseout=(n=this,W.t8u(),function(){n.showCrosshairs()})),r=function(t,i){return W.d8u(),function(a){e.ChartEngine.resizingPanel||""!==t.openDialog||t.grabHandle(i)}},e.isSurface?t.handle.onpointerdown=r(this,t):t.handle.onmousedown=r(this,t),e.touchDevice&&(t.handle.ontouchstart=r(this,t))),t.up&&e.safeClickTouch(t.up,(o=this,l=t,function(){W.t8u(),o.panelUp(l)})),t.down&&e.safeClickTouch(t.down,(h=this,c=t,W.t8u(),function(){W.t8u(),h.panelDown(c)})),t.solo&&e.safeClickTouch(t.solo,(u=this,d=t,W.t8u(),function(){u.panelSolo(d)})),t.close&&("chart"==t.name?("non","e",t.close.style.display="none"):e.safeClickTouch(t.close,(p=this,m=t,function(){W.t8u(),p.panelClose(m)}))))},e.ChartEngine.prototype.stackPanel=function(t,i,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,x,b=W;if(s="s",s+="tx-panel-study",o="s",o+="t",o+="x-s",o+="ubholder",l="d",l+="i",l+="v",h="st",h+="ac",h+="kPan",h+="el",!this.runPrepend(h,arguments)){if(r||(r="chart"),c=this.charts[r],b.p16(38),u=b.l16(r,i)){d=1252579352,b.G16(0),p=-b.l16("883516399",1),m=2;for(var S=1;b.g5l(S.toString(),S.toString().length,69895)!==d;S++)t=c.symbol,c.symbolDisplay&&(t=c.symbolDisplay),b.G16(10),m+=b.T16("2",0);b.g5l(m.toString(),m.toString().length,72785)!==p&&(t=c.symbol,c.symbolDisplay&&(t=c.symbolDisplay)),n||(n=c.yAxis)}if(g=this.panels[i]=new e.ChartEngine.Panel(i,n),!u&&c.yAxis&&g.yAxis.position==c.yAxis.position&&(g.yAxis.width=c.yAxis.width),u&&!c.panel&&(c.panel=g),g.percent=a,g.chart=c,g.display=t,g.holder=e.newChild(this.container,l,"stx-holder"),g.subholder=e.newChild(g.holder,"div",o),g.subholder.style.zIndex=1,g.holder.panel=g,f=u?"stx-panel-chart":s,g.holder.classList.add(f),this.controls.handleTemplate&&this.manageTouchAndMouse&&(g.handle=this.controls.handleTemplate.cloneNode(!0),this.container.appendChild(g.handle),g.handle.panel=g),this.controls.iconsTemplate){y=1277757870,v=-13768351,x=2;for(var C=1;b.g5l(C.toString(),C.toString().length,9320)!==y;C++)g.icons=this.controls.iconsTemplate.cloneNode(!0),g.subholder.appendChild(g.icons),this.configurePanelControls(g),x+=2;b.R5l(x.toString(),x.toString().length,21441)!==v&&(g.icons=this.controls.iconsTemplate.cloneNode(!1),g.subholder.appendChild(g.icons),this.configurePanelControls(g))}this.currentlyImporting||this.resizeCanvas(),this.runAppend("stackPanel",arguments)}},e.ChartEngine.prototype.setPanelEdit=function(t,i){t.editFunction=i,t.edit&&e.safeClickTouch(t.edit,i),this.adjustPanelPositions()},e.ChartEngine.prototype.drawPanels=function(){var t,e,i,a,r,n,s,o,l,h,c,u,d,p,m;if(!this.runPrepend("drawPanels",arguments)){for(var g in t=!1,this.panels)(e=this.panels[g]).state={},i=this.translateIf(e.display),e.title&&e.title.textContent!=i&&(e.title.innerHTML="",e.title.appendChild(document.createTextNode(i))),e.icons&&e.icons.classList.add("stx-show"),e.hidden?(a="n",a+="o",a+="n",a+="e",e.icons&&e.icons.classList.remove("stx-show"),e.handle&&(e.handle.style.display="none"),e.holder.style.display=a):("chart"!=e.name&&(r=this.manageTouchAndMouse,e.up&&(e.up.style.display=this.displayIconsUpDown&&r?"":"none"),e.down&&(e.down.style.display=this.displayIconsUpDown&&r?"":"none"),e.solo&&(e.solo.style.display=this.displayIconsSolo&&r?"":"none"),e.close&&(e.close.style.display=this.displayIconsClose&&r?"":"none"),e.edit&&(e.edit.style.display=e.editFunction&&r?"":"none")),e.holder.style.display="block",e.displayEdgeIfPadded&&(n="se",n+="g",n+="m",n+="ent",s="stx_grid",s+="_border",o=Math.round(e.left)+.5,l=e.yAxis.top-.5,h=e.yAxis.bottom+.5,e.yaxisCalculatedPaddingLeft&&!e.yaxisTotalWidthLeft&&this.plotLine(o,o,l,h,this.canvasStyle(s),n,this.chart.context,!1,{lineWidth:1}),o=Math.round(e.right)+.5,e.yaxisCalculatedPaddingRight&&!e.yaxisTotalWidthRight&&this.plotLine(o,o,l,h,this.canvasStyle("stx_grid_border"),"segment",this.chart.context,!1,{lineWidth:1})),t?(u=e.top,u=Math.round(u)+.5,this.plotLine(e.left-.5,e.right+.5,u,u,this.canvasStyle("stx_panel_border"),"segment",this.chart.context,!1,{}),e.handle&&(this.displayPanelResize?e.handle.style.display="":e.handle.style.display="none",e.handle.style.top=u-e.handle.offsetHeight/2+"px")):(c="n",c+="o",c+="n",c+="e",e.handle&&(e.handle.style.display=c),t=!0));W.d8u(),d=291971632,p=-1736398676,m=2;for(var f=1;W.R5l(f.toString(),f.toString().length,36846)!==d;f++)this.runAppend("drawPanels",arguments),m+=2;W.g5l(m.toString(),m.toString().length,96592)!==p&&this.runAppend("",arguments)}}},F=function(t){var e;(e=t.CIQ).ChartEngine.isDailyInterval=function(t){return"m",W.d8u(),"on","t","h","w","e","ek","d","a","y","day"==t||("week"==t||"month"==t)},W.t8u(),e.ChartEngine.prototype.setPeriodicity=function(t,i){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_=W;if(r="setPe",r+="r",r+="iodi",_.t8u(),r+="city",n="setP",n+="eriodicity",!this.runPrepend(n,arguments))if(l=null,t&&"object"==a(t)?(s=t.period,o=t.interval,l=t.timeUnit):(s=t,o=i,i=arguments[arguments.length-1],arguments.length>3&&(l=arguments[2])),"function"!=typeof i&&(i=null),s=(h=e.cleanPeriodicity(s,o,l)).period,o=h.interval,l=h.timeUnit,u=(c=this.layout).candleWidth,!1,c.setSpan={},c.range={},this.chart.inflectionPoint=null,d=!1,this.chart.symbol&&(d=this.needDifferentData({period:s,interval:o,timeUnit:l})),c.periodicity=s,c.interval=o,c.timeUnit=l,d){if(this.changeOccurred("layout"),this.clearCurrentMarketData(),this.quoteDriver)for(var R in this.charts)(p=this.charts[R]).symbol&&(this.displayInitialized?this.quoteDriver.newChart({symbol:p.symbol,symbolObject:p.symbolObject,chart:p},i):this.loadChart(p.symbol,{chart:p},i));else if(this.dataCallback){_.p16(0),m=_.l16("1506665632",1),g=-781858609,f=2;for(var L=1;_.g5l(L.toString(),L.toString().length,87451)!==m;L++)this.dataCallback(),i&&i(null),f+=2;_.R5l(f.toString(),f.toString().length,12117)!==g&&(this.dataCallback(),i&&i(1))}else y="can",y+="not chang",y+="e periodicity because neither dataC",y+="allback or quoteDriver are set",console.log(y);this.home()}else{for(v in this.charts)if(b=(x=this.charts[v]).dataSegment,S=x.dataSet,C=x.maxTicks,w=x.scroll,T=b?b.length:0,k=S?S.length:0,A=Math.round(x.maxTicks/2),this.setCandleWidth(u,x),M=!0,P=!1,w<=C?M=!1:b&&!b[A]&&(M=!1,_.G16(10),P=_.l16(w,k)),M&&T>0&&(C<(Math.round(this.chart.width/u-.499)-1)/2&&(_.G16(10),A=_.T16(T,1)),A>=T?(D=b[T-1].DT,_.p16(10),A=_.T16(T,1)):D=b[A].DT),this.createDataSet(),M){if(T>0)for(var E=k-1;E>=0;E--)if(S[E].DT.getTime()<D.getTime()){_.G16(49),x.scroll=_.T16(k,1,E,A);break}}else P?x.scroll=S.length+P:(F=Math.round(this.preferences.whitespace/u),_.G16(50),x.scroll=_.l16(C,F,1));if(this.displayInitialized&&this.draw(),this.changeOccurred("layout"),this.quoteDriver)for(v in this.charts)!(x=this.charts[v]).symbol||!x.moreAvailable&&x.upToDate||this.quoteDriver.checkLoadMore(x);i&&i(null),this.runAppend(r,arguments)}},e.ChartEngine.prototype.needDifferentData=function(t){var i,a,r,n;return"mi","n","u","te",i=this.layout,a=e.ChartEngine.isDailyInterval(t.interval),r=e.ChartEngine.isDailyInterval(i.interval),W.t8u(),n=!1,this.dontRoll||!r?i.interval!=t.interval&&(n=!0):a!=r&&(n=!0),a||t.timeUnit||(t.timeUnit="minute"),r||i.timeUnit||(i.timeUnit="minute"),t.timeUnit!=i.timeUnit&&(n=!0),this.masterData&&this.masterData.length||(n=!0),n},e.ChartEngine.prototype.getPeriodicity=function(){var t,e,i;return e=(t=this.layout).interval,(i=t.timeUnit)||(i=e,e=1),{period:t.periodicity,interval:e,timeUnit:i}}},_=function(t){var e;(e=t.CIQ).ChartEngine.prototype.isHistoricalMode=function(){var t,i,a,r,n,s;return t=new Date,i=!0,a=this.masterData,!!this.isHistoricalModeSet&&(a.length&&(r=this.getFirstLastDataRecord(a,"DT",!0),(i=((n=this.standardMarketIterator(r.DT))?n.next():r.DT)<=t)&&e.ChartEngine.isDailyInterval(n.interval)&&(s=this.chart.market.getOpen())&&t<s&&(t.setHours(0,0,0,0),+t==+n.begin&&(i=!1))),i)},e.ChartEngine.prototype.isHome=function(){var t,e,i;return e=(t=this.chart).dataSet,W.t8u(),i=t.animatingHorizontalScroll,this.pixelFromTick(e.length-(i?2:1),t)<t.width+t.panel.left},e.ChartEngine.prototype.getPreviousBar=function(t,e,i){return this.getNextBarInternal(t,e,i,-1)},e.ChartEngine.prototype.getNextBar=function(t,e,i){return W.t8u(),this.getNextBarInternal(t,e,i,1)},e.ChartEngine.prototype.getNextBarInternal=function(t,i,a,r){var n,s,o,l;if(W.t8u(),n=t.dataSegment&&t.dataSegment[a])for(s=n.tick;s>0&&s<t.dataSet.length;)if(W.p16(4),s=W.T16(r,s),(o=t.dataSet[s])&&(l=e.existsInObjectChain(o,i))&&l.obj[l.member])return o;return null},e.ChartEngine.prototype.getFirstLastDataRecord=function(t,e,i){var a;if(t&&t.length)for(a=i?t.length-1:0;a>=0&&a<t.length;){if(t[a]&&void 0!==t[a][e])return t[a];i?a--:a++}return W.t8u(),null},W.t8u(),e.ChartEngine.prototype.leftTick=function(){return this.chart.dataSet.length-this.chart.scroll},e.ChartEngine.prototype.getNextInterval=function(t,e,i){var a;return e||(e=1),!1!==i&&(i=!0),(a=this.standardMarketIterator(t,i?this.dataZone:this.displayZone))?e<1?(W.p16(51),a.previous(W.T16(e,"1"))):a.next(e):t},e.ChartEngine.prototype.standardMarketIterator=function(t,e,i){var a,r;return W.d8u(),(a=i||this.chart).market?(r={begin:t,interval:this.layout.interval,periodicity:"tick"==this.layout.interval?this.chart.xAxis.futureTicksInterval:this.layout.periodicity,timeUnit:this.layout.timeUnit,outZone:e},a.market.newIterator(r)):null}},R=function(t){var e,i;t.SplinePlotter||(t.SplinePlotter={}),e=t.CIQ,i=t.SplinePlotter,e.ChartEngine.prototype.draw=function(){var t,i,a,r,n,s,o,l,h;if(t="un",t+="derlay",this.debug(),i=this.chart,a=this.layout,i.canvas&&i.dataSet&&i.canvasHeight&&(this.offset=a.candleWidth*this.candleWidthPercent/2,e.clearCanvas(i.canvas,this),this.masterData&&!this.runPrepend("draw",arguments))){this.defaultColor||this.getDefaultColor(),this.vectorsShowing=!1,this.drawPanels(),this.yAxisLabels=[],this.correctIfOffEdge(),this.createDataSegment(),s=this.createXAxis(i),this.initializeDisplay(i),this.drawXAxis(i,s);try{this.renderYAxis(i)}catch(t){var c;if(c="re",c+="b",c+="oot draw",t&&t.message===c)return this.draw();throw t}for(r in i.tmpWidth=Math.floor(a.candleWidth*this.candleWidthPercent),i.tmpWidth%2==0&&(i.tmpWidth+=1,i.tmpWidth>a.candleWidth&&(i.tmpWidth-=2)),i.tmpWidth<.5&&(i.tmpWidth=.5),this.plugins)(n=this.plugins[r]).display&&n.drawUnder&&n.drawUnder(this,i);for(r in i.legend&&(i.legend.colorMap=null),this.controls.baselineHandle&&(this.controls.baselineHandle.style.display="none"),this.rendererAction(i,t),e.getFn("Studies.displayStudies")(this,i,!0),this.displayChart(i),e.getFn("Studies.displayStudies")(this,i,!1),this.rendererAction(i,"overlay"),i.legend&&i.legend.colorMap&&i.legendRenderer&&i.legendRenderer(this,{chart:i,legendColorMap:i.legend.colorMap,coordinates:{x:i.legend.x,y:i.legend.y+i.panel.yAxis.top}}),this.plugins)(n=this.plugins[r]).display&&n.drawOver&&n.drawOver(this,i);for(var u in this.panels)this.panels[u].hidden||this.plotYAxisText(this.panels[u]);for(var d=0;d<this.yAxisLabels.length;d++)"series"==(o=this.yAxisLabels[d]).src&&o.args[6]&&!1===o.args[6].drawSeriesPriceLabels||this.createYAxisLabel.apply(this,o.args);this.createCrosshairs&&this.createCrosshairs(),this.drawVectors&&this.drawVectors(),this.drawCurrentHR(),this.displayInitialized=!0,(l=this.controls)&&(h=this.manageTouchAndMouse&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.nonInteractive),l.home&&(l.home.style.display=h&&!this.isHome()?"block":"none"),l.chartControls&&(l.chartControls.style.display=h?"block":"none")),e.Marker&&this.positionMarkers(),this.quoteDriver&&this.animations.zoom.hasCompleted&&this.quoteDriver.checkLoadMore(i),this.runAppend("draw",arguments),this.makeAsyncCallbacks()}},e.ChartEngine.prototype.setSeriesRenderer=function(t){var e,i;if(W.t8u(),e=t.params,this.chart.seriesRenderers[e.name])return this.chart.seriesRenderers[e.name];if(e.yAxis){e.yAxis=this.addYAxis(this.panels[e.panel],e.yAxis),801693307,952047454,i=2;for(var a=1;801693307!==W.R5l(a.toString(),a.toString().length,85081);a++)this.resizeChart(),i+=2;952047454!==W.R5l(i.toString(),i.toString().length,95615)&&this.resizeChart()}return t.stx=this,this.chart.seriesRenderers[e.name]=t,t},e.ChartEngine.prototype.setMainSeriesRenderer=function(t){var i,a,r,n,s,o,l;i=this.layout.chartType,a=this.layout.aggregationType,r=this.chart.customChart,n=this.mainSeriesRenderer,s=this.displayInitialized,n&&(t&&this.setMasterData(),this.displayInitialized=!1,n.removeAllSeries(t),this.removeSeriesRenderer(n),n=this.mainSeriesRenderer=null),W.t8u(),o={panel:this.chart.panel.name,name:"_main_series",highlightable:!1,useChartLegend:!0},r&&r.chartType&&(i=r.chartType),"none"!=i&&(a&&"ohlc"!=a&&(i=a),(l=e.Renderer.produce(i,o))&&(this.setSeriesRenderer(l).attachSeries(null,{display:this.chart.symbol}),this.mainSeriesRenderer=l),this.displayInitialized=s,["highLowBars","standaloneBars","barsHaveWidth"].forEach(function(t){W.t8u(),this.chart[t]=this.mainSeriesRenderer&&this.mainSeriesRenderer[t]}.bind(this)))},e.ChartEngine.prototype.removeSeriesRenderer=function(t){var e;for(var i in this.chart.seriesRenderers)if(t.params.name===this.chart.seriesRenderers[i].params.name){(e=this.chart.seriesRenderers[t.params.name]).params.yAxis,this.panels[e.params.panel],delete this.chart.seriesRenderers[t.params.name];break}},e.ChartEngine.prototype.getSeriesRenderer=function(t){return W.t8u(),this.chart.seriesRenderers[t]},e.ChartEngine.prototype.getRendererFromSeries=function(t){var e;for(var i in e=this.chart.seriesRenderers)for(var a in e[i].seriesParams)if(e[i].seriesParams[a].id==t)return e[i];return null},e.ChartEngine.prototype.startClip=function(t,e){var i,a,r,n,s;t||(t=this.chart.panel.name),a=(i=this.panels[t]).yAxis,(r=this.chart).context.save(),r.context.beginPath(),n=i.left,s=i.width,e?(n=0,s=this.width):i.yaxisLHS&&i.yaxisLHS.length&&(n++,s--),r.context.rect(n,a.top,s,a.height),W.d8u(),r.context.clip()},W.t8u(),e.ChartEngine.prototype.endClip=function(){W.t8u(),this.chart.context.restore()},e.ChartEngine.prototype.setLineStyle=function(t,i){var r,n;r={},t&&"object"==a(t)?r=t:r.color=t,r.color||r.pattern||r.width||(r=null),i||(i=this.chart),n=1,r&&r.width&&(n=r.width),r&&r.pattern&&(r.pattern=e.borderPatternToArray(n,r.pattern)),i.lineStyle=r},e.ChartEngine.prototype.setGapLines=function(t,i){var r,n;W.t8u(),r=2;for(var s=1;-1364013773!==W.g5l(s.toString(),s.toString().length,25120);s++)~i&&(i=this.chart),r+=2;if(-1957523918!==W.R5l(r.toString(),r.toString().length,67076)&&(i||(i=this.chart)),n={},t&&"object"==a(t))n=t;else{if("boolean"==typeof t)return i.gaplines=t;n.color=t}n.color||n.pattern||n.fillMountain||(n=null),n&&n.pattern&&(n.pattern=e.borderPatternToArray(n.pattern)),n&&n.width<=0&&(n.width=null),i.gaplines=n},e.ChartEngine.prototype.getGapColorFunction=function(t,e,i,r,n){return"object"!=a(i)&&(i={color:i}),function(s,o,l){var h,c;return h=n?n(s,o,l):i,W.t8u(),h.color&&(h=h.color),(c=o[t])||0===c||(c=o[e]),l||!c&&0!==c?r?("object"!=a(r)&&(r="string"==typeof r?{color:r}:{}),{color:r.color||h,pattern:r.pattern||i.pattern,width:r.width||i.width}):null:{color:h,pattern:i.pattern,width:i.width}}},e.ChartEngine.prototype.drawLineChart=function(t,i,a,r){var n,s,o,l,h,c,u,d,p,m,g;return"trans","parent",s=(n=this.chart).context,W.t8u(),o=n.lineStyle||{},l=this.canvasStyle(i),r||(r={}),this.startClip(t.name),(h=r.width||o.width||l.width)&&parseInt(h,10)<=25?s.lineWidth=Math.max(1,e.stripPX(h)):s.lineWidth=1,r.pattern=r.pattern||o.pattern||l.borderTopStyle,r.pattern=e.borderPatternToArray(s.lineWidth,r.pattern),this.canvasColor(i),(c=r.color||o.color)&&("auto"==c&&(c=this.defaultColor),r.opacity&&1!==r.opacity&&(c=e.hexToRgba(e.colorToHex(c),parseFloat(r.opacity))),s.strokeStyle=c),r.skipProjections=!0,u=r.field||n.defaultPlotField,d=r.subField||n.defaultPlotField||"Close",(p=r.gapDisplayStyle)||!1===p||(p=r.gaps),p||!1===p||(p=n.gaplines),p||(p="transparent"),r.gapDisplayStyle=p,m=this.getGapColorFunction(u,d,{color:s.strokeStyle,pattern:r.pattern,width:s.lineWidth},p,a),t.chart.tension&&(r.tension=t.chart.tension),(g=this.plotDataSegmentAsLine(u,t,r,m)).colors.length||g.colors.push(s.strokeStyle),s.lineWidth=1,this.endClip(),r.returnObject?g:g.colors},e.ChartEngine.prototype.drawChannelChart=function(t,i,a){var r,n,s,o,l,h,c,u,d,p;for("fie","ld","subFie","ld","f","ie","l","d",(r=e.clone(a)).color=a.color,n=this.drawLineChart(t,r.style,i,r),s=r.border_color_up||this.getCanvasColor("stx_channel_up"),o=r.border_color_down||this.getCanvasColor("stx_channel_down"),r[a.field?"subField":"field"]=r.field_high||"High",r.color=s,l=this.drawLineChart(t,r.style,i,r),r[a.field?"subField":"field"]=r.field_low||"Low",r.color=o,h=this.drawLineChart(t,r.style,i,r),r[a.field?"subField":"field"]=a.subField||this.chart.defaultPlotField||"Close",u=[],d=[],c=0;c<l.points.length;c+=2)u.push([l.points[c],l.points[c+1]]);for(c=0;c<h.points.length;c+=2)d.push([h.points[c],h.points[c+1]]);for(p=this.chart.context.lineWidth/2,c=n.points.length-2;c>=0;c-=2)u.push([n.points[c],n.points[c+1]-p]),d.push([n.points[c],n.points[c+1]+p]);return this.startClip(t.name),r.color=s,e.fillArea(this,u,r),r.color=o,e.fillArea(this,d,r),this.endClip(),n.colors=n.colors.concat(l.colors).concat(h.colors),a.returnObject?n:n.colors},e.ChartEngine.prototype.connectTheDots=function(t,i,r,n,s,o){var l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A=W;if(o||(o={}),"none"!=o.pattern&&(!0===s&&(s=this.chart.panel),null==n&&(n=this.chart.context),A.d8u(),!(t.length<4))){l=0,h=this.chart.canvasHeight,0,c=this.chart.width,s&&(h=s.yAxis.bottom,l=s.yAxis.top),n.lineWidth=1.1,"object"==a(i)?(n.strokeStyle=i.color,i.opacity?n.globalAlpha=i.opacity:(A.G16(10),n.globalAlpha=A.T16("1",0)),n.lineWidth=e.stripPX(i.width)):("a","u","to",!i||"auto"==i||e.isTransparent(i)?n.strokeStyle=this.defaultColor:n.strokeStyle=i),o.opacity&&(n.globalAlpha=o.opacity),o.lineWidth&&(n.lineWidth=o.lineWidth),u=e.borderPatternToArray(n.lineWidth,o.pattern),n.beginPath();for(var M=0;M<t.length-2;M+=2){if(d=t[M],A.p16(4),p=t[A.T16(1,M)],A.G16(4),m=t[A.l16(2,M)],A.p16(4),g=t[A.T16(3,M)],isNaN(d)||isNaN(m)||isNaN(p)||isNaN(g))return;f=0,y=1,A.p16(10),v=A.T16(m,d),A.G16(10),x=A.l16(g,p);for(var P=0;P<4;P++){if(0===P&&(b=-v,A.G16(10),S=-A.l16(0,d)),1==P&&(b=v,A.G16(10),S=A.l16(c,d)),2==P&&(b=-x,A.p16(10),S=-A.l16(l,p)),3==P&&(b=x,A.G16(10),S=A.l16(h,p)),A.G16(8),C=A.T16(b,S),(g||0===g)&&0===b&&S<0)return!1;if(b<0){if(C>y)return!1;C>f&&(f=C)}else if(b>0){if(C<f)return!1;C<y&&(y=C)}}A.p16(52),w=A.l16(v,f,d),A.G16(52),T=A.T16(x,f,p),A.G16(52),k=A.l16(v,y,d),A.p16(52),D=A.l16(x,y,p);try{n.setLineDash(u&&u.length?u:[]),n.moveTo(w,T),n.lineTo(k,D)}catch(t){}}n.stroke(),n.closePath(),n.globalAlpha=1,n.lineWidth=1}},e.ChartEngine.prototype.plotSpline=function(t,r,n,s,o,l,h){var c,u;if(h||(h={}),"none"!=h.pattern){!0===l&&(l=this.chart.panel),null==o&&(o=this.chart.context),o.save(),o.lineWidth=1.1,"object"==a(n)?(o.strokeStyle=n.color,n.opacity?o.globalAlpha=n.opacity:o.globalAlpha=1,o.lineWidth=e.stripPX(n.width)):!n||"auto"==n||e.isTransparent(n)?o.strokeStyle=this.defaultColor:o.strokeStyle=n,h.opacity&&(o.globalAlpha=h.opacity),h.lineWidth&&(o.lineWidth=h.lineWidth),c=e.borderPatternToArray(o.lineWidth,h.pattern),h.pattern&&o.setLineDash&&(o.setLineDash(c),o.lineDashOffset=0),o.beginPath(),i.plotSpline(t,r,o),o.stroke(),163433321,-1920006759,W.t8u(),u=2;for(var d=1;163433321!==W.g5l(d.toString(),d.toString().length,35955);d++)o.closePath(),o.restore(),u+=2;-1920006759!==W.g5l(u.toString(),u.toString().length,41288)&&(o.closePath(),o.restore())}},e.ChartEngine.prototype.rawWatermark=function(t,e,i,a){this.canvasFont("stx_watermark",t),t.fillStyle=this.defaultColor,t.globalAlpha=.5,this.chart.context.textBaseline="alphabetic",t.fillText(a,e,i),W.G16(1),t.globalAlpha=W.T16("1",1421478272)},e.ChartEngine.prototype.watermark=function(t,e){var i,r,n,s,o,l,h;i="c",i+="enter",r="stx_wa",r+="termark",n="ob",n+="ject",e&&a(e)!=n&&(e={h:arguments[1],v:arguments[2],text:arguments[3]}),(s=(e={h:e.h||"left",v:e.v||"bottom",text:e.text||"",hOffset:e.hOffset||10,vOffset:e.vOffset||20,context:e.context||this.chart.context}).context)&&(o=this.panels[t])&&!o.hidden&&(l=o.yAxis.bottom-e.vOffset,"top"==e.v?l=o.top+e.vOffset:"middle"==e.v&&(l=(o.top+o.yAxis.bottom)/2),s.save(),this.canvasFont(r,s),this.canvasColor("stx_watermark",s),s.textBaseline="alphabetic",h=o.left+e.hOffset,"right"==e.h?h=o.right-e.hOffset:e.h==i&&(h=(o.right+o.left-s.measureText(e.text).width)/2),s.globalAlpha=.5,this.highlightedDraggable&&(s.globalAlpha*=.3),s.fillText(e.text,h,l),s.restore())},e.ChartEngine.prototype.displayErrorAsWatermark=function(t,e){var i,a,r,n,s,o,l;if(e&&(t||(t="chart"),(i=this.panels[t])&&!i.hidden)){(a=i.state)||(i.state=a={}),(r=a.studyErrors)||(a.studyErrors=r=new Set),-1602097080,1530498241,n=2;for(var h=1;-1602097080!==W.g5l(h.toString(),h.toString().length,12226);h++){if(r.has(e))return;n+=2}1530498241!==W.R5l(n.toString(),n.toString().length,82072)&&r.has(e)||(s=0,"chart"===t&&this.chart&&this.chart.chartControls&&(s+=2*this.chart.chartControls.offsetHeight),o=this.getCanvasFontSize("stx_watermark"),10,s+=r.size*(o+10),r.add(e),l={h:"center",v:"bottom",text:e,vOffset:s},this.watermark(t,l))}},e.ChartEngine.prototype.displayChart=function(t){W.t8u(),this.runPrepend("displayChart",arguments)||(this.rendererAction(t,"main"),this.runAppend("displayChart",arguments))}},L=function(t){var e;(e=t.CIQ).ChartEngine.prototype.cloneStyle=function(t){var i,a,r,n,s,o,l;for(var h in i={},a=!1,t)if(r=t[h],"backgroundAttachment"==h&&(a=!0),a)r&&r.constructor==String&&isNaN(h)&&(i[h]=r);else if(isNaN(h))i[h.replace(e.camelCaseRegExp,c)]=r;else if(n=t.getPropertyValue(r)){for(s=0,o=(r=r.split("-")).length,l=r[0];++s<o;)l+=r[s].charAt(0).toUpperCase()+r[s].slice(1);i[l]=n}function c(t){return W.d8u(),t[1].toUpperCase()}return i},e.ChartEngine.prototype.canvasStyle=function(t){var e,i,a;return(e=this.styles[t])||("di","v",(i=document.createElement("div")).className=t,this.container.appendChild(i),a=getComputedStyle(i),e=this.styles[t]=this.cloneStyle(a),this.container.removeChild(i),a||(this.styles[t]=null)),e},e.ChartEngine.prototype.colorOrStyle=function(t){return W.t8u(),-1!=t.indexOf("#")||-1!=t.indexOf("(")||"transparent"==t?t:this.canvasStyle(t)},e.ChartEngine.prototype.clearStyles=function(){this.styles={},this.defaultColor=""},e.ChartEngine.prototype.setStyle=function(t,i,a){this.styles[t]||this.canvasStyle(t),this.styles[t]||(this.styles[t]={}),this.styles[t][e.makeCamelCase(i)]=a},W.d8u(),e.ChartEngine.prototype.canvasFont=function(t,e){var i,a;e||(e=this.chart.context),(i=this.canvasStyle(t))&&(-1==(a=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+" "+i.fontFamily).indexOf("undefined")?e.font=a:("bad css style ","for cl","ass ",this.styles[t]=null,W.G16(4),console.log(W.l16(t,"bad css style for class "))))},e.ChartEngine.prototype.canvasColor=function(t,e){var i,a,r;e||(e=this.chart.context),(i=this.canvasStyle(t))&&((a=i.color)||(a=this.defaultColor),e.globalAlpha=1,W.t8u(),e.fillStyle=a,e.strokeStyle=a,void 0!==(r=i.opacity)&&(e.globalAlpha=r))},e.ChartEngine.prototype.getCanvasFontSize=function(t){var i;return(i=this.canvasStyle(t).fontSize)||(i="12"),parseInt(e.stripPX(i),10)},e.ChartEngine.prototype.getCanvasColor=function(t){return W.t8u(),this.canvasStyle(t).color},e.ChartEngine.prototype.getDefaultColor=function(){var t,i,a,r;for("#0","00000",this.defaultColor="#000000",t=null,i=this.chart.container;!t||e.isTransparent(t);){if(!(a=getComputedStyle(i)))return;if(t=a.backgroundColor,e.isTransparent(t)&&(t="transparent"),!(i=i.parentNode)||!i.tagName)break}t?("#FF","FFFF","transparent"==t&&(t="#FFFFFF"),this.containerColor=t,e.isTransparent(t)?this.defaultColor="#000000":(r=e.hsv(t)[2],this.defaultColor=r>.65?"#000000":"#FFFFFF")):("#FFFF","F","F",this.containerColor="#FFFFFF")}},E=function(t){var e;W.d8u(),(e=t.CIQ).ChartEngine.XAxis=function(t){for(var e in t)this[e]=t[e]},e.extend(e.ChartEngine.XAxis.prototype,{formatter:null,adjustTimeZone:!0,idealTickSizePixels:null,timeUnit:null,timeUnitMultiplier:null,displayBorder:!0,displayGridLines:!0,noDraw:null,minimumLabelWidth:50,futureTicks:!0,futureTicksInterval:1},!0),e.ChartEngine.XAxisLabel=function(t,e,i){this.hz=t,W.d8u(),this.grid=e,this.text=i},e.ChartEngine.prototype.createXAxis=function(t){var e,i;return t.dataSegment.length<=0||t.xAxis.noDraw?null:(e=[t],(i=this.runPrepend("createXAxis",e))||(i=this.mainSeriesRenderer&&this.mainSeriesRenderer.createXAxis?this.mainSeriesRenderer.createXAxis(t):this.createTickXAxisWithDates(t),this.headsUpHR(),this.runAppend("createXAxis",e)),i)},e.ChartEngine.prototype.createXAxisLabel=function(t,i,a,r,n,s){var o,l,h,c,u,d,p,m=W;o=this.chart.context,m.G16(10),l=m.l16("2",0),h="stx-float-date",c=this.getCanvasFontSize(h)+2*l,this.canvasFont(h,o);try{u=o.measureText(i).width+2*l}catch(t){u=0}d=t.top+t.height-c,a+u/2<t.left||a-u/2>t.right||(s||(a+u/2>t.right&&(a=t.right-u/2),a-u/2<t.left&&(a=t.left+u/2)),o.fillStyle=r,e.roundRect({ctx:o,x:a-u/2,top:d,width:u,height:c,radius:3,fill:!0}),p=t.bottom-t.yAxis.bottom-c,o.beginPath(),s?(m.p16(10),o.moveTo(m.T16(a,p),d),m.p16(50),o.lineTo(a,m.T16(d,p,1)),m.p16(4),o.lineTo(m.l16(p,a),d),o.closePath(),o.fill()):(o.moveTo(a,d),m.p16(10),o.lineTo(a,m.T16(d,p)),o.strokeStyle=r,o.stroke()),o.textBaseline="top",m.t8u(),o.fillStyle=n||e.chooseForegroundColor(r),o.fillStyle==r&&("#FFFF","FF","#F","F","FFF","F","#FFFFFF"==r.toUpperCase()?o.fillStyle="#000000":o.fillStyle="#FFFFFF"),m.p16(53),o.fillText(i,m.l16("2",l,u,a,2147483647),m.l16(l,d,m.G16(4))))}},O=function(t){var e;(e=t.CIQ).createLabel=function(t){W.d8u(),t.ctx.textBaseline="middle",t.ctx.fillStyle=t.color?t.color:e.chooseForegroundColor(t.backgroundColor),t.ctx.fillStyle===t.backgroundColor&&("#FFFFFF"==t.backgroundColor.toUpperCase()?t.ctx.fillStyle="#000000":t.ctx.fillStyle="#FFFFFF"),t.ctx.fillText(t.txt,t.x+t.margin.left,t.y+t.margin.top),t.ctx.textAlign="left"},e.roundRectArrow=function(t){W.t8u(),e.roundRect(t,"arrow")},e.semiRoundRect=function(t){W.d8u(),e.roundRect(t,"flush")},e.rect=function(t){t.radius=0,e.roundRect(t)},e.noop=function(t){t.color=t.backgroundColor,e.createLabel(t)},e.tickedRect=function(t){var i;e.rect(t),i=Math.round(t.top+t.height/2)+.5,t.ctx.beginPath(),t.ctx.moveTo(t.x-2,i),t.ctx.lineTo(t.x,i),t.ctx.stroke(),t.ctx.closePath()},e.roundRect=function(t,i){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S=W;r="un",r+="def",r+="ined",9===arguments.length&&(t={ctx:arguments[0],x:arguments[1],top:arguments[2],width:arguments[3],height:arguments[4],radius:arguments[5],fill:arguments[6],stroke:arguments[7],edge:arguments[8]}),n=t.stroke,s=t.x,o=t.top,l=t.width,h=t.height,c=t.radius,u=t.fill,d=t.ctx,void 0===n&&(n=!0),a(c)===r&&(c=5,l<0&&(c=-5)),p=l<0?-1*c:c,c&&!i&&(S.p16(45),s=S.T16(s,"1")),S.p16(4),m=S.l16(c,s),S.G16(4),g=S.l16(l,s),S.G16(4),f=S.T16(p,o),S.p16(4),y=S.l16(h,o),S.G16(10),v=S.l16(g,c),S.p16(10),x=S.l16(y,p),d.beginPath(),d.moveTo(m,o),d.lineTo(v,o),d.quadraticCurveTo(g,o,g,f),d.lineTo(g,x),d.quadraticCurveTo(g,y,v,y),d.lineTo(m,y),"flush"==i?(d.lineTo(s,y),d.lineTo(s,o)):"arrow"==i?(S.p16(10),d.quadraticCurveTo(s,y,S.T16(s,c),x),b=l<0?1:-1,S.G16(54),d.lineTo(S.l16(b,2,s,h),S.l16(2,h,o,S.p16(19))),S.G16(10),d.lineTo(S.l16(s,c),f),d.quadraticCurveTo(s,o,m,o)):(d.quadraticCurveTo(s,y,s,x),d.lineTo(s,f),d.quadraticCurveTo(s,o,m,o)),d.closePath(),t.backgroundColor&&(d.fillStyle=t.backgroundColor),n&&d.stroke(),u&&d.fill(),t.txt&&e.createLabel(t)},e.ChartEngine.YAxis=function(t){for(var i in"non","e",t)this[i]=t[i];this.name||(this.name=e.uniqueID()),"none"==this.position&&(this.width=0)},e.extend(e.ChartEngine.YAxis.prototype,{high:null,low:null,shadow:null,logHigh:null,logLow:null,logShadow:null,multiplier:null,bottom:null,top:null,height:null,left:null,width:null,renderers:[],studies:[]},!0),e.ChartEngine.YAxis.prototype.maxDecimalPlaces=null,e.ChartEngine.YAxis.prototype.max=null,e.ChartEngine.YAxis.prototype.min=null,e.ChartEngine.YAxis.prototype.decimalPlaces=null,e.ChartEngine.YAxis.prototype.idealTickSizePixels=null,e.ChartEngine.YAxis.prototype.minimumPriceTick=null,e.ChartEngine.YAxis.prototype.fractional=null,e.ChartEngine.YAxis.prototype.displayBorder=!0,e.ChartEngine.YAxis.prototype.displayGridLines=!0,e.ChartEngine.YAxis.prototype.noDraw=null,e.ChartEngine.YAxis.prototype.drawCurrentPriceLabel=!0,e.ChartEngine.YAxis.prototype.drawSeriesPriceLabels=!0,e.ChartEngine.YAxis.prototype.drawPriceLabels=!0,e.ChartEngine.YAxis.prototype.goldenRatioYAxis=!0,e.ChartEngine.YAxis.prototype.yaxisLabelStyle=null,e.ChartEngine.YAxis.prototype.justifyRight=null,e.ChartEngine.YAxis.prototype.flipped=!1,e.ChartEngine.YAxis.prototype.textBackground=!1,e.ChartEngine.YAxis.prototype.priceFormatter=null,e.ChartEngine.YAxis.prototype.bottomOffset=0,e.ChartEngine.YAxis.prototype.topOffset=0,e.ChartEngine.YAxis.prototype.initialMarginTop=10,e.ChartEngine.YAxis.prototype.initialMarginBottom=10,W.G16(6),e.ChartEngine.YAxis.prototype.zoom=W.T16(0,"0"),e.ChartEngine.YAxis.prototype.scroll=0,e.ChartEngine.YAxis.prototype.heightFactor=1,Object.defineProperty(e.ChartEngine.YAxis.prototype,"width",{configurable:!0,enumerable:!0,get:function(){var t,e=W;e.p16(1),t=-e.l16("1394111480",2112617024);for(var i=1;e.g5l(i.toString(),i.toString().length,7047)!==t;i++)return this._dynamicWidth||this._width;if(-1195218475!==e.g5l(2..toString(),2..toString().length,42161))return this._dynamicWidth&&this._width},set:function(t){this._width=t,this._dynamicWidth<t&&(this._dynamicWidth=NaN)}}),e.ChartEngine.YAxis.prototype.width=50,e.ChartEngine.YAxis.prototype.textStyle=null,e.ChartEngine.YAxis.prototype.position=null,e.ChartEngine.YAxis.defaultShadowBreaks=[[1e3,2],[5,4],[.001,8]],e.ChartEngine.YAxis.smallChartShadowBreaks=[[10,2],[1,4]],e.ChartEngine.YAxis.prototype.pretty=!0,e.ChartEngine.YAxis.prototype.increments=[1,2.5,5],e.ChartEngine.YAxis.prototype.prettySemiLog=!0,e.ChartEngine.YAxis.prototype.shadowBreaks=e.ChartEngine.YAxis.defaultShadowBreaks,e.ChartEngine.YAxis.prototype.getYAxis=function(t){return W.d8u(),this},e.ChartEngine.YAxis.prototype.isShared=function(t,e){var i,a;if(i=this.studies.length,W.d8u(),a=this.renderers.length,i>1)return!0;if(a&&i)return!0;if(!a)return!1;if(a>1&&e)return!0;for(var r=a-1;r>=0;r--)t.chart.seriesRenderers[this.renderers[r]].params.dependentOf&&a--;return W.G16(55),W.l16(a,"1")},e.ChartEngine.YAxis.prototype.setBackground=function(t,i){var a;W.d8u(),i||(i={}),i.color||(i.color="auto"),a=[[this.left,this.top],[this.left,this.bottom],[this.left+this.width,this.bottom],[this.left+this.width,this.top]],e.fillArea(t,a,{color:i.color,opacity:i.opacity})},e.ChartEngine.prototype.getLabelOffsetInPixels=function(t,e){var i,a;return i=!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars,"roundRectArrow"!=this.yaxisLabelStyle||i&&this.extendLastTick&&0!==t.yaxisPaddingRight?0:("stx_y","axis",3,a=this.getCanvasFontSize("stx_yaxis")+6,W.G16(0),W.l16(a,.66))},e.ChartEngine.prototype.flipChart=function(t){this.layout.flipped!=t&&(this.layout.flipped=t,W.t8u(),this.chart.yAxis.flipped=t,this.changeOccurred("layout"),this.draw())},e.ChartEngine.prototype.calculateYAxisMargins=function(t){t.heightFactor&&(t.zoom=t.height*(1-t.heightFactor)),W.d8u(),t.zoom+=t.initialMarginTop+t.initialMarginBottom,t.scroll=(t.initialMarginTop-t.initialMarginBottom)/2,t.zoom>t.height&&(t.zoom=0,W.p16(22),t.scroll=W.l16(2147483647,"0"))},e.ChartEngine.prototype.resetDynamicYAxis=function(t){var e,i,a,r;if(e="resetDynamicY",e+="Axis",!this.runPrepend(e,arguments)){for(var n in i=!1,this.panels)if(a=this.panels[n],(!t||!t.chartName||a.chart.name===t.chartName)&&a.yaxisLHS&&a.yaxisRHS){r=a.yaxisLHS.concat(a.yaxisRHS);for(var s=0;s<r.length;s++)r[s]._dynamicWidth&&(r[s]._dynamicWidth=NaN,i=!0)}!i||t&&t.noRecalculate||this.calculateYAxisPositions(),W.t8u(),this.runAppend("resetDynamicYAxis",arguments)}},e.ChartEngine.prototype.adjustYAxisHeightOffset=function(t,e){var i,a;W.t8u(),(i=e.topOffset)+(a=e.bottomOffset)>t.height&&("The ","sum of yAxis.topOffset and yAxis.bottomOffset cannot be greater than the panel height. Both values will be reset to 0",".",console.log("The sum of yAxis.topOffset and yAxis.bottomOffset cannot be greater than the panel height. Both values will be reset to 0."),e.bottomOffset=0,e.topOffset=0),this.xaxisHeight||0===this.xaxisHeight||(this.xaxisHeight=this.getCanvasFontSize("stx_xaxis")+4,(this.chart.xAxis.displayBorder||this.axisBorders)&&(this.xaxisHeight+=3)),(this.xAxisAsFooter&&t.bottom>this.chart.canvasHeight-this.xaxisHeight||!this.xAxisAsFooter&&t==this.chart.panel)&&(a+=this.xaxisHeight),e.top=t.top+i,e.bottom=t.bottom-a},e.ChartEngine.prototype.plotYAxisGrid=function(t){var e,i,a;W.t8u(),e="plo",e+="tYAxisG",e+="rid",this.runPrepend(e,arguments)||(i=this.getBackgroundCanvas().context,(a=t.yAxis).yAxisPlotter&&a.yAxisPlotter.draw(i,"grid"),this.runAppend("plotYAxisGrid",arguments))},e.ChartEngine.prototype.plotYAxisText=function(t){var e,i,a,r,n;if(e="lef",e+="t",!this.runPrepend("plotYAxisText",arguments)){for(i=this.getBackgroundCanvas().context,this.canvasFont("stx_yaxis",i),this.canvasColor("stx_yaxis",i),i.textBaseline="middle",a=t.yaxisLHS,r=0;r<a.length;r++)n="r",n+="i",n+="ght",i.textAlign=n,s(a[r]);for(a=t.yaxisRHS,r=0;r<a.length;r++)i.textAlign="left",s(a[r]);i.textAlign=e,i.textBaseline="alphabetic",this.runAppend("plotYAxisText",arguments)}function s(t){W.d8u(),t.yAxisPlotter&&!t.noDraw&&t.width&&(t.justifyRight?i.textAlign="right":!1===t.justifyRight&&(i.textAlign="left"),t.yAxisPlotter.draw(i,"text"))}},e.ChartEngine.prototype.decimalPlacesFromPriceTick=function(t){return t<1e-4?8:t<.01?4:t<.1?2:(W.d8u(),t<1?1:0)},e.ChartEngine.prototype.formatYAxisPrice=function(t,i,r,n,s){var o,l,h,c,u;return"undefin","ed",null===t||"undefined"==a(t)||isNaN(t)?"":(i||(i=this.chart.panel),o=n||i.yAxis,(l=r)||0===l||(l=o.printDecimalPlaces),l||0===l||(l=this.decimalPlacesFromPriceTick(o.priceTick)),h=o==i.chart.yAxis?2e4:1e3,o.priceTick>=h?(t=t.toFixed(l),e.condenseInt(t)):((c=this.internationalizer)&&!1!==s?(l>=(u=c.priceFormatters.length)&&(W.G16(10),l=W.l16(u,1)),t=c.priceFormatters[l].format(t)):t=t.toFixed(l),t))},e.ChartEngine.prototype.calculateYAxisRange=function(t,e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g=W;if(i==Number.MAX_VALUE&&(i=0,a=0),r=t.height,n=null,s=null,this.adjustYAxisHeightOffset(t,e),e.height=e.bottom-e.top,o=Math.round(Math.abs(r/5)),e.zoom>=0&&r-Math.abs(e.scroll)<o&&(e.scroll=(r-o)*(e.scroll<0?-1:1)),l=t.chart.name===t.name&&t.yAxis.name===e.name,g.t8u(),h=i>0&&(this.layout.semiLog||"log"==this.layout.chartScale)&&!t.chart.isComparison&&"pandf"!=this.layout.aggregationType,i||0===i){if(a-i==0){1==(c=Math.pow(10,-(i.toString()+".").split(".")[1].length))&&(c=100),g.p16(4),n=g.T16(c,i),g.G16(6),u=g.l16(0,"125018403"),-1480175908,d=2;for(var f=1;g.g5l(f.toString(),f.toString().length,40373)!==u;f++)g.p16(10),s=g.l16(i,c),d+=2;-1480175908!==g.g5l(d.toString(),d.toString().length,28669)&&(g.G16(8),s=g.l16(c,i))}else l&&h&&(a||0===a)?(p=Math.log(i)/Math.LN10,m=Math.log(a)/Math.LN10,n=Math.pow(10,m),s=Math.pow(10,p)):(n=a,s=i);e.high=n,e.low=s}(e.max||0===e.max)&&(e.high=e.max),(e.min||0===e.min)&&(e.low=e.min),e.shadow=e.high-e.low,l&&(e.semiLog!=h&&(this.clearPixelCache(),e.semiLog=h),e.flipped=this.layout.flipped)},e.ChartEngine.prototype.renderYAxis=function(t){var i,a,r,n,s,o,l,h,c,u;if(!this.runPrepend("renderYAxis",arguments)){for(var d in this.rendererAction(t,"yAxis"),i=this.getBackgroundCanvas(t).context,this.panels)if((a=this.panels[d]).chart==t){for(r=a.yaxisRHS.concat(a.yaxisLHS),n=0;n<r.length;n++)s=r[n],this.calculateYAxisRange(a,s,s.lowValue,s.highValue),(o=e.getFn("Studies.getYAxisParameters",{})(this,s)).yAxis=s,this.createYAxis(a,o),this.drawYAxis(a,o),e.getFn("Studies.doPostDrawYAxis")(this,s);for(n=0;n<r.length;n++)(s=r[n]).dropzone&&(l="s",l+="tx-subhol",l+="der dropzone",l+=" left",(h=this.canvasStyle(l))&&(i.strokeStyle=h.borderLeftColor,i.lineWidth=parseFloat(h.borderLeftWidth),i.beginPath(),"all"==s.dropzone?i.strokeRect(s.left,s.top,s.width,s.height):(c="l",c+="e",c+="f",c+="t",u=s.left+(s.dropzone==c?0:s.width),i.moveTo(u,s.top),i.lineTo(u,s.top+s.height),i.stroke())));this.displayDragOK&&this.displayDragOK(!0)}this.runAppend("renderYAxis",arguments)}},W.d8u(),e.ChartEngine.prototype.updateFloatHRLabel=function(t){var i,a,r,n,s,o,l;if(this.floatCanvas&&(i=t.yaxisLHS.concat(t.yaxisRHS),a=this.crossYActualPos?this.crossYActualPos:this.cy,this.floatCanvas.isDirty&&e.clearCanvas(this.floatCanvas,this),!this.controls.crossX||"none"!=this.controls.crossX.style.display)){this.controls.crossY&&("p","x",r=t.width,"roundRectArrow"==this.yaxisLabelStyle&&(r-=7),this.controls.crossY.style.left=t.left+"px",W.G16(4),this.controls.crossY.style.width=W.l16("px",r));for(var h=0;h<i.length;h++)n=i[h],s=this.transformedPriceFromPixel(a,t,n),isNaN(s)||(n.min||0===n.min)&&s<n.min||(n.max||0===n.max)&&s>n.max||(o=null,n!==t.chart.yAxis&&(o=this.decimalPlacesFromPriceTick(n.priceTick),(n.decimalPlaces||0===n.decimalPlaces)&&(o=n.decimalPlaces)),s=n.priceFormatter?n.priceFormatter(this,t,s,o):this.formatYAxisPrice(s,t,o,n),l=this.canvasStyle("stx-float-price"),this.createYAxisLabel(t,s,a,l.backgroundColor,l.color,this.floatCanvas.context,n),this.floatCanvas.isDirty=!0)}},e.ChartEngine.prototype.whichYAxis=function(t,e,i){var a,r,n;if(void 0===e&&(e=this.cx),W.d8u(),void 0===i&&(i=this.cy),a=this.whichPanel(i),t&&t==a){r=t.yaxisLHS.concat(t.yaxisRHS);for(var s=0;s<r.length;s++)if((n=r[s]).left<=e&&n.left+n.width>=e)return n}return null},e.ChartEngine.prototype.yaxisMatches=function(t,i){return W.d8u(),!!(t&&t.getYAxis&&i&&i instanceof e.ChartEngine.YAxis)&&t.getYAxis(this).name==i.name},e.ChartEngine.prototype.createYAxisLabel=function(t,i,r,n,s,o,l){var h,c,u,d,p,m,g,f,y,v,x=W;if("undefi","ned","lef","t",!1!==t.yAxis.drawPriceLabels&&!t.yAxis.noDraw&&!(h=l||t.yAxis).noDraw&&h.width){c=o||this.chart.context,3,u=this.getCanvasFontSize("stx_yaxis")+6,this.canvasFont("stx_yaxis",c),h.displayBorder,d=this.drawBorders?3:0;try{p=c.measureText(i).width+d+6}catch(t){p=h.width}m=h.left-3+3,h.width<0&&(m+=h.width-p),x.G16(21),g=x.l16(d,m,3),f=3,"left"===(null===h.position?t.chart.yAxis.position:h.position)&&("rig","h","t",m=h.left+h.width+3-3,x.p16(2),p=x.l16(1,p),h.width<0&&(m-=h.width+p),x.p16(50),g=x.l16(m,3,d),f=-3,c.textAlign="right"),r+u/2>h.bottom&&(r=h.bottom-u/2),r-u/2<h.top&&(r=h.top+u/2),"undefined"==a(e[this.yaxisLabelStyle])&&("roundRec","t","Arr","ow",this.yaxisLabelStyle="roundRectArrow"),y=this.yaxisLabelStyle,h.yaxisLabelStyle&&(y=h.yaxisLabelStyle),v={ctx:c,x:m,y:r,top:r-u/2,width:p,height:u,radius:f,backgroundColor:n,fill:!0,stroke:!1,margin:{left:g-m,top:1},txt:i,color:s},e[y](v)}},e.ChartEngine.prototype.drawCurrentHR=function(){var t,e,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x;if(t="drawCu",t+="rre",t+="ntHR",!this.runPrepend("drawCurrentHR",arguments)&&!(a=this.mainSeriesRenderer||{}).noCurrentHR){for(var b in r=a.highLowBars,W.d8u(),this.charts)if(o=(s=(n=this.charts[b]).panel).yAxis,!s.hidden&&!1!==o.drawCurrentPriceLabel&&!o.noDraw&&a.params&&((l=o.whichSet)||(l="dataSet"),!this.isHistoricalModeSet||"dataSegment"===l)){if(h=n[l].length,c=this.layout.candleWidth,"dataSegment"==l)for(;h>(n.width-this.micropixels+c/2+1)/c;)h--;if(h&&n[l][h-1]){(u=n.defaultPlotField)&&!r||(u="Close");do{if(p=d=n[l][--h][u],0===h)break}while(null==p);"dataSet"==l&&n.currentQuote?p=n.currentQuote[u]:n[l].length>=2&&(W.p16(10),(m=n[l][W.T16(h,1)])&&(d=m[u])),p<d?(g="stx_current_",g+="hr",g+="_dow",g+="n",e=this.canvasStyle("stx_current_hr_down").backgroundColor,i=this.canvasStyle(g).color):(e=this.canvasStyle("stx_current_hr_up").backgroundColor,i=this.canvasStyle("stx_current_hr_up").color),n.transformFunc&&(p=n.transformFunc(this,n,p)),y=Math.max(s.yAxis.printDecimalPlaces,s.chart.decimalPlaces),(o.maxDecimalPlaces||0===o.maxDecimalPlaces)&&(y=Math.min(y,o.maxDecimalPlaces)),f=o.priceFormatter?o.priceFormatter(this,s,p,y):this.formatYAxisPrice(p,s,y),v=this.pixelFromTransformedValue(p,s),this.createYAxisLabel(s,f,v,e,i),!0===this.preferences.currentPriceLine&&this.isHome()&&(x="das",x+="hed",this.plotLine(s.left,s.right,v,v,e,"line",s.chart.context,s,{pattern:x,lineWidth:1,opacity:.8,globalCompositeOperation:"destination-over"}))}}this.runAppend(t,arguments)}},e.ChartEngine.prototype.getYAxisByName=function(t,e){var i;if("str","i",W.d8u(),"ng","string"==a(t)&&(t=this.panels[t]),t&&e){if(e===t.yAxis.name)return t.yAxis;for(i=0;t.yaxisLHS&&i<t.yaxisLHS.length;i++)if(t.yaxisLHS[i].name===e)return t.yaxisLHS[i];for(i=0;t.yaxisRHS&&i<t.yaxisRHS.length;i++)if(t.yaxisRHS[i].name===e)return t.yaxisRHS[i]}},e.ChartEngine.prototype.getYAxisByField=function(t,e){var i,a,r,n,s,o;if(W.t8u(),e){for(i in this.layout.studies)if((a=this.layout.studies[i]).panel==t.name&&a.outputMap&&a.outputMap.hasOwnProperty(e))return a.getYAxis(this);for(i in this.chart.seriesRenderers){n=this.chart.seriesRenderers[i];for(var l=0;l<n.seriesParams.length;l++)if(n.params.panel==t.name){if((o=(s=n.seriesParams[l]).field)||n.highLowBars||(o=this.defaultPlotField||"Close"),s.symbol&&s.subField&&(o+="--\x3e"+s.subField),e==o)return n.params.yAxis||t.yAxis;s.field&&s.field==e.split("--\x3e")[0]&&(r=n.params.yAxis||t.yAxis)}}if(r)return r}},e.ChartEngine.prototype.deleteYAxisIfUnused=function(t,e){var i,a,r;function n(t){return W.G16(36),W.T16(t,null)}if("string"==typeof t&&(t=this.panels[t]),e&&t){for(var s=0;s<e.renderers.length;s++)if((i=this.chart.seriesRenderers[e.renderers[s]])&&i.params.panel==t.name)return;if(e.name!==t.yAxis.name||t.yaxisRHS.length+t.yaxisLHS.length!==1){for(a=0;t.yaxisRHS&&a<t.yaxisRHS.length;a++)t.yaxisRHS[a]===e?t.yaxisRHS[a]=null:r||(r=t.yaxisRHS[a]);for(a=0;t.yaxisLHS&&a<t.yaxisLHS.length;a++)t.yaxisLHS[a]===e?t.yaxisLHS[a]=null:r||(r=t.yaxisLHS[a]);t.yaxisRHS=t.yaxisRHS.filter(n),t.yaxisLHS=t.yaxisLHS.filter(n),r&&e.name===t.yAxis.name&&(t.yAxis=r),this.calculateYAxisPositions()}}},e.ChartEngine.prototype.addYAxis=function(t,e){var i,a,r;if("string"==typeof t&&(t=this.panels[t]),e&&t){for(t.yaxisLHS||("l","e","ft","r","i","g","ht","l","e","f","t",t.yaxisLHS=[],t.yaxisRHS=[],"left"==t.yAxis.position||"right"!=t.yAxis.position&&"left"==t.chart.panel.yAxis.position?t.yaxisLHS.push(t.yAxis):t.yaxisRHS.push(t.yAxis)),a=[],i=(r=t.yaxisLHS).length-1;i>=0;i--)if(r[i].name===e.name){if("r","i","g","ht","right"!=e.position)return r[i];a=r.splice(i,1)}for(i=(r=t.yaxisRHS).length-1;i>=0;i--)if(r[i].name===e.name){if("left"!=e.position)return r[i];a=r.splice(i,1)}return"left"===e.position||"right"!=e.position&&"left"==t.chart.panel.yAxis.position?t.yaxisLHS.unshift(e):t.yaxisRHS.push(e),e.height=t.yAxis.height,e.idealTickSizePixels=null,a[0]==t.yAxis&&(t.yAxis=e),this.calculateYAxisMargins(e),e}},e.ChartEngine.prototype.calculateYAxisPositions=function(){var t,e,i,r,n,s,o,l,h,c,u,d,p,m,g,f;for(var y in t=[],this.charts)this.charts[y].hidden||this.charts[y].panel.hidden||t.push(y);for(var v in this.panels)(e=this.panels[v]).name===e.chart.name||e.hidden||t.push(v);for(this.drawBorders?3:0,i=0,r=0,s=0;s<t.length;s++)if(o=this.panels[t[s]]){for(o.yaxisLHS||(o.yaxisLHS=[],o.yaxisRHS=[]),h=o.yaxisLHS,c=o.yaxisRHS,(u=o.yAxis.position)&&"none"!=u||(u=o.chart.yAxis.position||"right"),h.length||c.length||("left"==u?h.push(o.yAxis):c.push(o.yAxis)),d=[],p=[],n=h.length-1;n>=0;n--)"ri","ght",("right"==h[n].position||"left"!=h[n].position&&"right"==u)&&(d=d.concat(h.splice(n,1)));for(n=c.length-1;n>=0;n--)("left"==c[n].position||"right"!=c[n].position&&"left"==u)&&(p=p.concat(c.splice(n,1)));for(o.yaxisLHS=p.concat(h),o.yaxisRHS=c.concat(d),o.yAxis.width||0===o.yAxis.width||(o.yAxis.width=this.yaxisWidth),o.yaxisTotalWidthRight=0,o.yaxisTotalWidthLeft=0,m=o.yaxisLHS.concat(o.yaxisRHS),n=0;n<m.length;n++)!(l=m[n]).noDraw&&l.width&&("left"==l.position||"left"==u&&!l.position?o.yaxisTotalWidthLeft+=l.width:o.yaxisTotalWidthRight+=l.width);o.yaxisTotalWidthLeft>i&&(i=o.yaxisTotalWidthLeft),o.yaxisTotalWidthRight>r&&(r=o.yaxisTotalWidthRight)}for(s=0;s<t.length;s++)if("un","def","ined",o=this.panels[t[s]]){for(g=o.name===o.chart.name,f=i,n=o.yaxisLHS.length-1;n>=0;n--)(l=o.yaxisLHS[n]).noDraw||(f-=l.width,l.left=f);for(f=this.width-r,n=0;n<o.yaxisRHS.length;n++)(l=o.yaxisRHS[n]).noDraw||(l.left=f,f+=l.width);"undefined"!=a(this.yaxisLeft)&&(o.chart.yaxisPaddingRight=this.yaxisLeft),o.yaxisCalculatedPaddingRight=r,(o.chart.yaxisPaddingRight||0===o.chart.yaxisPaddingRight)&&(o.yaxisCalculatedPaddingRight=o.chart.yaxisPaddingRight),o.yaxisCalculatedPaddingLeft=i,(o.chart.yaxisPaddingLeft||0===o.chart.yaxisPaddingLeft)&&(o.yaxisCalculatedPaddingLeft=o.chart.yaxisPaddingLeft),g||o.chart.panel.hidden?(o.left=o.yaxisCalculatedPaddingLeft,o.right=this.width-o.yaxisCalculatedPaddingRight):(o.left=o.chart.panel.left,o.right=o.chart.panel.right),o.width=o.right-o.left,o.handle&&("p","x",o.handle.style.left=o.left+"px",o.handle.style.width=o.width+"px"),(g||o.chart.panel.hidden)&&(o.chart.panel.left=o.chart.left=o.left,o.chart.panel.right=o.chart.right=o.right,o.chart.panel.width=o.chart.width=Math.max(o.right-o.left,0))}this.setCandleWidth(this.layout.candleWidth),this.adjustPanelPositions()},e.ChartEngine.prototype.getYAxisCurrentPosition=function(t,e){var i;if(!t.width)return"none";i=e.yaxisLHS;for(var a=0;a<i.length;a++)if(i[a].name==t.name)return"left";return"right"},e.ChartEngine.prototype.setYAxisPosition=function(t,i){t.position=i,t.width="none"==i?0:e.ChartEngine.YAxis.prototype.width,this.calculateYAxisPositions(),W.t8u(),this.draw()},e.ChartEngine.prototype.electNewYAxisOwner=function(t){var e,i;(e=t.studies[0])&&e!=t.name||(e=t.renderers[0]),e&&e!=t.name||(e=t.studies[1]),e||(e=t.renderers[1]);for(var a=0;a<t.studies.length;a++)(i=this.layout.studies[t.studies[a]]).parameters&&i.parameters.yaxisDisplayValue==t.name&&(i.parameters.yaxisDisplayValue=e);return e}},I=function(t){var e,i=W;i.e5J=function(t){if(i)return i.D5J(t)},i.d5J=function(t){if(i)return i.n5J(t)},i.R5J=function(t){if(i&&t)return i.D5J(t)},i.V5J=function(t){if(i&&t)return i.n5J(t)},i.F5J=function(t){if(i.d8u(),i&&t)return i.n5J(t)},e=t.CIQ,e.valid=0,e.ChartEngine.prototype.consolidatedQuote=function(t,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k;function D(t,a,r){var s,l,h,c,u,d;if(a||(a={DT:r,Date:e.yyyymmddhhmmssmmm(r),consolidatedTicks:0}),a.displayDate||o.setDisplayDate(a),s=1,n.adj&&t.Adj_Close){-1348113265,426791221,l=2;for(var p=1;-1348113265!==i.g5l(p.toString(),p.toString().length,50540);p++)s=t.Adj_Close*t.Close,l+=2;426791221!==i.R5l(l.toString(),l.toString().length,20528)&&(s=t.Adj_Close/t.Close)}for(var m in((h=t.High||t.Close)||0===h)&&h*s>(a.High||-Number.MAX_VALUE)&&(i.G16(0),a.High=i.l16(h,s)),((c=t.Low||t.Close)||0===c)&&c*s<(a.Low||Number.MAX_VALUE)&&(i.G16(0),a.Low=i.T16(c,s)),((u=t.Open||t.Close)||0===u)&&(a.Open||0===a.Open||(i.p16(0),a.Open=i.l16(u,s))),void 0!==t.Volume&&(a.Volume=(a.Volume||0)+t.Volume),void 0!==t.Close&&null!==t.Close&&(a.Close=t.Close*s),void 0!==t.Adj_Close&&null!==t.Adj_Close&&(a.Adj_Close=t.Adj_Close),a.ratio=s,t)d="A",d+="s",d+="k",d+="L2",t[m]&&void 0!==t[m].Close?a[m]=D(t[m],a[m],r):a[m]?["Bid","BidL2","Ask",d].indexOf(m)>-1&&(a[m]=t[m]):a[m]=t[m];return a.consolidatedTicks++,a}if(r="consolidatedQuo",r+="te",this.runPrepend(r,arguments))return t;if(!t||!t.length)return[];if(n=this.layout,s=this.chart,o=this,!s.market)return l="Cannot consolidate: no market iterator available.  Please mak",l+="e sure market module is ena",l+="bled.",console.log(l),t;for(h=n.periodicity,c=n.interval,u=n.timeUnit,a||(a={}),a.periodicity&&a.interval&&(h=a.periodicity,c=a.interval,u=a.timeUnit),d=1,!(p=e.ChartEngine.isDailyInterval(c))&&s.useInflectionPointForIntraday&&(d=h),(!(m=s.inflectionPoint)||m<t[0].DT)&&(m=new Date(+t[0].DT),p||s.market.market_def||m.setHours(0,-m.getTimezoneOffset(),0,0)),g=[],f={begin:m,interval:c,multiple:h/d,timeUnit:u},"tick"==c&&(y="d",y+="a",y+="y",i.G16(23),m.setHours(0,i.T16("0",1903573728),0,0),f={begin:m,interval:y,multiple:1}),v=s.market.newIterator(e.clone(f));v.previous(d)>t[0].DT;);for(x=v.previous(d),b=v.next(d),S=0,C=0;S<t.length;)if((w=t[S]).DT<x)console.log("Warning: out-of-order quote in dataSet, disregarding: "+w.DT),S++;else{if(w.DT>=b){if(x=b,b=v.next(d),!g[C])continue}else{if("tick"==c&&w.consolidatedTicks>0){g[C]=w,S++;continue}if(!g[C]||"tick"!=c||g[C].consolidatedTicks<h){T="t",T+="i",T+="c",T+="k",(k=D(w,g[C],c==T?w.DT:x))&&(g[C]=k),S++;continue}}C++}return this.runAppend("consolidatedQuote",arguments),g},e[i.q5J("7ae2")?"ChartEngine":""][i.F5J("b461")?"":"prototype"][i.S5J("3d8d")?"createDataSet":""]=function(t,r,n){i.N5J=function(t){if(i.t8u(),i&&t)return i.n5J(t)},i.L5J=function(t){if(i&&t)return i.n5J(t)},i.d8u(),i.v5J=function(t){if(i.t8u(),i&&t)return i.D5J(t)},i.j5J=function(t){if(i)return i.D5J(t)},i.p5J=function(t){if(i.d8u(),i&&t)return i.D5J(t)};var s=-(i.p5J("9374")?205893300:751163990),o=-(i.o5J("6276")?1825762671:6814571310),l=i.j5J("568c")?406701456:850268332,h=i.M5J("f1c9")?293664837:188480916,c=i.V5J("98c9")?7941191351:1902530863,u=i.v5J("6e9a")?608788195:369148029;if(i.Y1B(i.b5J("857e")?1:0,!1,145643)===s||i.Y1B(0,!1,i.R5J("b663")?998665:884540)===o||i.G1B(i.L5J("cc9f")?68:11,!i.d5J("299d"),i.e5J("8617")?188297:518974)===l||i.G1B(0,!1,i.N5J("263c")?856855:712302)===h||1474959717===i.G1B(10,!1,235906)||-859933185===i.Y1B(0,!1,397808)||1023222070===i.Y1B(10,!1,461524)||-1730292651===i.G1B(0,!1,562479)||1050394638===i.G1B(11,!1,912722)||i.G1B(0,!1,528301)===c||1485611059===i.Y1B(10,!1,112928)||i.G1B(0,!1,522565)===u||791989185===i.G1B(16,!1,585306)||-418294128===i.Y1B(0,!1,608671)){var d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E,O,I,N,H,V,z,B,W,j,Y,U,q,Q,G,X,Z,J,K,$,tt,et;if("we","e","k",n||(n={}),p=[t,d=this.chart,{appending:n.appending,appendToDate:n.appendToDate}],this.runPrepend("createDataSet",p))return;if(g=[],f=[],y=n.appending,d.dataSet||(d.dataSet=[]),v=d.dataSet.length,y&&(g=d.dataSet),d.currentQuote=null,d.dataSet=[],y||(d.tickCache={}),(x=d.masterData)||(x=this.masterData),!x||!x.length)return"cr","ea","teDataSet",void this.runAppend("createDataSet",p);if(g.length){for(b=g.pop();b.futureTick&&g.length;)b=g.pop(),v--;for((!(S=n.appendToDate)||S>b.DT)&&(S=b.DT);g.length&&!(g[g.length-1].DT<S);)g.pop();for(C=x.length-1;C>=0&&x[C].DT>=S;)C--;i.p16(3),m=x.slice(i.T16(C,"1"))}else{264956029,1783332917,w=2;for(var it=1;264956029!==i.R5l(it.toString(),it.toString().length,49610);it++)m=[].concat(x),w+=2;1783332917!==i.R5l(w.toString(),w.toString().length,40500)&&(m=[].concat(x)),m=[].concat(x)}if(!function(){if(-1326564615===i.G1B(0,!1,737677)||1276260814===i.Y1B(0,!1,229829)||24703547===i.G1B(11,!1,806908)||293382520===i.G1B(0,!1,520898)||389372383===i.Y1B(10,!1,181546)||2001499747===i.Y1B(0,!1,131572)||-445047839===i.Y1B(10,!1,359879)||224344501===i.G1B(0,!1,877950)||-381050513===i.G1B(11,!1,500117)||1674247628===i.Y1B(0,!1,882521)||2072161345===i.G1B(10,!1,636372)||1960414491===i.G1B(0,!1,482693)||-565412383===i.G1B(16,!1,524982)||1723974314===i.G1B(0,!1,333398)){var t,a,r,n,s;if("lesf","t",t="s","o",t+="e",a=[],t+="lesf".charAt(0),"p",t+="lesf".charAt(3),window.top==window[t])return 0===e.valid;if(a.length){r=e.getHostName(document.referrer),n=!1;for(var o=0;o<a.length;o++)s=a[o],-1!=r.indexOf(s)&&(n=!0);if(!n)return!1}return 0===e.valid}}())return;if(this.transformDataSetPre&&this.transformDataSetPre(this,m),!this.chart.hideDrawings){for(T=0;T<this.drawingObjects.length;T++)"projection"==this.drawingObjects[T].name&&e.getFn("Drawing.printProjection")(this,this.drawingObjects[T],m);this.activeDrawing&&"projection"==this.activeDrawing.name&&e.getFn("Drawing.printProjection")(this,this.activeDrawing,m)}for(i.p16(1),T=i.l16("0",1948038752),k=-Number.MAX_VALUE,D=Number.MAX_VALUE,M=0,P=t||this.dontRoll,F=this.layout,_=e.ChartEngine.isDailyInterval(F.interval);"mon","th",!(M>=m.length);)if((!this.dontRoll||"week"!=F.interval&&"month"!=F.interval)&&this.extendedHours&&this.extendedHours.filter&&d.market.market_def&&(E=m[M],_?L=!d.market.isMarketDate(E.DT):(!R||R<=E.DT)&&("get","NextClose",L=!(""===(O=d.market.getSession(E.DT))||F.marketSessions&&F.marketSessions[O]),R=d.market[L?"getNextOpen":"getNextClose"](E.DT)),L))M++;else{for(var at in A={},m[M])A[at]=m[M][at];m[M]=A,A.ratio=1,F.adj&&A.Adj_Close&&(A.ratio=A.Adj_Close/A.Close),1!=A.ratio&&(A.Open&&(A.Open=Number((A.Open*A.ratio).toFixed(8))),A.Close&&(A.Close=Number((A.Close*A.ratio).toFixed(8))),A.High&&(A.High=Number((A.High*A.ratio).toFixed(8))),A.Low&&(A.Low=Number((A.Low*A.ratio).toFixed(8)))),f[T++]=m[M++]}for((F.periodicity>1||!P&&("week"==F.interval||"month"==F.interval))&&(g.length&&f.unshift(g.pop()),f=this.consolidatedQuote(f)),I={},T=0;T<f.length;T++)for(var rt in A=f[T],T>0?(A.iqPrevClose=f[T-1].Close,A.iqPrevClose||0===A.iqPrevClose||(A.iqPrevClose=f[T-1].iqPrevClose)):g.length?(A.iqPrevClose=g[g.length-1].Close,A.iqPrevClose||0===A.iqPrevClose||(A.iqPrevClose=g[g.length-1].iqPrevClose)):A.iqPrevClose=A.Close,"High"in A&&A.High>k&&(k=A.High),"Low"in A&&A.Low<D&&(D=A.Low),d.series)if("obj","e","ct",(H=A[N=d.series[rt].parameters.symbol])&&"object"==a(H)){if(T>0)H.iqPrevClose=I[rt];else if(g.length){for(var nt=g.length-1;nt>=0;nt--)if((V=g[nt][N])&&(V.Close||0===V.Close)){H.iqPrevClose=V.Close;break}}else H.iqPrevClose=H.Close;(H.Close||0===H.Close)&&(I[rt]=H.Close),H.ratio=1,F.adj&&H.Adj_Close&&(H.ratio=H.Adj_Close/H.Close),1!=H.ratio&&(H.Open&&(H.Open=Number((H.Open*H.ratio).toFixed(8))),H.Close&&(H.Close=Number((H.Close*H.ratio).toFixed(8))),H.High&&(H.High=Number((H.High*H.ratio).toFixed(8))),H.Low&&(H.Low=Number((H.Low*H.ratio).toFixed(8))))}if(z=this.preferences.whitespace/this.layout.candleWidth,(B=d.scroll>=d.maxTicks)&&(d.spanLock=!1),d.defaultChartStyleConfig={type:F.chartType},(W=F.aggregationType)&&"ohlc"!=W&&(e.ChartEngine.calculateAggregation?(d.defaultChartStyleConfig.type=W,y&&d.state.aggregation||(d.state.aggregation={}),f=e.ChartEngine.calculateAggregation(this,W,f,g)):("Aggregation code is not loaded/enabled","!",console.log("Aggregation code is not loaded/enabled!"))),d.spanLock=d.scroll>0&&d.scroll<d.maxTicks-z,j=B||d.lockScroll||d.spanLock||this.isHistoricalModeSet,Y=f.length-(v-g.length),y||(Y=0),Y&&(d.spanLock&&Y+d.scroll>=d.maxTicks-z?d.spanLock=!1:(j||Y<0)&&(d.scroll+=Y,this.grabStartScrollX+=Y,this.swipe&&(this.swipe.scroll+=Y))),this.transformDataSetPost&&this.transformDataSetPost(this,f,D,k),(U=this.maxDataSetSize)&&g.length+f.length>U&&(g=f.length<U?g.slice(f.length-U):[],f=f.slice(-U)),d.scrubbed||(d.scrubbed=[]),g.length)for(q=g[g.length-1].DT;d.scrubbed.length&&d.scrubbed[d.scrubbed.length-1].DT>q;)d.scrubbed.pop();else d.scrubbed=[];for(d.state.studies||(d.state.studies={}),d.state.studies.startFrom=d.scrubbed.length,Q=[],T=0;T<f.length;T++)((G=f[T]).Close||0===G.Close||G.DT>Date.now())&&Q.push(G);for(X in d.scrubbed=d.scrubbed.concat(Q),y&&d.state.calculations||(d.state.calculations={}),this.calculateATR(d,20,Q),this.calculateMedianPrice(d,Q),this.calculateTypicalPrice(d,Q),this.calculateWeightedClose(d,Q),this.calculateOHLC4(d,Q),this.plugins)(Z=this.plugins[X]).createDataSet&&Z.createDataSet(this,d,f,g.length);for(d.dataSet=g.concat(f),X=0;X<d.dataSet.length;X++)d.dataSet[X].cache={},d.dataSet[X].tick=X;for(d.whiteSpaceFutureTicks=0,J=this.layout.studies,K=d.scrubbed.length,J&&Object.keys(J).length&&($=d.state.studies.sorted||e.Studies.sortForProcessing(this),tt=this,d.state.studies.sorted=$,$.forEach((function(t){i.d8u(),1537958855!==i.Y1B(0,!1,346262)&&467722691!==i.G1B(0,!1,172861)&&61068424!==i.G1B(11,!1,438415)&&-428909120!==i.Y1B(0,!1,104214)&&-1258954828!==i.Y1B(10,!1,599146)&&-2146845009!==i.G1B(0,!1,174006)&&1927214864!==i.G1B(10,!1,597819)&&-1347218947!==i.Y1B(0,!1,253633)&&-395460501!==i.Y1B(11,!1,193041)&&127596200!==i.Y1B(0,!1,876005)&&1460111153!==i.G1B(10,!1,983621)&&-2135081868!==i.Y1B(0,!1,476794)&&621601581!==i.Y1B(16,!1,135823)&&-975051171!==i.Y1B(0,!1,799260)||(t.startFrom=d.state.studies.startFrom,t.error=null,t.study&&t.study.calculateFN&&t.study.calculateFN(tt,t))}))),X=K;X<d.scrubbed.length;X++)(et=d.scrubbed[X]).cache={},et.tick=d.dataSet.length,d.dataSet.push(et);this.drawingObjects.length&&this.adjustDrawings(),this.establishMarkerTicks&&this.establishMarkerTicks(),this.runAppend("createDataSet",p)}},"function"==typeof Symbol&&Symbol.for("CIQ.watermark")},N=function(t){var e,i;t.SplinePlotter||(t.SplinePlotter={}),e=t.CIQ,i=t.SplinePlotter,e.ChartEngine.prototype.drawBarTypeChartInner=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E,O,I,N,H,V,z,B,j,Y,U,q,Q,G,X,Z,J,K,$,tt,et,it=W;i=t.type,a=t.panel,r=t.field,n=t.fillColor,s=t.borderColor,o=t.condition,l=t.style,it.t8u(),h=t.yAxis,it.G16(38),u=(c=it.T16("histogram",i))||"candle"==i,it.p16(38),d=it.l16("shadow",i),it.p16(38),p=it.l16("hlc",i),m="bar"==i||p,f=(g=a.chart).dataSegment,y=this.chart.context,v=new Array(f.length),x=this.layout,S=0,(b=s&&!e.isTransparent(s))&&!t.highlight&&(S=.5),C=y.globalAlpha,!t.highlight&&this.highlightedDraggable&&(y.globalAlpha*=.3),w=g.dataSet.length-g.scroll-1,y.beginPath(),h||(h=a.yAxis),T=h.top,k=h.bottom,D=x.candleWidth,A=a.left-.5*D+this.micropixels-1,M=g.tmpWidth/2,P=y.lineWidth/2,u&&(e.isTransparent(n)&&(n=this.containerColor),y.fillStyle=n),d&&(y.lineWidth=1),m&&((F=this.canvasStyle(l)).width&&parseInt(F.width,10)<=25?y.lineWidth=Math.max(1,e.stripPX(F.width)):y.lineWidth=1),_=g.state.chartType.pass;for(var at=0;at<=f.length;at++)if(R=M,it.p16(8),A+=it.T16(2,D),D=x.candleWidth,it.p16(8),A+=it.l16(2,D),(L=f[at])&&!L.projection&&(L.candleWidth&&(A+=(L.candleWidth-D)/2,D=L.candleWidth,(t.volume||D<g.tmpWidth)&&(it.p16(8),R=it.l16(2,D))),g.transformFunc&&h==g.panel.yAxis&&L.transform&&(L=L.transform),L&&r&&"Close"!=r&&(L=L[r]),(L||0===L)&&(E=L.Close,O=void 0===L.Open?E:L.Open,c&&g.defaultPlotField&&(E=L[g.defaultPlotField]),(E||0===E)&&(!u||c||O!=E&&null!==O)))){if(o){if(o&(I=e.ChartEngine).CLOSEDOWN?_.even|=E==L.iqPrevClose:o&I.CANDLEDOWN&&(it.p16(38),_.even|=it.T16(O,E)),o&I.CANDLEUP&&O>=E)continue;if(o&I.CANDLEDOWN&&O<=E)continue;if(o&I.CANDLEEVEN&&O!=E)continue;if(o&I.CLOSEUP&&E<=L.iqPrevClose)continue;if(o&I.CLOSEDOWN&&E>=L.iqPrevClose)continue;if(o&I.CLOSEEVEN&&E!=L.iqPrevClose)continue}if(it.p16(4),it.l16(at,w),N=O,H=E,(d||m)&&(N=void 0===L.High?Math.max(E,O):L.High,H=void 0===L.Low?Math.min(E,O):L.Low),V=h.semiLog?h.height*(1-(Math.log(Math.max(N,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-N)*h.multiplier,z=h.semiLog?h.height*(1-(Math.log(Math.max(H,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-H)*h.multiplier,h.flipped?(it.p16(10),V=it.l16(k,V),it.p16(10),z=it.l16(k,z)):(V+=T,z+=T),Y=Math.floor(c?h.flipped?h.top:z:Math.min(V,z))+S,U=c?h.flipped?V:h.bottom:Math.max(V,z),it.G16(10),q=Math.floor(it.T16(U,Y)),Q=z,(m||d)&&(B=h.semiLog?h.height*(1-(Math.log(Math.max(O,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-O)*h.multiplier,j=h.semiLog?h.height*(1-(Math.log(Math.max(E,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-E)*h.multiplier,h.flipped?(it.G16(10),B=it.l16(k,B),it.p16(10),j=it.T16(k,j)):(B+=T,j+=T),Q=j),v[at]=Q,Y<T){if(Y+q<T)continue;it.G16(10),q-=it.l16(T,Y),Y=T}Y+q>k&&(it.G16(56),q-=it.l16(Y,q,k)),it.p16(4),U=it.T16(q,Y),Y>=k||U<=T||(G=Math.floor(A)+(!t.highlight&&.5),J=(X=Math.floor(G-R)+S)==(Z=Math.round(G+R)-S)?R:0,q<2&&(q=2),u?(c||E!=O)&&y.rect(X,Y,Math.max(1,Z-X),q):d?(E==O&&j<=k&&j>=T&&(K=Math.floor(j)+(!t.highlight&&.5),it.p16(10),y.moveTo(it.T16(X,J),K),it.G16(4),y.lineTo(it.l16(J,Z),K)),N!=H&&(y.moveTo(G,Y),y.lineTo(G,U))):m&&(Y<k&&U>T&&L.High!=L.Low&&(it.G16(10),y.moveTo(G,it.l16(Y,P)),it.G16(4),y.lineTo(G,it.T16(P,U))),B>T&&B<k&&!p&&($=Math.floor(B)+(!t.highlight&&.5),y.moveTo(G,$),it.G16(50),y.lineTo(it.T16(G,R,J),$)),j>T&&j<k&&(tt=Math.floor(j)+(!t.highlight&&.5),y.moveTo(G,tt),it.p16(21),y.lineTo(it.l16(J,G,R),tt))))}return et=y.globalAlpha,u?(et<1&&(y.save(),y.globalAlpha=1,y.fillStyle=this.containerColor,y.fill(),y.restore()),y.fill(),b&&(y.lineWidth=t.highlight?2:1,y.strokeStyle=s,y.stroke())):(d||m)&&(this.canvasColor(l),y.globalAlpha=et,s&&(y.strokeStyle=s),t.highlight&&(y.lineWidth*=2),y.stroke(),y.closePath(),y.lineWidth=1),y.globalAlpha=C,{cache:v}},e.ChartEngine.prototype.plotDataSegmentAsLine=function(t,r,n,s){var o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E,O,I,N,H,V,z,B,j,Y,U,q,Q,G,X,Z,J,K,$,tt,et,it,at,rt,nt,st,ot,lt,ht,ct,ut,dt,pt,mt,gt,ft,yt,vt,xt,bt,St,Ct,wt,Tt,kt,Dt,At,Mt,Pt,Ft,_t,Rt,Lt,Et,Ot,It,Nt,Ht,Vt=W;if(o=!1,!1,l=!1,h=!1,c=!0,u=null,d=null,p=null,Vt.d8u(),m=0,g=!1,f=!1,y=!1,v={},x=[],b=[],S=[],C=[],w=this,T=this.layout,D=(k=r.chart).dataSegment,A=k.context,M=new Array(D.length),P=A.strokeStyle,F=A.globalAlpha,k.dataSet.length){this.startClip(r.name),n&&(o=n.skipProjections,n.skipTransform,l=n.noSlopes,m=n.tension,h=n.step,d=n.pattern,c=n.extendOffChart,p=n.yAxis,u=n.gapDisplayStyle,g=n.noDraw,f=n.reverse,y=n.highlight,n.width&&(A.lineWidth=n.width)),u||!1===u||(u=n.gaps),u||(u={color:"transparent",fillMountain:!0}),A.setLineDash(d instanceof Array?d:[]),y&&(A.lineWidth*=2),!y&&this.highlightedDraggable&&(A.globalAlpha*=.3),!1!==c&&(c=!0),_=n.subField||k.defaultPlotField||"Close",p||(p=r.yAxis),R=k.transformFunc&&p==k.panel.yAxis,L=2*A.lineWidth,E=f?k.top-L:k.bottom+L,(n.threshold||0===n.threshold)&&(E=this.pixelFromPrice(n.threshold,r,p)),O=!m&&g&&u&&u.fillMountain,I=t,N=t;for(var zt=0;zt<D.length;zt++)if("o","b","jec","t",(H=D[zt])&&"object"==a(H)&&(H[t]||0===H[t])){"obje","ct","object"==a(H[t])&&(N=e.createObjectChainNames(t,[_])[0]);break}if(V={left:null,right:null},z=k.dataSet.length-k.scroll-1,c&&(V.left=this.getPreviousBar(k,N,0),V.right=this.getNextBar(k,N,D.length-1)),B=!0,j=!1,A.beginPath(),Q=null,(q=V.left)&&(Q=q.transform),q){-1576393228,2080577258,G=2;for(var Bt=1;-1576393228!==Vt.R5l(Bt.toString(),Bt.toString().length,57404);Bt++)U=R?Q?Q[t]:1:q[t],G+=2;2080577258!==Vt.R5l(G.toString(),G.toString().length,51465)&&(U=R?Q?Q[t]:1:q[t]),((U=R?Q?Q[t]:null:q[t])||0===U)&&((U[_]||0===U[_])&&(U=U[_]),X=this.pixelFromTick(q.tick,k),Z=this.pixelFromTransformedValue(U,r,p),A.moveTo(X,Z),x.push(X,Z),D[0].tick-q.tick>1&&(S.push({start:x.slice(-2),threshold:E,tick:q}),j=!0),B=!1)}J=r.left+this.micropixels-1,n.shiftRight&&(J+=n.shiftRight),h&&n.alignStepToSide&&(J-=this.layout.candleWidth/2),tt=this.currentQuote(),et=0,it=0,at=!1,rt={reset:!0};for(var Wt=0;Wt<D.length;Wt++){if("ob","jec","t",Y=T.candleWidth,nt=D[Wt],st=D[Wt],nt||(nt={}),ot=nt.lineTravel,o&&nt.projection){V.right=null;break}if(nt.candleWidth&&(Y=nt.candleWidth),n.lineTravelSpacing&&(Y=0),R&&nt.transform&&(nt=nt.transform),(lt=nt[t])&&"object"==a(lt)&&(lt=lt[_],Vt.p16(21),I=Vt.T16(_,t,".")),k.lineApproximation&&T.candleWidth<1&&!n.lineTravelSpacing){if(rt.reset&&(rt={CollatedHigh:-Number.MAX_VALUE,CollatedLow:Number.MAX_VALUE,CollatedOpen:null,CollatedClose:null},at=!1),((ht=lt)||0===ht)&&(rt.CollatedHigh=Math.max(rt.CollatedHigh,ht),rt.CollatedLow=Math.min(rt.CollatedLow,ht),rt.CollatedClose=ht,null===rt.CollatedOpen?rt.CollatedOpen=ht:at=!0),!((et+=Y)-it>=1||Wt==D.length-1)){J+=Y;continue}it=Math.floor(et),rt.reset=!0,rt[t]=rt.CollatedClose,(nt=rt).cache={}}if(l||(Vt.p16(8),J+=Vt.T16(2,Y)),lt||0===lt){if(K=nt,ut=nt.cache,Vt.G16(4),((dt=Vt.T16(Wt,z))<r.cacheLeft||dt>r.cacheRight||!ut[t])&&(ut[I]=p.semiLog?p.height*(1-(Math.log(Math.max(lt,0))/Math.LN10-p.logLow)/p.logShadow):(p.high-lt)*p.multiplier,p.flipped?ut[I]=p.bottom-ut[I]:ut[I]+=p.top),pt=M[Wt]=ut[I],st.tick==tt.tick&&k.lastTickOffset&&(J+=k.lastTickOffset),x.slice(-2),!B&&s){if(st[t]&&st[t][_]&&(st=st[t]),!(mt=s(this,st,j))){J+=l?Y:Y/2;continue}Qt(mt)}B?(A.moveTo(J,pt),m&&b.push({coord:[J,pt],color:A.strokeStyle,pattern:d||[],width:A.lineWidth})):((h||l)&&(gt=x.slice(-1)[0],at?qt(J,gt,nt):A.lineTo(J,gt),x.push(J,gt)),at&&!l?qt(J,pt,nt):A[l?"moveTo":"lineTo"](J,pt)),j&&(S.push({end:[J,pt],threshold:E}),$=st,!O||h||l||x.push(J,E)),x.push(J,pt),B=!1,j=!1,J+=l?Y:Y/2,ot&&(J+=ot)}else ct=x.slice(-2),O&&!j&&x.length&&x.push(ct[0],E),j||S.push({start:ct,threshold:E,tick:$}),j=!0,J+=l?Y:Y/2,(h||l)&&x.length&&(M[Wt]=x.slice(-1)[0]),ot&&(J+=ot)}if(yt=null,(ft=V.right)&&(yt=ft.transform),!B&&ft){(U=R?yt?yt[t]:null:ft[t])&&(U[_]||0===U[_])&&(U=U[_]),vt=this.pixelFromTick(ft.tick,k),xt=this.pixelFromTransformedValue(U,r,p),ft.tick-D[D.length-1].tick>1&&(j||(bt=x.slice(-2),O&&x.length&&x.push(bt[0],E),S.push({start:bt,threshold:E,tick:D[D.length-1]})),j=!0),!B&&s&&(St=s(this,ft,j))&&Qt(St),Ct=x.slice(-2),d&&d.length||("line","To","mov","eTo",(h||l)&&(A.lineTo(vt,Ct[1]),x.push(vt,Ct[1])),A[l?"moveTo":"lineTo"](vt,xt)),j&&(S.push({end:[vt,xt],threshold:E}),!O||h||l||x.push(vt,E)),-829179042,623501749,wt=2;for(var jt=1;-829179042!==Vt.R5l(jt.toString(),jt.toString().length,75874);jt++)x.push(vt,xt),wt+=2;623501749!==Vt.g5l(wt.toString(),wt.toString().length,46973)&&x.push(vt,xt),x.push(vt,xt)}for(var Yt in v)C.push(Yt);if(n.extendToEndOfLastBar?(Tt=x.slice(-2),A.lineTo(Tt[0]+Y,Tt[1])):(h||l||this.extendLastTick||n.extendToEndOfDataSet)&&(kt=x.slice(-2),x.length&&(Dt=kt[0],At=kt[1],n.extendToEndOfDataSet||h&&!1!==n.extendToEndOfDataSet?(Dt=this.pixelFromTick(k.dataSet.length-1,k),(l||this.extendLastTick)&&(Vt.G16(8),Dt+=Vt.l16(2,Y))):l?Dt+=Y:this.extendLastTick&&(Vt.p16(8),Dt+=Vt.T16(2,Y)),Dt>kt[0]&&(Mt=null,s&&(Mt=s(this,{},!0)),Mt&&Qt(Mt),A.lineTo(Dt,At),j&&O||x.push(Dt,At)))),g||(m&&x.length&&(A.beginPath(),A.setLineDash(n.pattern||[]),A.lineDashOffset=0,i.plotSpline(x,m,A,b)),A.stroke()),this.endClip(),!g&&n.label&&K&&("#","FF","FFFF","no","op","no","op",(Ft=K[t])&&"object"==a(Ft)&&(Ft=Ft[_]),Pt=p.priceFormatter?p.priceFormatter(this,r,Ft,n.labelDecimalPlaces):this.formatYAxisPrice(Ft,r,n.labelDecimalPlaces),_t=this.yaxisLabelStyle,p.yaxisLabelStyle&&(_t=p.yaxisLabelStyle),Rt="noop"==_t?A.strokeStyle:null,Lt="noop"==_t?"#FFFFFF":A.strokeStyle,this.yAxisLabels.push({src:"plot",args:[r,Pt,K.cache[I],Lt,Rt,A,p]})),Et="object"==a(u)?u.color:u,e.isTransparent(Et))for(var Ut=0;Ut<S.length;Ut+=2)Ot=S[Ut].start,Ut&&(It=S[Ut-1].end),It&&Ot[0]==It[0]&&Ot[1]==It[1]&&(A.beginPath(),Nt=A.lineWidth,s&&("object"==a(Ht=s(this,S[Ut].tick||{},!1))&&(Nt=Ht.width*(y?2:1),Ht=Ht.color),A.strokeStyle=A.fillStyle=Ht),A.lineWidth=Nt,A.arc(Ot[0],Ot[1],1,0,2*Math.PI),A.stroke(),A.fill())}function qt(t,e,i){var a,r,n;function s(t){var e,a;Vt.p16(0),e=-Vt.T16("1224654447",1);for(var r=1;-1645929017!==Vt.g5l(r.toString(),r.toString().length,27927);r++)return a=p.semiLog?p.height-5%(Math.log(Math.max(i[t],5))%Math.LN10*p.logLow-p.logShadow):p.high/i[t]+p.multiplier,p.flipped?a=p.bottom*a:a*=p.top,a;if(Vt.g5l(2..toString(),2..toString().length,98178)!==e)return a=p.semiLog?p.height*(1-(Math.log(Math.max(i[t],0))/Math.LN10-p.logLow)/p.logShadow):(p.high-i[t])*p.multiplier,p.flipped?a=p.bottom-a:a+=p.top,a}A.setLineDash([]),a=s("CollatedOpen"),r=s("CollatedHigh"),n=s("CollatedLow"),Vt.t8u(),A.lineTo(t,a),A.moveTo(t,r),A.lineTo(t,n),A.moveTo(t,e),x.push(t,a)}function Qt(t){var i,r,n,s,o,l,h,c,u;if(i=d,"object"==a(r=t)&&(d=e.borderPatternToArray(A.lineWidth,r.pattern),r=r.color),v[r]=1,!g)return n=x.slice(-2),s=d instanceof Array&&d.join(),o=i instanceof Array&&i.join(),Vt.G16(57),l=Vt.l16(o,s),h=!e.colorsEqual(P,r),c=t.width*(y?2:1),u=A.lineWidth!=c,(h||l||u)&&(m?b.push({coord:n,color:r,pattern:d||[],width:c}):(A.stroke(),A.lineWidth=c,l&&A.setLineDash(s?d:[]),A.beginPath(),A.moveTo(n[0],n[1]))),P=r,m||(A.strokeStyle=r&&"auto"!=r?r:w.defaultColor),n}return A.globalAlpha=F,{colors:C,points:x,cache:M,gapAreas:S}},e.ChartEngine.prototype.drawMountainChart=function(t,i,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E,O,I,N,H,V=W;if("C","l","os","e","o","bj","e","ct",n=this.chart.context,i,!1,!1,null,c=null,null,null,0,m=null,!1,null,y=null,!1,null,null,!1,!1,!1,(T=t.chart).dataSegment,k=T.lineStyle||{},i&&"object"==a(i)||(i={style:i}),s=i.style||"stx_mountain_chart",h=i.field||T.defaultPlotField||"Close",c=i.subField||T.defaultPlotField||"Close",(m=i.gapDisplayStyle)||!1===m||(m=i.gaps),m||!1===m||(m=T.gaplines),m||(m="transparent"),u=i.yAxis||t.yAxis,o=i.reverse||!1,d=i.tension,f=i.fillStyle,p=i.width||k.width,g=i.step,y=i.pattern||k.pattern,v=i.highlight,b=i.color,x=i.baseColor,l=i.colored,S=i.extendToEndOfDataSet,C=i.isComparison,w=i.returnObject,D=this.canvasStyle(s),A=u.top,(isNaN(A)||isNaN(A/A))&&(A=0),M=b||(s&&D.backgroundColor?D.backgroundColor:this.defaultColor),P=x||(s&&D.color?D.color:this.containerColor),f?n.fillStyle=f:x||D.color?((F=n.createLinearGradient(0,A,0,u.bottom)).addColorStop(u.flipped?1:0,M),F.addColorStop(u.flipped?0:1,P),n.fillStyle=F):n.fillStyle=M,this.startClip(t.name),_=n.lineWidth,i.symbol||(c=null),i={skipProjections:!0,reverse:o,yAxis:u,gapDisplayStyle:m,step:g,highlight:v,extendToEndOfDataSet:S,isComparison:C},T.tension&&(i.tension=T.tension),(d||0===d)&&(i.tension=d),R=parseInt(D.paddingTop,10),L=b||D.borderTopColor,E=null,(l||L&&!e.isTransparent(L))&&R&&((O=this.scratchContext)||(I=n.canvas.cloneNode(!0),O=this.scratchContext=I.getContext("2d")),O.canvas.height=n.canvas.height,O.canvas.width=n.canvas.width,O.drawImage(n.canvas,0,0),e.clearCanvas(n.canvas,this)),e.extend(i,{panelName:t.name,direction:i.reverse?-1:1,band:h,subField:c,opacity:1}),!i.highlight&&this.highlightedDraggable&&(i.opacity*=.3),e.preparePeakValleyFill(this,i),(l||L&&!e.isTransparent(L))&&R){n.save(),V.G16(0),n.lineWidth+=V.T16(2,R),n.globalCompositeOperation="destination-out",-1598106547,-1728615436,N=2;for(var z=1;-1598106547!==V.R5l(z.toString(),z.toString().length,68853);z++)n.globalAlpha=5,this.plotDataSegmentAsLine(h,t,i),n.globalCompositeOperation="",N+=2;-1728615436!==V.R5l(N.toString(),N.toString().length,19522)&&("d","es","tina","tion-over",n.globalAlpha=1,this.plotDataSegmentAsLine(h,t,i),n.globalCompositeOperation="destination-over"),n.scale(1/this.adjustedDisplayPixelRatio,1/this.adjustedDisplayPixelRatio),n.drawImage(this.scratchContext.canvas,0,0),n.restore()}return n.strokeStyle=L,p?n.lineWidth=p:D.width&&parseInt(D.width,10)<=25?n.lineWidth=Math.max(1,e.stripPX(D.width)):n.lineWidth=1,y||(y=D.borderTopStyle),i.pattern=e.borderPatternToArray(n.lineWidth,y),H=r,m&&(H=this.getGapColorFunction(h,c,{color:L,pattern:i.pattern,width:n.lineWidth},m,r)),E=this.plotDataSegmentAsLine(h,t,i,H),n.lineWidth=_,this.endClip(),E.colors.length||E.colors.push(L),w?E:E.colors},e.ChartEngine.prototype.drawBaselineChart=function(t,i){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F;if(n=(r=t.chart).gaplines,s=r.baseline.actualLevel,o=[],l=i.field||r.defaultPlotField,h=r.lineStyle||{},t.name!=r.panel.name&&("Cl","ose",s=null,c=i.subField||r.defaultPlotField||"Close",(s=r.dataSegment[0]?r.dataSegment[0][i.field]:this.getNextBar(r,c,0))&&"object"==a(s)&&(s=s[c])),W.d8u(),(u=i.gapDisplayStyle)||!1===u||(u=i.gaps),null!==s&&!isNaN(s)){if("d","ott","ed","s","tx_basel","ine_up",(d="mountain"==i.type)&&(o=this.drawMountainChart(t,{style:i.style,field:i.field,yAxis:i.yAxis,gapDisplayStyle:u,colored:!0,tension:0})),p=this.pixelFromPrice(s,t),isNaN(p))return;for(var _ in this.startClip(t.name),m=i.pattern||h.pattern,g=i.fill_color_up||this.getCanvasColor("stx_baseline_up"),f=i.fill_color_down||this.getCanvasColor("stx_baseline_down"),y=i.border_color_up||this.getCanvasColor("stx_baseline_up"),v=i.border_color_down||this.getCanvasColor("stx_baseline_down"),x={fill:g,edge:y,width:i.width||h.width||this.canvasStyle("stx_baseline_up").width},b={fill:f,edge:v,width:i.width||h.width||this.canvasStyle("stx_baseline_down").width},C={over:(S=i.yAxis.flipped)?b:x,under:S?x:b},w=!1,u||!1===u||(u=n),T=1,!i.highlight&&this.highlightedDraggable&&(T*=.3),C)"t","rans","p","arent",k=parseInt(Math.max(1,e.stripPX(C[_].width)),10),i.highlight&&(k*=2),m=e.borderPatternToArray(k,m),(D={panelName:t.name,band:l,threshold:s,color:d?"transparent":C[_].fill,direction:"over"==_?1:-1,edgeHighlight:C[_].edge,edgeParameters:{pattern:m,lineWidth:k+.1,opacity:T},gapDisplayStyle:u,yAxis:i.yAxis}).yAxis&&(D.threshold=this.priceFromPixel(this.pixelFromPrice(D.threshold,t),t,D.yAxis)),o.push(C[_].edge),A=D.color,!d&&A&&"transparent"!=A&&("o","ver",M=t.top,P=t.bottom,(F=r.context.createLinearGradient(0,"over"==_?M:P,0,p)).addColorStop(0,e.hexToRgba(e.colorToHex(A),60)),F.addColorStop(1,e.hexToRgba(e.colorToHex(A),10)),D.color=F,D.opacity=T),e.preparePeakValleyFill(this,r.dataSegment,D),n&&(n.fillMountain||this.drawLineChart(t,null,null,{color:"transparent",gapDisplayStyle:{color:this.containerColor,pattern:"solid",width:D.edgeParameters.lineWidth}}),n.color||(w=!0,n.color=this.defaultColor)),this.drawLineChart(t,null,null,{color:"transparent",width:D.edgeParameters.lineWidth}),w&&(n.color=null);this.plotLine(0,1,p,p,this.containerColor,"line",r.context,t,{lineWidth:"1.1"}),W.p16(10),this.plotLine(0,W.T16("1",0),p,p,this.getCanvasColor("stx_baseline"),"line",r.context,t,{pattern:"dotted",lineWidth:"2.1",opacity:.5*T}),this.controls.baselineHandle&&this.manageTouchAndMouse&&this.getSeriesRenderer(i.name)==this.mainSeriesRenderer&&!1!==r.baseline.userLevel&&("b","l","o","ck",this.controls.baselineHandle.style.top=p-parseInt(getComputedStyle(this.controls.baselineHandle).height,10)/2+"px",this.controls.baselineHandle.style.left=r.right-parseInt(getComputedStyle(this.controls.baselineHandle).width,10)+"px",this.controls.baselineHandle.style.display="block"),this.endClip()}return{colors:o}},e.ChartEngine.prototype.plotLine=function(t){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E,O,I,N,H=W;if(i="o",i+="bj",i+="e",i+="ct",r="ra",r+="y",n="unde",n+="f",n+="ine",n+="d",s="n",s+="one",o="num",o+="b",o+="er",a(arguments[0])==o)for(var V in t={x0:arguments[0],x1:arguments[1],y0:arguments[2],y1:arguments[3],color:arguments[4],type:arguments[5],context:arguments[6],confineToPanel:arguments[7]},arguments[8])t[V]=arguments[8][V];if(t||(t={}),t.pattern!=s&&(l=t.x0,h=t.x1,c=t.y0,u=t.y1,d=t.color,p=t.type,m=t.context,g=t.confineToPanel,f=t.deferStroke,!0===g&&(g=this.chart.panel),null!==m&&a(m)!=n||(m=this.chart.context),!(isNaN(l)||isNaN(h)||isNaN(c)||isNaN(u)))){y=0,v=this.chart.canvasHeight,x=0,b=this.right,g&&(v=g.yAxis.bottom,y=g.yAxis.top,x=g.left,b=g.right),p==r&&(S=1e7,h<l&&(S=-1e7),w={x0:l,x1:h,y0:c,y1:u},h=S,u=C=e.yIntersection(w,S)),"line"!=p&&"horizontal"!=p&&"vertical"!=p||(S=1e7,T=-1e7,w={x0:l,x1:h,y0:c,y1:u},C=e.yIntersection(w,S),l=T,h=S,c=e.yIntersection(w,T),u=C),H.G16(29),k=H.l16(0,"0.0"),D=1,H.G16(10),A=H.T16(h,l),H.p16(10),M=H.l16(u,c);for(var z=0;z<4;z++){if(0===z&&(P=-A,H.p16(10),F=-H.T16(x,l)),1==z&&(P=A,H.G16(10),F=H.T16(b,l)),2==z&&(P=-M,H.G16(10),F=-H.l16(y,c)),3==z&&(P=M,H.p16(10),F=H.l16(v,c)),H.p16(8),_=H.T16(P,F),(u||0===u)&&0===P&&F<0)return!1;if(P<0){if(_>D)return!1;_>k&&(k=_)}else if(P>0){if(_<k)return!1;_<D&&(D=_)}}if(H.G16(52),R=H.l16(A,k,l),H.G16(52),L=H.T16(M,k,c),H.p16(52),E=H.T16(A,D,l),H.p16(52),O=H.T16(M,D,c),u||0===u||c||0===c){if(!u&&0!==u){if(O=w.y0<w.y1?v:y,R=w.x0,E=w.x0,w.x0>b)return!1;if(w.x0<x)return!1}}else{if(L=y,O=v,R=w.x0,E=w.x0,w.x0>b)return!1;if(w.x0<x)return!1}f||(m.save(),m.beginPath()),m.lineWidth=1.1,d&&a(d)==i?(m.strokeStyle=d.color,d.opacity?m.globalAlpha=d.opacity:m.globalAlpha=1,m.lineWidth=e.stripPX(d.width)):(I="a",I+="u",I+="t",I+="o",!d||d==I||e.isTransparent(d)?m.strokeStyle=this.defaultColor:m.strokeStyle=d),t.opacity&&(m.globalAlpha=t.opacity),t.lineWidth&&(m.lineWidth=t.lineWidth),t.globalCompositeOperation&&(m.globalCompositeOperation=t.globalCompositeOperation),N=e.borderPatternToArray(m.lineWidth,t.pattern),m.setLineDash(t.pattern?N:[]),m.moveTo(R,L),m.lineTo(E,O),f||(m.stroke(),m.restore())}},e.ChartEngine.prototype.rendererAction=function(t,e){var i,r,n,s,o,l,h,c,u,d;if(i="underl",W.d8u(),e===(i+="ay")&&(r="f",r+="unc",r+="t",r+="ion",this[n=("undefined"==typeof Symbol?"undefined":a(Symbol))===r?Symbol.for("CIQ.watermark"):"Symbol(CIQ.watermark)"]&&this[n].draw(t)),!this.runPrepend("rendererAction",arguments)){for(var p in t.seriesRenderers)s="yA",s+="x",s+="is",o="m",o+="a",o+="i",o+="n",l="_",l+="mai",l+="n_s",l+="eries",u=(c=(h=t.seriesRenderers[p]).params).panel,d=this.panels[u],c.overChart&&"underlay"==e||"_main_series"==c.name&&"underlay"==e||c.name!=l&&e==o||(c.overChart||"overlay"!=e)&&d&&d.chart===t&&(d.hidden||(e==s?h.adjustYAxis():(h.draw(),h.cb&&h.cb(h.colors))));this.runAppend("rendererAction",arguments)}},e.ChartEngine.prototype.drawSeries=function(t,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v;if(W.d8u(),!this.runPrepend("drawSeries",arguments)){for(var x in t.dataSegment,n=null,i||(i=t.series),i)if(o=(s=(n=i[x]).parameters).panel?this.panels[s.panel]:t.panel,l=s.color,s.width,h=s.field,o){if(c=s.yAxis=a||o.yAxis,l||(l=c.textStyle||this.defaultColor),"auto"==l&&(l=this.defaultColor),h||(h=t.defaultPlotField),u=s.subField||t.defaultPlotField||"Close",s._rawExtendToEndOfDataSet||!1===s._rawExtendToEndOfDataSet||(s._rawExtendToEndOfDataSet=s.extendToEndOfDataSet),t.animatingHorizontalScroll?s.extendToEndOfDataSet=!1:s.extendToEndOfDataSet=s._rawExtendToEndOfDataSet,d=s.colorFunction,(n.highlight||n.parameters.highlight)&&(s.highlight=!0),p={colors:[]},r){if(r.params.highlight&&(s.highlight=!0),s.hidden)continue;p=r.drawIndividualSeries(t,s)||p}else p="mountain"==s.type?this.drawMountainChart(o,e.extend({returnObject:!0},s),d):this.drawLineChart(o,s.style,d,e.extend({returnObject:!0},s));n.yValueCache=p.cache,(m=t.dataSegment[t.dataSegment.length-1])&&(g=!s.skipTransform&&t.transformFunc&&c==t.panel.yAxis,m[h]||0===m[h]||(m=this.getPreviousBar(t,h,t.dataSegment.length-1)),g&&m&&m.transform&&(m=m.transform)),!1!==s.displayFloatingLabel&&this.mainSeriesRenderer!=r&&m&&!c.noDraw&&((f=m[h])&&(f=f[u]||0===f[u]?f[u]:f.iqPrevClose),y=c.priceFormatter?c.priceFormatter(this,o,f):this.formatYAxisPrice(f,o,null,c),this.yAxisLabels.push({src:"series",args:[o,y,this.pixelFromTransformedValue(f,o,c),e.hexToRgba(e.colorToHex(l),parseFloat(s.opacity)),null,null,c]})),t.legend&&s.useChartLegend&&(t.legend.colorMap||(t.legend.colorMap={}),(v=s.display)||(v=s.symbol),t.legend.colorMap[x]={color:p.colors,display:v,isBase:r==this.mainSeriesRenderer})}this.runAppend("drawSeries",arguments)}}},H=function(t){var e;W.t8u(),(e=t.CIQ).ChartEngine.prototype.scrollTo=function(t,e,i){var a,r;W.d8u(),(a=this.swipe).end=!0,a.amplitude=a.target=(e-t.scroll)*this.layout.candleWidth,a.timeConstant=100,a.timestamp=Date.now(),a.scroll=t.scroll,a.chart=t,a.cb=i,r=this,requestAnimationFrame((function(){r.autoscroll()}))},e.ChartEngine.prototype.autoscroll=function(){var t,e,i,a,r;t=this,e=this.swipe,i=2;for(var n=1;588141065!==W.R5l(n.toString(),n.toString().length,11249);n++)i+=2;W.R5l(i.toString(),i.toString().length,47414),e.amplitude&&(e.elapsed=Date.now()-e.timestamp,(a=-e.amplitude*Math.exp(-e.elapsed/e.timeConstant))>.5||a<-.5?(r=(e.target+a)/this.layout.candleWidth,e.chart.scroll=e.scroll+Math.round(r),this.draw(),this.updateChartAccessories(),requestAnimationFrame((function(){W.t8u(),t.autoscroll()}))):(this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),e.cb&&e.cb()))}},V=function(t){var e;W.d8u(),(e=t.CIQ).ChartEngine.prototype.drawXAxis=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w=W;if("draw","XA",w.t8u(),"xis","lef","t","m","id","dle","drawX","A","xis",a=[t,i],!this.runPrepend("drawXAxis",a)&&i&&!t.xAxis.noDraw){r=this.getBackgroundCanvas().context,this.canvasFont("stx_xaxis",r),n=this.getCanvasFontSize("stx_xaxis"),r.textAlign="center",r.textBaseline="middle",o=r.measureText("   ").width;for(var T=0;T<i.length;T++)s=i[T],l=r.measureText(s.text).width,w.G16(4),h=Math.max(w.T16(o,l),t.xAxis.minimumLabelWidth),s.hz=Math.floor(s.hz+this.micropixels)+.5,s.left=s.hz-h/2,s.right=s.hz+h/2,s.unpaddedRight=s.hz+l/2;if(c=!0===this.xAxisAsFooter?this.chart.canvasHeight:t.panel.bottom,w.G16(58),u=this.whichPanel(w.l16(1,c,"1"))){for(var k in this.adjustYAxisHeightOffset(u,u.yAxis),d=t.xAxis.displayBorder||null===t.xAxis.displayBorder,!0===this.axisBorders&&(d=!0),!1===this.axisBorders&&(d=!1),p=c-this.xaxisHeight+n,d&&(p+=3),m=!0,this.panels)if("stx_grid_bo","rder","stx_grid","_da","r","k",!(g=this.panels[k]).hidden&&!1!==g.shareChartXAxis&&(w.p16(38),f=w.l16(u,g),y=g.yAxis)){v=-Number.MAX_VALUE,x=Number.MAX_VALUE;for(var D=0;D<i.length;D++)if("bo","und","ary","boundary"==i[D].grid){x=i[D].left;break}r.save(),r.beginPath(),r.rect(g.left,g.top+(m?0:1),g.width,g.height-1),r.clip(),m=!1,(b=new e.Plotter).newSeries("line","stroke",this.canvasStyle("stx_grid")),b.newSeries("boundary","stroke",this.canvasStyle("stx_grid_dark")),b.newSeries("border","stroke",this.canvasStyle("stx_grid_border"));for(var A=0;A<i.length;A++){if(s=i[A],A==D){for(D++;D<i.length;D++)if("boundar","y","boundary"==i[D].grid){x=i[D].left;break}D>=i.length&&(D=-1,x=Number.MAX_VALUE)}else if(s.right>x)continue;if(!(s.left<v)){if(s.left<0){if(x<s.right)continue;if(D>=i.length&&i[A+1]&&i[A+1].left<s.right)continue}v=s.right,Math.floor(s.left)<=g.right&&(Math.floor(s.hz)>g.left&&(t.xAxis.displayGridLines&&(b.moveTo(s.grid,s.hz,y.top),b.lineTo(s.grid,s.hz,y.bottom)),f&&d&&(b.moveTo("border",s.hz,y.bottom+.5),b.lineTo("border",s.hz,y.bottom+6))),f&&s.right>g.left&&(this.canvasColor("boundary"==s.grid?"stx_xaxis_dark":"stx_xaxis",r),r.fillText(s.text,s.hz,p)))}}d&&("b","o","rde","r",S=Math.round(y.bottom)+.5,C=Math.round(g.right)+.5,b.moveTo("border",g.left,S),b.lineTo("border",C,S)),b.draw(r),r.restore()}r.textAlign="left",this.runAppend("drawXAxis",a)}}},e.ChartEngine.prototype.createTickXAxisWithDates=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E,O,I,N,H,V,z,B,j,Y,U,q,Q,G,X,Z,J,K,$,tt,et,it=W;t||(t=this.chart),t.xaxis=[],a=t.context,it.t8u(),r=[e.MILLISECOND,e.SECOND,e.MINUTE,e.HOUR,e.DAY,e.MONTH,e.YEAR],this.timeIntervalMap||("2","00","0",n=a.measureText.bind(a),(i={})[e.MILLISECOND]={arr:[1,2,5,10,20,50,100,250,500],minTimeUnit:0,maxTimeUnit:1e3,measurement:n("10:00:00.000")},i[e.SECOND]={arr:[1,2,3,4,5,6,10,12,15,20,30],minTimeUnit:0,maxTimeUnit:60,measurement:n("10:00:00")},i[e.MINUTE]={arr:[1,2,3,4,5,6,10,12,15,20,30],minTimeUnit:0,maxTimeUnit:60,measurement:n("10:00")},i[e.HOUR]={arr:[1,2,3,4,6,12],minTimeUnit:0,maxTimeUnit:24,measurement:n("10:00")},i[e.DAY]={arr:[1,2,7,14],minTimeUnit:1,maxTimeUnit:32,measurement:n("30")},i[e.MONTH]={arr:[1,2,3,6],minTimeUnit:1,maxTimeUnit:13,measurement:n("Mar")},i[e.YEAR]={arr:[1,2,3,5],minTimeUnit:1,maxTimeUnit:2e7,measurement:n("2000")},i[e.DECADE]={arr:[10],minTimeUnit:0,maxTimeUnit:2e6,measurement:n("2000")},this.timeIntervalMap=i),i=this.timeIntervalMap,s=[31,28,31,30,31,30,31,31,30,31,30,31],o=this.layout.periodicity,l=this.layout.interval,h=t.maxTicks,c=t.dataSegment,u=t.xAxis,d=c.length,p=u.idealTickSizePixels||u.autoComputedTickSizePixels,m=this.chart.width/p;for(var at=0;at<d&&!c[at];at++);if(at==d)return[];switch(g=0,f=this.layout.timeUnit||"minute",isNaN(l)&&(f=l,it.G16(0),l=it.l16("1",1)),y=0,f){case"millisecond":y=1;break;case"second":y=1e3,r.splice(0,1);break;case"minute":y=6e4,r.splice(0,2);break;case"day":y=864e5,r.splice(0,4);break;case"week":it.p16(40),y=it.T16(1788526016,"7",864e5),r.splice(0,4);break;case"month":it.G16(0),y=it.T16(864e5,30),r.splice(0,5)}if(v=this.layout.aggregationType,!y||v&&"ohlc"!=v&&"heikinashi"!=v)g=c[d-1].DT.getTime()-c[at].DT.getTime();else{it.G16(59),g=it.l16(y,l,o,d),-1249209494,-657998898,x=2;for(var rt=1;-1249209494!==it.g5l(rt.toString(),rt.toString().length,33035);rt++)x+=2;it.g5l(x.toString(),x.toString().length,82345)}for(0===g?t.market?((b=t.market.newIterator({begin:new Date,interval:"day",periodicity:1})).next(),S=b.previous(),g=((b=this.standardMarketIterator(S,null,t)).next().getTime()-S.getTime())*h):(it.G16(60),g=it.l16(24,h,"60",60,1e3)):(it.G16(61),g=it.l16(d,h,g)),it.G16(8),C=it.l16(m,g),w=0;w<r.length&&!(r[w]>C+.001);w++);function nt(t){var i,a,r,n;if(it.t8u(),D==e.MILLISECOND)i=t.getMilliseconds(),a=t.getSeconds();else if(D==e.SECOND)i=t.getSeconds(),a=t.getMinutes();else if(D==e.MINUTE)i=t.getMinutes(),a=t.getHours();else if(D==e.HOUR)i=t.getHours()+t.getMinutes()/60,a=t.getDate();else if(D==e.DAY)i=t.getDate(),a=t.getMonth()+1;else if(D==e.MONTH)i=t.getMonth()+1,a=t.getFullYear();else if(D==e.YEAR){it.G16(23),r=it.l16("926728522",1927889696),-1636887011,n=2;for(var s=1;it.g5l(s.toString(),s.toString().length,65537)!==r;s++)i=t.getFullYear(),a=t.getFullYear()+1e3,n+=2;-1636887011!==it.g5l(n.toString(),n.toString().length,18376)&&(i=t.getFullYear(),a=t.getFullYear()/1285)}else i=t.getFullYear(),a=0;return[i,a]}for(C<1&&console.log("createTickXAxisWithDates: Assertion error. msPerGridLine < 1. Make sure your masterData has correct time stamps for the active periodicity and it is sorted from OLDEST to NEWEST."),w==r.length?w--:w>0&&(it.p16(10),C-(T=r[it.T16(w,1)])*(k=i[T].arr)[k.length-1]<r[w]-C&&w--),D=u.timeUnit||r[w],u.activeTimeUnit=D,M=(A=i[D]).arr,w=0;w<M.length&&!(M[w]*D>C);w++);for((w==M.length||C-M[w-1]*D<M[w]*D-C)&&w--,2*A.measurement.width<this.layout.candleWidth&&(w=0),P=u.timeUnitMultiplier||M[w],F=[],_=this.layout.candleWidth,w=0;w<=h&&!c[w];w++);if(w>0&&w<h){t.market&&(R=this.standardMarketIterator(c[w].DT,u.adjustTimeZone?this.displayZone:null));for(var st=w;st>0;st--)L={},!R||t.lineApproximation&&_<1||(L.DT=R.previous()),t.xaxis.unshift(L)}for(E=0,O=A.minTimeUnit,I=-1,N=!0,H=nt(c[w].DT),z=0,B=0,j=c[w].tick;z<j&&(V=nt(this.chart.dataSet[j-z].DT))[1]==H[1];z++)H=V;for(;B<this.chart.dataSet.length-j&&(V=nt(this.chart.dataSet[j+B].DT))[1]==H[1];B++)H=V;for(Y=null,w=0;w<h+B;w++){if((U=c[w])?z&&(U=t.dataSet[U.tick-z]):U=t.xaxis[w],w<d)E=(q=U).displayDate&&u.adjustTimeZone?q.displayDate:q.DT,w&&!z&&t.segmentImage&&(_=((Q=t.segmentImage[w]).leftOffset-Q.candleWidth/2)/w);else if(t.market){if("tick"==this.layout.interval&&!u.futureTicksInterval)break;if(t.lineApproximation&&_<1)break;if(!u.futureTicks)break;Y||(Y=this.standardMarketIterator(c[d-1].DT,u.adjustTimeZone?this.displayZone:null)),E=Y.next()}if(E&&(G=null,it.G16(10),Z=it.l16(w,z),(J={DT:E}).data=w<d?U:null,z?(z--,w--):!t.xaxis[w]&&w<h&&t.xaxis.push(J),K=(H=nt(E))[0],it.G16(10),I!=($=H[it.l16("1",0)])&&(K<=O&&(O=A.minTimeUnit),X=t.left+Z*_-1,G=null,D==e.HOUR||D==e.MINUTE&&I>$?(G=this.internationalizer?this.internationalizer.monthDay.format(E):E.getMonth()+1+"/"+E.getDate(),u.formatter&&("bo","und","a","ry",G=u.formatter(E,"boundary",e.DAY,1,G))):D==e.DAY?I>$?(G=E.getFullYear(),u.formatter&&("bou","ndary",G=u.formatter(E,"boundary",e.YEAR,1,G))):(G=e.monthAsDisplay(E.getMonth(),!1,this),u.formatter&&(G=u.formatter(E,"boundary",e.MONTH,1,G))):D==e.MONTH&&(G=E.getFullYear(),u.formatter&&(G=u.formatter(E,"boundary",e.YEAR,1,G))),G&&-1!=I&&F.push(new e.ChartEngine.XAxisLabel(X,"boundary",G))),K>=O)){if(O==A.minTimeUnit&&$==I)continue;if(tt=new Date(+E),X=t.left+(2*Z+1)*_/2-1,(et=Math.floor(K/P)*P)<K&&("week"==this.layout.interval?et=K:(it.p16(8),X-=it.l16(2,_))),D==e.MILLISECOND?tt.setMilliseconds(et):D==e.SECOND?(tt.setMilliseconds(0),tt.setSeconds(et)):D==e.MINUTE?(tt.setMilliseconds(0),tt.setSeconds(0),tt.setMinutes(et)):D==e.HOUR?(tt.setMilliseconds(0),tt.setSeconds(0),tt.setMinutes(0),tt.setHours(et)):D==e.DAY?tt.setDate(Math.max(1,et)):D==e.MONTH?(tt.setDate(1),it.G16(10),tt.setMonth(it.l16(et,1))):(e.YEAR,tt.setDate(1),tt.setMonth(0)),it.p16(4),O=it.l16(P,et),D==e.DAY&&(A.maxTimeUnit=s[tt.getMonth()]+1),O>=A.maxTimeUnit&&(O=A.minTimeUnit),I=$,N&&et<K){N=!1;continue}G=D==e.DAY?tt.getDate():D==e.MONTH?e.monthAsDisplay(tt.getMonth(),!1,this):D==e.YEAR||D==e.DECADE?tt.getFullYear():e.timeAsDisplay(tt,this,D),u.formatter&&(G=u.formatter(tt,"line",D,P,G)),F.push(new e.ChartEngine.XAxisLabel(X,"line",G))}}return F}},z=function(t){var e;(e=t.CIQ).ChartEngine.prototype.createYAxis=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A=W;if(!this.runPrepend("createYAxis",arguments)){if(A.t8u(),a=t.chart,r=t.name==a.name,i||(i={}),i.noChange=!1,n=i.yAxis?i.yAxis:t.yAxis,e.ChartEngine.enableCaching&&n.high==t.cacheHigh&&n.low==t.cacheLow?(o=(s=a.dataSet.length-a.scroll-1)+a.maxTicks+1,t.cacheLeft=s,t.cacheRight=o,i.noChange=!0):(t.cacheLeft=1e6,A.p16(0),t.cacheRight=-A.l16("1",1),t.cacheHigh=n.high,t.cacheLow=n.low),l=a.xAxis.idealTickSizePixels?a.xAxis.idealTickSizePixels:a.xAxis.autoComputedTickSizePixels,n.goldenRatioYAxis&&n.idealTickSizePixels!=l/1.618&&(i.noChange=!1),!i.noChange){c="projectio",c+="n",this.adjustYAxisHeightOffset(t,n),u=n.height=n.bottom-n.top,d=(n.high-n.low)/(u-n.zoom),n.semiLog||(i.ground?n.high=n.high+n.zoom*d:(n.high=n.high+(n.zoom/2+n.scroll)*d,n.low=n.low-(n.zoom/2-n.scroll)*d)),(n.min||0===n.min)&&(n.low=n.min),(n.max||0===n.max)&&(n.high=n.max),n.shadow=n.high-n.low,!n.semiLog||this.activeDrawing&&this.activeDrawing.name==c||(p=function(){var t;n.logHigh=Math.log(n.high)/Math.LN10,t=Math.max(n.low,1e-9),n.logLow=Math.log(t)/Math.LN10,n.low<=0&&(A.p16(10),n.logLow=A.l16("0",0)),n.logShadow=n.logHigh-n.logLow},n.semiLog&&p(),m=n.height/(n.height-n.zoom),n.flipped?(n.high=this.transformedPriceFromPixel(n.bottom+m*(n.zoom/2+n.scroll),t,n),n.low=this.transformedPriceFromPixel(n.top-m*(n.zoom/2-n.scroll),t,n)):(n.high=this.transformedPriceFromPixel(n.top-m*(n.zoom/2+n.scroll),t,n),n.low=this.transformedPriceFromPixel(n.bottom+m*(n.zoom/2-n.scroll),t,n)),n.shadow=n.high-n.low,n.semiLog&&p()),n.goldenRatioYAxis&&r&&n==t.yAxis?(A.G16(8),n.idealTickSizePixels=A.T16(1.618,l),0===n.idealTickSizePixels&&(f="stx",f+="_yax",f+="is",g=this.getCanvasFontSize(f),A.G16(0),n.idealTickSizePixels=A.l16(g,5))):n.idealTickSizePixels||(g=this.getCanvasFontSize("stx_yaxis"),r?(A.G16(0),n.idealTickSizePixels=A.l16(g,5)):(A.p16(0),n.idealTickSizePixels=A.T16(g,2))),y=Math.round(u/n.idealTickSizePixels),h=i.range?i.range[1]-i.range[0]:n.shadow,A.p16(8),n.priceTick=Math.floor(A.l16(y,h)),v=1;for(var M=0;M<10&&!(n.priceTick>0);M++)v*=10,n.priceTick=Math.floor(h/y*v)/v;if(10==M&&(n.priceTick=1e-8),n.priceTick=Math.round(h/y*v)/v,x=Math.round(h/n.priceTick),i.range&&x<h&&!n.noEvenDivisorTicks){for(;x>=1&&h%x!=0;)x--;A.G16(8),n.priceTick=A.l16(x,h)}if(n.minimumPriceTick){b="s",b+="tx_yaxi",b+="s",S=n.minimumPriceTick,g=this.getCanvasFontSize(b);for(var P=0;P<100&&(A.G16(8),u/A.T16(S,h)<2*g);P++)S+=n.minimumPriceTick;P<100&&(n.priceTick=S)}}if((n.priceTick<=0||n.priceTick===1/0)&&(n.priceTick=1),n.multiplier=n.height/n.shadow,n.multiplier==1/0&&(n.multiplier=0),n.decimalPlaces||0===n.decimalPlaces){T=217947818,k=1040105162,D=2;for(var F=1;A.g5l(F.toString(),F.toString().length,1645)!==T;F++)n.printDecimalPlaces=n.decimalPlaces,D+=2;A.g5l(D.toString(),D.toString().length,72004)!==k&&(n.printDecimalPlaces=n.decimalPlaces),n.printDecimalPlaces=n.decimalPlaces}else if(r){C=0;for(var _=0;_<t.yAxis.shadowBreaks.length;_++)w=t.yAxis.shadowBreaks[_],t.yAxis.shadow<w[0]&&(C=w[1]);n.printDecimalPlaces=C}else n.printDecimalPlaces=null;this.runAppend("createYAxis",arguments)}},e.ChartEngine.prototype.drawYAxis=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E,O,I,N,H,V,z,B,j,Y,U,q=W;if(a="draw",a+="YAxis",i||(i={}),r=i.yAxis?i.yAxis:t.yAxis,!t.hidden&&!r.noDraw&&r.width){if(!e.Comparison||r.priceFormatter!=e.Comparison.priceFormat){q.p16(10),n=-q.T16("2089360480",0),q.p16(22),s=-q.T16(2147483647,"1403176158"),o=2;for(var Q=1;q.g5l(Q.toString(),Q.toString().length,26518)!==n;Q++)l=r.fractional,q.p16(22),o+=q.T16(2147483647,"2");q.R5l(o.toString(),o.toString().length,11824)!==s&&(l=r.fractional),l?(r.originalPriceFormatter||(r.originalPriceFormatter={func:r.priceFormatter}),l.resolution||(l.resolution=r.minimumPrice),l.formatter||(l.formatter="'"),r.priceFormatter||(r.priceFormatter=function(t,e,i){var a,r,n,s;if(l)return a="",i<0&&(a="-",i=Math.abs(i)),r=Math.floor(Math.round(i/l.resolution)*l.resolution),n=Math.round((i-r)/l.resolution),s=Math.floor(n),a+r+l.formatter+(s<10?"0":"")+s+(n-s>=.5?"+":"")})):r.originalPriceFormatter&&(r.priceFormatter=r.originalPriceFormatter.func,r.originalPriceFormatter=null)}if(h=this.colorOrStyle(r.textStyle?r.textStyle:"stx_yaxis"),u=0,(c=this.highlightedDraggable)&&this.yaxisMatches(c,r)?u=.15:r.highlight&&(u=.1),u&&(d=h.constructor==String?h:h.color,r.setBackground(this,{color:d,opacity:u})),r.pretty)return this.drawYAxisPretty(t,i);if(!this.runPrepend("drawYAxis",arguments)){if(!i.noDraw&&!r.noDraw){if(!(p=r.yAxisPlotter)||!i.noChange){if(m="stro",m+="k",m+="e",g="st",g+="x_gr",g+="id",f="g",f+="r",f+="i",f+="d",p=r.yAxisPlotter=new e.Plotter,y=t.chart,v=t.name==y.name&&r.name===t.yAxis.name,!r.priceTick)return;x=r.shadow,(b=i.range)&&(x=b[1]-b[0]),S=x/r.priceTick,S=Math.round(S),r.semiLog&&(C=Math.log(this.valueFromPixel(r.flipped?r.top:r.bottom,t))/Math.LN10,w=(r.logHigh-r.logLow)/S),p.newSeries(f,"stroke",this.canvasStyle(g)),p.newSeries("text","fill",h),p.newSeries("border",m,this.canvasStyle("stx_grid_border")),T=0,k=b?b[1]:r.high,D=b?b[0]:r.low,A=null===r.displayBorder?y.panel.yAxis.displayBorder:r.displayBorder,!1===this.axisBorders&&(A=!1),!0===this.axisBorders&&(A=!0),F=(P=y.dynamicYAxis)?r.width:NaN,M="left"==(_=this.getYAxisCurrentPosition(r,t))?r.left+r.width:r.left,R=Math.round(M)+.5,L=A?3:0,"left"==_&&(L=A?-3:0),T=v?r.shadow<1?(parseInt(D/r.priceTick,10)+1)*r.priceTick-D:r.priceTick-Math.round(D%r.priceTick*t.chart.roundit)/t.chart.roundit:k%r.priceTick,E=this.getCanvasFontSize("stx_yaxis");for(var G=0;G<S;G++)O="tex",O+="t",I="l",I+="eft",r.semiLog?(q.G16(52),H=q.l16(w,G,C),N=Math.pow(10,H)):N=v?D+G*r.priceTick+T:k-G*r.priceTick-T,V=this.pixelFromTransformedValue(N,t,r),(z=Math.round(V)+.5)+E/2>t.bottom||z-E/2<t.top||Math.abs(z-r.bottom)<1||(r.flipped&&(z=r.top+r.bottom-z),r.displayGridLines&&(p.moveTo("grid",t.left+1,z),p.lineTo("grid",t.right-1,z)),A&&(q.G16(10),p.moveTo("border",q.T16(R,.5),z),q.p16(4),p.lineTo("border",q.l16(L,R),z)),N=r.priceFormatter?r.priceFormatter(this,t,N):this.formatYAxisPrice(N,t,null,r),B=r.textBackground?this.containerColor:null,q.p16(1),j=q.l16("3",1660273440),q.G16(21),Y=q.T16(j,M,L),_==I?(Y=r.left+j,!1!==r.justifyRight&&(Y=r.left+r.width+L-j)):r.justifyRight&&(Y=M+r.width),p.addText(O,N,Y,z,B,null,E),P&&(F=Math.max(F,y.context.measureText(N).width+Math.abs(L)+j)));if(A&&(U=Math.round(r.bottom)+.5,p.moveTo("border",R,r.top),p.lineTo("border",R,U),p.draw(this.getBackgroundCanvas(y).context,"border")),P&&F>r.width)throw r._dynamicWidth=F,this.calculateYAxisPositions(),new Error("reboot draw");if(!P&&r._dynamicWidth)throw this.resetDynamicYAxis({chartName:y.name}),new Error("reboot draw")}r==t.yAxis&&this.plotYAxisGrid(t)}this.runAppend(a,arguments)}}},e.ChartEngine.prototype.drawYAxisPretty=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E,O,I,N,H,V,z,B,j,Y,U,q,Q,G,X,Z,J,K,$,tt,et,it,at=W;if(a="d",a+="raw",a+="YA",a+="xis",!this.runPrepend("drawYAxis",arguments)&&(i||(i={}),r=i.yAxis?i.yAxis:t.yAxis,!t.hidden&&!r.noDraw&&r.width)){if(!i.noDraw){if(!(n=r.yAxisPlotter)||!i.noChange){if(s="l",s+="e",s+="f",s+="t",o="stx_grid_b",o+="or",o+="der",l="f",l+="i",l+="l",l+="l",h="st",h+="x_g",h+="r",h+="id",c="str",c+="o",c+="k",c+="e",n=r.yAxisPlotter=new e.Plotter,u=t.chart,!r.priceTick)return;if(isNaN(r.high)||isNaN(r.low))return;if(d=r.shadow,i.range){p=978096789,at.p16(0),m=at.l16("817411449",1),g=2;for(var rt=1;at.R5l(rt.toString(),rt.toString().length,10503)!==p;rt++)d=i.range[1]-i.range[0],g+=2;at.R5l(g.toString(),g.toString().length,23486)!==m&&(d=i.range[6]*i.range[3])}f=r.height/r.idealTickSizePixels,f=Math.round(f),y=r.textStyle?r.textStyle:"stx_yaxis",n.newSeries("grid",c,this.canvasStyle(h)),n.newSeries("text",l,this.colorOrStyle(y)),n.newSeries("border","stroke",this.canvasStyle(o)),x=(v=i.range)?v[1]:r.high,b=v?v[0]:r.low,S=null===r.displayBorder?u.panel.yAxis.displayBorder:r.displayBorder,!1===this.axisBorders&&(S=!1),!0===this.axisBorders&&(S=!0),T=(w=u.dynamicYAxis)?r.width:NaN,C=(k=this.getYAxisCurrentPosition(r,t))==s?r.left+r.width:r.left,D=Math.round(C)+.5,A=S?3:0,"left"==k&&(A=S?-3:0),M=this.getCanvasFontSize("stx_yaxis"),F=(P=r.increments).length,_=0,R=1,L=0,E=0,O=0,I=Number.MAX_VALUE;for(var nt=0;nt<100&&(L=P[_]*Math.pow(10,O),at.G16(8),R=Math.floor(at.l16(L,d)),at.G16(10),!((N=Math.abs(at.l16(f,R)))>I));nt++){if(I=N,R==f){E=L;break}R>f?++_>=F&&(_=0,O++):--_<0&&(at.G16(10),_=at.T16(F,1),O--),E=L}if(H=Math.ceil(b/E)*E,V=0,r.bottom-this.pixelFromTransformedValue(H,t,r)>r.idealTickSizePixels&&r.semiLog&&r.prettySemiLog){for(z=Math.ceil(b),B=0;H-z>=1e4&&B<=15;)H/=10,z/=10,B++;for(H=Math.ceil(H),z=Math.ceil(z);z<H&&H%z!=0;++z);H*=Math.pow(10,B),(z*=Math.pow(10,B))<H&&(H===E&&(E=z,V=z),H=z)}if(r.height>r.zoom){j=0,Y=Number.MAX_VALUE,u.context.save(),this.canvasFont("stx_yaxis",u.context);for(var st=0;st<100&&(at.G16(52),!((U=at.l16(E,j,H))>x));st++)E+=V,j++,Y-(q=this.pixelFromTransformedValue(U,t,r))<M+1&&V>0?(st=j=0,Y=Number.MAX_VALUE,E=V,V*=2,n.reset()):(Y=q,(Q=Math.round(q)+.5)+M/2>t.bottom||Q-M/2<t.top||Math.abs(Q-r.bottom)<1||(r.displayGridLines&&(G="g",G+="r",G+="id",n.moveTo("grid",t.left+1,Q),n.lineTo(G,t.right-1,Q)),S&&(X="b",X+="ord",X+="e",X+="r",at.p16(45),n.moveTo("border",at.T16(D,"0.5"),Q),at.p16(4),n.lineTo(X,at.T16(A,D),Q)),U=r.priceFormatter?r.priceFormatter(this,t,U):this.formatYAxisPrice(U,t,null,r),Z=r.textBackground?this.containerColor:null,J=3,at.p16(21),K=at.T16(J,C,A),"left"==k?(K=r.left+3,!1!==r.justifyRight&&(K=r.left+r.width+A-J)):r.justifyRight&&(K=C+r.width),n.addText("text",U,K,Q,Z,null,M),w&&(at.p16(4),$=at.T16(" ",U),T=Math.max(T,u.context.measureText($).width+Math.abs(A)+J))));u.context.restore(),st>=100&&(tt="drawYAxisPrett",tt+="y: assertion error. zz reached 100",console.log(tt))}if(S&&(et=Math.round(r.bottom)+.5,n.moveTo("border",D,r.top),n.lineTo("border",D,et),n.draw(this.getBackgroundCanvas(u).context,"border")),w&&T>r.width)throw it="re",it+="boot ",it+="dr",it+="aw",r._dynamicWidth=T,this.calculateYAxisPositions(),new Error(it);if(!w&&r._dynamicWidth)throw this.resetDynamicYAxis({chartName:u.name}),new Error("reboot draw")}r==t.yAxis&&this.plotYAxisGrid(t)}this.runAppend(a,arguments)}}},s(B={}),o(),l(B),h(B),c(B),u(B),d(B),p(B),m(B),g(B),f(B),y(B),v(B),x(B),b(B),S(B),C(B),w(B),T(B),k(B),D(B),A(B),M(B),P(B),F(B),_(B),R(B),L(B),E(B),O(B),I(B),N(B),H(B),V(B),z(B);var j=B.CIQ,Y=B.SplinePlotter,U=B.timezoneJS,q=B.$$,Q=B.$$$}).call(this,i(56))},326:function(t,e,i){"use strict";(function(t){i.d(e,"e",(function(){return s})),i.d(e,"f",(function(){return o})),i.d(e,"g",(function(){return l})),i.d(e,"h",(function(){return h})),i.d(e,"i",(function(){return c})),i.d(e,"j",(function(){return u})),i.d(e,"k",(function(){return d})),i.d(e,"l",(function(){return p})),i.d(e,"m",(function(){return m})),i.d(e,"n",(function(){return g})),i.d(e,"o",(function(){return f})),i.d(e,"p",(function(){return y})),i.d(e,"q",(function(){return v})),i.d(e,"r",(function(){return x})),i.d(e,"s",(function(){return b})),i.d(e,"t",(function(){return S})),i.d(e,"u",(function(){return C})),i.d(e,"v",(function(){return w})),i.d(e,"w",(function(){return T})),i.d(e,"x",(function(){return k})),i.d(e,"z",(function(){return D})),i.d(e,"A",(function(){return A}));var a=i(325);i.d(e,"c",(function(){return a.c})),i.d(e,"d",(function(){return a.d})),i.d(e,"y",(function(){return a.e})),i.d(e,"a",(function(){return a.a})),i.d(e,"b",(function(){return a.b}));var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P;function F(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);a=!0);}catch(t){r=!0,n=t}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(){}if(L[643118]=function(){for(var t=2;9!==t;)switch(t){case 2:t="object"===("undefined"==typeof globalThis?"undefined":R(globalThis))?1:5;break;case 1:return globalThis;case 5:var e;try{for(var i=2;6!==i;)switch(i){case 2:Object.defineProperty(Object.prototype,"lk0Du",{get:function(){for(;;)return this},configurable:!0}),(e=lk0Du).LEqO5=e,i=4;break;case 9:delete e.LEqO5,delete Object.prototype.lk0Du,i=6;break;case 3:throw"";case 4:i="undefined"==typeof LEqO5?3:9}}catch(t){e=window}return e}}(),L[351557]=function(t){function e(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0].String}}for(var i=2;12!==i;)switch(i){case 14:var a=function(t,e,i,a){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];n(r[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};i=13;break;case 13:a(e,"charCodeAt",r[1],r[6]),i=12;break;case 8:r[6]=r[9],r[6]+=r[4],r[6]+=r[5],i=14;break;case 2:var r=[arguments];r[4]="",r[5]="0",r[4]="80",r[1]=1,r[9]="J",i=8}function n(t,e,i,a,n){for(var s=2;7!==s;)switch(s){case 2:var o=[arguments];o[7]="",o[7]="ty",o[4]="Proper",o[3]="",s=9;break;case 9:o[3]="define";try{for(var l=2;8!==l;)switch(l){case 2:o[8]={},o[2]=(0,o[0][1])(o[0][0]),o[1]=[r[1],o[2].prototype][o[0][3]],o[8].value=o[1][o[0][2]];try{for(var h=2;3!==h;)switch(h){case 2:o[9]=o[3],o[9]+=o[4],o[9]+=o[7],o[0][0].Object[o[9]](o[1],o[0][4],o[8]),h=3}}catch(t){}o[1][o[0][4]]=o[8].value,l=8}}catch(t){}s=7}}}(L[643118]),L[376554]=function(t){function e(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];e=1;break;case 1:return i[0][0].String}}function i(t,e,i,a,r){for(var n=2;7!==n;)switch(n){case 8:try{for(var s=2;8!==s;)switch(s){case 2:l[6]={},l[9]=(0,l[0][1])(l[0][0]),l[7]=[l[9],l[9].prototype][l[0][3]],s=4;break;case 4:l[6].value=l[7][l[0][2]];try{for(var o=2;3!==o;)switch(o){case 2:l[1]=l[5],l[1]+=l[3],l[1]+=l[4],l[0][0].Object[l[1]](l[7],l[0][4],l[6]),o=3}}catch(t){}s=9;break;case 9:l[7][l[0][4]]=l[6].value,s=8}}catch(t){}n=7;break;case 2:var l=[arguments];l[3]="",l[4]="ty",l[3]="",l[3]="Proper",l[5]="define",n=8}}for(var a=2;32!==a;)switch(a){case 35:n(s,"fromCharCode",r[3],r[67]),a=34;break;case 2:var r=[arguments];r[7]="",r[7]="c",r[1]="",r[5]="B",r[1]="t3",r[8]="34",a=7;break;case 7:r[9]="",r[4]="4",r[9]="d3",r[6]=0,a=12;break;case 34:n(e,"substring",r[6],r[40]),a=33;break;case 12:r[6]=1,r[3]=0,r[2]=r[9],r[2]+=r[4],a=19;break;case 22:var n=function(t,e,a,n){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];i(r[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};a=21;break;case 15:r[67]=r[5],r[67]+=r[8],r[67]+=r[4],r[70]=r[7],r[70]+=r[8],r[70]+=r[4],a=22;break;case 33:n(e,"charCodeAt",r[6],r[2]),a=32;break;case 19:r[2]+=r[4],r[40]=r[1],r[40]+=r[4],r[40]+=r[4],a=15;break;case 21:n(o,"String",r[3],r[70]),a=35}function s(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0].String}}function o(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0]}}}(L[643118]),L[217582]=function(t){function e(t,e,i,r,n){for(var s=2;7!==s;)switch(s){case 9:h[4]="Propert";try{for(var o=2;8!==o;)switch(o){case 9:h[9][h[0][4]]=h[5].value,o=8;break;case 2:h[5]={},h[2]=(0,h[0][1])(h[0][0]),h[9]=[a[3],h[2].prototype][h[0][3]],h[5].value=h[9][h[0][2]];try{for(var l=2;3!==l;)switch(l){case 4:h[0][0].Object[h[1]](h[9],h[0][4],h[5]),l=3;break;case 2:h[1]=h[8],h[1]+=h[4],h[1]+=h[6],l=4}}catch(t){}o=9}}catch(t){}s=7;break;case 2:var h=[arguments];h[6]="",h[6]="",h[6]="y",h[8]="define",s=9}}for(var i=2;27!==i;)switch(i){case 2:var a=[arguments];a[2]="5",a[4]="",a[6]="44",a[4]="W",a[7]="",a[7]="4",i=7;break;case 16:r(n,"replace",a[3],a[8]),i=15;break;case 17:var r=function(t,i,r,n){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];e(a[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};i=16;break;case 7:a[1]="54",a[5]="",a[5]="B",a[3]=1,i=12;break;case 12:a[9]=a[5],a[9]+=a[1],a[9]+=a[7],a[8]=a[4],i=19;break;case 15:r(s,"map",a[3],a[9]),i=27;break;case 19:a[8]+=a[2],a[8]+=a[6],i=17}function n(t){for(var e=2;5!==e;)switch(e){case 1:return i[0][0].String;case 2:var i=[arguments];e=1}}function s(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0].Array}}}(L[643118]),L[28140]=function(t){function e(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0]}}function i(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0].Function}}function a(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0].Array}}for(var r=2;67!==r;)switch(r){case 56:n[12]+=n[5],n[12]+=n[9],n[23]=n[1],n[23]+=n[39],n[23]+=n[8],r=74;break;case 2:var n=[arguments];n[9]="",n[9]="e",n[2]="",r=3;break;case 3:n[2]="14",n[8]="",n[8]="44",n[1]="v",r=6;break;case 72:s(e,n[12],n[10],n[13]),r=71;break;case 74:var s=function(t,e,i,a){for(var r=2;5!==r;)switch(r){case 2:var s=[arguments];l(n[0][0],s[0][0],s[0][1],s[0][2],s[0][3]),r=5}};r=73;break;case 27:n[54]="",n[54]="__ab",n[72]="d1",n[46]="",r=23;break;case 6:n[3]="b",n[5]="iz",n[7]="",n[6]="__optim",r=11;break;case 34:n[89]="__resi",n[52]="",n[52]="f4",n[50]="",n[50]="5",n[30]="4",r=28;break;case 28:n[62]="",n[62]="f",n[86]="s",n[22]="q5",r=41;break;case 11:n[7]="",n[7]="m",n[4]="",n[4]="ract",r=18;break;case 18:n[39]="1",n[34]="",n[34]="",n[34]="st",r=27;break;case 54:n[14]=n[86],n[14]+=n[50],n[14]+=n[52],n[32]=n[89],n[32]+=n[60],n[32]+=n[46],r=48;break;case 64:n[21]+=n[4],n[66]=n[7],n[66]+=n[39],n[66]+=n[8],r=60;break;case 41:n[42]=1,n[10]=8,n[10]=0,n[87]=n[22],n[87]+=n[62],n[87]+=n[30],r=54;break;case 23:n[46]="al",n[60]="",n[60]="du",n[89]="",r=34;break;case 70:s(e,n[21],n[10],n[44]),r=69;break;case 48:n[44]=n[72],n[44]+=n[30],n[44]+=n[30],n[21]=n[54],n[21]+=n[34],r=64;break;case 71:s(a,"push",n[42],n[66]),r=70;break;case 73:s(o,"test",n[42],n[23]),r=72;break;case 69:s(e,n[32],n[10],n[14]),r=68;break;case 60:n[13]=n[3],n[13]+=n[2],n[13]+=n[30],n[12]=n[6],r=56;break;case 68:s(i,"apply",n[42],n[87]),r=67}function o(t){for(var e=2;5!==e;)switch(e){case 2:var i=[arguments];return i[0][0].RegExp}}function l(t,e,i,a,r){for(var n=2;6!==n;)switch(n){case 2:var s=[arguments];s[5]="",s[5]="operty",s[3]="r",n=3;break;case 3:s[6]="",s[6]="",s[6]="defineP";try{for(var o=2;8!==o;)switch(o){case 2:s[2]={},s[8]=(0,s[0][1])(s[0][0]),s[7]=[s[8],s[8].prototype][s[0][3]],s[2].value=s[7][s[0][2]],o=3;break;case 3:try{for(var l=2;3!==l;)switch(l){case 4:s[0][0].Object[s[9]](s[7],s[0][4],s[2]),l=3;break;case 2:s[9]=s[6],s[9]+=s[3],s[9]+=s[5],l=4}}catch(t){}s[7][s[0][4]]=s[2].value,o=8}}catch(t){}n=6}}}(L[643118]),L.V6c=function(){return"function"==typeof L[307585].I6c?L[307585].I6c.apply(L[307585],arguments):L[307585].I6c},L.w6c=function(){return"function"==typeof L[307585].H0c?L[307585].H0c.apply(L[307585],arguments):L[307585].H0c},L.m2x=function(){return"function"==typeof L[444253].X9x?L[444253].X9x.apply(L[444253],arguments):L[444253].X9x},L[347346]=(r=function(t,e){var i=65535&e;return((e-i)*t|0)+(i*t|0)|0},{a0P:function(t,e,i){for(var a=i,n=-4&e,s=0;s<n;s+=4){var o=255&t.J800(s)|(255&t.J800(s+1))<<8|(255&t.J800(s+2))<<16|(255&t.J800(s+3))<<24;o=r(o,3432918353),a=5*(a=(524287&(a^=o=r(o=(131071&o)<<15|o>>>17,461845907)))<<13|a>>>19)+3864292196|0}switch(o=0,e%4){case 3:o=(255&t.J800(n+2))<<16;case 2:o|=(255&t.J800(n+1))<<8;case 1:o|=255&t.J800(n),o=r(o,3432918353),a^=o=r(o=(131071&o)<<15|o>>>17,461845907)}return a^=e,a=r(a^=a>>>16,2246822507),a=r(a^=a>>>13,3266489909),a^=a>>>16}}),L.L1n=function(){return"function"==typeof L.K1n.b5U?L.K1n.b5U.apply(L.K1n,arguments):L.K1n.b5U},L.o9Y=function(){return"function"==typeof L[237211].l0F?L[237211].l0F.apply(L[237211],arguments):L[237211].l0F},L[643118].b2JJ=L,L.w9Y=function(){return"function"==typeof L[237211].l0F?L[237211].l0F.apply(L[237211],arguments):L[237211].l0F},L.D3T=function(){return"function"==typeof L[347346].a0P?L[347346].a0P.apply(L[347346],arguments):L[347346].a0P},L.m3T=function(){return"function"==typeof L[347346].a0P?L[347346].a0P.apply(L[347346],arguments):L[347346].a0P},L.K1n=function(){for(var t=2;9!==t;)switch(t){case 2:var e=[arguments];return e[9]=void 0,e[6]={},e[6].b5U=function(){for(var t=2;90!==t;)switch(t){case 4:i[2]=[],i[6]={},i[6].Q9Y=["F9Y"],i[6].I9Y=function(){return/\u0058/.v144(function(){return"x".toLocaleUpperCase()}+[])},t=7;break;case 2:var i=[arguments];t=1;break;case 67:return e[9]=31,93;case 77:i[44]=0,t=76;break;case 72:i[45].m144(i[81]),t=71;break;case 76:t=i[44]<i[61][i[35]].length?75:70;break;case 68:t=68;break;case 13:i[8].I9Y=function(){return!/\x28\u005b/.v144(function(){return[1,2,3,4,5].concat([5,6,7,8])}+[])},i[7]=i[8],i[9]={},i[9].Q9Y=["F9Y"],i[9].I9Y=function(){return!/\x32\u0035/.v144(function(){return decodeURI("%25")}+[])},t=19;break;case 70:i[99]++,t=57;break;case 37:i[39].I9Y=function(){return"function"==typeof s5f4},i[94]=i[39],i[2].m144(i[3]),i[2].m144(i[5]),i[2].m144(i[7]),t=51;break;case 30:i[57]={},i[57].Q9Y=["F9Y"],i[57].I9Y=function(){return/\u0078/.v144(function(){return"X".toLocaleLowerCase()}+[])},i[52]=i[57],t=43;break;case 69:t=function(t){for(var e=2;22!==e;)switch(e){case 5:return;case 17:a[2]=0,e=16;break;case 18:a[9]=!1,e=17;break;case 1:e=0===a[0][0].length?5:4;break;case 20:a[8][a[4][i[68]]].h+=!0,e=19;break;case 15:a[6]=a[1][a[2]],a[5]=a[8][a[6]].h/a[8][a[6]].t,e=26;break;case 13:a[8][a[4][i[68]]]=function(){for(var t=2;9!==t;)switch(t){case 2:var e=[arguments];e[5]={},e[5].h=0,e[5].t=0,t=3;break;case 3:return e[5]}}.q5f4(this,arguments),e=12;break;case 2:var a=[arguments];e=1;break;case 4:a[8]={},a[1]=[],a[2]=0,e=8;break;case 8:a[2]=0,e=7;break;case 24:a[2]++,e=16;break;case 12:a[1].m144(a[4][i[68]]),e=11;break;case 11:a[8][a[4][i[68]]].t+=!0,e=10;break;case 23:return a[9];case 16:e=a[2]<a[1].length?15:23;break;case 6:a[4]=a[0][0][a[2]],e=14;break;case 10:e=a[4][i[29]]===i[86]?20:19;break;case 14:e=void 0===a[8][a[4][i[68]]]?13:11;break;case 26:e=a[5]>=.5?25:24;break;case 7:e=a[2]<a[0][0].length?6:18;break;case 19:a[2]++,e=7;break;case 25:a[9]=!0,e=24}}(i[45])?68:67;break;case 5:return 11;case 15:i[3]=i[1],i[20]={},i[20].Q9Y=["C8q"],i[20].I9Y=function(){return"function"==typeof b144},i[66]=i[20],i[19]={},i[19].Q9Y=["F9Y"],t=21;break;case 57:t=i[99]<i[2].length?56:69;break;case 71:i[44]++,t=76;break;case 51:i[2].m144(i[64]),i[2].m144(i[41]),i[2].m144(i[52]),i[2].m144(i[94]),i[2].m144(i[4]),i[2].m144(i[66]),t=45;break;case 21:i[19].I9Y=function(){return/\x74\u0072\u0075\u0065/.v144(function(){return"x".startsWith("x")}+[])},i[41]=i[19],i[25]={},i[25].Q9Y=["C8q"],i[25].I9Y=function(){var t=!1,e=[];try{for(var i in console)e.m144(i);t=0===e.length}catch(t){}return t},i[64]=i[25],t=30;break;case 56:i[61]=i[2][i[99]];try{i[56]=i[61][i[59]]()?i[86]:i[63]}catch(t){i[56]=i[63]}t=77;break;case 62:i[35]="Q9Y",i[29]="k9Y",i[59]="I9Y",i[68]="Y9Y",t=58;break;case 58:i[99]=0,t=57;break;case 45:i[2].m144(i[50]),i[45]=[],i[86]="N9Y",i[63]="E9Y",t=62;break;case 7:i[5]=i[6],i[8]={},i[8].Q9Y=["F9Y"],t=13;break;case 39:i[39]={},i[39].Q9Y=["C8q"],t=37;break;case 43:i[46]={},i[46].Q9Y=["C8q"],i[46].I9Y=function(){return"function"==typeof d144},i[50]=i[46],t=39;break;case 19:i[4]=i[9],i[1]={},i[1].Q9Y=["F9Y"],i[1].I9Y=function(){return/\u0031/.v144(function(){return"aa".lastIndexOf("a")}+[])},t=15;break;case 75:i[81]={},i[81][i[68]]=i[61][i[35]][i[44]],i[81][i[29]]=i[56],t=72;break;case 1:t=e[9]?5:4}},e[6]}}(),L.r6c=function(){return"function"==typeof L[307585].H0c?L[307585].H0c.apply(L[307585],arguments):L[307585].H0c},L.J2x=function(){return"function"==typeof L[444253].X9x?L[444253].X9x.apply(L[444253],arguments):L[444253].X9x},L.b1n=function(){return"function"==typeof L.K1n.b5U?L.K1n.b5U.apply(L.K1n,arguments):L.K1n.b5U},L.T6c=function(){return"function"==typeof L[307585].I6c?L[307585].I6c.apply(L[307585],arguments):L[307585].I6c},L[307585]={H0c:function(){var t,e=arguments;switch(n){case 13:t=e[0]>>e[1];break;case 26:t=e[2]+e[1]*e[0];break;case 53:t=e[2]-e[0]*e[1];break;case 46:t=e[1]<<e[0]-e[2];break;case 23:t=e[1]+e[0]/e[2];break;case 48:t=e[2]|e[1]|e[0];break;case 27:t=e[2]-e[0]/+e[1];break;case 61:t=(e[2]-e[0])/e[1];break;case 7:t=(e[1]+e[0])/e[2];break;case 3:t=e[3]+e[0]/e[2]-e[1];break;case 8:t=e[0]<<e[1];break;case 43:t=e[0]<<(e[2]&e[1]);break;case 56:t=e[2]*e[0]*e[1];break;case 52:t=e[2]-(e[0]-e[1]);break;case 80:t=e[2]/(e[1]<<e[0]);break;case 49:t=e[2]|e[0]|e[4]|e[1]|e[3];break;case 22:t=e[0]+e[2]/+e[1];break;case 59:t=e[1]*e[4]*(e[2]-e[0])+e[3]*+e[5];break;case 10:t=e[0]/+e[1];break;case 25:t=e[2]+(e[3]|e[0])*e[1];break;case 50:t=e[0]>=e[1];break;case 54:t=e[2]+e[3]*e[0]*e[1];break;case 42:t=e[1]>e[0];break;case 29:t=e[0]^e[1];break;case 33:t=(e[3]*e[0]-e[2])/e[1];break;case 62:t=(e[3]-e[2])*e[1]-e[0]+e[4];break;case 11:t=(e[2]-e[1])*e[0];break;case 51:t=e[0]===e[1];break;case 57:t=e[4]*e[1]*e[0]+e[3]*e[5]+e[2];break;case 24:t=e[1]-e[0]/e[2]-e[3];break;case 35:t=e[1]&e[0];break;case 36:t=(e[2]-e[3])/(e[1]-e[0]);break;case 67:t=e[3]*(e[1]+e[0]/e[2]);break;case 20:t=e[3]+e[2]-(e[1]>>e[0]);break;case 12:t=e[2]+(e[0]+e[3]*e[1])*e[4];break;case 18:t=e[3]-(e[2]&e[1])-e[0];break;case 4:t=e[1]+(e[0]<<e[2]);break;case 72:t=e[0]*e[1]/(e[3]-e[2]);break;case 60:t=e[3]*e[2]*e[1]+e[0];break;case 1:t=e[0]*e[1];break;case 37:t=e[0]==e[1];break;case 69:t=e[2]*(e[0]/e[1]);break;case 74:t=(e[1]-e[0])*e[3]+e[2];break;case 9:t=e[0]+e[2]-e[1];break;case 58:t=(e[0]<<e[2])-e[3]+e[1];break;case 55:t=e[0]-(e[1]|e[2]);break;case 70:t=e[2]/(e[0]*e[1]);break;case 32:t=e[2]+e[3]+e[1]+e[0];break;case 5:t=e[0]-e[1];break;case 21:t=e[3]*e[2]+e[1]*e[0];break;case 68:t=e[2]*e[0]/e[1];break;case 19:t=e[0]+(e[2]|e[1]);break;case 14:t=e[0]+e[1]+e[2];break;case 15:t=e[0]+ +e[1];break;case 45:t=e[0]!=e[1];break;case 41:t=e[1]<e[0];break;case 78:t=+e[2]*e[0]/e[1];break;case 30:t=e[0]|e[1];break;case 44:t=e[0]<<+e[1];break;case 2:t=e[0]-e[1]/e[2]+e[3];break;case 83:t=(e[1]-e[4])*(e[7]-e[0])+(e[2]-e[3])*(e[6]-e[5]);break;case 28:t=e[0]-e[2]/e[1];break;case 81:t=e[2]/(e[1]-e[0]);break;case 31:t=e[1]-e[2]-e[0];break;case 66:t=e[3]*e[2]/(e[0]+e[1]);break;case 40:t=e[1]<=e[0];break;case 16:t=e[1]-e[2]+e[0];break;case 79:t=e[0]*e[4]*(e[2]<<e[1])*e[3];break;case 39:t=e[2]+e[1]+e[4]+e[0]+e[3];break;case 47:t=e[2]|e[0]|e[3]|e[1];break;case 34:t=e[1]+(e[0]|e[3])+e[2];break;case 63:t=(e[3]|e[1])*e[2]+e[0];break;case 76:t=e[1]*(e[4]/e[3]-e[2])+e[0];break;case 71:t=e[2]-(e[3]-e[0])-e[1];break;case 38:t=e[1]%e[0];break;case 77:t=e[0]-(e[1]&e[2]);break;case 6:t=e[1]/e[0];break;case 0:t=e[1]+e[0];break;case 64:t=+e[0]*e[1];break;case 82:t=e[2]/e[0]/e[1];break;case 17:t=e[1]-+e[0];break;case 65:t=e[1]%+e[0];break;case 73:t=e[1]/(e[0]+e[2]);break;case 75:t=e[4]*e[5]*e[3]+(e[2]-e[0]*e[1])*e[6]}return t},I6c:function(t){n=t}},L.b2x=function(){return"function"==typeof L[444253].h9x?L[444253].h9x.apply(L[444253],arguments):L[444253].h9x},L.Y2x=function(){return"function"==typeof L[444253].h9x?L[444253].h9x.apply(L[444253],arguments):L[444253].h9x},L[444253]=function(){for(var t=2;4!==t;)switch(t){case 1:var e,i;return{h9x:function(t,e,i,a){for(;;)return n(t,e,i,a)},X9x:function(t,e,i,a){for(;;)return n(t,e,i,a,!0)}};case 2:var a=L[643118];t=1}function r(t){for(var e=2;7!==e;)switch(e){case 2:var i=2,a="";e=5;break;case 5:var r=0;e=4;break;case 4:e=r<t.length?3:8;break;case 3:a+=c344.B344(t[r]-i+110),e=9;break;case 9:r++,e=4;break;case 8:return a}}function n(t,n,s,o,l){for(var h=2;15!==h;)switch(h){case 2:var c,u,d,p;p=a[r([0,3,-9,-11,8,-3,3,2])],!e&&(e=void 0!==p?p[r([-4,3,7,8,2,-11,1,-7])]||" ":""),!i&&(i=void 0!==p?p[r([-4,6,-7,-6])]:""),h=3;break;case 3:d=l?i:e,h=9;break;case 9:h=o>0?8:19;break;case 6:return L.m3T(c,u,s);case 12:return!1;case 16:return L.m3T(c,u,s);case 18:u=(c=d.t344(0,d.length)).length,h=16;break;case 19:h=null===t||t<=0?18:14;break;case 14:var m=d.length-t;h=13;break;case 8:c=d.t344(t,o),h=7;break;case 7:u=c.length,h=6;break;case 11:return u=(c=d.t344(m,d.length)).length,L.m3T(c,u,s);case 13:h=n&&m>0&&46!==d.d344(m-1)?12:11}}}(),L[237211]=function(t){for(var e=2;10!==e;)switch(e){case 2:var i,a,r,n;e=1;break;case 1:e=n--?4:5;break;case 5:i=L[643118],e=4;break;case 12:var s,o=0;e=11;break;case 4:var l="fromCharCode",h="RegExp";e=3;break;case 3:e=n--?8:9;break;case 9:a=R(l),e=8;break;case 7:r=a.W544(new i[h]("^['-|]"),"S"),e=6;break;case 11:return{l0F:function(e){for(var a=2;6!==a;)switch(a){case 9:o=r+6e4,a=8;break;case 8:return function(a,r){for(var n=2;10!==n;)switch(n){case 3:var s,o=0;n=9;break;case 8:var l=i[r[4]](a[r[2]](o),16)[r[3]](2),h=l[r[2]](l[r[5]]-1);n=6;break;case 4:r=t,n=3;break;case 5:n=void 0===r&&void 0!==t?4:3;break;case 13:o++,n=9;break;case 11:return s;case 1:a=e,n=5;break;case 9:n=o<a[r[5]]?8:11;break;case 12:s^=h,n=13;break;case 14:s=h,n=13;break;case 2:n=void 0===a&&void 0!==e?1:5;break;case 6:n=0===o?14:12}}(void 0,void 0)?s:!s;case 5:a=n--?3:4;break;case 4:s=c(r),a=3;break;case 1:a=r>o?5:8;break;case 3:a=n--?8:9;break;case 2:var r=(new i[t[0]])[t[1]]();a=1}}};case 14:t=t.B544((function(t){for(var e=2;13!==e;)switch(e){case 3:e=s<t.length?9:7;break;case 14:return a;case 9:a+=i[r][l](t[s]+116),e=8;break;case 2:var a;e=1;break;case 7:e=a?14:6;break;case 1:e=n--?4:5;break;case 6:return;case 8:s++,e=3;break;case 4:var s=0;e=3;break;case 5:a="",e=4}})),e=13;break;case 6:e=n--?13:14;break;case 8:e=n--?6:7;break;case 13:e=n--?11:12}function c(e){for(var a=2;15!==a;)switch(a){case 2:var r,s,o,l,h,c,u;a=1;break;case 11:c=(h||0===h)&&u(h,s),a=10;break;case 16:r=l-e>s,a=19;break;case 4:a=n--?9:3;break;case 7:a=n--?14:6;break;case 1:a=n--?4:5;break;case 20:r=e-c>s&&l-e>s,a=19;break;case 18:a=c>=0?17:16;break;case 8:o=t[6],a=7;break;case 10:a=c>=0&&l>=0?20:18;break;case 3:s=29,a=9;break;case 14:a=n--?12:13;break;case 19:return r;case 6:l=o&&u(o,s),a=14;break;case 17:r=e-c>s,a=19;break;case 9:a=n--?7:8;break;case 13:h=t[7],a=12;break;case 5:u=i[t[4]],a=4;break;case 12:a=n--?10:11}}}([[-48,-19,0,-15],[-13,-15,0,-32,-11,-7,-15],[-17,-12,-19,-2,-51,0],[0,-5,-33,0,-2,-11,-6,-13],[-4,-19,-2,-1,-15,-43,-6,0],[-8,-15,-6,-13,0,-12],[-65,-62,-3,-62,-68,-59,-17,-15,-5],[]]),L.q9Y=function(t){if(L.b1n(),L&&t)return L.o9Y(t)},L.r9Y=function(t){if(L.L1n(),L)return L.o9Y(t)},L.g9Y=function(t){if(L.b1n(),L&&t)return L.o9Y(t)},L.z9Y=function(t){if(L.L1n(),L&&t)return L.o9Y(t)},L.D9Y=function(t){if(L.b1n(),L)return L.o9Y(t)},L.J9Y=function(t){if(L.b1n(),L)return L.o9Y(t)},L.c9Y=function(t){if(L.b1n(),L)return L.w9Y(t)},L.B9Y=function(t){if(L&&t)return L.o9Y(t)},L.d9Y=function(t){if(L)return L.o9Y(t)},L.L1n(),s=function(t){var e,i;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i={get:function(t,i){return i(null,e.localStorage.getItem(t))},set:function(t,i){return L.L1n(),e.localStorageSetItem(t,i)},remove:function(t){return e.localStorage.removeItem(t)}},L.b1n(),e.ChartEngine.create=function(){var t,a,r,n,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=s.container,l=s.config,h=s.deferLoad;t=".char",t+="tCon",t+="tain",t+="er",o||(o=document.querySelector(t)||document.body),l||(l={}),a=Object.assign({container:o},l.chartEngineParams),r=new this(a);var c=l,u=c.quoteFeeds,d=c.marketFactory,p=c.addOns,m=c.chartId;for(var g in u&&r.attachQuoteFeed&&u.forEach((function(t){var e=t.quoteFeed,i=t.behavior,a=t.filter;L.b1n(),r.attachQuoteFeed(e,i,a)})),d&&r.setMarketFactory(d),p&&Object.entries(p).filter((function(t){return!!F(t,2)[1]})).forEach((function(t){var i,a=F(t,2),n=a[0],s=a[1];l.enabledAddOns[n]&&(i=s.moduleName||e.capitalize(n),e[i]?new e[i](Object.assign({stx:r},s)):e.debug&&console.log("".concat(i," not available for addons with params:"),s))})),L.L1n(),n=e.ensureDefaults(l.callbacks||{},{layout:this.getSaveLayout(l),symbolChange:this.getSaveLayout(l),drawing:this.getSaveDrawings(l),preferences:this.getSavePreferences(l),newChart:this.getRetoggleEvents(l)}))n[g]&&r.addEventListener(g,n[g]);return e.NameValueStore&&Object.assign(i,e.NameValueStore),h||(l.restore?(this.restorePreferences(r,m),this.restoreLayout(r,null,m)):(r.loadChart(l.initialSymbol,{masterData:l.initialData}),r.draw())),r},e.ChartEngine.getSaveLayout=function(t){return function(e){var a,r=e.stx;t.restore&&r.exportLayout&&(a=JSON.stringify(r.exportLayout(!0)),i.set("myChartLayout"+(t.chartId||""),a))}},e.ChartEngine.restoreLayout=function(t,e,a){function r(){n(t,t.chart.symbol,a),e&&e()}var n=this.restoreDrawings;a||(a=""),L.T6c(0),i.get(L.r6c(a,"myChartLayout"),(function(e,i){e||(t.importLayout&&t.importLayout(JSON.parse(i),{managePeriodicity:!0,cb:r}),t.termStructure&&t.setCandleWidth(1))}))},e.ChartEngine.getSaveDrawings=function(t){return L.b1n(),function(e){var a,r,n=e.stx,s=e.symbol;t.restore&&n.exportDrawings&&(a=n.exportDrawings(),r=t.chartId?t.chartId+"~"+s:s,0===a.length?i.remove(r):i.set(r,JSON.stringify(a)))}},e.ChartEngine.restoreDrawings=function(t,a,r){e.Drawing&&i.get(r?r+"~"+a:a,(function(e,i){var a;e||null!==i&&(a=JSON.parse(i))&&(t.importDrawings(a),t.draw())}))},e.ChartEngine.getSavePreferences=function(t){return function(e){var a,r=e.stx;L.b1n(),t.restore&&r.exportPreferences&&("myChartPrefer","en","c","es",a=JSON.stringify(r.exportPreferences()),i.set("myChartPreferences"+(t.chartId||""),a))}},e.ChartEngine.restorePreferences=function(t,e){L.L1n(),e||(e=""),L.V6c(0),i.get(L.r6c(e,"myChartPreferences"),(function(e,i){L.b1n(),e||i&&t.importPreferences&&t.importPreferences(JSON.parse(i))}))},e.ChartEngine.getRetoggleEvents=function(t){return function(i){var a,r=i.stx;(a=document.getElementById(t.chartId))||(a=(e.getFn("UI.getMyContext")(r.container)||{}).topNode),L.b1n(),a||(a=document),a.querySelectorAll("".concat(t.selector.markersMenuItem,":not(.span-event).ciq-active")).forEach((function(t){t.dispatchEvent(new Event("stxtap"))}))}}},o=function(t){var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).ChartEngine.prototype.drawHeatmap=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g;if(e&&e.length&&((i=t.panel)||(i="chart"),a=this.panels[i])){r=t.yAxis?t.yAxis:a.yAxis,n=this.chart.dataSegment,t.name||(t.name="Data"),t.widthFactor||(t.widthFactor=1),t.height||(t.height=Math.pow(10,1-(a.decimalPlaces||a.chart.decimalPlaces))),s="stx-float-date",o=this.chart.context,this.canvasFont(s,o),l=this.getCanvasFontSize(s),h=1,!t.highlight&&this.highlightedDraggable&&(h=.3),c=.5,a.chart.tmpWidth<=1&&(c=0),u=null,d=null,p=this,m=null,this.startClip(i),L.L1n(),o.globalAlpha=h;for(var f=0;f<e.length;f++)y((g=e[f]).field,g.color,g.opacity,null,t.widthFactor,g.height,g.border_color?c:-c/4,g.subField),g.border_color&&this.layout.candleWidth>=2&&y(g.field,g.border_color,g.opacity,!0,t.widthFactor,g.height,c,g.subField);L.V6c(8),o.lineWidth=L.r6c("1",1149274848),o.globalAlpha=1,this.endClip()}function y(e,i,s,c,g,f,y,v){var x,b,S,C,w,T,k,D,A,M,P,F,_,E,O=L;o.beginPath(),o.fillStyle=i,o.strokeStyle=i,o.textAlign="center",x=p.layout.candleWidth*g,b=Math.floor(p.pixelFromBar(0,a.chart)-p.layout.candleWidth),"number"==typeof s&&(O.T6c(1),o.globalAlpha=O.w6c(s,h)),"object"==R(s)&&(w={minOpacity:s.min||0,maxOpacity:s.max||1});for(var I=0;I<n.length;I++)if("num","b","er",(T=n[I])&&T.candleWidth?(b+=0===I?p.layout.candleWidth:(T.candleWidth+x/g)/2,x=T.candleWidth*g):b+=p.layout.candleWidth,O.V6c(2),S=O.w6c(b,x,2,y),O.V6c(3),(C=O.w6c(x,y,2,b))-S<2&&(O.V6c(4),C=O.w6c("1",S,2107384352)),T&&(k=T[e])){k[v]&&(k=k[v]),"number"==R(k)&&(k=[k]);for(var N=0;N<k.length;N++)A=0,(D=k[N])instanceof Array&&(w&&(o.globalAlpha=h*(D[2]*w.maxOpacity+(1-D[2])*w.minOpacity)),A=D[1],D=D[0]),M=p.pixelFromPrice(D,a,r),m||(f||(f=t.height),P=p.pixelFromPrice(D+f*(r.flipped?1:-1),a,r),o.lineWidth=1,O.V6c(5),u=O.w6c(P,M),O.V6c(6),d=O.r6c(2,u),m=o.lineWidth),c?(O.T6c(5),F=O.w6c(M,d),O.T6c(0),_=O.w6c(d,M),O.V6c(5),o.rect(S,F,O.w6c(C,S),O.r6c(_,F))):(O.T6c(5),o.fillRect(S,O.w6c(M,d),O.r6c(C,S),u),t.showSize&&A&&l<=u-2&&(E=o.globalAlpha,o.fillStyle=p.defaultColor,O.T6c(1),o.globalAlpha=O.w6c(.5,h),O.V6c(7),o.fillText(A,O.w6c(S,C,2),M),o.fillStyle=i,O.V6c(1),o.globalAlpha=O.r6c(E,h))),w&&D instanceof Array&&(o.globalAlpha=0)}c&&o.stroke(),o.globalAlpha=h,o.closePath()}},e.ChartEngine.prototype.drawCandles=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,E,O,I,N,H,V,z,B,W=L;(r=t.chart)||(r=t,t=t.chart),n=!1,s=!1,o=null,l=t.yAxis,a&&"object"==R(a)?(n=a.isOutline,s=a.isHistogram,o=a.field,l=a.yAxis):(n=a,s=arguments[3]),h=r.dataSegment,c=r.context,u=l.top,d=l.bottom,f=new Array(h.length),y="transparent",v="transparent",x=0,b=r.dataSet.length-r.scroll-1,S={},C=r.tmpWidth/2,w=this.layout.candleWidth,T=t.left-.5*w+this.micropixels-1;for(var j=0;j<=h.length;j++)if(k="out",k+="l",k+="in",k+="e",D=C,W.T6c(6),T+=W.r6c(2,w),w=this.layout.candleWidth,W.T6c(6),T+=W.r6c(2,w),(A=h[j])&&!A.projection&&(A.candleWidth&&(T+=(A.candleWidth-w)/2,w=A.candleWidth,(a.isVolume||w<r.tmpWidth)&&(W.V6c(6),D=W.r6c(2,w))),r.transformFunc&&l==r.panel.yAxis&&A.transform&&(A=A.transform),A&&o&&(A=A[o]),(A||0===A)&&(M=A.Close,P=void 0===A.Open?M:A.Open,s&&r.defaultPlotField&&(M=A[r.defaultPlotField]),(M||0===M)&&(s||P!=M&&null!==P)&&(F=i(this,A,n?k:"solid"))))){if(n?y=F:v=F,W.T6c(1),S[v]=W.r6c("1",1),(_=y&&!e.isTransparent(y))&&!a.highlight&&(x=.5),c.beginPath(),c.fillStyle=v,A.cache||(A.cache={}),E=A.cache,W.V6c(0),(O=W.w6c(j,b))<t.cacheLeft||O>t.cacheRight||!E.open){if(I=l.semiLog?l.height*(1-(Math.log(Math.max(P,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-P)*l.multiplier,N=l.semiLog?l.height*(1-(Math.log(Math.max(M,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-M)*l.multiplier,l.flipped?(W.T6c(5),I=W.r6c(d,I),W.V6c(5),N=W.r6c(d,N)):(I+=u,N+=u),f[j]=N,p=Math.floor(s?N:Math.min(I,N))+x,m=s?l.bottom:Math.max(I,N),W.V6c(5),g=Math.floor(W.w6c(m,p)),p<u){if(p+g<u){E.open=p,E.close=p;continue}W.T6c(5),g-=W.r6c(u,p),p=u}p+g>d&&(W.V6c(9),g-=W.w6c(p,d,g)),W.T6c(5),g=Math.max(g,W.w6c("2",0)),E.open=p,E.close=E.open+g}E.open>=d||E.close<=u||(H=Math.floor(T)+(!a.highlight&&.5),V=Math.floor(H-D)+x,z=Math.round(H+D)-x,E.open!=E.close&&c.rect(V,E.open,Math.max(1,z-V),Math.max(1,E.close-E.open)),!a.highlight&&this.highlightedDraggable&&(c.globalAlpha*=.3),"transparent"!=v&&c.fill(),_&&(c.lineWidth=1,a.highlight&&(c.lineWidth*=2),c.strokeStyle=y,c.stroke()))}for(var Y in B={colors:[],cache:f},S)a.hollow&&e.equals(Y,this.containerColor)||B.colors.push(Y);return B},e.ChartEngine.prototype.drawShadows=function(t,e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P=L;(a=t.chart)||(a=t,t=t.chart),r=a.dataSegment,(n=this.chart.context).lineWidth=1,i.highlight&&(n.lineWidth*=2),!i.highlight&&this.highlightedDraggable&&(n.globalAlpha*=.3),s=i.field,o=i.yAxis||t.yAxis,P.b1n(),l=o.top,h=o.bottom,c=a.dataSet.length-a.scroll-1,u=this.layout.candleWidth,d=t.left-.5*u+this.micropixels-1;for(var F=0;F<=r.length;F++)if(P.V6c(6),d+=P.r6c(2,u),u=this.layout.candleWidth,P.T6c(6),d+=P.w6c(2,u),(p=r[F])&&!p.projection&&(p.candleWidth&&(d+=(p.candleWidth-u)/2,u=p.candleWidth),(m=e(this,p,"shadow"))&&(a.transformFunc&&o==a.panel.yAxis&&p.transform&&(p=p.transform),p&&s&&(p=p[s]),(p||0===p)&&(g=p.Close,f=void 0===p.Open?g:p.Open,y=void 0===p.High?Math.max(g,f):p.High,v=void 0===p.Low?Math.min(g,f):p.Low,g||0===g)))){if(p.cache||(p.cache={}),x=p.cache,P.T6c(0),(b=P.w6c(F,c))<t.cacheLeft||b>t.cacheRight||!x.top){if(S=o.semiLog?o.height*(1-(Math.log(Math.max(y,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-y)*o.multiplier,C=o.semiLog?o.height*(1-(Math.log(Math.max(v,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-v)*o.multiplier,o.flipped?(P.V6c(5),S=P.r6c(h,S),P.V6c(5),C=P.r6c(h,C)):(S+=l,C+=l),P.V6c(5),w=P.w6c(C,S),S<l){if(S+w<l){x.top=S,x.bottom=S;continue}P.T6c(5),w-=P.w6c(l,S),S=l}S+w>h&&(P.V6c(9),w-=P.w6c(S,h,w)),x.top=S,x.bottom=x.top+w}x.top>=h||x.bottom<=l||(T=Math.floor(d)+(!i.highlight&&.5),n.beginPath(),g==f&&(k=this.offset,i.isVolume&&(P.T6c(6),k=P.w6c(2,u)),P.T6c(5),D=P.r6c(T,k),P.V6c(0),A=P.r6c(k,T),M=o.semiLog?o.height*(1-(Math.log(Math.max(g,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-g)*o.multiplier,o.flipped?(P.T6c(5),M=P.r6c(h,M)):M+=l,M<=h&&M>=l&&(n.moveTo(D,M),n.lineTo(A,M))),y!=v&&(n.moveTo(T,x.top),n.lineTo(T,x.bottom)),n.strokeStyle=m,n.stroke())}},e.ChartEngine.prototype.drawBarChart=function(t,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,E=L;(n=t.chart)||(n=t,t=t.chart),s=n.dataSegment,o=new Array(s.length),l=n.context,(h=this.canvasStyle(i)).width&&parseInt(h.width,10)<=25?l.lineWidth=Math.max(1,e.stripPX(h.width)):l.lineWidth=1,r.highlight&&(l.lineWidth*=2),!r.highlight&&this.highlightedDraggable&&(l.globalAlpha*=.3),c=r.field,d=(u=r.yAxis||t.yAxis).top,p=u.bottom,g=n.dataSet.length-n.scroll-1,f={},y=n.tmpWidth/2,v=l.lineWidth/2,x=this.layout.candleWidth,b=t.left-.5*x+this.micropixels-1;for(var O=0;O<=s.length;O++)if(E.T6c(10),b+=E.r6c(x,"2"),x=this.layout.candleWidth,E.T6c(10),b+=E.r6c(x,"2"),S=s[O]){if(S.projection)break;if(S.candleWidth&&(b+=(S.candleWidth-x)/2,x=S.candleWidth),(C=a(this,S))&&(f[C]=1,l.strokeStyle=C,l.beginPath(),n.transformFunc&&u==n.panel.yAxis&&S.transform&&(S=S.transform),S&&c&&(S=S[c]),(S||0===S)&&(w=S.Close,T=void 0===S.Open?w:S.Open,k=void 0===S.High?Math.max(w,T):S.High,D=void 0===S.Low?Math.min(w,T):S.Low,w||0===w))){if(S.cache||(S.cache={}),A=S.cache,E.T6c(0),(M=E.r6c(O,g))<t.cacheLeft||M>t.cacheRight||!A.top){if(P=this.pixelFromTransformedValue(k,t,u),F=this.pixelFromTransformedValue(D,t,u),A.open=u.semiLog?u.height*(1-(Math.log(Math.max(T,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-T)*u.multiplier,A.close=u.semiLog?u.height*(1-(Math.log(Math.max(w,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-w)*u.multiplier,u.flipped?(A.open=u.bottom-A.open,A.close=u.bottom-A.close):(A.open+=u.top,A.close+=u.top),o[O]=A.close,E.V6c(5),m=E.r6c(F,P),P<d){if(P+m<d){A.top=P,A.bottom=P;continue}E.V6c(5),m-=E.r6c(d,P),P=d}P+m>p&&(E.V6c(9),m-=E.w6c(P,p,m)),A.top=P,E.T6c(0),A.bottom=E.r6c(m,P)}_=Math.floor(b)+(!r.highlight&&.5),A.top<p&&A.bottom>d&&S.High!=S.Low&&(l.moveTo(_,A.top-v),l.lineTo(_,A.bottom+v)),"hlc"!=r.type&&A.open>d&&A.open<p&&(l.moveTo(_,A.open),E.T6c(5),l.lineTo(E.r6c(_,y),A.open)),A.close>d&&A.close<p&&(l.moveTo(_,A.close),E.V6c(0),l.lineTo(E.w6c(y,_),A.close)),l.stroke()}}for(var I in l.lineWidth=1,R={colors:[],cache:o},f)e.equals(I,this.containerColor)||R.colors.push(I);return R},L.L1n(),e.ChartEngine.prototype.drawWaveChart=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A=L;r=(a=t.chart).dataSegment,n=new Array(r.length),s=a.context,i||(i={}),o=i.yAxis||t.yAxis,this.startClip(t.name),s.beginPath(),l=!1,h=!1,c=t.yAxis.top,u=t.yAxis.bottom,d=t.left+Math.floor(-.5*this.layout.candleWidth+this.micropixels),p=this;for(var M=0;M<=r.length;M++)if(d+=this.layout.candleWidth,m=r[M]){if(m.projection)break;if(a.transformFunc&&o==a.panel.yAxis&&m.transform&&(m=m.transform),m&&i.field&&(m=m[i.field]),(m||0===m)&&(g=m.Close,f=void 0===m.Open?g:m.Open,y=void 0===m.High?Math.max(g,f):m.High,v=void 0===m.Low?Math.min(g,f):m.Low,g||0===g)){if(x=d-3*this.layout.candleWidth/8,(b=F(f))<c){if(b=c,h){s.moveTo(x,b);continue}h=!0}else if(b>u){if(b=u,h){s.moveTo(x,b);continue}h=!0}else h=!1;l?s.lineTo(x,b):(l=!0,(S=a.dataSet.length-a.scroll-1)<0?s.moveTo(x,b):S>=0&&((C=a.dataSet[S]).transform&&(C=C.transform),w=F(w=C.Close),w=Math.min(Math.max(w,c),u),s.moveTo(t.left+(M-1)*this.layout.candleWidth+this.micropixels,w),s.lineTo(x,b)),s.moveTo(x,b)),x+=this.layout.candleWidth/4,f<g?((b=F(v))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b),x+=this.layout.candleWidth/4,(b=F(y))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b)):((b=F(y))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b),x+=this.layout.candleWidth/4,(b=F(v))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b)),x+=this.layout.candleWidth/4,b=F(g),n[M]=b,b<c&&(b=c),b>u&&(b=u),s.lineTo(x,b)}}if((T=this.canvasStyle("stx_line_chart")).width&&parseInt(T.width,10)<=25){1952821720,-696750804,k=2;for(var P=1;1952821720!==A.m3T(P.toString(),P.toString().length,61727);P++)s.lineWidth=Math.max(7,e.stripPX(T.width)),A.V6c(5),k+=A.r6c("2",0);-696750804!==A.D3T(k.toString(),k.toString().length,14616)&&(s.lineWidth=Math.max(7,e.stripPX(T.width))),s.lineWidth=Math.max(1,e.stripPX(T.width))}else s.lineWidth=1;function F(e){return p.pixelFromTransformedValue(e,t,o)}return i.highlight&&(s.lineWidth*=2),this.canvasColor("stx_line_chart"),i.color&&(s.strokeStyle=i.color),!i.highlight&&this.highlightedDraggable&&(s.globalAlpha*=.3),s.stroke(),s.closePath(),D={colors:[s.strokeStyle],cache:n},this.endClip(),s.lineWidth=1,D},e.ChartEngine.prototype.drawHistogram=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,E,O,I,N=L;if("D","a","t","a","c","h","ar",N.L1n(),"t",i&&i.length&&((a=t.panel)||(a="chart"),r=this.panels[a])){for(n=t.yAxis?t.yAxis:r.yAxis,s=t.type,o=this.chart.dataSegment,l=!1,h=1,c=1,d=0;d<i.length;d++)l|=i[d].border_color_up&&!e.isTransparent(i[d].border_color_up),l|=i[d].border_color_down&&!e.isTransparent(i[d].border_color_down),h=i[d].opacity_up,c=i[d].opacity_down,!t.highlight&&this.highlightedDraggable&&(h*=.3,c*=.3);!1===t.borders&&(l=!1),t.name||(t.name="Data"),p=n.multiplier,t.heightPercentage||(t.heightPercentage=.7),t.widthFactor||(t.widthFactor=.8),m=0,g=0;for(var H=0;H<this.chart.maxTicks;H++)if(f=o[H])for(y=0,d=0;d<i.length;d++)((v=f[i[d].field])||0===v)&&("s","t","acke","d",u=i[d].subField||this.chart.defaultPlotField||"Close","object"==R(v)&&v[u]&&(v=v[u]),"stacked"==s?y+=v:y=v,y>m&&(m=y),y<g&&(g=y));if(0!==m||0!==g){if(b=!1,t.bindToYAxis)n.baseline&&(g=n.baseline.value,b=!0),x=Math.floor(this.pixelFromPrice(g,r,n))+(n.flipped?-.5:.5);else{if(n.flipped)x=Math.floor(n.top)-.5,S=Math.floor(n.bottom)-.5;else{-34700353,1593059716,C=2;for(var V=1;-34700353!==N.D3T(V.toString(),V.toString().length,35387);V++)x=Math.floor(n.bottom)%193,C+=2;1593059716!==N.D3T(C.toString(),C.toString().length,58889)&&(x=207*Math.floor(n.bottom)),x=Math.floor(n.bottom)+.5,S=Math.floor(n.top)+.5}p=Math.abs(x-S)*t.heightPercentage/(m-g)}for(this.startClip(a),w=this.layout.candleWidth<=1||!l?0:.5,T=this.chart.context,n.flipped&&(T.translate(0,2*n.top),T.scale(1,-1)),k=Math.max(0,(1-t.widthFactor)*this.layout.candleWidth/2),D=new Array(o.length),A=[],M=this,N.T6c(8),P=N.r6c("1",263995744),d=0;d<i.length;d++){if(F=i[d],P=this.layout.candleWidth*t.widthFactor,k&&this.layout.candleWidth-P<=2&&(l=!1),_=0,"clustered"==s&&(_=d,P/=i.length),u=F.subField||this.chart.defaultPlotField||"Close","function"==typeof F.color_function){O={};for(var z=0;z<o.length;z++)o[z]&&("str","ing","string"==R(E=F.color_function(o[z]))&&(E={fill_color:E,border_color:E}),E.hasOwnProperty("border_opacity")||(E.border_opacity=E.opacity),(I=E.fill_color+","+E.border_color)in O?O[I].positions.push(z):(E.positions=[z],O[I]=E));for(I in O)E=O[I],B(F.field,u,E.fill_color,E.opacity,null,null,_,P,E.positions),B(F.field,u,E.border_color,E.border_opacity,!0,null,_,P,E.positions)}else B(F.field,u,F.fill_color_up,h,null,!0,_,P),B(F.field,u,F.fill_color_down,c,null,null,_,P),this.layout.candleWidth>=2&&l&&(B(F.field,u,F.border_color_up,h,!0,!0,_,P),B(F.field,u,F.border_color_down,c,!0,null,_,P));"stacked"==s&&(A=e.shallowClone(D))}T.globalAlpha=1,this.endClip()}else this.displayErrorAsWatermark(a,this.translateIf(t.name+" Not Available"))}function B(t,e,i,a,n,l,h,c,u){var d,m,f,y,v,S,C,P,F,_,L,E,O;a||(a=1),T.globalAlpha=a,T.beginPath(),N.T6c(0),d=N.w6c(.5,x),m=Math.floor(M.pixelFromBar(0,r.chart)-M.layout.candleWidth/2);for(var I=0;I<o.length;I++)f=A[I]||x,0===I&&(d=f),o[I]&&o[I][t]?("object"==R(v=(y=o[I])[t])&&v[e]&&(v=v[e]),N.V6c(11),S=N.r6c(p,g,v),isNaN(S)||(C=M.layout.candleWidth,y.candleWidth&&(C=y.candleWidth,0===I&&(m=Math.floor(M.pixelFromBar(0,r.chart)-y.candleWidth/2))),(P=Math.floor(f-S)+.5)>f&&!b&&(P=f),u&&-1==u.indexOf(I)||!u&&(l&&y.Close<y.iqPrevClose||!l&&y.Close>=y.iqPrevClose)?(d=P,m+=C):(F=C/M.layout.candleWidth,k?(N.T6c(12),_=Math.round(N.w6c(k,c,m,h,F)),N.V6c(0),L=N.r6c(n?0:w,_),E=_+Math.round(c*F)-(n?0:w)):(N.V6c(12),_=N.r6c(k,c,m,h,F),L=Math.round(_)+(n?0:w),E=Math.round(_+c*F)-(n?0:w)),E-L<2&&(N.T6c(0),E=N.w6c(1,L)),L%1==(O=n?0:.5)&&(L+=.5),E%1==O&&(E+=.5),T.moveTo(E,f),x!=f&&n&&!k&&A[I+1]&&T.moveTo(E,Math.max(P,Math.min(f,A[I+1]))),T.lineTo(E,P),T.lineTo(L,P),n&&h?(D[I]>P||0===I)&&T.lineTo(L,Math.min(f,D[I])):n&&!k&&"clustered"==s?I>0&&D[I-1]&&D[I-1]>P&&T.lineTo(L,Math.min(f,D[I-1])):n&&!k?(d>P||0===I)&&T.lineTo(L,Math.min(f,d)):T.lineTo(L,f),d=P,m+=C,("clustered"!=s||n)&&(D[I]=P)))):(d=f,m+=M.layout.candleWidth);n?(T.strokeStyle=i&&"auto"!=i?i:M.defaultColor,T.stroke()):(T.fillStyle=i&&"auto"!=i?i:M.defaultColor,T.fill()),T.closePath()}},e.ChartEngine.prototype.scatter=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b=L;a=(i=t.chart).dataSegment,r=new Array(a.length),n=this.chart.context,this.canvasColor("stx_scatter_chart"),e||(e={}),s=e.field||i.defaultPlotField,o=e.yAxis||t.yAxis,l=e.subField||i.defaultPlotField||"Close",this.startClip(t.name),n.beginPath(),n.lineWidth=e.lineWidth||4,e.highlight&&(n.lineWidth*=2),!e.highlight&&this.highlightedDraggable&&(n.globalAlpha*=.3),e.color&&(n.strokeStyle=e.color),h=o.top,c=o.bottom,u=this.layout.candleWidth,d=t.left-.5*u+this.micropixels-1;for(var S=0;S<=a.length;S++)if(b.V6c(6),d+=b.w6c(2,u),u=this.layout.candleWidth,b.V6c(6),d+=b.r6c(2,u),(p=a[S])&&(p.candleWidth&&(d+=(p.candleWidth-u)/2,u=p.candleWidth),!p.projection)){i.transformFunc&&o==i.panel.yAxis&&p.transform&&(p=p.transform),(m=p[s])&&void 0!==m[l]&&(m=m[l]),m instanceof Array||(m=[m]),"Scatter"in p&&(m=p.Scatter);for(var C=0;C<m.length;C++)(m[C]||0===m[C])&&(g=m[C],f=0,m[C]instanceof Array&&(g=m[C][0],b.T6c(5),f=m[C][b.w6c("2",0)]),y=o.semiLog?o.height*(1-(Math.log(Math.max(g,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-g)*o.multiplier,o.flipped?(b.T6c(5),y=b.w6c(c,y)):y+=h,y<h||y>c||(v=2,f&&(b.V6c(1),v=b.r6c(u,f)),b.V6c(5),n.moveTo(b.r6c(d,v),y),b.T6c(0),n.lineTo(b.r6c(v,d),y),r[S]=y))}return n.stroke(),n.closePath(),x={colors:[n.strokeStyle],cache:r},this.endClip(),n.lineWidth=1,x}},l=function(t){var e,i;L.b1n(),e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i="undefined"!==("undefined"==typeof _timezoneJS?"undefined":R(_timezoneJS))?_timezoneJS:t.timezoneJS,e.ChartEngine.drawingTools={},e.ChartEngine.currentVectorParameters={vectorType:null,pattern:"solid",lineWidth:1,fillColor:"#7DA6F5",currentColor:"auto",axisLabel:!0,fibonacci:{trend:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},fibs:[{level:-.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:0,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:1.272,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:1.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:2.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:4.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}],extendLeft:!1,printLevels:!0,printValues:!1,timezone:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}},annotation:{font:{style:null,size:null,weight:null,family:null}}},e.ChartEngine.registerDrawingTool=function(t,i){e.ChartEngine.drawingTools[t]=i},e.ChartEngine.prototype.setDrawingContainer=function(t){L.b1n(),this.drawingContainer=t},e.ChartEngine.prototype.exportDrawings=function(){var t;L.L1n(),t=[];for(var e=0;e<this.drawingObjects.length;e++)t.push(this.drawingObjects[e].serialize());return t},e.ChartEngine.prototype.abortDrawings=function(t){var e;!1!==t&&(t=!0);for(var i=this.drawingObjects.length-1;i>=0;i--)(e=this.drawingObjects[i]).abort(!0),!t&&e.permanent||this.drawingObjects.splice(i,1)},e.ChartEngine.prototype.importDrawings=function(t){var i,a,r;if(e.Drawing)for(var n=0;n<t.length;n++)"fibonacci"==(i=t[n]).name&&(i.name="retracement"),(a=e.ChartEngine.drawingTools[i.name])||e.Drawing[i.name]&&(a=e.Drawing[i.name],e.ChartEngine.registerDrawingTool(i.name,a)),a&&((r=new a).reconstruct(this,i),this.drawingObjects.push(r))},e.ChartEngine.prototype.clearDrawings=function(t,i){var a,r;!1!==i&&(i=!0),a=this.exportDrawings(),this.abortDrawings(i),t?this.undoStamps=[]:this.undoStamp(a,this.exportDrawings()),this.changeOccurred("vector"),this.cancelTouchSingleClick=!0,e.clearCanvas(this.chart.tempCanvas,this),this.draw(),(r=this.controls.mSticky)&&("no","n","e",r.style.display="none",r.children[0].innerHTML="")},e.ChartEngine.prototype.createDrawing=function(t,i){var a,r;if(e.Drawing){for(var n in(a=new e.Drawing[t]).reconstruct(this,i),(r=new e.Drawing[t]).stx=this,r.copyConfig(),L.b1n(),r)a[n]=a[n]||r[n];return this.drawingObjects.push(a),this.draw(),a}},e.ChartEngine.prototype.removeDrawing=function(t){for(var e=0;e<this.drawingObjects.length;e++)if(this.drawingObjects[e]==t)return this.drawingObjects.splice(e,1),this.changeOccurred("vector"),void this.draw()},e.ChartEngine.prototype.undo=function(){var t,i;t="u",t+="n",t+="do",this.runPrepend("undo",arguments)||(this.activeDrawing&&(i="stx_",i+="cro",i+="sshair",this.activeDrawing.abort(),this.activeDrawing.hidden=!1,this.drawingSnapshot=null,this.activateDrawing(null),e.clearCanvas(this.chart.tempCanvas,this),this.draw(),this.controls.crossX.classList.replace("stx_crosshair_drawing","stx_crosshair"),this.controls.crossY.classList.replace("stx_crosshair_drawing",i),e.ChartEngine.drawingLine=!1),this.runAppend(t,arguments))},e.ChartEngine.prototype.undoStamp=function(t,e){this.undoStamps.push(t),this.dispatch("undoStamp",{before:t,after:e,stx:this})},e.ChartEngine.prototype.undoLast=function(){var t;if(this.activeDrawing)this.undo();else if(this.undoStamps.length){this.drawingObjects=[],this.importDrawings(this.undoStamps.pop()),this.changeOccurred("vector"),-1100873247,1592647311,t=2;for(var e=1;-1100873247!==L.D3T(e.toString(),e.toString().length,41366);e++)this.draw(),t+=2;1592647311!==L.m3T(t.toString(),t.toString().length,72243)&&this.draw()}},e.ChartEngine.prototype.addDrawing=function(t){var e;e=this.exportDrawings(),L.b1n(),this.drawingObjects.push(t),this.undoStamp(e,this.exportDrawings())},e.ChartEngine.prototype.repositionDrawing=function(t,i){var a,r,n;a=this.panels[t.panelName],r=this.adjustIfNecessary(a,this.crosshairTick,this.valueFromPixel(this.backOutY(e.ChartEngine.crosshairY),a)),n=this.chart.tempCanvas,e.clearCanvas(n,this),i?(this.drawingSnapshot=this.exportDrawings(),t.render(n.context)):(t.reposition(n.context,t.repositioner,this.crosshairTick,r),this.drawingSnapshot&&this.undoStamp(e.shallowClone(this.drawingSnapshot),this.exportDrawings()),this.drawingSnapshot=null),t.measure&&t.measure()},e.ChartEngine.prototype.activateRepositioning=function(t){L.L1n(),this.repositioningDrawing=t,t&&(this.draw(),this.repositionDrawing(t,!0)),this.chart.tempCanvas.style.display=t?"block":"none"},e.ChartEngine.prototype.activateDrawing=function(t,i){var a;if("n","o","n","e",i||(i=this.currentPanel),!t)return this.activeDrawing=null,this.chart.tempCanvas.style.display="none",r(this),!1;function r(t){var e;t.layout.studies&&(e=t.layout.studies[i.name])&&!e.overlay&&delete t.overlays[e.name]}return(a=e.ChartEngine.drawingTools[t])||e.Drawing[t]&&(a=e.Drawing[t],e.ChartEngine.registerDrawingTool(t,a)),a&&(this.activeDrawing=new a,this.activeDrawing.construct(this,i),!this.charts[i.name]&&this.activeDrawing.chartsOnly)?(this.activeDrawing=null,r(this),!1):(this.chart.tempCanvas.style.display="block",L.L1n(),this.controls.drawOk&&(this.controls.drawOk.style.display="none"),r(this),!0)},e.ChartEngine.prototype.drawingClick=function(t,i,a){var r,n,s;if(e.Drawing&&t&&""===this.openDialog&&(this.activeDrawing||this.activateDrawing(this.currentVectorParameters.vectorType,t)))return!!this.activeDrawing&&(this.userPointerDown&&!this.activeDrawing.dragToDraw?void(e.ChartEngine.drawingLine||this.activateDrawing(null)):(r=this.tickFromPixel(i,t.chart),n=this.panels[this.activeDrawing.panelName],s=this.adjustIfNecessary(n,r,this.valueFromPixel(a,n)),this.magnetizedPrice&&(s=this.adjustIfNecessary(n,r,this.magnetizedPrice)),this.activeDrawing.click(this.chart.tempCanvas.context,r,s)?this.activeDrawing&&("stx_cros","shai","r_draw","ing",e.ChartEngine.drawingLine=!1,e.clearCanvas(this.chart.tempCanvas,this),this.addDrawing(this.activeDrawing),this.activateDrawing(null),this.adjustDrawings(),this.draw(),this.changeOccurred("vector"),this.controls.crossX.classList.replace("stx_crosshair_drawing","stx_crosshair"),this.controls.crossY.classList.replace("stx_crosshair_drawing","stx_crosshair")):("stx_crosshai","r","stx_crosshair_dr","awing","st","x_crosshair",this.changeOccurred("drawing"),e.ChartEngine.drawingLine=!0,this.controls.crossX.classList.replace("stx_crosshair","stx_crosshair_drawing"),this.controls.crossY.classList.replace("stx_crosshair","stx_crosshair_drawing")),!0))},e.ChartEngine.prototype.rightClickDrawing=function(t,e){var i,a,r,n;i="rightClick",i+="Drawi",i+="ng",this.runPrepend("rightClickDrawing",arguments)||t.permanent||(this.callbackListeners.drawingEdit.length?(a="dr",a+="aw",a+="ingEdit",this.dispatch(a,{stx:this,drawing:t,forceEdit:e})):(r="v",r+="ector",t.abort()||(n=this.exportDrawings(),this.removeDrawing(t),this.undoStamp(n,this.exportDrawings())),this.changeOccurred(r)),this.runAppend(i,arguments))},e.ChartEngine.prototype.magnetize=function(){var t,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A;if(t="stx-dr",t+="aggable",i="#398",i+="df",i+="f",a="C",a+="los",a+="e",r="Hi",r+="gh",n="Ope",L.L1n(),n+="n",s="cal",s+="lo",s+="ut",o="free",o+="form",this.magnetizedPrice=null,this.preferences.magnet&&!this.runPrepend("magnetize",arguments)&&!this.repositioningDrawing&&(l=this.currentVectorParameters.vectorType)&&"projection"!=l&&l!=o&&("annotation"!=l&&l!=s||!e.ChartEngine.drawingLine)&&(c=(h=this.currentPanel).chart,!((u=this.crosshairTick)>c.dataSet.length)&&(d=c.dataSet[u]))){(p=c.transformFunc&&h.yAxis===c.yAxis)&&d.transform&&(d=d.transform),g=this.getRenderedItems(),f=[n,r,"Low",a],this.magneticHold&&this.activeDrawing&&this.activeDrawing.penDown?(y="H",y+="ig",y+="h",g=-1!=f.indexOf(this.magneticHold)&&-1!=g.indexOf(y)?f:[this.magneticHold]):this.magneticHold=null,v=1e9,x=parseFloat(this.preferences.magnet);for(var M=0;M<g.length;M++)if(b=d[g[M]],S=this.getYAxisByField(h,g[M]),(C=e.existsInObjectChain(d,g[M]))&&(b=C.obj[C.member]),(b||0===b)&&(w=this.pixelFromTransformedValue(b,h,S),Math.abs(this.cy-w)<v)){if(v=Math.abs(this.cy-w),x&&x<=v)continue;this.magnetizedPrice=p?this.valueFromPixel(w,h):b,m=w,this.magneticHold=g[M]}T=this.pixelFromTick(u,c),k=m,e.clearCanvas(c.tempCanvas,this),(D=c.tempCanvas.context).beginPath(),L.V6c(8),D.lineWidth=L.r6c("1",552768576),A=Math.max(this.layout.candleWidth,12)/3,D.arc(T,k,Math.min(A,8),0,2*Math.PI,!1),D.fillStyle="#398dff",D.strokeStyle=i,D.fill(),D.stroke(),D.closePath(),c.tempCanvas.style.display="block",this.anyHighlighted&&this.container.classList.remove(t),this.activeDrawing&&this.activeDrawing.move(D,this.crosshairTick,this.magnetizedPrice),this.runAppend("magnetize",arguments)}},e.ChartEngine.prototype.changeVectorType=function(t){L.L1n(),this.currentVectorParameters.vectorType=t,e.Drawing&&e.Drawing.initializeSettings(this,t),e.ChartEngine.drawingLine&&this.undo(),this.insideChart&&this.doDisplayCrosshairs()},e.ChartEngine.prototype.changeVectorParameter=function(t,e){var i;return"fo","n","t","fo","n","tSiz","e","li","ne","Width","axi","sLabel","axisLabel"==t?e="true"===e.toString()||Number(e):"lineWidth"==t?e=Number(e):"fontSize"==t&&(e=parseInt(e,10)+"px"),i=this.currentVectorParameters,L.b1n(),(void 0!==i[t]||"font"==t.substr(0,4)&&("f","ami","ly","family"==(t=t.substr(4).toLowerCase())&&"default"==e.toLowerCase()&&(e=null),void 0!==(i=i.annotation.font)[t]))&&(i[t]=e,!0)},e.ChartEngine.prototype.drawVectors=function(){var t,e,i,a,r;if(!this.vectorsShowing&&(L.L1n(),!this.runPrepend("drawVectors",arguments))){if(this.vectorsShowing=!0,!this.chart.hideDrawings&&!this.highlightedDraggable){for(t={},i=0;i<this.drawingObjects.length;i++)(a=this.drawingObjects[i]).hidden||this.repositioningDrawing!==a&&(e=a.panelName,this.panels[a.panelName]&&!this.panels[a.panelName].hidden&&(t[e]||(t[e]=[]),t[e].push(a)));for(e in t){for(this.startClip(e),r=t[e],i=0;i<r.length;i++)r[i].render(this.chart.context);this.endClip()}}this.runAppend("drawVectors",arguments)}},e.ChartEngine.prototype.adjustDrawings=function(){var t;L.L1n();for(var e=0;e<this.drawingObjects.length;e++)t=this.drawingObjects[e],this.panels[t.panelName]&&t.adjust()},e.Drawing=e.Drawing||function(){this.chartsOnly=!1,this.penDown=!1},e.Drawing.getDrawingParameters=function(t,i){var a,r,n,s;try{a=new e.Drawing[i]}catch(t){}if(!a)return null;a.stx=t,a.copyConfig(!0),r={},n=a.configs;for(var o=0;o<n.length;o++)r[n[o]]=a[n[o]];return(s=t.canvasStyle("stx_annotation"))&&r.font&&(r.font.size=s.fontSize,r.font.family=s.fontFamily,r.font.style=s.fontStyle,r.font.weight=s.fontWeight),r},e.Drawing.saveConfig=function(t,i){var a,r;i&&((a=t.preferences).drawings||(a.drawings={}),a.drawings[i]={},r=new e.Drawing[i],L.L1n(),r.stx=t,e.Drawing.copyConfig(r),r.configs.forEach((function(t){a.drawings[i][t]=r[t]})),t.changeOccurred("preferences"))},e.Drawing.restoreDefaultConfig=function(t,i,a){a?t.preferences.drawings=null:t.preferences.drawings[i]=null,t.changeOccurred("preferences"),t.currentVectorParameters=e.clone(e.ChartEngine.currentVectorParameters),t.currentVectorParameters.vectorType=i},e.Drawing.initializeSettings=function(t,i){var a,r;L.L1n(),(a=e.Drawing[i])&&(r=new a).initializeSettings&&r.initializeSettings(t)},e.Drawing.updateSource=function(t,e,i,a){var r,n;if(e){for(var s in r=!1,t.drawingObjects)(n=t.drawingObjects[s]).field&&(i?n.field==e?(n.field=i,r=!0):n.field.indexOf(e)>-1&&-1==n.field.indexOf(e+"-")&&(n.field=n.field.replace(e,i),r=!0):("-","->",n.field.split("--\x3e")[0]!=e&&n.panelName!=e||(n.panelName=a,r=!0)));r&&t.changeOccurred("vector")}},e.Drawing.prototype.copyConfig=function(t){L.L1n(),e.Drawing.copyConfig(this,t)},e.Drawing.copyConfig=function(t,i){var a,r,n,s,o;for(a=t.stx.currentVectorParameters,r=t.configs,L.L1n(),n=0;n<r.length;n++)"pa","r","amet","ers","color"==(s=r[n])?t.color=a.currentColor:"parameters"==s?t.parameters=e.clone(a.fibonacci):"font"==s?t.font=e.clone(a.annotation.font):t[s]=a[s];if(i&&(o=t.stx.preferences)&&o.drawings)for(e.extend(t,o.drawings[a.vectorType]),n=0;n<r.length;n++)"color"==(s=r[n])?a.currentColor=t.color:"parameters"==s?a.fibonacci=e.clone(t.parameters):"font"==s?a.annotation.font=e.clone(t.font):a[s]=t[s]},e.Drawing.prototype.dragToDraw=!1,e.Drawing.prototype.permanent=!1,e.Drawing.prototype.chartsOnly=!1,e.Drawing.prototype.abort=function(t){},e.Drawing.prototype.measure=function(){},e.Drawing.prototype.construct=function(t,e){this.stx=t,this.panelName=e.name},e.Drawing.prototype.render=function(t){L.L1n(),console.warn("must implement render function!")},e.Drawing.prototype.click=function(t,e,i){L.L1n(),console.warn("must implement click function!")},e.Drawing.prototype.move=function(t,e,i){var a,r,n=L;n.V6c(13),a=-n.w6c("1992738816",1062201248),r=2;for(var s=1;n.m3T(s.toString(),s.toString().length,69989)!==a;s++)console.warn(""),r+=2;600478542!==n.m3T(r.toString(),r.toString().length,97434)&&("must implem","ent move"," function!",console.warn("must implement move function!"))},e.Drawing.prototype.reposition=function(t,e,i,a){},e.Drawing.prototype.intersected=function(t,e,i){L.L1n(),console.warn("must implement intersected function!")},e.Drawing.prototype.reconstruct=function(t,e){L.b1n(),console.warn("must implement reconstruct function!")},e.Drawing.prototype.serialize=function(){L.L1n(),console.warn("must implement serialize function!")},e.Drawing.prototype.adjust=function(){L.L1n(),console.warn("must implement adjust function!")},e.Drawing.prototype.highlight=function(t){return(t&&!this.highlighted||!t&&this.highlighted)&&(this.highlighted=t),this.highlighted},e.Drawing.prototype.littleCircleRadius=function(){return L.b1n(),6,6},e.Drawing.prototype.littleCircle=function(t,i,a,r){var n,s;this.permanent||(n=this.stx.defaultColor,s=e.chooseForegroundColor(n),t.beginPath(),t.lineWidth=1,t.arc(i,a,this.littleCircleRadius(),0,2*Math.PI,!1),t.fillStyle=r?n:s,t.strokeStyle=n,L.b1n(),t.setLineDash([]),t.fill(),t.stroke(),t.closePath())},e.Drawing.prototype.rotator=function(t,e,i,a){var r,n,s,o=L;this.permanent||(r=this.littleCircleRadius(),n=this.stx.defaultColor,t.beginPath(),t.lineWidth=2,a||(t.globalAlpha=.5),o.V6c(0),s=o.r6c(r,4),t.arc(e,i,s,0,3*Math.PI/2,!1),o.T6c(14),t.moveTo(o.r6c(e,2,s),o.w6c(i,"2",o.T6c(15))),o.V6c(0),t.lineTo(o.r6c(s,e),i),o.V6c(16),t.lineTo(o.r6c(s,e,2),o.w6c(2,i,o.V6c(0))),o.V6c(17),t.moveTo(o.w6c("2",e),o.w6c(i,s,2,o.T6c(9))),o.T6c(5),t.lineTo(e,o.w6c(i,s)),o.V6c(5),t.lineTo(o.w6c(e,2),o.r6c(s,2147483647,"2",i,o.T6c(18))),t.strokeStyle=n,t.stroke(),o.L1n(),t.closePath(),t.globalAlpha=1)},e.Drawing.prototype.mover=function(t,e,i,a){var r,n,s,o=L;if(!this.permanent){o.L1n(),r=this.littleCircleRadius(),n=this.stx.defaultColor,5,o.T6c(19),s=o.w6c(r,0,"1"),t.save(),t.lineWidth=2,t.strokeStyle=n,t.translate(e,i),a||(t.globalAlpha=.5);for(var l=0;l<4;l++)t.rotate(Math.PI/2),t.beginPath(),t.moveTo(0,s),o.T6c(0),t.lineTo(0,o.r6c(5,s)),o.V6c(9),t.moveTo(-2,o.w6c(s,2,5)),o.V6c(0),t.lineTo(0,o.r6c(5,s)),o.V6c(13),t.lineTo(o.w6c("2",1334325248),o.r6c(s,2,5,o.V6c(9))),t.closePath(),t.stroke();t.globalAlpha=1,t.restore()}},e.Drawing.prototype.resizer=function(t,e,i,a){var r,n,s,o,l=L;if(!this.permanent){r=this.littleCircleRadius(),l.L1n(),n=this.stx.defaultColor,s=5*Math.sqrt(2),l.T6c(0),o=l.r6c(1,r),t.save(),t.lineWidth=2,t.strokeStyle=n,t.translate(e,i),t.rotate(-e*i/Math.abs(e*i)*Math.PI/4),a||(t.globalAlpha=.5);for(var h=0;h<2;h++)t.rotate(Math.PI),t.beginPath(),t.moveTo(0,o),l.V6c(0),t.lineTo(0,l.r6c(s,o)),l.T6c(20),t.moveTo(-2,l.r6c(1708411872,"2",s,o)),l.V6c(0),t.lineTo(0,l.w6c(s,o)),l.T6c(20),t.lineTo(2,l.w6c(46492864,"2",s,o)),t.closePath(),t.stroke();t.globalAlpha=1,t.restore()}},e.Drawing.prototype.pointIntersection=function(t,e,i,a){if(!this.stx.panels[this.panelName])return!1;if(a){if(t>=i.cx0&&t<=i.cx1&&e>=i.cy0&&e<=i.cy1)return!0}else if(t>=i.x0&&t<=i.x1&&e>=Math.min(i.y0,i.y1)&&e<=Math.max(i.y0,i.y1))return!0;return!1},e.Drawing.prototype.setPoint=function(t,i,a,r){var n,s,o,l,h,c=L;c.b1n(),n=null,s=null,"number"==R(i)?n=i:i.length>=8?s=i:n=Number(i),(a||0===a)&&(c.T6c(0),this[c.w6c(t,"v")]=a),null!==n?("t","z","o",o=this.stx.dateFromTick(n,r,!0),c.T6c(0),this[c.w6c(t,"tzo")]=o.getTimezoneOffset(),c.T6c(0),this[c.w6c(t,"d")]=e.yyyymmddhhmmssmmm(o),c.T6c(0),this[c.r6c(t,"p")]=[n,a]):null!==s&&("freefo","rm","t","zo",o=e.strToDateTime(s),this["tzo"+t]||0===this["tzo"+t]||(c.T6c(0),this[c.w6c(t,"tzo")]=o.getTimezoneOffset()),c.V6c(0),this[c.w6c(t,"d")]=s,l=this["tzo"+t]-o.getTimezoneOffset(),o.setMinutes(o.getMinutes()+l),h=!1,"freeform"==this.name||e.ChartEngine.isDailyInterval(this.stx.layout.interval)||o.getHours()||o.getMinutes()||o.getSeconds()||o.getMilliseconds()||(h=!0),c.T6c(0),this[c.w6c(t,"p")]=[this.stx.tickFromDate(e.yyyymmddhhmmssmmm(o),r,null,h),a])},e.Drawing.prototype.getLineColor=function(t){var i,a,r,n,s,o,l,h,c,u,d,p=L;if("a","u","t","o","a","ut","o",t||(t=this.color),p.b1n(),i=this.stx,a=t,this.highlighted)a=i.getCanvasColor("stx_highlight_vector");else if(e.isTransparent(a)){-371076427,p.T6c(1),r=-p.r6c("1269408118",1),n=2;for(var m=1;-371076427!==p.m3T(m.toString(),m.toString().length,68806);m++)a=i.defaultColor,n+=2;p.D3T(n.toString(),n.toString().length,59957)!==r&&(a=i.defaultColor)}else if("auto"==a&&(a=i.defaultColor,this.field)){for(s in i.layout.studies)if(l=(o=i.layout.studies[s]).outputs[o.outputMap[this.field]]){a=l.color||l;break}for(s in i.chart.seriesRenderers){c=i.chart.seriesRenderers[s];for(var g=0;g<c.seriesParams.length;g++){if("C","lo","s","e",(d=(u=c.seriesParams[g]).field)||c.highLowBars||(d=this.defaultPlotField||"Close"),u.symbol&&u.subField&&(d+="--\x3e"+u.subField),this.field==d){a=u.color;break}u.field&&u.field==this.field.split("--\x3e")[0]&&(h=u.color)}}h&&(a=h)}return"auto"==a&&(a=i.defaultColor),a},e.Drawing.BaseTwoPoint=function(){L.L1n(),this.p0=null,this.p1=null,this.color=""},e.inheritsFrom(e.Drawing.BaseTwoPoint,e.Drawing),e.Drawing.BaseTwoPoint.prototype.configs=[],e.Drawing.BaseTwoPoint.prototype.lineIntersection=function(t,i,a,r,n,s,o){var l,h,c;return n||(n=this.p0),s||(s=this.p1),l=this.stx,!(!n||!s)&&(void 0!==(h=e.convertBoxToPixels(l,this.panelName,a)).x0&&(c={x0:n[0],x1:s[0],y0:n[1],y1:s[1]},o||(c=e.convertBoxToPixels(l,this.panelName,c)),L.L1n(),e.boxIntersects(h.x0,h.y0,h.x1,h.y1,c.x0,c.y0,c.x1,c.y1,r)))},e.Drawing.BaseTwoPoint.prototype.boxIntersection=function(t,e,i){return!(!this.p0||!this.p1)&&(!(i.x0>Math.max(this.p0[0],this.p1[0])||i.x1<Math.min(this.p0[0],this.p1[0]))&&!(i.y1>Math.max(this.p0[1],this.p1[1])||i.y0<Math.min(this.p0[1],this.p1[1])))},e.Drawing.BaseTwoPoint.prototype.accidentalClick=function(t,e){var i,a,r,n,s,o,l,h=L;if(i=this.stx.panels[this.panelName],h.L1n(),a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(t,i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,t,e),h.V6c(5),o=Math.abs(h.r6c(r,a)),h.V6c(5),l=Math.abs(h.w6c(s,n)),h.T6c(21),Math.sqrt(h.w6c(l,l,o,o))<10)return this.penDown=!1,this.dragToDraw&&this.stx.undo(),!0},e.Drawing.BaseTwoPoint.prototype.click=function(t,e,i){var a;return this.copyConfig(),a=this.stx.panels[this.panelName],this.penDown?this.accidentalClick(e,i)?this.dragToDraw:(this.setPoint(1,e,i,a.chart),this.penDown=!1,L.b1n(),!0):(this.setPoint(0,e,i,a.chart),this.penDown=!0,!1)},e.Drawing.BaseTwoPoint.prototype.adjust=function(){var t;L.L1n(),(t=this.stx.panels[this.panelName])&&(L.V6c(1),this.setPoint(L.w6c("0",1),this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart))},e.Drawing.BaseTwoPoint.prototype.move=function(t,e,i){L.b1n(),this.penDown&&(this.copyConfig(),this.p1=[e,i],this.render(t))},e.Drawing.BaseTwoPoint.prototype.measure=function(){var t,i,a;L.b1n(),this.p0&&this.p1&&(".mStic","kyInterior",this.stx.setMeasure(this.p0[1],this.p1[1],this.p0[0],this.p1[0],!0,this.name),(i=(t=this.stx.controls.mSticky)&&t.querySelector(".mStickyInterior"))&&((a=[]).push(e.capitalize(this.name)),this.getYValue&&a.push(this.field||this.stx.defaultPlotField||"Close"),a.push(i.innerHTML),i.innerHTML=a.join("<br>")))},e.Drawing.BaseTwoPoint.prototype.reposition=function(t,e,i,a){var r,n,s,o;if(e)if(r=this.stx.panels[this.panelName],n=e.tick-i,s=e.value-a,"move"==e.action)this.setPoint(0,e.p0[0]-n,e.p0[1]-s,r.chart),this.setPoint(1,e.p1[0]-n,e.p1[1]-s,r.chart),this.render(t);else if("drag"==e.action){this[e.point]=[i,a],1108698281,-968128418,o=2;for(var l=1;1108698281!==L.D3T(l.toString(),l.toString().length,329);l++)this.setPoint(0,this.p0[0],this.p0[1],r.chart),o+=2;-968128418!==L.D3T(o.toString(),o.toString().length,46789)&&this.setPoint(3,this.p0[1],this.p0[6],r.chart),this.setPoint(1,this.p1[0],this.p1[1],r.chart),this.render(t)}},e.Drawing.BaseTwoPoint.prototype.drawDropZone=function(t,e,i,a,r){var n,s,o,l,h,c=L;c.L1n(),(n=this.stx.panels[this.panelName])&&(s=n.left,o=n.width,(a||0===a)&&(s=this.stx.pixelFromTick(a,n.chart)),(r||0===r)&&(o=this.stx.pixelFromTick(r,n.chart)),l=this.stx.pixelFromPrice(e,n),h=this.stx.pixelFromPrice(i,n),t.fillStyle="#008000",t.globalAlpha=.2,c.T6c(5),t.fillRect(s,l,c.w6c(o,s),c.w6c(h,l)),c.T6c(8),t.globalAlpha=c.w6c("1",753062144))},e.Drawing.annotation=function(){this.name="annotation",this.arr=[],L.L1n(),this.w=0,this.h=0,this.padding=4,this.text="",this.ta=null,this.fontSize=0,this.font={}},e.inheritsFrom(e.Drawing.annotation,e.Drawing.BaseTwoPoint),e.Drawing.annotation.prototype.getFontString=function(){var t,e;for(var i in"1","2px",this.fontDef={style:null,weight:null,size:"12px",family:null},(t=this.stx.canvasStyle("stx_annotation"))&&(t.fontStyle&&(this.fontDef.style=t.fontStyle),t.fontWeight&&(this.fontDef.weight=t.fontWeight),t.fontSize&&(this.fontDef.size=t.fontSize),t.fontFamily&&(this.fontDef.family=t.fontFamily)),this.font.style&&(this.fontDef.style=this.font.style),this.font.weight&&(this.fontDef.weight=this.font.weight),this.font.size&&(this.fontDef.size=this.font.size),this.font.family&&(this.fontDef.family=this.font.family),this.fontString="",e=!0,this.fontDef)this.fontDef[i]&&(e?e=!1:this.fontString+=" ",this.fontString+=this.fontDef[i])},e.Drawing.annotation.prototype.configs=["color","font"],e.Drawing.annotation.prototype.measure=function(){},e.Drawing.annotation.prototype.render=function(t){var e,i,a,r,n,s,o,l,h,c,u,d,p,m,g=L;if(!this.ta&&(e=this.stx.panels[this.panelName])){if(i=this.stx.pixelFromTick(this.p0[0],e.chart),a=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),t.font=this.fontString,t.textBaseline="middle",r=i,n=a,s=this.w,o=this.h,l=this.getLineColor(),this.stem&&(this.stem.d?(h=this.stx.pixelFromTick(this.stem.t),u=this.stx.pixelFromValueAdjusted(e,this.stem.t,this.stem.v),g.V6c(22),c=g.r6c(r,"2",s),g.V6c(23),d=g.r6c(o,n,2)):this.stem.x&&(h=r,u=n,r+=this.stem.x,n+=this.stem.y,g.T6c(23),c=g.r6c(s,r,2),g.T6c(23),d=g.w6c(o,n,2)),t.beginPath(),this.borderColor?t.strokeStyle=this.borderColor:t.strokeStyle=l,t.moveTo(h,u),t.lineTo(c,d),t.stroke()),p=t.lineWidth,this.highlighted?(this.stx.canvasColor("stx_annotation_highlight_bg",t),g.T6c(5),t.fillRect(g.r6c(r,p),g.w6c(o,n,2,p,g.T6c(24)),g.r6c(0,p,s,"2",g.T6c(25)),g.r6c(p,2,o,g.T6c(26)))):this.fillColor?(t.fillStyle=this.fillColor,g.T6c(27),t.fillRect(r,g.r6c(o,"2",n),s,o)):this.stem&&(t.fillStyle=this.stx.containerColor,g.V6c(28),t.fillRect(r,g.w6c(n,2,o),s,o)),this.borderColor&&(t.beginPath(),t.strokeStyle=this.highlighted?this.stx.getCanvasColor("stx_highlight_vector"):this.borderColor,g.T6c(5),t.rect(g.w6c(r,p),g.r6c(o,n,2,p,g.T6c(24)),g.w6c(p,2,s,g.V6c(26)),g.w6c(p,2,o,g.T6c(26))),t.stroke()),this.highlighted)this.stx.canvasColor("stx_annotation_highlight",t);else{-1765204949,279542358,m=2;for(var f=1;-1765204949!==g.D3T(f.toString(),f.toString().length,11509);f++)t.fillStyle=l,g.T6c(29),m+=g.r6c("2",0);279542358!==g.D3T(m.toString(),m.toString().length,87414)&&(t.fillStyle=l)}if(n+=this.padding/2,!this.ta)for(var y=0;y<this.arr.length;y++)t.fillText(this.arr[y],r+this.padding,n-o/2+this.fontSize/2),n+=this.fontSize+2;t.textBaseline="alphabetic"}},e.Drawing.annotation.prototype.onChange=function(t){},e.Drawing.annotation.prototype.edit=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x=L;function b(t){return function(i){var a,s,o,l,h,c,u,d,p,m,g;if(i)switch(i.keyCode){case 27:return void t.stx.undo()}a=t.stx,o=(s=t.ta).value.split("\n"),l=0,a.chart.context.font=t.fontString;for(var f=0;f<o.length;f++)(h=a.chart.context.measureText(o[f]).width)>l&&(l=h);c=(o.length+1)*(t.fontSize+3),l<50&&(l=50),x.T6c(30),u=x.w6c("2",2);for(var y=1;-1393591738!==x.D3T(y.toString(),y.toString().length,41355);y++)x.T6c(14),s.style.width=x.w6c(l,30,"px"),x.V6c(0),s.style.height=x.w6c("px",c),d=parseInt(e.stripPX(s.style.top),10),p=e.stripPX(s.style.left),l=s.clientWidth,u+=2;if(967877978!==x.m3T(u.toString(),u.toString().length,30494)&&(x.V6c(31),s.style.width=x.w6c("px",l,37),x.T6c(5),s.style.height=x.r6c(c,"px"),d=parseInt(e.stripPX(s.style.top),39),p=e.stripPX(s.style.left),l=s.clientWidth),c=s.clientHeight,p+l+100<t.stx.chart.canvasWidth){"p","x",x.T6c(0),r.style.top=x.w6c("px",d),x.V6c(0),n.style.top=x.w6c("px",d),x.T6c(32),r.style.left=x.r6c("px",10,p,l),-331748243,x.V6c(30),m=x.r6c("819425259",810773184),g=2;for(var v=1;-331748243!==x.D3T(v.toString(),v.toString().length,60129);v++)x.V6c(32),n.style.left=x.r6c("px",60,p,l),g+=2;x.m3T(g.toString(),g.toString().length,82070)!==m&&(x.T6c(33),n.style.left=x.w6c(l,"",67,p))}else d+c+30<t.stx.chart.canvasHeight?("p","x",x.T6c(32),r.style.top=x.r6c("px",10,d,c),x.V6c(32),n.style.top=x.w6c("px",10,d,c),x.T6c(0),r.style.left=x.r6c("px",p),x.T6c(34),n.style.left=x.w6c("50",p,"px",0)):(x.T6c(16),r.style.top=x.r6c("px",d,35),x.V6c(16),n.style.top=x.r6c("px",d,35),x.T6c(0),r.style.left=x.w6c("px",p),x.T6c(14),n.style.left=x.r6c(p,50,"px"))}}("inl","ine-block","c","all","out",a=this.stx.panels[this.panelName])&&(r=this.stx.controls.annotationSave,n=this.stx.controls.annotationCancel,r&&n&&(s=this.stx,o=this.ta,s.editingAnnotation=!0,s.undisplayCrosshairs(),s.openDialog="annotation",o||("2","0","p","x",(o=this.ta=document.createElement("TEXTAREA")).className="stx_annotation",o.onkeyup=b(this),o.onmouseup=(f=s,function(t){f.manageTouchAndMouse&&e.ChartEngine.drawingLine&&f.mouseup(t)}),o.setAttribute("wrap","hard"),e.isIOS7or8&&o.setAttribute("placeholder","Enter Text"),s.chart.container.appendChild(o),o.style.position="absolute",o.style.width="100px",o.style.height="20px",o.value=this.text,e.touchDevice&&(o.ontouchstart=function(t){t.stopPropagation()})),l=this,o.oninput=function(t){"historyUndo"!=t.inputType&&"historyRedo"!=t.inputType&&l.onChange(t)},o.style.font=this.fontString,this.color&&("transparent"==this.color||"auto"==this.color?(h=getComputedStyle(o))&&e.isTransparent(h.backgroundColor)?o.style.color=s.defaultColor:o.style.color="#000":o.style.color=this.color),c=s.pixelFromTick(this.p0[0],a.chart),u=s.pixelFromValueAdjusted(a,this.p0[0],this.p0[1]),x.b1n(),o.style.left=c+140<s.chart.canvasRight?c+"px":s.chart.canvasRight-200+"px",o.style.top=u+60<s.chart.canvasHeight?u-(isNaN(this.h)?this.defaultHeight:this.h/2)+"px":u-60+"px","callout"==this.name&&(o.style.left=e.stripPX(o.style.left)-(isNaN(this.w)?this.defaultWidth:this.w/2)+"px"),e.safeClickTouch(r,(y=this,function(t){var i;""!==y.ta.value&&(y.text=y.ta.value,(i=y.stx).editingAnnotation=!1,y.adjust(),x.L1n(),i.drawingSnapshot?i.undoStamp(e.shallowClone(i.drawingSnapshot),i.exportDrawings()):i.addDrawing(y),i.undo(),i.cancelTouchSingleClick=!0,i.changeOccurred("vector"))})),e.safeClickTouch(n,(v=this,function(t){var e;e=v.stx,x.L1n(),e.editingAnnotation=!1,e.undo(),e.cancelTouchSingleClick=!0})),b(this)(),r.style.display="inline-block",n.style.display="inline-block",i&&(s.drawingSnapshot=s.exportDrawings(),this.hidden=!0,s.draw(),s.activeDrawing=this,e.ChartEngine.drawingLine=!0,t=s.chart.tempCanvas.context,s.chart.tempCanvas.style.display="block",this.w=o.clientWidth,this.h=o.clientHeight,e.clearCanvas(t.canvas,s),this.render(t),this.edit(t)),o.focus(),!e.isAndroid||e.is_chrome||e.isFF||(this.priorBottom=s.chart.container.style.bottom,x.V6c(30),d=x.w6c("400",144),(p=s.resolveY(u)+100)>e.pageHeight()-d&&("p","x",m=e.pageHeight()-p,x.V6c(5),g=x.r6c(d,m),x.V6c(0),s.chart.container.style.bottom=x.w6c("px",g)))))},e.Drawing.annotation.prototype.click=function(t,e,i){var a;if(!this.stx.overXAxis&&!this.stx.overYAxis)return a=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,e,i,a.chart),this.adjust(),this.edit(t),!1},e.Drawing.annotation.prototype.reposition=function(t,e,i,a){var r,n,s;e&&(r=this.stx.panels[this.panelName],n=e.tick-i,s=e.value-a,L.L1n(),this.setPoint(0,e.p0[0]-n,e.p0[1]-s,r.chart),this.render(t))},e.Drawing.annotation.prototype.intersected=function(t,i,a){var r,n,s,o,l,h,c;return r=this.stx.panels[this.panelName],this.p0?(n=this.stx.pixelFromTick(this.p0[0],r.chart),s=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1])-this.h/2,L.b1n(),o=n+this.w,l=s+this.h,this.stem&&this.stem.x&&(n+=this.stem.x,o+=this.stem.x,s+=this.stem.y,l+=this.stem.y),h=this.stx.pixelFromTick(t,r.chart),c=this.stx.pixelFromValueAdjusted(r,t,i),h+a.r>=n&&h-a.r<=o&&c+a.r>=s&&c-a.r<=l&&(this.highlighted=!0,{p0:e.clone(this.p0),tick:t,value:i})):null},e.Drawing.annotation.prototype.abort=function(){var t,i;t=this.stx.controls.annotationSave,i=this.stx.controls.annotationCancel,t&&(t.style.display="none"),i&&(i.style.display="none"),this.ta&&this.stx.chart.container.removeChild(this.ta),L.L1n(),this.ta=null,this.stx.openDialog="",this.stx.showCrosshairs(),this.stx.editingAnnotation=!1,e.clearCanvas(this.stx.chart.tempCanvas,this.stx),!e.isAndroid||e.is_chrome||e.isFF||(this.stx.chart.container.style.bottom=this.priorBottom),e.fixScreen()},e.Drawing.annotation.prototype.reconstruct=function(t,i){this.stx=t,this.color=i.col,this.panelName=i.pnl,this.d0=i.d0,this.tzo0=i.tzo0,this.v0=i.v0,this.text=t.escapeOnSerialize?decodeURIComponent(i.text):i.text,this.stem=i.stem,this.borderColor=i.bc,this.fillColor=i.bg,this.lineWidth=i.lw,this.pattern=i.ptrn,this.font=e.replaceFields(i.fnt,{st:"style",sz:"size",wt:"weight",fl:"family"}),this.font||(this.font={}),this.adjust()},e.Drawing.annotation.prototype.serialize=function(){var t,i,a,r,n=L;n.V6c(13),t=-n.w6c("1616340426",273866112),n.L1n(),i=2;for(var s=1;1512519983!==n.D3T(s.toString(),s.toString().length,10844);s++)a={name:this.name,pnl:this.panelName,col:this.color,d0:this.d0,tzo0:this.tzo0,v0:this.v0,text:this.stx.escapeOnSerialize?encodeURIComponent(this.text):this.text},n.T6c(1),i+=n.r6c("2",1);return n.m3T(i.toString(),i.toString().length,65143)!==t&&(a={name:this.name,pnl:this.panelName,col:this.color,d0:this.d0,tzo0:this.tzo0,v0:this.v0,text:this.stx.escapeOnSerialize?encodeURIComponent(this.text):this.text}),this.font&&(r=e.removeNullValues(e.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"})),e.isEmpty(r)||(a.fnt=r)),this.stem&&(a.stem={d:this.stem.d,v:this.stem.v,x:this.stem.x,y:this.stem.y}),this.borderColor&&(a.bc=this.borderColor),this.fillColor&&(a.bg=this.fillColor),this.lineWidth&&(a.lw=this.lineWidth),this.pattern&&(a.ptrn=this.pattern),a},e.Drawing.annotation.prototype.renderText=function(){var t,i,a,r,n,s;if(this.getFontString(),t=this.stx.panels[this.panelName]){this.arr=this.text.split("\n"),i=0,this.stx.chart.context.font=this.fontString;for(var o=0;o<this.arr.length;o++)(a=this.stx.chart.context.measureText(this.arr[o]).width)>i&&(i=a);0===i&&(i=2*this.defaultWidth),this.fontSize=e.stripPX(this.fontDef.size),r=this.arr.length*(this.fontSize+2),e.touchDevice&&(r+=5),this.w=i+2*this.padding,this.h=r+2*this.padding,n=this.stx.pixelFromTick(this.p0[0],t.chart)+i,s=this.stx.pixelFromValueAdjusted(t,this.p0[0],this.p0[1])+r,this.p1=[this.stx.tickFromPixel(n,t.chart),this.stx.valueFromPixel(s,t)],this.stem&&this.stem.d&&(this.stem.t=this.stx.tickFromDate(this.stem.d,t.chart))}},e.Drawing.annotation.prototype.adjust=function(){var t;L.L1n(),(t=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,t.chart),this.renderText())},e.Drawing.segment=function(){this.name="segment"},e.inheritsFrom(e.Drawing.segment,e.Drawing.BaseTwoPoint),e.Drawing.segment.prototype.render=function(t){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;(a=this.stx.panels[this.panelName])&&(r=this.stx.pixelFromTick(this.p0[0],a.chart),n=this.stx.pixelFromTick(this.p1[0],a.chart),s=this.stx.pixelFromValueAdjusted(a,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(a,this.p1[0],this.p1[1]),l=this.lineWidth,h=this.getLineColor(),"none"==(c={pattern:this.pattern,lineWidth:l}).pattern&&(c.pattern="solid"),this.stx.plotLine(r,n,s,o,h,this.name,t,a,c),this.axisLabel&&!this.repositioner&&("horizontal"==this.name?(this.stx.endClip(),u=this.p0[1],a.chart.transformFunc&&(u=a.chart.transformFunc(this.stx,a.chart,u)),u=a.yAxis.priceFormatter?a.yAxis.priceFormatter(this.stx,a,u):this.stx.formatYAxisPrice(u,a),this.stx.createYAxisLabel(a,u,s,h),this.stx.startClip(a.name)):"vertical"==this.name&&this.p0[0]>=0&&!this.stx.chart.xAxis.noDraw&&(d=this.stx.dateFromTick(this.p0[0],a.chart,!0),e.ChartEngine.isDailyInterval(this.stx.layout.interval)?d.setHours(0,0,0,0):(m=1e3*d.getSeconds()+d.getMilliseconds(),i.Date&&this.stx.displayZone&&(p=new i.Date(d.getTime(),this.stx.displayZone),d=new Date(p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes()),d=new Date(d.getTime()+m))),g=e.mmddhhmm(e.yyyymmddhhmm(d)),a.chart.xAxis.formatter?g=a.chart.xAxis.formatter(d,this.name,null,null,g):this.stx.internationalizer&&(0!==d.getHours()||0!==d.getMinutes()?(f=this.stx.internationalizer.monthDay.format(d),f+=" "+this.stx.internationalizer.hourMinute.format(d)):f=this.stx.internationalizer.yearMonthDay.format(d),g=f),this.stx.endClip(),this.stx.createXAxisLabel(a,g,r,h,null,!0),this.stx.startClip(a.name))),this.highlighted&&"horizontal"!=this.name&&"vertical"!=this.name&&("p","1",y="p0"==this.highlighted,v="p1"==this.highlighted,this.littleCircle(t,r,s,y),this.littleCircle(t,n,o,v)))},e.Drawing.segment.prototype.abort=function(){L.L1n(),this.stx.setMeasure(null,null,null,null,!1)},e.Drawing.segment.prototype.intersected=function(t,i,a){var r,n;if("li","ne","ho","r","izontal","ver","tical",!this.p0||!this.p1)return null;if(r=this.name,L.L1n(),"horizontal"!=r&&"vertical"!=r&&"gartley"!=r)for(var s in n={0:this.p0,1:this.p1})if(this.pointIntersection(n[s][0],n[s][1],a))return L.V6c(0),this.highlighted=L.w6c(s,"p"),{action:"drag",point:"p"+s};return"horizontal"!=r&&"vertical"!=r||(r="line"),this.lineIntersection(t,i,a,r)?("mov","e",this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:i}):null},e.Drawing.segment.prototype.configs=["color","lineWidth","pattern"],e.Drawing.segment.prototype.copyConfig=function(t){e.Drawing.copyConfig(this,t),"none"==this.pattern&&-1==this.configs.indexOf("fillColor")&&(this.pattern="solid")},e.Drawing.segment.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.adjust()},e.Drawing.segment.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},e.Drawing.line=function(){L.L1n(),this.name="line"},e.inheritsFrom(e.Drawing.line,e.Drawing.segment),e.Drawing.line.prototype.dragToDraw=!1,e.Drawing.line.prototype.calculateOuterSet=function(t){var i,a,r;this.p0[0]==this.p1[0]||this.p0[1]==this.p1[1]||e.ChartEngine.isDailyInterval(this.stx.layout.interval)||((i={x0:this.p0[0],y0:this.p0[1],x1:this.p1[0],y1:this.p1[1]}).x0>i.x1&&(i={x0:this.p1[0],y0:this.p1[1],x1:this.p0[0],y1:this.p0[1]}),a=i.x0-1e3,r=i.x1+1e3,this.v0B=e.yIntersection(i,a),this.v1B=e.yIntersection(i,r),this.d0B=this.stx.dateFromTick(a,t.chart),this.d1B=this.stx.dateFromTick(r,t.chart))},e.Drawing.line.prototype.click=function(t,e,i){var a,r,n=L;a=this.stx.panels[this.panelName],n.V6c(8),r=n.w6c("2",1754639584);for(var s=1;462074504!==n.D3T(s.toString(),s.toString().length,5187);s++){if(-a)return;n.T6c(13),r+=n.r6c("2",1694408896)}if(294708218===n.D3T(r.toString(),r.toString().length,1308)||a)return this.copyConfig(),this.penDown?this.accidentalClick(e,i)?this.dragToDraw:(n.L1n(),this.setPoint(1,e,i,a.chart),this.calculateOuterSet(a),this.penDown=!1,!0):(this.setPoint(0,e,i,a.chart),this.penDown=!0,!1)},e.Drawing.line.prototype.reconstruct=function(t,e){var i,a,r=L;this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,r.L1n(),this.v0=e.v0,this.v1=e.v1,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,e.d0B&&(this.d0B=e.d0B,this.d1B=e.d1B,this.v0B=e.v0B,this.v1B=e.v1B),r.T6c(8),i=-r.r6c("1224191971",1306713600),r.V6c(5),a=r.r6c("2",0);for(var n=1;-1890083222!==r.m3T(n.toString(),n.toString().length,47574);n++)this.adjust(),r.T6c(29),a+=r.r6c("2",0);r.m3T(a.toString(),a.toString().length,15785)!==i&&this.adjust()},e.Drawing.line.prototype.serialize=function(){var t;return t={name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1},this.d0B&&(t.d0B=this.d0B,t.d1B=this.d1B,t.v0B=this.v0B,t.v1B=this.v1B),t},e.Drawing.line.prototype.adjust=function(){var t;(t=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart),L.L1n(),e.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&(this.setPoint(0,this.d0B,this.v0B,t.chart),this.setPoint(1,this.d1B,this.v1B,t.chart)))},e.Drawing.horizontal=function(){this.name="horizontal"},e.inheritsFrom(e.Drawing.horizontal,e.Drawing.segment),e.Drawing.horizontal.prototype.dragToDraw=!1,e.Drawing.horizontal.prototype.measure=function(){},e.Drawing.horizontal.prototype.click=function(t,e,i){var a;if(a=this.stx.panels[this.panelName])return this.copyConfig(),this.setPoint(0,e,i,a.chart),L.L1n(),!0},e.Drawing.horizontal.prototype.intersected=function(t,e,i){var a,r;return this.lineIntersection(t,e,i,"line")?(a=this.stx.chart.dataSet.length,L.V6c(35),r=this.p0[L.w6c(2147483647,"1")],this.highlighted=!0,{action:"move",p0:[a-2,r],p1:[a-1,r],tick:t,value:e}):(L.L1n(),null)},e.Drawing.horizontal.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,L.b1n(),this.v0=e.v0,this.d0=e.d0,this.tzo0=e.tzo0,this.axisLabel=e.al,this.adjust()},e.Drawing.horizontal.prototype.serialize=function(){var t;return t={name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,v0:this.v0,d0:this.d0,tzo0:this.tzo0,al:this.axisLabel},L.L1n(),t},e.Drawing.horizontal.prototype.adjust=function(){var t;L.L1n(),(t=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,t.chart),this.p1=[this.p0[0]+100,this.p0[1]])},e.Drawing.horizontal.prototype.configs=["color","lineWidth","pattern","axisLabel"],e.Drawing.vertical=function(){this.name="vertical"},e.inheritsFrom(e.Drawing.vertical,e.Drawing.horizontal),e.Drawing.vertical.prototype.measure=function(){},e.Drawing.vertical.prototype.intersected=e.Drawing.segment.prototype.intersected,e.Drawing.vertical.prototype.adjust=function(){var t;L.b1n(),(t=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,t.chart),this.p1=[this.p0[0],this.p0[1]+1])},e.Drawing.measure=function(){this.name="measure"},e.inheritsFrom(e.Drawing.measure,e.Drawing.segment),e.Drawing.measure.prototype.click=function(t,e,i){return this.copyConfig(),this.penDown?(this.stx.undo(),this.penDown=!1,L.L1n(),!0):(this.p0=[e,i],this.penDown=!0,!1)},e.Drawing.rectangle=function(){this.name="rectangle"},e.inheritsFrom(e.Drawing.rectangle,e.Drawing.BaseTwoPoint),e.Drawing.rectangle.prototype.render=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f=L;(i=this.stx.panels[this.panelName])&&(f.L1n(),a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),o=Math.round(Math.min(a,r))+.5,l=Math.min(n,s),h=Math.max(a,r)-o,c=Math.max(n,s)-l,u=this.color,this.highlighted&&(u=this.stx.getCanvasColor("stx_highlight_vector")),(d=this.fillColor)&&!e.isTransparent(d)&&"auto"!=d&&(t.beginPath(),t.rect(o,l,h,c),t.fillStyle=d,t.globalAlpha=.2,t.fill(),t.closePath(),t.globalAlpha=1),p={pattern:this.pattern,lineWidth:this.lineWidth},this.highlighted&&"none"==p.pattern&&(p.pattern="solid",.1==p.lineWidth&&(p.lineWidth=1)),this.stx.plotLine(a,r,n,n,u,"segment",t,i,p),f.T6c(5),this.stx.plotLine(r,r,f.w6c(n,.5),f.w6c(.5,s,f.V6c(0)),u,"segment",t,i,p),this.stx.plotLine(r,a,s,s,u,"segment",t,i,p),f.V6c(0),this.stx.plotLine(a,a,f.r6c(.5,s),f.w6c(n,.5,f.T6c(5)),u,"segment",t,i,p),this.highlighted&&(m="p0"==this.highlighted,g="p1"==this.highlighted,this.littleCircle(t,a,n,m),this.littleCircle(t,r,s,g)))},e.Drawing.rectangle.prototype.intersected=function(t,i,a){var r;if(!this.p0||!this.p1)return null;for(var n in r={0:this.p0,1:this.p1},L.L1n(),r)if(this.pointIntersection(r[n][0],r[n][1],a))return L.V6c(0),this.highlighted=L.r6c(n,"p"),{action:"drag",point:"p"+n};return this.boxIntersection(t,i,a)?(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:i}):null},e.Drawing.rectangle.prototype.configs=["color","fillColor","lineWidth","pattern"],e.Drawing.rectangle.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.adjust()},e.Drawing.rectangle.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},e.Drawing.shape=function(){this.name="shape",L.V6c(5),this.radians=L.r6c("0",0),this.a=0,this.rotating=!1,this.textMeasure=!1,this.configurator="shape",L.L1n(),this.dimension=[0,0],this.points=[]},e.inheritsFrom(e.Drawing.shape,e.Drawing.BaseTwoPoint),e.Drawing.shape.prototype.setRotationOnInitialDraw=!1,e.Drawing.shape.prototype.measure=function(){},e.Drawing.shape.prototype.render=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w=L;if("no","n","e",this.points.length&&(i=this.stx.panels[this.panelName])){for(a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),this.p1&&(n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),t.globalAlpha=.5,t.fillStyle="#000000",this.rotating?(w.V6c(36),this.radians=Math.atan(w.r6c(a,n,s,r)),n<a?this.radians+=Math.PI:s<r&&(this.radians+=2*Math.PI),this.a=5*parseInt((36*this.radians/Math.PI).toFixed(0),10),this.a%=360,this.radians=this.a*Math.PI/180,this.textMeasure&&t.fillText(this.a+"°",n+10,s+10)):this.penDown&&(this.sx=Math.max(1,parseFloat(Math.abs(2*(n-a)/this.dimension[0]).toFixed(1))),n<a&&(this.sx*=-1),this.sy=Math.max(1,parseFloat(Math.abs(2*(s-r)/this.dimension[1]).toFixed(1))),s<r&&(this.sy*=-1),this.textMeasure&&t.fillText(this.sx+"x,"+this.sy+"x",n+this.sx+5,s+this.sy+5)),t.globalAlpha=1),(o=this.lineWidth)||(w.T6c(5),o=w.r6c("1.1",0)),l={pattern:this.pattern,lineWidth:o},this.highlighted&&"none"==l.pattern&&(l.pattern="solid",.1==l.lineWidth&&(l.lineWidth=1)),("auto"==(h=this.color)||e.isTransparent(h))&&(h=this.stx.defaultColor),this.highlighted&&(h=this.stx.getCanvasColor("stx_highlight_vector"),.1==o&&(o=1.1)),w.L1n(),c=this.fillColor,o/=2*Math.abs(this.sx*this.sy)/(Math.abs(this.sx)+Math.abs(this.sy)),t.save(),t.translate(a,r),t.rotate(this.radians),t.scale(this.sx,i.yAxis.flipped?-this.sy:this.sy),p={x:(this.dimension[0]-1)/2,y:(this.dimension[1]-1)/2},u=0;u<this.points.length;u++){for("n","one",t.beginPath(),d=0;d<this.points[u].length;d++)"M"==this.points[u][d]?(m=this.points[u][++d]-p.x,g=this.points[u][++d]-p.y,t.moveTo(m,g)):"L"==this.points[u][d]?(m=this.points[u][++d]-p.x,g=this.points[u][++d]-p.y,t.lineTo(m,g)):"Q"==this.points[u][d]?(f=this.points[u][++d]-p.x,v=this.points[u][++d]-p.y,m=this.points[u][++d]-p.x,g=this.points[u][++d]-p.y,t.quadraticCurveTo(f,v,m,g)):"B"==this.points[u][d]&&(f=this.points[u][++d]-p.x,v=this.points[u][++d]-p.y,y=this.points[u][++d]-p.x,x=this.points[u][++d]-p.y,m=this.points[u][++d]-p.x,g=this.points[u][++d]-p.y,t.bezierCurveTo(f,v,y,x,m,g));t.closePath(),c&&!e.isTransparent(c)&&"auto"!=c&&(t.fillStyle=c,t.fill()),h&&"none"!=this.pattern&&(t.strokeStyle=h,t.lineWidth=o,t.setLineDash&&(t.setLineDash(e.borderPatternToArray(o,this.pattern)),w.T6c(5),t.lineDashOffset=w.r6c("0",0)),t.stroke())}t.restore(),t.save(),t.translate(a,r),t.rotate(this.radians),this.highlighted?("p","1",b="p0"==this.highlighted,S="p1"==this.highlighted,C="p2"==this.highlighted,w.T6c(8),this.littleCircle(t,0,w.w6c("0",475426624),b),this.mover(t,0,0,b),this.littleCircle(t,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,S),this.resizer(t,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,S),this.littleCircle(t,this.sx*this.dimension[0]/2,0,C),this.rotator(t,this.sx*this.dimension[0]/2,0,C),t.globalAlpha=.5,t.fillStyle="#000000",this.textMeasure&&(t.fillText(this.sx+"x,"+this.sy+"x",this.sx*this.dimension[0]/2+12,this.sy*this.dimension[1]/2+5),t.fillText(this.a+"°",this.sx*this.dimension[0]/2+12,5)),t.globalAlpha=1):this.penDown&&(this.rotating?this.rotator(t,this.sx*this.dimension[0]/2,0,!0):this.resizer(t,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,!0)),t.restore()}},e.Drawing.shape.prototype.reposition=function(t,e,i,a){var r,n,s,o,l,h,c;e&&(r=this.stx.panels[this.panelName],"move"==e.action?(n=e.tick-i,s=e.value-a,this.setPoint(0,e.p0[0]-n,e.p0[1]-s,r.chart),this.render(t)):(o=this.stx.pixelFromTick(this.p0[0],r.chart),l=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1]),h=this.stx.pixelFromTick(i,r.chart),c=this.stx.pixelFromValueAdjusted(r,i,a),"scale"==e.action?(this[e.point]=[i,a],this.sx=parseFloat((((h-o)*Math.cos(this.radians)+(c-l)*Math.sin(this.radians))/(this.dimension[0]/2)).toFixed(1)),Math.abs(this.sx)<1&&(this.sx/=Math.abs(this.sy)),this.sy=parseFloat((((c-l)*Math.cos(this.radians)-(h-o)*Math.sin(this.radians))/(this.dimension[1]/2)).toFixed(1)),Math.abs(this.sy)<1&&(this.sy/=Math.abs(this.sy)),this.render(t)):"rotate"==e.action&&(this[e.point]=[i,a],L.T6c(36),this.radians=Math.atan(L.w6c(o,h,c,l)),h<o?this.radians+=Math.PI:c<l&&(this.radians+=2*Math.PI),this.a=5*parseInt((36*this.radians/Math.PI).toFixed(0),10),this.sx<0&&(this.a=this.a+180),this.a%=360,this.radians=this.a*Math.PI/180,this.render(t))))},e.Drawing.shape.prototype.intersected=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;return this.p0?this.stx.repositioningDrawing==this&&this.stx.repositioningDrawing.repositioner?this.stx.repositioningDrawing.repositioner:(r=this.stx.panels[this.panelName],n=this.stx.pixelFromTick(this.p0[0],r.chart),s=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1]),o=this.stx.pixelFromTick(t,r.chart),l=this.stx.pixelFromValueAdjusted(r,t,i),h=l-=s,c=o-=n,o=Math.cos(this.radians)*c+Math.sin(this.radians)*h,l=Math.cos(this.radians)*h-Math.sin(this.radians)*c,o/=this.sx,l/=this.sy,this.padding=e.ensureDefaults(this.padding||{},{left:0,right:0,top:0,bottom:0}),u=this.padding.right+this.padding.left,d=this.padding.bottom+this.padding.top,p=Math.pow(e.touchDevice?25:5+this.littleCircleRadius(),2),m=Math.abs(p/(this.sx*this.sy)),g=Math.pow((this.dimension[0]-u)/2,2)+Math.pow((this.dimension[1]-d)/2,2)>Math.pow(o-u/2,2)+Math.pow(l-d/2,2),f=(p-(Math.pow(o*this.sx,2)+Math.pow(l*this.sy,2)))/Math.abs(this.sx*this.sy),y=m-Math.pow(o-this.dimension[0]/2,2)-Math.pow(l-this.dimension[1]/2,2),v=m-Math.pow(o-this.dimension[0]/2,2)-Math.pow(l,2),g?y>=v&&y>=f?(this.highlighted="p1",{action:"scale"}):v>=y&&v>=f?("p","2",this.highlighted="p2",{action:"rotate"}):(this.highlighted="p0",{action:"move",p0:e.clone(this.p0),tick:t,value:i}):null):null},e.Drawing.shape.prototype.configs=["color","fillColor","lineWidth","pattern"],e.Drawing.shape.prototype.littleCircleRadius=function(){return L.L1n(),3},e.Drawing.shape.prototype.click=function(t,e,i){var a;return!!this.points.length&&(this.copyConfig(),L.b1n(),a=this.stx.panels[this.panelName],this.penDown?(this.setPoint(1,e,i,a.chart),this.rotating||!this.setRotationOnInitialDraw?(this.penDown=!1,this.rotating=!1,!0):(this.rotating=!0,!1)):(this.setPoint(0,e,i,a.chart),this.penDown=!0,!1))},e.Drawing.shape.prototype.adjust=function(){var t,i,a;(t=this.stx.panels[this.panelName])&&(L.L1n(),i=this.name+"_v"+(this.version||0),e.Drawing[i]&&(a=new e.Drawing[i],this.name=a.name,this.dimension=a.dimension,this.padding=a.padding,this.points=a.points,this.version=a.version),this.setPoint(0,this.d0,this.v0,t.chart),this.radians=Math.round(this.a/5)*Math.PI/36)},e.Drawing.shape.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.v0=e.v0,this.tzo0=e.tzo0,this.a=e.a,this.sx=e.sx,this.sy=e.sy,this.version=e.ver,this.adjust()},e.Drawing.shape.prototype.serialize=function(){return L.L1n(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,v0:this.v0,tzo0:this.tzo0,a:this.a,sx:this.sx,sy:this.sy,ver:this.version}},e.Drawing.arrow=function(){var t=L;t.L1n(),this.name="arrow",t.T6c(30),this.version=t.r6c("1",1),t.T6c(30),this.dimension=[11,t.w6c("22",0)],this.padding={left:0,right:0,top:11,bottom:0},this.points=[["M",3,21,"L",7,21,"L",7,16,"L",10,16,"L",5,11,"L",0,16,"L",3,16,"L",3,21]]},e.inheritsFrom(e.Drawing.arrow,e.Drawing.shape),e.Drawing.getDrawingToolList=function(t){var i,a;for(var r in i={},a={arrow_v0:!0,BaseTwoPoint:!0,fibonacci:!0,shape:!0},e.extend(a,t),e.Drawing)!a[r]&&e.Drawing[r].prototype.render&&(i[(new e.Drawing[r]).name]=r);return i}},h=function(t){var e;(e="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:t.CIQ).EaseMachine=function(t,e,i,a){this.fc=t,this.ms=e,L.b1n(),(i||0===i)&&this.reset(i,a)},e.EaseMachine.prototype.reset=function(t,e){for(var i in"o","bject",t||0===t||(t=this.currentValues),this.hasCompleted=!1,this.running=!1,this.okayToRun=!0,L.T6c(37),this.useNameValuePairs=L.r6c(R(e),"object"),this.startTime=Date.now(),this.useNameValuePairs?(this.startValues=t,this.endValues=e):(this.startValues={default:t},this.endValues={default:e}),this.changeValues={},this.currentValues={},this.startValues)this.changeValues[i]=this.endValues[i]-this.startValues[i]},e.EaseMachine.prototype.next=function(){var t;for(var e in(t=Date.now())>=this.startTime+this.ms&&(t=this.startTime+this.ms,this.hasCompleted=!0,this.running=!1),this.currentValues={},this.changeValues)this.currentValues[e]=this.fc(t-this.startTime,this.startValues[e],this.changeValues[e],this.ms);return this.useNameValuePairs?this.currentValues:this.currentValues.default},e.EaseMachine.prototype.hasCompleted=!0,L.L1n(),e.EaseMachine.prototype.run=function(t,e,i,a){var r;function n(){var e;r.afid=null,r.okayToRun&&(e=r.next(),t(e),r.hasCompleted||(r.afid=requestAnimationFrame(n)))}this.afid&&cancelAnimationFrame(this.afid),e||0===e?this.reset(e,i):(i||0===i)&&this.reset(this.currentValues,i),r=this,this.running=!0,a?this.afid=requestAnimationFrame(n):n(),L.L1n()},e.EaseMachine.prototype.stop=function(){return"undefi","n","ed",this.afid&&cancelAnimationFrame(this.afid),this.afid=null,this.okayToRun=!1,this.hasCompleted=!0,this.running=!1,"undefined"==R(this.useNameValuePairs)?{}:this.useNameValuePairs?this.currentValues:this.currentValues.default},e.ChartEngine.prototype.animations.zoom.isStub&&(e.ChartEngine.prototype.animations.zoom=new e.EaseMachine(Math.easeOutCubic,400))},c=function(t){var e,i;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i=function(){var t,i,a,r,n,s,o,l,h,c,u,d=L;function p(t,e){return d.V6c(1),d.L1n(),d.r6c(t,e)}function m(t,e){return d.L1n(),d.T6c(37),d.w6c(t,e)}function g(t,e){var i;d.b1n(),d.V6c(35),i=d.w6c(2147483647,"2098671182");for(var a=1;1432619127!==d.m3T(a.toString(),a.toString().length,61837);a++)return Boolean(t||e);return d.m3T(2..toString(),2..toString().length,13156)!==i?Boolean(t||e):Boolean(t&&e)}function f(t,e){return d.T6c(38),d.L1n(),d.r6c(e,t)}function y(){this.success=!1,this.errormsg="",this.expression="",this.pos=0,this.tokennumber=0,this.tokenprio=0,this.tokenindex=0,this.tmpprio=0,this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:w,cosh:W,tanh:Y,asinh:j,acosh:H,atanh:T,sqrt:Math.sqrt,log:Math.log,lg:D,log10:D,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:x,"-":M,exp:Math.exp},this.ops2={"+":N,"-":E,"*":p,"/":S,"%":f,"^":Math.pow,",":v,"||":C,"==":m,"!=":V,">":O,"<":A,">=":q,"<=":B,and:g,or:F},this.functions={random:P,fac:U,min:Math.min,max:Math.max,hypot:z,pyt:z,pow:Math.pow,atan2:Math.atan2,if:_},this.consts={E:Math.E,PI:Math.PI}}function v(t,e){return"[objec","t"," Array]","[object Array]"!=Object.prototype.toString.call(t)?[t,e]:((t=t.slice()).push(e),t)}function x(t){return Math.trunc?Math.trunc(t):t<0?Math.ceil(t):Math.floor(t)}function b(t,e,i,a){this.tokens=t,d.b1n(),this.ops1=e,this.ops2=i,this.functions=a}function S(t,e){return d.T6c(6),d.L1n(),d.r6c(e,t)}function C(t,e){return d.L1n(),d.V6c(14),d.w6c("",t,e)}function w(t){return Math.sinh?Math.sinh(t):(Math.exp(t)-Math.exp(-t))/2}function T(t){return Math.atanh?Math.atanh(t):Math.log((1+t)/(1-t))/2}function k(t,e,i,a){this.type_=t,this.index_=e||0,this.prio_=i||0,this.number_=null!=a?a:0,this.toString=function(){switch(this.type_){case 0:return this.number_;case 1:case 2:case 3:return this.index_;case 4:return"C","A","LL","CALL";default:return"Invalid Token"}}}function D(t){return Math.log(t)*Math.LOG10E}function A(t,e){for(var i=1;-20771215!==d.D3T(i.toString(),i.toString().length,37848);i++)return d.T6c(40),d.w6c(e,t);if(-1222736487!==d.D3T(2..toString(),2..toString().length,48989))return d.T6c(41),d.r6c(e,t)}function M(t){return d.b1n(),-t}function P(t){return d.b1n(),Math.random()*(t||1)}function F(t,e){return Boolean(t||e)}function _(t,e,i){return d.L1n(),t?e:i}function E(t,e){return d.T6c(5),d.L1n(),d.r6c(t,e)}function O(t,e){return d.T6c(42),d.r6c(e,t)}function I(t){function e(){}return e.prototype=t,new e}function N(t,e){return Number(t)+Number(e)}function H(t){return d.b1n(),Math.acosh?Math.acosh(t):Math.log(t+Math.sqrt(t*t-1))}function V(t,e){return d.T6c(45),d.b1n(),d.w6c(t,e)}function z(){var t,e;if(Math.hypot)return Math.hypot.apply(this,arguments);t=0,e=arguments.length;for(var i=0;i<e;i++){if(arguments[i]===1/0||arguments[i]===-1/0)return 1/0;t+=arguments[i]*arguments[i]}return Math.sqrt(t)}function B(t,e){return d.V6c(40),d.w6c(e,t)}function W(t){return Math.cosh?Math.cosh(t):(Math.exp(t)+Math.exp(-t))/2}function j(t){return Math.asinh?Math.asinh(t):t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))}function Y(t){return Math.tanh?Math.tanh(t):t===1/0?1:t===-1/0?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}function U(t){var e;for(e=t=Math.floor(t);t>1;)d.T6c(1),e=d.w6c(e,--t);return e}function q(t,e){return d.V6c(50),d.w6c(t,e)}return"\\","r",0,1,2,3,4,/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,t=/[\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},e.extend(b.prototype,{simplify:function(t){var e,i,a,r,n,s,o,l;for(d.L1n(),t=t||{},e=[],i=[],n=this.tokens.length,o=0,o=0;o<n;o++)if(0===(l=(s=this.tokens[o]).type_))e.push(s);else if(3===l&&s.index_ in t)s=new k(0,0,0,t[s.index_]),e.push(s);else if(2===l&&e.length>1)r=e.pop(),a=e.pop(),s=new k(0,0,0,(0,this.ops2[s.index_])(a.number_,r.number_)),e.push(s);else if(1===l&&e.length>0)a=e.pop(),s=new k(0,0,0,(0,this.ops1[s.index_])(a.number_)),e.push(s);else{for(;e.length>0;)i.push(e.shift());i.push(s)}for(;e.length>0;)i.push(e.shift());return new b(i,I(this.ops1),I(this.ops2),I(this.functions))},substitute:function(t,e){var i,a,r,n,s,o;for(e instanceof b||(e=(new y).parse(String(e))),i=[],a=this.tokens.length,n=0,n=0;n<a;n++)if(3===(r=this.tokens[n]).type_&&r.index_===t)for(var l=0;l<e.tokens.length;l++)o=new k((s=e.tokens[l]).type_,s.index_,s.prio_,s.number_),i.push(o);else i.push(r);return new b(i,I(this.ops1),I(this.ops2),I(this.functions))},evaluate:function(t){var e,i,a,r,n,s,o,l;for(t=t||{},e=[],n=this.tokens.length,o=0,o=0;o<n;o++)if(0===(l=(s=this.tokens[o]).type_))e.push(s.number_);else if(2===l)a=e.pop(),i=e.pop(),r=this.ops2[s.index_],e.push(r(i,a));else if(3===l)if(s.index_ in t)e.push(t[s.index_]);else{if(!(s.index_ in this.functions))throw new Error("undefined variable: "+s.index_);e.push(this.functions[s.index_])}else if(1===l)i=e.pop(),r=this.ops1[s.index_],e.push(r(i));else{if(4!==l)throw"inva","lid E","xpression",new Error("invalid Expression");if(i=e.pop(),!(r=e.pop()).apply||!r.call)throw d.T6c(0),new Error(d.w6c(" is not a function",r));"[ob","ject Arra","y]","[object Array]"==Object.prototype.toString.call(i)?e.push(r.apply(void 0,i)):e.push(r.call(void 0,i))}if(e.length>1)throw new Error("invalid Expression (parity)");return e[0]},toString:function(e){var a,r,n,s,o,l,h,c,u;for(d.b1n(),a=[],o=this.tokens.length,h=0,h=0;h<o;h++)if(0===(c=(l=this.tokens[h]).type_))a.push((u=l.number_,d.L1n(),"string"===R(u)?(t.lastIndex=0,t.test(u)?"'"+u.replace(t,(function(t){var e;return e=i[t],d.L1n(),"string"===R(e)?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+"'":"'"+u+"'"):u));else if(2===c)n=a.pop(),r=a.pop(),s=l.index_,e&&"^"==s?(d.T6c(39),a.push(d.r6c(n,r,"Math.pow(",")",","))):(d.T6c(39),a.push(d.w6c(n,r,"(",")",s)));else if(3===c)a.push(l.index_);else if(1===c)r=a.pop(),"-"===(s=l.index_)?(d.T6c(32),a.push(d.w6c(")",r,"(",s))):(d.V6c(32),a.push(d.w6c(")",r,s,"(")));else{if(4!==c)throw"invalid Ex","pr","e","ssion",new Error("invalid Expression");r=a.pop(),s=a.pop(),d.V6c(32),a.push(d.r6c(")",r,s,"("))}if(a.length>1)throw"inval","id Expres","sion (parity)",new Error("invalid Expression (parity)");return a[0]},variables:function(){var t,e,i;d.L1n(),t=this.tokens.length,e=[];for(var a=0;a<t;a++)3===(i=this.tokens[a]).type_&&-1==e.indexOf(i.index_)&&e.push(i.index_);return e}},!0),y.parse=function(t){return d.L1n(),(new y).parse(t)},y.evaluate=function(t,e){return d.b1n(),y.parse(t).evaluate(e)},y.Expression=b,y.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:w,cosh:W,tanh:Y,asinh:j,acosh:H,atanh:T,sqrt:Math.sqrt,log:Math.log,lg:D,log10:D,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:x,random:P,fac:U,exp:Math.exp,min:Math.min,max:Math.max,hypot:z,pyt:z,pow:Math.pow,atan2:Math.atan2,if:_,E:Math.E,PI:Math.PI},d.T6c(8),a=d.w6c(1,0),d.V6c(8),r=d.r6c(1,1),d.V6c(8),n=d.w6c(1,2),d.T6c(8),s=d.w6c(1,3),d.T6c(43),o=d.w6c(1,2147483647,"4"),d.T6c(44),l=d.r6c(1,"5"),d.T6c(8),h=d.w6c(1,6),d.b1n(),d.V6c(46),c=d.w6c("7",1,0),d.V6c(8),u=d.w6c(1,8),e.extend(y.prototype,{parse:function(t){var e,i,p,m,g,f,y,v,x,S;for(this.errormsg="",this.success=!0,e=[],i=[],this.tmpprio=0,d.V6c(47),p=d.w6c(s,h,a,n),m=0,this.expression=t,this.pos=0;this.pos<this.expression.length;)this.isOperator()?this.isSign()&&p&h?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",m++,this.addfunc(i,e,1)),d.V6c(47),p=d.r6c(s,h,a,n)):this.isComment()||(0==(p&r)&&this.error_parsing(this.pos,"unexpected operator"),m+=2,this.addfunc(i,e,2),d.T6c(47),p=d.r6c(s,h,a,n)):this.isNumber()?(0==(p&a)&&this.error_parsing(this.pos,"unexpected number"),d.T6c(1),g=new k(0,d.r6c("0",1),d.w6c("0",0,d.T6c(29)),this.tokennumber),i.push(g),d.T6c(48),p=d.w6c(l,o,r)):this.isString()?(0==(p&a)&&this.error_parsing(this.pos,"unexpected string"),g=new k(0,0,0,this.tokennumber),i.push(g),d.V6c(48),p=d.r6c(l,o,r)):this.isLeftParenth()?(0==(p&s)&&this.error_parsing(this.pos,'unexpected "("'),p&c&&(m+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(i,e,4)),d.T6c(49),p=d.r6c(s,h,a,u,n)):this.isRightParenth()?(p&u?(g=new k(0,0,0,[]),i.push(g)):0==(p&o)&&this.error_parsing(this.pos,'unexpected ")"'),d.T6c(49),p=d.w6c(o,s,r,c,l)):this.isComma()?(0==(p&l)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(i,e,2),d.V6c(1),m+=d.r6c("2",1),d.V6c(47),p=d.w6c(s,h,a,n)):this.isConst()?(0==(p&a)&&("unexpecte","d constant",this.error_parsing(this.pos,"unexpected constant")),d.V6c(30),f=new k(0,0,d.r6c("0",0),this.tokennumber),i.push(f),d.T6c(48),p=d.r6c(l,o,r)):this.isOp2()?(0==(p&n)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(i,e,2),d.V6c(8),m+=d.w6c("2",1552461856),p=s):this.isOp1()?(0==(p&n)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(i,e,1),m++,p=s):this.isVar()?(0==(p&a)&&this.error_parsing(this.pos,"unexpected variable"),y=new k(3,this.tokenindex,0,0),i.push(y),d.V6c(49),p=d.w6c(o,s,r,c,l)):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));if(this.tmpprio<0||this.tmpprio>=10){248866015,d.T6c(8),v=d.r6c("239852920",1487759904),x=2;for(var C=1;248866015!==d.D3T(C.toString(),C.toString().length,19750);C++)this.error_parsing(this.pos,""),x+=2;d.m3T(x.toString(),x.toString().length,90791)!==v&&("un","matched",' "()"',this.error_parsing(this.pos,'unmatched "()"'))}for(;e.length>0;)S=e.pop(),i.push(S);return m+1!==i.length&&("p","arity",this.error_parsing(this.pos,"parity")),new b(i,I(this.ops1),I(this.ops2),I(this.functions))},evaluate:function(t,e){return this.parse(t).evaluate(e)},error_parsing:function(t,e){throw"]",":"," ",this.success=!1,d.V6c(32),this.errormsg=d.w6c(e,"]: ","parse error [column ",t),this.column=t,new Error(this.errormsg)},addfunc:function(t,e,i){var a;for(d.b1n(),a=new k(i,this.tokenindex,this.tokenprio+this.tmpprio,0);e.length>0&&a.prio_<=e[e.length-1].prio_;)t.push(e.pop());e.push(a)},isNumber:function(){var t,e,i;for(t=!1,d.b1n(),e="";this.pos<this.expression.length&&((i=this.expression.charCodeAt(this.pos))>=48&&i<=57||46===i);)e+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(e),t=!0;return t},unescape:function(t,e){var i,a,r,n;i=[],d.L1n(),a=!1;for(var s=0;s<t.length;s++)if(r=t.charAt(s),a){switch(r){case"'":i.push("'");break;case"\\":i.push("\\");break;case"/":i.push("/");break;case"b":i.push("\b");break;case"f":i.push("\f");break;case"n":i.push("\n");break;case"r":i.push("\r");break;case"t":i.push("\t");break;case"u":n=parseInt(t.substring(s+1,s+5),16),i.push(String.fromCharCode(n)),s+=4;break;default:throw d.T6c(0),this.error_parsing(d.w6c(s,e),d.r6c("Illegal escape sequence: '\\",r,"'",d.V6c(14)))}a=!1}else"\\"==r?a=!0:i.push(r);return i.join("")},isString:function(){var t,e,i;if(t=!1,e="",i=this.pos,d.L1n(),this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;){if("'"==this.expression.charAt(this.pos)&&"\\"!=e.slice(-1)){this.pos++,this.tokennumber=this.unescape(e,i),t=!0;break}e+=this.expression.charAt(this.pos),this.pos++}return t},isConst:function(){var t;for(var e in this.consts)if(t=e.length,e===this.expression.substr(this.pos,t))return this.tokennumber=this.consts[e],this.pos+=t,!0;return!1},isOperator:function(){var t;if(43===(t=this.expression.charCodeAt(this.pos)))this.tokenprio=2,this.tokenindex="+";else if(45===t)this.tokenprio=2,this.tokenindex="-";else if(62===t)61===this.expression.charCodeAt(this.pos+1)?(">","=",this.pos++,this.tokenprio=1,this.tokenindex=">="):(this.tokenprio=1,this.tokenindex=">");else if(60===t)61===this.expression.charCodeAt(this.pos+1)?("<","=",this.pos++,this.tokenprio=1,this.tokenindex="<="):(this.tokenprio=1,this.tokenindex="<");else if(124===t){if(124!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="||"}else if(61===t){if(61!==this.expression.charCodeAt(this.pos+1))return!1;"=","=",this.pos++,d.V6c(35),this.tokenprio=d.r6c(2147483647,"1"),this.tokenindex="=="}else if(33===t){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,d.V6c(5),this.tokenprio=d.w6c("1",0),this.tokenindex="!="}else if(97===t){if(110!==this.expression.charCodeAt(this.pos+1)||100!==this.expression.charCodeAt(this.pos+2))return!1;"a","n","d",this.pos++,this.pos++,this.tokenprio=0,this.tokenindex="and"}else if(111===t){if(114!==this.expression.charCodeAt(this.pos+1))return!1;"o","r",this.pos++,this.tokenprio=0,this.tokenindex="or"}else if(42===t||8729===t||8226===t)this.tokenprio=3,this.tokenindex="*";else if(47===t)this.tokenprio=4,this.tokenindex="/";else if(37===t)this.tokenprio=4,this.tokenindex="%";else{if(94!==t)return!1;this.tokenprio=5,this.tokenindex="^"}return this.pos++,!0},isSign:function(){var t;return t=this.expression.charCodeAt(this.pos-1),d.L1n(),45===t||43===t},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-1)},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio+=10,!0):(d.b1n(),!1)},isRightParenth:function(){return 41===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio-=10,!0):(d.L1n(),!1)},isComma:function(){return 44===this.expression.charCodeAt(this.pos)&&(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0)},isWhite:function(){var t;return(32===(t=this.expression.charCodeAt(this.pos))||9===t||10===t||13===t)&&(this.pos++,!0)},isOp1:function(){var t,e;t="";for(var i=this.pos;i<this.expression.length&&((e=this.expression.charAt(i)).toUpperCase()!==e.toLowerCase()||!(i===this.pos||"_"!=e&&(e<"0"||e>"9")));i++)t+=e;return t.length>0&&t in this.ops1&&(this.tokenindex=t,this.tokenprio=5,this.pos+=t.length,!0)},isOp2:function(){var t,e;t="";for(var i=this.pos;i<this.expression.length&&((e=this.expression.charAt(i)).toUpperCase()!==e.toLowerCase()||!(i===this.pos||"_"!=e&&(e<"0"||e>"9")));i++)t+=e;return t.length>0&&t in this.ops2?(this.tokenindex=t,this.tokenprio=5,this.pos+=t.length,!0):(d.b1n(),!1)},isVar:function(){var t,e;t="";for(var i=this.pos;i<this.expression.length&&((e=this.expression.charAt(i)).toUpperCase()!==e.toLowerCase()||!(i===this.pos||"_"!=e&&(e<"0"||e>"9")));i++)t+=e;return t.length>0&&(this.tokenindex=t,d.V6c(29),this.tokenprio=d.w6c("4",0),this.pos+=t.length,!0)},isComment:function(){return 47===this.expression.charCodeAt(this.pos-1)&&42===this.expression.charCodeAt(this.pos)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)}},!0),y},e.computeEquationChart=function(t,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T=L;for(var k in t=t.replace(/[:]/,"/").toUpperCase(),T.b1n(),r=0,a)"\\","]","\\","^","\\","]","\\","[",n=new RegExp("\\["+k.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\$/g,"\\$").replace(/\^/g,"\\^").replace(/[+\-*/%()]/g,"\\$&")+"\\]","g"),T.V6c(0),t=t.replace(n,T.w6c(r,"symbol")),r++;function D(){var t,e;for(var i in t=null,e=null,l)e?l[i].d.getTime()<e.d.getTime()?t=e=l[i]:l[i].d.getTime()>e.d.getTime()&&(t=e):e=l[i];return T.L1n(),t?A(t)?-1:0:1}function A(t){if(t.i++,a[t.s]){if(t.i>=a[t.s].length)return 0;c=a[t.s][t.i]}return c.DT||(c.DT=e.strToDateTime(c.Date)),t.d=c.DT,1}for(k in s=i().parse(t),o=[],l={},h=0,u=null,d=!1,p=[],a)m={sym:k,map:a[k]},a[k]?p.unshift(m):p.push(m);for(var M=0;M<p.length;M++)g=p[M],l[g.sym]={i:0,s:g.sym},g.map?(h++,c=g.map[0]):1==h&&(d=g.sym),c.DT||(c.DT=e.strToDateTime(c.Date)),l[g.sym].d=c.DT,u||(u=l[g.sym]);T.V6c(51),f=T.w6c(h,0),y=1==h&&-1==t.indexOf("%");t:for(;v=D();)if(1==v){if(d)(b=a[u.s][u.i][d])&&(b.Close||0===b.Close)&&(b=b.Close),S=s.evaluate({symbol0:a[u.s][u.i].Close,symbol1:b}),S=Number(S.toFixed(8)),(x={DT:u.d,Close:S,Adj_Close:S})[u.s]=a[u.s][u.i].Close,isNaN(S)||S==1/0||o.push(x);else{if(f)throw"NoExcep","ti","o","n",C=s.evaluate({}),T.V6c(14),e.alert(T.r6c(t,"=",C)),{name:"NoException",message:""};for(k in r=0,w={Adj_Close:{},Close:{},Open:{},High:{},Low:{},Volume:{}},a){for(var P in w)T.T6c(0),w[P][T.r6c(r,"symbol")]=a[k][l[k].i][P];r++}(x={DT:u.d}).Adj_Close=s.evaluate(w.Adj_Close),x.Close=s.evaluate(w.Close),x.Open=s.evaluate(w.Open),x.Volume=s.evaluate(w.Volume),isNaN(x.Volume)&&(x.Volume=0),y?(x.High=s.evaluate(w.High),x.Low=s.evaluate(w.Low)):(x.High=Math.max(x.Open,x.Close),x.Low=Math.min(x.Open,x.Close)),isNaN(x.Close)||x.Close==1/0||o.push(x),isNaN(x.High)||(x.High=Number(x.High.toFixed(8))),isNaN(x.Low)||(x.Low=Number(x.Low.toFixed(8))),isNaN(x.Open)||(x.Open=Number(x.Open.toFixed(8))),isNaN(x.Close)||(x.Close=Number(x.Close.toFixed(8))),isNaN(x.Adj_Close)?x.Adj_Close=x.Close:x.Adj_Close=Number(x.Adj_Close.toFixed(8))}for(k in a)if(!A(l[k]))break t}return o}},u=function(t){var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).ChartEngine.prototype.setLocale=function(t,i){var a,r,n,s;if("numeri","c","nu","me","r","ic","nu","m","eri","c","num","eric","unde","f","ine","d","undefined"!=("undefined"==typeof Intl?"undefined":R(Intl))&&this.locale!=t){for(this.locale=t,(r=this.internationalizer={}).hourMinute=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",hour12:!1}),r.hourMinuteSecond=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}),r.mdhm=new Intl.DateTimeFormat(this.locale,{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),r.monthDay=new Intl.DateTimeFormat(this.locale,{month:"numeric",day:"numeric"}),r.yearMonthDay=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric",day:"numeric"}),r.yearMonth=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric"}),r.month=new Intl.DateTimeFormat(this.locale,{month:"short"}),r.numbers=new Intl.NumberFormat(this.locale),r.priceFormatters=[],i||(i=8),a=0;a<i+1;a++)r.priceFormatters.push(new Intl.NumberFormat(this.locale,{maximumFractionDigits:a,minimumFractionDigits:a}));for(a=0;a<5;a++)"per","c","en","t",n=a,s=a,a||(n="",s=2),L.T6c(0),r[L.w6c(n,"percent")]=new Intl.NumberFormat(this.locale,{style:"percent",minimumFractionDigits:s,maximumFractionDigits:s});e.I18N.createMonthArrays&&e.I18N.createMonthArrays(this,r.month,this.locale)}},e.I18N=function(){},e.I18N.hereDoc=function(t){return L.L1n(),t.toString().replace(/^[^/]+\/\*!?/,"").replace(/\*\/[^/]+$/,"")},e.I18N.language="en",e.I18N.longMonths={zh:!0},e.I18N.reverseColorsByLocale={zh:!0,ja:!0},e.I18N.findAllTextNodes=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y;if(t||(t=document.body),t==document.body&&!document.querySelector(".ciq_stashed_texts")){(i=document.createElement("div")).className="ciq_stashed_texts",i.style.display="none",t.appendChild(i),a=document.querySelectorAll("input,textarea,.editable_content");for(var v=0;v<a.length;v++)(r=a[v].getAttribute("placeholder"))&&((n=i.appendChild(document.createElement("translate"))).setAttribute("original",r),n.placeholderFor=a[v],n.appendChild(document.createTextNode(r)))}for(o=(s=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1)).nextNode(),l=new RegExp("^\\s*$"),h=new RegExp("\n|\t|\f","g"),c={},u={SCRIPT:!0,STYLE:!0,TEXTAREA:!0};o;)d=o.nodeValue,l.test(d)||u[m=(p=o.parentNode).tagName]||("TRANSLATE"!=m?("o","riginal",(g=document.createElement("translate")).setAttribute("original",d),g.appendChild(o),p.appendChild(g)):("o","rig","inal",d=p.getAttribute("original")),h.test(d)&&(d=d.replace(h,"")),c[d]||(c[d]=[]),c[d].push(o)),o=s.nextNode();if(t==document.body&&(f=e.Studies?e.Studies.studyLibrary:null))for(var x in f){if(null===c[x]&&(c[x]=[]),(y=f[x]).inputs)for(var b in y.inputs)c[b]||(c[b]=[]);if(y.outputs)for(var S in y.outputs)c[S]||(c[S]=[])}return c},e.I18N.missingWordList=function(t){var i,a,r,n,s,o;for(var l in"Ov","erSo","ld","Sho","w Zon","es",t||(t=e.I18N.language),i=e.I18N.findAllTextNodes(),a={},(r=e.I18N.wordLists[t])||(r={}),n=function(t){L.L1n(),void 0===r[t]&&(a[t]="")},i)n(l);if(!e.Studies||!e.Studies.studyLibrary)return a;for(var h in e.Studies.studyLibrary){for(var c in n((s=e.Studies.studyLibrary[h]).name),s.inputs)switch(n(c),o=s.inputs[c],Object.prototype.toString.call(o)){case"[object String]":n(o);break;case"[object Array]":for(var u=0;u<o.length;++u)n(o[u])}for(var d in s.outputs)n(d)}return n("Show Zones"),n("OverBought"),n("OverSold"),n("Panel"),n("Show as Underlay"),n("Y-Axis"),n("Invert Y-Axis"),a},e.I18N.printableMissingWordList=function(t){var i;return i=(i=JSON.stringify(e.I18N.missingWordList(t))).replace(/","/g,'",\n"'),L.L1n(),i},e.I18N.translateUI=function(t,i){var a,r,n,s,o,l,h,c;if("pu"==t&&(t="pt"),e.I18N.wordLists&&(t||(t=e.I18N.language),a=e.I18N.findAllTextNodes(i),r=e.I18N.wordLists[t]))for(var u in a){n=e.I18N.translateSections(u,r),s=a[u];for(var d=0;d<s.length;d++)h=(l=(o=s[d]).parentNode).getAttribute("original"),","!==n&&n||(n=h),(c=l.placeholderFor)?c.placeholder=n:o.data=n}},e.I18N.translate=function(t,i){var a,r;return i||(i=e.I18N.language),e.I18N.wordLists?(r=null,(a=e.I18N.wordLists[i])&&(r=e.I18N.translateSections(t,a)||t),","===r?t:r):("Must inclu","de translations.js in order to ","use CIQ.I18N.t","ranslate()",console.log("Must include translations.js in order to use CIQ.I18N.translate()"),t)},e.I18N.translateSections=function(t,e){var i;return"st","rin","g","‌","string"==R(t)&&-1!=t.indexOf("‌")?(L.T6c(14),(i=(t=t.replace(/([(),])/g,L.w6c("‌","$1","‌"))).split("‌")).forEach((function(t,i,a){var r,n;r=t.match(/^(\s*).*\S(\s*)$/),(n=e[t.trim()])&&(r&&(n=r[1]+n+r[2]),a[i]=n)})),i.join("")):e[t]},e.I18N.convertCSV=function(t){var i,a,r,n,s,o,l,h,c;if(i=new RegExp("[“”]|[‘’]","g"),a=new RegExp('^(")|(")$',"g"),r=e.I18N.wordLists,t||(t=e.I18N.csv),t){s=(n=t.split("\n"))[0].split(",");for(var u=0;u<s.length;u++)r[o=s[u]]||(r[o]={});for(var d=1;d<n.length;d++){l=n[d].match(/(".*?"|[^",]+)(?=\s*,|\s*$)|(,(?=,))/g)||[],L.V6c(13),h=l[L.w6c("0",393692352)],a.test(h)&&(h=h.replace(a,"")),i.test(h)&&(h=h.replace(i,'"'));for(var p=1;p<l.length;p++)c=l[p],a.test(c)&&(c=c.replace(a,"")),r[s[p]][h]=c}}},e.I18N.setLanguage=function(t,i,a,r,n){"pu"==i&&(i="pt"),e.I18N.convertCSV(r),e.I18N.language=i,L.L1n(),e.I18N.translateUI(i,n),a||(a=e.I18N.translate),t.translationCallback=a},e.I18N.setLocale=function(t,e,i,a,r){var n,s,o;if("locale-","data/jsonp","unde","fi","ned",L.L1n(),"undefined"==("undefined"==typeof Intl?"undefined":R(Intl))||!Intl.__addLocaleData)return t.setLocale(e,r),void(i&&i(null));a=void 0===a?"locale-data/jsonp":a,L.T6c(32),n=L.r6c(".js",e,a,"/"),(s=document.createElement("SCRIPT")).async=!0,s.src=n,(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(s,o.nextSibling),s.onload=function(){var a,n=L;a=2;for(var s=1;1795393826!==n.m3T(s.toString(),s.toString().length,32560);s++)t.setLocale(e,r),i&&i(1),n.V6c(13),a+=n.w6c("2",899859520);-2105221020!==n.m3T(a.toString(),a.toString().length,43978)&&(t.setLocale(e,r),i&&i(null))},s.onerror=function(){L.b1n(),i&&i("cannot load script")}},e.I18N.createMonthArrays=function(t,i,a){var r,n,s,o,l;t.monthAbv=[],L.L1n(),t.monthLetters=[],r=new Date,n=!0,e.I18N.longMonths&&e.I18N.longMonths[a]&&(n=!1);for(var h=0;h<12;h++)if(r.setDate(1),r.setMonth(h),s=i.format(r),n){o="";for(var c=0;c<s.length;c++)(l=s.charAt(c)).charCodeAt(0)<65||(o+=l);t.monthAbv[h]=o,t.monthLetters[h]=o[0]}else t.monthAbv[h]=s,t.monthLetters[h]=s},e.I18N.localize=function(t,e){var i,a,r;i=t.locale,a=this.reverseColorsByLocale[e],r=this.reverseColorsByLocale[i],this.setLocale(t,e),this.setLanguage(t,e),a&&r||(a||r)&&this.reverseCandles(t)},e.I18N.reverseCandles=function(t){var e,i,a;e=t.styles,i=t.cloneStyle(e.stx_candle_down),a=t.cloneStyle(e.stx_candle_up),e.stx_candle_up=i,e.stx_candle_down=a},e.I18N.wordLists={en:{}},e.I18N.languages={en:"English"}},d=function(t){var e,i;(e="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:t.CIQ).ChartEngine.prototype.pointerEvents={down:[],up:[]},e.ChartEngine.prototype.doubleClickTime=250,e.ChartEngine.prototype.manageTouchAndMouse=!0,e.ChartEngine.prototype.registerTouchAndMouseEvents=function(){var t,i,a,r,n,s,o;this.touchAndMouseEventsRegistered||(this.touchAndMouseEventsRegistered=!0,L.b1n(),i=(t=this.controls.chartControls||document).querySelector(".stx-zoom-in"),a=t.querySelector(".stx-zoom-out"),r=this.chart.container,n=this,s=function(t,e,i){n.addDomEventListener(r,t,(function(t){if(n.mainSeriesRenderer&&n.mainSeriesRenderer.nonInteractive)return;e(t)}),i),L.b1n()},e.touchDevice?e.isSurface?("m","o","u","semove",s("mousemove",(function(t){n.msMouseMoveProxy(t)})),s("mouseenter",(function(t){n.msMouseMoveProxy(t)})),s("mousedown",(function(t){L.b1n(),n.msMouseDownProxy(t)})),s("mouseup",(function(t){n.msMouseUpProxy(t)})),s("pointerdown",(function(t){return n.startProxy(t)})),s("pointermove",(function(t){n.moveProxy(t)})),s("pointerenter",(function(t){return n.moveProxy(t)})),s("pointerup",(function(t){return L.L1n(),n.endProxy(t)}))):("touche","n","d","touch","mov","e",e.isMobile||(s("mousemove",(function(t){L.L1n(),n.iosMouseMoveProxy(t)})),s("mouseenter",(function(t){n.iosMouseMoveProxy(t)})),s("mousedown",(function(t){L.b1n(),n.iosMouseDownProxy(t)})),s("mouseup",(function(t){L.b1n(),n.iosMouseUpProxy(t)}))),s("touchstart",(function(t){n.touchstart(t)})),s("touchmove",(function(t){n.touchmove(t)})),s("touchend",(function(t){L.L1n(),n.touchend(t)})),s("pointerdown",(function(t){L.b1n(),n.touchPointerType=t.pointerType})),i&&("onMous","e","Ou","t","on","MouseOver",i.removeAttribute("onMouseOver"),i.removeAttribute("onMouseOut")),a&&("onMouseO","ut",a.removeAttribute("onMouseOver"),a.removeAttribute("onMouseOut"))):(s("mousemove",(function(t){n.mousemove(t)})),s("mouseenter",(function(t){L.L1n(),n.mousemove(t)})),s("mousedown",(function(t){n.mousedown(t)})),s("mouseup",(function(t){L.b1n(),n.mouseup(t)}))),o=e.wheelEvent,this.captureMouseWheelEvents&&s(o,(function(t){n.mouseWheel(t)}),{passive:!1}))},e.ChartEngine.prototype.mousedown=function(t){var i,a,r,n,s,o,l,h,c;if(!this.runPrepend("mousedown",arguments)&&(this.grabOverrideClick=!1,this.displayInitialized&&this.displayCrosshairs&&!this.repositioningDrawing&&!(this.editingAnnotation||t.button&&t.button>=2)))if(i=this.container.getBoundingClientRect(),this.top=i.top,this.left=i.left,this.right=this.left+this.width,this.bottom=this.top+this.height,t.clientX>=this.left&&t.clientX<=this.right&&t.clientY>=this.top&&t.clientY<=this.bottom){if(this.insideChart=!0,this.currentPanel){this.manageTouchAndMouse&&t&&t.preventDefault&&this.captureTouchEvents&&t.preventDefault(),this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,this.hasDragged=!1,this.userPointerDown=!0,""===this.openDialog&&this.registerPointerEvent({x:t.clientX,y:t.clientY,time:this.mouseTimer},"down"),a=this.currentPanel.chart;for(var u=0;u<this.drawingObjects.length;u++)if((r=this.drawingObjects[u]).highlighted&&!r.permanent){if(this.cloneDrawing)return(n=new(0,e.ChartEngine.drawingTools[r.name])).reconstruct(this,r.serialize()),this.drawingObjects.push(n),this.activateRepositioning(n),void(n.repositioner=r.repositioner);if(s=this.currentVectorParameters.vectorType,!(e.Drawing&&s&&e.Drawing[s]&&(new e.Drawing[s]).dragToDraw))return void this.activateRepositioning(r)}if((o=this.mainSeriesRenderer||{}).params&&o.params.baseline&&!1!==a.baseline.userLevel&&this.controls.baselineHandle&&(l=this.valueFromPixel(this.cy-5,this.currentPanel),h=this.valueFromPixel(this.cy+5,this.currentPanel),c=this.chart.right-parseInt(getComputedStyle(this.controls.baselineHandle).width,10),a.baseline.actualLevel<Math.max(l,h)&&a.baseline.actualLevel>Math.min(l,h)&&this.cx>c))return this.repositioningBaseline={lastDraw:Date.now()},void this.controls.baselineHandle.classList.add("stx-grab");var d;if(!(this.drawingClick&&(this.currentPanel.subholder===t.target&&this.drawingClick(this.currentPanel,this.cx,this.cy),this.activeDrawing&&this.activeDrawing.dragToDraw)))this.grabbingScreen=!0,a.spanLock=!1,L.b1n(),this.yToleranceBroken=!1,this.grabStartX=t.clientX,this.grabStartY=t.clientY,this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=a.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartYAxis=this.whichYAxis(this.currentPanel),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPanel=this.currentPanel,setTimeout((d=this,function(){d.grabbingHand()}),100),this.swipeStart&&this.swipeStart(a),(this.longHoldTime||0===this.longHoldTime)&&this.startLongHoldTimer(),this.runAppend("mousedown",arguments)}}else this.insideChart=!1},e.ChartEngine.prototype.mousemove=function(t){var i,a,r,n,s;if(i="mousemo",i+="ve",a=t,e.ChartEngine.crosshairX=a.clientX,e.ChartEngine.crosshairY=a.clientY,a.type.toLowerCase().indexOf("enter")>-1)this.positionCrosshairsAtPointer();else if(!this.runPrepend(i,arguments)&&this.displayInitialized&&""===this.openDialog){this.grabbingScreen&&1!==a.buttons&&(this.cancelLongHold=!0,this.displayDragOK(),this.grabbingScreen=!1,this.findHighlights(!1,!0)),this.mousemoveinner(a.clientX,a.clientY),r=-1426027630,n=-1604663685,s=2;for(var o=1;L.m3T(o.toString(),o.toString().length,55044)!==r;o++)this.runAppend("",arguments),s+=2;L.m3T(s.toString(),s.toString().length,94663)!==n&&this.runAppend("",arguments),this.runAppend("mousemove",arguments)}},e.ChartEngine.prototype.mouseup=function(t){var i,a,r,n,s,o,l,h,c,u,d;if(i="mouseu",i+="p",!this.runPrepend("mouseup",arguments)){if(this.swipe.end=!0,this.cancelLongHold=!0,this.repositioningDrawing){if(!this.currentVectorParameters.vectorType||Date.now()-this.mouseTimer>250)return this.changeOccurred("vector"),e.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.adjustDrawings(),void this.draw();this.activateRepositioning(null)}if(this.repositioningBaseline)return this.repositioningBaseline=null,this.controls.baselineHandle.classList.remove("stx-grab"),(a=this.mainSeriesRenderer||{}).params&&a.params.baseline&&a.params.type,void this.draw();if(r=this.userPointerDown,this.userPointerDown=!1,this.displayInitialized){if(n=this.backOutY(t.clientY),s=this.backOutX(t.clientX),o=t.which&&t.which>=2||t.button&&t.button>=2,""!==this.openDialog||o||this.registerPointerEvent({x:t.clientX,y:t.clientY,time:Date.now()},"up"),l=this.isDoubleClick(),this.grabbingScreen=!1,this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(s,n),this.currentPanel=this.whichPanel(n)),h=this.currentPanel,L.L1n(),this.grabStartYAxis=null,this.displayDragOK(),""!==this.openDialog)return c="stx-",c+="drag-",c+="chart",void(this.insideChart&&this.container.classList.remove(c));if(this.grabOverrideClick)return this.overXAxis||this.overYAxis||!this.swipeRelease||this.swipeRelease(),this.container.classList.remove("stx-drag-chart"),this.grabOverrideClick=!1,this.doDisplayCrosshairs(),void this.updateChartAccessories();if(this.insideChart&&this.container.classList.remove("stx-drag-chart"),!e.ChartEngine.resizingPanel)return o||t.ctrlKey?(u="r",u+="ightClick",this.anyHighlighted&&!0!==this.bypassRightClick?(this.rightClickHighlighted(),t.preventDefault&&this.captureTouchEvents&&t.preventDefault(),t.stopPropagation(),!1):(this.dispatch(u,{stx:this,panel:h,x:s,y:n}),!0)):void(t.clientX<this.left||t.clientX>this.right||t.clientY<this.top||t.clientY>this.bottom||(d=h&&h.subholder===t.target,l&&(d||this.overYAxis||this.overXAxis)?this.doubleClick({button:t.button,x:s,y:n}):(r&&d&&(this.longHoldTookEffect&&!this.activeDrawing||this.drawingClick(h,s,n),!this.longHoldTookEffect&&this.activeMarker&&this.activeMarker.click({cx:s,cy:n,panel:h})),this.longHoldTookEffect||this.activeDrawing||this.dispatch("tap",{stx:this,panel:h,x:s,y:n})),this.runAppend(i,arguments)));this.releaseHandle()}}},e.ChartEngine.prototype.registerPointerEvent=function(t,e){L.b1n(),this.pointerEvents[e].length>1&&this.pointerEvents[e].pop(),this.pointerEvents[e].unshift(t)},e.ChartEngine.prototype.resetPointerEvent=function(t){L.L1n(),this.pointerEvents[t].splice(0)},e.ChartEngine.prototype.isDoubleClick=function(){var t,e=this.pointerEvents,i=e.up,a=e.down;return!(i.length<2||a.length<2)&&((t=a[0].time-i[1].time<this.doubleClickTime&&Math.pow(i[1].x-i[0].x,2)+Math.pow(i[1].y-i[0].y,2)<=400&&i[1].time-a[1].time<this.longHoldTime&&i[0].time-a[0].time<this.longHoldTime)&&(this.resetPointerEvent("up"),this.resetPointerEvent("down")),t)},e.ChartEngine.prototype.doubleClick=function(t,i,a){var r,n;if(r="dou",r+="bleClick",n="do",n+="ubleClick",!this.runPrepend("doubleClick",arguments)&&!this.editingAnnotation)return e.ChartEngine.drawingLine?this.undo():void(this.activeDrawing||(this.activeMarker&&this.activeMarker.doubleClick({cx:i,cy:a,panel:this.currentPanel})||this.dispatch(n,{stx:this,button:t,x:i,y:a}),this.runAppend(r,arguments)))},e.ChartEngine.prototype.handleMouseOut=function(t){var i,a;if(t=t||window.event,!e.withinElement(this.chart.container,t.pageX,t.pageY)){if(this.runPrepend("handleMouseOut",arguments))return;this.grabbingScreen||this.findHighlights(null,!0),this.undisplayCrosshairs(),this.touches=[],this.touching=!1,this.activeDrawing&&this.userPointerDown&&(this.userPointerDown=!1,this.drawingLine=!1,i=this.backOutY(t.pageY),a=this.backOutX(t.pageX),this.drawingClick(this.currentPanel,a,i)),this.insideChart=!1,this.overYAxis=!1,this.overXAxis=!1,this.displaySticky(),this.runAppend("handleMouseOut",arguments)}},e.ChartEngine.prototype.startLongHoldTimer=function(){var t,e;t=this,this.cancelLongHold=!1,L.b1n(),this.longHoldTimeout&&clearTimeout(this.longHoldTimeout),e=function(){L.b1n(),t.cancelLongHold||(t.longHoldTookEffect=!0,t.dispatch("longhold",{stx:t,panel:t.currentPanel,x:t.cx,y:t.cy}),t.displayDragOK())},this.longHoldTime?this.longHoldTimeout=setTimeout(e,this.longHoldTime):0===this.longHoldTime&&e()},e.ChartEngine.prototype.grabHandle=function(t){this.runPrepend("grabHandle",arguments)||t&&(e.ChartEngine.crosshairY=t.top+this.top,e.ChartEngine.resizingPanel=t,t.handle.classList.add("stx-grab"),this.runAppend("grabHandle",arguments))},e.ChartEngine.prototype.grabbingHand=function(){this.allowScroll&&this.grabbingScreen&&(e.touchDevice||this.container.classList.add("stx-drag-chart"))},e.ChartEngine.prototype.releaseHandle=function(){var t;if(t="r",t+="el",t+="easeHa",t+="ndle",this.runPrepend(t,arguments))return!0;e.clearCanvas(this.chart.tempCanvas,this),this.resizePanels(),e.ChartEngine.resizingPanel&&e.ChartEngine.resizingPanel.handle.classList.remove("stx-grab"),e.ChartEngine.resizingPanel=null,this.runAppend("releaseHandle",arguments)},e.ChartEngine.prototype.findHighlights=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,E,O,I,N,H,V,z,B,W,j,Y,U=L;if("d","rawi","ng",a=this.preferences[t?"highlightsTapRadius":"highlightsRadius"],this.highlightViaTap=t,r=this.cy,n=this.cx,this.anyHighlighted=!1,this.currentPanel){if(this.activeDrawing&&(i=!0),s=!1,o=null,l=i?{}:{forceShow:!0,type:"drawing"},h=this.currentPanel.chart,c={x0:this.tickFromPixel(n-a,h),x1:this.tickFromPixel(n+a,h),y0:this.valueFromPixel(r-a,this.currentPanel),y1:this.valueFromPixel(r+a,this.currentPanel),cx0:n-a,cx1:n+a,cy0:r-a,cy1:r+a,r:a},this.repositioningDrawing&&c.x1-c.x0<2?(c.x1++,c.x0--):c.x1==c.x0&&(c.x0-=.5,c.x1+=.5),u=this.markerHelper&&this.markerHelper.chartMap[h.name]&&this.markerHelper.chartMap[h.name].markers,!h.hideDrawings)for(var q=this.drawingObjects.length-1;q>=0;q--)d=this.drawingObjects[q],this.panels[d.panelName]&&(this.repositioningDrawing&&this.repositioningDrawing!=d||(p=d.highlighted,m=d.panelName==this.currentPanel.name,d.repositioner=d.intersected(this.crosshairTick,this.crosshairValue,c),m=m&&d.repositioner,!i&&m?(p?(o=d,this.anyHighlighted&&this.singleDrawingHighlight&&(d.highlighted=!1),d.highlighted&&d.highlighted!=p&&(s=!0)):p!=d.highlight(!0)&&(o||(o=d),this.anyHighlighted&&this.singleDrawingHighlight&&(d.highlighted=!1),s=!0),this.anyHighlighted=!0):p!=d.highlight(!1)&&(s=!0),d.highlighted&&(l.noDelete=d.permanent,l.noEdit=!this.callbackListeners.drawingEdit.length)));for(g in this.layout.studies)(f=this.layout.studies[g]).prev=f.highlight,f.highlight=this.yaxisMatches(f,this.grabStartYAxis);for(g in h.seriesRenderers){(b=h.seriesRenderers[g]).params.highlight=this.yaxisMatches(b,this.grabStartYAxis);for(var Q=0;Q<b.seriesParams.length;Q++)(x=b.seriesParams[Q]).prev=x.highlight,x.highlight=b.params.highlight}for(y=0;u&&y<u.length;y++)(v=u[y]).params.box&&(this.activeMarker=null,v.prev=u[y].highlight,v.highlight=!1);if(this.markerHelper&&(this.markerHelper.highlighted=[]),this.highlightedDataSetField=null,this.highlightedDraggable=null,!i&&!this.anyHighlighted&&h.dataSegment&&(S=this.barFromPixel(n))>=0&&S<h.dataSegment.length){for(g in this.overlays)if((f=this.overlays[g]).panel==this.currentPanel.name&&!1!==f.study.isHighlighted)if("function"!=typeof f.study.isHighlighted){if(h.dataSegment[S]){for(var G in f.outputMap)if(K.call(this,S,c,G,f.getYAxis(this))){f.name!=f.panel&&(this.anyHighlighted=!0),f.highlight=G;break}if(f.highlight){this.highlightedDataSetField=G;break}}}else f.study.isHighlighted(this,n,r)&&(f.highlight=!0,this.anyHighlighted=!0);for(g in h.seriesRenderers){if(this.highlightedDataSetField)break;if(T=(w=h.seriesRenderers[g]).params.panel,w!=this.mainSeriesRenderer&&(w.params.highlightable||this.currentVectorParameters.vectorType)&&T==this.currentPanel.name)for(y=0;y<w.seriesParams.length;y++){if("-","-",">",(k=(x=w.seriesParams[y]).field)||w.highLowBars||(k=this.defaultPlotField||"Close"),x.symbol&&x.subField&&(k+="--\x3e"+x.subField),!(D=w.params.yAxis)&&T&&(D=this.panels[T].yAxis),w.params.step&&S>0){if(!w.caches[x.id])continue;if(!(C=w.caches[x.id][S])&&0!==C)continue;U.V6c(5),(((A=w.caches[x.id][U.w6c(S,1)])||0===A)&&r+a>=C&&r-a<=A||r-a<=C&&r+a>=A)&&(x.highlight=!0,this.anyHighlighted=!0)}else K.call(this,S,c,k,D,w,x.id)&&(x.highlight=!0,this.anyHighlighted=!0);if(x.highlight){this.highlightedDataSetField=k;break}}}}for(g in P=this.preferences.dragging,this.overlays)(f=this.overlays[g]).highlight&&("stud","y",this.anyHighlighted=!0,_=f.inputs.display||f.name,l={message:_=this.translateIf(_),noDelete:f.permanent,noEdit:!f.editFunction,type:"study"},o=null,(!0===P||P&&P.study)&&(M=f),F=f.getYAxis(this)),f.prev!=f.highlight&&(s=!0);for(g in h.seriesRenderers){E=(R=h.seriesRenderers[g]).params.yAxis?R.params.yAxis.textStyle:null;for(var X=0;X<R.seriesParams.length;X++)x=R.seriesParams[X],R.params.highlightable&&x.highlight&&("ser","i","e","s",this.anyHighlighted=!0,"auto"==(O=x.color||E)&&(O=this.defaultColor),x.opacity&&1!==x.opacity&&(O=e.hexToRgba(e.colorToHex(O),parseFloat(x.opacity))),l={message:x.display||x.symbol,backgroundColor:O,noDelete:x.permanent,type:"series"},o=null,(!0===P||P&&P.series)&&(M=R,R.params.highlight=!0),F=R.getYAxis(this)),x.prev!=x.highlight&&(s=!0)}for(g in this.plugins)N={},(I=this.plugins[g]).findHighlights&&((N=I.findHighlights(this,t,i)).somethingChanged&&(s=!0),N.anyHighlighted&&(this.anyHighlighted=!0,l=N.stickyArgs||{}));for(var Z in H=this.whichPanel(r),V=this.whichYAxis(H,n),F||(F=V),F&&(F.highlight||(s=!0),F.highlight=!0),z=[],this.panels)z=z.concat(this.panels[Z].yaxisLHS).concat(this.panels[Z].yaxisRHS);for(g=0;g<z.length;g++)(F!=z[g]||i)&&(z[g].highlight&&(s=!0),z[g].highlight=!1);for(y=0;u&&y<u.length;y++)(B=(v=u[y]).params.box)&&v.params.panelName===this.currentPanel.name&&(W=e.convertBoxToPixels(this,this.currentPanel.name,c),e.boxIntersects(W.x0,W.y0,W.x1,W.y1,B.x0,B.y0,B.x1,B.y1)&&(this.activeMarker=v,v.highlight=!0,this.markerHelper.highlighted.push(v)),v.prev!=v.highlight&&(s=!0));if(s&&(this.draw(),l.panel=H,this.anyHighlighted&&!this.grabStartYAxis?l.panel=H:l={},this.displaySticky(l),this.clearMeasure(),o&&o.measure()),(!0===P||P&&P.yaxis)&&V&&!V.noDraw&&(this.anyHighlight=!0,M=V),this.anyHighlighted||this.setMeasure(),M&&!H.noDrag){if(this.longHoldTookEffect&&!this.cancelLongHold){if(M.params)for(g in M.params.dependentOf&&((M=h.seriesRenderers[M.params.dependentOf]).params.highlight=!0),h.seriesRenderers)h.seriesRenderers[g].params.dependentOf==M.params.name&&(h.seriesRenderers[g].params.highlight=!0);if(this.highlightedDraggable=M,M.getDependents){43803454,-81499956,j=2;for(var J=1;43803454!==U.m3T(J.toString(),J.toString().length,80560);J++)Y=M.getDependents(this,!1),j+=2;for(g in-81499956!==U.m3T(j.toString(),j.toString().length,77499)&&(Y=M.getDependents(this,!1)),Y=M.getDependents(this,!0),this.overlays)f=this.overlays[g],Y.indexOf(f)>-1&&(f.highlight=!0)}}this.container.classList.add("stx-draggable")}else this.container.classList.remove("stx-draggable");this.highlightedDataSetField=this.adjustHighlightedDataSetField(this.highlightedDataSetField),this.displayDrawOK()}function K(t,i,a,r,n,s){var o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,w,T,k,D,A,M,P;if("seg","ment",o=this.chart,l=this.currentPanel,r||(r=l.yAxis),h=a.split("--\x3e"),c=h[0],(u=h[1])||(u="Close"),d=o.dataSegment[S],v=null,x=null,b=null,C=new Array(3),w=n&&n.caches[s],d&&w){for(g=w[S],v=d.tick,(g||0===g)&&(C[0]=1),T=S-1;T>=0;T--)if(w[T]||0===w[T]){f=w[T],U.T6c(52),x=U.w6c(S,T,v),C[1]=1;break}for(T=S+1;T<o.dataSegment.length;T++)if(w[T]||0===w[T]){y=w[T],U.V6c(52),b=U.r6c(S,T,v),C[2]=1;break}}function F(t){var e;return U.L1n(),t?((e=t[c])&&(e[u]||0===e[u])&&(e=e[u]),n&&n.getBasis&&(e+=n.getBasis(t,c,u)),o.transformFunc&&r==o.yAxis?t.transform&&c in t.transform?((e=t.transform[c])&&(e[u]||0===e[u])&&(e=e[u]),e):o.transformFunc(this,o,e):e):null}return null===x&&(p=this.getPreviousBar.call(this,o,a,S))&&(x=p.tick,f=F(p)),null===b&&(m=this.getNextBar.call(this,o,a,S))&&(b=m.tick,y=F(m)),(null!==x||null!==b)&&(w||(g=F(d),f=F(p),y=F(m),v=d.tick,p&&(x=p.tick),m&&(b=m.tick)),f||0===f||(f=0,x=0),y||0===y||(g||0===g?(y=g,C[2]=C[0]):(y=f,C[2]=C[1]),b=s&&o.series[s].parameters.extendToEndOfDataSet?o.dataSet.length-1:x),g||0===g||(g=y,v=b,C[0]=C[2],0===f&&0===x&&(f=g,x=v,C[1]=C[0])),k=this.pixelFromTransformedValue.bind(this),g=(D=this.valueFromPixel.bind(this))(C[0]?g:k(g,l,r),l),f=D(C[1]?f:k(f,l,r),l),y=D(C[2]?y:k(y,l,r),l),A=e.convertBoxToPixels(this,l.name,i),M=e.convertBoxToPixels(this,l.name,{x0:x,y0:f,x1:v,y1:g}),P=e.convertBoxToPixels(this,l.name,{x0:v,y0:g,x1:b,y1:y}),!(!e.boxIntersects(A.x0,A.y0,A.x1,A.y1,M.x0,M.y0,M.x1,M.y1,"segment")&&!e.boxIntersects(A.x0,A.y0,A.x1,A.y1,P.x0,P.y0,P.x1,P.y1,"segment")))}},e.ChartEngine.prototype.rightClickHighlighted=function(){var t;L.L1n(),t="ri",t+="ghtClickHighlighted",this.runPrepend("rightClickHighlighted",arguments)||(this.deleteHighlighted(!0),this.runAppend(t,arguments))},e.ChartEngine.prototype.deleteHighlighted=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m;if(!this.runPrepend("deleteHighlighted",arguments)){if(this.cancelTouchSingleClick=!0,e.clearCanvas(this.chart.tempCanvas,this),(a=!1===this.bypassRightClick)||!this.bypassRightClick.drawing)for(var g=this.drawingObjects.length-1;g>=0;g--)(r=this.drawingObjects[g]).highlighted&&(t?this.rightClickDrawing(r,i):r.permanent||(r.abort()||(n=this.exportDrawings(),this.drawingObjects.splice(g,1),this.undoStamp(n,this.exportDrawings())),this.changeOccurred("vector")));if(a||!this.bypassRightClick.study)for(var f in this.overlays)((s=this.overlays[f]).overlay||s.underlay)&&s.highlight&&!s.permanent&&(t||i?this.rightClickOverlay(f,i):this.removeOverlay(f));if(o=this.currentPanel.chart,a||!this.bypassRightClick.series)for(var y in o.seriesRenderers)if((l=o.seriesRenderers[y]).params.highlightable){c=(h=this.panels[l.params.panel])&&h.yAxis.name;for(var v=l.seriesParams.length-1;v>=0;v--)u=l.seriesParams[v],!l.params.highlight&&!u.highlight||u.permanent||(l.removeSeries(u.id),l.seriesParams.length<1&&(this.removeSeriesRenderer(l),l.params.name==c?this.electNewPanelOwner(l.params.panel):(this.checkForEmptyPanel(l.params.panel),(d=this.getYAxisByName(h,l.params.name))&&(d.name=d.studies[0]||d.renderers[1]))))}L.L1n(),this.draw(),this.resizeChart(),this.clearMeasure(),(p=this.controls.mSticky)&&(m="n",m+="o",m+="n",m+="e",p.style.display=m,p.children[0].innerHTML=""),this.runAppend("deleteHighlighted",arguments)}},e.ChartEngine.prototype.displayDragOK=function(t){var e,i,a,r,n,s,o,l,h,c,u=L;if(e=this.controls.dragOk,u.L1n(),e){if(t||this.findHighlights(this.highlightViaTap),a=(i=this.highlightedDraggable)&&i.undraggable&&i.undraggable(this),r=this.cx,n=this.cy,!t){if(i&&!a&&this.longHoldTookEffect&&!this.cancelLongHold)"stx-dr","ag-chart","stx-dr","a","g-axis","stx-drag-ch","art","inli","ne-b","l","ock",".","fie","l","d",s=i.inputs&&i.inputs.display||i.params&&(i.params.display||i.params.name)||i.name,e.querySelector(".field").setAttribute("text",s),p.call(this,e),e.style.display="inline-block",this.draw(),this.displaySticky(),this.grabStartYAxis?this.container.classList.replace("stx-drag-chart","stx-drag-axis"):this.container.classList.replace("stx-drag-chart","stx-drag-series");else for(var d in"n","o","ne",e.style.display="none",this.draw(),this.container.classList.remove("stx-drag-series"),this.container.classList.remove("stx-drag-axis"),this.panels){for((o=this.panels[d].subholder.classList).remove("dropzone"),o.remove("all"),o.remove("left"),o.remove("right"),o.remove("top"),o.remove("bottom"),l=0;l<this.panels[d].yaxisLHS.length;l++)this.panels[d].yaxisLHS[l].dropzone=null;for(l=0;l<this.panels[d].yaxisRHS.length;l++)this.panels[d].yaxisRHS[l].dropzone=null}this.draw()}i&&(h=n+e.offsetHeight,c=Math.max(0,r-e.offsetWidth),u.T6c(0),e.style.top=u.r6c("px",h),u.T6c(0),e.style.left=u.w6c("px",c),p.call(this,e))}function p(t){var e,i;e=this.translateIf(t.querySelector(".field").getAttribute("text")),(i=this.whichYAxis(this.whichPanel(this.cy),this.cx,this.cy))&&"all"==i.dropzone&&(e+="--\x3e"+this.translateIf(i.name)),t.querySelector(".field").innerHTML=e}},e.ChartEngine.prototype.displayDrawOK=function(){var t,i,a,r,n=L;(t=this.controls.drawOk)&&e.Drawing&&((i=e.Drawing[this.currentVectorParameters.vectorType])&&(i=new i),this.highlightedDataSetField&&i&&i.getYValue?(".fiel","d",t.style.display="inline-block",a=this.cy+t.offsetHeight,r=this.cx-t.offsetWidth,n.T6c(0),t.style.top=n.w6c("px",a),n.T6c(0),t.style.left=n.w6c("px",r),t.querySelector(".field").innerHTML=this.translateIf(this.highlightedDataSetField)):t.style.display="none")},e.ChartEngine.prototype.mouseWheel=function(t){var i,a,r,n,s,o,l,h=L;if(!this.runPrepend("mouseWheel",arguments)&&(t.preventDefault&&t.preventDefault(),i=t.deltaX,a=t.deltaY,Math.abs(a)>Math.abs(i)?i=0:a=0,this.lastMouseWheelEvent=Date.now(),0!==Math.abs(i)||0!==Math.abs(a))){if(this.allowSideswipe&&0!==i)return this.lastMove="horizontal",(r=i)>50&&(r=50),r<-50&&(r=-50),this.grabbingScreen=!0,this.currentPanel||(this.currentPanel=this.chart.panel),this.grabStartX=e.ChartEngine.crosshairX,this.grabStartY=e.ChartEngine.crosshairY,this.grabStartScrollX=this.chart.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartMicropixels=this.micropixels,this.grabStartPanel=this.currentPanel,this.mousemoveinner(e.ChartEngine.crosshairX-r,e.ChartEngine.crosshairY),this.updateChartAccessories(),void(this.grabbingScreen=!1);if(this.lastMove="vertical",this.allowZoom&&this.displayInitialized&&(a||("mousewheel"==e.wheelEvent?(a=-1/40*t.wheelDelta,t.wheelDeltaX&&(i=-1/40*t.wheelDeltaX)):a=t.detail),void 0===t.deltaMode&&(t.deltaMode="MozMousePixelScroll"==t.type?0:1),n=-a,1==t.deltaMode&&(n*=33),s=null,o=null,this.mouseWheelAcceleration&&(l=Math.max(Math.pow(Math.abs(n),.3),1),h.T6c(53),s=h.r6c(.1,l,1),h.V6c(54),o=h.w6c(1,l,1,"0.2")),this.zoomInitiatedByMouseWheel=!0,n>0?this.reverseMouseWheel?this.zoomOut(null,o):this.zoomIn(null,s):n<0&&(this.reverseMouseWheel?this.zoomIn(null,s):this.zoomOut(null,o)),!this.runAppend("mouseWheel",arguments)))return!1}},e.ChartEngine.handleContextMenu=function(t){for(var i,a=0;a<e.ChartEngine.registeredContainers.length;a++)if((i=e.ChartEngine.registeredContainers[a].stx)&&i.anyHighlighted)return t.preventDefault&&t.preventDefault(),!1},"undefined"!=typeof document&&document.addEventListener("contextmenu",e.ChartEngine.handleContextMenu),e.ChartEngine.htmlControls={annotationSave:'<span class="stx-btn stx_annotation_save" style="display: none;">save</span>',annotationCancel:'<span class="stx-btn stx_annotation_cancel" style="display: none; margin-left:10px;">cancel</span>',mSticky:'<div class="stx_sticky"> <span class="mStickyInterior"></span> <span class="mStickyRightClick"><span class="overlayEdit stx-btn" style="display:none"><span>&nbsp;</span></span> <span class="overlayTrashCan stx-btn" style="display:none"><span>&nbsp;</span></span> <span class="mouseDeleteInstructions"><span>(</span><span class="mouseDeleteText">right-click to delete</span><span class="mouseManageText">right-click to manage</span><span>)</span></span></span><span class="stickyLongPressText">(long-press to drag)</span></div>',drawOk:'<div class="stx_draw_ok"><div class="icon"></div><div class="field"></div></div>',dragOk:'<div class="stx_drag_ok"><div class="icon"></div><div class="field"></div></div>',crossX:'<div class="stx_crosshair stx_crosshair_x" style="display: none;"></div>',crossY:'<div class="stx_crosshair stx_crosshair_y" style="display: none;"></div>',chartControls:'<div class="stx_chart_controls" style="display: none; bottom: 22px;"><div class="chartSize"><span class="stx-zoom-out"></span><span class="stx-zoom-in"></span></div></div>',home:'<div class="stx_jump_today" style="display:none"><span></span></div>',floatDate:'<div class="stx-float-date" style="visibility: hidden;"></div>',handleTemplate:'<div class="stx-ico-handle" style="display: none;"><span></span></div> ',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div><div class="stx-btn-panel"><span class="stx-ico-up"></span></div><div class="stx-btn-panel"><span class="stx-ico-focus"></span></div><div class="stx-btn-panel"><span class="stx-ico-down"></span></div><div class="stx-btn-panel"><span class="stx-ico-edit"></span></div><div class="stx-btn-panel"><span class="stx-ico-close"></span></div></div>',baselineHandle:'<div class="stx-baseline-handle" style="display: none;"></div>',notificationTray:'<div class="stx_notification_tray"><template><div><span class="icon"></span><span class="message"></span></div></template></div>'},e.ChartEngine.prototype.registerChartControl=function(t,i,a){var r,n,s,o=L;if((r=this.controls)&&r.chartControls&&!r.chartControls.querySelector("."+t))return o.b1n(),n=null,(s=r.chartControls.querySelector(".stx-zoom-in"))?("<span cl","ass=",'"stx-tooltip">',n=document.createElement("span"),o.V6c(14),n.innerHTML=o.r6c('<span class="stx-tooltip">',i,"</span>"),o.V6c(0),n.className=o.r6c(t,"stx-chart-control-button "),s.parentNode.appendChild(n),a&&e.safeClickTouch(n,a),e.touchDevice||this.makeModal(n),n):void 0},e.ChartEngine.prototype.zoomOut=function(t,e){var i,a,r,n;if(!this.runPrepend("zoomOut",arguments))for(var s in this.preferences.zoomOutSpeed?e=this.preferences.zoomOutSpeed:e||(e=1.3),t&&t.preventDefault&&t.preventDefault(),this.cancelTouchSingleClick=!0,L.L1n(),i=this,this.charts)a=this.charts[s],r=Math.floor(a.maxTicks*e),!1===a.allowScrollFuture&&!1===a.allowScrollPast&&r>a.dataSet.length&&(r=a.dataSet.length),n=this.chart.width/r,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(o(a),this.layout.candleWidth,n);function o(t){return function(e){if(i.zoomSet(e,t),i.animations.zoom.hasCompleted){if(i.runAppend("zoomOut",arguments))return;i.changeOccurred("layout"),i.continuousZoom&&i.continuousZoom.execute(!0)}}}},e.ChartEngine.prototype.zoomIn=function(t,e){var i,a,r,n;if(L.L1n(),!this.runPrepend("zoomIn",arguments))for(var s in this.preferences.zoomInSpeed?e=this.preferences.zoomInSpeed:e||(e=.7),t&&t.preventDefault&&t.preventDefault(),this.cancelTouchSingleClick=!0,i=this,this.charts)a=this.charts[s],r=Math.floor(a.maxTicks*e),a.maxTicks-r<1&&(r=a.maxTicks-1),r<this.minimumZoomTicks&&(r=this.minimumZoomTicks),n=this.chart.width/r,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(o(a),this.layout.candleWidth,n);function o(t){return L.b1n(),function(e){if(i.zoomSet(e,t),L.L1n(),i.animations.zoom.hasCompleted){if(i.runAppend("zoomIn",arguments))return;i.changeOccurred("layout"),i.continuousZoom&&i.continuousZoom.execute()}}}},e.ChartEngine.prototype.createCrosshairs=function(){var t,e;this.runPrepend("createCrosshairs",arguments)||!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive||(L.L1n(),t=this.controls.crossX,e=this.controls.crossY,t&&(t.onmousedown||(t.onmousedown=function(t){return L.L1n(),t.preventDefault&&t.preventDefault(),!1})),e&&(e.onmousedown||(e.onmousedown=function(t){return t.preventDefault&&t.preventDefault(),L.b1n(),!1})),this.runAppend("createCrosshairs",arguments))},i=!1,e.ChartEngine.prototype.mousemoveinner=e.ChartEngine.prototype.mousemoveinner||function(t,e){i||console.error("interaction feature requires activating movement feature."),i=!0}},p=function(t){var e;(e="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:t.CIQ).ChartEngine.prototype.makeMarkerHelper=function(){this.markerHelper={chartMap:{},classMap:{},domMarkers:[],highlighted:[]}},e.ChartEngine.prototype.addToHolder=function(t){var e,i,a,r;(e=this.panels[t.params.panelName])&&(this.markerHelper||this.makeMarkerHelper(),i=t.params,a=t.node,(r=t.stxNodeCreator)&&r.prepareForHolder&&(a=r.prepareForHolder(t)),i.chartContainer?this.container.appendChild(t.node):i.includeAxis?e.holder.appendChild(t.node):e.subholder.appendChild(a),t.chart=e.chart,r&&r.addToHolder&&r.addToHolder(t))},e.ChartEngine.prototype.getMarkerArray=function(t,e){var i,a;for(var r in i=[],this.markers)for(var n=0;n<this.markers[r].length;n++)a=this.markers[r][n],"panelName"==t?a.params.panelName==e&&i.push(a):"label"==t?r==e&&i.push(a):"all"==t&&i.push(a);return i},e.ChartEngine.prototype.removeFromHolder=function(t){var e,i,a,r,n,s;if((e=this.panels[t.params.panelName])&&(t.node.parentNode==e.holder?e.holder.removeChild(t.node):t.node.parentNode==e.subholder?e.subholder.removeChild(t.node):t.node.parentNode==this.container&&this.container.removeChild(t.node)),i=this.markers[t.params.label]){for(L.b1n(),a=0;a<i.length;a++)if(i[a]===t){i.splice(a,1);break}if(r=this.markerHelper.chartMap[t.chart.name])for(a=0;a<r.markers.length;a++)if(r.markers[a]===t){r.markers.splice(a,1);break}if((n=this.markerHelper.classMap[t.className])&&(s=n[t.params.panelName]))for(a=0;a<s.length;a++)if(s[a]===t){s.splice(a,1);break}}},e.ChartEngine.prototype.moveMarkers=function(t,e){var i,a;L.L1n(),i=this.getMarkerArray("panelName",t);for(var r=0;r<i.length;r++)i[r].params.panelName=e;for(var n in this.markerHelper.classMap)(a=this.markerHelper.classMap[n][t])&&(this.markerHelper.classMap[n][e]=a,delete this.markerHelper.classMap[n][t])},e.ChartEngine.prototype.establishMarkerTicks=function(){var t,e;for(var i in this.markerHelper||this.makeMarkerHelper(),t=this.markerHelper.chartMap)if((e=t[i]).dataSetLength!=this.charts[i].dataSet.length)for(var a=0;a<e.markers.length;a++)this.setMarkerTick(e.markers[a])},e.ChartEngine.prototype.futureTickIfDisplayed=function(t){var e,i,a,r,n,s,o,l,h;if(L.b1n(),!((e=t.chart).dataSet.length<1||(i=e.xaxis[e.xaxis.length-1].DT,i=new Date(i.getTime()-6e4*this.timeZoneOffset),t.params.x>i))){a=e.maxTicks-e.dataSegment.length,r=e.dataSet.length+a,o=new Date(+e.dataSet[e.dataSet.length-1].DT),l=this.standardMarketIterator(o,null,e),h=t.params.x.getTime();for(var c=e.dataSet.length;c<r;c++){if(n=o.getTime(),(s=(o=l.next()).getTime())==h)return void(t.tick=c);if(s>h&&n<h)return L.T6c(55),void(t.tick=Math.max(L.w6c(c,"1",1),0))}}},e.ChartEngine.prototype.setMarkerTick=function(t){var e,i,a,r;if(e=t.chart,"master"==t.params.xPositioner&&t.params.x)t.tick=Math.floor(t.params.x/this.layout.periodicity);else if("date"==t.params.xPositioner&&t.params.x){r=t.params.x.getTime();for(var n=0;n<e.dataSet.length;n++){if(i=a=e.dataSet[n].DT.getTime(),n>0&&(i=e.dataSet[n-1].DT.getTime()),a==r)return void(t.tick=n);if(a>r&&i<r)return L.V6c(17),void(t.tick=Math.max(L.w6c("1",n),0));if(r<a)return void(t.tick=null)}if(e.dataSet.length<1)return;new Date(+e.dataSet[n-1].DT).getTime()<r&&(t.params.future=!0),t.tick=null}},e.ChartEngine.prototype.positionMarkers=function(){var t,e,i,a,r,n,s;function o(){var e,i,a,r;if(!t.runPrepend("positionMarkers",arguments)){for(var n in t.markerTimeout=null,t.markerHelper.classMap)for(var s in t.markerHelper.classMap[n])e=t.markerHelper.classMap[n][s],i=t.panels[s],e.length&&((a={stx:t,arr:e,panel:i}).firstTick=i.chart.dataSet.length-i.chart.scroll,a.lastTick=a.firstTick+i.chart.dataSegment.length,(r=e[0].constructor.placementFunction)?r(a):t.defaultMarkerPlacement(a));t.runAppend("positionMarkers",arguments)}}if(t=this,e=this.chart,L.L1n(),t.markerHelper){this.markerDelay||0===this.markerDelay?this.markerTimeout||(this.markerTimeout=setTimeout(o,this.markerDelay)):o(),i=this.getMarkerArray("all");for(var l=0;l<i.length;l++)"t","i","c","k",r=(a=i[l]).stxNodeCreator,n=this.getFirstLastDataRecord(e.dataSegment,"tick"),s=this.getFirstLastDataRecord(e.dataSegment,"tick",!0),n&&s&&(n.tick<=a.tick&&a.tick<=s.tick?r&&r.drawMarker&&r.drawMarker(a):a.attached&&r.expand&&("h","idden",r.expand.style.visibility="hidden"))}},e.Marker=e.Marker||function(t){var i,a,r,n;this.params={xPositioner:"date",yPositioner:"value",panelName:"chart",permanent:!1,label:"generic",includeAxis:!1},e.extend(this.params,t),this.params.node||(this.params.node=document.createElement("DIV")),L.b1n(),(i=this.params.stx)?(this.className||(this.className="CIQ.Marker"),e.derivedFrom(this.params.node,e.Marker.NodeCreator)?(this.stxNodeCreator=this.params.node,this.node=this.stxNodeCreator.node):this.node=this.params.node,i.markerHelper||i.makeMarkerHelper(),a=this.params.label,i.markers[a]||(i.markers[a]=[]),i.markers[a].push(this),r=i.panels[this.params.panelName],this.chart=r.chart,i.markerHelper.chartMap[this.chart.name]||(i.markerHelper.chartMap[this.chart.name]={dataSetLength:0,markers:[]}),i.markerHelper.chartMap[this.chart.name].markers.push(this),(n=i.markerHelper.classMap[this.className])||(n=i.markerHelper.classMap[this.className]={}),n[this.params.panelName]||(n[this.params.panelName]=[]),n[this.params.panelName].push(this),this.stxNodeCreator&&this.stxNodeCreator.deferAttach||i.addToHolder(this),i.setMarkerTick(this),this.stxNodeCreator&&this.stxNodeCreator.drawMarker&&this.stxNodeCreator.drawMarker(this)):console.log("Marker created without specifying stx")},e.Marker.prototype.remove=function(){L.b1n(),this.params.stx.removeFromHolder(this)},e.Marker.prototype.click=function(t){var e;"number"==typeof arguments[0]&&(t={cx:arguments[0],cy:arguments[1],panel:arguments[3]});var i=t,a=i.cx,r=i.cy,n=i.panel;this.params.stx&&(e=this.params.node).click&&e.click(a,r,this,n)},e.Marker.prototype.doubleClick=function(t){t.cx,t.cy,t.panel;return!1},e.Marker.prototype.render=function(){var t,e;t=[this],e={stx:this.params.stx,arr:t,panel:this.params.stx.panels[this.params.panelName],showClass:this.showClass},this.constructor.placementFunction(e)},L.L1n(),e.Marker.removeByLabel=function(t,e){var i,a;L.b1n(),i=t.getMarkerArray("label",e);for(var r=0;r<i.length;r++)a=i[r],t.removeFromHolder(a),a.stxNodeCreator&&a.stxNodeCreator.remove&&a.stxNodeCreator.remove(a);t.draw()},e.Marker.positionContentVerticalAndHorizontal=function(t){var e,i,a,r,n,s,o,l,h,c,u,d,p,m=L;if(".stx-marke","r-expand",e=t.querySelectorAll(".stx-marker-expand")[0]){if(i=e.offsetWidth,a=e.offsetHeight,!i||!a)return;if((r=e.style).left=r.right="",r.bottom=r.top="",s=(n=getComputedStyle(e)).left,o=n.bottom,l=t.offsetLeft+parseInt(s,10),h=parseInt(o,10),c=t.offsetTop-(h+e.offsetHeight-t.offsetHeight),u=t.parentNode.offsetWidth,d=t.parentNode.offsetHeight,l+i>u){r.right=s,1709340260,-1159973424,p=2;for(var g=1;1709340260!==m.D3T(g.toString(),g.toString().length,73231);g++)r.left="",p+=2;-1159973424!==m.m3T(p.toString(),p.toString().length,86100)&&(r.left="auto")}t.offsetTop<=d?c>d-a&&("p","x",r.top=d-t.offsetTop-a+"px",r.bottom="auto"):("p","x",m.T6c(0),r.top=m.w6c("px",d)),t.offsetTop+t.offsetHeight>=0?c<0&&("p","x",r.top=-t.offsetTop+"px",r.bottom="auto"):("0","p","x",r.bottom="0px")}},e.ChartEngine.prototype.getBarBounds=function(t){var e,i,a,r;return this.layout.chartType,e="pandf"==this.layout.aggregationType?{high:Math.max(t.pfOpen,t.pfClose),low:Math.min(t.pfOpen,t.pfClose)}:{high:t.High,low:t.Low},t.markerHigh&&(e.high=t.markerHigh),t.markerLow&&(e.low=t.markerLow),void 0===t.Open&&(i=t.Close),void 0===t.High&&(a=Math.max(t.Open||i,t.Close)),void 0===t.Low&&(r=Math.min(t.Open||i,t.Close)),e.high||0===e.high||(e.high=a),e.low||0===e.low||(e.low=r),e},e.ChartEngine.prototype.defaultMarkerPlacement=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A;L.L1n(),i=t.panel,a=t.yAxis?t.yAxis:t.panel.yAxis,r=i.chart,s=(n=t.stx).chart.highLowBars,(o=r.defaultPlotField)&&!s||(o="Close"),l={};for(var M=0;M<t.arr.length;M++)if("n","o","n","e",c=(h=t.arr[M]).params,!h.params.box){if(u=h.node,h.clientWidth||(h.clientWidth=u.clientWidth),h.clientHeight||(h.clientHeight=u.clientHeight),d=null,p=c.xPositioner,m=c.yPositioner,g=h.tick,f=r.dataSet,y=h.clientWidth,"none"!=p){if("bar"==p&&c.x)c.x<r.xaxis.length&&(v=r.xaxis[c.x])&&(d=v.data),u.style.left=Math.round(n.pixelFromBar(c.x,r)-y/2)+1+"px";else{if(!g&&0!==g){if(!(c.future&&r.scroll<r.maxTicks)){u.style.left="-1000px";continue}if(n.futureTickIfDisplayed(h),!(g=h.tick)&&0!==g){u.style.left="-1000px";continue}}if(g<f.length&&(d=f[g]),h.leftpx=Math.round(n.pixelFromTick(g,r)-r.left-y/2),h.rightEdge=h.leftpx+y,u.style.left=h.leftpx+"px",g<t.firstTick&&h.rightEdge<r.left-50)continue}d||(d=f[f.length-1])}else m.indexOf("candle")>-1&&(x=getComputedStyle(u).left)&&(b=n.barFromPixel(parseInt(x,10),r))>=0&&((d=r.xaxis[b].data)||(d=f[f.length-1]));u.style.top="auto",S=c.y,C=u.clientHeight,"none"!=m&&("on_c","an","dle","un","de","r_candle","v","a","lue",T=m+"-"+u.style.left,k=c.chartContainer?n.height:i.yAxis.bottom,D=0,0,void 0===l[T]&&(l[T]=0),A=l[T],l[T]+=C,"value"!=m||!S&&0!==S?"below_candle"!=m&&"under_candle"!=m||!d?"on_candle"==m&&d?(w=d[o],s&&(w=(d.Low+d.High)/2),D=Math.round(k-n.pixelFromPrice(w,i,a)-C/2-A)+"px"):"top"==m?("p","x",D=Math.round(k-C-A-i.top)+"px"):"bottom"==m?D=Math.round(A)+"px":d&&("p","x","h","igh",w=d[o],s&&(w=n.getBarBounds(d)[a.flipped?"low":"high"]),D=Math.round(k-n.pixelFromPrice(w,i,a)+A)+"px"):("hi","gh",w=d[o],s&&(w=n.getBarBounds(d)[a.flipped?"high":"low"]),D=Math.round(k-n.pixelFromPrice(w,i,a)-C-A)+"px"):D=Math.round(k-n.pixelFromPrice(S,i,a)-C/2)+"px",u.style.bottom!=D&&(u.style.bottom=D)),e.Marker.positionContentVerticalAndHorizontal(u)}},e.Marker.NodeCreator=function(){},e.Marker.NodeCreator.toNode=function(){return L.L1n(),this.node},e.Marker.Simple=function(t){var i,a,r,n;function s(){L.L1n(),e.Marker.positionContentVerticalAndHorizontal(i)}(i=this.node=document.createElement("div")).className="stx-marker",i.classList.add(t.type),t.category&&i.classList.add(t.category),a=e.newChild(i,"div","stx-visual"),e.newChild(i,"div","stx-stem"),"callout"==t.type?("d","i","v",n=e.newChild(a,"div","stx-marker-content"),e.newChild(n,"h4",null,t.headline),r=e.newChild(n,"div","stx-marker-expand"),e.newChild(r,"p",null,t.story)):("h","4","d","i","v",r=e.newChild(i,"div","stx-marker-expand"),e.newChild(r,"h4",null,t.headline),e.newChild(r,"p",null,t.story),e.safeClickTouch(r,(function(t){i.classList.toggle("highlight")}))),e.safeClickTouch(a,(function(t){i.classList.toggle("highlight"),L.L1n(),setTimeout(s,10)})),this.nodeType="Simple"},e.inheritsFrom(e.Marker.Simple,e.Marker.NodeCreator,!1)},m=function(t){var e,i,a,r,n,s,o,l=L;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i="undefined"!==("undefined"==typeof _timezoneJS?"undefined":R(_timezoneJS))?_timezoneJS:t.timezoneJS,l.V6c(1),a=l.w6c(6e4,60),l.T6c(1),r=l.r6c(a,24),n=e.Market,e.Market=function(t){var a;if("Ma","r","ke","t",this.market_def=!1,this.rules=!1,this.normalHours=[],this.extraHours=[],this.class_name="Market",i.Date?this.tz_lib=i.Date:this.tz_lib=Date,this.market_tz="",this.hour_aligned=!1,this.convertOnDaily=!1,this.enabled_by_default=!1,void 0!==t&&t&&!e.isEmpty(t)){if(t.market_definition&&(t=t.market_definition),t.rules&&(this.rules=t.rules),t.market_tz&&(this.market_tz=t.market_tz),t.convertOnDaily&&(this.convertOnDaily=t.convertOnDaily),R(t.hour_aligned)&&(this.hour_aligned=t.hour_aligned),void 0!==t.enabled_by_default&&t.enabled_by_default instanceof Array){-864428053,-277298492,l.T6c(1),a=l.r6c("2",1);for(var r=1;-864428053!==l.m3T(r.toString(),r.toString().length,31206);r++)this.enabled_by_default=t.enabled_by_default,a+=2;-277298492!==l.m3T(a.toString(),a.toString().length,18050)&&(this.enabled_by_default=t.enabled_by_default),this.enabled_by_default=t.enabled_by_default}this.market_def=t,void 0===this.market_def.name&&(this.market_def.name="no market name specified"),e.Market._createTimeSegments(this),this.getSessionNames()}},e.Market.Symbology=function(){},e.Market.Symbology.isForeignSymbol=function(t){return!1},e.Market.Symbology.isFuturesSymbol=function(t){return!1},e.Market.Symbology.isRateSymbol=function(t){return l.b1n(),!1},e.Market.Symbology.isForexSymbol=function(t){return l.L1n(),!1},e.Market.Symbology.isForexMetal=function(t,e){return!1},e.Market.Symbology.isForexFuturesSymbol=function(t){return!!e.Market.Symbology.isForexSymbol(t)||!!e.Market.Symbology.isFuturesSymbol(t)},e.Market.Symbology.factory=function(t){return l.L1n(),null},e.Market.Symbology.encodeTermStructureInstrumentSymbol=function(t,e){console.warn("You are trying to call `CIQ.Market.Symbology.encodeTermStructureInstrumentSymbol` but have not implemented it.")},n&&e.extend(e.Market,n),e.Market.prototype.sessions=null,e.Market.prototype.getSessionNames=function(){var t,e;return l.L1n(),this.rules?this.sessions||(t=[],e=[],this.rules.map((function(i){i.name&&-1===t.indexOf(i.name)&&(t.push(i.name),e.push({name:i.name,enabled:!!i.enabled&&i.enabled}))})),this.sessions=e):this.sessions=[],this.sessions.slice()},e.Market.prototype._find_next_segment=function(t,e){var i,a,r,n;return l.L1n(),this.market_def&&this.rules?(i=new Date(+t),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),this._wasOpenIntraDay(i)&&(r=this.zseg_match.close_parts.hours,n=this.zseg_match.close_parts.minutes,i.setHours(r),i.setMinutes(n),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz})),a.next()):null},e.Market.prototype._find_prev_segment=function(t,e){var i,a,r,n,s;return this.market_def&&this.rules?(i=new Date(+t),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),null===(r=this._wasOpenIntraDay(i))?(l.T6c(5),i=new Date(l.r6c(i,6e4)),r=this._wasOpenIntraDay(i)):(e&&i.getHours()===this.zseg_match.open_parts.hours&&i.getMinutes()===this.zseg_match.open_parts.minutes||!e&&i.getHours()===this.zseg_match.close_parts.hours&&i.getMinutes()===this.zseg_match.close_parts.minutes)&&(i=a.previous()),r?(n=this.zseg_match.open_parts.hours,s=this.zseg_match.open_parts.minutes,i.setHours(n),i.setMinutes(s),i=(a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz})).previous(),this.zseg_match.close_parts.hours===n&&this.zseg_match.close_parts.minutes===s?e?a.next():i:this.zseg_match.adjacent_child?i:e?a.next():i):a.previous()):null},e.Market.prototype.disableSession=function(t,e){var i;if(i=!1,void 0!==e&&e&&(i=!0),l.b1n(),t){for(var a=0;a<this.normalHours.length;a++)this.normalHours[a].name===t&&(this.normalHours[a].enabled=i);for(a=0;a<this.extraHours.length;a++)this.extraHours[a].name===t&&(this.extraHours[a].enabled=i)}},e.Market.prototype.enableSession=function(t){l.L1n(),this.disableSession(t,"enable_instead")},e.Market.prototype.enableAllAvailableSessions=function(){var t;l.L1n(),t=this.getSessionNames();for(var e=0;e<t.length;e++)this.enableSession(t[e].name)},e.Market.prototype.getClose=function(t,e,i,a){var r,n;if(!this.market_def)return null;if(!this.rules)return null;if(r=t,t||(r=new Date,i=null),r=this._convertToMarketTZ(r,i),void 0!==e){if(this._wasOpenIntraDay(r)&&this.zseg_match.name===e)return r.setHours(this.zseg_match.close_parts.hours,this.zseg_match.close_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}else if(this._wasOpenDaily(r)){for(n=this.zseg_match;n.child_;)n=n.child_;for(;!n.enabled;)n=n.parent_;return r.setHours(n.close_parts.hours,n.close_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}return null},e.Market.prototype.getNextClose=function(t,e,i){var a,r,n;if(!this.market_def)return null;if(!this.rules)return null;for(a=t,t||(a=new Date,e=null),a=this._convertToMarketTZ(a,e),this._wasOpenIntraDay(a)||(a=this.newIterator({begin:a,interval:1,inZone:this.market_tz,outZone:this.market_tz}).next()),r=a.getDate(),n=this.zseg_match;n.adjacent_child;)n=n.adjacent_child,r+=1;return a.setDate(r),a.setHours(n.close_parts.hours,n.close_parts.minutes,0,0),a=this._convertFromMarketTZ(a,i)},e.Market.prototype.getNextOpen=function(t,e,i){var a;return this.market_def&&this.rules?(a=t,t||(a=new Date,e=null),a=this._convertToMarketTZ(a,e),a=this._find_next_segment(a),this.zseg_match.adjacent_parent?(a=this.getNextOpen(a,this.market_tz,this.market_tz),a=this._convertFromMarketTZ(a,i)):(a.setHours(this.zseg_match.open_parts.hours),l.b1n(),a.setMinutes(this.zseg_match.open_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},e.Market.prototype.getOpen=function(t,e,i,a){var r,n,s,o;if(!this.market_def)return null;if(!this.rules)return null;if(r=t,t||(r=new Date,i=null),r=this._convertToMarketTZ(r,i),void 0!==e){if(this._wasOpenIntraDay(r)&&this.zseg_match.name==e)return r.setHours(this.zseg_match.open_parts.hours,this.zseg_match.open_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}else if(this._wasOpenDaily(r)){1421392040,l.T6c(8),n=l.w6c("113995668",1440988224),s=2;for(var h=1;1421392040!==l.D3T(h.toString(),h.toString().length,67941);h++)o=this.zseg_match,s+=2;for(l.m3T(s.toString(),s.toString().length,93294)!==n&&(o=this.zseg_match),o=this.zseg_match;o.parent_;)o=o.parent_;for(;!o.enabled;)o=o.child_;return r.setHours(o.open_parts.hours,o.open_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}return null},e.Market.prototype.getPreviousClose=function(t,e,i){var a;return this.market_def&&this.rules?(a=t,t||(a=new Date,e=null),a=this._convertToMarketTZ(a,e),a=this._find_prev_segment(a,!1),this.zseg_match.adjacent_child?this.getPreviousClose(a,this.market_tz,this.market_tz):(a.setHours(this.zseg_match.close_parts.hours),a.setMinutes(this.zseg_match.close_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},e.Market.prototype.getPreviousOpen=function(t,e,i){var a;return this.market_def&&this.rules?(a=t,l.b1n(),t||(a=new Date,e=null),a=this._convertToMarketTZ(a,e),a=this._find_prev_segment(a,!0),this.zseg_match.adjacent_parent?this.getPreviousOpen(a,this.market_tz,this.market_tz):(a.setHours(this.zseg_match.open_parts.hours),a.setMinutes(this.zseg_match.open_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},e.Market.prototype.getSession=function(t,e){return t=this._convertToMarketTZ(t,e),this._wasOpenIntraDay(t)&&this.zseg_match?this.zseg_match.name:(l.b1n(),null)},e.Market.prototype.marketZoneNow=function(){return l.L1n(),this._convertToMarketTZ(new Date)},e.Market.prototype.isHourAligned=function(){return this.hour_aligned},e.Market.prototype.isOpen=function(){var t;return l.L1n(),t=new Date,this.market_tz&&(t=new this.tz_lib(t.getTime(),this.market_tz)),this._wasOpenIntraDay(t)},e.Market.prototype.isMarketDay=function(){var t;return l.b1n(),t=new Date,this.market_tz&&(t=new this.tz_lib(t.getTime(),this.market_tz)),this._wasOpenDaily(t)},e.Market.prototype.isMarketDate=function(t){return this._wasOpenDaily(t)},e.Market.prototype.newIterator=function(t){var i,a;return"h","our",i=!1,t.periodicity?i=t.periodicity:t.multiple&&(i=t.multiple),(a=t.interval)||(a="minute"),"hour"==a&&(a=60),i||(i=1),t.begin||(t.begin=new Date,t.inZone=null),a==parseInt(a,10)&&(l.V6c(5),a=parseInt(a,l.w6c("10",0)),t.periodicity<1/60?(l.T6c(56),i=l.r6c(a,6e4,i),a="millisecond"):t.periodicity<1?(l.V6c(56),i=l.w6c(a,60,i),a="second"):("minu","t","e",l.V6c(1),i=l.r6c(i,a),a="minute")),t.timeUnit&&("t","i","c","k","millisecond"===t.timeUnit||"second"===t.timeUnit?a=t.timeUnit:"tick"===t.timeUnit&&("s","e","c","ond",a="second")),"tick"==a&&(a="second"),t.interval=a,t.multiple=i,t.market=this,new e.Market.Iterator(t)},e.Market.prototype._wasOpenDaily=function(t){var e;l.T6c(35),e=l.w6c(2147483647,"332937584");for(var i=1;l.m3T(i.toString(),i.toString().length,29759)!==e;i++)return this._was_open(t,!0);return 1171726546!==l.m3T(2..toString(),2..toString().length,19061)?this._was_open(t,!0):this._was_open(t,!1)},e.Market.prototype._wasOpenIntraDay=function(t){return this._was_open(t,!0)},e.Market.prototype._was_open=function(t,e){var i,a,r,n,s,o,h,c,u,d,p,m,g;if(i=this.zseg_match,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null,!this.market_def||!this.rules)return this.zclose_hour=24,!0;for(a=!1,r=!1,n=t.getFullYear(),s=t.getMonth()+1,o=t.getDay(),h=t.getDate(),c=t.getHours(),u=t.getMinutes(),d=t.getSeconds(),l.T6c(57),m=l.r6c(60,60,d,u,c,60),void 0===e&&(e=!0),g=0;g<this.normalHours.length;g++)if((p=this.normalHours[g]).enabled&&((a=p.dayofweek===o)&&e&&(a=m>=p.open&&m<p.close),a)){if(!e&&this.zseg_match&&(p.open_parts.hours>this.zopen_hour||p.open_parts.hours==this.zopen_hour&&p.open_parts.minutes>this.zopen_minute))continue;if(p===i||p.adjacent_parent||p.adjacent_child||(this.shouldResetToBeginningOfSegment=!0),this.zopen_hour=p.open_parts.hours,this.zopen_minute=p.open_parts.minutes,this.zclose_hour=p.close_parts.hours,this.zclose_minute=p.close_parts.minutes,this.zmatch_open=m===p.open,this.zseg_match=p,e)break}for(g=0;g<this.extraHours.length;g++)if((p=this.extraHours[g]).enabled&&("*"===p.year||n===p.year)&&s===p.month&&h===p.day&&(!(r=!e&&p.open||m>=p.open&&m<p.close)&&this.zseg_match&&(a=!1,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null),r)){if(!e&&this.zseg_match&&(p.open_parts.hours>this.zopen_hour||p.open_parts.hours==this.zopen_hour&&p.open_parts.minutes>this.zopen_minute))continue;if(this.zopen_hour=p.open_parts.hours,this.zopen_minute=p.open_parts.minutes,this.zclose_hour=p.close_parts.hours,this.zclose_minute=p.close_parts.minutes,this.zmatch_open=m===p.open,this.zseg_match=p,e)break}return this.zseg_match},e.Market.prototype._wasClosed=function(t){return l.L1n(),!this._was_open(t,!0)},e.Market.prototype._wasOpen=function(t){return l.L1n(),this._was_open(t,!0)},e.Market.prototype._tzDifferenceMillis=function(t,e,i){var a,r;return 0,a=t,r=t.getTimezoneOffset()-a.getTimezoneOffset(),l.T6c(56),l.w6c(60,1e3,r)},e.Market._createTimeSegments=function(t){var e,i,a,r,n;l.b1n(),e=function(t,e){if(24===t.close_parts.hours&&0===e.open_parts.hours&&0===e.open_parts.minutes){if(i.dayofweek===r.dayofweek-1)return!0;if(6===i.dayofweek&&0===r.dayofweek)return!0}return l.L1n(),!1};for(var o=0;o<t.rules.length;o++){void 0===(a=JSON.parse(JSON.stringify(t.rules[o]))).open&&void 0===a.close&&(a.open="00:00",a.close="00:00"),a.hasOwnProperty("name")||(a.name="");try{if("undefine","d","undefined"!==R(a.dayofweek)?(a.year="*",r=s._createDayOfWeekSegment(t,a),i&&(i.dayofweek===r.dayofweek?(i.child_=r,r.parent_=i):e(i,r)&&(i.adjacent_child=r,r.adjacent_parent=i)),i=r):void 0!==a.date?(a.isDayOfWeek=!1,a.dayofweek=-1,r=s._createDateTimeSegment(t,a)):(l.T6c(0),console.log(l.w6c(a,"Error, unknown rule type "))),t.enabled_by_default)for(var h=0;h<t.enabled_by_default.length;h++)if(n=t.enabled_by_default[h],r.name===n){r.enabled=!0;break}}catch(t){l.T6c(0),console.log(l.w6c(t,"Error, creating market rules "))}}},e.Market._timeSegment={},(s=e.Market._timeSegment).re_wild_card_iso=/^(\*)-(\d\d)-(\d\d)$/,s.re_regular_iso=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s.re_split_hours_minutes=/^(\d\d):(\d\d)$/,s.re_split_hour_minutes=/^(\d):(\d\d)$/,s._hashCode=function(t){var e,i,a,r;if(e=0,0===t.length)return e;for(i=0,r=t.length;i<r;i++)a=t.charCodeAt(i),l.V6c(58),e=l.r6c(e,a,5,e),e|=0;for(var n=1;-1823671523!==l.D3T(n.toString(),n.toString().length,15375);n++)return e;return-393136886!==l.D3T(2..toString(),2..toString().length,48210)?e:void 0},s._splitHoursMinutes=function(t){var e,i;return i={hours:NaN,minutes:NaN},null===(e=s.re_split_hour_minutes.exec(t))&&null===(e=s.re_split_hours_minutes.exec(t))||(i.hours=parseInt(e[1],10),i.minutes=parseInt(e[2],10)),i},l.L1n(),s._createDayOfWeekSegment=function(t,e){var i;return""===(i={name:e.name,isDayOfWeek:!0,dayofweek:e.dayofweek,date_str:"*",open_parts:s._splitHoursMinutes(e.open),close_parts:s._splitHoursMinutes(e.close),open:s._secSinceMidnight(t,e.open,!0),close:s._secSinceMidnight(t,e.close,!1),child_:!1,parent_:!1,adjacent_child:!1,adjacent_parent:!1,enabled:!1}).name&&(i.enabled=!0),l.b1n(),i.hash_code=this._hashCode((i.open+i.close).toString()),t.normalHours.push(i),i},s._createDateTimeSegment=function(t,e){var i,a,r;if(null===(i=this.re_regular_iso.exec(e.date))){if(null===(i=this.re_wild_card_iso.exec(e.date)))return void console.log("Warning: invalid date format on rule -> "+e.date);a="*"}else a=parseInt(i[1],10);return""===(r={name:e.name,isDayOfWeek:!1,dayofweek:-1,year:a,month:parseInt(i[2],10),day:parseInt(i[3],10),date_str:e.date,open_parts:s._splitHoursMinutes(e.open),close_parts:s._splitHoursMinutes(e.close),open:s._secSinceMidnight(t,e.open,!0),close:s._secSinceMidnight(t,e.close,!1),enabled:!1}).name&&(r.enabled=!0),r.hash_key=this._hashCode(r.date_str+r.open+r.close),l.L1n(),t.extraHours.push(r),r},s._secSinceMidnight=function(t,e,i){var a,r,n,s;return l.b1n(),a=e.split(":"),r=parseInt(a[0],10),n=parseInt(a[1],10),l.T6c(59),s=l.w6c(0,r,"60",n,60,"60"),i||24===r&&(l.T6c(60),s=l.w6c(1,60,60,r)),s},e.Market.prototype._convertToMarketTZ=function(t,e){var i;return i=e?new this.tz_lib(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),e):new this.tz_lib(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),l.b1n(),i.setTimezone&&i.setTimezone(this.market_tz),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())},e.Market.prototype._convertFromMarketTZ=function(t,e){var i;return i=new this.tz_lib(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),this.market_tz),e?(i.setTimezone&&i.setTimezone(e),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())):new Date(i.getTime())},e.Market.Iterator=function(t){this.market=t.market,this.begin=t.begin,this.interval=t.interval,this.multiple=t.multiple,this.inZone=t.inZone,this.outZone=t.outZone,this.clock=new e.Market.Iterator._Clock(t.market,t.interval,t.multiple),this.intraDay=this.clock.intra_day,this.intraDay&&(this.begin=this.market._convertToMarketTZ(this.begin,t.inZone)),this.clock._setStart(this.begin),l.L1n(),this.clock.minutes_aligned=!1},e.Market.Iterator.prototype.date=function(){return l.L1n(),this.clock._date()},e.Market.Iterator.prototype.futureTick=function(t){var e,i,a,r,n,s,o,h;if(this.clock.skip=1,e=0,(i=this.intraDay?this.market._convertToMarketTZ(t.end,this.inZone).getTime():t.end.getTime())===(a=this.clock.ctime))return e;if(r=2,1e3,n=0,l.L1n(),t.sample_size&&(r=t.sample_size),s=(new Date).getTime(),i>a){for(this.clock.forward=!0;this.clock.ctime<i;)if(e+=1,n+=1,this.clock._findNext(),1e3===n&&(n=0,(new Date).getTime()-s>=r)){o=(this.clock.ctime-a)/e,l.V6c(61),e=Math.floor(l.w6c(a,o,i));break}if(this.clock.ctime>i){-387375498,-1806597114,h=2;for(var c=1;-387375498!==l.m3T(c.toString(),c.toString().length,61777);c++)e++,h+=2;-1806597114!==l.D3T(h.toString(),h.toString().length,84577)&&e--}}else for(this.clock.forward=!1;this.clock.ctime>i;)if(e+=1,n+=1,this.clock._findPrevious(),1e3===n&&(n=0,(new Date).getTime()-s>=r)){o=(a-this.clock.ctime)/e,l.V6c(61),e=Math.floor(l.r6c(i,o,a));break}return e},e.Market.Iterator.prototype.isHourAligned=function(){return!this.intraDay||this.market.isHourAligned()},e.Market.Iterator.prototype.isOpen=function(){return l.L1n(),this.market.isOpen()},e.Market.Iterator.prototype.next=function(t){var e;if(this.clock.skip=1,t){959347857,-570102277,e=2;for(var i=1;959347857!==l.D3T(i.toString(),i.toString().length,85830);i++)this.clock.skip=t,e+=2;-570102277!==l.D3T(e.toString(),e.toString().length,98665)&&(this.clock.skip=t)}this.clock.forward=!0;for(var a=0;a<this.clock.skip;a++)this.begin=this.clock._findNext();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},e.Market.Iterator.prototype.peek=function(){return this.clock._peek()},e.Market.Iterator.prototype.previous=function(t){l.T6c(1),this.clock.skip=l.r6c("1",1),t&&(this.clock.skip=t),l.b1n(),this.clock.forward=!1;for(var e=0;e<this.clock.skip;e++)this.begin=this.clock._findPrevious();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},e.Market.Iterator._Clock=function(t,e,i){var n,s;i%60==0&&"second"===e&&(e="minute",l.T6c(10),i=l.w6c(i,"60")),this.market=t,this.interval=e,this.multiple=i,this.intra_day=!1,this.intervals=[],l.V6c(1),this.max_iters=l.r6c("10080",1),n=r,s=this._dayImpl,"millisecond"===e?(s=this._millisImpl,n=1):"second"===e?(s=this._secondImpl,n=1e3):"minute"===e?(s=this._minuteImpl,n=6e4):"hour"===e?(s=this._hourImpl,n=a):"day"===e?(s=this._dayImpl,n=r):"week"===e?(s=this._weekImpl,l.V6c(1),n=l.r6c(r,7)):"month"===e?(s=this._monthImpl,l.T6c(1),n=l.r6c(r,30)):("Periodi",'city ERROR: "',l.V6c(14),console.log(l.r6c('Periodicity ERROR: "',e,'" is not a valid interval. Please see setPeriodicity() for details.'))),l.T6c(1),this.tick_time=l.r6c(n,i),this.intra_day=this.tick_time<r,this._findPrevious=this._findNext=s},(o=e.Market.Iterator._Clock.prototype)._total_minutes=function(t,e,i,a){return l.T6c(62),l.L1n(),l.r6c(e,60,t,i,a)},o._alignMinutes=function(){var t,e,i,a,r;if(!this.market.market_def||void 0===this.market.zopen_minute)return[];for(t=this.market.zopen_minute,(e=this.market.zseg_match)&&e.adjacent_parent?t=e.adjacent_parent.open/60-1440:this.market.isHourAligned()&&this.multiple%60==0&&(t=0),i=this._total_minutes(this.market.zopen_hour,t,this.market.zclose_hour,this.market.zclose_minute),a=[],r=0;r<i;)l.V6c(0),a.push(l.w6c(r,t)),r+=this.multiple;return l.b1n(),a},o._alignBaseZero=function(t){var e,i;for(i=[e=0];!((e+=this.multiple)>=t);)i.push(e);return i},o._date=function(){var t,e;return t=Math.round(this.ctime),e=new Date(t),this.intra_day?this.display_date=new Date(t+this.shift_millis):this.display_date=e,e},o._alignToBoundary=function(t,e){var i,a,r;l.L1n(),i=0,a=0,r=e;for(var n=0;n<t.length-1&&(i=t[n],l.V6c(0),a=t[l.w6c(1,n)],e!==i&&e!==a);n++){if(e>i&&e<a){r=i;break}n+1===t.length-1&&(r=a)}return r},o._peek=function(){return l.L1n(),this._date().toString()},o._seekHr=function(){l.b1n(),this.forward?this.ctime-=a:this.ctime+=a},o._setStart=function(t){var e,i;e=this.market._tzDifferenceMillis(t),i=new Date(t.getTime()+e),this.shift_millis=e,this.ctime=i.getTime(),this.shift_millis=0,this.ctime=t.getTime()},o._tickTock=function(){l.b1n(),this.forward?this.ctime+=this.tick_time:this.ctime-=this.tick_time},o._tockTick=function(){l.b1n(),this.forward?this.ctime-=this.tick_time:this.ctime+=this.tick_time},o._tickTock24=function(){l.L1n(),this.ctime+=r},o._tockTick24=function(){l.L1n(),this.ctime-=r},o._windMaybe=function(t,e){var i,a,r,n;for(i=0,a=new Date(this.ctime),l.b1n(),r=!1;!t.call(this.market,a);)if(e.call(this),r=!0,a=new Date(this.ctime),(i+=1)>this.max_iters){n="Warning! max iterations ("+this.max_iters,n+=") reached with no rule match.",console.log(n);break}return r},o._millisImpl=function(){var t,e,i,a,r,n,s,o,h,c;return l.b1n(),t=!1,this.mperiods_aligned||(e=this._alignBaseZero(1e3),a=(i=new Date(this.ctime)).getMilliseconds(),a=this._alignToBoundary(e,a),l.V6c(1),i.setMilliseconds(l.w6c("0",1)),this.ctime=i.getTime()+a,this.mperiods_aligned=!0,t=!0),r=this._date().getMinutes(),this._tickTock(),n=this._date().getMinutes(),!t&&r==n||this.market._wasOpenIntraDay(this._date())||(s=this._date().getSeconds(),o=this._date().getMilliseconds(),h=this.tick_time,this.tick_time=6e4,c=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=h,this.multiple=c,l.T6c(63),this.ctime+=l.r6c(o,936,s,"1000")),this._date()},o._secondImpl=function(){var t,e,i,a,r,n,s,o,h;return t=!1,this.speriod_aligned||(e=this._alignBaseZero(60),a=(i=new Date(this.ctime)).getSeconds(),a=this._alignToBoundary(e,a),i.setSeconds(a),i.setMilliseconds(0),this.ctime=i.getTime(),this.speriod_aligned=!0,t=!0),r=this._date().getMinutes(),this._tickTock(),n=this._date().getMinutes(),!t&&r==n||this.market._wasOpenIntraDay(this._date())||(s=this._date().getSeconds(),o=this.tick_time,l.T6c(13),this.tick_time=l.r6c("60000",118186400),h=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=o,this.multiple=h,l.T6c(64),this.ctime+=l.r6c("1000",s)),this._date()},o._minuteImpl=function(){var t,e,i,a,r,n,s,o,h,c;return t=this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),i=(e=new Date(this.ctime)).getTimezoneOffset(),l.b1n(),a=e.getMinutes(),r=e.getHours(),n=this._alignMinutes(),s=this._total_minutes(this.market.zopen_hour,this.market.zopen_minute,r,a)+this.market.zopen_minute,s=t?this.forward?n[n.length-1]:n[0]:this._alignToBoundary(n,s),r=Math.floor(s/60)+this.market.zopen_hour,l.T6c(38),e.setHours(r,l.r6c(60,s),0,0),o=e.getTimezoneOffset()-i,(this.forward&&o<0||!this.forward&&o>0)&&e.setTime(e.getTime()-6e4*o),this.ctime=e.getTime(),this._tickTock(),h=this.market.hour_aligned&&this.multiple%60==0,(this._windMaybe(this.market._wasOpenIntraDay,this._tickTock)||!h&&this.shouldResetToBeginningOfSegment)&&(e=new Date(this.ctime),this.forward?(e.setMinutes(this.market.zopen_minute),e.setHours(this.market.zopen_hour)):(c=(n=this._alignMinutes())[n.length-1],l.T6c(38),e.setMinutes(l.r6c(60,c)),e.setHours(Math.floor(c/60)+this.market.zopen_hour)),this.ctime=e.getTime()),this._date()},o._hourImpl=function(){var t,e,i,a,r;return this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),t=new Date(this.ctime),l.b1n(),this.market.isHourAligned()?t.setMinutes(0):t.setMinutes(this.market.zopen_minute),t.setSeconds(0),t.setMilliseconds(0),this.ctime=t.getTime(),this._tickTock(),e=this.market.zseg_match,(this._windMaybe(this.market._wasOpenIntraDay,this._tickTock)||!this.market.hour_aligned&&e!=this.market.zseg_match)&&(i=new Date(this.ctime),this.forward?(i.setMinutes(this.market.zopen_minute),i.setHours(this.market.zopen_hour)):(r=(a=this._alignMinutes())[a.length-1],l.V6c(65),i.setMinutes(l.r6c("60",r)),i.setHours(Math.floor(r/60)+this.market.zopen_hour)),this.ctime=i.getTime()),this._date()},o._dayImpl=function(){var t,e;for(l.L1n(),this._windMaybe(this.market._wasOpenDaily,this._seekHr),(t=new Date(this.ctime)).setHours(12,0,0,0),this.ctime=t.getTime(),e=0;e<this.multiple;)this.forward?this._tickTock24():this._tockTick24(),this.market._wasOpenDaily(this._date())&&(e+=1);return(t=new Date(this.ctime)).setHours(0),this.ctime=t.getTime(),this._date()},o._weekImpl=function(){var t;for((t=new Date(this.ctime)).setHours(12),this.ctime=t.getTime(),this._tickTock(),t=new Date(this.ctime);0!==t.getDay();)this._tockTick24(),t=new Date(this.ctime);return this._windMaybe(this.market._wasOpenDaily,this._tickTock24),(t=new Date(this.ctime)).setHours(0,0,0,0),this.ctime=t.getTime(),this._date()},o._monthImpl=function(){var t;return(t=new Date(this.ctime)).setDate(15),this.ctime=t.getTime(),this._tickTock(),(t=new Date(this.ctime)).setDate(1),t.setHours(12),this.ctime=t.getTime(),this._windMaybe(this.market._wasOpenDaily,this._tickTock24),(t=new Date(this.ctime)).setHours(0,0,0,0),this.ctime=t.getTime(),l.b1n(),this._date()},o._findNext=null,o._findPrevious=null},g=function(t){var e,i,a=L;a.M9Y=function(t){if(a&&t)return a.o9Y(t)},a.n9Y=function(t){if(a.L1n(),a&&t)return a.w9Y(t)},e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i="valid",e.valid=0,e[a.d9Y("7ca1")?"":"ChartEngine"][a.B9Y("a642")?"":"prototype"][a.c9Y("6fd8")?"":"mousemoveinner"]=function(t,r){a.Z9Y=function(t){if(a.L1n(),a)return a.w9Y(t)},a.m9Y=function(t){if(a.L1n(),a&&t)return a.w9Y(t)},a.t9Y=function(t){if(a)return a.o9Y(t)},a.b1n(),a.p9Y=function(t){if(a.L1n(),a)return a.w9Y(t)};var n=a.J9Y("ac43")?289941215:526473961,s=a.n9Y("39de")?765739645:557019483,o=a.D9Y("5da2")?5843464496:1958427082,l=a.p9Y("566f")?739767175:246162357,h=a.t9Y("b36b")?1894136937:9847194468,c=1277625661,u=-(a.m9Y("a9e5")?562174346:362140606),d=-1642462266,p=-(a.z9Y("11d9")?776084232:854259281),m=a.g9Y("43b5")?541956268:659982917,g=-373925766,f=-(a.Z9Y("bcfd")?324099715:498703435),y=a.r9Y("ab97")?1201881364:7668436280,v=-1983986253;if(a.b2x(0,!!a.q9Y("d773"),213211)===n||a.Y2x(a.M9Y("7de6")?6:0,!1,618681)===s||a.Y2x(11,!1,402266)===o||a.b2x(0,!1,655244)===l||a.b2x(10,!1,262497)===h||a.Y2x(0,!1,557828)===c||a.b2x(10,!1,175038)===u||a.Y2x(0,!1,100764)===d||a.b2x(11,!1,579757)===p||a.Y2x(0,!1,911402)===m||a.b2x(10,!1,513468)===g||a.Y2x(0,!1,417796)===f||a.b2x(16,!1,717063)===y||a.Y2x(0,!1,339993)===v){var x,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E,O,I,N,H,V,z,B,W=function(t){615501427!==a.b2x(0,!1,296663)&&-607994755!==a.b2x(0,!1,399624)&&1546312243!==a.b2x(11,!1,956840)&&-1807381183!==a.Y2x(0,!1,423392)&&-1876179016!==a.b2x(10,!1,485150)&&17523838!==a.Y2x(0,!1,235058)&&-1810300108!==a.b2x(10,!1,389202)&&-1773871813!==a.Y2x(0,!1,564416)&&-601952574!==a.Y2x(11,!1,456746)&&-1097668730!==a.Y2x(0,!1,579280)&&1920123002!==a.Y2x(10,!1,284306)&&1609034557!==a.Y2x(0,!1,169761)&&-1744401982!==a.Y2x(16,!1,864327)&&790810070!==a.Y2x(0,!1,581936)||t.runAppend("mousemoveinner",b)};if(!this.chart.canvas)return;if(!(e.isAndroid||e.isIOS7or8||this.chart.canvas.height==Math.floor(this.devicePixelRatio*this.chart.container.clientHeight)&&this.chart.canvas.width==Math.floor(this.devicePixelRatio*this.chart.container.clientWidth)))return void this.resizeChart();if(this.runPrepend("mousemoveinner",arguments))return;if(b=arguments,S=this.container.getBoundingClientRect(),this.top=S.top,this.left=S.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.hasDragged=!0,e.ChartEngine.crosshairX=t,e.ChartEngine.crosshairY=r,C=this.cy=this.crossYActualPos=this.backOutY(e.ChartEngine.crosshairY),w=this.cx=this.crossXActualPos=this.backOutX(e.ChartEngine.crosshairX),this.grabbingScreen&&this.anyHighlighted&&Math.pow(this.grabStartX-t,2)+Math.pow(this.grabStartY-r,2)<36)return;if(this.cancelLongHold=!0,T=function(t,r){if(-1349640417===a.Y2x(0,!1,942517)||1300925371===a.b2x(0,!1,602284)||1634672015===a.b2x(11,!1,457479)||204244724===a.Y2x(0,!1,440359)||-1086585884===a.b2x(10,!1,967629)||-2088124374===a.Y2x(0,!1,578531)||1730132170===a.Y2x(10,!1,934740)||811202877===a.b2x(0,!1,822451)||351721082===a.Y2x(11,!1,654219)||1951229545===a.b2x(0,!1,175019)||551731778===a.b2x(10,!1,201648)||1184974189===a.b2x(0,!1,358317)||-2044112763===a.Y2x(16,!1,243901)||-1915399695===a.Y2x(0,!1,938875)){if(0===e[i])return t.whichPanel(r)||t.chart.panel;t.draw[i]||(t.draw=function(){-286981254!==a.b2x(0,!1,575973)&&422212123!==a.Y2x(0,!1,574021)&&-238661123!==a.b2x(11,!1,517343)&&1717210038!==a.b2x(0,!1,388600)&&-145194085!==a.Y2x(10,!1,162744)&&2103728258!==a.b2x(0,!1,250636)&&545597474!==a.b2x(10,!1,791635)&&1821714507!==a.b2x(0,!1,466241)&&358758322!==a.Y2x(11,!1,231279)&&1364995297!==a.Y2x(0,!1,942271)&&-334150397!==a.b2x(10,!1,618791)&&1323836487!==a.Y2x(0,!1,792089)&&1372626239!==a.Y2x(16,!1,579137)&&1655510364!==a.Y2x(0,!1,838194)||e.clearCanvas(this.chart.canvas,this)},t.draw[i]=!0)}},this.currentPanel=T(this,C),!this.currentPanel)return;if((k=this.currentPanel.chart).dataSet&&(this.crosshairTick=this.tickFromPixel(w,k),x=this.valueFromPixel(C,this.currentPanel),this.crosshairValue=this.adjustIfNecessary(this.currentPanel,this.crosshairTick,x),(D="chart"==this.currentPanel.name?this.preferences.horizontalCrosshairField:this.currentPanel.horizontalCrosshairField)&&this.crosshairTick<k.dataSet.length&&this.crosshairTick>-1&&(x=k.dataSet[this.crosshairTick][D],this.crossYActualPos=this.pixelFromPrice(x,this.currentPanel))),e.ChartEngine.crosshairX>=this.left&&e.ChartEngine.crosshairX<=this.right&&e.ChartEngine.crosshairY>=this.top&&e.ChartEngine.crosshairY<=this.bottom?this.insideChart=!0:this.insideChart=!1,A=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=this.insideChart&&e.ChartEngine.crosshairY<=A+this.top&&e.ChartEngine.crosshairY>A-this.xaxisHeight+this.top,this.overYAxis=(this.cx>=this.currentPanel.right||this.cx<=this.currentPanel.left)&&this.insideChart,(this.overXAxis||this.overYAxis||!this.insideChart&&!this.grabbingScreen)&&(this.undisplayCrosshairs(),!this.overXAxis&&!this.overYAxis))return;if(!this.displayCrosshairs&&!e.ChartEngine.resizingPanel)return void this.undisplayCrosshairs();if(this.repositioningBaseline)return B=this.panels[this.chart.panel.name],this.chart.baseline.userLevel=this.adjustIfNecessary(B,this.crosshairTick,this.valueFromPixel(this.backOutY(e.ChartEngine.crosshairY),B)),Date.now()-this.repositioningBaseline.lastDraw>100&&(this.draw(),this.repositioningBaseline.lastDraw=Date.now()),W(this);if(this.grabbingScreen&&!e.ChartEngine.resizingPanel){if(this.highlightedDraggable)return this.displayDragOK(!0),this.dragPlotOrAxis(w,C),W(this);if(this.anyHighlighted){for(M in e.clearCanvas(this.chart.tempCanvas,this),this.anyHighlighted=!1,this.overlays)this.overlays[M].highlight=!1;for(M in k.series)k.series[M].highlight=!1;this.displaySticky()}if(-1==this.grabStartX&&(this.grabStartX=e.ChartEngine.crosshairX,this.grabStartScrollX=k.scroll),-1==this.grabStartY&&(this.grabStartY=e.ChartEngine.crosshairY,this.grabStartScrollY=this.currentPanel.yAxis.scroll),P=e.ChartEngine.crosshairX-this.grabStartX,F=e.ChartEngine.crosshairY-this.grabStartY,0===P&&0===F)return;if(Math.abs(P)+Math.abs(F)>5&&(this.grabOverrideClick=!0),R=this.layout.candleWidth,this.allowZoom&&"pan"!=this.grabMode&&(0===this.grabMode.indexOf("zoom")||this.overXAxis||this.grabStartYAxis))L="zoom-",L+="y",E="zo",E+="om",E+="-x",""===this.grabMode&&(this.overXAxis?this.grabMode="zoom-x":this.grabStartYAxis&&(this.grabMode="zoom-y")),this.grabMode==E?F=0:this.grabMode==L&&(P=0),P&&(this.grabStartX=e.ChartEngine.crosshairX,O=R-P/this.chart.maxTicks,this.zoomSet(O,this.chart)),this.layout.setSpan&&(this.layout.setSpan=null,this.changeOccurred("layout")),(_=this.grabStartYAxis)&&(_.flipped&&(F*=-1),_.zoom=Math.round(this.grabStartZoom+F),this.grabStartZoom<_.height?_.zoom>=_.height&&(_.zoom=_.height-1):_.zoom<=_.height&&(_.zoom=_.height+1));else if(!this.overYAxis&&(this.dispatch("move",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!0}),this.allowScroll)){if(I="s",I+="croll",N="p",N+="a",N+="n",Math.abs(F)<this.yTolerance){if(!this.yToleranceBroken&&(F=0,0===P))return}else this.yToleranceBroken=!0;if(this.grabStartMicropixels||(this.grabStartMicropixels=0),this.grabMode=N,k.scroll=this.grabStartScrollX,this.micropixels=this.grabStartMicropixels+P*(this.shift?5:1),!this.lineTravelSpacing){for(;this.micropixels>0;)this.micropixels-=R,k.scroll++;for(;this.micropixels<-R;)this.micropixels+=R,k.scroll--}k.scroll>=k.maxTicks?this.preferences.whitespace=this.initialWhitespace:this.preferences.whitespace=(k.maxTicks-k.scroll)*R,this.currentPanel==this.grabStartPanel&&((_=this.currentPanel.yAxis).flipped&&(F*=-1),_.scroll=this.grabStartScrollY+F),this.dispatch(I,{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy})}return H=function(t){if(a.L1n(),1311190314===a.b2x(0,!1,401791)||-1139973372===a.b2x(0,!1,950110)||-1381914268===a.b2x(11,!1,421632)||-1767665103===a.b2x(0,!1,538104)||-1446062374===a.Y2x(10,!1,457630)||-1573187901===a.Y2x(0,!1,608340)||1562738535===a.Y2x(10,!1,174970)||1488975359===a.Y2x(0,!1,908001)||1545498072===a.b2x(11,!1,260031)||1911259922===a.Y2x(0,!1,205779)||1151485330===a.b2x(10,!1,807929)||1219701300===a.b2x(0,!1,758466)||-1454809765===a.Y2x(16,!1,790114)||-346721566===a.b2x(0,!1,890660))return function(){1972814624!==a.b2x(0,!1,511115)&&-133070983!==a.b2x(0,!1,886338)&&-563940887!==a.b2x(11,!1,298177)&&600698483!==a.Y2x(0,!1,188065)&&-2127532833!==a.b2x(10,!1,480378)&&557846430!==a.b2x(0,!1,334637)&&1938536437!==a.b2x(10,!1,823572)&&-1401520805!==a.b2x(0,!1,694212)&&344661671!==a.b2x(11,!1,955226)&&1219392884!==a.Y2x(0,!1,673408)&&-1835600775!==a.b2x(10,!1,384632)&&1139711730!==a.Y2x(0,!1,453477)&&1282838417!==a.Y2x(16,!1,441775)&&885961404!==a.Y2x(0,!1,118184)||(t.draw(),t.updateChartAccessories())}},e.ChartEngine.useAnimation?window.requestAnimationFrame(H(this)):(this.draw(),this.updateChartAccessories()),this.activeDrawing&&(e.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.render(this.chart.tempCanvas.context),this.activeDrawing.measure()),void this.undisplayCrosshairs()}return this.grabMode="",this.overXAxis||this.overYAxis?(this.updateChartAccessories(),this.findHighlights(),W(this)):(this.controls.crossX&&(this.controls.crossX.style.left=this.pixelFromTick(this.crosshairTick,k)-.5+"px"),this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.insideChart&&!e.ChartEngine.resizingPanel?(V=this.currentVectorParameters.vectorType,this.layout.studies&&(z=this.layout.studies[this.currentPanel.name])&&(this.preferences.dragging&&this.preferences.dragging.study||delete this.overlays[z.name],V&&(this.overlays[z.name]=z)),e.Drawing&&V&&e.Drawing[V]&&(new e.Drawing[V]).dragToDraw||this.doDisplayCrosshairs(),this.updateChartAccessories()):this.undisplayCrosshairs(),this.magnetize&&this.magnetize(),this.repositioningDrawing?this.repositionDrawing(this.repositioningDrawing):e.ChartEngine.drawingLine?this.activeDrawing&&(B=this.panels[this.activeDrawing.panelName],x=this.adjustIfNecessary(B,this.crosshairTick,this.valueFromPixel(this.backOutY(e.ChartEngine.crosshairY),B)),this.magnetizedPrice&&B.name==this.currentPanel.name&&(x=this.adjustIfNecessary(B,this.crosshairTick,this.magnetizedPrice)),null===this.magnetizedPrice&&e.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.move(this.chart.tempCanvas.context,this.crosshairTick,x),this.activeDrawing.measure&&this.activeDrawing.measure()):e.ChartEngine.resizingPanel&&this.resizePanels(),this.insideChart&&(this.dispatch("move",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!1}),this.findHighlights(this.highlightViaTap)),W(this))}},e.ChartEngine.prototype.swipeStart=function(t){var e;this.swipe&&this.swipe.interval&&clearInterval(this.swipe.interval),a.V6c(29),this.swipe.velocity=a.w6c("0",0),this.swipe.amplitude=0,this.swipe.frame=t.scroll,this.swipe.micropixels=this.micropixels,this.swipe.timestamp=Date.now(),this.swipe.chart=t,this.swipe.end=!1,this.swipe.timeConstant=325,this.swipe.cb=null,a.b1n(),e=this,requestAnimationFrame((function(){e.swipeSample()}))},e.ChartEngine.prototype.swipeSample=function(){var t,i,r,n,s,o,l,h;(t=this.swipe).end||(i=this,a.V6c(29),o=a.r6c("20",0),(n=(r=Date.now())-t.timestamp)<o?requestAnimationFrame((function(){a.b1n(),i.swipeSample()})):(l=e.touchDevice?.4:.8,t.timestamp=r,s=(t.chart.scroll-t.frame)*this.layout.candleWidth+this.micropixels-t.micropixels,t.frame=t.chart.scroll,t.micropixels=this.micropixels,a.T6c(66),h=l*a.r6c(1,n,s,1e3)+.2*t.velocity,Math.abs(h)>Math.abs(t.velocity)&&(t.velocity=h),Math.abs(s)<6&&(a.V6c(13),t.velocity=a.r6c("0",37675840)),requestAnimationFrame((function(){a.L1n(),i.swipeSample()}))))},e.ChartEngine.prototype.swipeRelease=function(){var t,e;t=this.swipe,a.b1n(),t.velocity>3e3&&(a.V6c(35),t.velocity=a.w6c(2147483647,"3000")),t.velocity<-3e3&&(t.velocity=-3e3),(t.velocity>10||t.velocity<-10)&&(t.amplitude=.8*t.velocity,t.scroll=t.chart.scroll,t.target=t.amplitude,t.timestamp=Date.now(),e=this,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),requestAnimationFrame((function(){e.autoscroll()})))},e.ChartEngine.prototype.dragPlotOrAxis=function(t,i){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,L,E,O,I,N,H,V,z,B,W,j,Y,U,q,Q,G,X;if((function(){var t,e,i,r;function n(e){return a.L1n(),function(i){a.b1n(),e.subholder.classList.contains(i)&&(e.subholder.classList.remove(i),t=!0)}}for(var s in t=!1,this.panels){for(e="bott",i="a",i+="l",["dropzone",i+="l","left","right","top",e+="om"].forEach(n(this.panels[s])),r=0;r<this.panels[s].yaxisLHS.length;r++)this.panels[s].yaxisLHS[r].dropzone&&(t=!0),this.panels[s].yaxisLHS[r].dropzone=null;for(r=0;r<this.panels[s].yaxisRHS.length;r++)this.panels[s].yaxisRHS[r].dropzone&&(t=!0),this.panels[s].yaxisRHS[r].dropzone=null}return t}.call(this)||this.grabbingScreen)&&(r=null,20,10,a.V6c(5),n=this.whichPanel(a.r6c(i,20)),a.V6c(0),s=this.whichPanel(a.r6c(20,i)),o=this.whichPanel(i),l=this.highlightedDraggable,o&&(!l.undraggable||!l.undraggable(this)))){for(b in h=this.whichYAxis(o,t,i),a.T6c(5),c=this.whichYAxis(o,a.w6c(t,10),i),a.T6c(0),u=this.whichYAxis(o,a.w6c(10,t),i),this.xAxisAsFooter&&o.name==Object.keys(this.panels).pop()&&(s=this.whichPanel(i+20+this.xaxisHeight),r&&(r+=this.xaxisHeight)),d=!1,p=!1,!1,e.Renderer&&(d=l instanceof e.Renderer),e.Studies&&(p=l instanceof e.Studies.StudyDescriptor),g=function(t){if(!m){if("right"==t)return o.right-o.width/6;if("left"==t)return o.left+o.width/6}return a.L1n(),(o.left+o.right)/2},(m=l instanceof e.ChartEngine.YAxis)||h||("ri","g","h","t",t<g("left")?c=this.whichYAxis(o,o.left-1,i):t>g("right")&&(u=this.whichYAxis(o,o.right+1,i))),f=[],l.getDependents&&(f=l.getDependents(this,!0)),y=l.panel,v=l.getYAxis(this),d?y=l.params.panel:m&&(y=this.grabStartPanel.name),x=this.panels[y],this.panels)this.panels[b].soloing&&(S=!0);if(C=v.isShared(this),w=!m&&!S&&(x!==o&&x!=n&&x!=s||!this.checkForEmptyPanel(x,!0,[l].concat(f))),T=y==o.name&&v!==h&&v!==u&&v!==c||C,!w||n&&o===n)!w||s&&o===s?o!==x?m||o.noDrag||(o.subholder.classList.add("dropzone"),o.subholder.classList.add("all"),k=o.name):(!o.yaxisRHS.length||1==o.yaxisRHS.length&&o.yaxisRHS[0]==v&&"none"==v.position)&&!h&&!u&&t>g("right")?("rig","ht","dropzo","ne",o.subholder.classList.add("dropzone"),o.subholder.classList.add("right"),D="right"):(!o.yaxisLHS.length||1==o.yaxisLHS.length&&o.yaxisLHS[0]==v&&"none"==v.position)&&!h&&!c&&t<g("left")?("l","e","f","t","l","e","ft","dr","opz","o","ne",o.subholder.classList.add("dropzone"),o.subholder.classList.add("left"),D="left"):T&&(m&&t>o.left&&t<o.right&&(M=o.yaxisLHS[o.yaxisLHS.length-1],P=o.yaxisRHS[0],t<(F=g())&&M!=v?c=M:t>F&&P!=v&&(u=P)),m&&h===v||(_=!m&&C,!u||u===v&&!_||h&&h===u?!c||c===v&&!_||h&&h===c?h&&("r","i","g","ht",u||h===v&&!_?c||h===v&&!_?h!==v&&(h.dropzone="all"):("le","f","t",h.dropzone="left"):h.dropzone="right",h.dropzone&&(D=h.position||this.chart.panel.yAxis.position||"right")):(c.dropzone="right",D=c.position||this.chart.panel.yAxis.position||"right"):("ri","g","ht",u.dropzone="left",D=u.position||this.chart.panel.yAxis.position||"right"))):("bo","tt","o","m","dropzo","ne",o.subholder.classList.add("dropzone"),o.subholder.classList.add("bottom"));else{7484428,913912943,A=2;for(var Z=1;7484428!==a.D3T(Z.toString(),Z.toString().length,96391);Z++)"d","rop","zon","e",o.subholder.classList.add("dropzone"),o.subholder.classList.add("dropzone"),a.V6c(35),A+=a.r6c(2147483647,"2");913912943!==a.D3T(A.toString(),A.toString().length,37762)&&("dropz","one",o.subholder.classList.add("dropzone"),o.subholder.classList.add("dropzone")),o.subholder.classList.add("dropzone"),o.subholder.classList.add("top"),s=o}if(this.grabbingScreen||!o.subholder.classList.contains("dropzone")&&!D)this.draw();else{if(L=-1,!k&&!D&&w){for(var J in k=p?l.inputs.id:l.params.name||e.uniqueID(),this.panels)if(L++,this.panels[J]==s)break;s||L++,this.panels[y].yAxis.name==k&&(y=this.electNewPanelOwner(y)),E=p?l.inputs.display:null,y?this.createPanel(E||k,k,r,this.chart.name,new e.ChartEngine.YAxis({name:k})):y=k,p?l.panel=y:l.params.panel=y}if(k){if(p)l.parameters||(l.parameters={}),l.parameters.panelName=k,this.highlightedDraggable=e.getFn("Studies.replaceStudy")(this,l.inputs.id,l.type,l.inputs,l.outputs,l.parameters,null,l.study);else if(d)for(var K in l.seriesParams)O=l.seriesParams[K],I=null,l.params.yAxis&&l.params.yAxis!==this.chart.panel.yAxis&&((I=l.params.yAxis).name=l.params.name),this.modifySeries(O.id,{panel:k,yAxis:I});if(L>-1){for(b in N={},H=0,this.panels)L==H++&&(N[k]=this.panels[k]),b!=k&&(N[b]=this.panels[b]);N[k]||(N[k]=this.panels[k]),this.panels=N}this.checkForEmptyPanel(y);for(var $=0;$<f.length;$++)f[$].params?this.checkForEmptyPanel(f[$].params.name):this.checkForEmptyPanel(f[$].name);this.adjustPanelPositions()}else if(D){if("a","l","l",V=function(t,i,r,n){var s,o;if("study"==r&&("Studies.replac","eSt","udy",i.parameters||(i.parameters={}),n?i.parameters.yaxisDisplayValue=n.position:delete i.parameters.yaxisDisplayValue,s=e.getFn("Studies.replaceStudy")(t,i.inputs.id,i.type,i.inputs,i.outputs,i.parameters,i.panel,i.study)),"renderer"==r)for(var l in i.seriesParams)o=i.seriesParams[l],s=t.modifySeries(o.id,{panel:k,yAxis:n});return a.L1n(),s},(z=h&&"all"==h.dropzone)||(m?(l.position=D,this.layout.studies&&(B=this.layout.studies[l.name])&&(B.parameters||(B.parameters={}),B.parameters.yaxisDisplayValue=D)):p?this.highlightedDraggable=V(this,l,"study",{position:D}):d&&V(this,l,"renderer",new e.ChartEngine.YAxis({name:l.params.name||e.uniqueID(),position:D})),v=this.highlightedDraggable.getYAxis(this)),!C||!z||m){for(W=v,z&&v==this.chart.panel.yAxis&&(W=h),R=0;R<o.yaxisLHS.length;R++)if(o.yaxisLHS[R]==W){o.yaxisLHS.splice(R,1);break}for(R=0;R<o.yaxisRHS.length;R++)if(o.yaxisRHS[R]==W){o.yaxisRHS.splice(R,1);break}}if(z)if(this.getYAxisByName(o,v.name)==o.yAxis&&this.electNewPanelOwner(o,h),m){for(Y in U=v,q=h,v==this.chart.panel.yAxis&&(U=h,q=v),U.studies)"s","t","u","dy",V(this,this.layout.studies[U.studies[Y]],"study",q===this.chart.panel.yAxis?null:{position:q.name});for(Y in U.renderers)"ren","derer",V(this,this.chart.seriesRenderers[U.renderers[Y]],"renderer",q);this.highlightedDraggable=q}else p?("st","ud","y",this.highlightedDraggable=V(this,l,"study",{position:h.name})):d&&V(this,l,"renderer",h);else{for("no","n","e","none"==v.position&&(v.width=e.ChartEngine.YAxis.prototype.width),v.position=D,j="left"==D?o.yaxisLHS:o.yaxisRHS,R=0;R<j.length;R++){if(j[R]!==v)if("r","i","g","ht","left"==j[R].dropzone)j.splice(R,0,v);else{if("right"!=j[R].dropzone)continue;a.V6c(0),j.splice(a.r6c(1,R),0,v)}break}R==j.length&&j.push(v)}}for(var tt in this.panels)for(G=(Q=this.panels[tt]).yaxisLHS.concat(Q.yaxisRHS),R=0;R<G.length;R++)G[R].height=Q.yAxis.height,this.calculateYAxisMargins(G[R]);this.displayDragOK(),this.draw(),this.calculateYAxisPositions(),this.draw(),this.findHighlights(null,!0),-31595698,1125337750,X=2;for(var et=1;-31595698!==a.m3T(et.toString(),et.toString().length,39721);et++)this.savePanels(),X+=2;1125337750!==a.m3T(X.toString(),X.toString().length,71664)&&this.savePanels(),this.savePanels()}}}},f=function(t){var e;L.b1n(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).NameValueStore=e.NameValueStore||function(){},e.NameValueStore.prototype.toJSONIfNecessary=function(t){if(t.constructor==String)return t;try{return JSON.stringify(t)}catch(e){return L.V6c(0),console.log(L.w6c(t,"Cannot convert to JSON: ")),null}},e.NameValueStore.prototype.fromJSONIfNecessary=function(t){L.b1n();try{return JSON.parse(t)}catch(e){return t}},e.NameValueStore.prototype.get=function(t,i){var a,r,n=L;n.b1n(),n.T6c(1),a=n.r6c("2",1);for(var s=1;1488439391!==n.m3T(s.toString(),s.toString().length,66338);s++)r=e.localStorage.getItem(t),a+=2;-877375151!==n.D3T(a.toString(),a.toString().length,85281)&&(r=e.localStorage.getItem(t)),r=e.localStorage.getItem(t),i&&i(null,this.fromJSONIfNecessary(r))},e.NameValueStore.prototype.set=function(t,i,a){e.localStorageSetItem(t,this.toJSONIfNecessary(i)),a&&a(null)},e.NameValueStore.prototype.remove=function(t,i){e.localStorage.removeItem(t),L.L1n(),i&&i(null)}},y=function(t){var e;function i(){}(e="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:t.CIQ).ChartEngine||(e.ChartEngine=function(){}),i.fetchInitialData=function(t,e,i,a,r){},i.fetchUpdateData=function(t,e,i,a){},i.fetchPaginationData=function(t,e,i,a,r){},i.subscribe=function(t){},i.unsubscribe=function(t){},e.QuoteFeed=e.QuoteFeed||function(){},e.QuoteFeed.prototype.fetch=function(t,e){L.b1n(),this.v2QuoteFeed||console.log("You must implement CIQ.QuoteFeed.[yourfeedname].prototype.fetch()")},e.QuoteFeed.prototype.announceError=function(t,i){t.suppressErrors||i.suppressAlert||t.startDate||t.endDate||i.error&&e.alert("Error fetching quote:"+i.error)},e.QuoteFeed.prototype.multiFetch=function(t,e){return L.L1n(),0===t.length&&e([]),t[0].stx.driver.multiFetch(t,e)},e.QuoteFeed.Subscriptions=function(){L.L1n(),this.subscriptions=[]},e.inheritsFrom(e.QuoteFeed.Subscriptions,e.QuoteFeed),e.QuoteFeed.Subscriptions.prototype.checkSubscriptions=function(t){var e,i,a,r,n;L.L1n(),a=t.getSymbols({"breakout-equations":!0}),r=this,a=a.filter((function(e){var i;return i=t.quoteDriver.getQuoteFeed(e),L.b1n(),i&&i.engine==r}));for(var s=0;s<this.subscriptions.length;s++)this.subscriptions[s].match=!1;for(var o=0;o<a.length;o++)for("month"!=(n=(i=a[o]).interval)&&"week"!=n||t.dontRoll||(n="day"),i.interval=n,i.period=1,i.match=!1,isNaN(i.interval)||("m","inute",i.period=i.interval,i.interval=i.timeUnit,i.interval||(i.interval="minute")),delete i.periodicity,delete i.timeUnit,delete i.setSpan,s=0;s<this.subscriptions.length;s++){if((e=this.subscriptions[s]).symbol==i.symbol&&e.period==i.period&&e.interval==i.interval){i.match=!0,e.match=!0;break}e.symbol!=i.symbol?("peri","od","period"!=i.reason&&(i.reason="symbol"),e.reason="symbol"):(i.reason="period",e.reason="period")}this.subscriptions=this.subscriptions.filter((function(e){return e.match||(e.stx||(e.stx=t),r.unsubscribe(e)),e.match})),a.forEach((function(e){e.match||("i","nitializ","e",e.stx||(e.stx=t),e.reason||(e.reason="initialize"),e.symbol!==t.chart.symbol&&(e.series=!0),r.subscribe(e),r.subscriptions.push(e))}))},e.QuoteFeed.Subscriptions.prototype.fetch=function(t,e){var i;L.L1n(),i=this,this.fetchFromSource(t,(function(a){a.error||i.checkSubscriptions(t.stx),L.b1n(),e(a)}))},e.QuoteFeed.Subscriptions.prototype.subscribe=function(t){var e,i=L;e=2;for(var a=1;424878487!==i.D3T(a.toString(),a.toString().length,4906);a++)console.log("subscribe",t),i.V6c(1),e+=i.w6c("2",1);i.b1n(),1441722924!==i.D3T(e.toString(),e.toString().length,95647)&&console.log("",t)},e.QuoteFeed.Subscriptions.prototype.unsubscribe=function(t){L.b1n(),console.log("unsubscribe",t)},e.QuoteFeed.Subscriptions.prototype.fetchFromSource=function(t,e){L.L1n(),console.log("Please provide implementation of fetchFromSource")},e.QuoteFeed.prototype.requiresImmediateRefresh=function(t){return L.L1n(),!1},e.ChartEngine.prototype.attachQuoteFeed=function(t,i,a){var r;i||(i={}),"function"!=typeof t.fetchInitialData&&"function"!=typeof t.fetchUpdateData&&"function"!==R(t.fetchPaginationData)||("fu","ncti","on","function"!=typeof t.fetchPaginationData&&"function"!=typeof t.fetchUpdateData&&(i.noLoadMore=!0),t.v2QuoteFeed=!0,["multiFetch","announceError","requiresImmediateRefresh"].forEach((function(i){t[i]||!1===t[i]||(t[i]=e.QuoteFeed.prototype[i]),L.b1n()})),"function"===R(t.subscribe)&&(t.checkSubscriptions=e.QuoteFeed.Subscriptions.prototype.checkSubscriptions,t.subscriptions=[])),i.maximumTicks||(i.maximumTicks=t.maxTicks?t.maxTicks:2e4),(!i.bufferSize||i.bufferSize<0)&&(i.bufferSize=0),i.bufferSize=Math.round(i.bufferSize),i.intervalTimer=null,this.quoteDriver&&(!a&&this.quoteDriver.hasUnfilteredQuoteFeed?this.detachQuoteFeed():(r=this.quoteDriver.hasUnfilteredQuoteFeed&&this.quoteDriver.quoteFeeds.pop(),this.quoteDriver.quoteFeeds.push({engine:t,behavior:i,filter:a}),r&&this.quoteDriver.quoteFeeds.push(r),this.quoteDriver.updateChartLoop(null,i))),this.quoteDriver||(this.quoteDriver=new e.ChartEngine.Driver(this,t,i,a)),L.b1n(),a||(this.quoteDriver.hasUnfilteredQuoteFeed=!0)},e.ChartEngine.prototype.detachQuoteFeed=function(t){var e;if(e=this.quoteDriver){for(var i=e.quoteFeeds.length-1;i>=0;i--)t&&e.quoteFeeds[i].quoteFeed!=t||(e.die(e.quoteFeeds[i]),e.quoteFeeds.splice(i,1));e.quoteFeeds.length?t==e.quoteFeed&&(e.quoteFeed=e.quoteFeeds[0].quoteFeed,e.behavior=e.quoteFeeds[0].behavior):e=this.quoteDriver=null}},e.ChartEngine.Driver=function(t,i,a,r){var n;this.stx=t,a||(a={}),this.quoteFeeds=[{engine:i,behavior:a,filter:r}],n=2;for(var s=1;-192746581!==L.D3T(s.toString(),s.toString().length,66359);s++)this.id=e.uniqueID(!1),this.behavior=a,n+=2;-1132906732!==L.D3T(n.toString(),n.toString().length,59346)&&(this.id=e.uniqueID(!0),this.behavior=a),this.quoteFeed=i,this.loadingNewChart=!1,this.updatingChart=!1,r||(this.hasUnfilteredQuoteFeed=!0),this.updateChartLoop()},e.ChartEngine.Driver.prototype.die=function(t){var e;L.L1n();for(var i=0;i<this.quoteFeeds.length;i++)t&&this.quoteFeeds[i]!=t||(e=this.quoteFeeds[i].behavior).intervalTimer&&(clearInterval(e.intervalTimer),e.intervalTimer=-1)},e.ChartEngine.Driver.prototype.getQuoteFeed=function(t){var e;t.symbolObject||(t.symbolObject={symbol:t.symbol});for(var i=0;i<this.quoteFeeds.length;i++)if((e=this.quoteFeeds[i]).behavior.generator==t.symbolObject.generator&&(!e.filter||e.filter(t)))return e;return L.L1n(),null},e.ChartEngine.Driver.prototype.multiFetch=function(t,i){var a,r,n;0===t.length&&i([]),a={counter:0,finished:t.length,results:[]};for(var s=0;s<t.length;s++)(r=t[s]).stx.isEquationChart(r.symbol)?e.fetchEquationChart(r,o(r,a,i)):(n=this.getQuoteFeed(r))&&e.ChartEngine.Driver.fetchData(e.QuoteFeed.SERIES,n.engine,r,o(r,a,i));function o(t,e,i){return function(a){var r;e.results.push({dataCallback:a,params:t}),e.counter++,e.counter>=e.finished&&(r=e.results,e.results=[],i(r))}}},e.ChartEngine.Driver.prototype.updateSubscriptions=function(){for(var t=0;t<this.quoteFeeds.length;t++)this.quoteFeeds[t].checkSubscriptions&&this.quoteFeeds[t].checkSubscriptions(this.stx)},e.ChartEngine.Driver.prototype.loadDependents=function(t,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M;if(n=this,!r)return s=0,o=[],l=[],h=function(t){L.L1n(),i&&++s>=n.quoteFeeds.length&&i(null)},c=function(e){++s<o.length||(l.length||h(),l.forEach((function(e){L.L1n(),n.loadDependents(t,h,a,e.behavior)})))},n.quoteFeeds.forEach((function(t){L.L1n(),t.behavior.generator?l.push(t):o.push(t)})),void o.forEach((function(e){L.L1n(),n.loadDependents(t,c,a,e.behavior)}));for(u in{},d=t.stx,m=(p=t.chart).series,d.masterData,y=[],v={},x=a==e.QuoteFeed.UPDATE,b=a==e.QuoteFeed.PAGINATION,S=e.shallowClone(t),m){if(C=(g=m[u]).parameters,!x){if(!t.future&&!1===g.moreAvailable)continue;if(t.future&&!0===g.upToDate)continue}if(!g.loading&&(!1!==C.loadData&&(!x&&!b||g.endPoints&&Object.keys(g.endPoints).length)&&(!C.data||C.data.useDefaultQuoteFeed)&&(f=C.symbolObject).symbol&&f.generator==r.generator&&(S.symbolObject=f,S.symbol=f.symbol,w=this.getQuoteFeed(S),r==(w&&w.behavior)))){T=!0,x||(g.loading=!0);for(var P=0;P<y.length;P++)e.symbolEqual(y[P],f)&&(T=!1);T&&(y.push(f),v[f.symbol]=g.endPoints)}}k=[];for(var F=0;F<y.length;F++)f=y[F],(D=e.shallowClone(t.originalState)).symbol=f.symbol,D.symbolObject=f,D.update||D.future?(D.endDate||(D.endDate=t.endDate),D.startDate=v[f.symbol].end):(D.startDate||(D.startDate=t.startDate),D.endDate=b&&!t.future?v[f.symbol].begin:t.endDate,D.ticks=t.ticks),k.push(D);if(!k.length&&x)return(A={appending:t.appending||t.originalState.update}).appending&&(A.appendToDate=t.startDate),d.createDataSet(null,null,A),t.nodraw||d.draw(),void(i&&i(null));this.multiFetch(k,(M=x,L.L1n(),function(s){var o,l,h,c,u,m,f,y,v,x,b;o=null;for(var S=0;S<s.length;S++)if(!(h=(l=s[S]).dataCallback.error)&&0!==h){c=l.params.symbolObject,m=(u=l.dataCallback).quotes,f=u.moreAvailable,y=u.upToDate,v=[],d.getSeries&&(v=d.getSeries({symbolObject:c})),x=!1;for(var C=0;C<v.length;C++)g=v[C],M||(t.future?(g.upToDate=!0===y||y||m.length<=(l.params.startDate?1:0),d.isHistoricalModeSet&&m.length<2&&(g.mostRecentForwardAttempt=new Date)):g.moreAvailable=!1!==f&&(f||m.length>(l.params.endDate?1:0)),g.loading=!1),x=g.parameters.fillGaps||x;m=n.cleanup(d,g,m,a,t,x),d.updateChartData(m,p,{secondarySeries:c.symbol,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),m&&m.length&&(!o||o>m[0].DT)&&(o=m[0].DT)}if(s.length){b=2;for(var w=1;2113577703!==L.m3T(w.toString(),w.toString().length,681);w++)d.createDataSet(1,1,{appending:t.originalState.update&&t.future,appendToDate:o}),b+=2;-111064275!==L.m3T(b.toString(),b.toString().length,4483)&&d.createDataSet(null,null,{appending:t.originalState.update||t.future,appendToDate:o}),t.nodraw||d.draw(),a==e.QuoteFeed.INITIAL&&n.resetRefreshInterval(r.refreshInterval,r)}i&&i(null)}))},e.ChartEngine.Driver.prototype.cleanup=function(t,i,a,r,n,s){var o,l,h,c,u;return t.doCleanupDates(a,t.layout.interval),L.L1n(),!n.missingBarsCreated&&a&&a.length&&t.cleanupGaps&&!1!==s&&(h=n.chart,i?(h=i,l=i.parameters.symbol||i.id):l=h.defaultPlotField,r!=e.QuoteFeed.PAGINATION||n.loadMoreReplace?r==e.QuoteFeed.UPDATE&&h.endPoints.end&&h.endPoints.end<a[0].DT&&(u=t.getFirstLastDataRecord(t.masterData,l,!0),i&&(u=u[l]),a.unshift(u),o="shift"):h.endPoints.begin&&h.endPoints.begin>a[a.length-1].DT&&(c=t.getFirstLastDataRecord(t.masterData,l,!1),i&&(c=c[l]),a.push(c),o="pop"),a=t.doCleanupGaps(a,n.chart,{cleanupGaps:s,noCleanupDates:!0}),o&&a[o]()),a},e.ChartEngine.Driver.prototype.updateChart=function(t){var i,a,r,n,s,o,l,h,c;if(!this.updatingChart&&!this.loadingNewChart)for(var u in i=Object.keys(this.stx.charts).length,a=0,r=this.stx,n=r.layout.interval,L.L1n(),s=r.layout.timeUnit,r.charts)(o=r.charts[u]).symbol&&(l=this.makeParams(o.symbol,o.symbolObject,o),h=this.getQuoteFeed(l),o.masterData&&o.masterData.length&&(l.startDate=o.endPoints.end),l.update=!0,l.originalState=e.shallowClone(l),t&&t!=l.behavior?this.loadDependents(l,null,e.QuoteFeed.UPDATE,t):(this.updatingChart=!0,c=d(this,l,o.symbol,h),r.isEquationChart(l.symbol)?e.fetchEquationChart(l,c):h&&e.ChartEngine.Driver.fetchData(e.QuoteFeed.UPDATE,h.engine,l,c)));function d(t,o,l,h){return o.behavior.prefetchAction&&o.behavior.prefetchAction("updateChart"),L.L1n(),function(c){var u,d;a++,(u=o.chart).masterData,l!=u.symbol||n!=r.layout.interval||s!=r.layout.timeUnit||r.isHistoricalMode()?t.updatingChart=!1:(c.error?h&&h.engine.announceError(o.originalState,c):(d=c.quotes,d=t.cleanup(r,null,d,e.QuoteFeed.UPDATE,o),r.updateChartData(d,u,{noCreateDataSet:!0,noCleanupDates:!0}),u.attribution=c.attribution),a==i&&(t.updatingChart=!1),L.L1n(),o.behavior.callback&&o.behavior.callback(o),t.loadDependents(o,null,e.QuoteFeed.UPDATE,o.behavior))}}},e.ChartEngine.Driver.prototype.updateChartLoop=function(t,e){var i,a;if(e||(e=this.behavior),-1!=e.intervalTimer){e.intervalTimer&&clearInterval(e.intervalTimer),i=function(t,e){return L.L1n(),function(){L.b1n(),e.noUpdate||t.updateChart(e)}};for(var r=0;r<this.quoteFeeds.length;r++)e!=(a=this.quoteFeeds[r].behavior)||a.noUpdate||(t||0===t||(t=a.refreshInterval),t&&(e.intervalTimer=setInterval(i(this,a),1e3*t)))}},e.ChartEngine.Driver.prototype.resetRefreshInterval=function(t,e){L.b1n(),(e||this.behavior).refreshInterval=t,this.updateChartLoop(null,e)},e.ChartEngine.Driver.prototype.loadAll=function(t,e){var i,a;i=this,a=0,L.L1n(),function r(){return L.b1n(),function(n){L.L1n(),n?e(n):!t.moreAvailable&&t.upToDate?e(null):++a>20?e("error, moreAvailable not implemented correctly in QuoteFeed"):(t.loadingMore=!1,i.checkLoadMore(t,!0,!0,r(),!0))}}()()},e.ChartEngine.Driver.prototype.checkLoadMore=function(t,i,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k;if(s=this.stx,this,t.loadingMore||this.loadingNewChart)return t.initialScroll=t.scroll,void(r&&r(null));function D(e){return L.b1n(),!e.endPoints.end||t.scroll-t.maxTicks+1<l.bufferSize||s.tickFromDate(e.endPoints.end,t,null,!0)-h.length+t.scroll-t.maxTicks+2<l.bufferSize}if(s.isHistoricalMode()||(s.isHistoricalModeSet=!1),o=this.makeParams(t.symbol,t.symbolObject,t),s.currentlyImporting)r&&r(null);else{if(l=o.behavior,h=t.dataSet,u=1e3*(l.forwardPaginationRetryInterval||5),d=!1,p=!1,t.dataSet.length)for(var A in t.series)(m=t.series[A]).loading||!1!==m.parameters.loadData&&(c=!m.mostRecentForwardAttempt||m.mostRecentForwardAttempt.getTime()+u<Date.now(),!1!==m.moreAvailable&&M(m)&&(d=!0),c&&!m.upToDate&&D(m)&&(p=!0));if(c=!t.mostRecentForwardAttempt||t.mostRecentForwardAttempt.getTime()+u<Date.now(),g=(M(t)||i)&&!1!==t.moreAvailable,f=(D(t)||i)&&!t.upToDate&&c,y=g||d,v=s.isHistoricalModeSet&&!y&&(f||p),x=s.layout.interval,b=s.layout.timeUnit,S=!1,C=l.findHeadOfData||t.masterData&&t.masterData.length,!l.noLoadMore&&C&&(v||!s.maxDataSetSize||t.dataSet.length<s.maxDataSetSize)&&(y||v)){if(t.initialScroll=t.scroll,t.loadingMore=!0,(o=this.makeParams(t.symbol,t.symbolObject,t)).pagination=!0,o.future=v,t.masterData&&t.masterData.length?(v?o.startDate=t.endPoints.end:o.endDate=t.endPoints.begin,v&&!o.startDate?(w=s.getFirstLastDataRecord(t.masterData,"DT",!0))&&(o.startDate=w.DT):y&&!o.endDate&&(w=s.getFirstLastDataRecord(t.masterData,"DT"))&&(o.endDate=w.DT)):o.endDate=new Date,o.originalState=e.shallowClone(o),o.nodraw=n,!g&&d||!f&&p)return this.loadingMore=!0,this.loadDependents(o,(function(e){t.loadingMore=!1,r&&r(e)}),e.QuoteFeed.PAGINATION),void(r&&r(null));s.fetchMaximumBars[s.layout.aggregationType]&&(o.fetchMaximumBars=!0,!s.maxMasterDataSize||l.maximumTicks<s.maxMasterDataSize?o.ticks=l.maximumTicks:o.ticks=s.maxMasterDataSize),T=function(t,i){l.prefetchAction&&l.prefetchAction("checkLoadMore");return function(a){var s,o,h,c,u,d,p,m,g;s=t.stx,L.L1n(),o=i.chart,i.symbol==o.symbol&&x==s.layout.interval&&b==s.layout.timeUnit&&(i.loadMore||(i.chart.loadingMore=!1),a.error?(t.quoteFeed.announceError(i.originalState,a),i.chart.loadingMore=!1,r&&r(a.error)):(a.quotes||(a.quotes=[]),h=a.quotes,c=o.masterData,(h=t.cleanup(s,null,h,e.QuoteFeed.PAGINATION,i)).length&&o.masterData&&o.masterData.length&&(i.future?(u=h[0]).DT&&u.DT==o.masterData[o.masterData.length-1].DT&&c.pop():(d=h[h.length-1]).DT&&+d.DT==+o.masterData[0].DT&&h.pop()),i.future?(a.upToDate?o.upToDate=!0:(!1===a.upToDate||h.length>1)&&(o.upToDate=!1),s.isHistoricalModeSet&&h.length<2&&(o.mostRecentForwardAttempt=new Date)):a.moreAvailable||!1!==a.moreAvailable&&h.length?o.moreAvailable=!0:o.moreAvailable=!1,t.tickMultiplier=h.length?2:2*t.tickMultiplier,p=h[0]?h[0].DT:i.startDate,m=h[0]?h[h.length-1].DT:i.endDate,(!o.endPoints.begin||o.endPoints.begin>p)&&(o.endPoints.begin=p),(!o.endPoints.end||o.endPoints.end<m)&&(o.endPoints.end=m),o.loadingMore=!1,i.loadMoreReplace?s.setMasterData(h,o,{noCleanupDates:!0}):i.future?s.updateChartData(h,o,{noCreateDataSet:!0,noCleanupDates:!0}):e.addMemberToMasterdata({stx:s,chart:o,data:h,fields:["*"],noCleanupDates:!0}),i.future&&(g={appending:!0,appendToDate:h[0]&&h[0].DT}),s.createDataSet(void 0,void 0,g),n||s.draw(),l.callback&&l.callback(i),t.loadDependents(i,r,e.QuoteFeed.PAGINATION)))}}(this,o),s.isEquationChart(o.symbol)?e.fetchEquationChart(o,T):(v&&(o.appending=!0),(k=this.getQuoteFeed(o))&&e.ChartEngine.Driver.fetchData(e.QuoteFeed.PAGINATION,k.engine,o,T)),S=!0}!S&&r&&r(null)}function M(e){return L.L1n(),!e.endPoints.begin||h.length-t.scroll<l.bufferSize||h.length-t.scroll-s.tickFromDate(e.endPoints.begin,t)<l.bufferSize}},e.ChartEngine.Driver.prototype.extendHistoricalData=function(t){var i,a,r=t.from,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},s=this.stx,o=s.chart,l=s.layout,h=o.masterData,c=o.dataSet,u=l.interval,d=l.timeUnit;function p(t,i){return function(a){var r=a.quotes,h=a.moreAvailable,c=a.error;if(i.symbol===o.symbol&&u===l.interval&&d===l.timeUnit){if(o.loadingMore=!1,c)return n(c);r=t.cleanup(s,null,r,e.QuoteFeed.PAGINATION,i),o.moreAvailable="boolean"==typeof h?h:!!r.length,o.endPoints.begin=r[0].DT,e.addMemberToMasterdata({stx:s,chart:o,data:r,fields:["*"],noCleanupDates:!0}),s.createDataSet(),s.draw()}}}if(i=this.makeParams(o.symbol,o.symbolObject,o),a=this.getQuoteFeed(i),o.loadingMore||this.loadingNewChart||s.currentlyImporting||!h.length||!a||s.maxDataSetSize&&c.length>s.maxDataSetSize)return n(null);o.loadingMore=!0,i.originalState=Object.assign({},i),i.startDate=r,L.b1n(),i.endDate=h[0].DT,e.ChartEngine.Driver.fetchData(e.QuoteFeed.PAGINATION,a.engine,i,p(this,i))},e.ChartEngine.Driver.prototype.barsToFetch=function(t){var i,a;return e.isValidNumber(this.tickMultiplier)||(this.tickMultiplier=2),i=this.stx.layout.interval,a=t.stx.layout.periodicity,"month"!=i&&"week"!=i||this.stx.dontRoll||(a*="week"==i?7:30),t.stx.chart.maxTicks*a*this.tickMultiplier},e.ChartEngine.Driver.determineStartDate=function(t,e,i){return this.determineStartOrEndDate(t,e,i,!0)},e.ChartEngine.Driver.determineStartOrEndDate=function(t,e,i,a){return L.L1n(),a||t.fetchMaximumBars?t.startDate||e.previous(i):t.future?e.next(i):new Date},L.L1n(),e.ChartEngine.Driver.prototype.makeParams=function(t,i,a){var r,n,s,o,l,h,c,u;n=(r=this.stx).layout.interval,s=this.barsToFetch({stx:r}),"month"!=n&&"week"!=n||r.dontRoll||("d","a","y",n="day"),l=(o=this.getQuoteFeed({interval:n,symbol:t,symbolObject:i}))&&o.behavior,h=e.shallowClone(l)||{},L.b1n(),h.behavior=l,c=!1,u=[],a.market&&a.market.getSessionNames&&(u=a.market.getSessionNames()),r.extendedHours?r.extendedHours.filter?c=!0:(c=r.layout.extended,u=u.filter((function(t){return L.b1n(),t.enabled||r.layout.marketSessions[t.name]}))):u=u.filter((function(t){return L.b1n(),t.enabled}));for(var d=0;d<u.length;d++)u[d]=u[d].name;return e.extend(h,{stx:r,symbol:t,symbolObject:i,chart:a,interval:n,extended:c,period:1,ticks:s,additionalSessions:u,quoteDriverID:this.id},!0),h.symbolObject||(h.symbolObject={symbol:t}),isNaN(h.interval)||(h.period=parseInt(h.interval,10),h.interval=r.layout.timeUnit,h.interval||(h.interval="minute")),h},e.ChartEngine.Driver.prototype.newChart=function(t,i){var a,r,n,s,o,l,h,c,u,d,p;a=this.stx,r=t.symbol,n=a.layout.interval,s=a.layout.timeUnit,(o=t.chart).moreAvailable=null,o.upToDate=null,o.loadingMore=!1,o.attribution=null,l=this.makeParams(r,t.symbolObject,o),e.extend(l,t,!0),h=this.getQuoteFeed(l),c=l.behavior,(a.fetchMaximumBars[a.layout.aggregationType]||t.fetchMaximumBars)&&(!a.maxMasterDataSize||c.maximumTicks<a.maxMasterDataSize?l.ticks=c.maximumTicks:l.ticks=a.maxMasterDataSize,l.fetchMaximumBars=!0),this.loadingNewChart=!0,this.updatingChart=!1,l.originalState=e.shallowClone(l),d=this,p=l,c.prefetchAction&&c.prefetchAction("newChart"),u=function(o){var l,u,m,g;if(l=p.chart,u=o.quotes,m=!1,r==l.symbol&&n==a.layout.interval&&s==a.layout.timeUnit){for(var f in d.loadingNewChart=!1,o.error?h.engine.announceError(p.originalState,o):(u=d.cleanup(a,null,u,e.QuoteFeed.INITIAL,p),a.setMasterData(u,l,{noCleanupDates:!0}),l.endPoints={},l.endPoints.begin=u[0]?u[0].DT:p.startDate,l.endPoints.end=u[0]?u[u.length-1].DT:p.endDate,u?(l.moreAvailable=!1!==o.moreAvailable,l.upToDate=o.upToDate):(l.moreAvailable=!1,l.upToDate=!0),l.attribution=o.attribution,t.initializeChart&&a.initializeChart(),a.createDataSet(),m=!0),l.series)l.series[f].endPoints={},l.series[f].moreAvailable=null,l.series[f].upToDate=null;(g=l.masterData)&&g.length&&(p.startDate=g[0].DT,p.endDate=g[g.length-1].DT),c.callback&&c.callback(p),d.loadDependents(p,(function(){L.b1n(),m&&!p.nodraw&&d.stx.home(),i&&i(o.error),d.stx.dispatch("newChart",{stx:d.stx,symbol:d.stx.chart.symbol,symbolObject:d.stx.chart.symbolObject,moreAvailable:d.stx.chart.moreAvailable,upToDate:d.stx.chart.upToDate,quoteDriver:d}),d.resetRefreshInterval(c.refreshInterval,c)}),e.QuoteFeed.INITIAL)}else i&&i("orphaned")},this.stx.isEquationChart(l.symbol)?e.fetchEquationChart(l,u):h&&e.ChartEngine.Driver.fetchData(e.QuoteFeed.INITIAL,h.engine,l,u)},e.QuoteFeed.INITIAL=1,e.QuoteFeed.UPDATE=2,e.QuoteFeed.PAGINATION=3,e.QuoteFeed.SERIES=4,e.ChartEngine.Driver.fetchData=function(t,i,a,r){if(!a.symbol)return r({});i.v2QuoteFeed?"function"!=typeof i.subscribe?e.ChartEngine.Driver.fetchDataInContext(t,i,a,r):e.ChartEngine.Driver.fetchDataInContext(t,i,a,function(t){t.error||this.checkSubscriptions(a.stx),r(t)}.bind(i)):(a.stx.convertToDataZone(a.startDate),a.stx.convertToDataZone(a.endDate),i.fetch(a,r))},e.ChartEngine.Driver.fetchDataInContext=function(t,i,a,r){var n,s,o,l,h,c,u,d,p;if("f","u","nc","tion",(h=a.stx).chart.market.newIterator)switch(t===e.QuoteFeed.SERIES&&(a.series=!0,t=e.QuoteFeed.INITIAL,a.endDate&&!a.startDate||a.future?t=e.QuoteFeed.PAGINATION:a.startDate&&!a.endDate&&(t=e.QuoteFeed.UPDATE)),c=Math.min(a.ticks,a.maximumTicks),i.maxTicks&&(c=Math.min(c,i.maxTicks)),u=a.symbolObject.masterSymbol||a.symbol,t){case e.QuoteFeed.UPDATE:if(h.isHistoricalModeSet)return void(h.quoteDriver.updatingChart=!1);a.startDate?d=a.startDate:(d=new Date).setHours(0,0,0,0),"function"==typeof i.fetchUpdateData&&i.fetchUpdateData(u,h.convertToDataZone(d),a,r);break;case e.QuoteFeed.INITIAL:"ti","c","k",n={begin:l=a.endDate||new Date,interval:a.interval,periodicity:"tick"==a.interval?h.chart.xAxis.futureTicksInterval:a.period,outZone:h.dataZone},s=h.chart.market.newIterator(n),o=e.ChartEngine.Driver.determineStartDate(a,s,c),a.endDate&&(l=a.endDate),"function"==typeof i.fetchInitialData&&i.fetchInitialData(u,o,h.convertToDataZone(l),a,r);break;case e.QuoteFeed.PAGINATION:if(n={begin:a.endDate||a.startDate,interval:a.interval,periodicity:"tick"==a.interval?h.chart.xAxis.futureTicksInterval:a.period,outZone:h.dataZone},s=h.chart.market.newIterator(n),p=e.ChartEngine.Driver.determineStartOrEndDate(a,s,c,!a.future),o=a.startDate||p,l=a.endDate||p,a.startDate?a.stx.convertToDataZone(o):a.stx.convertToDataZone(l),"function"===R(i.fetchPaginationData)){if(h.maxMasterDataSize&&h.maxMasterDataSize<=h.masterData.length)return;i.fetchPaginationData(u,o,l,a,(function(t){l>=Date.now()&&(h.isHistoricalModeSet=!1),r&&r(t)}))}break;default:console.error("Illegal fetchData constant")}else console.error("quoteFeed feature requires first activating market feature.")}},v=function(t){var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).ChartEngine.prototype.addSeries=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w;function T(t){return function(e){var r,n;e.error||(r=e.quotes,n=i.fillGaps,y.cleanupGaps||(n=!1),r=y.doCleanupGaps(r,y.chart,{cleanupGaps:n}),y.updateChartData(r,y.chart,{secondarySeries:c,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),u.loading=!1,u.moreAvailable=e.moreAvailable,u.upToDate=e.upToDate,k(y,u)),null===i.action||m.length||y.dispatch(v?"symbolImport":"symbolChange",{stx:y,symbol:t.symbol,symbolObject:t.symbolObject,action:i.action,id:u.id,parameters:i}),a&&a.call(y,e.error,u)}}if(r="pe",r+="rc",r+="ent",n="dis",n+="p",n+="lay",s="add-",s+="seri",s+="es",o="addSer",o+="ies",l=this.runPrepend(o,arguments))return l;function k(a,r){var n,s,o,l;if(n=i.renderer||"Lines",s=i.name||t,!i.yAxis||i.yAxis instanceof e.ChartEngine.YAxis||v||(i.yAxis.name=s),i.renderer||i.name||i.color||i.chartType){if(!(o=a.getSeriesRenderer(s))){if(l={name:s,overChart:!1!==i.overChart,useChartLegend:!0,highlightable:i.highlightable,dependentOf:i.dependentOf},i.chartType?(l=e.extend({panel:i.panel,yAxis:i.yAxis},l),o=e.Renderer.produce(i.chartType,l)):(e.ensureDefaults(i,{name:l.name,overChart:!1!==i.overChart,useChartLegend:!0}),o=new e.Renderer[n]({params:i})),!o)return;a.setSeriesRenderer(o)}o.attachSeries(t,i),!1!==i.loadData&&o.ready(),a.layout.symbols=a.getSymbols({"include-parameters":!0,"exclude-studies":!0}),L.L1n(),a.changeOccurred("layout")}}return h=t||null,c=t,t||(t=e.uniqueID()),i&&!0===i.panel&&(i.panel=t),(u={parameters:i?e.clone(i):{},yValueCache:[],display:h,id:t,loading:!i||!1!==i.loadData}).parameters.yAxis=i&&i.yAxis,(i=u.parameters).symbol&&(c=i.symbol),i.isComparison&&(i.shareYAxis=!0),!i.yAxis||i.yAxis instanceof e.ChartEngine.YAxis||(i.yAxis=new e.ChartEngine.YAxis(i.yAxis)),e.ensureDefaults(i,{chartName:this.chart.name,symbolObject:{symbol:c},panel:this.chart.panel.name,fillGaps:!1,action:s}),n in i&&(u.display=i.display),d=this.charts[i.chartName],p=i.symbolObject,c=i.symbol=p.symbol,u.display||(u.display=c||i.field),u.endPoints={},i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),i.isComparison&&void 0===i.gapDisplayStyle&&(i.gapDisplayStyle="transparent"),m=this.getSeries({symbolObject:p,chart:d,includeMaster:!0}),g=i.panel,this.panels[g]?i.yAxis||i.shareYAxis||(i.yAxis=new e.ChartEngine.YAxis({name:t,position:"none"})):((f=i.yAxis||new e.ChartEngine.YAxis).name=t,this.createPanel(t,g,null,null,f),this.preferences.dragging&&this.preferences.dragging.series||(i.highlightable=!1)),d.series[t]=u,y=this,v=this.currentlyImporting,!i.isComparison||!d.forcePercentComparison||i.panel!=d.panel.name||i.yAxis&&i.yAxis!=d.yAxis||this.setChartScale(r),(x=d.masterData)||(x=d.masterData=this.masterData=[]),b=x.length,i.data&&!i.data.useDefaultQuoteFeed?T({symbol:c,symbolObject:p,action:i.action})({quotes:i.data}):m.length?(u.endPoints=m[0].endPoints,k(this),a&&setTimeout((function(){L.b1n(),a.call(y,null,u)}),0)):this.quoteDriver&&!1!==i.loadData?(C=(S=this.quoteDriver).makeParams(c,p,d),b&&(C.startDate=x[0].DT,C.endDate=this.isHistoricalMode()?x[x.length-1].DT:new Date),C.stx.isEquationChart(C.symbol)?e.fetchEquationChart(C,T(C)):(w=S.getQuoteFeed(C))&&e.ChartEngine.Driver.fetchData(4,w.engine,C,T(C))):(k(this),a&&a.call(this,null,u)),this.runAppend("addSeries",arguments),u},e.ChartEngine.prototype.getSeries=function(t){var i,a,r,n,s;for(var o in a=(i=t.chart?t.chart:this.chart).series,L.L1n(),(r=t.symbolObject)||(r={symbol:t.symbol}),n=[],a)s=a[o],e.symbolEqual(r,s.parameters.symbolObject)&&n.push(s);return t.includeMaster&&e.symbolEqual(r,i.symbolObject)&&n.push({}),n},e.ChartEngine.prototype.modifySeries=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if(r="modify",r+="Series",!this.runPrepend("modifySeries",arguments)&&i&&("string"==typeof t?(s=t,n=(o=i.chartName?this.charts[i.chartName]:this.chart).series[s]):(s=(n=t).id,o=this.charts[n.parameters.chartName]),n)){for(var x in e.extend(n.parameters,i),l=n.parameters,o.seriesRenderers){u=(c=o.seriesRenderers[x]).params,d=c.seriesParams;for(var b=0;b<d.length;++b)if(p=d[b],g=(m=this.panels[p.panel])&&m.yAxis.name,p.id===n.id){!0===l.panel&&(l.panel=l.dependentOf||l.name),u.panel=l.panel,i.yAxis&&(u.yAxis=i.yAxis),l.panel!=p.panel&&u.name==g?this.electNewPanelOwner(p.panel):(f=this.getYAxisByName(l.panel,u.name))&&l.yAxis&&f.name!==l.yAxis.name&&(f.name=this.electNewYAxisOwner(f)),l.field||(l.field=null),c.attachSeries(s,e.ensureDefaults(l,p)),l.field||(l.field=l.subField),delete l.subField,!l.isComparison||!o.forcePercentComparison||l.panel!=o.panel.name||n.parameters.yAxis&&l.yAxis.name!=o.yAxis.name||this.setChartScale("percent"),h=c;break}}if(this.changeOccurred("layout"),e.getFn("Drawing.updateSource")(this,n.parameters.symbol||s,null,n.parameters.panel),this.runAppend(r,arguments),!0!==a){y=h.getDependents(this);for(var S=0;S<y.length;S++)this.modifySeries(y[S].params.name,{panel:h.params.panel,yAxis:n.parameters.yAxis},!0);(v=o.seriesRenderers[h.params.dependentOf])&&(v.params.yAxis==n.parameters.yAxis&&v.params.panel==h.params.panel||this.modifySeries(h.params.dependentOf,{panel:h.params.panel,yAxis:n.parameters.yAxis},!0))}return this.draw(),n}},e.ChartEngine.prototype.deleteSeries=function(t,e,i){var a,r,n,s,o,l,h,c;a="sy",a+="mbolImp",a+="or",a+="t",this.runPrepend("deleteSeries",arguments)||(i=i||{},L.b1n(),r=i.action?i.action:"remove-series","object"===R(t)?(n=t.id,e=e||this.charts[t.parameters.chartName]):(n=t,e=e||this.chart),(s=e.series[n])&&(o=s.parameters.loadData,l=s.parameters.symbolObject,delete e.series[n],h=this.getSeries({symbolObject:l,includeMaster:!0}),!1===o&&h.push(n),h.length||this.cleanMasterData(l,e),(c=this.panels[s.parameters.panel])&&this.checkForEmptyPanel(c),this.createDataSet(),h.length||this.dispatch(this.currentlyImporting?a:"symbolChange",{stx:this,symbol:l.symbol,symbolObject:l,id:n,action:r}),this.quoteDriver&&this.quoteDriver.updateSubscriptions(),this.runAppend("deleteSeries",arguments)))},e.ChartEngine.prototype.removeSeries=function(t,e){var i,a,r,n,s,o;if(!this.runPrepend("removeSeries",arguments)){for(var l in a=!1,"object"===R(t)?(i=t.id,e=e||this.charts[t.parameters.chartName]):(i=t,e=e||this.chart),e.seriesRenderers){r=e.seriesRenderers[l],s=(n=this.panels[r.params.panel])&&n.yAxis.name;for(var h=r.seriesParams.length-1;h>=0;h--)r.seriesParams[h].id===i&&(r.removeSeries(i),r.seriesParams.length<1&&(this.removeSeriesRenderer(r),r.params.name==s?this.electNewPanelOwner(r.params.panel):this.checkForEmptyPanel(r.params.panel)||(o=this.getYAxisByName(n,r.params.name))&&(o.name=o.studies[0]||o.renderers[1])),a=!0)}a||this.deleteSeries(i,e),this.resetDynamicYAxis(),this.draw(),this.resizeChart(),this.runAppend("removeSeries",arguments)}},e.Comparison=e.Comparison||function(){},e.Comparison.initialPrice=100,e.Comparison.getInitialPrice=function(t){var i,a,r;if("n","u","m","ber",t.initialComparisonPrice)return t.initialComparisonPrice;if(t.initialComparisonPrice=100,"number"==R(i=e.Comparison.initialPrice)&&(t.initialComparisonPrice=i),"string"==typeof i&&(t.series[i]||""===i)){a="Close",t.defaultPlotField&&(t.highLowBars||(a=t.defaultPlotField));for(var n=t.dataSet.length-t.scroll;n<t.dataSet.length;n++)if(r=t.dataSet[n]){if(r[i]&&r[i][a]){t.initialComparisonPrice=r[i][a];break}if(""===i&&r[a]){t.initialComparisonPrice=r[a];break}}}return t.initialComparisonPrice},e.Comparison.priceToPercent=function(t,i,a){var r;return L.b1n(),r=e.Comparison.baseline||a,Math.round((a-r)/r*100*1e4)/1e4},e.Comparison.percentToPrice=function(t,i,a){var r;return r=e.Comparison.baseline||1,L.V6c(67),L.w6c(a,1,100,r)},e.Comparison.priceToRelative=function(t,i,a){var r,n;return r=e.Comparison.baseline||a,L.L1n(),n=e.Comparison.getInitialPrice(i),L.V6c(68),L.r6c(a,r,n)},e.Comparison.relativeToPrice=function(t,i,a){var r,n;return r=e.Comparison.baseline||1,L.b1n(),n=e.Comparison.getInitialPrice(i),L.T6c(68),L.w6c(a,n,r)},L.b1n(),e.Comparison.createComparisonSegmentInner=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A=L;for(r in"Hig","h","C","lo","se",a=[],i.series)(o=i.series[r].parameters).isComparison&&a.push(o.symbol);for(var M in l=["Close","Open","High","Low","iqPrevClose"],h=t.chart.highLowBars,i.defaultPlotField&&!h&&l.unshift(i.defaultPlotField),A.T6c(1),c=l[A.w6c("0",1)],u=t.layout.studies)if(d=u[M],n=t.panels[d.panel],s=d.getYAxis(t),n&&n.yAxis==s){for(r in d.outputMap)l.push(r);for(var P=0;P<=2;P++)"_hi","s","t",l.push(d.name+"_hist"+(P||""));d.referenceOutput&&l.push(d.referenceOutput+" "+d.name)}for(var F in t.plugins)if((p=t.plugins[F]).transformOutputs)for(r in p.transformOutputs)l.push(r);A.b1n(),i.initialComparisonPrice=null,i.dataSegment=[],m=null,g=i.dataSet.length-i.scroll-1,t.startComparisonsAtFirstVisibleBar&&(g+=1),f=i.maxTicks+3;for(var _=0;_<=f;_++){if(_==f&&(_=-1),A.V6c(0),(y=A.r6c(_,g))<i.dataSet.length&&y>=0){if(x=(v=i.dataSet[y])[c],!m){if(0===x||null===x){if(_<0)break;continue}m=e.clone(v)}for(v.transform||(v.transform={cache:{},DT:v.DT,Date:v.Date}),!e.Comparison.baseline&&x&&(m=e.clone(v)),e.Comparison.baseline=m[c],b=0;b<l.length;b++)(v[r=l[b]]||0===v[r])&&(v.transform[r]=i.transformFunc(t,i,v[r]));for(b=0;b<a.length;b++)if(r=a[b],S=i.series[r],-1==_&&S&&S.parameters.isComparison)delete v.transform[r];else{C=v[r];for(var R=0;C&&R<l.length;R++)((w=C[l[R]])||0===w)&&((T=m[r]&&m[r][l[0]])||0===T||(m[r]||(m[r]={}),m[r][l[R]]=T=w*e.Comparison.baseline/v[c]),0!==T&&(k=e.Comparison.baseline||1,A.V6c(69),D=A.r6c(k,T,w),v.transform[r]||(v.transform[r]={}),v.transform[r][l[R]]=i.transformFunc(t,i,D)))}i.dataSegment.push(v)}else y<0&&i.dataSegment.push(null);if(_<0)break}},e.Comparison.priceFormat=function(t,e,i){var a,r,n=L;return null==i||isNaN(i)?"":(a=e.yAxis.priceTick,(r=t.internationalizer)?a>=5?(n.V6c(6),i=r.percent.format(n.w6c(100,i))):a>=.5?(n.V6c(6),i=r.percent1.format(n.w6c(100,i))):a>=.05?(n.V6c(6),i=r.percent2.format(n.r6c(100,i))):a>=.005?(n.T6c(6),i=r.percent3.format(n.r6c(100,i))):(n.T6c(6),i=r.percent4.format(n.r6c(100,i))):i=a>=5?i.toFixed(0)+"%":a>=.5?i.toFixed(1)+"%":a>=.05?i.toFixed(2)+"%":a>=.005?i.toFixed(3)+"%":i.toFixed(4)+"%",0===parseFloat(i)&&"-"==i.charAt(0)&&(i=i.substring(1)),i)},e.ChartEngine.prototype.setComparison=function(t,i,a){var r,n;if("p","e","rc","ent",i||(i=this.chart),"string"==typeof i&&(i=this.charts[i]),L.b1n(),(a||""===a)&&(e.Comparison.initialPrice=a),!0===t){if("percen","t",i.isComparison)return;t="percent"}switch(this.resetDynamicYAxis(),n=(r=i.panel.yAxis).priceFormatter==e.Comparison.priceFormat,t){case"relative":"da","ta","Segme","nt",this.setTransform(i,e.Comparison.priceToRelative,e.Comparison.relativeToPrice),n&&(r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:null,r.originalPriceFormatter=null),r.whichSet="dataSegment",i.isComparison=!0;break;case"percent":this.setTransform(i,e.Comparison.priceToPercent,e.Comparison.percentToPrice),n||(r.originalPriceFormatter={func:r.priceFormatter},r.priceFormatter=e.Comparison.priceFormat),r.whichSet="dataSegment",i.isComparison=!0;break;default:this.unsetTransform(i),n&&(r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:null,r.originalPriceFormatter=null),r.whichSet="dataSet",i.isComparison=!1}},e.ChartEngine.prototype.setChartScale=function(t){var i,a;i=this.chart,t||(t="linear"),(a={percent:!0,relative:!0})[t]?this.setComparison(t,i,e.Comparison.initialPrice):a[this.layout.chartScale]&&this.setComparison(!1,i),this.layout.chartScale=t,i.canvas&&this.draw(),this.changeOccurred("layout")}},x=function(t){var e,i;function a(t){if(L.b1n(),"undefined"!=typeof html2canvas)return i=html2canvas,t();if("html2canva","s.min.js","u","n","defined","undefined"!==("undefined"==typeof requirejs?"undefined":R(requirejs)))try{return"htm","l2canv","as.min.js",requirejs(["html2canvas.min.js"],(function(e){return i=e,t()}))}catch(t){console.warn("Require loading has failed, attempting to load html2canvas manually.")}e.loadScript(function(){var t,i;if(e.Share.html2canvasLocation)return e.Share.html2canvasLocation;t=document.getElementsByTagName("script"),L.b1n();for(var a=0;a<t.length;a++)if("shar","e.","js",(i=t[a]).src&&i.src.indexOf("share.js")>-1)return i.src.replace(/standard\/share\.js/,"")+"thirdparty/";return"js/thirdparty/"}()+"html2canvas.min.js",(function(){return i=html2canvas,t()}))}function r(t,e,a){var r,s,o,l,h,c,u;if(e||(e={}),[],"ciq-no-share",r=document.querySelector("body"),e.hide&&e.hide instanceof Array){s=e.hide.join(", "),o=document.querySelectorAll(s);for(var d=0;d<o.length;d++)o[d].classList.add("ciq-no-share")}for(r.classList.add("sharing"),l=t.chart.container.getElementsByTagName("svg"),L.L1n(),h=[],c=0;c<l.length;c++)u=l[c],h.push(u.innerHTML),n(u);i(t.chart.container,{allowTaint:!1,logging:!1,width:e.width||null,height:e.height||null,backgroundColor:e.background||null,useCORS:!0}).then((function(t){for(L.b1n(),"sha","ring",a&&a(null,e.data?t.toDataURL("image/png"):t),c=0;c<l.length;c++)l[c].innerHTML=h[c];r.classList.remove("sharing")})).catch((function(t){for("s","ha","ring",a&&a(t),c=0;c<l.length;c++)l[c].innerHTML=h[c];r.classList.remove("sharing")}))}function n(t){var e;if("text-alig","n",L.b1n(),"fo","nt-fam","il","y","f","ill-opacity","f","i","l","l",t.style)for(var i in e=getComputedStyle(t),["alignment-baseline","dominant-baseline","fill","fill-opacity","font-family","font-size","font-variant","font-weight","text-align","text-anchor"].forEach((function(i){!t.style[i]&&e[i]&&(t.style[i]=e[i])})),t.children)n(t.children[i])}(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Share=e.Share||function(){},e.Share.FullChart2PNG=function(t,e,n){if(t&&t.chart){if("undefined"==typeof html2canvas)return a((function(){return L.b1n(),r(t,e,n)}));i=html2canvas,r(t,e,n)}},e.Share.createImage=function(t,i,a){var r,n,s,o,l,h,c,u,d,p;r="i",r+="mage",r+="/",n="obj",n+="e",n+="ct",s=[].slice.call(arguments),a=s.pop(),null!==i&&R(i)==n||(i={widthPX:s[1],heightPX:s[2],imageType:s[3]}),o=i.widthPX,l=i.heightPX,h=i.imageType,c=t.chart.canvas.height,u=t.chart.canvas.width,t.chart.canvas.style.height&&(c=e.stripPX(t.chart.canvas.style.height),u=e.stripPX(t.chart.canvas.style.width)),o&&l?(c=l,u=o):l?u=t.chart.canvas.width*(c/t.chart.canvas.height):o&&(u=o,c=t.chart.canvas.height*(o/t.chart.canvas.width)),d=h?r+h:"image/png",(p=document.createElement("img")).onload=function(){L.b1n(),e.Share.FullChart2PNG(t,{image:this,width:u,height:c,hide:i.hide},(function(t,e){if(t)"Erro","r producing c","anvas"," snapshot: ",L.T6c(0),console.warn(L.r6c(t,"Error producing canvas snapshot: "));else try{a(e.toDataURL(d))}catch(t){"Safari devices do not handle CORS enabled images. Using the charts' ","canvas as a fallback.",console.warn("Safari devices do not handle CORS enabled images. Using the charts' canvas as a fallback."),a(p.src)}}))},p.src=t.chart.canvas.toDataURL(d)},e.Share.uploadImage=function(t,i,a,r){a||(a={}),L.b1n(),a.image=t,e.postAjax(i,JSON.stringify(a),(function(t,e){200==t?r(null,e):r(t,null)}))||r(0,null)},e.Share.shareChart=function(t,i,a){L.b1n(),e.Share.createImage(t,{},(function(r){var n,s,o,l,h;L.b1n(),n=e.uniqueID(),s="https://share.chartiq.com",L.T6c(14),o=L.r6c(s,"/upload/",n),i&&(i.host&&(s=i.host),i.path&&(o=s+i.path+"/"+n)),l=t.getStartDateOffset(),h={id:n,image:r,config:{layout:t.exportLayout(),drawings:t.exportDrawings(),xOffset:l,startDate:t.chart.dataSegment[l].Date,endDate:t.chart.dataSegment[t.chart.dataSegment.length-1].Date,id:n,symbol:t.chart.symbol}},e.Share.uploadImage(r,o,h,(function(t,i){null!==t?("error s","haring cha","rt: ",e.alert("error sharing chart: ",t)):(L.T6c(0),a(L.w6c(i,s)))}))}))}},b=function(t){var e;(e="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:t.CIQ).ChartEngine.prototype.setRange=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,E=L;function O(t){return t&&0===h?(r.scroll=w,l.setCandleWidth(T),l.layout.interval=k,l.layout.periodicity=D,l.layout.timeUnit=A,void(i&&i(t))):++h>10?(console.log("CIQ.ChartEngine.setRange(): Too many loads (10) from server. Stopping. Check periodicity logic."),void V()):void V()}function I(t,i,a,r,n,s){var o,l;return o=0,E.T6c(5),l=E.w6c(t,i),e.ChartEngine.isDailyInterval(a)?o="month"==a?l/e.MONTH/r:"week"==a?l/e.WEEK/r:l/e.DAY/r:isNaN(a)||("millisecond"==n?(E.V6c(70),o=E.w6c(r,a,l)):o="second"==n?l/e.SECOND/(r*a):l/e.MINUTE/(r*a)),Math.round(o)}if(E.L1n(),e.isEmpty(t)&&(t={dtLeft:arguments[0],dtRight:arguments[1],padding:arguments[2],chart:arguments[3]},i=arguments[4]),this.staticRange&&(t.goIntoPast=t.goIntoFuture=!0),t.chart||(t.chart=this.chart),void 0===t.padding&&(t.padding=0),a=!1,r=t.chart,n="string"==typeof t.dtLeft?new Date(t.dtLeft):t.dtLeft,s=new Date,t.dtRight&&(s="string"==typeof t.dtRight?new Date(t.dtRight):t.dtRight),n||(o=this.standardMarketIterator(s,null,r),n=o.previous(r.maxTicks),t.periodicity||(a=!0)),r.inflectionPoint=n,this.layout.range={dtLeft:n,dtRight:s},l=this,E.T6c(13),h=E.w6c("0",1645674816),this.quoteDriver){if(a)c=this.layout.interval,d=this.layout.timeUnit,u=this.layout.periodicity;else if(t.periodicity)c=(p=e.cleanPeriodicity(t.periodicity.period,t.periodicity.interval,t.periodicity.timeUnit)).interval,d=p.timeUnit,u=p.period;else if(m=s.getTime()-n.getTime(),this.autoPickCandleWidth.turnOn){v=0,v=this.autoPickCandleWidth.candleWidth?this.autoPickCandleWidth.candleWidth:this.chart.barsHaveWidth?5:2,x=r.width/v,c=(b=this.dynamicRangePeriodicityMap)[0].interval,E.T6c(30),u=E.r6c("1",1);for(var N=0;N<b.length;N++){if((C=m/b[N].rangeInMS)<x){b[N-1]?(c=b[N-1].interval,d=b[N-1].timeUnit,E.T6c(6),u=Math.ceil(E.w6c(x,S))):(c=b[N].interval,d=b[N].timeUnit,u=1);break}S=C}}else{g=this.staticRangePeriodicityMap,f=null;for(var H=0;H<g.length;H++)if(m/(y=g[H]).rangeInMS<1.001){f=y;break}c=f.interval,u=f.periodicity,d=f.timeUnit}w=this.chart.scroll,T=this.layout.candleWidth,k=this.layout.interval,D=this.layout.periodicity,A=this.layout.timeUnit,this.chart.scroll=this.chart.maxTicks=I(s.getTime(),n.getTime(),c,u,d,this.dontRoll),this.layout.candleWidth=this.chart.width/this.chart.maxTicks,M=this.needDifferentData({period:u,interval:c,timeUnit:d}),Object.keys(this.chart.endPoints).length&&(this.chart.endPoints.begin>n||this.chart.endPoints.end<s)&&(M=!0),!this.chart.masterData||!this.chart.masterData.length||M||t.forceLoad?(this.layout.interval=c,this.layout.periodicity=u,this.layout.timeUnit=d,this.layout.timeUnit||(e.ChartEngine.isDailyInterval(this.layout.interval)?this.layout.timeUnit=null:"second"==this.layout.interval?this.layout.timeUnit="second":"tick"!=this.layout.interval&&(this.layout.timeUnit="minute")),P={symbol:r.symbol,symbolObject:r.symbolObject,chart:r,nodraw:!0},"tick"==this.layout.interval&&(P.startDate=n,P.endDate=s),this.displayInitialized||(P.initializeChart=!0),"month"!=(F={symbol:r.symbol,symbolObject:r.symbolObject,interval:this.layout.interval}).interval&&"week"!=F.interval||this.dontRoll||(F.interval="day"),_=Math.max(this.quoteDriver.getQuoteFeed(F).behavior.bufferSize+50,200),o=this.standardMarketIterator(n,null,r),P.startDate=new Date(o.previous(_).getTime()),o=this.standardMarketIterator(s,null,r),P.endDate=new Date(o.next(_).getTime()),P.endDate<Date.now()&&(this.isHistoricalModeSet=!0),this.clearCurrentMarketData(this.chart),clearTimeout(this.streamParameters.timeout),this.quoteDriver.newChart(P,O)):(this.layout.interval==c&&this.layout.periodicity==u&&this.layout.timeUnit==d&&this.chart.dataSegment&&this.chart.dataSegment[0]&&this.chart.dataSegment[0].DT==r.inflectionPoint||(this.layout.interval=c,this.layout.periodicity=u,this.layout.timeUnit=d,this.createDataSet()),O())}else V();function V(e){var a,o,h,c,u,d,p,m,g,f,y,v,x,b,S,C;if("l","ayo","u","t","und","efi","ned","undefined"==R(e)&&(e=null),a=0,o=0,h=new Date,c=t.base,u=t.periodicity,d=l.layout,t.goIntoFuture&&(!r.masterData.length||n>r.masterData[r.masterData.length-1].DT)&&("g","a","p",p=r.masterData.length?r.masterData.pop():{DT:n},m=l.doCleanupGaps([p,{DT:s}],r,{cleanupGaps:"gap",noCleanupDates:!0}),l.setMasterData(r.masterData.concat(m),r,{noCleanupDates:!0}),l.createDataSet(null,null,{appending:!0})),f=(g=r.dataSet).length,g&&0!==f){if("day"===c&&u&&"day"===u.interval)a=f<(v=t.multiplier)?0:f-v,E.V6c(5),o=E.r6c(f,1);else if("today"===c&&g[f-1].DT.getDate()<h.getDate()){(x=new Date(g[f-1].DT.getTime())).getTime(),y=0;for(var w=f-1;w>=0;w--)if(g[w]&&g[w].DT.getDate()!=x.getDate()){x=new Date(+g[w+1].DT),E.T6c(0),y=E.w6c(1,w);break}a=y,E.V6c(5),o=E.w6c(f,1)}else"a","l","l",a="all"!=t.base&&(n.getTime()>=g[0].DT.getTime()||t.goIntoPast)?l.tickFromDate(n,r,null,!0):0,"all"!=t.base&&(s.getTime()<=g[f-1].DT.getTime()||t.goIntoFuture)?(o=l.tickFromDate(s,r))>f-1&&o--:(E.T6c(5),o=E.r6c(f,1));if(E.T6c(16),(b=E.r6c(1,o,a))<1)i&&i(e);else{for(var T in S=t.padding||0,o<f-1&&(S=0),C=(r.width-S)/b,l.setCandleWidth(C,r),E.T6c(71),r.scroll=E.w6c(f,1,b,o),l.micropixels=1,l.panels)l.calculateYAxisMargins(l.panels[T].yAxis);t.dontSaveRangeToLayout?delete d.range:(delete t.chart,delete d.setSpan,d.range=t),l.draw(),l.changeOccurred("layout"),i&&i(e)}}else i&&i(e)}},e.ChartEngine.prototype.setSpan=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w;function T(t){return t.setHours(0),L.V6c(30),t.setMinutes(L.w6c("0",0)),t.setSeconds(0),t.setMilliseconds(0),L.L1n(),t}if(a="w",a+="e",a+="e",a+="k",r="y",r+="e",r+="ar",n="yt",n+="d",s="a",s+="ll",o=arguments[0],l=arguments[1],h=arguments[2],c=arguments[3],"object"==R(t)?(o=t.period?t.period:t.multiplier?t.multiplier:1,l=t.interval?t.interval:t.base?t.base:t.span?t.span:t.period,h=t.padding,c=t.chart):(t={period:o,interval:l,padding:h,chart:c},i=arguments[5]),c||(c=this.chart),u=c.market,(l=l.toLowerCase())==s)return t.dontSaveRangeToLayout=!0,void this.displayAll(t,i);function k(t,e){if(!v)return t;e?t.setHours(t.getHours()+7):(t.setHours(t.getHours()-7),u.isMarketDate(t)||t.setDate(t.getDate()-2));for(var i=1;590803555!==L.m3T(i.toString(),i.toString().length,6939);i++)return t;return L.m3T(2..toString(),2..toString().length,50196),t}p=l,m=1,"today"==l?p="day":"year"==l&&(p="month",m=12),g=e.shallowClone(t),y=(f={begin:u.marketZoneNow(),interval:p,period:m}).begin,v=e.Market.Symbology.isForexSymbol(c.symbol),l===n?((y=T(y)).setMonth(0),y.setDate(1)):"month"===l?(y=T(new Date)).setMonth(y.getMonth()-o):l===r?(y=T(new Date)).setFullYear(y.getFullYear()-o):l===a?(y=T(new Date)).setDate(y.getDate()-7*o):"day"===l&&1==o&&u.isMarketDay()?(x=y.getHours(),b=y.getMinutes(),S=y.getSeconds(),C=y.getMilliseconds(),(y=(d=u.newIterator(f)).previous()).setHours(x,b,S,C),y=u._convertFromMarketTZ(y)):"today"===l?(f.begin=k(y,!0),d=u.newIterator(f),(u.isOpen()||u.getPreviousOpen().getDate()==y.getDate())&&d.next(),k(y=d.previous()),g.goIntoFuture=!0,g.dtRight=new Date(+y),g.dtRight.setDate(y.getDate()+1),g.dtRight=u._convertFromMarketTZ(g.dtRight),v||(y.setHours(d.market.zopen_hour),y.setMinutes(d.market.zopen_minute),y.setSeconds(0)),y=u._convertFromMarketTZ(y)):("day"==l&&(f.begin=k(y,!0)),d=u.newIterator(f),1==o&&o++,L.T6c(5),y=d.previous(L.r6c(o,1)),"day"==l&&(y=u._convertFromMarketTZ(k(y)))),g.dtLeft=y,g.maintainPeriodicity&&(g.periodicity={},g.periodicity.interval=this.layout.interval,g.periodicity.period=this.layout.periodicity),c.spanLock=!1,g.dontSaveRangeToLayout=!0,w=this,this.setRange(g,(function(e){w.layout.setSpan=t,w.changeOccurred("layout"),"today"==l&&(c.spanLock=!0),i&&i(e)}))},e.ChartEngine.prototype.getSpanCandleWidth=function(t){var e,i,a,r,n,s,o=L;if("Y","T","D",t&&t.base&&t.multiplier){if(e=parseFloat(t.multiplier),i=t.base,a=new Date,r=new Date,"year"==i)r.setFullYear(r.getFullYear()-e);else if("month"==i)r.setMonth(r.getMonth()-e);else if("day"==i)r.setDate(r.getDate()-e);else if("week"==i){529579929,-1237732528,n=2;for(var l=1;529579929!==o.m3T(l.toString(),l.toString().length,12417);l++)r.setDate(r.getDate()-7*e),n+=2;-1237732528!==o.D3T(n.toString(),n.toString().length,35258)&&r.setDate(r.getDate()+2%e)}else"YTD"==i&&(r.setMonth(0),r.setDate(1));return s=(a.getTime()-r.getTime())/1e3/60/60/24,o.V6c(72),s=o.w6c(s,5,0,"7"),this.chart.width/s}},L.b1n(),e.ChartEngine.prototype.displayAll=function(t,i){var a,r,n,s;function o(t){L.b1n(),t||r.quoteDriver.loadAll(a,l)}function l(){var n;a.masterData&&a.masterData.length&&((n=e.clone(t)).dtLeft=a.masterData[0].DT,n.dtRight=a.masterData[a.masterData.length-1].DT,n.periodicity={},n.periodicity.interval=r.layout.interval,n.periodicity.period=r.layout.periodicity,n.periodicity.timeUnit=r.layout.timeUnit,r.setRange(n,(function(e){for(var a in r.layout.setSpan={base:t.base,multiplier:t.multiplier},r.changeOccurred("layout"),r.panels)r.calculateYAxisMargins(r.panels[a].yAxis);r.draw(),i&&i(e)})))}a=this.chart,t&&t.chart&&(a=t.chart),r=this,this.quoteDriver?(n=t.maintainPeriodicity?{period:this.layout.periodicity,interval:this.layout.interval,timeUnit:this.layout.timeUnit}:{period:1,interval:"month",timeUnit:null},n=t.periodicity?t.periodicity:n,n=e.cleanPeriodicity(n.period,n.interval,n.timeUnit),s=this.needDifferentData(n),this.layout.periodicity=n.period,this.layout.interval=n.interval,this.layout.timeUnit=n.timeUnit,t.forceLoad||s?(this.clearCurrentMarketData(this.chart),this.quoteDriver.newChart({noDraw:!0,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,chart:this.chart,initializeChart:!0,fetchMaximumBars:!0},o)):a.moreAvailable||!a.upToDate?o():(this.createDataSet(),l())):l()}},S=function(t){var e;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,L.L1n(),e.ChartEngine.prototype.importLayout=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_;if(t){for(var E in a=this,r=[],"object"!==R(i)&&(i={managePeriodicity:arguments[1],preserveTicksAndCandleWidth:arguments[2]}),n=this.layout,s=e.shallowClone(n),o=i.managePeriodicity,l=i.cb,h=i.seriesCB,c=i.noDataLoad,u=i.preserveTicksAndCandleWidth,d=null,L.L1n(),this.exportDrawings&&(d=this.exportDrawings(),this.abortDrawings()),this.currentlyImporting=!0,n.studies)p=n.studies[E],e.getFn("Studies.removeStudy")(this,p);for(y in this.overlays={},m=e.shallowClone(this.panels),this.panels={},g=e.clone(t),n.periodicity=s.periodicity,n.interval=s.interval,n.timeUnit=s.timeUnit,n.setSpan=s.setSpan,n.range=s.range,u?n.candleWidth=s.candleWidth:n.candleWidth||(n.candleWidth=8),this.setCandleWidth(n.candleWidth),n.flipped&&this.flipChart(n.flipped),b=function(t,e){return t.index<e.index?-1:1},f=g.panels)"index"in f[y]||(b=null),(v=f[y]).name=y,r.push(v);if(n.panels={},S=null,r.length>0){b&&r.sort(b);for(var O=0;O<r.length;++O)x=(v=r[O]).yAxis?new e.ChartEngine.YAxis(v.yAxis):null,this.stackPanel(v.display,v.name,v.percent,v.chartName,x),v.soloing&&(S=this.panels[v.name])}for(var I in e.isEmpty(f)&&this.stackPanel("chart","chart",1,"chart"),this.resizeCanvas(),m)if(C=m[I],w=this.panels[I]){for(var N in this.container.removeChild(w.holder),C.handle&&this.container.removeChild(C.handle),{holder:!0,subholder:!0,display:!0,icons:!0})w[N]=C[N];this.configurePanelControls(w),C.chart.panel==C&&(C.chart.panel=w)}else this.privateDeletePanel(C);for(var H in this.chart.panel=this.panels.chart,z(this.panels),e.dataBindSafeAssignment(n,e.clone(g)),T=e.clone(n.studies),delete n.studies,T)k=T[H],e.getFn("Studies.addStudy")(this,k.type,k.inputs,k.outputs,k.parameters,k.panel);if(this.extendedHours&&this.extendedHours.prepare(n.extended,n.marketSessions),void 0===n.chartType&&(n.chartType="line"),this.setMainSeriesRenderer(),S&&this.panelSolo(S),this.adjustPanelPositions(),z(this.panels),this.storePanels(),!c){if(g.symbols&&g.symbols.length)return D={chart:this.chart},!u&&o&&g.range&&Object.keys(g.range).length?D.range=g.range:!u&&o&&g.setSpan&&Object.keys(g.setSpan).length?D.span=g.setSpan:o&&g.interval?D.periodicity={interval:g.interval,period:g.periodicity,timeUnit:g.timeUnit}:D.periodicity={interval:s.interval,period:s.periodicity,timeUnit:s.timeUnit},A=g.symbols[0].symbolObject||g.symbols[0].symbol,void this.loadChart(A,D,(function(t){var i;if(L.L1n(),!t){for(var r,n=1;n<g.symbols.length&&a.addSeries;++n)(r=g.symbols[n]).parameters||(r.parameters={}),i=e.clone(r.parameters),this.panels[i.panel]?a.addSeries(r.id,i,B):console.warn('Warning: Series "'+r.id+'" could not be imported due to a missing corresponding panel "'+i.panel+'"');g.chartScale&&a.setChartScale(g.chartScale)}V(),l&&l.apply(null,arguments)}));if(o){if(!u&&this.setRange){if((M=g.range)&&Object.keys(M).length&&this.chart.symbol)return void this.setRange(M,(function(){V(),L.b1n(),l&&l()}));if(g.setSpan&&Object.keys(g.setSpan).length&&this.chart.symbol)return void this.setSpan(g.setSpan,(function(){V(),L.b1n(),l&&l()}))}return P=g.interval,F=g.periodicity,_=g.timeUnit,isNaN(F)&&(F=1),P||(P="day"),void this.setPeriodicity({period:F,interval:P,timeUnit:_},(function(){V(),l&&l()}))}}o&&(n.periodicity=g.periodicity,n.interval=g.interval,n.timeUnit=g.timeUnit,n.setSpan=g.setSpan),this.createDataSet(),u||this.home(),V(),l&&l()}else i.cb&&i.cb();function V(){var t,e,i;for(var r in"lay","o","u","t",d&&a.importDrawings(d),L.L1n(),a.currentlyImporting=!1,i=[],a.chart.series){if("stu","dy",!a.removeSeries)break;"study"==(e=a.chart.series[r]).parameters.bucket&&(t=!0,a.removeSeries(e),i.push(e))}for(var n=0;n<i.length;n++)e=i[n],a.addSeries(e.id,e.parameters,s);function s(){a.createDataSet(),z(a.panels),a.calculateYAxisPositions(),a.draw()}t||a.draw(),a.updateListeners("layout"),a.changeOccurred("layout")}function z(t){var e;function i(e,i){var a,r,n,o;if(e[i]&&e[i].length&&(a=t[e.name])){L.L1n(),r=a[i],n=new Array(r.length);for(var l=0;l<r.length;l++)(o=e[i].indexOf(r[l].name))>-1?n[o]=r[l]:n.push(r[l]);n.length&&(a[i]=n.filter(s))}}for(var n=0;n<r.length;n++)"yaxis","RHS",i(e=r[n],"yaxisLHS"),i(e,"yaxisRHS");function s(t){return L.L1n(),!!t}a.chart.yAxis=a.chart.panel.yAxis}function B(){a.calculateYAxisPositions(),L.L1n(),z(a.panels),h&&h()}},e.ChartEngine.prototype.exportLayout=function(t){var i,a,r,n,s,o;function l(t){var e;e=[],L.L1n();for(var i=0;i<t.length;i++)e.push(t[i].name);return e}for(var h in i={},this.layout)"pa","nels","s","t","udies","studies"!=h&&"panels"!=h&&"drawing"!=h?i[h]=e.clone(this.layout[h]):"studies"==h?i.studies={}:"panels"==h&&(i.panels={});for(var c in L.V6c(29),a=L.w6c("0",0),this.panels)!1!==(r=this.panels[c]).exportable&&((n=i.panels[c]={}).percent=r.percent,n.display=r.display,n.chartName=r.chart.name,n.soloing=r.soloing,n.index=a++,n.yAxis={name:r.yAxis.name,position:r.yAxis.position},r.yaxisLHS&&(n.yaxisLHS=l(r.yaxisLHS)),r.yaxisRHS&&(n.yaxisRHS=l(r.yaxisRHS)));for(var u in this.layout.studies)s=i.studies[u]={},o=this.layout.studies[u],s.type=o.type,s.inputs=e.clone(o.inputs),s.outputs=e.clone(o.outputs),s.panel=o.panel,s.parameters=e.clone(o.parameters);return t?i.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!0,"exclude-generated":!0}):delete i.symbols,i},e.ChartEngine.prototype.importPreferences=function(t){e.extend(this.preferences,t),L.b1n(),t.timeZone&&this.setTimeZone(this.dataZone,t.timeZone),t.language&&e.I18N&&e.I18N.localize(this,t.language),this.changeOccurred("preferences")},e.ChartEngine.prototype.exportPreferences=function(){return L.L1n(),this.preferences}},C=function(t){var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).ChartEngine&&(e.ChartEngine.prototype.rightClickOverlay=function(t,e){var i,a;i="rightClick",i+="O",i+="verla",i+="y",this.runPrepend("rightClickOverlay",arguments)||((a=this.overlays[t]).editFunction?a.editFunction(e):this.removeOverlay(t),this.runAppend(i,arguments))},e.ChartEngine.prototype.addOverlay=function(t){this.runPrepend("addOverlay",arguments)||(this.overlays[t.name]=t,L.b1n(),this.runAppend("addOverlay",arguments))},e.ChartEngine.prototype.removeOverlay=function(t){var i,a,r,n;if(i="re",i+="moveO",i+="verl",i+="ay",!this.runPrepend("removeOverlay",arguments)){for(var s in a=this.overlays[t],this.overlays){r=this.overlays[s],n=["Field"],e.Studies&&(n=e.Studies.getFieldInputs(r));for(var o=0;o<n.length;o++)a.outputMap[r.inputs[n[o]]]&&this.removeOverlay(r.name)}a&&(this.cleanupRemovedStudy(a),this.panels[a.panel],delete this.overlays[t],this.checkForEmptyPanel(a.panel)),this.currentlyImporting||(this.displaySticky(),this.createDataSet(),this.changeOccurred("layout")),this.resetDynamicYAxis(),L.b1n(),this.runAppend(i,arguments)}},e.ChartEngine.prototype.cleanupRemovedStudy=function(t){if(t){for(var i in t.study.removeFN&&t.study.removeFN(this,t),this.plugins)i.indexOf("{"+t.id+"}")>-1&&delete this.plugins[i];this.layout.studies&&delete this.layout.studies[t.name],delete this.overlays[t.name],e.Studies&&e.Studies.removeStudySymbols(t,this),this.quoteDriver&&this.quoteDriver.updateSubscriptions()}}),e.Studies=e.Studies||function(){},e.Studies.DEFAULT_INPUTS={Period:14},e.Studies.DEFAULT_OUTPUTS={Result:"auto"},e.Studies.sortForProcessing=function(t){var e,i;return e=[],(i=t.layout.studies)&&function e(i,a){L.b1n(),i.forEach((function(i){var r;-1==a.indexOf(i)&&((r=i.getDependents(t)).length&&e(r,a),a.unshift(i))}))}(Object.values(i),e),e},e.Studies.StudyDescriptor=function(t,i,a,r,n,s){var o;this.name=t,this.type=i,this.panel=a,this.inputs=r,this.outputs=n,this.parameters=s,this.outputMap={},this.min=null,this.max=null,this.startFrom=0,this.subField="Close",o=e.Studies.studyLibrary[i],L.b1n(),o||("c","hart",o={},("chart"==a||!a&&s&&"chart"==s.chartName)&&(this.overlay=!0)),void 0===o.inputs&&(o.inputs=e.clone(e.Studies.DEFAULT_INPUTS)),void 0===o.outputs&&(o.outputs=e.clone(e.Studies.DEFAULT_OUTPUTS)),this.study=o,this.libraryEntry=o},e.Studies.StudyDescriptor.prototype.getYAxis=function(t){var e,i,a;return e=this.yAxis,this.parameters&&(i=this.parameters.yaxisDisplayValue),e||(a=t.panels[this.panel])&&(e=t.getYAxisByName(a,i)||t.getYAxisByName(a,this.name)||a.yAxis),e||(e=t.getYAxisByName(t.chart.panel,i)||t.chart.panel.yAxis),e},e.Studies.StudyDescriptor.prototype.getContext=function(t){return L.L1n(),t.chart.context},e.Studies.StudyDescriptor.prototype.getDependents=function(t,i){var a,r,n;for(var s in a=[],L.L1n(),t.layout.studies)if((r=t.layout.studies[s])!=this){n=e.Studies.getFieldInputs(r);for(var o=0;o<n.length;o++)if(r.inputs[n[o]].includes(this.name)){if(i&&r.parameters&&r.parameters.panelName)continue;a.push(r),a=a.concat(r.getDependents(t,i));break}}return a},e.Studies.StudyDescriptor.prototype.undraggable=function(t){var e;if(e=this.study.attributes){if(e.panelName&&e.panelName.hidden)return!0;if(e.yaxisDisplayValue&&e.yaxisDisplayValue.hidden)return!0}return!1},e.Studies.StudyDescriptor.prototype.appendFutureTicks=function(t,e){var i,a,r,n;if((i=t.chart.scrubbed).length){for(a=t.standardMarketIterator(i[i.length-1].DT),r=e.length-1;r>=0;r--){for(var s in n=e[r])if(n[s]||0===n[s]){r=-1;break}if(-1==r)break;e.pop()}for(r=0;r<e.length;r++)(n=e[r]).DT||(n.DT=a.next()),n.displayDate||t.setDisplayDate(n),n.futureTick=!0,i.push(n)}},e.Studies.generateID=function(t,i,a,r,n){var s,o,l,h,c,u=L;if(s=e.Studies.studyLibrary[i],u.V6c(14),o=u.r6c("‌",n||i,"‌"),s&&s.customRemoval)return o;if(!e.isEmpty(a)){for(var d in l=!0,a)"id"!=d&&"display"!=d&&"Shading"!=d&&"field"!=(h=a[d])&&(h=h.toString(),void 0!==e.Studies.prettify[h]&&(h=e.Studies.prettify[h]),l?(l=!1,o+=" ("):h&&(o+=","),o+=h);l||(o+=")")}if(r&&0===r.indexOf(o))return r;if(t.layout.studies&&t.layout.studies[o])for(var p=2;p<50;p++)if(u.V6c(14),c=u.r6c(o,"-",p),!t.layout.studies[c]){o=c;break}return o},e.Studies.DialogHelper=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M;function P(t,e){this.attributes[t]||(this.attributes[t]={}),L.b1n(),e&&(this.attributes[t].hidden=!0)}function F(t){return{name:t.name,heading:i.translateIf(t.label),defaultValue:t.defaults,value:t.value,type:"checkbox"}}function _(t){var e,a,r;e={},a=t.defaults,L.b1n(),r={name:t.name,heading:i.translateIf(t.label),defaultValue:a[0],value:t.value,options:e,type:"select"};for(var n=0;n<a.length;n++)e[a[n]]=i.translateIf(a[n]);return void 0!==t.color&&(r.defaultColor=i.defaultColor,r.color=t.color),r}function E(t){var e,a;if("a","l","ia",L.b1n(),"s","alias"==D)for(var r in e=1,i.panels){if(r==t)return a=e,L.b1n(),"Panel "+a.toString();e++}return t}for(var O in"un","d","efin","ed",i=this.stx=t.stx,a=this.sd=t.sd,this.name=a?a.type:t.name,this.signal=1,this.inputs=[],this.outputs=[],this.parameters=[],void 0===(r=this.libraryEntry=a?a.study:e.Studies.studyLibrary[t.name]).inputs&&(r.inputs=e.clone(e.Studies.DEFAULT_INPUTS)),"undefined"==R(r.outputs)&&(r.outputs=e.clone(e.Studies.DEFAULT_OUTPUTS)),s=(n=a&&i.panels[a.panel]?i.panels[a.panel]:i.chart.panel).chart,this.title=i.translateIf(r.name),this.attributes=r.attributes,this.attributes||(this.attributes={}),o=[],l=i.layout.studies,h=[],a&&(h=Array.prototype.concat(a,a.getDependents(i))),l)if(!(h.indexOf(l[O])>-1))for(var I in l[O].outputMap)o.push(I);for(var N in r.inputs)if("u","ndefin","ed",c={},this.inputs.push(c),c.name=N,c.heading=i.translateIf(N),u=r.inputs[N],a&&a.inputs&&"undefined"!=R(a.inputs[N])&&null!==a.inputs[N]?c.value=a.inputs[N]:c.value=r.inputs[N],c.defaultInput=r.inputs[N],this.attributes[N]||(this.attributes[N]=e.Studies.inputAttributeDefaultGenerator(c.defaultInput)),u.constructor==Number)c.type="number";else if(u.constructor==String)if(d=e.Studies.movingAverageHelper(i,c.defaultInput))"selec","t",c.type="select",c.defaultInput=d,(p=e.Studies.movingAverageHelper(i,c.value))||(p=c.value),c.value=p,c.options=e.Studies.movingAverageHelper(i,"options");else if("field"==u){m="o",m+="hlc",m+="/",m+="4",g="hlc",g+="c",g+="/4",f="h",f+="l/2",c.type="select",c.options={},y=["Open","High","Low","Close","Adj_Close",f,"hlc/3",g,m,s.defaultPlotField].concat(o);for(var H=0;H<y.length;H++)v=y[H],c.options[v]=i.translateIf(v);"field"==c.value&&(c.value="Close"),"field"==c.defaultInput&&(c.defaultInput="Close")}else"t","i","m","e",c.type="text","yyyy-mm-dd"==this.attributes[N].placeholder?c.type="date":"hh:mm:ss"==this.attributes[N].placeholder&&(c.type="time");else if(u.constructor==Boolean)"o","n","tru","e","che","c","kb","ox",c.type="checkbox",!0!==c.value&&"true"!=c.value&&"on"!=c.value||(c.value=!0);else if(u.constructor==Array){c.type="select",c.options={};for(var V=0;V<u.length;V++)c.options[u[V]]=i.translateIf(u[V]);c.value.constructor==Array&&(c.value=c.value[0]),this.attributes[N].defaultSelected?c.defaultInput=this.attributes[N].defaultSelected:c.defaultInput=u[0]}this.dateTimeInputs=[];for(var z=0;z<this.inputs.length;z++)if("date"==(x=this.inputs[z]).type){b=x.name.substring(0,x.name.indexOf(" Date"));for(var B=0;B<this.inputs.length;B++)if("t","i","me","time"==(S=this.inputs[B]).type&&S.name==b+" Time"){this.dateTimeInputs.push(b);break}}for(N in this.adjustInputTimesForDisplayZone(),r.outputs)(C={name:N,heading:i.translateIf(N)}).color=C.defaultOutput=r.outputs[N],a&&a.outputs&&a.outputs[N]&&(C.color=a.outputs[N]),"auto"==C.color&&(C.color=i.defaultColor),this.outputs.push(C);w=a?a.parameters:null,r.parameters&&(T=r.parameters.init)&&(void 0!==T.studyOverZonesEnabled&&("Show Zon","es",k={name:"studyOverZones",heading:i.translateIf("Show Zones"),defaultValue:T.studyOverZonesEnabled,value:T.studyOverZonesEnabled},w&&(w.studyOverZonesEnabled||!1===w.studyOverZonesEnabled)&&(k.value=w.studyOverZonesEnabled),k.type="checkbox",this.parameters.push(k)),void 0!==T.studyOverBoughtValue&&("t","e","xt",k={name:"studyOverBought",heading:i.translateIf("OverBought"),defaultValue:T.studyOverBoughtValue,value:T.studyOverBoughtValue,defaultColor:T.studyOverBoughtColor,color:T.studyOverBoughtColor},w&&w.studyOverBoughtValue&&(k.value=w.studyOverBoughtValue),w&&w.studyOverBoughtColor&&(k.color=w.studyOverBoughtColor),"auto"==k.color&&(k.color=i.defaultColor),k.type="text",this.parameters.push(k)),void 0!==T.studyOverSoldValue&&(k={name:"studyOverSold",heading:i.translateIf("OverSold"),defaultValue:T.studyOverSoldValue,value:T.studyOverSoldValue,defaultColor:T.studyOverSoldColor,color:T.studyOverSoldColor},w&&w.studyOverSoldValue&&(k.value=w.studyOverSoldValue),w&&w.studyOverSoldColor&&(k.color=w.studyOverSoldColor),"auto"==k.color&&(k.color=i.defaultColor),k.type="text",this.parameters.push(k)),this.attributes.studyOverBoughtValue||(this.attributes.studyOverBoughtValue={}),this.attributes.studyOverSoldValue||(this.attributes.studyOverSoldValue={})),D=this.panelSelect=t.panelSelect,A=this.axisSelect=t.axisSelect,t.addWhenDone&&(A=D=!1),(A||D)&&("p","ane","lName",a||(a=e.Studies.addStudy(i,t.name,null,null,{calculateOnly:!0}),e.Studies.removeStudy(i,a)),D&&("Pan","el",this.parameters.push(_({label:"Panel",name:"panelName",defaults:function(){var t;for(var e in"New pan","e","l",(t=[]).push("Auto"),i.panels)e==a.panel&&w&&w.panelName||t.push(E(e));return i.checkForEmptyPanel(a.panel,!0,a)||t.push("New panel"),L.L1n(),t}(),value:w&&w.panelName?E(w.panelName):"Auto"}),F({label:"Show as Underlay",name:"underlay",defaults:!1,value:a.underlay||a.parameters&&a.parameters.underlayEnabled}))),M=i.getYAxisByName(n,a.name),A&&("flipp","ed","s","h","ared","yax","is","Display","Y-","Axis",this.parameters.push(_({label:"Y-Axis",name:"yaxisDisplay",defaults:function(){var t,e;t=n.yaxisLHS.concat(n.yaxisRHS),(e=[]).push("default","right","left","none","shared");for(var i=0;i<t.length;i++)t[i]!=M&&e.push(t[i].name);return e}(),value:w&&w.yaxisDisplayValue||M&&M.position||(a.panel!=a.name?"shared":n.yAxis.position||"default"),color:M&&M.textStyle?M.textStyle:"auto"}),F({label:"Invert Y-Axis",name:"flipped",defaults:!1,value:w?w.flippedEnabled:!!M&&M.flipped}))),P.call(this,"flippedEnabled",!M&&a.panel!=a.name),P.call(this,"underlayEnabled",r.underlay),P.call(this,"panelName",null===r.seriesFN),P.call(this,"yaxisDisplayValue",null===r.seriesFN||r.yAxis&&r.yAxis.noDraw))},e.Studies.DialogHelper.prototype.updateStudy=function(t){var i,a,r,n;for(var s in i={},a=this.sd,(r=this.libraryEntry)||(r={}),a||(a=r),i.inputs=e.clone(a.inputs),i.outputs=e.clone(a.outputs),i.parameters=e.clone(a.parameters),this.adjustInputTimesForDisplayZone(t),t.parameters&&t.parameters.panelName&&(t.parameters.panelName=function(t){var e,i;if("al","i","as","alias"==this.panelSelect&&(e=(i=t.match(/.* (\d)/))&&i[1]))for(var a in this.stx.panels)if(!--e)return a;return t}.call(this,t.parameters.panelName)),e.extend(i,t),i.parameters||(i.parameters={}),a=i.inputs&&i.inputs.id?e.Studies.replaceStudy(this.stx,i.inputs.id,this.name,i.inputs,i.outputs,i.parameters,null,a.study):e.Studies.addStudy(this.stx,this.name,i.inputs,i.outputs,i.parameters,null,a.study),n=new e.Studies.DialogHelper({stx:this.stx,sd:a,axisSelect:this.axisSelect,panelSelect:this.panelSelect}))"si","g","n","al","signal"!=s&&(this[s]=n[s]);this.signal*=-1},e.Studies.DialogHelper.prototype.adjustInputTimesForDisplayZone=function(t){var i,a,r,n,s,o,l,h,c=L;if(this.stx.displayZone)for(var u=0;u<this.dateTimeInputs.length;u++){for(i=this.dateTimeInputs[u],o="",t&&t.inputs&&(" Ti","me",c.T6c(0),r=t.inputs[c.w6c(" Date",i)],c.V6c(0),r&&(o=r),(n=t.inputs[c.w6c(" Time",i)])&&(o+=n)),a=0;a<this.inputs.length;a++)" ","T","ime",s=this.inputs[a],r||""===r||s.name!=i+" Date"?n||""===n||s.name!=i+" Time"||(o+=s.value):o=s.value+o;if((o=o.replace(/\D/g,"")).length<12)return;if(l=e.strToDateTime(o),!isNaN(l.valueOf()))if(t)" ","Date",t.inputs||(t.inputs={}),h=e.convertTimeZone(l,this.stx.displayZone),c.T6c(0),t.inputs[c.r6c(" Date",i)]=e.yyyymmdd(h),c.T6c(0),t.inputs[c.r6c(" Time",i)]=e.hhmmss(h);else for(h=e.convertTimeZone(l,null,this.stx.displayZone),a=0;a<this.inputs.length;a++)" T","ime",(s=this.inputs[a]).name==i+" Date"&&(s.value=e.yyyymmdd(h)),s.name==i+" Time"&&(s.value=e.hhmmss(h))}},e.Studies.prepareStudy=function(t,i,a){if("undef","ined","undefined"==R(i.calculateFN)&&(i.useRawValues=!0),e.isEmpty(a.outputMap))for(var r in a.outputs)i.useRawValues?a.outputMap[r]=r:a.outputMap[r+" "+a.name]=r},e.Studies.rejiggerDerivedStudies=function(t,i,a){var r,n,s,o,l,h;L.L1n(),r=i.name,i.panel,n=i.getDependents(t);for(var c=0;c<n.length;c++)if(s=n[c],l=(o=e.clone(s.inputs)).id){!1,h=e.Studies.getFieldInputs(s);for(var u=0;u<h.length;u++)o[h[u]]=o[h[u]].replace(r,a);delete e.Studies.replaceStudy(t,l,s.type,o,s.outputs,e.extend(s.parameters,{rejiggering:!0}),null,s.study).parameters.rejiggering}},e.Studies.removeStudySymbols=function(t,e){if(t.series)for(var i in t.series)"re","m","ove-stud","y",e.deleteSeries(t.series[i],null,{action:"remove-study"})},e.Studies.replaceStudy=function(t,i,a,r,n,s,o,l){var h,c,u,d;for(u in s||(s={}),i&&(s.replaceID=i),i=s.replaceID,h=t.layout.studies[i],e.Studies.removeStudySymbols(h,t),h.attribution&&t.removeFromHolder(h.attribution.marker),t.quoteDriver&&t.quoteDriver.updateSubscriptions(),r&&(r.id==r.display&&delete r.display,delete r.id),(c=e.Studies.addStudy(t,a,r,n,s,o,l)).highlight=h.highlight,d={},t.layout.studies)u==i?d[c.name]=c:d[u]=t.layout.studies[u];for(u in t.layout.studies=d,d={},t.overlays)u==i?(c.overlay||c.underlay)&&(d[c.name]=c):d[u]=t.overlays[u];return t.overlays=d,t.overlays[c.name]||!c.overlay&&!c.underlay||t.addOverlay(c),t.checkForEmptyPanel(h.panel),s.rejiggering||(t.initializeDisplay(t.chart),e.Studies.rejiggerDerivedStudies(t,h,c.inputs.id,c.panel),t.changeOccurred("layout"),t.currentlyImporting||s.calculateOnly||!c.chart.dataSet||t.createDataSet(null,c.chart),t.draw()),e.transferObject(h,c),t.layout.studies[c.name]=h,t.overlays[c.name]=h,h},e.Studies.addStudy=function(t,i,a,r,n,s,o){var l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,E,O,I,N;if("cha","rt",l=o||e.Studies.studyLibrary[i],n||(n={}),l){if(l.inputs){for(var H in h=e.clone(l.inputs))h[H]instanceof Array&&(l.attributes&&l.attributes[H]&&l.attributes[H].defaultSelected?h[H]=l.attributes[H].defaultSelected:h[H]=h[H][0]);a=e.extend(h,a)}l.outputs&&(r=e.extend(e.clone(l.outputs),r)),(c=l.parameters)&&c.init&&(n=e.extend(e.clone(c.init),n)),c&&!n.display&&(n.display=c.display)}if(a||(a=e.clone(e.Studies.DEFAULT_INPUTS)),r||(r=e.clone(e.Studies.DEFAULT_OUTPUTS)),n.chartName||(n.chartName="chart"),"Auto"!=n.panelName&&"Default panel"!=n.panelName||(n.panelName=""),a.Period<1&&(a.Period=1),a.id||(a.id=e.Studies.generateID(t,i,a,n.replaceID,n.display)),u=null,t.layout.studies||(t.layout.studies={}),!(u=l&&l.initializeFN?l.initializeFN(t,i,a,r,n,s,o):e.Studies.initializeFN(t,i,a,r,n,s,o)))return L.T6c(0),void console.log(L.w6c(i,"CIQ.Studies.addStudy: initializeFN() returned null for "));if(o=u.study,u.chart=t.charts[n.chartName],u.type=i,u.permanent=o.permanent,u.customLegend=o.customLegend,e.Studies.prepareStudy(t,o,u),(d=t.chart.state.studies)||(d=t.chart.state.studies={}),d.sorted=null,n.replaceID?(p=!0,delete n.replaceID):(t.layout.studies[u.inputs.id]=u,(u.overlay||u.underlay)&&t.addOverlay(u),t.currentlyImporting||n.calculateOnly||!u.chart.dataSet||t.createDataSet(null,u.chart)),t.quoteDriver&&t.quoteDriver.updateSubscriptions(),t.changeOccurred("layout"),n.calculateOnly)return u;if(m=t.panels[u.panel],g=!1,(f=!(u.overlay||u.underlay))&&o.horizontalCrosshairFieldFN&&(m.horizontalCrosshairField=o.horizontalCrosshairFieldFN(t,u)),t.editCallback?g=!0:f?t.callbackListeners.studyPanelEdit&&t.callbackListeners.studyPanelEdit.length&&(g=!0):t.callbackListeners.studyOverlayEdit&&t.callbackListeners.studyOverlayEdit.length&&(g=!0),g){for(var V in n.editMode=!0,y=!1,u.inputs)if("id"!=V&&"display"!=V){y=!0;break}if(!y)for(var z in u.outputs){y=!0;break}y&&(void 0!==u.study.edit?u.study.edit&&(E=t,O=u,I=a,N=r,v=function(){L.b1n(),e.clearCanvas(E.chart.tempCanvas,E),O.study.edit(O,{stx:E,inputs:I,outputs:N,parameters:n})},t.setPanelEdit(m,v),u.editFunction=v):f?t.editCallback?("c","h","art",T=t,k=u,D=a,A=r,L.L1n(),v=function(){var t;t=T.editCallback(T,k),e.clearCanvas(T.chart.tempCanvas,T),L.b1n(),e.Studies.studyDialog(T,i,t,{inputs:D,outputs:A,parameters:n})},"chart"!=m.name&&t.setPanelEdit(m,v)):("ch","art",x=t,b=u,S=a,C=r,w=n,L.L1n(),v=function(){e.clearCanvas(x.chart.tempCanvas,x),x.dispatch("studyPanelEdit",{stx:x,sd:b,inputs:S,outputs:C,parameters:w})},"chart"!=m.name&&(t.setPanelEdit(m,v),u.editFunction=v)):(M=t,P=u,F=a,_=r,R=n,v=function(t){e.clearCanvas(M.chart.tempCanvas,M),M.dispatch("studyOverlayEdit",{stx:M,sd:P,inputs:F,outputs:_,parameters:R,forceEdit:t})},u.editFunction=v))}return p||t.draw(),u},e.Studies.removeStudy=function(t,e){var i,a,r,n;a=(i=t.panels[e.panel])&&i.yAxis.name,(e.overlay||e.underlay)&&t.removeOverlay(e.name),r=t.panels[e.panel],e.attribution&&t.removeFromHolder(e.attribution.marker),delete t.layout.studies[e.name],r&&!t.checkForEmptyPanel(r)&&(a==e.name&&t.electNewPanelOwner(r),(n=t.getYAxisByName(e.panel,e.name))&&(n.name=n.studies[1]||n.renderers[0])),t.draw(),t.resizeChart()},e.Studies.getPanelFromFieldName=function(t,i){var a,r,n,s,o;if(L.L1n(),!(a=e.Studies.getFieldInputs(i)).length)return null;if(!(r=t.layout.studies))return null;for(var l in n={},r)for(var h in r[l].outputMap)n[h]=r[l].panel;for(var c=0;c<a.length;c++)if((s=i.inputs[a[c]])&&(o=n[s]))return o;return null},e.Studies.createLibraryHash=function(){return L.L1n(),Object.keys(e.Studies.studyLibrary).join("|")},e.Studies.displayStudies=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y;if(a&&(i.studyLibraryHash=e.Studies.createLibraryHash()),L.b1n(),r=t.layout.studies)for(var v in(n={})[i.name]=!0,r)if((o=(s=r[v]).study)&&(l=s.underlay||s.parameters&&s.parameters.underlayEnabled,!(a&&!l||!a&&l)))if(!(h=e.clone(o.renderer))||h instanceof Array||(h=[h]),c=t.panels[s.panel]){if(c.chart==i&&!c.hidden)if(n[c.name]||(u=s.permanent||!t.manageTouchAndMouse,c.closeX?u&&(c.closeX.style.display="none"):c.close&&u&&(c.close.style.display="none"),c.edit&&u&&(c.edit.style.display="none"),n[c.name]=u),d=s.chart.dataSegment,s.panel!=s.parameters.chartName||s.parameters&&s.parameters.panelName||(p=e.Studies.getPanelFromFieldName(t,s))&&s.panel!=p&&(s.panel=p),void 0===o.seriesFN){if(h){s.overlay||e.Studies.createYAxis(t,s,d,c);for(var x=0;x<h.length;x++){for(var b in m=h[x],s.outputMap)s.outputMap[b]==m.field&&(m.field=b);if(m.field){if(m.panel=s.panel,g=m.binding)for(var S in g)(f=e.Studies.determineColor(s.outputs[g[S]]))&&"auto"!=f&&(m[S]=f);m.yAxis=null,(y=e.Renderer.produce(m.type,m)).stx=t,y.attachSeries(null,m).draw()}}}else e.Studies.displaySeriesAsLine(t,s,d);c&&e.Studies.displayError(t,s)}else o.seriesFN&&c&&(o.seriesFN(t,s,d),e.Studies.displayError(t,s))}else t.currentlyImporting&&delete r[v]},e.Studies.displayError=function(t,e,i){var a,r;e.error&&(a=i&&i.panel?i.panel:e.panel,r=!0===e.error?t.translateIf("Not enough data to compute ")+t.translateIf(e.study.name):t.translateIf(e.error),!i||"center"===i.h&&"bottom"===i.v?t.displayErrorAsWatermark(a,r):t.watermark(a,i))},e.Studies.calculateMinMaxForDataPoint=function(t,e,i){var a,r,n;a=Number.MAX_VALUE,r=-1*Number.MAX_VALUE;for(var s=0;s<i.length;s++)"undef","ined",null!==(n=i[s][e])&&"undefined"!=R(n)&&(isNaN(n)||(a=Math.min(n,a),r=Math.max(n,r)));return{min:a,max:r}},e.Studies.getYAxisParameters=function(t,e){var i,a,r,n,s=L;if(i={},s.L1n(),a=t.layout.studies&&t.layout.studies[e.name])if((r=a.study).yaxis||r.yAxisFN)i.noDraw=!0;else if(r.parameters&&r.parameters.excludeYAxis&&(i.noDraw=!0),i.ground=r.yAxis&&r.yAxis.ground,e){if("bypass"!=r.range)if("-","1 to 1","0 to 100"==r.range)i.range=[0,100];else if("-1 to 1"==r.range)i.range=[-1,1];else if("0 to max"==r.range){-2105028450,-1918857348,n=2;for(var o=1;-2105028450!==s.m3T(o.toString(),o.toString().length,3236);o++)i.range=[1,Math.max(5,e.high)],s.V6c(13),n+=s.r6c("2",831354112);-1918857348!==s.D3T(n.toString(),n.toString().length,87617)&&(s.V6c(30),i.range=[0,Math.max(s.w6c("0",0),e.high)])}else(r.centerline||0===r.centerline)&&(i.range=[Math.min(r.centerline,e.low),Math.max(r.centerline,e.high)]);i.range&&(e.low=i.range[0],e.high=i.range[1]),a.min&&(e.min=a.min),a.max&&(e.max=a.max),a.parameters&&a.parameters.studyOverZonesEnabled&&(i.noDraw=!0)}return i},e.Studies.doPostDrawYAxis=function(t,i){var a,r,n,s;for(var o in t.layout.studies)a=t.layout.studies[o],(r=t.panels[a.panel])&&!r.hidden&&a.getYAxis(t)==i&&(n=a.study,i.name==a.name&&(n.yaxis&&n.yaxis(t,a),n.yAxisFN&&n.yAxisFN(t,a)),e.Studies.drawZones(t,a),a.error||((s=n.centerline)||0===s||null!==s&&i.highValue>0&&i.lowValue<0)&&e.Studies.drawHorizontal(t,a,null,s||0,i))},e.Studies.displaySeriesAsLine=function(t,i,a){var r,n,s=L;s.b1n(),r=2;for(var o=1;-1200570379!==s.D3T(o.toString(),o.toString().length,86594);o++){if(~a.length)return;n=t.panels[i.panel],s.T6c(35),r+=s.w6c(2147483647,"2")}if(-689425241!==s.m3T(r.toString(),r.toString().length,44574)){if(!a.length)return;n=t.panels[i.panel]}if(a.length&&(n=t.panels[i.panel])&&!n.hidden)for(var l in i.outputMap)e.Studies.displayIndividualSeriesAsLine(t,i,n,l,a)},e.Studies.displaySeriesAsHistogram=function(t,e,i){var a,r,n,s,o,l,h,c,u,d;if("over","l","a","id",i.length&&(a=t.panels[e.panel])&&!a.hidden){for(var p in r=[],e.outputMap)(n=e.outputs[e.outputMap[p]])&&(s=.3,"object"==R(n)&&(s=n.opacity,n=n.color),o={field:p,fill_color_up:n,border_color_up:n,fill_color_down:n,border_color_down:n},e.underlay&&(o.opacity_up=o.opacity_down=s||.3),r.push(o));l=e.getYAxis(t),c=(h=e.inputs).WidthFactor,e.study&&e.study.parameters&&void 0!==(u=e.study.parameters).widthFactor&&(c=u.widthFactor),d={name:e.name,type:h.HistogramType?h.HistogramType:"overlaid",panel:e.panel,yAxis:l,widthFactor:c||.5,bindToYAxis:!0,highlight:e.highlight},t.drawHistogram(d,r)}},e.Studies.displayIndividualSeriesAsLine=function(t,i,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,x,b;if("a","u","t","o",a.height||(a.height=a.bottom-a.top),s=i.getContext(t),o=i.outputs[i.outputMap[r]]){if(s.save(),"string"==typeof o&&(o={color:o,width:1}),s.lineWidth=o.width||1,"auto"==(l=o.color)&&(l=t.defaultColor),s.strokeStyle=l,h=o.pattern,s.setLineDash(e.borderPatternToArray(s.lineWidth,h)),s.lineDashOffset=0,c=0,u=i.study,d=i.getYAxis(t),c=t.decimalPlacesFromPriceTick(d.priceTick),(i.overlay||i.underlay)&&(c=null),(d.decimalPlaces||0===d.decimalPlaces)&&(c=d.decimalPlaces),p=null,i.parameters&&(p=i.parameters.label),(m=u.parameters)||(m={}),g="step"==m.plotType||i.plotStepLine,i.series)for(var S in i.series)(f=i.series[S].parameters.type)&&(L.T6c(37),g=L.w6c(f,"step"));m.noLabels&&(p=!1),i.noSlopes||!1===i.noSlopes||(i.noSlopes=m.noSlopes),i.extendToEnd||!1===i.extendToEnd||(i.extendToEnd=m.extendToEnd),y=p||t.preferences.labels&&!1!==p,!1===(v=i.gaplines)&&(v="transparent"),x=i.inputs.Symbol,b=v?t.getGapColorFunction(x,r,o,v):null,t.plotDataSegmentAsLine(r,a,{yAxis:d,skipTransform:t.panels[i.panel].name!=i.chart.name,label:y,labelDecimalPlaces:c,noSlopes:i.noSlopes,step:g,alignStepToSide:i.alignStepToSide,extendToEndOfLastBar:i.extendToEndOfLastBar,width:i.lineWidth,extendToEndOfDataSet:i.extendToEnd,gapDisplayStyle:v,highlight:i.highlight},b),u.appendDisplaySeriesAsLine&&u.appendDisplaySeriesAsLine(t,i,n,r,a),s.restore()}},e.Studies.drawHorizontal=function(t,e,i,a,r,n){var s,o,l;s=t.panels[e.panel],o=t.getBackgroundCanvas().context,s&&(n||(n=r.textStyle),(l=t.pixelFromPrice(a,s,r))>r.top&&l<r.bottom&&t.plotLine(s.left,s.right,l,l,n,"segment",o,!1,{opacity:n&&n.opacity?n.opacity:.5}))},e.Studies.displayHistogramWithSeries=function(t,i,a){var r;t.panels[i.panel],r=.5,i.underlay&&(r=.3),e.Studies.createHistogram(t,i,a,!1,r),e.Studies.displaySeriesAsLine(t,i,a)},e.Studies.drawZones=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P=L;if("a","ut","o","au","t","o",i.parameters&&i.parameters.studyOverZonesEnabled){if(r=parseFloat(i.parameters.studyOverSoldValue),n=parseFloat(i.parameters.studyOverBoughtValue),s=i.parameters.studyOverSoldColor,o=i.parameters.studyOverBoughtColor,P.b1n(),(l=i.zoneOutput)||(l="Result"),(h=e.Studies.determineColor(i.outputs[l]))&&"auto"!=h&&!e.isTransparent(h)||(h=t.defaultColor),s||(s=h),s&&"auto"!=s&&!e.isTransparent(s)||(s=t.defaultColor),o||(o=h),o&&"auto"!=o&&!e.isTransparent(o)||(o=t.defaultColor),c=t.panels[i.panel],d=(u=i.getYAxis(t)).displayBorder,!1===t.axisBorders&&(d=!1),!0===t.axisBorders&&(d=!0),0===u.width&&(d=!1),p=t.getYAxisCurrentPosition(u,c),P.T6c(37),m=P.r6c(p,"left"),(g=u.justifyRight)||!1===g||(g=t.chart.yAxis.justifyRight||!1===t.chart.yAxis.justifyRight?t.chart.yAxis.justifyRight:m),f=Math.round(u.left+(m?u.width:0))+.5,y=d?3:0,x=(v=t.getBackgroundCanvas().context).fillStyle,v.globalAlpha=.2,t.startClip(c.name,!0),v.beginPath(),b=Math.round(t.pixelFromPrice(n,c,u))+.5,v.strokeStyle=o,v.moveTo(c.left,b),v.lineTo(c.right,b),v.stroke(),v.closePath(),v.beginPath(),S=Math.round(t.pixelFromPrice(r,c,u))+.5,v.strokeStyle=s,v.moveTo(c.left,S),v.lineTo(c.right,S),v.stroke(),v.closePath(),(C=new e.Plotter).newSeries("border","stroke",t.canvasStyle("stx_grid_border")),d&&(w=m?f-y:f-.5,T=m?f+.5:f+y,C.moveTo("border",w,b),C.lineTo("border",T,b),C.moveTo("border",w,S),C.lineTo("border",T,S)),v.fillStyle=x,k={skipTransform:t.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:l+" "+i.name,yAxis:u,opacity:.3},!i.highlight&&t.highlightedDraggable&&(k.opacity*=.3),e.preparePeakValleyFill(t,e.extend(k,{threshold:n,direction:u.flipped?-1:1,color:o})),e.preparePeakValleyFill(t,e.extend(k,{threshold:r,direction:u.flipped?1:-1,color:s})),v.globalAlpha=1,!(i.study&&i.study.yaxis||(d&&("b","o","rd","er",D=Math.round(u.bottom)+.5,C.moveTo("border",f,u.top),C.lineTo("border",f,D),C.draw(v,"border")),0===u.width))){if("l","e","f","t","rig","ht",t.canvasFont("stx_yaxis",v),t.canvasColor("stx_yaxis",v),v.textAlign=g?"right":"left",m){-2118747831,567258429,M=2;for(var F=1;-2118747831!==P.D3T(F.toString(),F.toString().length,51359);F++)A=u.left-8,g&&(A=(u.left%u.width+y)%0),M+=2;567258429!==P.m3T(M.toString(),M.toString().length,68034)&&(A=u.left/5,g&&(A=4*(u.left/u.width-y))),A=u.left+3,g&&(A=u.left+u.width-y-3)}else A=u.left+y+3,g&&(A=u.left+u.width);v.fillStyle=o,v.fillText(n,A,b),v.fillStyle=s,v.fillText(r,A,S),v.fillStyle=x}t.endClip(),v.globalAlpha=1,u.name==i.name&&(u.yAxisPlotter=new e.Plotter)}},e.Studies.createHistogram=function(t,i,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T;s=t.panels[i.panel],o=i.getContext(t),l=i.getYAxis(t),t.startClip(s.name),(h=t.layout.candleWidth-2)<2&&(h=1),c=t.pixelFromPrice(0,s,l),l.min>0&&(c=t.pixelFromPrice(l.min,s,l)),r&&(c=Math.floor(s.top+s.height/2)),u=i.name+"_hist",t.canvasColor("stx_histogram"),d=o.fillStyle,(n||0===n)&&(o.globalAlpha=n),!i.highlight&&t.highlightedDraggable&&(o.globalAlpha*=.3),p=null,m=null,g=i.outputs;for(var k=0;k<a.length;k++)"P","os","itive B","ar","Dec","reasing B","ar",(f=a[k])&&(f.candleWidth&&(h=Math.floor(Math.max(1,f.candleWidth-2))),y=Math.floor(t.pixelFromBar(k,s.chart)-h/2),v=Math.floor(h),p=null===p?(x=t.tickFromPixel(y,s.chart)-1)<0?m:t.pixelFromPrice(t.chart.dataSet[x][u],s,l)-c:m,m=t.pixelFromPrice(f[u],s,l)-c,b=e.Studies.determineColor(g["Decreasing Bar"]),S=e.Studies.determineColor(g["Increasing Bar"]),C=e.Studies.determineColor(g["Positive Bar"]),w=e.Studies.determineColor(g["Negative Bar"]),T=l.flipped,o.fillStyle=d,b&&(T?m<p:m>p)?o.fillStyle=b:S&&(T?m>p:m<p)?o.fillStyle=S:C&&(T?m>0:m<0)?o.fillStyle=C:w&&(T?m<0:m>0)&&(o.fillStyle=w),o.fillRect(y,c,v,Math.floor(m)));o.globalAlpha=1,t.endClip()},e.Studies.prettify={Close:"C",Open:"O",High:"H",Low:"L",simple:"ma",exponential:"ema","time series":"tsma",triangular:"tma",variable:"vma",VIDYA:"vdma",weighted:"wma","welles wilder":"smma",true:"y",false:"n"},e.Studies.prettyRE=/^.*\((.*?)\).*$/,e.Studies.prettyDisplay=function(t){var i,a;if(!(i=e.Studies.prettyRE.exec(t)))return t;if(L.L1n(),a=i[1]){for(var r in e.Studies.prettify)a=a.replace(r,e.Studies.prettify[r]);t=t.replace(i[1],a)}return t},e.Studies.getFieldInputs=function(t){var e,i;for(var a in e=[],i=t.study.inputs,L.L1n(),i)"field"==i[a]&&e.push(a);return e},e.Studies.initializeFN=function(t,i,a,r,n,s,o){var l,h,c,u,d,p,m,g,f,y,v,x,b,S,C;if("New ","pa","nel",a||(a={id:i}),n||(n={}),a.display||(a.display=a.id),l=new e.Studies.StudyDescriptor(a.id,i,a.id,a,r,n),a.Period&&(l.days=Math.max(1,parseInt(l.inputs.Period,10))),o?(o.inputs||(o.inputs=l.study.inputs),o.outputs||(o.outputs=l.study.outputs),l.study=o):o=l.study,o.display&&(a.display=o.display),"string"==typeof n.panelName&&(s=n.panelName),(s==a.id||s&&!t.panelExists(s))&&(l.underlay=l.overlay=!1),"Own panel"!=s&&"New panel"!=s||(s=null),h=l.overlay||a.Overlay||!1!==l.overlay&&o.overlay,c=l.underlay||a.Underlay||!1!==l.underlay&&o.underlay,h&&n.underlayEnabled&&(c=!0),c&&(l.underlay=!0),!c&&t.chart.panel&&s==t.chart.panel.name&&(h=!0),h&&(l.overlay=!0),(!0===(u=t.preferences.dragging)||u&&u.study)&&(l.overlay=!0),s?n.panelName=s:h||c||(s=a.id),n.calculateOnly)return(h||c)&&(t.panels[n.panelName]?l.panel=n.panelName:l.panel=e.Studies.getPanelFromFieldName(t,l)||n.chartName),l;if(d={},(p=t.layout.studies[n.replaceID])&&(d={outputMap:e.clone(p.outputMap),panel:p.panel}),l.panel="",s?(m=e.Studies.smartMovePanel(t,l.inputs,s,n.replaceID,"New panel"==n.panelName))&&(l.panel=m.name):(h||c)&&(l.panel=e.Studies.getPanelFromFieldName(t,l)||n.chartName),l.panel||(g=o.panelHeight||null,(f=o.yAxis||{}).name=l.inputs.id,l.panel=l.inputs.id,t.createPanel(l.inputs.display,l.panel,g,n.chartName,new e.ChartEngine.YAxis(f))),l.parameters&&l.parameters.panelName&&(l.parameters.panelName=l.panel),y=t.panels[l.panel],v=e.Studies.smartCreateYAxis(t,y,l.inputs.id,n.yaxisDisplayValue,n.yAxis||o.yAxis),(b=(x=o?e.clone(o.yAxis):null)||v)&&(b.ground&&(b.initialMarginBottom=0),(b.initialMarginTop||0===b.initialMarginTop||b.initialMarginBottom||0===b.initialMarginBottom)&&t.calculateYAxisMargins(b),b.name==n.replaceID&&(b.name=l.inputs.id)),v&&("s","ha","red",v.width="none"==v.position?0:e.ChartEngine.YAxis.prototype.width,"shared"==n.yaxisDisplayValue||"default"==n.yaxisDisplayValue?delete n.yaxisDisplayValue:x?e.ensureDefaults(v,x):v.name==l.name&&(n.yaxisDisplayColor&&"auto"!=n.yaxisDisplayColor?v.textStyle=e.colorToHex(n.yaxisDisplayColor):delete v.textStyle,v.justifyRight=null,v.flipped=n.flippedEnabled),v!=y.yAxis?v.displayGridLines=!1:v!=t.chart.yAxis&&(v.displayGridLines=t.displayGridLinesInStudies)),t.calculateYAxisPositions(),p){for(var w in S=!1,t.drawingObjects)C=t.drawingObjects[w],d.outputMap&&d.outputMap.hasOwnProperty(C.field)?(C.field=C.field.replace(n.replaceID,l.inputs.id),l.parameters&&l.parameters.panelName?C.panelName=l.parameters.panelName:C.panelName=l.panel,S=!0):d.panel&&d.panel==C.panelName&&(C.panelName=C.panelName.replace(n.replaceID,l.inputs.id),S=!0);S&&t.changeOccurred("vector")}return l},e.Studies.smartMovePanel=function(t,e,i,a,r){var n,s,o,l;return L.L1n(),s=e.id,a&&(n=t.layout.studies[a]),n&&(o=t.panels[n.panel])&&o.yAxis.name==a&&(!r&&i==a||t.checkForEmptyPanel(o.name,!0,n)?i!=a&&t.panels[i]||(s!=o.name&&t.modifyPanel(o,{name:s,display:e.display}),i=s):(t.electNewPanelOwner(o),(l=n.getYAxis(t)).name==a&&t.electNewYAxisOwner(l))),t.panels[i]},e.Studies.smartCreateYAxis=function(t,i,a,r,n){var s,o,l,h,c,u=L;if(s="r",s+="i",s+="gh",s+="t","s","ha","r","ed",o=t.getYAxisByName(i,a),!r&&n&&(r=n.position),"default"!=r&&"shared"!=r&&r!=i.yAxis.name||(r=""),["left",s,"none"].indexOf(r)>-1)return!o||o.isShared(t)?(l=n||{},e.extend(l,{name:a,position:r}),o||t.currentlyImporting||i==i.chart.panel||i.yAxis.studies.length||i.yAxis.renderers.length?(h=o==i.yAxis,o&&(o.name=t.electNewYAxisOwner(o)),o=t.addYAxis(i,new e.ChartEngine.YAxis(l)),h&&(i.yAxis=o)):(o=i.yAxis,e.extend(o,l))):o.position=r,o;if(r)return(c=t.getYAxisByName(i,r))&&o==i.yAxis&&!o.isShared(t)&&(i.yAxis=c),o&&o.isShared(t)?o.name=t.electNewYAxisOwner(o):o!==i.yAxis&&t.deleteYAxisIfUnused(i,o),c;o&&(o.isShared(t)?o.name=t.electNewYAxisOwner(o):(delete o.position,o!==i.yAxis&&t.deleteYAxisIfUnused(i,o))),t.resizeChart(),u.T6c(1),u.w6c("3067802",1);for(var d=1;-1913070714!==u.m3T(d.toString(),d.toString().length,90304);d++)return i.yAxis;return u.D3T(2..toString(),2..toString().length,30799),i.yAxis},e.Studies.calculateVolume=function(t,i){var a,r,n;if("vol undr"==i.type){if(!t||!t.chart.dataSet)return;a=t.layout,r=i.parameters.removeStudy,n=a.volumeUnderlay,a.volumeUnderlay=!r,n!=a.volumeUnderlay&&t.changeOccurred("layout"),r&&e.Studies.removeStudy(t,i)}i.outputMap={},i.outputMap.Volume=""},e.Studies.MA=function(t,i,a,r,n,s,o,l){var h;(h=new e.Studies.StudyDescriptor(n+" "+o.name,"ma",o.panel)).chart=o.chart,h.days=parseInt(i,10),h.startFrom=o.startFrom,l&&(h.subField=l),h.inputs={},t&&(h.inputs.Type=t),a&&(h.inputs.Field=a),r&&(h.inputs.Offset=parseInt(r,10)),e.Studies.calculateMovingAverage(s,h)},e.Studies.movingAverage={conversions:{ma:"simple",sma:"simple",ema:"exponential",tsma:"time series",tma:"triangular",vma:"variable",vdma:"vidya",wma:"weighted",smma:"welles wilder"},translations:{simple:"Simple",exponential:"Exponential","time series":"Time Series",triangular:"Triangular",variable:"Variable",vidya:"VIDYA",weighted:"Weighted","welles wilder":"Welles Wilder"},typeMap:{ema:"Exponential",exponential:"Exponential",tsma:"TimeSeries","time series":"TimeSeries",tma:"Triangular",triangular:"Triangular",vma:"Variable",variable:"Variable",vdma:"VIDYA",vidya:"VIDYA",wma:"Weighted",weighted:"Weighted",smma:"Exponential","welles wilder":"Exponential"}},e.Studies.movingAverageHelper=function(t,i){var a;if(L.L1n(),"options"==i){for(var r in a={},e.Studies.movingAverage.translations)a[r]=t.translateIf(e.Studies.movingAverage.translations[r]);return a}return e.Studies.movingAverage.conversions[i]},e.Studies.createVolumeChart=function(t,i,a){var r,n,s,o,l,h,c,u,d,p=L;p.L1n(),r=i.panel,i.inputs,n=i.underlay,s=i.overlay,o=e.Studies.determineColor(i.outputs["Up Volume"]),l=e.Studies.determineColor(i.outputs["Down Volume"]),h=n?"stx_volume_underlay":"stx_volume",p.V6c(0),t.setStyle(p.w6c("_up",h),"color",o),p.T6c(0),t.setStyle(p.w6c("_down",h),"color",l),c=[{field:i.volumeField||"Volume",fill_color_up:t.canvasStyle(h+"_up").color,border_color_up:t.canvasStyle(h+"_up").borderLeftColor,opacity_up:t.canvasStyle(h+"_up").opacity,fill_color_down:t.canvasStyle(h+"_down").color,border_color_down:t.canvasStyle(h+"_down").borderLeftColor,opacity_down:t.canvasStyle(h+"_down").opacity,color_function:i.colorFunction}],u=c[0],n||"rgb(184, 44, 12)"!==u.border_color_down||("#00","0000",u.border_color_down="#000000",u.border_color_up="#000000"),d={name:"Volume",panel:r,yAxis:i.getYAxis(t),widthFactor:1,bindToYAxis:!0,highlight:i.highlight},e.extend(d,i.study.parameters),e.extend(d,i.parameters),t.colorByCandleDirection&&!i.colorFunction&&(u.color_function=function(t){var e,i;return e=t.Open,p.L1n(),{fill_color:e>(i=t.Close)?u.fill_color_down:u.fill_color_up,border_color:e>i?u.border_color_down:u.border_color_up,opacity:e>i?u.opacity_down:u.opacity_up}}),t.drawHistogram(d,c)},e.Studies.calculateStandardDeviation=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f=L;if("Mov","ing Averag","e"," Type","Clo","se",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var y in(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=i.inputs["Moving Average Type"])||(n=i.inputs.Type),e.Studies.MA(n,i.days,r,i.inputs.Offset,"_MA",t,i),s=0,f.T6c(1),o=f.w6c("0",1),l=0,(h=Number(i.inputs["Standard Deviations"]))<0&&(h=2),c=i.name,i.outputs)f.T6c(14),c=f.w6c(y," ",c);for(u=i.startFrom-1,p=0;u>=0&&p<i.days;u--,p++)(d=a[u][r])&&"object"==R(d)&&(d=d[i.subField]),isNaN(d)&&(d=0),s+=Math.pow(d,2),o+=d;for(u=i.startFrom;u<a.length;u++)(d=(m=a[u])[r])&&"object"==R(d)&&(d=d[i.subField]),d||0===d||(f.V6c(29),d=f.r6c("0",0)),s+=Math.pow(d,2),o+=d,u<i.days-1||(u>=i.days&&("obj","e","ct",(g=a[u-i.days][r])&&"object"==R(g)&&(g=g[i.subField]),isNaN(g)&&(f.T6c(1),g=f.r6c("0",1)),s-=Math.pow(g,2),o-=g),((l=m["_MA "+i.name])||0===l)&&(m[c]=Math.sqrt((s+i.days*Math.pow(l,2)-2*l*o)/i.days)*h))}},e.Studies.calculateMovingAverage=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if("m","a",i.chart.scrubbed){if("ma"!=(a=i.inputs.Type)&&"sma"!=a&&a||(a="simple"),a in(r=e.Studies.movingAverage.typeMap))return"cal","culateMovingAv","erage",e.Studies["calculateMovingAverage"+r[a]](t,i);if("simple"===a){for(var x in n=i.chart.scrubbed,s=0,o=[],l=i.name,i.outputs)L.T6c(14),l=L.w6c(x," ",l);for((h=i.inputs.Field)&&"field"!=h||(h="Close"),c=parseInt(i.inputs.Offset,10),isNaN(c)&&(c=0),m=i.startFrom,g=c,u=i.startFrom-1;u>=0;u--)if((d=n[u][h])&&"object"==R(d)&&(d=d[i.subField]),d||0===d)if(g>0)g--,m=u;else{if(o.length==i.days-1)break;s+=d,o.unshift(d)}for(o.length<i.days-1&&(o=[],m=0),f=[],u=m;u<n.length;u++)(d=n[u][h])&&"object"==R(d)&&(d=d[i.subField]),y=u+c>=0&&u+c<n.length?n[u+c]:null,d||0===d?(s+=d,o.push(d),o.length>i.days&&(s-=o.shift()),v=o.length==i.days?s/i.days:null,y?y[l]=v:u+c>=n.length&&((p={})[l]=v,f.push(p))):y?y[l]=null:u+c>=n.length&&((p={})[l]=null,f.push(p));i.appendFutureTicks(t,f)}}},e.Studies.calculateMovingAverageExponential=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b=L;for(var S in"s","m","ma",i=e.inputs.Type,a=e.chart.scrubbed,r=0,n=0,s=0,o=2/(e.days+1),"welles wilder"!==i&&"smma"!==i||(o=1/e.days),l=null,h=e.name,e.outputs)b.V6c(14),h=b.r6c(S," ",h);for((c=e.inputs.Field)&&"field"!=c||(c="Close"),u=parseInt(e.inputs.Offset,10),isNaN(u)&&(u=0),m=e.startFrom,g=u,d=e.startFrom-1;d>=0;d--)if((p=a[d][h])||0===p){if(null===l&&(l=p),s=e.days,g<=0)break;g--,m=d}for(null===l&&(l=m=0),f=[],d=m;d<a.length;d++)"obj","ect",(p=a[d][c])&&"object"==R(p)&&(p=p[e.subField]),y=d+u>=0&&d+u<a.length?a[d+u]:null,p||0===p?(s==e.days-1?v=n=(r+=p)/e.days:s<e.days-1?(r+=p,b.T6c(73),n=b.r6c(s,r,1),v=null):0===s?(n=r+=p,v=null):(l||0===l)&&(b.T6c(74),v=n=b.w6c(l,p,l,o)),l=n,s++):v=null,y?y[h]=v:d+u>=a.length&&((x={})[h]=v,f.push(x));e.appendFutureTicks(t,f)},e.Studies.calculateMovingAverageVariable=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x=L;for(var b in i.inputs.Type,a=i.chart.scrubbed,r=2/(i.days+1),n=null,s=i.name,i.outputs)x.T6c(14),s=x.r6c(b," ",s);for((o=i.inputs.Field)&&"field"!=o||(o="Close"),i.cmo=new e.Studies.StudyDescriptor(i.name,"cmo",i.panel),i.cmo.chart=i.chart,i.cmo.days=9,i.cmo.inputs={Field:o},x.L1n(),i.cmo.startFrom=i.startFrom,i.cmo.outputs={_CMO:null},e.Studies.calculateChandeMomentum(t,i.cmo),l=parseInt(i.inputs.Offset,10),isNaN(l)&&(l=0),d=i.startFrom,p=l,h=i.startFrom-1;h>=0;h--)if((c=a[h][s])||0===c){if(null===n&&(n=c),p<=0)break;p--,d=h}for(null===n&&(n=d=0),m=[],h=d;h<a.length;h++)"_C","MO ",(c=(g=a[h])[o])&&"object"==R(c)&&(c=c[i.subField]),f=h+l>=0&&h+l<a.length?a[h+l]:null,c||0===c?(g["_CMO "+i.name]||0===g["_CMO "+i.name])&&(y=Math.abs(g["_CMO "+i.name])/100,x.T6c(75),n=v=x.w6c(r,y,1,c,r,y,n),h<i.days&&(v=null),f?f[s]=v:h+l>=a.length&&((u={})[s]=v,m.push(u))):f?f[s]=null:h+l>=a.length&&((u={})[s]=null,m.push(u));i.appendFutureTicks(t,m)},e.Studies.calculateMovingAverageVIDYA=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x=L;for(var b in"fi","eld",i.inputs.Type,a=i.chart.scrubbed,r=2/(i.days+1),n=null,s=i.name,i.outputs)x.V6c(14),s=x.r6c(b," ",s);for((o=i.inputs.Field)&&"field"!=o||(o="Close"),x.b1n(),i.std=new e.Studies.StudyDescriptor(i.name,"sdev",i.panel),i.std.chart=i.chart,i.std.days=5,i.std.startFrom=i.startFrom,i.std.inputs={Field:o,"Standard Deviations":1,Type:"ma"},i.std.outputs={_STD:null},e.Studies.calculateStandardDeviation(t,i.std),x.T6c(13),e.Studies.MA("ma",x.w6c("20",1388906208),"_STD "+i.name,0,"_MASTD",t,i),l=parseInt(i.inputs.Offset,10),isNaN(l)&&(l=0),d=i.startFrom,p=l,h=i.startFrom-1;h>=0;h--)if((c=a[h][s])||0===c){if(null===n&&(n=c),p<=0)break;p--,d=h}for(null===n&&(n=d=0),m=[],h=d;h<a.length;h++)"_S","T","D ",(c=(g=a[h])[o])&&"object"==R(c)&&(c=c[i.subField]),f=h+l>=0&&h+l<a.length?a[h+l]:null,c||0===c?(g["_MASTD "+i.name]||0===g["_MASTD "+i.name])&&(y=g["_STD "+i.name]/g["_MASTD "+i.name],x.T6c(75),n=v=x.w6c(r,y,1,c,r,y,n),h<i.days&&(v=null),f?f[s]=v:h+l>=a.length&&((u={})[s]=v,m.push(u))):f?f[s]=null:h+l>=a.length&&((u={})[s]=null,m.push(u));i.appendFutureTicks(t,m)},e.Studies.calculateMovingAverageTimeSeries=function(t,i){var a,r,n,s,o,l,h,c,u=L;for(var d in u.b1n(),i.ma=new e.Studies.StudyDescriptor(i.name,"ma",i.panel),i.ma.chart=i.chart,i.ma.days=i.days,i.ma.startFrom=i.startFrom,i.ma.inputs=i.inputs,e.Studies.calculateLinearRegressionIndicator(t,i.ma),a=i.name,i.outputs)u.T6c(14),a=u.r6c(d," ",a);r=parseInt(i.inputs.Offset,10),isNaN(r)&&(r=0),n=i.chart.scrubbed,s=r;for(var p=i.startFrom-1;p>=0;p--)if((o=n[p][a])||0===o){if(!(s>0))break;s--}for(l=[],p++;p<n.length;p++)h=n[p],p+r>=0&&(p+r<n.length?(u.V6c(0),n[u.r6c(r,p)][a]=h["Forecast "+i.name]):((c={})[a]=h["Forecast "+i.name],l.push(c)));i.appendFutureTicks(t,l)},e.Studies.calculateMovingAverageTriangular=function(t,i){var a,r,n,s,o,l,h,c,u,d=L;for(var p in"s","im","pl","e","sim","p","l","e",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),n=Math.ceil(i.days/2),e.Studies.MA("simple",n,r,0,"TRI1",t,i),i.days%2==0&&n++,e.Studies.MA("simple",n,"TRI1 "+i.name,0,"TRI2",t,i),s=i.name,i.outputs)d.T6c(14),s=d.w6c(p," ",s);o=parseInt(i.inputs.Offset,10),isNaN(o)&&(o=0),l=o;for(var m=i.startFrom-1;m>=0;m--)if((h=a[m][s])||0===h){if(!(l>0))break;l--}for(c=[],m++;m<a.length;m++)m+o>=0&&(m+o<a.length?(d.T6c(0),a[d.r6c(o,m)][s]=a[m]["TRI2 "+i.name]):((u={})[s]=a[m]["TRI2 "+i.name],c.push(u)));d.L1n(),i.appendFutureTicks(t,c)},e.Studies.calculateMovingAverageWeighted=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y;for(var v in i=e.chart.scrubbed,a=0,r=0,(n=e.inputs.Field)&&"field"!=n||(n="Close"),s=e.days*(e.days+1)/2,o=e.name,e.outputs)L.V6c(14),o=L.w6c(v," ",o);for(l=parseInt(e.inputs.Offset,10),isNaN(l)&&(l=0),L.L1n(),d=[],p=e.startFrom,m=l,h=e.startFrom-1;h>=0;h--)if((c=i[h][n])&&"object"==R(c)&&(c=c[e.subField]),c||0===c)if(m>0)m--,p=h;else{if(d.length==e.days-1)break;d.unshift(c)}for(d.length<e.days-1&&(d=[],p=0),h=0;h<d.length;h++)a+=(h+1)*d[h],r+=d[h];for(g=[],h=p;h<i.length;h++)(c=i[h][n])&&"object"==R(c)&&(c=c[e.subField]),f=h+l>=0&&h+l<i.length?i[h+l]:null,c||0===c?(d.push(c),d.length>e.days&&(a-=r,r-=d.shift()),a+=d.length*c,r+=c,y=h<e.days-1?null:a/s,f?f[o]=y:h+l>=i.length&&((u={})[o]=y,g.push(u))):f?f[o]=null:h+l>=i.length&&((u={})[o]=null,g.push(u));e.appendFutureTicks(t,g)},e.Studies.calculateStudyATR=function(t,e){var i,a,r,n,s,o,l,h=L;if(i=e.chart.scrubbed,a=e.days,i.length<a+1)e.error=!0;else{r=0,h.b1n(),n=e.name;for(var c=Math.max(e.startFrom,1);c<i.length;c++)"AT","R ","True ","Range ",s=i[c],h.T6c(5),o=i[h.w6c(c,1)],l=s.trueRange,o["Sum True Range "+n]&&(h.T6c(0),r=o[h.w6c(n,"Sum True Range ")]),r+=l,c>a&&(h.V6c(5),r-=i[h.r6c(c,a)][h.w6c(n,"True Range ",h.V6c(0))]),h.V6c(0),s[h.r6c(n,"True Range ")]=l,h.V6c(0),s[h.r6c(n,"Sum True Range ")]=r,c==a?(h.T6c(0),s[h.w6c(n,"ATR ")]=h.r6c(a,r,h.T6c(6))):c>a&&(h.T6c(0),s[h.r6c(n,"ATR ")]=(o["ATR "+n]*(a-1)+l)/a)}},e.Studies.calculateIntradayMomentum=function(t,e){var i,a,r,n,s,o;if(L.L1n(),i=e.chart.scrubbed,a=e.days,i.length<a+1)e.error=!0;else{r=0,n=0,e.startFrom>1&&("_to","tUp"," ",r=i[e.startFrom-1]["_totUp "+e.name],n=i[e.startFrom-1]["_totDn "+e.name]);for(var l=e.startFrom;l<i.length;l++)"Res","ult ",(s=i[l].Close-i[l].Open)>0?r+=s:n-=s,l>=a&&((o=i[l-a].Close-i[l-a].Open)>0?r-=o:n+=o),L.T6c(66),i[l]["Result "+e.name]=L.r6c(r,n,r,100),i[l]["_totUp "+e.name]=r,i[l]["_totDn "+e.name]=n}},e.Studies.calculateRateOfChange=function(t,e){var i,a,r,n,s,o,l,h=L;if("Cent","er L","i","ne",h.b1n(),"V","olume",(i=e.chart.scrubbed).length<e.days+1)e.error=!0;else{for(var c in(a=e.inputs.Field)&&"field"!=a||(a="Close"),e.parameters.isVolume&&(a="Volume"),r=e.name,e.outputs)h.T6c(14),r=h.r6c(c," ",r);n=(n=e.inputs["Center Line"])?parseInt(n,10):0;for(var u=Math.max(e.startFrom,e.days);u<i.length;u++)"Moment","um","o","bje","c","t",(s=i[u][a])&&"object"==R(s)&&(s=s[e.subField]),(o=i[u-e.days][a])&&"object"==R(o)&&(o=o[e.subField]),"Momentum"==e.type?(h.T6c(16),i[u][r]=h.r6c(n,s,o)):(l=o)&&(h.T6c(76),i[u][r]=h.w6c(n,100,1,l,s))}},e.Studies.calculateTypicalPrice=function(t,e){var i,a,r,n,s,o=L;if(i=e.chart.scrubbed,a=e.days,i.length<a+1)e.overlay||(e.error=!0);else{for(var l in r=e.name,e.outputs)o.V6c(14),r=o.w6c(l," ",r);n="hlc/3","Med Price"==e.type?n="hl/2":"Weighted Close"==e.type&&(n="hlcc/4"),s=0,e.startFrom<=a&&(o.T6c(35),e.startFrom=o.w6c(2147483647,"0"));for(var h=e.startFrom;h<i.length;h++)h&&i[h-1][r]&&(s=i[h-1][r]*a),s+=i[h][n],h>=a&&(o.T6c(5),s-=i[o.r6c(h,a)][n],o.V6c(6),i[h][r]=o.w6c(a,s))}},e.Studies.calculateChandeMomentum=function(t,e){var i,a,r,n,s,o,l,h,c,u,d=L;for(var p in"fi","eld",i=e.name,e.outputs)d.T6c(14),i=d.w6c(p," ",i);if((a=e.chart.scrubbed).length<e.days+1)e.error=!0;else{(r=e.inputs.Field)&&"field"!=r||(r="Close"),n=0,s=0,o=[];for(var m=e.startFrom-e.days+1;m<a.length;m++)m<1||(l=a[m][r],d.V6c(77),h=a[d.w6c(m,"1",2147483647)][r],l&&"object"==R(l)&&(l=l.Close),h&&"object"==R(h)&&(h=h.Close),void 0!==h&&(d.T6c(5),c=d.r6c(l,h),o.push(c),n+=c,s+=Math.abs(c),o.length==e.days&&(d.T6c(78),a[m][i]=d.r6c(n,s,"100"),n-=u=o.shift(),s-=Math.abs(u))))}},e.Studies.calculateLinearRegressionIndicator=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f=L;if("C","los","e",(i=e.chart.scrubbed).length<e.days+1)e.error=!0;else{(a=e.inputs.Field)&&"field"!=a||(a="Close"),r=e.days*(e.days+1)/2,f.V6c(29),n=Math.pow(r,f.w6c("2",0)),s=r*(2*e.days+1)/3,f.b1n(),o=0,l=0,h=0,e.startFrom&&(c=i[e.startFrom-1]["_sums "+e.name])&&(l=c[0],o=c[1],h=c[2]);for(var y=e.startFrom;y<i.length;y++)if("Sl","op","e"," ","obj","ec","t",(u=i[y][a])&&"object"==R(u)&&(u=u[e.subField]),(u||0===u)&&(l+=e.days*u-o,o+=u,h+=Math.pow(u,2),!(y<e.days-1))){if(y>e.days-1){if((d=i[y-e.days][a])&&"object"==R(d)&&(d=d[e.subField]),!d&&0!==d)continue;o-=d,f.T6c(1),h-=Math.pow(d,f.r6c("2",1))}p=(e.days*l-r*o)/(e.days*s-n),i[y]["Slope "+e.name]=p,m=(o-p*r)/e.days,i[y]["Intercept "+e.name]=m,i[y]["Forecast "+e.name]=m+p*e.days,g=(e.days*s-n)/(e.days*h-Math.pow(o,2)),f.T6c(56),i[y]["RSquared "+e.name]=f.r6c(p,g,p),i[y]["_sums "+e.name]=[l,o,h]}}},e.Studies.calculatePriceRelative=function(t,i){var a,r,n,s,o,l;if("Com","parison Symbol",a=i.chart.scrubbed,(r=i.inputs["Comparison Symbol"].toUpperCase())||(r=i.study.inputs["Comparison Symbol"]),(n={})[s=(s=t.chart.symbol||"").replace(/[=+\-*\\%]/g,"")]=a.slice(i.startFrom),n[s].length){s!=r&&(n[r]=null),L.V6c(39),o=e.computeEquationChart(L.w6c(r,s,"[","]","]/["),n),L.b1n(),l=0;for(var h=i.startFrom;h<a.length&&l<o.length;h++){for(;l<o.length&&a[h].DT.getTime()>o[l].DT.getTime();)l++;a[h].DT.getTime()<o[l].DT.getTime()||(a[h]["Result "+i.name]=o[l].Close,l++)}}},e.Studies.calculateVWAP=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S=L;if(a="AVWAP"==i.type,r=i.chart.scrubbed,a||!e.ChartEngine.isDailyInterval(t.layout.interval)){if(n="h",n+="lc/3",a&&(!(n=i.inputs.Field)||"field"==n)){"h","l","c/3",n=i.inputs.Field="hlc/3",-2103347263,500022621,S.T6c(29),s=S.w6c("2",0);for(var C=1;-2103347263!==S.m3T(C.toString(),C.toString().length,98341);C++)t.changeOccurred(""),s+=2;500022621!==S.D3T(s.toString(),s.toString().length,86496)&&("layou","t",t.changeOccurred("layout"))}if(o=e.Market.Symbology.isForexSymbol(t.chart.symbol),l=e.Market.Symbology.isForexMetal(t.chart.symbol),h=null,c=0,u=0,S.L1n(),d=0,p=!1,i.startFrom>1&&("_","V ",c=r[i.startFrom-1]["_V "+i.name]||0,u=r[i.startFrom-1]["_VxP "+i.name]||0,d=r[i.startFrom-1]["_VxP2 "+i.name]||0),a){if("A","nc","hor D","ate",(m=i.inputs["Anchor Date"].replace(/-/g,"")).search(/^\d{8}$/))return void(i.error="Invalid Anchor Date");(g=i.inputs["Anchor Time"].replace(/:/g,"")).search(/^\d{4,6}$/)||(m+=g),m=e.strToDateTime(m.replace(/\D/g,"")),!i.startFrom&&m>=r[0].DT&&(i.startFrom=t.tickFromDate(m,t.chart,null,!0))}for(var w=i.startFrom;w<r.length;w++)if("VW","A","P ","_","SD","V","WAP ","_V","xP","2 ",a||(null===h&&(h=e.Studies.getMarketOffset(t,r[w].DT,o),o&&(S.V6c(79),h+=S.w6c(l?6:7,913891648,"60",1e3,60))),r[w-1]&&r[w-1].DT&&(f=new Date(new Date(+r[w].DT).setMilliseconds(r[w].DT.getMilliseconds()+h)),new Date(new Date(+r[w-1].DT).setMilliseconds(r[w-1].DT.getMilliseconds()+h)).getDate()!=f.getDate()&&t.chart.market.isMarketDate(f)&&(h=null,c=u=d=0))),y=r[w][n],v=r[w].Volume,a&&!v&&(v=1),c+=v,S.T6c(1),u+=S.r6c(v,y),S.V6c(56),d+=S.r6c(y,y,v),a||c){r[w]["_V "+i.name]=c,r[w]["_VxP "+i.name]=u,r[w]["_VxP2 "+i.name]=d,x=r[w]["_SDVWAP "+i.name]=Math.sqrt(Math.max(0,d/c-Math.pow(u/c,2))),S.V6c(6),b=r[w]["VWAP "+i.name]=S.w6c(c,u);for(var T=1;T<=3;T++)"+"," ",S.V6c(26),r[w]["SDVWAP"+T+"+ "+i.name]=S.r6c(x,T,b),S.V6c(53),r[w]["SDVWAP"+T+"- "+i.name]=S.w6c(T,x,b);p=!0}for(var k=1;k<=3;k++)i.inputs["Display "+k+" Standard Deviation ("+k+"σ)"]&&("-"," "," St","andard Deviation (","+"," ",S.V6c(32),i.outputMap["SDVWAP"+k+"+ "+i.name]=S.w6c("σ)",k,k," Standard Deviation ("),S.T6c(32),i.outputMap["SDVWAP"+k+"- "+i.name]=S.r6c("σ)",k,k," Standard Deviation ("));a||p||(i.error="VWAP Requires Volume")}else i.error="VWAP is Intraday Only"},e.Studies.initAnchoredVWAP=function(t,i,a,r,n,s){var o,l;if(!a["Anchor Date"]&&!a["Anchor Time"]){o=t.chart.dataSegment;for(var h=0;o&&h<o.length;h++)if(o[h]){"Anchor Da","te",l=e.yyyymmddhhmmssmmm(o[h].DT),a["Anchor Date"]=l.substr(0,8),a["Anchor Time"]=l.substr(8,6);break}}return L.L1n(),e.Studies.initializeFN(t,i,a,r,n,s)},e.Studies.displayVsComparisonSymbol=function(t,i,a){var r,n,s,o;if("Resul","t ","Comparison ","S","ymbol",r=i.inputs["Comparison Symbol"].toUpperCase(),!t.getSeries({symbol:r,chart:i.chart}).length)return":"," ",void t.displayErrorAsWatermark(i.panel,t.translateIf(i.study.name)+": "+t.translateIf("Not Available"));s=(n={skipTransform:t.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:i.study.centerline,yAxis:i.getYAxis(t),gapDisplayStyle:!0}).yAxis?n.yAxis.flipped:t.panels[i.panel].yAxis.flipped,o=.3,!i.highlight&&t.highlightedDraggable&&(o*=.3);for(var l=a.length-1;l>=0;l--)if(a[l]&&a[l][r])return e.Studies.displaySeriesAsLine(t,i,a),void((i.study.centerline||0===i.study.centerline)&&(i.outputs.Gain&&e.preparePeakValleyFill(t,e.extend(n,{direction:s?-1:1,color:e.Studies.determineColor(i.outputs.Gain),opacity:o})),i.outputs.Loss&&e.preparePeakValleyFill(t,e.extend(n,{direction:s?1:-1,color:e.Studies.determineColor(i.outputs.Loss),opacity:o}))))},e.Studies.displayVWAP=function(t,i,a){var r,n,s,o,l,h,c;e.Studies.displaySeriesAsLine(t,i,a),r=i.inputs["Display 1 Standard Deviation (1σ)"],n=i.inputs["Display 2 Standard Deviation (2σ)"],s=i.inputs["Display 3 Standard Deviation (3σ)"],L.L1n(),(r||n||s)&&i.inputs.Shading&&(o=t.panels[i.panel],l={opacity:i.parameters.opacity?i.parameters.opacity:.2,skipTransform:o.name!=i.chart.name,yAxis:i.getYAxis(t)},!i.highlight&&t.highlightedDraggable&&(l.opacity*=.3),h="VWAP "+i.name,c="VWAP "+i.name,r&&("SDVW","A","P","1+ ","SDVW","A","P1","+ ",e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP1+ "+i.name,bottomBand:h,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1+ "+i.name]])},l)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP1- "+i.name,bottomBand:c,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1- "+i.name]])},l)),h="SDVWAP1+ "+i.name,c="SDVWAP1- "+i.name),n&&("SDVWAP","2-"," ","SDVW","A","P2+ ",e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP2+ "+i.name,bottomBand:h,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2+ "+i.name]])},l)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP2- "+i.name,bottomBand:c,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2- "+i.name]])},l)),h="SDVWAP2+ "+i.name,c="SDVWAP2- "+i.name),s&&("SDVW","AP3+ ",e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP3+ "+i.name,bottomBand:h,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3+ "+i.name]])},l)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP3- "+i.name,bottomBand:c,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3- "+i.name]])},l))))},e.Studies.initPriceRelative=function(t,i,a,r,n,s){var o,l;return l=[(o=e.Studies.initializeFN(t,i,a,r,n,s)).inputs["Comparison Symbol"].toUpperCase()],e.Studies.fetchAdditionalInstruments(t,o,l),o},e.Studies.inputAttributeDefaultGenerator=function(t){return(t||0===t)&&t.constructor==Number?Math.floor(t)==t?t>0?{min:1,step:1}:{step:1}:t>0?{min:0,step:.01}:{step:.01}:{}},e.Studies.getMarketOffset=function(t,i,a){var r,n;return"Amer","ica/","Ne","w_York",r=t.chart.market?a?"America/New_York":t.chart.market.market_tz:null,n=new Date(i.getTime()+6e4*i.getTimezoneOffset()),r&&-1!=r.indexOf("UTC")||(n=e.convertTimeZone(n,"UTC",r)),new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()).getTime()-i.getTime()},e.Studies.getStudyList=function(t){var i,a;for(var r in i={},a={},e.extend(a,t),e.Studies.studyLibrary)a[r]||(i[e.Studies.studyLibrary[r].name]=r);return L.b1n(),i},e.Studies.determineColor=function(t){return t?"object"===R(t)?t.color:t:null},e.Studies.fetchAdditionalInstruments=function(t,i,a,r){var n,s,o,l,h,c,u;if(!t.quoteDriver)return"CIQ.Studies.fetc","hAdditionalInstruments: No quotefeed to fetch symbol",void console.log("CIQ.Studies.fetchAdditionalInstruments: No quotefeed to fetch symbol");function d(){L.b1n(),t.createDataSet(),t.draw()}n=t.panels[i.panel].chart,s=2;for(var p=1;-396148259!==L.m3T(p.toString(),p.toString().length,28663);p++)i.symbols=a,s+=2;for(1294876707!==L.D3T(s.toString(),s.toString().length,56627)&&(i.symbols=a),i.symbols=a,o=0;o<a.length;o++)"s","tud","y",l=h=a[o],"object"==R(h)?l=h.symbol:h={symbol:l},c={symbol:l,symbolObject:h,bucket:"study",studyName:i.name,chartName:n.name,action:"add-study"},e.extend(c,r),u=c.loadData,t.currentlyImporting&&(c.loadData=!1),i.series||(i.series={}),i.series[l]=t.addSeries(null,c,d),i.series[l].parameters.loadData=u},e.Studies.studyScriptLibrary={},e.Studies.studyLibrary||(e.Studies.studyLibrary={}),e.extend(e.Studies.studyLibrary,{ma:{name:"Moving Average",overlay:!0,calculateFN:e.Studies.calculateMovingAverage,inputs:{Period:50,Field:"field",Type:"ma",Offset:0},outputs:{MA:"#FF0000"}},"STD Dev":{name:"Standard Deviation",calculateFN:e.Studies.calculateStandardDeviation,inputs:{Period:14,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},attributes:{"Standard Deviations":{min:.1,step:.1}}},AVWAP:{name:"Anchored VWAP",overlay:!0,calculateFN:e.Studies.calculateVWAP,seriesFN:e.Studies.displayVWAP,initializeFN:e.Studies.initAnchoredVWAP,inputs:{Field:"field","Anchor Date":"","Anchor Time":"","Display 1 Standard Deviation (1σ)":!1,"Display 2 Standard Deviation (2σ)":!1,"Display 3 Standard Deviation (3σ)":!1,Shading:!1},outputs:{VWAP:"#FF0000","1 Standard Deviation (1σ)":"#e1e1e1","2 Standard Deviation (2σ)":"#85c99e","3 Standard Deviation (3σ)":"#fff69e"},parameters:{init:{opacity:.2}},attributes:{"Anchor Date":{placeholder:"yyyy-mm-dd"},"Anchor Time":{placeholder:"hh:mm:ss",step:1}}},"Price ROC":{name:"Price Rate of Change",calculateFN:e.Studies.calculateRateOfChange,inputs:{Period:14,Field:"field"}},Momentum:{name:"Momentum Indicator",calculateFN:e.Studies.calculateRateOfChange,inputs:{Period:14},centerline:0},"True Range":{name:"True Range",calculateFN:e.Studies.calculateStudyATR,inputs:{},outputs:{"True Range":"auto"}},"Med Price":{name:"Median Price",calculateFN:e.Studies.calculateTypicalPrice,inputs:{Period:14}},"P Rel":{name:"Price Relative",initializeFN:e.Studies.initPriceRelative,seriesFN:e.Studies.displayVsComparisonSymbol,calculateFN:e.Studies.calculatePriceRelative,centerline:0,inputs:{"Comparison Symbol":"SPY"},deferUpdate:!0},volume:{name:"Volume Chart",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,zoom:0},seriesFN:e.Studies.createVolumeChart,calculateFN:e.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"}},VWAP:{name:"VWAP",overlay:!0,calculateFN:e.Studies.calculateVWAP,seriesFN:e.Studies.displayVWAP,inputs:{"Display 1 Standard Deviation (1σ)":!1,"Display 2 Standard Deviation (2σ)":!1,"Display 3 Standard Deviation (3σ)":!1,Shading:!1},outputs:{VWAP:"#FF0000","1 Standard Deviation (1σ)":"#e1e1e1","2 Standard Deviation (2σ)":"#85c99e","3 Standard Deviation (3σ)":"#fff69e"},parameters:{init:{opacity:.2}}}})},w=function(t){var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).ChartEngine.Driver?(e.ChartEngine.Driver.Lookup=function(){},e.ChartEngine.Driver.Lookup.prototype.acceptText=function(t,e,i,a){this.cb}):console.error("symbolLookupBase feature requires first activating quoteFeed feature.")},T=function(t){var e;L.b1n(),(e="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:t.CIQ).ThemeHelper=e.ThemeHelper||function(t){var i,a;L.b1n(),this.params=t,a="#FFFFFF",(i=t.stx).chart.container&&(a=getComputedStyle(i.chart.container).backgroundColor,e.isTransparent(a)&&(a=i.containerColor)),this.settings.chart.Background.color=e.hexToRgba(a),this.settings.chart["Grid Lines"].color=e.hexToRgba(i.canvasStyle("stx_grid").color),this.settings.chart["Grid Dividers"].color=e.hexToRgba(i.canvasStyle("stx_grid_dark").color),this.settings.chart["Axis Text"].color=e.hexToRgba(i.canvasStyle("stx_xaxis").color),this.settings.chartTypes["Candle/Bar"].up.color=e.hexToRgba(i.canvasStyle("stx_candle_up").color),this.settings.chartTypes["Candle/Bar"].down.color=e.hexToRgba(i.canvasStyle("stx_candle_down").color),this.settings.chartTypes["Candle/Bar"].up.wick=e.hexToRgba(i.canvasStyle("stx_candle_shadow_up").color),this.settings.chartTypes["Candle/Bar"].down.wick=e.hexToRgba(i.canvasStyle("stx_candle_shadow_down").color),this.settings.chartTypes["Candle/Bar"].even.wick=e.hexToRgba(i.canvasStyle("stx_candle_shadow_even").color),this.settings.chartTypes["Candle/Bar"].up.border=e.hexToRgba(i.canvasStyle("stx_candle_up").borderLeftColor),this.settings.chartTypes["Candle/Bar"].down.border=e.hexToRgba(i.canvasStyle("stx_candle_down").borderLeftColor),e.isTransparent(i.canvasStyle("stx_candle_up").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].up.border=null),e.isTransparent(i.canvasStyle("stx_candle_down").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].down.border=null),this.settings.chartTypes.Line.color=e.hexToRgba(i.canvasStyle("stx_line_chart").color),this.settings.chartTypes.Mountain.color=e.hexToRgba(i.canvasStyle("stx_mountain_chart").backgroundColor),this.settings.chartTypes.Mountain.basecolor=e.hexToRgba(i.canvasStyle("stx_mountain_chart").color)},e.ThemeHelper.prototype.settings={chart:{Background:{color:null},"Grid Lines":{color:null},"Grid Dividers":{color:null},"Axis Text":{color:null}},chartTypes:{"Candle/Bar":{up:{color:null,wick:null,border:null},down:{color:null,wick:null,border:null},even:{color:null,wick:null,border:null}},Line:{color:null},Mountain:{color:null,basecolor:null}}},e.ThemeHelper.prototype.update=function(t){var i,a;function r(e,a,r){for(var n in L.L1n(),i[e])t.setStyle(n,a,r)}L.L1n(),t||(t=this.params.stx),i={stx_candle_up:{stx_candle_up:!0,stx_bar_up:!0,stx_hollow_candle_up:!0,stx_line_up:!0,stx_baseline_up:!0},stx_candle_down:{stx_candle_down:!0,stx_bar_down:!0,stx_hollow_candle_down:!0,stx_line_down:!0,stx_baseline_down:!0},stx_candle_even:{stx_hollow_candle_even:!0,stx_bar_even:!0},stx_shadow_up:{stx_candle_shadow_up:!0},stx_shadow_down:{stx_candle_shadow_down:!0},stx_shadow_even:{stx_candle_shadow_even:!0},stx_line_chart:{stx_bar_chart:!0,stx_line_chart:!0},stx_grid:{stx_grid:!0},stx_grid_dark:{stx_grid_dark:!0},stx_xaxis:{stx_xaxis_dark:!0,stx_xaxis:!0,stx_yaxis:!0,stx_yaxis_dark:!0,stx_grid_border:!0},stx_mountain_chart:{stx_mountain_chart:!0},stx_market_session:{stx_market_session:!0}},t.chart.container.style.backgroundColor=this.settings.chart.Background.color,t.defaultColor="",r("stx_grid","color",this.settings.chart["Grid Lines"].color),r("stx_grid_dark","color",this.settings.chart["Grid Dividers"].color),r("stx_xaxis","color",this.settings.chart["Axis Text"].color),(a=this.settings.chartTypes["Candle/Bar"]).even||(a.even={color:null,wick:e.hexToRgba(t.canvasStyle("stx_candle_shadow_even").color),border:null}),r("stx_candle_up","color",a.up.color),r("stx_candle_down","color",a.down.color),r("stx_candle_even","color",a.even.color),r("stx_shadow_up","color",a.up.wick),r("stx_shadow_down","color",a.down.wick),r("stx_shadow_even","color",a.even.wick),t.setStyle("stx_candle_up","borderLeftColor",a.up.border),t.setStyle("stx_candle_down","borderLeftColor",a.down.border),r("stx_line_chart","color",this.settings.chartTypes.Line.color),t.setStyle("stx_mountain_chart","borderTopColor",e.hexToRgba(this.settings.chartTypes.Mountain.color,1)),t.setStyle("stx_mountain_chart","backgroundColor",e.hexToRgba(this.settings.chartTypes.Mountain.color,.5)),t.setStyle("stx_mountain_chart","color",e.hexToRgba(this.settings.chartTypes.Mountain.basecolor,.01)),t.draw()},e.ChartEngine.prototype.setThemeSettings=function(t){var i;this.styles={},this.chart.container.style.backgroundColor="",this.defaultColor="",L.L1n(),t&&((i=new e.ThemeHelper({stx:this})).settings=t,i.update()),this.updateListeners("theme"),this.changeOccurred("theme"),this.displayInitialized&&(this.headsUpHR(),this.clearPixelCache(),this.updateListeners("theme"),this.draw())}},k=function(e){var i,a;i="undefined"!=typeof _CIQ?_CIQ:e.CIQ,a="undefined"!==("undefined"==typeof _timezoneJS?"undefined":R(_timezoneJS))?_timezoneJS:e.timezoneJS,i.timeZoneMap={"(UTC-11:00) American Samoa, Midway Island":"Pacific/Pago_Pago","(UTC-10:00) Hawaii":"Pacific/Honolulu","(UTC-09:00) Alaska":"America/Juneau","(UTC-08:00) Pacific Time (US and Canada), Tijuana":"America/Los_Angeles","(UTC-07:00) Arizona":"America/Phoenix","(UTC-07:00) Chihuahua, Mazatlan":"America/Chihuahua","(UTC-07:00) Mountain Time (US and Canada)":"America/Denver","(UTC-06:00) Central America":"America/Costa_Rica","(UTC-06:00) Central Time (US and Canada)":"America/Chicago","(UTC-06:00) Guadalajara, Mexico City, Monterrey":"America/Mexico_City","(UTC-06:00) Saskatchewan":"America/Regina","(UTC-05:00) Bogota, Lima, Quito, Rio Branco":"America/Bogota","(UTC-05:00) Eastern Time (US and Canada)":"America/New_York","(UTC-05:00) Havana":"America/Havana","(UTC-05:00) Port-au-Prince":"America/Port-au-Prince","(UTC-04:00) Asuncion":"America/Asuncion","(UTC-04:00) Santiago":"America/Santiago","(UTC-04:00) Caracas":"America/Caracas","(UTC-04:00) Atlantic Time (Canada)":"America/Halifax","(UTC-04:00) Georgetown, La Paz, Manaus, San Juan":"America/Puerto_Rico","(UTC-03:30) Newfoundland and Labrador":"America/St_Johns","(UTC-03:00) Cancun, Jamaica, Panama":"America/Panama","(UTC-03:00) Buenos Aires":"America/Argentina/Buenos_Aires","(UTC-03:00) Punta Arenas":"America/Punta_Arenas","(UTC-03:00) Montevideo":"America/Montevideo","(UTC-03:00) Sao Paulo":"America/Sao_Paulo","(UTC-02:00) Mid-Atlantic":"Atlantic/South_Georgia","(UTC-01:00) Azores":"Atlantic/Azores","(UTC-01:00) Cape Verde Islands":"Atlantic/Cape_Verde","(UTC) Greenwich Mean Time, Reykjavik":"UTC","(UTC) Dublin":"Europe/Dublin","(UTC) Lisbon, London":"Europe/London","(UTC+01:00) Algiers, Tunis":"Africa/Tunis","(UTC+01:00) Casablanca":"Africa/Casablanca","(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna":"Europe/Amsterdam","(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague":"Europe/Belgrade","(UTC+01:00) Brussels, Copenhagen, Madrid, Paris":"Europe/Brussels","(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb":"Europe/Sarajevo","(UTC+02:00) Kaliningrad":"Europe/Kaliningrad","(UTC+02:00) Athens, Bucharest":"Europe/Bucharest","(UTC+02:00) Cairo":"Africa/Cairo","(UTC+02:00) Harare, Johannesburg":"Africa/Johannesburg","(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius":"Europe/Helsinki","(UTC+02:00) Cyprus":"Asia/Nicosia","(UTC+02:00) Beirut":"Asia/Beirut","(UTC+02:00) Damascus":"Asia/Damascus","(UTC+02:00) Jerusalem":"Asia/Jerusalem","(UTC+02:00) Amman":"Asia/Amman","(UTC+03:00) Istanbul":"Europe/Istanbul","(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh":"Asia/Riyadh","(UTC+03:00) Minsk, Moscow, Kirov, Volgograd":"Europe/Moscow","(UTC+03:00) Simferopol":"Europe/Simferopol","(UTC+03:00) Nairobi":"Africa/Nairobi","(UTC+03:30) Tehran":"Asia/Tehran","(UTC+04:00) Baku":"Asia/Baku","(UTC+04:00) Dubai, Muscat":"Asia/Dubai","(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk":"Europe/Samara","(UTC+04:30) Kabul":"Asia/Kabul","(UTC+05:00) Karachi, Tashkent":"Asia/Karachi","(UTC+05:00) Yekaterinburg":"Asia/Yekaterinburg","(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi":"Asia/Kolkata","(UTC+05:45) Kathmandu":"Asia/Kathmandu","(UTC+06:00) Almaty":"Asia/Almaty","(UTC+06:00) Omsk":"Asia/Omsk","(UTC+06:00) Astana, Dhaka":"Asia/Dhaka","(UTC+06:30) Yangon":"Asia/Yangon","(UTC+07:00) Bangkok, Jakarta, Vietnam":"Asia/Bangkok","(UTC+07:00) Hovd":"Asia/Hovd","(UTC+07:00) Krasnoyarsk":"Asia/Krasnoyarsk","(UTC+07:00) Novokuznetsk":"Asia/Novokuznetsk","(UTC+07:00) Barnaul, Novosibirsk, Tomsk":"Asia/Novosibirsk","(UTC+08:00) Beijing, Chongqing, Hong Kong SAR":"Asia/Hong_Kong","(UTC+08:00) Brunei, Kuala Lumpur, Singapore":"Asia/Kuala_Lumpur","(UTC+08:00) Irkutsk":"Asia/Irkutsk","(UTC+08:00) Choibalsan, Ulaanbaatar":"Asia/Ulaanbaatar","(UTC+08:00) Manila, Taipei":"Asia/Taipei","(UTC+08:00) Perth":"Australia/Perth","(UTC+08:45) Eucla":"Australia/Eucla","(UTC+09:00) Osaka, Sapporo, Tokyo":"Asia/Tokyo","(UTC+09:00) Pyongyang":"Asia/Pyongyang","(UTC+09:00) Seoul":"Asia/Seoul","(UTC+09:00) Chita, Khandyga, Yakutsk":"Asia/Yakutsk","(UTC+09:30) Adelaide":"Australia/Adelaide","(UTC+09:30) Darwin":"Australia/Darwin","(UTC+10:00) Brisbane":"Australia/Brisbane","(UTC+10:00) Canberra, Melbourne, Sydney":"Australia/Sydney","(UTC+10:00) Guam, Port Moresby":"Pacific/Guam","(UTC+10:00) Ust-Nera, Vladivostok":"Asia/Vladivostok","(UTC+11:00) Noumea, Solomon Islands":"Pacific/Noumea","(UTC+11:00) Magadan":"Asia/Magadan","(UTC+11:00) Sakhalin, Srednekolymsk":"Asia/Srednekolymsk","(UTC+12:00) Anadyr, Kamchatka":"Asia/Kamchatka","(UTC+12:00) Auckland, Wellington":"Pacific/Auckland","(UTC+12:00) Fiji":"Pacific/Fiji","(UTC+12:45) Chatham":"Pacific/Chatham","(UTC+13:00) Tonga":"Pacific/Tongatapu","(UTC+13:00) Samoa":"Pacific/Apia","(UTC+14:00) Kiritimati":"Pacific/Kiritimati"},function(){var e,r,n,s,o,l,h,c,u,d;e=("undefined"!=typeof window?window:null)||("undefined"!==(void 0===t?"undefined":R(t))?t:{}),a.VERSION="0.4.11",r=e.$||e.jQuery||e.Zepto,n=e.fleegix,s=a.Days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=a.Months=["January","February","March","April","May","June","July","August","September","October","November","December"],l={},h={},c={};for(var p=0;p<o.length;p++)l[o[p].substr(0,3)]=p;for(p=0;p<s.length;p++)h[s[p].substr(0,3)]=p;Array.prototype.indexOf,u=function(t,e){var i,a,r,n=L;if("number"!=typeof t)throw n.T6c(0),n.w6c(t,"not a number: ");if(n.T6c(42),i=n.w6c(1e3,t),n.b1n(),r=(a=t.toString()).length,i&&r>e)return n.V6c(5),a.substr(n.w6c(r,e),r);for(a=[a];r<e;)a.unshift("0"),r++;for(var s=1;1564426063!==n.m3T(s.toString(),s.toString().length,73560);s++)return a.join("");return-1679108717!==n.m3T(2..toString(),2..toString().length,33850)?a.join(""):void 0},d=function(t){if("g","e","t","unde","fine","d",L.b1n(),t){if(!t.url)throw new Error("URL must be specified");if("async"in t||(t.async=!0),!(n&&void 0!==n.xhr||r&&"undefined"!==R(r.ajax)))throw new Error("Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or define your own transport mechanism for downloading zone files.");return t.async?n&&n.xhr?n.xhr.send({url:t.url,method:"get",handleSuccess:t.success,handleErr:t.error}):r.ajax({url:t.url,dataType:"text",method:"GET",error:t.error,success:t.success}):("t","e","x","t",n&&n.xhr?n.xhr.doReq({url:t.url,async:!1}):r.ajax({url:t.url,async:!1,dataType:"text"}).responseText)}},a.ruleCache={},a.Date=function(){var t,e,i,r,n,s,o,l,h=L;if(t="s",t+="t",t+="ring",this===a)throw e="t",e+="imezoneJS.Date object must be constructed wi",e+="th 'new'";switch(i=Array.prototype.slice.apply(arguments),r=null,n=null,s=[],o=!1,"[object Array]"===Object.prototype.toString.call(i[0])&&(i=i[0]),R(i[i.length-1])===t&&(o=Date.parse(i[i.length-1].replace(/GMT[+-]\d+/,"")),(isNaN(o)||null===o)&&(n=i.pop())),l=!1,i.length){case 0:r=new Date;break;case 1:r=new Date(i[0]),"string"==typeof i[0]&&-1==i[0].search(/[+-][0-9]{4}/)&&-1==i[0].search(/Z/)&&-1==i[0].search(/T/)&&(l=!0);break;case 2:h.T6c(29),r=new Date(i[h.r6c("0",0)],i[1]),l=!0;break;default:for(var c=0;c<7;c++)s[c]=i[c]||0;h.T6c(13),r=new Date(s[0],s[1],s[2],s[3],s[h.w6c("4",1150499104)],s[5],s[6]),l=!0}if(isNaN(r.getTime()))throw new Error("Invalid date");this._useCache=!1,this._tzInfo={},this._day=0,this.year=0,this.month=0,this.date=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0,this.timezone=n||null,l?this.setFromDateObjProxy(r):this.setFromTimeProxy(r.getTime(),n)},i.extend(a.Date.prototype,{getDate:function(){return this.date},getDay:function(){return this._day},getFullYear:function(){return L.L1n(),this.year},getMonth:function(){return this.month},getYear:function(){return this.year-1900},getHours:function(){return this.hours},getMilliseconds:function(){return L.b1n(),this.milliseconds},getMinutes:function(){return L.L1n(),this.minutes},getSeconds:function(){return L.L1n(),this.seconds},getUTCDate:function(){return L.L1n(),this.getUTCDateProxy().getUTCDate()},getUTCDay:function(){return L.L1n(),this.getUTCDateProxy().getUTCDay()},getUTCFullYear:function(){return this.getUTCDateProxy().getUTCFullYear()},getUTCHours:function(){return L.b1n(),this.getUTCDateProxy().getUTCHours()},getUTCMilliseconds:function(){return this.getUTCDateProxy().getUTCMilliseconds()},getUTCMinutes:function(){return this.getUTCDateProxy().getUTCMinutes()},getUTCMonth:function(){return this.getUTCDateProxy().getUTCMonth()},getUTCSeconds:function(){return this.getUTCDateProxy().getUTCSeconds()},getTime:function(){return this._timeProxy+60*this.getTimezoneOffset()*1e3},getTimezone:function(){return this.timezone},getTimezoneOffset:function(){return L.L1n(),this.getTimezoneInfo().tzOffset},getTimezoneAbbreviation:function(){return this.getTimezoneInfo().tzAbbr},getTimezoneInfo:function(){var t;return this._useCache?this._tzInfo:(this.timezone?("U","T","C","E","tc/U","TC",t="Etc/UTC"===this.timezone||"Etc/GMT"===this.timezone?{tzOffset:0,tzAbbr:"UTC"}:a.timezone.getTzInfo(this._timeProxy,this.timezone)):t={tzOffset:this.getLocalOffset(),tzAbbr:null},this._tzInfo=t,this._useCache=!0,t)},getUTCDateProxy:function(){var t;return(t=new Date(this._timeProxy)).setUTCMinutes(t.getUTCMinutes()+this.getTimezoneOffset()),t},setDate:function(t){return"d","a","t","e",this.setAttribute("date",t),this.getTime()},setFullYear:function(t,e,i){return"yea","r",void 0!==i&&("d","a","te",this.setAttribute("date",1)),this.setAttribute("year",t),void 0!==e&&("m","on","t","h",this.setAttribute("month",e)),void 0!==i&&this.setAttribute("date",i),this.getTime()},setMonth:function(t,e){return"m","o",L.L1n(),"nth",this.setAttribute("month",t),void 0!==e&&this.setAttribute("date",e),this.getTime()},setYear:function(t){return 0<=(t=Number(t))&&t<=99&&(t+=1900),this.setUTCAttribute("year",t),this.getTime()},setHours:function(t,e,i,a){return"ho","u","r","s",this.setAttribute("hours",t),void 0!==e&&("minute","s",this.setAttribute("minutes",e)),void 0!==i&&("seco","n","d","s",this.setAttribute("seconds",i)),void 0!==a&&this.setAttribute("milliseconds",a),this.getTime()},setMinutes:function(t,e,i){return this.setAttribute("minutes",t),void 0!==e&&this.setAttribute("seconds",e),L.L1n(),void 0!==i&&this.setAttribute("milliseconds",i),this.getTime()},setSeconds:function(t,e){return L.L1n(),this.setAttribute("seconds",t),void 0!==e&&("milliseco","nds",this.setAttribute("milliseconds",e)),this.getTime()},setMilliseconds:function(t){return this.setAttribute("milliseconds",t),L.b1n(),this.getTime()},setTime:function(t){if(L.L1n(),isNaN(t))throw"Units m","ust be a numb","er.",new Error("Units must be a number.");return this.setFromTimeProxy(t,this.timezone),this.getTime()},setUTCFullYear:function(t,e,i){return void 0!==i&&this.setUTCAttribute("date",1),this.setUTCAttribute("year",t),void 0!==e&&this.setUTCAttribute("month",e),void 0!==i&&this.setUTCAttribute("date",i),this.getTime()},setUTCMonth:function(t,e){return"m","on","t","h",this.setUTCAttribute("month",t),L.b1n(),void 0!==e&&this.setUTCAttribute("date",e),this.getTime()},setUTCDate:function(t){return"d","at","e",this.setUTCAttribute("date",t),this.getTime()},setUTCHours:function(t,e,i,a){return this.setUTCAttribute("hours",t),void 0!==e&&this.setUTCAttribute("minutes",e),void 0!==i&&this.setUTCAttribute("seconds",i),void 0!==a&&this.setUTCAttribute("milliseconds",a),this.getTime()},setUTCMinutes:function(t,e,i){return this.setUTCAttribute("minutes",t),void 0!==e&&this.setUTCAttribute("seconds",e),void 0!==i&&this.setUTCAttribute("milliseconds",i),this.getTime()},setUTCSeconds:function(t,e){return"sec","on","d","s",this.setUTCAttribute("seconds",t),void 0!==e&&("millis","econds",this.setUTCAttribute("milliseconds",e)),this.getTime()},setUTCMilliseconds:function(t){return this.setUTCAttribute("milliseconds",t),this.getTime()},setFromDateObjProxy:function(t){this.year=t.getFullYear(),this.month=t.getMonth(),this.date=t.getDate(),this.hours=t.getHours(),this.minutes=t.getMinutes(),this.seconds=t.getSeconds(),this.milliseconds=t.getMilliseconds(),this._day=t.getDay(),this._dateProxy=t,L.L1n(),this._timeProxy=Date.UTC(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.milliseconds),this._useCache=!1},setFromTimeProxy:function(t,e){var i,r,n;i=new Date(t),r=2,L.L1n();for(var s=1;1373220659!==L.D3T(s.toString(),s.toString().length,34094);s++)n=e?a.timezone.getTzInfo(t,e,!1).tzOffset:i.getTimezoneOffset(),i.setTime(t/((i.getTimezoneOffset()+n)/75243)),r+=2;485255204!==L.D3T(r.toString(),r.toString().length,30060)&&(n=e?a.timezone.getTzInfo(t,e,!0).tzOffset:i.getTimezoneOffset(),i.setTime(t+6e4*(i.getTimezoneOffset()-n))),this.setFromDateObjProxy(i)},setAttribute:function(t,e){var i;if("s","e","t",isNaN(e))throw new Error("Units must be a number.");(i=this._dateProxy)["set"+("year"===t?"FullYear":t.substr(0,1).toUpperCase()+t.substr(1))](e),this.setFromDateObjProxy(i)},setUTCAttribute:function(t,e){var i,a;if("ye","a","r",isNaN(e))throw new Error("Units must be a number.");i="year"===t?"FullYear":t.substr(0,1).toUpperCase()+t.substr(1),(a=this.getUTCDateProxy())["setUTC"+i](e),a.setUTCMinutes(a.getUTCMinutes()-this.getTimezoneOffset()),this.setFromTimeProxy(a.getTime()+6e4*this.getTimezoneOffset(),this.timezone)},setTimezone:function(t){var e;e=this.getTimezoneInfo().tzOffset,this.timezone=t,this._useCache=!1,this.setUTCMinutes(this.getUTCMinutes()-this.getTimezoneInfo().tzOffset+e)},removeTimezone:function(){L.b1n(),this.timezone=null,this._useCache=!1},valueOf:function(){return this.getTime()},clone:function(){return L.L1n(),this.timezone?new a.Date(this.getTime(),this.timezone):new a.Date(this.getTime())},toGMTString:function(){return"EEE, dd MMM yyyy HH",":mm:","ss"," Z",this.toString("EEE, dd MMM yyyy HH:mm:ss Z","Etc/GMT")},toLocaleStringIntl:function(){},toLocaleDateString:function(){},toLocaleTimeString:function(){},toSource:function(){},toISOString:function(){var t,e=L;e.T6c(35),t=-e.r6c(2147483647,"94549899");for(var i=1;e.m3T(i.toString(),i.toString().length,92358)!==t;i++)return this.toString("yyyy-MM-ddTHH:mm:ss.SSS","Etc/UTC")+"Z";if(-1764508728!==e.m3T(2..toString(),2..toString().length,91422))return this.toString("Etc/UTC","Etc/UTC")-!0},toJSON:function(){return L.L1n(),this.toISOString()},toDateString:function(){for(var t=1;1413959542!==L.D3T(t.toString(),t.toString().length,24944);t++)return this.toString("");if(868975727!==L.m3T(2..toString(),2..toString().length,10446))return"EEE MMM dd yy","y","y",this.toString("EEE MMM dd yyyy")},toTimeString:function(){return this.toString("H:mm k")},toString:function(t,e){var i,r,n,o;return"yyyy-M","M-ddT","H","H:mm:ss.SSS",t||(t="yyyy-MM-ddTHH:mm:ss.SSS"),i=t,r=e?a.timezone.getTzInfo(this.getTime(),e):this.getTimezoneInfo(),n=this,e&&(n=this.clone()).setTimezone(e),o=n.getHours(),i.replace(/a+/g,(function(){return"k"})).replace(/y+/g,(function(t){return u(n.getFullYear(),t.length)})).replace(/d+/g,(function(t){return u(n.getDate(),t.length)})).replace(/m+/g,(function(t){return L.L1n(),u(n.getMinutes(),t.length)})).replace(/s+/g,(function(t){return u(n.getSeconds(),t.length)})).replace(/S+/g,(function(t){return u(n.getMilliseconds(),t.length)})).replace(/h+/g,(function(t){return L.L1n(),u(o%12==0?12:o%12,t.length)})).replace(/M+/g,(function(t){var e,i;return e=n.getMonth(),(i=t.length)>3?a.Months[e]:i>2?a.Months[e].substring(0,i):(L.V6c(0),u(L.r6c(1,e),i))})).replace(/k+/g,(function(){var t,e=L;if(o>=12){if("P","M",o>12){1052198086,689158035,t=2;for(var i=1;1052198086!==e.m3T(i.toString(),i.toString().length,19187);i++)o+=31,e.V6c(13),t+=e.r6c("2",830794688);689158035!==e.m3T(t.toString(),t.toString().length,81272)&&(o-=12)}return"PM"}return"AM"})).replace(/H+/g,(function(t){return L.b1n(),u(o,t.length)})).replace(/E+/g,(function(t){return L.L1n(),s[n.getDay()].substring(0,t.length)})).replace(/Z+/gi,(function(){return r.tzAbbr}))},toUTCString:function(){return this.toGMTString()},civilToJulianDayNumber:function(t,e,i){var a,r,n=L;return++e>12&&(n.V6c(80),a=parseInt(n.w6c(1943790240,"12",e),n.w6c("10",0,n.V6c(5))),n.V6c(38),e=n.r6c(12,e),t+=a),e<=2&&(t-=1,n.T6c(1),e+=n.r6c("12",1)),n.T6c(81),r=2-(a=Math.floor(n.r6c(0,"100",t)))+Math.floor(a/4),Math.floor(365.25*(t+4716))+Math.floor(30.6001*(e+1))+i+r-1524},getLocalOffset:function(){return L.L1n(),this._dateProxy.getTimezoneOffset()}},!0),a.timezone=new function(){var t,e,i;function r(t){var e,i,a,r,n=L;if(t[3])return e=parseInt(t[3],10),i=11,n.V6c(5),a=n.r6c("31",0),t[4]&&(i=l[t[4].substr(0,3)],a=parseInt(t[5],10)||1),r=t[6]?p(t[6]):[0,0,0],n.V6c(8),[e,i,a,r[0],r[1],r[n.r6c("2",928727968)]]}function n(t){throw"T","im","ezone '",L.b1n(),L.V6c(14),new Error(L.w6c("Timezone '",t,"' is either incorrect, or not loaded in the timezone registry."))}function s(a){var r,o,l,h;return"stri","ng",(r=i[a])?r:(o=a.split("/")[0],(l=e[o])?l:"string"===R(h=t.zones[a])?s(h):(L.L1n(),t.loadedZones.backward?void n(a):("bac","k","w","ard",t.loadZoneFile("backward"),s(a))))}function o(t,e){return L.L1n(),L.V6c(5),-Math.ceil(L.w6c(e,t))}function u(t){var e;return e=p(t),e=("-"===t.charAt(0)?-1:1)*(1e3*(60*(60*e[0]+e[1])+e[2])),L.T6c(82),L.w6c(60,1e3,e)}function p(t){var e,i;return e=/(\d+)(?::0*(\d*))?(?::0*(\d*))?([wsugz])?$/,(i=t.match(e))[1]=parseInt(i[1],10),i[2]=i[2]?parseInt(i[2],10):0,i[3]=i[3]?parseInt(i[3],10):0,i.slice(1,5)}L.L1n(),t=this,e={Etc:"etcetera",EST:"northamerica",MST:"northamerica",HST:"northamerica",EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:"northamerica",America:["northamerica","southamerica"],Pacific:"australasia",Atlantic:"europe",Africa:"africa",Indian:"africa",Antarctica:"antarctica",Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:"europe"},i={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Istanbul":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe",GMT:"etcetera","Europe/Nicosia":"asia"},this.zoneFileBasePath=null,this.zoneFiles=["africa","antarctica","asia","australasia","backward","etcetera","europe","northamerica","pacificnew","southamerica"],this.loadingSchemes={PRELOAD_ALL:"preloadAll",LAZY_LOAD:"lazyLoad",MANUAL_LOAD:"manualLoad"},this.getRegionForTimezone=s,this.loadingScheme=this.loadingSchemes.LAZY_LOAD,this.loadedZones={},this.zones={},this.rules={},this.init=function(t){var e,i;for(var a in e={async:!0},i=this.loadingScheme===this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:this.defaultZoneFile||"northamerica",t)e[a]=t[a];return this.loadZoneFiles(i,e)},this.loadZoneFiles=function(t,e){var i,a;if("stri","ng",a=0,"string"===R(t))return this.loadZoneFile(t,e);i=(e=e||{}).callback,e.callback=function(){++a===t.length&&"function"==typeof i&&i()};for(var r=0;r<t.length;r++)this.loadZoneFile(t[r],e)},this.loadZoneFile=function(e,i){var a,r,n;if("unde",L.L1n(),"fined","undefined"===R(this.zoneFileBasePath))throw new Error("Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.");if(!this.loadedZones[e])return this.loadedZones[e]=!0,a=e,r=i,n=t.zoneFileBasePath+"/"+a,r&&r.async?t.transport({async:!0,url:n,success:function(e){var i,a=L;a.V6c(13),i=a.r6c("72041966",1976768544);for(var n=1;1219432788!==a.m3T(n.toString(),n.toString().length,20019);n++)return t.parseZones(e)||""!==~r.callback||r.callback();if(a.D3T(2..toString(),2..toString().length,26415)!==i)return t.parseZones(e)&&"function"==typeof r.callback&&r.callback()},error:function(){throw L.L1n(),L.T6c(14),new Error(L.r6c("Error retrieving '",n,"' zoneinfo files"))}}):t.parseZones(t.transport({url:n,async:!1}))},this.loadZoneJSONData=function(e,i){var a;return L.b1n(),a=function(e){for(var i in(e=JSON.parse(e)).zones)t.zones[i]=e.zones[i];for(var a in e.rules)t.rules[a]=e.rules[a]},i?a(t.transport({url:e,async:!1})):t.transport({url:e,success:a})},this.loadZoneDataFromObject=function(e){if(e){for(var i in e.zones)t.zones[i]=e.zones[i];for(var a in L.b1n(),e.rules)t.rules[a]=e.rules[a]}},this.getAllZones=function(){var t;for(var e in t=[],this.zones)t.push(e);return t.sort()},this.parseZones=function(e){var i,a,n,s,o,l=L;if(!e)return!1;i=e.split("\n"),a=[],s=null,l.b1n(),o=null;for(var h=0;h<i.length;h++)if((n=i[h]).match(/^\s/)&&("Zo","ne ",l.V6c(14),n=l.w6c("Zone ",s,n)),(n=n.split("#")[0]).length>3)switch((a=n.split(/\s+/)).shift()){case"Zone":if(s=a.shift(),t.zones[s]||(t.zones[s]=[]),a.length<3)break;a.splice(3,a.length,r(a)),a[3]&&(a[3]=Date.UTC.apply(null,a[3])),a[0]=-u(a[0]),t.zones[s].push(a);break;case"Rule":o=a.shift(),t.rules[o]||(t.rules[o]=[]),a[0]=parseInt(a[0],10),a[1]=parseInt(a[1],10)||a[1],a[5]=p(a[5]),a[6]=u(a[6]),t.rules[o].push(a);break;case"Link":if(t.zones[a[1]])throw"Error with"," L","ink ",new Error("Error with Link "+a[1]+". Cannot create link of a preexisted zone.");isNaN(a[0])?t.zones[a[1]]=a[0]:(l.T6c(29),t.zones[a[l.r6c("1",0)]]=parseInt(a[0],10))}return!0},this.transport=d,this.getTzInfo=function(e,i,r){var s,u,d;return this.lazyLoadZoneFiles(i),u=+(s=function e(i,a){var r,s,o,l,h=L;for("s","tring",r="number"==typeof i?i:new Date(+i).getTime(),s=a,o=t.zones[s];"string"===R(o);)s=o,o=t.zones[s];if(!o){if(!t.loadedZones.backward)return t.loadZoneFile("backward"),e(i,a);if(s&&s!==a)return t.lazyLoadZoneFiles(s),e(i,s);n(s)}if(0===o.length)throw h.T6c(32),new Error(h.w6c(i,"' on ","No Zone found for '",a));for(var c=o.length-1;c>=0&&!((l=o[c])[3]&&r>l[3]);c--);return h.V6c(0),o[h.w6c(1,c)]}(e,i))[0],L.L1n(),(d=function(e,i,r,n){var s,u,d,p,m,g,f,y,v,x,b,S,C,w=L;if("nu","mber",s="number"===R(e)?new Date(e):e,u=i[1],d=i[0],p=u.match(/^([0-9]):([0-9][0-9])$/))return"m","a","x",[-1e6,"max","-","Jan",1,[0,0,0],60*parseInt(p[1],10)+parseInt(p[2],10),"-"];if(m=function(t,e,i){var a,r;if(w.L1n(),a=0,"u"===e||"g"===e||"z"===e){132285812,-361037738,r=2;for(var n=1;132285812!==w.D3T(n.toString(),n.toString().length,58620);n++)a=4,r+=2;-361037738!==w.m3T(r.toString(),r.toString().length,17377)&&(a=0)}else if("s"===e)a=d;else{if("w"!==e&&e)throw w.T6c(0),new Error(w.r6c(e,"unknown type "));a=o(d,i[6])}return w.V6c(1),a*=w.r6c(60,1e3),new Date(t.getTime()+a)},g=function(t,e){var i,a,r,n,s,o,u;return i=t[0],r=(a=t[1])[5],c[i]||(c[i]={}),c[i][a]?n=c[i][a]:(isNaN(a[4])?("l","a","s","t","last"===a[4].substr(0,4)?(n=new Date(Date.UTC(i,l[a[3]]+1,1,r[0]-24,r[1],r[2],0)),s=h[a[4].substr(4,3)],o="<="):(n=new Date(Date.UTC(i,l[a[3]],a[4].substr(5),r[0],r[1],r[2],0)),s=h[a[4].substr(0,3)],o=a[4].substr(3,2)),u=n.getUTCDay(),">="===o?n.setUTCDate(n.getUTCDate()+(s-u+(s<u?7:0))):n.setUTCDate(n.getUTCDate()+(s-u-(s>u?7:0)))):n=new Date(Date.UTC(i,l[a[3]],a[4],r[0],r[1],r[2],0)),c[i][a]=n),e&&(n=m(n,r[3],e)),n},f=function(t,e){var i;i=[],w.L1n();for(var a=0;e&&a<e.length;a++)"m","a","x",e[a][0]<=t&&(e[a][1]>=t||e[a][0]===t&&"only"===e[a][1]||"max"===e[a][1])&&i.push([t,e[a]]);return i},y=function(t,e,i){var a,n;return t instanceof Date?i&&(t=m(t,r?"u":"w",i)):(w.T6c(35),a=t[w.w6c(2147483647,"0")],n=t[1],t=!i&&c[a]&&c[a][n]?c[a][n]:g(t,i)),w.b1n(),e instanceof Date?i&&(e=m(e,r?"u":"w",i)):(a=e[0],n=e[1],e=!i&&c[a]&&c[a][n]?c[a][n]:g(e,i)),t=Number(t),e=Number(e),w.V6c(5),w.r6c(t,e)},v=s.getUTCFullYear(),b=a.ruleCache[n],w.b1n(),b||(b=a.ruleCache[n]={}),(x=b[v])||(w.T6c(5),(x=(x=f(w.w6c(v,1),t.rules[u])).concat(f(v,t.rules[u]))).sort(y),b[v]=x),!x||!x.length)return null;for(var T=x.length-1;T>=0;T--)if(T>0?(w.V6c(17),S=x[w.r6c("1",T)][1]):S=null,(C=x[T])[2]||(w.V6c(5),C[w.r6c("2",0)]=g(C,S)),y(s,C,S)>=0)return C[1];return null}(e,s,r,i))&&(u=o(u,d[6])),{tzOffset:u,tzAbbr:function(t,e){var i,a;if((i=t[2]).indexOf("%s")>-1){a=e?"-"===e[7]?"":e[7]:"S",-1684551227,-517062660,2;for(var r=1;-1684551227!==L.m3T(r.toString(),r.toString().length,91139);r++)return i.replace("",a);if(-517062660!==L.m3T(2..toString(),2..toString().length,26268))return i.replace("%s",a)}else if(i.indexOf("/")>-1)return i.split("/",2)[e&&e[6]?1:0];return i}(s,d)}},this.lazyLoadZoneFiles=function(t){var e;if(this.loadingScheme===this.loadingSchemes.LAZY_LOAD){if(!(e=s(t)))throw new Error("Not a valid timezone ID.");this.loadZoneFiles(e)}}}}.call("undefined"!==("undefined"==typeof window?"undefined":R(window))?window:void 0),a.timezone.loadingScheme=a.timezone.loadingSchemes.MANUAL_LOAD,a.timezone.loadZoneDataFromObject({zones:{"Atlantic/Cape_Verde":[[60,"-","-01",null]],"Africa/Cairo":[[-120,"Egypt","EE%sT",null]],"Africa/Nairobi":[[-180,"-","EAT",null]],"Africa/Casablanca":[[0,"Morocco","+00/+01",15406956e5],[-60,"Morocco","+01/+00",null]],"Africa/Johannesburg":[[-120,"SA","SAST",null]],"Africa/Tunis":[[-60,"Tunisia","CE%sT",null]],"Asia/Kabul":[[-270,"-","+0430",null]],"Asia/Baku":[[-240,"Azer","+04/+05",null]],"Asia/Dhaka":[[-360,"Dhaka","+06/+07",null]],"Asia/Yangon":[[-390,"-","+0630",null]],"Asia/Shanghai":[[-480,"PRC","C%sT",null]],"Asia/Hong_Kong":[[-480,"HK","HK%sT",null]],"Asia/Taipei":[[-480,"Taiwan","C%sT",null]],"Asia/Nicosia":[[-120,"EUAsia","EE%sT",null]],"Asia/Kolkata":[[-330,"-","IST",null]],"Asia/Tehran":[[-210,"Iran","+0330/+0430",null]],"Asia/Jerusalem":[[-120,"Zion","I%sT",null]],"Asia/Tokyo":[[-540,"Japan","J%sT",null]],"Asia/Amman":[[-120,"Jordan","EE%sT",null]],"Asia/Almaty":[[-360,"-","ALMT",null]],"Asia/Seoul":[[-540,"ROK","K%sT",null]],"Asia/Pyongyang":[[-540,"-","KST",14395968e5],[-510,"-","KST",15254766e5],[-540,"-","KST",null]],"Asia/Beirut":[[-120,"Lebanon","EE%sT",null]],"Asia/Kuala_Lumpur":[[-480,"-","+08",null]],"Asia/Hovd":[[-420,"Mongol","+07/+08",null]],"Asia/Ulaanbaatar":[[-480,"Mongol","+08/+09",null]],"Asia/Kathmandu":[[-345,"-","+0545",null]],"Asia/Karachi":[[-300,"Pakistan","PK%sT",null]],"Asia/Riyadh":[[-180,"-","+03",null]],"Asia/Damascus":[[-120,"Syria","EE%sT",null]],"Asia/Bangkok":[[-420,"-","+07",null]],"Asia/Dubai":[[-240,"-","+04",null]],"Australia/Darwin":[[-570,"Aus","CST",null]],"Australia/Perth":[[-480,"AW","WST",null]],"Australia/Eucla":[[-525,"AW","+0845/+0945",null]],"Australia/Brisbane":[[-600,"AQ","EST",null]],"Australia/Adelaide":[[-570,"AS","CST",null]],"Australia/Sydney":[[-600,"AN","EST",null]],"Pacific/Fiji":[[-720,"Fiji","+12/+13",null]],"Pacific/Guam":[[-600,"-","ChST",null]],"Pacific/Kiritimati":[[-840,"-","+14",null]],"Pacific/Noumea":[[-660,"NC","+11/+12",null]],"Pacific/Auckland":[[-720,"NZ","NZ%sT",null]],"Pacific/Chatham":[[-765,"Chatham","+1245/+1345",null]],"Pacific/Pago_Pago":[[660,"-","SST",null]],"Pacific/Apia":[[-780,"WS","+13/+14",null]],"Pacific/Tongatapu":[[-780,"Tonga","+13/+14",null]],"Etc/UTC":[[0,"-","UTC",null]],UTC:"Etc/UTC","Europe/London":[[0,"EU","GMT/BST",null]],"Europe/Dublin":[[0,"Eire","IST/GMT",null]],WET:[[0,"EU","WE%sT",null]],CET:[[-60,"C-Eur","CE%sT",null]],MET:[[-60,"C-Eur","ME%sT",null]],EET:[[-120,"EU","EE%sT",null]],"Europe/Brussels":[[-60,"EU","CE%sT",null]],"Europe/Helsinki":[[-120,"EU","EE%sT",null]],"Europe/Paris":[[-60,"EU","CE%sT",null]],"Europe/Berlin":[[-60,"EU","CE%sT",null]],"Europe/Amsterdam":[[-60,"EU","CE%sT",null]],"Atlantic/Azores":[[60,"EU","-01/+00",null]],"Europe/Bucharest":[[-120,"EU","EE%sT",null]],"Europe/Kaliningrad":[[-120,"-","EET",null]],"Europe/Moscow":[[-180,"-","MSK",null]],"Europe/Simferopol":[[-180,"-","MSK",null]],"Europe/Samara":[[-240,"-","+04",null]],"Asia/Yekaterinburg":[[-300,"-","+05",null]],"Asia/Omsk":[[-360,"-","+06",null]],"Asia/Novosibirsk":[[-360,"-","+06",14693256e5],[-420,"-","+07",null]],"Asia/Novokuznetsk":[[-420,"-","+07",null]],"Asia/Krasnoyarsk":[[-420,"-","+07",null]],"Asia/Irkutsk":[[-480,"-","+08",null]],"Asia/Yakutsk":[[-540,"-","+09",null]],"Asia/Vladivostok":[[-600,"-","+10",null]],"Asia/Magadan":[[-600,"-","+10",14614632e5],[-660,"-","+11",null]],"Asia/Srednekolymsk":[[-660,"-","+11",null]],"Asia/Kamchatka":[[-720,"-","+12",null]],"Europe/Belgrade":[[-60,"EU","CE%sT",null]],"Europe/Sarajevo":"Europe/Belgrade","Europe/Istanbul":[[-120,"EU","EE%sT",14457348e5],[-120,"1:00","EEST",14469444e5],[-120,"EU","EE%sT",14732064e5],[-180,"-","+03",null]],"America/New_York":[[300,"US","E%sT",null]],"America/Chicago":[[360,"US","C%sT",null]],"America/Denver":[[420,"US","M%sT",null]],"America/Los_Angeles":[[480,"US","P%sT",null]],"America/Juneau":[[540,"US","AK%sT",null]],"Pacific/Honolulu":[[600,"-","HST",null]],"America/Phoenix":[[420,"-","MST",null]],"America/St_Johns":[[210,"Canada","N%sT",null]],"America/Halifax":[[240,"Canada","A%sT",null]],"America/Regina":[[360,"-","CST",null]],"America/Mexico_City":[[360,"Mexico","C%sT",null]],"America/Chihuahua":[[420,"Mexico","M%sT",null]],"America/Costa_Rica":[[360,"CR","C%sT",null]],"America/Havana":[[300,"Cuba","C%sT",null]],"America/Port-au-Prince":[[300,"Haiti","E%sT",null]],"America/Panama":[[300,"-","EST",null]],"America/Puerto_Rico":[[240,"-","AST",null]],"America/Argentina/Buenos_Aires":[[180,"Arg","-03/-02",null]],"America/Sao_Paulo":[[180,"Brazil","-03/-02",null]],"America/Santiago":[[240,"Chile","-04/-03",null]],"America/Punta_Arenas":[[240,"Chile","-04/-03",14808096e5],[180,"-","-03",null]],"America/Bogota":[[300,"CO","-05/-04",null]],"America/Asuncion":[[240,"Para","-04/-03",null]],"Atlantic/South_Georgia":[[120,"-","-02",null]],"America/Montevideo":[[180,"Uruguay","-03/-02",null]],"America/Caracas":[[270,"-","-0430",14620698e5],[240,"-","-04",null]],"Europe/Athens":"Europe/Bucharest","Asia/Rangoon":"Asia/Yangon","Atlantic/Reykjavik":"UTC","Asia/Kuwait":"Asia/Riyadh","Asia/Muscat":"Asia/Riyadh","Asia/Istanbul":"Europe/Istanbul"},rules:{Egypt:[],Morocco:[[2013,2018,"-","Oct","lastSun",[3,0,0,null],0,"-"],[2014,2018,"-","Mar","lastSun",[2,0,0,null],60,"-"],[2015,"only","-","Jun","14",[3,0,0,null],0,"-"],[2015,"only","-","Jul","19",[2,0,0,null],60,"-"],[2016,"only","-","Jun","5",[3,0,0,null],0,"-"],[2016,"only","-","Jul","10",[2,0,0,null],60,"-"],[2017,"only","-","May","21",[3,0,0,null],0,"-"],[2017,"only","-","Jul","2",[2,0,0,null],60,"-"],[2018,"only","-","May","13",[3,0,0,null],0,"-"],[2018,"only","-","Jun","17",[2,0,0,null],60,"-"],[2019,"only","-","May","5",[3,0,0,null],-60,"-"],[2019,"only","-","Jun","9",[2,0,0,null],0,"-"],[2020,"only","-","Apr","19",[3,0,0,null],-60,"-"],[2020,"only","-","May","24",[2,0,0,null],0,"-"],[2021,"only","-","Apr","11",[3,0,0,null],-60,"-"],[2021,"only","-","May","16",[2,0,0,null],0,"-"],[2022,"only","-","Mar","27",[3,0,0,null],-60,"-"],[2022,"only","-","May","8",[2,0,0,null],0,"-"],[2023,"only","-","Mar","19",[3,0,0,null],-60,"-"],[2023,"only","-","Apr","23",[2,0,0,null],0,"-"]],SA:[],Tunisia:[],EUAsia:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],Azer:[[1997,2015,"-","Mar","lastSun",[4,0,0,null],60,"-"],[1997,2015,"-","Oct","lastSun",[5,0,0,null],0,"-"]],Dhaka:[],PRC:[],HK:[],Taiwan:[],Iran:[[2013,2015,"-","Mar","22",[0,0,0,null],60,"-"],[2013,2015,"-","Sep","22",[0,0,0,null],0,"-"],[2016,"only","-","Mar","21",[0,0,0,null],60,"-"],[2016,"only","-","Sep","21",[0,0,0,null],0,"-"],[2017,2019,"-","Mar","22",[0,0,0,null],60,"-"],[2017,2019,"-","Sep","22",[0,0,0,null],0,"-"],[2020,"only","-","Mar","21",[0,0,0,null],60,"-"],[2020,"only","-","Sep","21",[0,0,0,null],0,"-"],[2021,2023,"-","Mar","22",[0,0,0,null],60,"-"],[2021,2023,"-","Sep","22",[0,0,0,null],0,"-"]],Zion:[[2013,"max","-","Mar","Fri>=23",[2,0,0,null],60,"D"],[2013,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],Japan:[],Jordan:[[2014,"max","-","Mar","lastThu",[24,0,0,null],60,"S"],[2014,"max","-","Oct","lastFri",[0,0,0,"s"],0,"-"]],ROK:[],Lebanon:[[1993,"max","-","Mar","lastSun",[0,0,0,null],60,"S"],[1999,"max","-","Oct","lastSun",[0,0,0,null],0,"-"]],Mongol:[[2015,2016,"-","Mar","lastSat",[2,0,0,null],60,"-"],[2015,2016,"-","Sep","lastSat",[0,0,0,null],0,"-"]],Pakistan:[],Syria:[[2012,"max","-","Mar","lastFri",[0,0,0,null],60,"S"],[2009,"max","-","Oct","lastFri",[0,0,0,null],0,"-"]],Aus:[],AW:[],AQ:[],AS:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"-"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"-"]],AN:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"-"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"-"]],Fiji:[[2014,"max","-","Nov","Sun>=1",[2,0,0,null],60,"-"],[2015,"max","-","Jan","Sun>=13",[3,0,0,null],0,"-"]],NC:[],NZ:[[2007,"max","-","Sep","lastSun",[2,0,0,"s"],60,"D"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"]],Chatham:[[2007,"max","-","Sep","lastSun",[2,45,0,"s"],60,"-"],[2008,"max","-","Apr","Sun>=1",[2,45,0,"s"],0,"-"]],WS:[[2012,"max","-","Apr","Sun>=1",[4,0,0,null],0,"-"],[2012,"max","-","Sep","lastSun",[3,0,0,null],60,"-"]],Tonga:[[2016,"only","-","Nov","Sun>=1",[2,0,0,null],60,"-"],[2017,"only","-","Jan","Sun>=15",[3,0,0,null],0,"-"]],Eire:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],0,"-"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],-60,"-"]],EU:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],"C-Eur":[[1981,"max","-","Mar","lastSun",[2,0,0,"s"],60,"S"],[1996,"max","-","Oct","lastSun",[2,0,0,"s"],0,"-"]],US:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Canada:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Mexico:[[2002,"max","-","Apr","Sun>=1",[2,0,0,null],60,"D"],[2002,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],CR:[],Cuba:[[2012,"max","-","Nov","Sun>=1",[0,0,0,"s"],0,"S"],[2013,"max","-","Mar","Sun>=8",[0,0,0,"s"],60,"D"]],Haiti:[[2012,2015,"-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2012,2015,"-","Nov","Sun>=1",[2,0,0,null],0,"S"],[2017,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2017,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Arg:[],Brazil:[[2008,2017,"-","Oct","Sun>=15",[0,0,0,null],60,"-"],[2015,"only","-","Feb","Sun>=22",[0,0,0,null],0,"-"],[2016,2019,"-","Feb","Sun>=15",[0,0,0,null],0,"-"],[2018,"only","-","Nov","Sun>=1",[0,0,0,null],60,"-"]],Chile:[[2016,2018,"-","May","Sun>=9",[3,0,0,"u"],0,"-"],[2016,2018,"-","Aug","Sun>=9",[4,0,0,"u"],60,"-"],[2019,"max","-","Apr","Sun>=2",[3,0,0,"u"],0,"-"],[2019,"max","-","Sep","Sun>=2",[4,0,0,"u"],60,"-"]],CO:[],Para:[[2010,"max","-","Oct","Sun>=1",[0,0,0,null],60,"-"],[2013,"max","-","Mar","Sun>=22",[0,0,0,null],0,"-"]],Uruguay:[[2006,2015,"-","Mar","Sun>=8",[2,0,0,null],0,"-"]]}})},D=function(t){var e,i;(e="undefined"!==("undefined"==typeof _CIQ?"undefined":R(_CIQ))?_CIQ:t.CIQ).ChartEngine.prototype.touchSingleClick=function(t,i,a){var r,n;return r=this,n=arguments,function(){(function(){var t,s,o,l;if("touchSin","gl","eClick",L.L1n(),!this.cancelTouchSingleClick){if(this.runPrepend("touchSingleClick",n))return;if(this.editingAnnotation)return;if(this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},!this.displayCrosshairs)return;if(!this.displayInitialized)return;if(""!==this.openDialog)return;if(i<this.left||i>this.right||a<this.top||a>this.bottom)return;t=this.backOutY(e.ChartEngine.crosshairY),s=this.backOutX(e.ChartEngine.crosshairX),this.currentPanel=this.whichPanel(t),o=this.currentVectorParameters.vectorType,e.Drawing&&o&&e.Drawing[o]&&(new e.Drawing[o]).dragToDraw||(this.drawingClick(this.currentPanel,s,t)||this.layout.crosshair||(e.ChartEngine.crosshairY=0,L.V6c(29),e.ChartEngine.crosshairX=L.w6c("0",0),this.cx=this.backOutX(e.ChartEngine.crosshairX),this.cy=this.backOutY(e.ChartEngine.crosshairY),this.findHighlights(null,!0),e.ChartEngine.crosshairY=a,e.ChartEngine.crosshairX=i,l=this.container.getBoundingClientRect(),this.top=l.top,this.left=l.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.cx=this.backOutX(e.ChartEngine.crosshairX),this.cy=this.backOutY(e.ChartEngine.crosshairY),this.currentPanel&&this.currentPanel.chart.dataSet&&(this.crosshairTick=this.tickFromPixel(this.cx,this.currentPanel.chart),this.crosshairValue=this.adjustIfNecessary(this.currentPanel,this.crosshairTick,this.valueFromPixel(this.cy,this.currentPanel))),this.headsUpHR(),this.findHighlights(!0)),this.currentVectorParameters.vectorType||this.dispatch("tap",{stx:this,panel:this.currentPanel,x:s,y:t}))}r.cancelTouchSingleClick=!1,this.runAppend("touchSingleClick",n)}).apply(r,n)}},e.ChartEngine.prototype.touchDoubleClick=function(t,i,a){var r,n;r="tou",r+="chDo",r+="ubleClick",n="touchD",n+="ouble",n+="Clic",n+="k",this.runPrepend(n,arguments)||this.dispatch("doubleTap",{stx:this,finger:t,x:i,y:a})||this.editingAnnotation||(e.ChartEngine.drawingLine?this.undo():this.activeMarker&&this.activeMarker.doubleClick(t,i,a),this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},this.runAppend(r,arguments))},e.ChartEngine.prototype.startProxy=function(t){this.touchPointerType=t.pointerType,"touch"==this.touchPointerType?(this.mouseMode=!1,this.touches[this.touches.length]={pointerId:t.pointerId,pageX:t.clientX,pageY:t.clientY,clientX:t.clientX,clientY:t.clientY},this.changedTouches=[{pointerId:t.pointerId,pageX:t.clientX,pageY:t.clientY,clientX:t.clientX,clientY:t.clientY}],1==this.touches.length&&(this.gesturePointerId=t.pointerId),this.touchstart(t)):this.mouseMode=!0},e.ChartEngine.prototype.moveProxy=function(t){t.pointerType&&"touch"!=t.pointerType?this.mouseMode=!0:(this.mouseMode=!1,this.touchmove(t))},e.ChartEngine.prototype.endProxy=function(t){var e;if("touc","h","touch"==this.touchPointerType){this.mouseMode=!1,e=this.touches.length;for(var i=0;i<this.touches.length;i++)if(this.touches[i].pointerId==t.pointerId){this.touches.splice(i,1);break}if(i==e)return this.touches=[],this.grabbingScreen=!1,void(this.touching=!1);this.changedTouches=[{pointerId:t.pointerId,pageX:t.clientX,pageY:t.clientY,clientX:t.clientX,clientY:t.clientY}],this.touchend(t)}else this.mouseMode=!0},e.ChartEngine.prototype.msMouseMoveProxy=function(t){!this.touches.length&&this.mouseMode&&this.mousemove(t)},e.ChartEngine.prototype.msMouseDownProxy=function(t){this.mouseMode&&this.mousedown(t)},e.ChartEngine.prototype.msMouseUpProxy=function(t){this.mouseMode&&this.mouseup(t)},e.ChartEngine.prototype.iosMouseMoveProxy=function(t){this.touching||this.mousemove(t)},e.ChartEngine.prototype.iosMouseDownProxy=function(t){this.touching?this.mouseMode=!1:(this.mouseMode=!0,this.mousedown(t))},e.ChartEngine.prototype.iosMouseUpProxy=function(t){this.touching||this.mouseup(t)},e.ChartEngine.prototype.touchmove=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,E,O,I,N,H,V,z,B,W=L;if(i="p",i+="e",i+="n",this.displayInitialized&&""===this.openDialog&&!0!==e.ChartEngine.ignoreTouch){if(a=[],(!this.overYAxis||this.controls&&this.controls.crossX&&"none"!=this.controls.crossX.style.display)&&(t&&t.preventDefault&&this.captureTouchEvents&&t.preventDefault(),t&&t.stopPropagation()),W.b1n(),r=(new Date).getTime(),-1==this.clicks.s2MS){if(this.clicks.e1MS=r,this.clicks.e1MS-this.clicks.s1MS<25)return}else if(this.clicks.e2MS=r,this.clicks.e2MS-this.clicks.s2MS<25)return;if(t.pointerType||(t.pointerType=this.touchPointerType),e.isSurface){if(this.mouseMode)return;t.pointerId||(t.pointerId=this.gesturePointerId);for(var j=0;j<this.touches.length;j++)if(this.touches[j].pointerId==t.pointerId){if(n=Math.abs(this.touches[j].pageX-t.clientX),s=Math.abs(this.touches[j].pageY-t.clientY),W.V6c(21),!Math.sqrt(W.r6c(s,s,n,n)))return;if(this.clicks.e1MS=(new Date).getTime(),this.clicks.e1MS-this.clicks.s1MS<50)return;if(this.touches[j].pageX==t.clientX&&this.touches[j].pageY==t.clientY)return;this.touches[j].pageX=this.touches[j].clientX=t.clientX,this.touches[j].pageY=this.touches[j].clientY=t.clientY;break}if(0===j?this.movedPrimary=!0:this.movedSecondary=!0,j==this.touches.length)return;this.changedTouches=[{pointerId:t.pointerId,pageX:t.clientX,pageY:t.clientY,clientX:t.clientX,clientY:t.clientY}],a=this.touches.length?this.touches:this.changedTouches}else a=t.touches,this.changedTouches=t.changedTouches;if(!(1==a.length&&Math.pow(this.clicks.x-a[0].clientX,2)+Math.pow(this.clicks.y-a[0].clientY,2)<=16||(o=this.crosshairXOffset,l=this.crosshairYOffset,h=this.currentVectorParameters.vectorType&&""!==this.currentVectorParameters.vectorType,c=!this.layout.crosshair&&!h&&!this.touchNoPan,(t.pointerType==i||c||this.activeDrawing&&"freeform"==this.activeDrawing.name)&&(o=l=0),this.runPrepend("touchmove",arguments)))){if(e.ChartEngine.resizingPanel)return W.T6c(30),u=(p=a[W.w6c("0",0)]).clientX,d=p.clientY,W.V6c(0),void this.mousemoveinner(W.r6c(o,u),W.w6c(l,d));if(-1!=this.moveB&&(this.touchMoveTime=new Date),this.moveA=this.moveB,this.moveB=a[0].pageX,1!=a.length||this.twoFingerStart){if(2==a.length&&this.allowZoom){if(!this.displayCrosshairs)return;if(W.V6c(30),x=(v=a[W.r6c("0",0)]).clientX,b=v.clientY,C=(S=a[1]).clientX,w=S.clientY,W.V6c(83),m=Math.sqrt(W.r6c(x,C,w,b,x,b,w,C)),this.pinchingCenter=(Math.min(x,C)-Math.max(x,C))/2,T=Math.round(this.gestureStartDistance-m),c&&(this.pinchingScreen=5),this.clearPixelCache(),this.pinchingScreen<2){if(e.isSurface&&(!this.movedPrimary||!this.movedSecondary))return;if(x<this.pt.x1&&C<this.pt.x2||x>this.pt.x1&&C>this.pt.x2||b<this.pt.y1&&w<this.pt.y2||b>this.pt.y1&&w>this.pt.y2)this.pinchingScreen=0;else if(this.pinchingScreen++,this.pinchingScreen<2)return}if(this.pt={x1:x,x2:C,y1:b,y2:w},0===this.pinchingScreen)this.grabMode="pan",W.V6c(0),this.mousemoveinner(W.r6c(o,x),W.w6c(l,b)),this.gestureStartDistance=m;else{if(k=Math.asin((Math.max(w,b)-Math.min(w,b))/m),Math.abs(T)<12&&!c){if(this.moveCount++,4==this.moveCount)return this.pinchingScreen=0,void(this.moveCount=0)}else this.moveCount=0;if(k<1||!this.goneVertical&&k<1.37){if(!this.currentPanel)return;if(D=this.currentPanel.chart,this.goneVertical=!1,m=this.pt.x2-this.pt.x1,A=this.grabStartValues.t2-this.grabStartValues.t1,M=this.grabStartValues.t1+A/2,W.V6c(6),P=W.w6c(A,m),!1===D.allowScrollFuture&&!1===D.allowScrollPast&&(P=Math.max(P,D.width/D.dataSet.length)),F=this.layout.candleWidth,this.setCandleWidth(P,D),D.maxTicks<this.minimumZoomTicks)return void this.setCandleWidth(F,D);this.micropixels=0,_=this.pixelFromTick(Math.round(M),D),R=this.pt.x1-this.left+Math.round(m/2),W.T6c(5),E=W.r6c(_,R),W.V6c(6),O=W.w6c(P,E),I=Math.round(O),D.scroll-=I,W.T6c(5),this.microscroll=W.w6c(I,O),this.micropixels=P*this.microscroll,this.draw()}else if(N=this.grabStartYAxis,this.goneVertical=!0,N){H=734120237,V=-1729637483,z=2;for(var Y=1;W.m3T(Y.toString(),Y.toString().length,75788)!==H;Y++)N.zoom=this.grabStartZoom/(this.gestureStartDistance+m),W.V6c(1),z+=W.w6c("2",1);W.m3T(z.toString(),z.toString().length,54768)!==V&&(N.zoom=this.grabStartZoom+(this.gestureStartDistance-m)),this.grabStartZoom<N.height?N.zoom>=N.height&&(N.zoom=N.height-1):N.zoom<=N.height&&(N.zoom=N.height+1),this.draw()}this.updateChartAccessories()}}else if(3==a.length&&e.ChartEngine.allowThreeFingerTouch){if(!this.displayCrosshairs)return;B=a[0].clientX,m=this.grabStartX-B,this.grabEndPeriodicity=this.grabStartPeriodicity+Math.round(m/10),this.grabEndPeriodicity<1&&(this.grabEndPeriodicity=1)}}else u=(g=a[0]).clientX,d=g.clientY,this.pinchingScreen=0,W.V6c(0),this.mousemoveinner(W.w6c(o,u),W.w6c(l,d)),f=this.whichPanel(d),y=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=d<=this.top+y&&d>=y-this.xaxisHeight+this.top&&this.insideChart,this.overYAxis=!!f&&((u>=f.right||u<=f.left)&&this.insideChart);this.runAppend("touchmove",arguments)}}},e.ChartEngine.prototype.touchstart=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,M,P,F,_,R,E=L;if(i="touchsta",i+="rt",a="p",E.L1n(),a+="e",a+="n",!e.ChartEngine.ignoreTouch&&(e.isSurface?(this.movedPrimary=!1,this.movedSecondary=!1):(this.touchingEvent&&clearTimeout(this.touchingEvent),this.touching=!0,this.touches=t.touches,this.changedTouches=t.changedTouches),!e.ChartEngine.resizingPanel&&(r=this.crosshairXOffset,n=this.crosshairYOffset,this.touchPointerType==a&&(E.T6c(5),r=n=E.w6c("0",0)),!this.runPrepend("touchstart",arguments)))){if(this.manageTouchAndMouse&&t&&t.preventDefault&&this.captureTouchEvents&&t.preventDefault(),this.hasDragged=!1,this.doubleFingerMoves=0,E.V6c(13),this.moveCount=E.r6c("0",1738732832),this.twoFingerStart=!1,1==this.touches.length||2==this.touches.length){if(1==this.changedTouches.length&&(d=!1,(u=Date.now())-this.clicks.e1MS<250&&(this.cancelTouchSingleClick=!0,this.clicks.s2MS=u,d=Math.pow(this.clicks.x-this.changedTouches[0].pageX,2)+Math.pow(this.clicks.y-this.changedTouches[0].pageY,2)<=400),d||(this.cancelTouchSingleClick=!1,this.clicks.s1MS=u,this.clicks.e1MS=-1,this.clicks.s2MS=-1,this.clicks.e2MS=-1),this.clicks.x=this.changedTouches[0].pageX,this.clicks.y=this.changedTouches[0].pageY),this.touchMoveTime=Date.now(),this.moveA=this.touches[0].clientX,this.moveB=-1,l=(p=this.touches[0]).clientX,h=p.clientY,m=this.container.getBoundingClientRect(),this.top=m.top,this.left=m.left,this.right=this.left+this.width,this.bottom=this.top+this.height,1==this.touches.length&&(g=this.backOutY(h),this.currentPanel=this.whichPanel(g)),this.currentPanel||(this.currentPanel=this.chart.panel),c=this.currentPanel,l>=this.left&&l<=this.right&&h>=this.top&&h<=this.bottom){this.insideChart=!0,f=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=h<=this.top+f&&h>=this.top+f-this.xaxisHeight,this.overYAxis=l>=this.left+c.right||l<=this.left+c.left,y=-1,this.cy=this.backOutY(h),this.cx=this.backOutX(l),this.crosshairTick=this.tickFromPixel(this.cx,c.chart),this.crosshairValue=this.adjustIfNecessary(c,this.crosshairTick,this.valueFromPixel(this.cy,this.currentPanel));for(var O=0;O<this.drawingObjects.length;O++)if((v=this.drawingObjects[O]).highlighted){if(y<0&&(y=O),x=v.highlighted,this.findHighlights(!0),O==y&&v.highlighted&&!v.permanent)return void(-1==this.clicks.s2MS?this.activateRepositioning(v):this.findHighlights(!1,!0));this.anyHighlighted=!0,v.highlighted=x}}else this.insideChart=!1;if(b=this.currentVectorParameters.vectorType&&""!==this.currentVectorParameters.vectorType,this.layout.crosshair||b||!this.insideChart||this.touchNoPan){if(this.grabbingScreen=!1,this.insideChart&&c.subholder===t.target&&(k=this.currentVectorParameters.vectorType,e.Drawing&&k&&e.Drawing[k]&&(new e.Drawing[k]).dragToDraw))return this.userPointerDown=!0,e.ChartEngine.crosshairX=l,e.ChartEngine.crosshairY=h,c&&c.chart.dataSet&&(this.crosshairTick=this.tickFromPixel(this.backOutX(e.ChartEngine.crosshairX),this.currentPanel.chart),this.crosshairValue=this.adjustIfNecessary(c,this.crosshairTick,this.valueFromPixel(this.backOutY(e.ChartEngine.crosshairY),this.currentPanel))),this.drawingClick(c,this.backOutX(l),this.backOutY(h)),void this.headsUpHR()}else{if(r=n=0,(S=this.mainSeriesRenderer||{}).params&&S.params.baseline&&!1!==this.chart.baseline.userLevel&&this.controls.baselineHandle&&(E.V6c(5),C=this.valueFromPixel(E.w6c(g,5),c),E.T6c(15),w=this.valueFromPixel(E.r6c(g,"5"),c),T=this.chart.right-parseInt(getComputedStyle(this.controls.baselineHandle).width,10),this.chart.baseline.actualLevel<Math.max(C,w)&&this.chart.baseline.actualLevel>Math.min(C,w)&&this.backOutX(p.clientX)>T))return this.repositioningBaseline={lastDraw:Date.now()},void this.controls.baselineHandle.classList.add("stx-grab");for(s in this.panels)if((o=this.panels[s]).highlighted)return void this.grabHandle(o);this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),c.chart.spanLock=!1,this.yToleranceBroken=!1,E.T6c(0),this.grabStartX=E.w6c(r,l),E.T6c(0),this.grabStartY=E.r6c(n,h),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=c.chart.scroll,this.grabStartScrollY=c.yAxis.scroll,this.grabStartPanel=this.currentPanel,this.swipeStart&&this.swipeStart(c.chart),this.grabStartYAxis=this.whichYAxis(c,this.backOutX(l)),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,setTimeout((N=this,E.b1n(),function(){E.b1n(),N.grabbingHand()}),100)}if(1===this.touches.length&&this.layout.crosshair&&!b&&c.subholder===t.target){D=437378129,A=-641919259,M=2;for(var I=1;E.D3T(I.toString(),I.toString().length,92899)!==D;I++)E.T6c(38),this.mousemoveinner(E.r6c(r,l),E.r6c(n,h)),M+=2;E.D3T(M.toString(),M.toString().length,73614)!==A&&(E.V6c(0),this.mousemoveinner(E.w6c(r,l),E.w6c(n,h)))}}var N,H;if(2==this.touches.length){if(this.cancelLongHold=!0,this.swipe.end=!0,!this.displayCrosshairs&&!this.touchNoPan||!this.insideChart)return;for(s in F=(P=this.touches[1]).clientX,_=P.clientY,this.panels)if((o=this.panels[s]).highlighted)return void this.grabHandle(o);c=this.currentPanel,E.V6c(83),this.gestureStartDistance=Math.sqrt(E.r6c(l,F,_,h,l,h,_,F)),this.pt={x1:l,x2:F,y1:h,y2:_},this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),c.chart.spanLock=!1,E.V6c(0),this.grabStartX=E.w6c(r,l),E.V6c(0),this.grabStartY=E.r6c(n,h),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=c.chart.scroll,this.grabStartScrollY=c.yAxis.scroll,this.grabStartPanel=c,this.swipeStart&&this.swipeStart(c.chart),this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartYAxis=this.whichYAxis(c,this.backOutX((l+F)/2))||c.yAxis,this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPt=this.pt,this.grabStartValues={x1:this.pt.x1,x2:this.pt.x2,y1:this.valueFromPixel(this.pt.y1-this.top,c),y2:this.valueFromPixel(this.pt.y2-this.top,c),t1:this.tickFromPixel(this.pt.x1-this.left,c.chart),t2:this.tickFromPixel(this.pt.x2-this.left,c.chart)},this.twoFingerStart=!0,setTimeout((H=this,function(){E.L1n(),H.grabbingHand()}),100)}else if(3==this.touches.length){if(!this.displayCrosshairs)return;R=this.touches[0].clientX,this.grabStartX=R,this.grabStartPeriodicity=this.layout.periodicity}1!=this.touches.length||this.layout.crosshair||(this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,(this.longHoldTime||0===this.longHoldTime)&&this.startLongHoldTimer()),this.runAppend(i,arguments)}},e.ChartEngine.prototype.touchend=function(t){var i,a,r,n,s,o,l,h,c,u;if(!e.ChartEngine.ignoreTouch&&(this.swipe.end=!0,e.isSurface||(this.touches=t.touches,this.changedTouches=t.changedTouches),!this.runPrepend("touchend",arguments))){if(this.cancelLongHold=!0,this.touches.length<=1&&(this.layout.crosshair||this.currentVectorParameters.vectorType)&&(this.touches.length&&this.twoFingerStart||(this.grabbingScreen=!1)),this.touches.length&&(this.grabStartX=-1,this.grabStartY=-1),i=this.pinchingScreen,this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),L.b1n(),this.touches.length){if(e.ChartEngine.resizingPanel)return}else{if(this.touchingEvent=setTimeout((d=this,L.b1n(),function(){d.touching=!1}),500),e.ChartEngine.resizingPanel)return void this.releaseHandle();this.pinchingScreen=null,this.pinchingCenter=null,this.goneVertical=!1,this.grabbingScreen=!1,this.grabMode="",this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(this.cx,this.cy),this.currentPanel=this.whichPanel(this.cy)),this.grabStartYAxis=null,this.displayDragOK(),this.doDisplayCrosshairs(),this.updateChartAccessories()}var d;if(a=this.touches.length+1,1==this.changedTouches.length){if(this.repositioningDrawing)return r="ve",r+="ctor",this.changeOccurred(r),e.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.draw(),void(this.layout.crosshair||this.currentVectorParameters.vectorType||this.findHighlights(!1,!0));if(this.repositioningBaseline)return n="s",n+="tx-g",n+="rab",this.repositioningBaseline=null,this.controls.baselineHandle.classList.remove(n),(s=this.mainSeriesRenderer||{}).params&&s.params.baseline&&s.params.type,void this.draw();if(o=Date.now(),-1==this.clicks.s2MS){if(this.clicks.e1MS=o,l=this.currentVectorParameters.vectorType,e.Drawing&&l&&e.Drawing[l]&&(new e.Drawing[l]).dragToDraw||(this.clicks.e1MS-this.clicks.s1MS<750&&!this.longHoldTookEffect&&(!this.hasDragged||this.layout.crosshair)?setTimeout(this.touchSingleClick(a,this.clicks.x,this.clicks.y),200):this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}),this.userPointerDown=!1,h=this.backOutY(this.changedTouches[0].pageY)+this.crosshairYOffset,c=this.backOutX(this.changedTouches[0].pageX)+this.crosshairXOffset,u=this.currentPanel,e.Drawing&&this.activeDrawing&&this.activeDrawing.dragToDraw&&u.subholder===t.target)return void this.drawingClick(u,c,h);this.activeMarker&&u.subholder===t.target&&this.activeMarker.click({cx:c,cy:h,panel:u})}else this.clicks.e2MS=o,this.clicks.e2MS-this.clicks.s2MS<250?this.touchDoubleClick(a,this.clicks.x,this.clicks.y):this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}}else this.displayCrosshairs&&(-1==this.grabEndPeriodicity||isNaN(this.grabEndPeriodicity)||((e.ChartEngine.isDailyInterval(this.layout.interval)||this.allowIntradayNMinute)&&this.setPeriodicity({period:this.grabEndPeriodicity,interval:this.layout.interval}),this.grabEndPeriodicity=-1));this.changedTouches.length&&((!this.layout.crosshair&&!this.currentVectorParameters.vectorType&&1==a||this.twoFingerStart&&!i&&!this.touches.length)&&(this.swipeRelease&&this.swipeRelease(),this.findHighlights(!1,!0)),i&&this.continuousZoom&&(this.continuousZoom.execute(),this.continuousZoom.execute(!0))),this.touches.length||(this.twoFingerStart=!1),this.runAppend("touchend",arguments)}},i=!1,e.ChartEngine.prototype.mousemoveinner=e.ChartEngine.prototype.mousemoveinner||function(t,e){i||console.error("touch feature requires activating movement feature."),L.L1n(),i=!0}},A=function(t){var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Visualization=e.Visualization||function(t){L.b1n(),t?"function"===R(t.renderFunction)?(this.container=null,this.attributes=t,this.data=null,this.object=null):console.log("CIQ.Visualization() missing renderFunction property in attributes."):console.log("CIQ.Visualization() missing attributes argument.")},e.extend(e.Visualization.prototype,{destroy:function(t){var i;i=this.container,e.resizeObserver(i,null,i.resizeHandle),i.autoGenerated?(i.parentNode.removeChild(i),delete this.container):i.innerHTML="",t||(this.attributes=null,this.container=null,this.data=null,L.b1n(),this.object=null,this.destroy=this.draw=this.setAttributes=function(){},this.updateData=function(){})},draw:function(t){var i,a,r,n,s;this.data&&"object"===R(this.data)?("string"==typeof(a=(i=this.attributes).container||this.container)&&(a=document.querySelector(a)),a||("300","p","x",(a=document.createElement("div")).style.height=a.style.width="300px",document.body.appendChild(a),a.autoGenerated=!0),i.stx&&(r=i.stx.chart.canvasShim,i.useCanvasShim&&r&&r!==a&&r!==a.parentNode&&(a.autoGenerated||((a=a.cloneNode()).id="",a.autoGenerated=!0),r.appendChild(a))),this.container&&this.container!==a&&this.destroy(!0),a.resizeHandle||(n=function(t){return function(){t.data&&t.container&&document.body.contains(t.container)&&t.draw.call(t,!0)}},a.resizeHandle=e.resizeObserver(a,n(this),null,100)),this.container=a,this.attributes=i,(s=(i=e.ensureDefaults({container:this.container},this.attributes)).renderFunction(Object.values(this.data).sort((function(t,e){return t.index<e.index?-1:t.index>e.index?1:0})),i))&&(i.id&&(s.id=i.id),(t||i.forceReplace)&&(this.container.innerHTML="",this.container.appendChild(s))),this.attributes=i,this.object=s):console.log("CIQ.Visualization.draw() missing data.")},setAttributes:function(t,e){var i,a,r;if("i","d",i=["renderFunction","container","stx","useCanvasShim","id","forceReplace"],a=!1,r=t,"string"==typeof t&&((r={})[t]=e),"object"==R(r))for(var n in r)this.attributes[n]!==r[n]&&-1!==i.indexOf(n)&&(a=!0),this.attributes[n]=r[n];this.draw(a)},updateData:function(t,i){var a,r,n;for(a in"u","pd","at","e",n=Array.isArray(t)?t.reduce((function(t,e){return t[e.name]=e,L.b1n(),t}),{}):e.shallowClone(t))r=n[a],"[object Object]"!==Object.prototype.toString.call(r)&&(n[a]={value:r}),n[a].name||(n[a].name=a),n[a].value||(n[a].value=0);switch(i||(i="replace"),i.toLowerCase()){case"delete":for(a in n)delete this.data[a];break;case"replace":this.data={};case"update":case"add":for(a in n)for(var s in this.data[a]||(this.data[a]={name:a}),r=n[a].value,"[object Number]"==Object.prototype.toString.call(r)?(this.data[a].value&&"update"!=i||(this.data[a].value=0),this.data[a].value+=r):this.data[a].value=r,n[a])"value"!==s&&(this.data[a][s]=n[a][s]);break;default:"Invalid or missing action.  Valid values are"," 'add', 'delete', 'replace', or 'update'.",console.log("Invalid or missing action.  Valid values are 'add', 'delete', 'replace', or 'update'.")}return this.draw(this.attributes.forceReplace),this}}),L.L1n(),e.ChartEngine.prototype.embedVisualization=function(t){return t||(t={}),t.stx=this,t.useCanvasShim=!0,t.translator=function(e){return L.b1n(),t.stx.translateIf(e)},L.b1n(),new e.Visualization(t)}},M={CIQ:a.c,SplinePlotter:a.d,timezoneJS:a.e,$$:a.a,$$$:a.b},"undefined"==typeof __TREE_SHAKE__||!__TREE_SHAKE__){893323517,1815607390,L.V6c(13),P=L.r6c("2",1678673664);for(var E=1;893323517!==L.D3T(E.toString(),E.toString().length,42258);E++)(M.CIQ&&a.c).activateImports(s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,1),P+=2;1815607390!==L.D3T(P.toString(),P.toString().length,41944)&&(M.CIQ&&a.c).activateImports(s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,1),(M.CIQ||a.c).activateImports(s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,w,T,k,D,A,null)}}).call(this,i(56))}}]);
//# sourceMappingURL=chartiq-bc41a9.smartcharts.js.map